{"type":"Program","start":0,"end":2276,"body":[{"type":"VariableDeclaration","start":0,"end":24,"declarations":[{"type":"VariableDeclarator","start":6,"end":24,"id":{"type":"Identifier","start":6,"end":8,"name":"fs"},"init":{"type":"CallExpression","start":11,"end":24,"callee":{"type":"Identifier","start":11,"end":18,"name":"require"},"arguments":[{"type":"Literal","start":19,"end":23,"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":25,"end":53,"declarations":[{"type":"VariableDeclarator","start":31,"end":53,"id":{"type":"Identifier","start":31,"end":35,"name":"path"},"init":{"type":"CallExpression","start":38,"end":53,"callee":{"type":"Identifier","start":38,"end":45,"name":"require"},"arguments":[{"type":"Literal","start":46,"end":52,"value":"path","raw":"'path'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":54,"end":82,"declarations":[{"type":"VariableDeclarator","start":60,"end":82,"id":{"type":"Identifier","start":60,"end":64,"name":"budo"},"init":{"type":"CallExpression","start":67,"end":82,"callee":{"type":"Identifier","start":67,"end":74,"name":"require"},"arguments":[{"type":"Literal","start":75,"end":81,"value":"budo","raw":"'budo'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":83,"end":115,"declarations":[{"type":"VariableDeclarator","start":89,"end":115,"id":{"type":"Identifier","start":89,"end":95,"name":"router"},"init":{"type":"CallExpression","start":98,"end":115,"callee":{"type":"Identifier","start":98,"end":105,"name":"require"},"arguments":[{"type":"Literal","start":106,"end":114,"value":"router","raw":"'router'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":116,"end":175,"declarations":[{"type":"VariableDeclarator","start":122,"end":175,"id":{"type":"Identifier","start":122,"end":131,"name":"companion"},"init":{"type":"CallExpression","start":134,"end":175,"callee":{"type":"Identifier","start":134,"end":141,"name":"require"},"arguments":[{"type":"Literal","start":142,"end":174,"value":"../../packages/@uppy/companion","raw":"'../../packages/@uppy/companion'"}]}}],"kind":"const"},{"type":"IfStatement","start":422,"end":592,"test":{"type":"UnaryExpression","start":426,"end":459,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":427,"end":459,"object":{"type":"MemberExpression","start":427,"end":438,"object":{"type":"Identifier","start":427,"end":434,"name":"process"},"property":{"type":"Identifier","start":435,"end":438,"name":"env"},"computed":false},"property":{"type":"Identifier","start":439,"end":459,"name":"COMPANION_AWS_REGION"},"computed":false}},"consequent":{"type":"ThrowStatement","start":461,"end":592,"argument":{"type":"NewExpression","start":467,"end":592,"callee":{"type":"Identifier","start":471,"end":476,"name":"Error"},"arguments":[{"type":"Literal","start":477,"end":591,"value":"Missing Space region, please set the COMPANION_AWS_REGION environment variable (eg. \"COMPANION_AWS_REGION=ams3\")","raw":"'Missing Space region, please set the COMPANION_AWS_REGION environment variable (eg. \"COMPANION_AWS_REGION=ams3\")'"}]}},"alternate":null},{"type":"IfStatement","start":593,"end":721,"test":{"type":"UnaryExpression","start":597,"end":627,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":598,"end":627,"object":{"type":"MemberExpression","start":598,"end":609,"object":{"type":"Identifier","start":598,"end":605,"name":"process"},"property":{"type":"Identifier","start":606,"end":609,"name":"env"},"computed":false},"property":{"type":"Identifier","start":610,"end":627,"name":"COMPANION_AWS_KEY"},"computed":false}},"consequent":{"type":"ThrowStatement","start":629,"end":721,"argument":{"type":"NewExpression","start":635,"end":721,"callee":{"type":"Identifier","start":639,"end":644,"name":"Error"},"arguments":[{"type":"Literal","start":645,"end":720,"value":"Missing access key, please set the COMPANION_AWS_KEY environment variable","raw":"'Missing access key, please set the COMPANION_AWS_KEY environment variable'"}]}},"alternate":null},{"type":"IfStatement","start":722,"end":856,"test":{"type":"UnaryExpression","start":726,"end":759,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":727,"end":759,"object":{"type":"MemberExpression","start":727,"end":738,"object":{"type":"Identifier","start":727,"end":734,"name":"process"},"property":{"type":"Identifier","start":735,"end":738,"name":"env"},"computed":false},"property":{"type":"Identifier","start":739,"end":759,"name":"COMPANION_AWS_SECRET"},"computed":false}},"consequent":{"type":"ThrowStatement","start":761,"end":856,"argument":{"type":"NewExpression","start":767,"end":856,"callee":{"type":"Identifier","start":771,"end":776,"name":"Error"},"arguments":[{"type":"Literal","start":777,"end":855,"value":"Missing secret key, please set the COMPANION_AWS_SECRET environment variable","raw":"'Missing secret key, please set the COMPANION_AWS_SECRET environment variable'"}]}},"alternate":null},{"type":"IfStatement","start":857,"end":991,"test":{"type":"UnaryExpression","start":861,"end":894,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":862,"end":894,"object":{"type":"MemberExpression","start":862,"end":873,"object":{"type":"Identifier","start":862,"end":869,"name":"process"},"property":{"type":"Identifier","start":870,"end":873,"name":"env"},"computed":false},"property":{"type":"Identifier","start":874,"end":894,"name":"COMPANION_AWS_BUCKET"},"computed":false}},"consequent":{"type":"ThrowStatement","start":896,"end":991,"argument":{"type":"NewExpression","start":902,"end":991,"callee":{"type":"Identifier","start":906,"end":911,"name":"Error"},"arguments":[{"type":"Literal","start":912,"end":990,"value":"Missing Space name, please set the COMPANION_AWS_BUCKET environment variable","raw":"'Missing Space name, please set the COMPANION_AWS_BUCKET environment variable'"}]}},"alternate":null},{"type":"VariableDeclaration","start":1016,"end":1053,"declarations":[{"type":"VariableDeclarator","start":1022,"end":1053,"id":{"type":"Identifier","start":1022,"end":1026,"name":"PORT"},"init":{"type":"LogicalExpression","start":1029,"end":1053,"left":{"type":"MemberExpression","start":1029,"end":1045,"object":{"type":"MemberExpression","start":1029,"end":1040,"object":{"type":"Identifier","start":1029,"end":1036,"name":"process"},"property":{"type":"Identifier","start":1037,"end":1040,"name":"env"},"computed":false},"property":{"type":"Identifier","start":1041,"end":1045,"name":"PORT"},"computed":false},"operator":"||","right":{"type":"Literal","start":1049,"end":1053,"value":3452,"raw":"3452"}}}],"kind":"const"},{"type":"VariableDeclaration","start":1055,"end":1075,"declarations":[{"type":"VariableDeclarator","start":1061,"end":1075,"id":{"type":"Identifier","start":1061,"end":1064,"name":"app"},"init":{"type":"CallExpression","start":1067,"end":1075,"callee":{"type":"Identifier","start":1067,"end":1073,"name":"router"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":1145,"end":1171,"expression":{"type":"CallExpression","start":1145,"end":1171,"callee":{"type":"MemberExpression","start":1145,"end":1152,"object":{"type":"Identifier","start":1145,"end":1148,"name":"app"},"property":{"type":"Identifier","start":1149,"end":1152,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":1153,"end":1170,"callee":{"type":"CallExpression","start":1153,"end":1168,"callee":{"type":"Identifier","start":1153,"end":1160,"name":"require"},"arguments":[{"type":"Literal","start":1161,"end":1167,"value":"cors","raw":"'cors'"}]},"arguments":[]}]}},{"type":"ExpressionStatement","start":1172,"end":1210,"expression":{"type":"CallExpression","start":1172,"end":1210,"callee":{"type":"MemberExpression","start":1172,"end":1179,"object":{"type":"Identifier","start":1172,"end":1175,"name":"app"},"property":{"type":"Identifier","start":1176,"end":1179,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":1180,"end":1209,"callee":{"type":"MemberExpression","start":1180,"end":1207,"object":{"type":"CallExpression","start":1180,"end":1202,"callee":{"type":"Identifier","start":1180,"end":1187,"name":"require"},"arguments":[{"type":"Literal","start":1188,"end":1201,"value":"body-parser","raw":"'body-parser'"}]},"property":{"type":"Identifier","start":1203,"end":1207,"name":"json"},"computed":false},"arguments":[]}]}},{"type":"ExpressionStatement","start":1211,"end":1733,"expression":{"type":"CallExpression","start":1211,"end":1733,"callee":{"type":"MemberExpression","start":1211,"end":1218,"object":{"type":"Identifier","start":1211,"end":1214,"name":"app"},"property":{"type":"Identifier","start":1215,"end":1218,"name":"use"},"computed":false},"arguments":[{"type":"Literal","start":1219,"end":1231,"value":"/companion","raw":"'/companion'"},{"type":"CallExpression","start":1233,"end":1732,"callee":{"type":"MemberExpression","start":1233,"end":1246,"object":{"type":"Identifier","start":1233,"end":1242,"name":"companion"},"property":{"type":"Identifier","start":1243,"end":1246,"name":"app"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1247,"end":1731,"properties":[{"type":"Property","start":1251,"end":1683,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1251,"end":1266,"name":"providerOptions"},"value":{"type":"ObjectExpression","start":1268,"end":1683,"properties":[{"type":"Property","start":1274,"end":1679,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1274,"end":1276,"name":"s3"},"value":{"type":"ObjectExpression","start":1278,"end":1679,"properties":[{"type":"Property","start":1379,"end":1430,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1379,"end":1387,"name":"endpoint"},"value":{"type":"Literal","start":1389,"end":1430,"value":"https://{region}.digitaloceanspaces.com","raw":"'https://{region}.digitaloceanspaces.com'"},"kind":"init"},{"type":"Property","start":1438,"end":1486,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1438,"end":1444,"name":"getKey"},"value":{"type":"ArrowFunctionExpression","start":1446,"end":1486,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1447,"end":1450,"name":"req"},{"type":"Identifier","start":1452,"end":1460,"name":"filename"}],"body":{"type":"TemplateLiteral","start":1465,"end":1486,"expressions":[{"type":"Identifier","start":1476,"end":1484,"name":"filename"}],"quasis":[{"type":"TemplateElement","start":1466,"end":1474,"value":{"raw":"uploads/","cooked":"uploads/"},"tail":false},{"type":"TemplateElement","start":1485,"end":1485,"value":{"raw":"","cooked":""},"tail":true}]}},"kind":"init"},{"type":"Property","start":1495,"end":1529,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1495,"end":1498,"name":"key"},"value":{"type":"MemberExpression","start":1500,"end":1529,"object":{"type":"MemberExpression","start":1500,"end":1511,"object":{"type":"Identifier","start":1500,"end":1507,"name":"process"},"property":{"type":"Identifier","start":1508,"end":1511,"name":"env"},"computed":false},"property":{"type":"Identifier","start":1512,"end":1529,"name":"COMPANION_AWS_KEY"},"computed":false},"kind":"init"},{"type":"Property","start":1537,"end":1577,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1537,"end":1543,"name":"secret"},"value":{"type":"MemberExpression","start":1545,"end":1577,"object":{"type":"MemberExpression","start":1545,"end":1556,"object":{"type":"Identifier","start":1545,"end":1552,"name":"process"},"property":{"type":"Identifier","start":1553,"end":1556,"name":"env"},"computed":false},"property":{"type":"Identifier","start":1557,"end":1577,"name":"COMPANION_AWS_SECRET"},"computed":false},"kind":"init"},{"type":"Property","start":1585,"end":1625,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1585,"end":1591,"name":"bucket"},"value":{"type":"MemberExpression","start":1593,"end":1625,"object":{"type":"MemberExpression","start":1593,"end":1604,"object":{"type":"Identifier","start":1593,"end":1600,"name":"process"},"property":{"type":"Identifier","start":1601,"end":1604,"name":"env"},"computed":false},"property":{"type":"Identifier","start":1605,"end":1625,"name":"COMPANION_AWS_BUCKET"},"computed":false},"kind":"init"},{"type":"Property","start":1633,"end":1673,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1633,"end":1639,"name":"region"},"value":{"type":"MemberExpression","start":1641,"end":1673,"object":{"type":"MemberExpression","start":1641,"end":1652,"object":{"type":"Identifier","start":1641,"end":1648,"name":"process"},"property":{"type":"Identifier","start":1649,"end":1652,"name":"env"},"computed":false},"property":{"type":"Identifier","start":1653,"end":1673,"name":"COMPANION_AWS_REGION"},"computed":false},"kind":"init"}]},"kind":"init"}]},"kind":"init"},{"type":"Property","start":1687,"end":1729,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1687,"end":1693,"name":"server"},"value":{"type":"ObjectExpression","start":1695,"end":1729,"properties":[{"type":"Property","start":1697,"end":1727,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1697,"end":1706,"name":"serverUrl"},"value":{"type":"TemplateLiteral","start":1708,"end":1727,"expressions":[{"type":"Identifier","start":1721,"end":1725,"name":"PORT"}],"quasis":[{"type":"TemplateElement","start":1709,"end":1719,"value":{"raw":"localhost:","cooked":"localhost:"},"tail":false},{"type":"TemplateElement","start":1726,"end":1726,"value":{"raw":"","cooked":""},"tail":true}]},"kind":"init"}]},"kind":"init"}]}]}]}},{"type":"ExpressionStatement","start":1764,"end":1935,"expression":{"type":"CallExpression","start":1764,"end":1935,"callee":{"type":"MemberExpression","start":1764,"end":1771,"object":{"type":"Identifier","start":1764,"end":1767,"name":"app"},"property":{"type":"Identifier","start":1768,"end":1771,"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":1772,"end":1787,"value":"/uppy.min.css","raw":"'/uppy.min.css'"},{"type":"ArrowFunctionExpression","start":1789,"end":1934,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1790,"end":1793,"name":"req"},{"type":"Identifier","start":1795,"end":1798,"name":"res"}],"body":{"type":"BlockStatement","start":1803,"end":1934,"body":[{"type":"ExpressionStatement","start":1807,"end":1848,"expression":{"type":"CallExpression","start":1807,"end":1848,"callee":{"type":"MemberExpression","start":1807,"end":1820,"object":{"type":"Identifier","start":1807,"end":1810,"name":"res"},"property":{"type":"Identifier","start":1811,"end":1820,"name":"setHeader"},"computed":false},"arguments":[{"type":"Literal","start":1821,"end":1835,"value":"content-type","raw":"'content-type'"},{"type":"Literal","start":1837,"end":1847,"value":"text/css","raw":"'text/css'"}]}},{"type":"ExpressionStatement","start":1851,"end":1932,"expression":{"type":"CallExpression","start":1851,"end":1932,"callee":{"type":"MemberExpression","start":1851,"end":1927,"object":{"type":"CallExpression","start":1851,"end":1922,"callee":{"type":"MemberExpression","start":1851,"end":1870,"object":{"type":"Identifier","start":1851,"end":1853,"name":"fs"},"property":{"type":"Identifier","start":1854,"end":1870,"name":"createReadStream"},"computed":false},"arguments":[{"type":"CallExpression","start":1871,"end":1921,"callee":{"type":"MemberExpression","start":1871,"end":1880,"object":{"type":"Identifier","start":1871,"end":1875,"name":"path"},"property":{"type":"Identifier","start":1876,"end":1880,"name":"join"},"computed":false},"arguments":[{"type":"Literal","start":1881,"end":1920,"value":"../../packages/uppy/dist/uppy.min.css","raw":"'../../packages/uppy/dist/uppy.min.css'"}]}]},"property":{"type":"Identifier","start":1923,"end":1927,"name":"pipe"},"computed":false},"arguments":[{"type":"Identifier","start":1928,"end":1931,"name":"res"}]}}]}}]}},{"type":"ExpressionStatement","start":1976,"end":2275,"expression":{"type":"CallExpression","start":1976,"end":2275,"callee":{"type":"Identifier","start":1976,"end":1980,"name":"budo"},"arguments":[{"type":"CallExpression","start":1981,"end":2012,"callee":{"type":"MemberExpression","start":1981,"end":1990,"object":{"type":"Identifier","start":1981,"end":1985,"name":"path"},"property":{"type":"Identifier","start":1986,"end":1990,"name":"join"},"computed":false},"arguments":[{"type":"Identifier","start":1991,"end":2000,"name":"__dirname"},{"type":"Literal","start":2002,"end":2011,"value":"main.js","raw":"'main.js'"}]},{"type":"ObjectExpression","start":2014,"end":2274,"properties":[{"type":"Property","start":2018,"end":2028,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2018,"end":2022,"name":"live"},"value":{"type":"Literal","start":2024,"end":2028,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":2032,"end":2054,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2032,"end":2038,"name":"stream"},"value":{"type":"MemberExpression","start":2040,"end":2054,"object":{"type":"Identifier","start":2040,"end":2047,"name":"process"},"property":{"type":"Identifier","start":2048,"end":2054,"name":"stdout"},"computed":false},"kind":"init"},{"type":"Property","start":2058,"end":2068,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2058,"end":2062,"name":"port"},"value":{"type":"Identifier","start":2064,"end":2068,"name":"PORT"},"kind":"init"},{"type":"Property","start":2072,"end":2087,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2072,"end":2082,"name":"middleware"},"value":{"type":"Identifier","start":2084,"end":2087,"name":"app"},"kind":"init"},{"type":"Property","start":2091,"end":2272,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2091,"end":2101,"name":"browserify"},"value":{"type":"ObjectExpression","start":2103,"end":2272,"properties":[{"type":"Property","start":2109,"end":2268,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2109,"end":2118,"name":"transform"},"value":{"type":"ArrayExpression","start":2120,"end":2268,"elements":[{"type":"Literal","start":2128,"end":2138,"value":"babelify","raw":"'babelify'"},{"type":"ArrayExpression","start":2146,"end":2262,"elements":[{"type":"Literal","start":2147,"end":2157,"value":"aliasify","raw":"'aliasify'"},{"type":"ObjectExpression","start":2159,"end":2261,"properties":[{"type":"Property","start":2169,"end":2253,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2169,"end":2176,"name":"aliases"},"value":{"type":"ObjectExpression","start":2178,"end":2253,"properties":[{"type":"Property","start":2190,"end":2243,"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":2190,"end":2197,"value":"@uppy","raw":"'@uppy'"},"value":{"type":"CallExpression","start":2199,"end":2243,"callee":{"type":"MemberExpression","start":2199,"end":2208,"object":{"type":"Identifier","start":2199,"end":2203,"name":"path"},"property":{"type":"Identifier","start":2204,"end":2208,"name":"join"},"computed":false},"arguments":[{"type":"Identifier","start":2209,"end":2218,"name":"__dirname"},{"type":"Literal","start":2220,"end":2242,"value":"../../packages/@uppy","raw":"'../../packages/@uppy'"}]},"kind":"init"}]},"kind":"init"}]}]}]},"kind":"init"}]},"kind":"init"}]}]}}],"sourceType":"script"}