{"type":"Program","start":0,"end":1263,"body":[{"type":"VariableDeclaration","start":0,"end":38,"declarations":[{"type":"VariableDeclarator","start":4,"end":38,"id":{"type":"Identifier","start":4,"end":14,"name":"formidable"},"init":{"type":"CallExpression","start":17,"end":38,"callee":{"type":"Identifier","start":17,"end":24,"name":"require"},"arguments":[{"type":"Literal","start":25,"end":37,"value":"formidable","raw":"'formidable'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":39,"end":65,"declarations":[{"type":"VariableDeclarator","start":43,"end":65,"id":{"type":"Identifier","start":43,"end":47,"name":"http"},"init":{"type":"CallExpression","start":50,"end":65,"callee":{"type":"Identifier","start":50,"end":57,"name":"require"},"arguments":[{"type":"Literal","start":58,"end":64,"value":"http","raw":"'http'"}]}}],"kind":"var"},{"type":"ExpressionStatement","start":67,"end":1262,"expression":{"type":"CallExpression","start":67,"end":1262,"callee":{"type":"MemberExpression","start":67,"end":1213,"object":{"type":"CallExpression","start":67,"end":1206,"callee":{"type":"MemberExpression","start":67,"end":84,"object":{"type":"Identifier","start":67,"end":71,"name":"http"},"property":{"type":"Identifier","start":72,"end":84,"name":"createServer"},"computed":false},"arguments":[{"type":"FunctionExpression","start":85,"end":1205,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":95,"end":98,"name":"req"},{"type":"Identifier","start":100,"end":103,"name":"res"}],"body":{"type":"BlockStatement","start":105,"end":1205,"body":[{"type":"VariableDeclaration","start":109,"end":365,"declarations":[{"type":"VariableDeclarator","start":115,"end":365,"id":{"type":"Identifier","start":115,"end":122,"name":"headers"},"init":{"type":"ObjectExpression","start":125,"end":365,"properties":[{"type":"Property","start":131,"end":165,"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":131,"end":145,"value":"Content-Type","raw":"'Content-Type'"},"value":{"type":"Literal","start":147,"end":165,"value":"application/json","raw":"'application/json'"},"kind":"init"},{"type":"Property","start":171,"end":205,"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":171,"end":200,"value":"Access-Control-Allow-Origin","raw":"'Access-Control-Allow-Origin'"},"value":{"type":"Literal","start":202,"end":205,"value":"*","raw":"'*'"},"kind":"init"},{"type":"Property","start":211,"end":263,"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":211,"end":241,"value":"Access-Control-Allow-Methods","raw":"'Access-Control-Allow-Methods'"},"value":{"type":"Literal","start":243,"end":263,"value":"OPTIONS, POST, GET","raw":"'OPTIONS, POST, GET'"},"kind":"init"},{"type":"Property","start":269,"end":302,"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":269,"end":293,"value":"Access-Control-Max-Age","raw":"'Access-Control-Max-Age'"},"value":{"type":"Literal","start":295,"end":302,"value":2592000,"raw":"2592000"},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":369,"end":461,"test":{"type":"BinaryExpression","start":373,"end":397,"left":{"type":"MemberExpression","start":373,"end":383,"object":{"type":"Identifier","start":373,"end":376,"name":"req"},"property":{"type":"Identifier","start":377,"end":383,"name":"method"},"computed":false},"operator":"===","right":{"type":"Literal","start":388,"end":397,"value":"OPTIONS","raw":"'OPTIONS'"}},"consequent":{"type":"BlockStatement","start":399,"end":461,"body":[{"type":"ExpressionStatement","start":405,"end":432,"expression":{"type":"CallExpression","start":405,"end":432,"callee":{"type":"MemberExpression","start":405,"end":418,"object":{"type":"Identifier","start":405,"end":408,"name":"res"},"property":{"type":"Identifier","start":409,"end":418,"name":"writeHead"},"computed":false},"arguments":[{"type":"Literal","start":419,"end":422,"value":204,"raw":"204"},{"type":"Identifier","start":424,"end":431,"name":"headers"}]}},{"type":"ExpressionStatement","start":437,"end":446,"expression":{"type":"CallExpression","start":437,"end":446,"callee":{"type":"MemberExpression","start":437,"end":444,"object":{"type":"Identifier","start":437,"end":440,"name":"res"},"property":{"type":"Identifier","start":441,"end":444,"name":"end"},"computed":false},"arguments":[]}},{"type":"ReturnStatement","start":451,"end":457,"argument":null}]},"alternate":null},{"type":"IfStatement","start":464,"end":1203,"test":{"type":"LogicalExpression","start":468,"end":528,"left":{"type":"BinaryExpression","start":468,"end":489,"left":{"type":"MemberExpression","start":468,"end":475,"object":{"type":"Identifier","start":468,"end":471,"name":"req"},"property":{"type":"Identifier","start":472,"end":475,"name":"url"},"computed":false},"operator":"===","right":{"type":"Literal","start":480,"end":489,"value":"/upload","raw":"'/upload'"}},"operator":"&&","right":{"type":"BinaryExpression","start":493,"end":528,"left":{"type":"CallExpression","start":493,"end":517,"callee":{"type":"MemberExpression","start":493,"end":515,"object":{"type":"MemberExpression","start":493,"end":503,"object":{"type":"Identifier","start":493,"end":496,"name":"req"},"property":{"type":"Identifier","start":497,"end":503,"name":"method"},"computed":false},"property":{"type":"Identifier","start":504,"end":515,"name":"toLowerCase"},"computed":false},"arguments":[]},"operator":"===","right":{"type":"Literal","start":522,"end":528,"value":"post","raw":"'post'"}}},"consequent":{"type":"BlockStatement","start":530,"end":1203,"body":[{"type":"VariableDeclaration","start":563,"end":603,"declarations":[{"type":"VariableDeclarator","start":567,"end":603,"id":{"type":"Identifier","start":567,"end":571,"name":"form"},"init":{"type":"NewExpression","start":574,"end":603,"callee":{"type":"MemberExpression","start":578,"end":601,"object":{"type":"Identifier","start":578,"end":588,"name":"formidable"},"property":{"type":"Identifier","start":589,"end":601,"name":"IncomingForm"},"computed":false},"arguments":[]}}],"kind":"var"},{"type":"ExpressionStatement","start":608,"end":636,"expression":{"type":"AssignmentExpression","start":608,"end":636,"operator":"=","left":{"type":"MemberExpression","start":608,"end":622,"object":{"type":"Identifier","start":608,"end":612,"name":"form"},"property":{"type":"Identifier","start":613,"end":622,"name":"uploadDir"},"computed":false},"right":{"type":"Literal","start":625,"end":636,"value":"./uploads","raw":"'./uploads'"}}},{"type":"ExpressionStatement","start":641,"end":667,"expression":{"type":"AssignmentExpression","start":641,"end":667,"operator":"=","left":{"type":"MemberExpression","start":641,"end":660,"object":{"type":"Identifier","start":641,"end":645,"name":"form"},"property":{"type":"Identifier","start":646,"end":660,"name":"keepExtensions"},"computed":false},"right":{"type":"Literal","start":663,"end":667,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":673,"end":1199,"expression":{"type":"CallExpression","start":673,"end":1199,"callee":{"type":"MemberExpression","start":673,"end":683,"object":{"type":"Identifier","start":673,"end":677,"name":"form"},"property":{"type":"Identifier","start":678,"end":683,"name":"parse"},"computed":false},"arguments":[{"type":"Identifier","start":684,"end":687,"name":"req"},{"type":"FunctionExpression","start":689,"end":1198,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":699,"end":702,"name":"err"},{"type":"Identifier","start":704,"end":710,"name":"fields"},{"type":"Identifier","start":712,"end":717,"name":"files"}],"body":{"type":"BlockStatement","start":719,"end":1198,"body":[{"type":"IfStatement","start":727,"end":884,"test":{"type":"Identifier","start":731,"end":734,"name":"err"},"consequent":{"type":"BlockStatement","start":736,"end":884,"body":[{"type":"ExpressionStatement","start":746,"end":776,"expression":{"type":"CallExpression","start":746,"end":776,"callee":{"type":"MemberExpression","start":746,"end":757,"object":{"type":"Identifier","start":746,"end":753,"name":"console"},"property":{"type":"Identifier","start":754,"end":757,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":758,"end":770,"value":"some error","raw":"'some error'"},{"type":"Identifier","start":772,"end":775,"name":"err"}]}},{"type":"ExpressionStatement","start":785,"end":812,"expression":{"type":"CallExpression","start":785,"end":812,"callee":{"type":"MemberExpression","start":785,"end":798,"object":{"type":"Identifier","start":785,"end":788,"name":"res"},"property":{"type":"Identifier","start":789,"end":798,"name":"writeHead"},"computed":false},"arguments":[{"type":"Literal","start":799,"end":802,"value":200,"raw":"200"},{"type":"Identifier","start":804,"end":811,"name":"headers"}]}},{"type":"ExpressionStatement","start":821,"end":851,"expression":{"type":"CallExpression","start":821,"end":851,"callee":{"type":"MemberExpression","start":821,"end":830,"object":{"type":"Identifier","start":821,"end":824,"name":"res"},"property":{"type":"Identifier","start":825,"end":830,"name":"write"},"computed":false},"arguments":[{"type":"CallExpression","start":831,"end":850,"callee":{"type":"MemberExpression","start":831,"end":845,"object":{"type":"Identifier","start":831,"end":835,"name":"JSON"},"property":{"type":"Identifier","start":836,"end":845,"name":"stringify"},"computed":false},"arguments":[{"type":"Identifier","start":846,"end":849,"name":"err"}]}]}},{"type":"ReturnStatement","start":860,"end":876,"argument":{"type":"CallExpression","start":867,"end":876,"callee":{"type":"MemberExpression","start":867,"end":874,"object":{"type":"Identifier","start":867,"end":870,"name":"res"},"property":{"type":"Identifier","start":871,"end":874,"name":"end"},"computed":false},"arguments":[]}}]},"alternate":null},{"type":"VariableDeclaration","start":891,"end":918,"declarations":[{"type":"VariableDeclarator","start":895,"end":918,"id":{"type":"Identifier","start":895,"end":899,"name":"file"},"init":{"type":"MemberExpression","start":902,"end":918,"object":{"type":"Identifier","start":902,"end":907,"name":"files"},"property":{"type":"Literal","start":908,"end":917,"value":"files[]","raw":"'files[]'"},"computed":true}}],"kind":"var"},{"type":"ExpressionStatement","start":925,"end":964,"expression":{"type":"CallExpression","start":925,"end":964,"callee":{"type":"MemberExpression","start":925,"end":936,"object":{"type":"Identifier","start":925,"end":932,"name":"console"},"property":{"type":"Identifier","start":933,"end":936,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":937,"end":952,"value":"saved file to","raw":"'saved file to'"},{"type":"MemberExpression","start":954,"end":963,"object":{"type":"Identifier","start":954,"end":958,"name":"file"},"property":{"type":"Identifier","start":959,"end":963,"name":"path"},"computed":false}]}},{"type":"ExpressionStatement","start":971,"end":1010,"expression":{"type":"CallExpression","start":971,"end":1010,"callee":{"type":"MemberExpression","start":971,"end":982,"object":{"type":"Identifier","start":971,"end":978,"name":"console"},"property":{"type":"Identifier","start":979,"end":982,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":983,"end":998,"value":"original name","raw":"'original name'"},{"type":"MemberExpression","start":1000,"end":1009,"object":{"type":"Identifier","start":1000,"end":1004,"name":"file"},"property":{"type":"Identifier","start":1005,"end":1009,"name":"name"},"computed":false}]}},{"type":"ExpressionStatement","start":1017,"end":1047,"expression":{"type":"CallExpression","start":1017,"end":1047,"callee":{"type":"MemberExpression","start":1017,"end":1028,"object":{"type":"Identifier","start":1017,"end":1024,"name":"console"},"property":{"type":"Identifier","start":1025,"end":1028,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":1029,"end":1035,"value":"type","raw":"'type'"},{"type":"MemberExpression","start":1037,"end":1046,"object":{"type":"Identifier","start":1037,"end":1041,"name":"file"},"property":{"type":"Identifier","start":1042,"end":1046,"name":"type"},"computed":false}]}},{"type":"ExpressionStatement","start":1054,"end":1084,"expression":{"type":"CallExpression","start":1054,"end":1084,"callee":{"type":"MemberExpression","start":1054,"end":1065,"object":{"type":"Identifier","start":1054,"end":1061,"name":"console"},"property":{"type":"Identifier","start":1062,"end":1065,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":1066,"end":1072,"value":"size","raw":"'size'"},{"type":"MemberExpression","start":1074,"end":1083,"object":{"type":"Identifier","start":1074,"end":1078,"name":"file"},"property":{"type":"Identifier","start":1079,"end":1083,"name":"size"},"computed":false}]}},{"type":"ExpressionStatement","start":1091,"end":1118,"expression":{"type":"CallExpression","start":1091,"end":1118,"callee":{"type":"MemberExpression","start":1091,"end":1104,"object":{"type":"Identifier","start":1091,"end":1094,"name":"res"},"property":{"type":"Identifier","start":1095,"end":1104,"name":"writeHead"},"computed":false},"arguments":[{"type":"Literal","start":1105,"end":1108,"value":200,"raw":"200"},{"type":"Identifier","start":1110,"end":1117,"name":"headers"}]}},{"type":"ExpressionStatement","start":1125,"end":1169,"expression":{"type":"CallExpression","start":1125,"end":1169,"callee":{"type":"MemberExpression","start":1125,"end":1134,"object":{"type":"Identifier","start":1125,"end":1128,"name":"res"},"property":{"type":"Identifier","start":1129,"end":1134,"name":"write"},"computed":false},"arguments":[{"type":"CallExpression","start":1135,"end":1168,"callee":{"type":"MemberExpression","start":1135,"end":1149,"object":{"type":"Identifier","start":1135,"end":1139,"name":"JSON"},"property":{"type":"Identifier","start":1140,"end":1149,"name":"stringify"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1150,"end":1167,"properties":[{"type":"Property","start":1152,"end":1158,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1152,"end":1158,"name":"fields"},"kind":"init","value":{"type":"Identifier","start":1152,"end":1158,"name":"fields"}},{"type":"Property","start":1160,"end":1165,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1160,"end":1165,"name":"files"},"kind":"init","value":{"type":"Identifier","start":1160,"end":1165,"name":"files"}}]}]}]}},{"type":"ReturnStatement","start":1176,"end":1192,"argument":{"type":"CallExpression","start":1183,"end":1192,"callee":{"type":"MemberExpression","start":1183,"end":1190,"object":{"type":"Identifier","start":1183,"end":1186,"name":"res"},"property":{"type":"Identifier","start":1187,"end":1190,"name":"end"},"computed":false},"arguments":[]}}]}}]}}]},"alternate":null}]}}]},"property":{"type":"Identifier","start":1207,"end":1213,"name":"listen"},"computed":false},"arguments":[{"type":"Literal","start":1214,"end":1218,"value":3020,"raw":"3020"},{"type":"ArrowFunctionExpression","start":1220,"end":1261,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1226,"end":1261,"body":[{"type":"ExpressionStatement","start":1230,"end":1259,"expression":{"type":"CallExpression","start":1230,"end":1259,"callee":{"type":"MemberExpression","start":1230,"end":1241,"object":{"type":"Identifier","start":1230,"end":1237,"name":"console"},"property":{"type":"Identifier","start":1238,"end":1241,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":1242,"end":1258,"value":"server started","raw":"'server started'"}]}}]}}]}}],"sourceType":"script"}