{"type":"Program","start":0,"end":1402,"body":[{"type":"VariableDeclaration","start":0,"end":24,"declarations":[{"type":"VariableDeclarator","start":6,"end":24,"id":{"type":"Identifier","start":6,"end":8,"name":"fs"},"init":{"type":"CallExpression","start":11,"end":24,"callee":{"type":"Identifier","start":11,"end":18,"name":"require"},"arguments":[{"type":"Literal","start":19,"end":23,"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":25,"end":53,"declarations":[{"type":"VariableDeclarator","start":31,"end":53,"id":{"type":"Identifier","start":31,"end":35,"name":"path"},"init":{"type":"CallExpression","start":38,"end":53,"callee":{"type":"Identifier","start":38,"end":45,"name":"require"},"arguments":[{"type":"Literal","start":46,"end":52,"value":"path","raw":"'path'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":54,"end":86,"declarations":[{"type":"VariableDeclarator","start":60,"end":86,"id":{"type":"Identifier","start":60,"end":66,"name":"rimraf"},"init":{"type":"CallExpression","start":69,"end":86,"callee":{"type":"Identifier","start":69,"end":76,"name":"require"},"arguments":[{"type":"Literal","start":77,"end":85,"value":"rimraf","raw":"'rimraf'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":87,"end":146,"declarations":[{"type":"VariableDeclarator","start":93,"end":146,"id":{"type":"Identifier","start":93,"end":102,"name":"companion"},"init":{"type":"CallExpression","start":105,"end":146,"callee":{"type":"Identifier","start":105,"end":112,"name":"require"},"arguments":[{"type":"Literal","start":113,"end":145,"value":"../../packages/@uppy/companion","raw":"'../../packages/@uppy/companion'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":147,"end":179,"declarations":[{"type":"VariableDeclarator","start":153,"end":179,"id":{"type":"Identifier","start":153,"end":156,"name":"app"},"init":{"type":"CallExpression","start":159,"end":179,"callee":{"type":"CallExpression","start":159,"end":177,"callee":{"type":"Identifier","start":159,"end":166,"name":"require"},"arguments":[{"type":"Literal","start":167,"end":176,"value":"express","raw":"'express'"}]},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":181,"end":225,"declarations":[{"type":"VariableDeclarator","start":187,"end":225,"id":{"type":"Identifier","start":187,"end":195,"name":"DATA_DIR"},"init":{"type":"CallExpression","start":198,"end":225,"callee":{"type":"MemberExpression","start":198,"end":207,"object":{"type":"Identifier","start":198,"end":202,"name":"path"},"property":{"type":"Identifier","start":203,"end":207,"name":"join"},"computed":false},"arguments":[{"type":"Identifier","start":208,"end":217,"name":"__dirname"},{"type":"Literal","start":219,"end":224,"value":"tmp","raw":"'tmp'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":227,"end":292,"expression":{"type":"CallExpression","start":227,"end":292,"callee":{"type":"MemberExpression","start":227,"end":234,"object":{"type":"Identifier","start":227,"end":230,"name":"app"},"property":{"type":"Identifier","start":231,"end":234,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":235,"end":291,"callee":{"type":"CallExpression","start":235,"end":250,"callee":{"type":"Identifier","start":235,"end":242,"name":"require"},"arguments":[{"type":"Literal","start":243,"end":249,"value":"cors","raw":"'cors'"}]},"arguments":[{"type":"ObjectExpression","start":251,"end":290,"properties":[{"type":"Property","start":255,"end":267,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":255,"end":261,"name":"origin"},"value":{"type":"Literal","start":263,"end":267,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":271,"end":288,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":271,"end":282,"name":"credentials"},"value":{"type":"Literal","start":284,"end":288,"value":true,"raw":"true"},"kind":"init"}]}]}]}},{"type":"ExpressionStatement","start":293,"end":328,"expression":{"type":"CallExpression","start":293,"end":328,"callee":{"type":"MemberExpression","start":293,"end":300,"object":{"type":"Identifier","start":293,"end":296,"name":"app"},"property":{"type":"Identifier","start":297,"end":300,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":301,"end":327,"callee":{"type":"CallExpression","start":301,"end":325,"callee":{"type":"Identifier","start":301,"end":308,"name":"require"},"arguments":[{"type":"Literal","start":309,"end":324,"value":"cookie-parser","raw":"'cookie-parser'"}]},"arguments":[]}]}},{"type":"ExpressionStatement","start":329,"end":367,"expression":{"type":"CallExpression","start":329,"end":367,"callee":{"type":"MemberExpression","start":329,"end":336,"object":{"type":"Identifier","start":329,"end":332,"name":"app"},"property":{"type":"Identifier","start":333,"end":336,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":337,"end":366,"callee":{"type":"MemberExpression","start":337,"end":364,"object":{"type":"CallExpression","start":337,"end":359,"callee":{"type":"Identifier","start":337,"end":344,"name":"require"},"arguments":[{"type":"Literal","start":345,"end":358,"value":"body-parser","raw":"'body-parser'"}]},"property":{"type":"Identifier","start":360,"end":364,"name":"json"},"computed":false},"arguments":[]}]}},{"type":"ExpressionStatement","start":368,"end":433,"expression":{"type":"CallExpression","start":368,"end":433,"callee":{"type":"MemberExpression","start":368,"end":375,"object":{"type":"Identifier","start":368,"end":371,"name":"app"},"property":{"type":"Identifier","start":372,"end":375,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":376,"end":432,"callee":{"type":"CallExpression","start":376,"end":402,"callee":{"type":"Identifier","start":376,"end":383,"name":"require"},"arguments":[{"type":"Literal","start":384,"end":401,"value":"express-session","raw":"'express-session'"}]},"arguments":[{"type":"ObjectExpression","start":403,"end":431,"properties":[{"type":"Property","start":407,"end":429,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":407,"end":413,"name":"secret"},"value":{"type":"Literal","start":415,"end":429,"value":"hello planet","raw":"'hello planet'"},"kind":"init"}]}]}]}},{"type":"VariableDeclaration","start":435,"end":1050,"declarations":[{"type":"VariableDeclarator","start":441,"end":1050,"id":{"type":"Identifier","start":441,"end":448,"name":"options"},"init":{"type":"ObjectExpression","start":451,"end":1050,"properties":[{"type":"Property","start":455,"end":950,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":455,"end":470,"name":"providerOptions"},"value":{"type":"ObjectExpression","start":472,"end":950,"properties":[{"type":"Property","start":478,"end":588,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":478,"end":484,"name":"google"},"value":{"type":"ObjectExpression","start":486,"end":588,"properties":[{"type":"Property","start":494,"end":531,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":494,"end":497,"name":"key"},"value":{"type":"MemberExpression","start":499,"end":531,"object":{"type":"MemberExpression","start":499,"end":510,"object":{"type":"Identifier","start":499,"end":506,"name":"process"},"property":{"type":"Identifier","start":507,"end":510,"name":"env"},"computed":false},"property":{"type":"Identifier","start":511,"end":531,"name":"COMPANION_GOOGLE_KEY"},"computed":false},"kind":"init"},{"type":"Property","start":539,"end":582,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":539,"end":545,"name":"secret"},"value":{"type":"MemberExpression","start":547,"end":582,"object":{"type":"MemberExpression","start":547,"end":558,"object":{"type":"Identifier","start":547,"end":554,"name":"process"},"property":{"type":"Identifier","start":555,"end":558,"name":"env"},"computed":false},"property":{"type":"Identifier","start":559,"end":582,"name":"COMPANION_GOOGLE_SECRET"},"computed":false},"kind":"init"}]},"kind":"init"},{"type":"Property","start":594,"end":946,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":594,"end":596,"name":"s3"},"value":{"type":"ObjectExpression","start":598,"end":946,"properties":[{"type":"Property","start":606,"end":702,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":606,"end":612,"name":"getKey"},"value":{"type":"ArrowFunctionExpression","start":614,"end":702,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":615,"end":618,"name":"req"},{"type":"Identifier","start":620,"end":628,"name":"filename"}],"body":{"type":"TemplateLiteral","start":641,"end":702,"expressions":[{"type":"CallExpression","start":653,"end":688,"callee":{"type":"MemberExpression","start":653,"end":685,"object":{"type":"CallExpression","start":653,"end":679,"callee":{"type":"MemberExpression","start":653,"end":675,"object":{"type":"CallExpression","start":653,"end":666,"callee":{"type":"MemberExpression","start":653,"end":664,"object":{"type":"Identifier","start":653,"end":657,"name":"Math"},"property":{"type":"Identifier","start":658,"end":664,"name":"random"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":667,"end":675,"name":"toString"},"computed":false},"arguments":[{"type":"Literal","start":676,"end":678,"value":32,"raw":"32"}]},"property":{"type":"Identifier","start":680,"end":685,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":686,"end":687,"value":2,"raw":"2"}]},{"type":"Identifier","start":692,"end":700,"name":"filename"}],"quasis":[{"type":"TemplateElement","start":642,"end":651,"value":{"raw":"whatever/","cooked":"whatever/"},"tail":false},{"type":"TemplateElement","start":689,"end":690,"value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","start":701,"end":701,"value":{"raw":"","cooked":""},"tail":true}]}},"kind":"init"},{"type":"Property","start":710,"end":744,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":710,"end":713,"name":"key"},"value":{"type":"MemberExpression","start":715,"end":744,"object":{"type":"MemberExpression","start":715,"end":726,"object":{"type":"Identifier","start":715,"end":722,"name":"process"},"property":{"type":"Identifier","start":723,"end":726,"name":"env"},"computed":false},"property":{"type":"Identifier","start":727,"end":744,"name":"COMPANION_AWS_KEY"},"computed":false},"kind":"init"},{"type":"Property","start":752,"end":792,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":752,"end":758,"name":"secret"},"value":{"type":"MemberExpression","start":760,"end":792,"object":{"type":"MemberExpression","start":760,"end":771,"object":{"type":"Identifier","start":760,"end":767,"name":"process"},"property":{"type":"Identifier","start":768,"end":771,"name":"env"},"computed":false},"property":{"type":"Identifier","start":772,"end":792,"name":"COMPANION_AWS_SECRET"},"computed":false},"kind":"init"},{"type":"Property","start":800,"end":840,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":800,"end":806,"name":"bucket"},"value":{"type":"MemberExpression","start":808,"end":840,"object":{"type":"MemberExpression","start":808,"end":819,"object":{"type":"Identifier","start":808,"end":815,"name":"process"},"property":{"type":"Identifier","start":816,"end":819,"name":"env"},"computed":false},"property":{"type":"Identifier","start":820,"end":840,"name":"COMPANION_AWS_BUCKET"},"computed":false},"kind":"init"},{"type":"Property","start":848,"end":888,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":848,"end":854,"name":"region"},"value":{"type":"MemberExpression","start":856,"end":888,"object":{"type":"MemberExpression","start":856,"end":867,"object":{"type":"Identifier","start":856,"end":863,"name":"process"},"property":{"type":"Identifier","start":864,"end":867,"name":"env"},"computed":false},"property":{"type":"Identifier","start":868,"end":888,"name":"COMPANION_AWS_REGION"},"computed":false},"kind":"init"},{"type":"Property","start":896,"end":940,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":896,"end":904,"name":"endpoint"},"value":{"type":"MemberExpression","start":906,"end":940,"object":{"type":"MemberExpression","start":906,"end":917,"object":{"type":"Identifier","start":906,"end":913,"name":"process"},"property":{"type":"Identifier","start":914,"end":917,"name":"env"},"computed":false},"property":{"type":"Identifier","start":918,"end":940,"name":"COMPANION_AWS_ENDPOINT"},"computed":false},"kind":"init"}]},"kind":"init"}]},"kind":"init"},{"type":"Property","start":954,"end":988,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":954,"end":960,"name":"server"},"value":{"type":"ObjectExpression","start":962,"end":988,"properties":[{"type":"Property","start":964,"end":986,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":964,"end":968,"name":"host"},"value":{"type":"Literal","start":970,"end":986,"value":"localhost:3020","raw":"'localhost:3020'"},"kind":"init"}]},"kind":"init"},{"type":"Property","start":992,"end":1010,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":992,"end":1000,"name":"filePath"},"value":{"type":"Identifier","start":1002,"end":1010,"name":"DATA_DIR"},"kind":"init"},{"type":"Property","start":1014,"end":1033,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1014,"end":1020,"name":"secret"},"value":{"type":"Literal","start":1022,"end":1033,"value":"blah blah","raw":"'blah blah'"},"kind":"init"},{"type":"Property","start":1037,"end":1048,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1037,"end":1042,"name":"debug"},"value":{"type":"Literal","start":1044,"end":1048,"value":true,"raw":"true"},"kind":"init"}]}}],"kind":"const"},{"type":"TryStatement","start":1115,"end":1189,"block":{"type":"BlockStatement","start":1119,"end":1148,"body":[{"type":"ExpressionStatement","start":1123,"end":1146,"expression":{"type":"CallExpression","start":1123,"end":1146,"callee":{"type":"MemberExpression","start":1123,"end":1136,"object":{"type":"Identifier","start":1123,"end":1125,"name":"fs"},"property":{"type":"Identifier","start":1126,"end":1136,"name":"accessSync"},"computed":false},"arguments":[{"type":"Identifier","start":1137,"end":1145,"name":"DATA_DIR"}]}}]},"handler":{"type":"CatchClause","start":1149,"end":1189,"param":{"type":"Identifier","start":1156,"end":1159,"name":"err"},"body":{"type":"BlockStatement","start":1161,"end":1189,"body":[{"type":"ExpressionStatement","start":1165,"end":1187,"expression":{"type":"CallExpression","start":1165,"end":1187,"callee":{"type":"MemberExpression","start":1165,"end":1177,"object":{"type":"Identifier","start":1165,"end":1167,"name":"fs"},"property":{"type":"Identifier","start":1168,"end":1177,"name":"mkdirSync"},"computed":false},"arguments":[{"type":"Identifier","start":1178,"end":1186,"name":"DATA_DIR"}]}}]}},"finalizer":null},{"type":"ExpressionStatement","start":1190,"end":1249,"expression":{"type":"CallExpression","start":1190,"end":1249,"callee":{"type":"MemberExpression","start":1190,"end":1200,"object":{"type":"Identifier","start":1190,"end":1197,"name":"process"},"property":{"type":"Identifier","start":1198,"end":1200,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":1201,"end":1207,"value":"exit","raw":"'exit'"},{"type":"FunctionExpression","start":1209,"end":1248,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1221,"end":1248,"body":[{"type":"ExpressionStatement","start":1225,"end":1246,"expression":{"type":"CallExpression","start":1225,"end":1246,"callee":{"type":"MemberExpression","start":1225,"end":1236,"object":{"type":"Identifier","start":1225,"end":1231,"name":"rimraf"},"property":{"type":"Identifier","start":1232,"end":1236,"name":"sync"},"computed":false},"arguments":[{"type":"Identifier","start":1237,"end":1245,"name":"DATA_DIR"}]}}]}}]}},{"type":"ExpressionStatement","start":1251,"end":1282,"expression":{"type":"CallExpression","start":1251,"end":1282,"callee":{"type":"MemberExpression","start":1251,"end":1258,"object":{"type":"Identifier","start":1251,"end":1254,"name":"app"},"property":{"type":"Identifier","start":1255,"end":1258,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":1259,"end":1281,"callee":{"type":"MemberExpression","start":1259,"end":1272,"object":{"type":"Identifier","start":1259,"end":1268,"name":"companion"},"property":{"type":"Identifier","start":1269,"end":1272,"name":"app"},"computed":false},"arguments":[{"type":"Identifier","start":1273,"end":1280,"name":"options"}]}]}},{"type":"VariableDeclaration","start":1284,"end":1366,"declarations":[{"type":"VariableDeclarator","start":1290,"end":1366,"id":{"type":"Identifier","start":1290,"end":1296,"name":"server"},"init":{"type":"CallExpression","start":1299,"end":1366,"callee":{"type":"MemberExpression","start":1299,"end":1309,"object":{"type":"Identifier","start":1299,"end":1302,"name":"app"},"property":{"type":"Identifier","start":1303,"end":1309,"name":"listen"},"computed":false},"arguments":[{"type":"Literal","start":1310,"end":1314,"value":3020,"raw":"3020"},{"type":"ArrowFunctionExpression","start":1316,"end":1365,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1322,"end":1365,"body":[{"type":"ExpressionStatement","start":1326,"end":1363,"expression":{"type":"CallExpression","start":1326,"end":1363,"callee":{"type":"MemberExpression","start":1326,"end":1337,"object":{"type":"Identifier","start":1326,"end":1333,"name":"console"},"property":{"type":"Identifier","start":1334,"end":1337,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":1338,"end":1362,"value":"listening on port 3020","raw":"'listening on port 3020'"}]}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1368,"end":1401,"expression":{"type":"CallExpression","start":1368,"end":1401,"callee":{"type":"MemberExpression","start":1368,"end":1384,"object":{"type":"Identifier","start":1368,"end":1377,"name":"companion"},"property":{"type":"Identifier","start":1378,"end":1384,"name":"socket"},"computed":false},"arguments":[{"type":"Identifier","start":1385,"end":1391,"name":"server"},{"type":"Identifier","start":1393,"end":1400,"name":"options"}]}}],"sourceType":"script"}