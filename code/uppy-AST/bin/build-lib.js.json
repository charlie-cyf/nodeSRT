{"type":"Program","start":0,"end":1914,"body":[{"type":"VariableDeclaration","start":0,"end":30,"declarations":[{"type":"VariableDeclarator","start":6,"end":30,"id":{"type":"Identifier","start":6,"end":11,"name":"chalk"},"init":{"type":"CallExpression","start":14,"end":30,"callee":{"type":"Identifier","start":14,"end":21,"name":"require"},"arguments":[{"type":"Literal","start":22,"end":29,"value":"chalk","raw":"'chalk'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":31,"end":67,"declarations":[{"type":"VariableDeclarator","start":37,"end":67,"id":{"type":"Identifier","start":37,"end":42,"name":"babel"},"init":{"type":"CallExpression","start":45,"end":67,"callee":{"type":"Identifier","start":45,"end":52,"name":"require"},"arguments":[{"type":"Literal","start":53,"end":66,"value":"@babel/core","raw":"'@babel/core'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":68,"end":105,"declarations":[{"type":"VariableDeclarator","start":74,"end":105,"id":{"type":"ObjectPattern","start":74,"end":87,"properties":[{"type":"Property","start":76,"end":85,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":76,"end":85,"name":"promisify"},"kind":"init","value":{"type":"Identifier","start":76,"end":85,"name":"promisify"}}]},"init":{"type":"CallExpression","start":90,"end":105,"callee":{"type":"Identifier","start":90,"end":97,"name":"require"},"arguments":[{"type":"Literal","start":98,"end":104,"value":"util","raw":"'util'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":106,"end":145,"declarations":[{"type":"VariableDeclarator","start":112,"end":145,"id":{"type":"Identifier","start":112,"end":116,"name":"glob"},"init":{"type":"CallExpression","start":119,"end":145,"callee":{"type":"Identifier","start":119,"end":128,"name":"promisify"},"arguments":[{"type":"CallExpression","start":129,"end":144,"callee":{"type":"Identifier","start":129,"end":136,"name":"require"},"arguments":[{"type":"Literal","start":137,"end":143,"value":"glob","raw":"'glob'"}]}]}}],"kind":"const"},{"type":"VariableDeclaration","start":146,"end":189,"declarations":[{"type":"VariableDeclarator","start":152,"end":189,"id":{"type":"Identifier","start":152,"end":158,"name":"mkdirp"},"init":{"type":"CallExpression","start":161,"end":189,"callee":{"type":"Identifier","start":161,"end":170,"name":"promisify"},"arguments":[{"type":"CallExpression","start":171,"end":188,"callee":{"type":"Identifier","start":171,"end":178,"name":"require"},"arguments":[{"type":"Literal","start":179,"end":187,"value":"mkdirp","raw":"'mkdirp'"}]}]}}],"kind":"const"},{"type":"VariableDeclaration","start":190,"end":214,"declarations":[{"type":"VariableDeclarator","start":196,"end":214,"id":{"type":"Identifier","start":196,"end":198,"name":"fs"},"init":{"type":"CallExpression","start":201,"end":214,"callee":{"type":"Identifier","start":201,"end":208,"name":"require"},"arguments":[{"type":"Literal","start":209,"end":213,"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":215,"end":243,"declarations":[{"type":"VariableDeclarator","start":221,"end":243,"id":{"type":"Identifier","start":221,"end":225,"name":"path"},"init":{"type":"CallExpression","start":228,"end":243,"callee":{"type":"Identifier","start":228,"end":235,"name":"require"},"arguments":[{"type":"Literal","start":236,"end":242,"value":"path","raw":"'path'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":245,"end":297,"declarations":[{"type":"VariableDeclarator","start":251,"end":297,"id":{"type":"Identifier","start":251,"end":264,"name":"transformFile"},"init":{"type":"CallExpression","start":267,"end":297,"callee":{"type":"Identifier","start":267,"end":276,"name":"promisify"},"arguments":[{"type":"MemberExpression","start":277,"end":296,"object":{"type":"Identifier","start":277,"end":282,"name":"babel"},"property":{"type":"Identifier","start":283,"end":296,"name":"transformFile"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":298,"end":339,"declarations":[{"type":"VariableDeclarator","start":304,"end":339,"id":{"type":"Identifier","start":304,"end":313,"name":"writeFile"},"init":{"type":"CallExpression","start":316,"end":339,"callee":{"type":"Identifier","start":316,"end":325,"name":"promisify"},"arguments":[{"type":"MemberExpression","start":326,"end":338,"object":{"type":"Identifier","start":326,"end":328,"name":"fs"},"property":{"type":"Identifier","start":329,"end":338,"name":"writeFile"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":340,"end":371,"declarations":[{"type":"VariableDeclarator","start":346,"end":371,"id":{"type":"Identifier","start":346,"end":350,"name":"stat"},"init":{"type":"CallExpression","start":353,"end":371,"callee":{"type":"Identifier","start":353,"end":362,"name":"promisify"},"arguments":[{"type":"MemberExpression","start":363,"end":370,"object":{"type":"Identifier","start":363,"end":365,"name":"fs"},"property":{"type":"Identifier","start":366,"end":370,"name":"stat"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":373,"end":422,"declarations":[{"type":"VariableDeclarator","start":379,"end":422,"id":{"type":"Identifier","start":379,"end":385,"name":"SOURCE"},"init":{"type":"Literal","start":388,"end":422,"value":"packages/{*,@uppy/*}/src/**/*.js","raw":"'packages/{*,@uppy/*}/src/**/*.js'"}}],"kind":"const"},{"type":"VariableDeclaration","start":461,"end":511,"declarations":[{"type":"VariableDeclarator","start":467,"end":511,"id":{"type":"Identifier","start":467,"end":473,"name":"IGNORE"},"init":{"type":"Literal","start":476,"end":511,"value":{},"raw":"/\\.test\\.js$|__mocks__|companion\\//","regex":{"pattern":"\\.test\\.js$|__mocks__|companion\\/","flags":""}}}],"kind":"const"},{"type":"VariableDeclaration","start":575,"end":680,"declarations":[{"type":"VariableDeclarator","start":581,"end":680,"id":{"type":"Identifier","start":581,"end":591,"name":"META_FILES"},"init":{"type":"ArrayExpression","start":594,"end":680,"elements":[{"type":"Literal","start":598,"end":615,"value":"babel.config.js","raw":"'babel.config.js'"},{"type":"Literal","start":619,"end":633,"value":"package.json","raw":"'package.json'"},{"type":"Literal","start":637,"end":656,"value":"package-lock.json","raw":"'package-lock.json'"},{"type":"Literal","start":660,"end":678,"value":"bin/build-lib.js","raw":"'bin/build-lib.js'"}]}}],"kind":"const"},{"type":"FunctionDeclaration","start":682,"end":755,"id":{"type":"Identifier","start":691,"end":703,"name":"lastModified"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":705,"end":709,"name":"file"}],"body":{"type":"BlockStatement","start":711,"end":755,"body":[{"type":"ReturnStatement","start":715,"end":753,"argument":{"type":"CallExpression","start":722,"end":753,"callee":{"type":"MemberExpression","start":722,"end":737,"object":{"type":"CallExpression","start":722,"end":732,"callee":{"type":"Identifier","start":722,"end":726,"name":"stat"},"arguments":[{"type":"Identifier","start":727,"end":731,"name":"file"}]},"property":{"type":"Identifier","start":733,"end":737,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":738,"end":752,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":739,"end":740,"name":"s"}],"body":{"type":"MemberExpression","start":745,"end":752,"object":{"type":"Identifier","start":745,"end":746,"name":"s"},"property":{"type":"Identifier","start":747,"end":752,"name":"mtime"},"computed":false}}]}}]}},{"type":"FunctionDeclaration","start":757,"end":1755,"id":{"type":"Identifier","start":772,"end":780,"name":"buildLib"},"expression":false,"generator":false,"async":true,"params":[],"body":{"type":"BlockStatement","start":784,"end":1755,"body":[{"type":"VariableDeclaration","start":788,"end":913,"declarations":[{"type":"VariableDeclarator","start":794,"end":913,"id":{"type":"Identifier","start":794,"end":804,"name":"metaMtimes"},"init":{"type":"AwaitExpression","start":807,"end":913,"argument":{"type":"CallExpression","start":813,"end":913,"callee":{"type":"MemberExpression","start":813,"end":824,"object":{"type":"Identifier","start":813,"end":820,"name":"Promise"},"property":{"type":"Identifier","start":821,"end":824,"name":"all"},"computed":false},"arguments":[{"type":"CallExpression","start":825,"end":912,"callee":{"type":"MemberExpression","start":825,"end":839,"object":{"type":"Identifier","start":825,"end":835,"name":"META_FILES"},"property":{"type":"Identifier","start":836,"end":839,"name":"map"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":840,"end":908,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":841,"end":849,"name":"filename"}],"body":{"type":"CallExpression","start":858,"end":908,"callee":{"type":"Identifier","start":858,"end":870,"name":"lastModified"},"arguments":[{"type":"CallExpression","start":871,"end":907,"callee":{"type":"MemberExpression","start":871,"end":880,"object":{"type":"Identifier","start":871,"end":875,"name":"path"},"property":{"type":"Identifier","start":876,"end":880,"name":"join"},"computed":false},"arguments":[{"type":"Identifier","start":881,"end":890,"name":"__dirname"},{"type":"Literal","start":892,"end":896,"value":"..","raw":"'..'"},{"type":"Identifier","start":898,"end":906,"name":"filename"}]}]}}]}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":916,"end":957,"declarations":[{"type":"VariableDeclarator","start":922,"end":957,"id":{"type":"Identifier","start":922,"end":931,"name":"metaMtime"},"init":{"type":"CallExpression","start":934,"end":957,"callee":{"type":"MemberExpression","start":934,"end":942,"object":{"type":"Identifier","start":934,"end":938,"name":"Math"},"property":{"type":"Identifier","start":939,"end":942,"name":"max"},"computed":false},"arguments":[{"type":"SpreadElement","start":943,"end":956,"argument":{"type":"Identifier","start":946,"end":956,"name":"metaMtimes"}}]}}],"kind":"const"},{"type":"VariableDeclaration","start":961,"end":993,"declarations":[{"type":"VariableDeclarator","start":967,"end":993,"id":{"type":"Identifier","start":967,"end":972,"name":"files"},"init":{"type":"AwaitExpression","start":975,"end":993,"argument":{"type":"CallExpression","start":981,"end":993,"callee":{"type":"Identifier","start":981,"end":985,"name":"glob"},"arguments":[{"type":"Identifier","start":986,"end":992,"name":"SOURCE"}]}}}],"kind":"const"},{"type":"ForOfStatement","start":996,"end":1753,"await":false,"left":{"type":"VariableDeclaration","start":1001,"end":1011,"declarations":[{"type":"VariableDeclarator","start":1007,"end":1011,"id":{"type":"Identifier","start":1007,"end":1011,"name":"file"},"init":null}],"kind":"const"},"right":{"type":"Identifier","start":1015,"end":1020,"name":"files"},"body":{"type":"BlockStatement","start":1022,"end":1753,"body":[{"type":"IfStatement","start":1028,"end":1059,"test":{"type":"CallExpression","start":1032,"end":1049,"callee":{"type":"MemberExpression","start":1032,"end":1043,"object":{"type":"Identifier","start":1032,"end":1038,"name":"IGNORE"},"property":{"type":"Identifier","start":1039,"end":1043,"name":"test"},"computed":false},"arguments":[{"type":"Identifier","start":1044,"end":1048,"name":"file"}]},"consequent":{"type":"ContinueStatement","start":1051,"end":1059,"label":null},"alternate":null},{"type":"VariableDeclaration","start":1064,"end":1110,"declarations":[{"type":"VariableDeclarator","start":1070,"end":1110,"id":{"type":"Identifier","start":1070,"end":1077,"name":"libFile"},"init":{"type":"CallExpression","start":1080,"end":1110,"callee":{"type":"MemberExpression","start":1080,"end":1092,"object":{"type":"Identifier","start":1080,"end":1084,"name":"file"},"property":{"type":"Identifier","start":1085,"end":1092,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":1093,"end":1100,"value":"/src/","raw":"'/src/'"},{"type":"Literal","start":1102,"end":1109,"value":"/lib/","raw":"'/lib/'"}]}}],"kind":"const"},{"type":"IfStatement","start":1161,"end":1464,"test":{"type":"UnaryExpression","start":1165,"end":1183,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1166,"end":1183,"object":{"type":"MemberExpression","start":1166,"end":1177,"object":{"type":"Identifier","start":1166,"end":1173,"name":"process"},"property":{"type":"Identifier","start":1174,"end":1177,"name":"env"},"computed":false},"property":{"type":"Identifier","start":1178,"end":1183,"name":"FRESH"},"computed":false}},"consequent":{"type":"BlockStatement","start":1185,"end":1464,"body":[{"type":"VariableDeclaration","start":1193,"end":1234,"declarations":[{"type":"VariableDeclarator","start":1199,"end":1234,"id":{"type":"Identifier","start":1199,"end":1207,"name":"srcMtime"},"init":{"type":"AwaitExpression","start":1210,"end":1234,"argument":{"type":"CallExpression","start":1216,"end":1234,"callee":{"type":"Identifier","start":1216,"end":1228,"name":"lastModified"},"arguments":[{"type":"Identifier","start":1229,"end":1233,"name":"file"}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1241,"end":1309,"declarations":[{"type":"VariableDeclarator","start":1247,"end":1309,"id":{"type":"Identifier","start":1247,"end":1255,"name":"libMtime"},"init":{"type":"AwaitExpression","start":1258,"end":1309,"argument":{"type":"CallExpression","start":1264,"end":1309,"callee":{"type":"MemberExpression","start":1264,"end":1300,"object":{"type":"CallExpression","start":1264,"end":1285,"callee":{"type":"Identifier","start":1264,"end":1276,"name":"lastModified"},"arguments":[{"type":"Identifier","start":1277,"end":1284,"name":"libFile"}]},"property":{"type":"Identifier","start":1295,"end":1300,"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1301,"end":1308,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"Literal","start":1307,"end":1308,"value":0,"raw":"0"}}]}}}],"kind":"const"},{"type":"IfStatement","start":1383,"end":1458,"test":{"type":"LogicalExpression","start":1387,"end":1430,"left":{"type":"BinaryExpression","start":1387,"end":1406,"left":{"type":"Identifier","start":1387,"end":1395,"name":"srcMtime"},"operator":"<","right":{"type":"Identifier","start":1398,"end":1406,"name":"libMtime"}},"operator":"&&","right":{"type":"BinaryExpression","start":1410,"end":1430,"left":{"type":"Identifier","start":1410,"end":1419,"name":"metaMtime"},"operator":"<","right":{"type":"Identifier","start":1422,"end":1430,"name":"libMtime"}}},"consequent":{"type":"BlockStatement","start":1432,"end":1458,"body":[{"type":"ContinueStatement","start":1442,"end":1450,"label":null}]},"alternate":null}]},"alternate":null},{"type":"VariableDeclaration","start":1470,"end":1521,"declarations":[{"type":"VariableDeclarator","start":1476,"end":1521,"id":{"type":"ObjectPattern","start":1476,"end":1489,"properties":[{"type":"Property","start":1478,"end":1482,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1478,"end":1482,"name":"code"},"kind":"init","value":{"type":"Identifier","start":1478,"end":1482,"name":"code"}},{"type":"Property","start":1484,"end":1487,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1484,"end":1487,"name":"map"},"kind":"init","value":{"type":"Identifier","start":1484,"end":1487,"name":"map"}}]},"init":{"type":"AwaitExpression","start":1492,"end":1521,"argument":{"type":"CallExpression","start":1498,"end":1521,"callee":{"type":"Identifier","start":1498,"end":1511,"name":"transformFile"},"arguments":[{"type":"Identifier","start":1512,"end":1516,"name":"file"},{"type":"ObjectExpression","start":1518,"end":1520,"properties":[]}]}}}],"kind":"const"},{"type":"ExpressionStatement","start":1526,"end":1561,"expression":{"type":"AwaitExpression","start":1526,"end":1561,"argument":{"type":"CallExpression","start":1532,"end":1561,"callee":{"type":"Identifier","start":1532,"end":1538,"name":"mkdirp"},"arguments":[{"type":"CallExpression","start":1539,"end":1560,"callee":{"type":"MemberExpression","start":1539,"end":1551,"object":{"type":"Identifier","start":1539,"end":1543,"name":"path"},"property":{"type":"Identifier","start":1544,"end":1551,"name":"dirname"},"computed":false},"arguments":[{"type":"Identifier","start":1552,"end":1559,"name":"libFile"}]}]}}},{"type":"ExpressionStatement","start":1566,"end":1679,"expression":{"type":"AwaitExpression","start":1566,"end":1679,"argument":{"type":"CallExpression","start":1572,"end":1679,"callee":{"type":"MemberExpression","start":1572,"end":1583,"object":{"type":"Identifier","start":1572,"end":1579,"name":"Promise"},"property":{"type":"Identifier","start":1580,"end":1583,"name":"all"},"computed":false},"arguments":[{"type":"ArrayExpression","start":1584,"end":1678,"elements":[{"type":"CallExpression","start":1592,"end":1616,"callee":{"type":"Identifier","start":1592,"end":1601,"name":"writeFile"},"arguments":[{"type":"Identifier","start":1602,"end":1609,"name":"libFile"},{"type":"Identifier","start":1611,"end":1615,"name":"code"}]},{"type":"CallExpression","start":1624,"end":1672,"callee":{"type":"Identifier","start":1624,"end":1633,"name":"writeFile"},"arguments":[{"type":"BinaryExpression","start":1634,"end":1650,"left":{"type":"Identifier","start":1634,"end":1641,"name":"libFile"},"operator":"+","right":{"type":"Literal","start":1644,"end":1650,"value":".map","raw":"'.map'"}},{"type":"CallExpression","start":1652,"end":1671,"callee":{"type":"MemberExpression","start":1652,"end":1666,"object":{"type":"Identifier","start":1652,"end":1656,"name":"JSON"},"property":{"type":"Identifier","start":1657,"end":1666,"name":"stringify"},"computed":false},"arguments":[{"type":"Identifier","start":1667,"end":1670,"name":"map"}]}]}]}]}}},{"type":"ExpressionStatement","start":1684,"end":1749,"expression":{"type":"CallExpression","start":1684,"end":1749,"callee":{"type":"MemberExpression","start":1684,"end":1695,"object":{"type":"Identifier","start":1684,"end":1691,"name":"console"},"property":{"type":"Identifier","start":1692,"end":1695,"name":"log"},"computed":false},"arguments":[{"type":"CallExpression","start":1696,"end":1724,"callee":{"type":"MemberExpression","start":1696,"end":1707,"object":{"type":"Identifier","start":1696,"end":1701,"name":"chalk"},"property":{"type":"Identifier","start":1702,"end":1707,"name":"green"},"computed":false},"arguments":[{"type":"Literal","start":1708,"end":1723,"value":"Compiled lib:","raw":"'Compiled lib:'"}]},{"type":"CallExpression","start":1726,"end":1748,"callee":{"type":"MemberExpression","start":1726,"end":1739,"object":{"type":"Identifier","start":1726,"end":1731,"name":"chalk"},"property":{"type":"Identifier","start":1732,"end":1739,"name":"magenta"},"computed":false},"arguments":[{"type":"Identifier","start":1740,"end":1747,"name":"libFile"}]}]}}]}}]}},{"type":"ExpressionStatement","start":1757,"end":1837,"expression":{"type":"CallExpression","start":1757,"end":1837,"callee":{"type":"MemberExpression","start":1757,"end":1768,"object":{"type":"Identifier","start":1757,"end":1764,"name":"console"},"property":{"type":"Identifier","start":1765,"end":1768,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":1769,"end":1791,"value":"Using Babel version:","raw":"'Using Babel version:'"},{"type":"MemberExpression","start":1793,"end":1836,"object":{"type":"CallExpression","start":1793,"end":1828,"callee":{"type":"Identifier","start":1793,"end":1800,"name":"require"},"arguments":[{"type":"Literal","start":1801,"end":1827,"value":"@babel/core/package.json","raw":"'@babel/core/package.json'"}]},"property":{"type":"Identifier","start":1829,"end":1836,"name":"version"},"computed":false}]}},{"type":"ExpressionStatement","start":1838,"end":1913,"expression":{"type":"CallExpression","start":1838,"end":1913,"callee":{"type":"MemberExpression","start":1838,"end":1854,"object":{"type":"CallExpression","start":1838,"end":1848,"callee":{"type":"Identifier","start":1838,"end":1846,"name":"buildLib"},"arguments":[]},"property":{"type":"Identifier","start":1849,"end":1854,"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1855,"end":1912,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1856,"end":1859,"name":"err"}],"body":{"type":"BlockStatement","start":1864,"end":1912,"body":[{"type":"ExpressionStatement","start":1868,"end":1892,"expression":{"type":"CallExpression","start":1868,"end":1892,"callee":{"type":"MemberExpression","start":1868,"end":1881,"object":{"type":"Identifier","start":1868,"end":1875,"name":"console"},"property":{"type":"Identifier","start":1876,"end":1881,"name":"error"},"computed":false},"arguments":[{"type":"MemberExpression","start":1882,"end":1891,"object":{"type":"Identifier","start":1882,"end":1885,"name":"err"},"property":{"type":"Identifier","start":1886,"end":1891,"name":"stack"},"computed":false}]}},{"type":"ExpressionStatement","start":1895,"end":1910,"expression":{"type":"CallExpression","start":1895,"end":1910,"callee":{"type":"MemberExpression","start":1895,"end":1907,"object":{"type":"Identifier","start":1895,"end":1902,"name":"process"},"property":{"type":"Identifier","start":1903,"end":1907,"name":"exit"},"computed":false},"arguments":[{"type":"Literal","start":1908,"end":1909,"value":1,"raw":"1"}]}}]}}]}}],"sourceType":"script"}