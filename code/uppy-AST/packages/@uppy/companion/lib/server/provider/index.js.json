{"type":"Program","start":0,"end":5566,"body":[{"type":"VariableDeclaration","start":42,"end":86,"declarations":[{"type":"VariableDeclarator","start":48,"end":85,"id":{"type":"Identifier","start":48,"end":54,"name":"config"},"init":{"type":"CallExpression","start":57,"end":85,"callee":{"type":"Identifier","start":57,"end":64,"name":"require"},"arguments":[{"type":"Literal","start":65,"end":84,"value":"@purest/providers","raw":"'@purest/providers'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":87,"end":124,"declarations":[{"type":"VariableDeclarator","start":93,"end":123,"id":{"type":"Identifier","start":93,"end":100,"name":"dropbox"},"init":{"type":"CallExpression","start":103,"end":123,"callee":{"type":"Identifier","start":103,"end":110,"name":"require"},"arguments":[{"type":"Literal","start":111,"end":122,"value":"./dropbox","raw":"'./dropbox'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":125,"end":158,"declarations":[{"type":"VariableDeclarator","start":131,"end":157,"id":{"type":"Identifier","start":131,"end":136,"name":"drive"},"init":{"type":"CallExpression","start":139,"end":157,"callee":{"type":"Identifier","start":139,"end":146,"name":"require"},"arguments":[{"type":"Literal","start":147,"end":156,"value":"./drive","raw":"'./drive'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":159,"end":200,"declarations":[{"type":"VariableDeclarator","start":165,"end":199,"id":{"type":"Identifier","start":165,"end":174,"name":"instagram"},"init":{"type":"CallExpression","start":177,"end":199,"callee":{"type":"Identifier","start":177,"end":184,"name":"require"},"arguments":[{"type":"Literal","start":185,"end":198,"value":"./instagram","raw":"'./instagram'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":201,"end":253,"declarations":[{"type":"VariableDeclarator","start":207,"end":252,"id":{"type":"Identifier","start":207,"end":221,"name":"instagramGraph"},"init":{"type":"CallExpression","start":224,"end":252,"callee":{"type":"Identifier","start":224,"end":231,"name":"require"},"arguments":[{"type":"Literal","start":232,"end":251,"value":"./instagram/graph","raw":"'./instagram/graph'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":254,"end":293,"declarations":[{"type":"VariableDeclarator","start":260,"end":292,"id":{"type":"Identifier","start":260,"end":268,"name":"facebook"},"init":{"type":"CallExpression","start":271,"end":292,"callee":{"type":"Identifier","start":271,"end":278,"name":"require"},"arguments":[{"type":"Literal","start":279,"end":291,"value":"./facebook","raw":"'./facebook'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":294,"end":333,"declarations":[{"type":"VariableDeclarator","start":300,"end":332,"id":{"type":"Identifier","start":300,"end":308,"name":"onedrive"},"init":{"type":"CallExpression","start":311,"end":332,"callee":{"type":"Identifier","start":311,"end":318,"name":"require"},"arguments":[{"type":"Literal","start":319,"end":331,"value":"./onedrive","raw":"'./onedrive'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":334,"end":388,"declarations":[{"type":"VariableDeclarator","start":340,"end":387,"id":{"type":"ObjectPattern","start":340,"end":357,"properties":[{"type":"Property","start":342,"end":355,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":342,"end":355,"name":"getURLBuilder"},"kind":"init","value":{"type":"Identifier","start":342,"end":355,"name":"getURLBuilder"}}]},"init":{"type":"CallExpression","start":360,"end":387,"callee":{"type":"Identifier","start":360,"end":367,"name":"require"},"arguments":[{"type":"Literal","start":368,"end":386,"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":389,"end":425,"declarations":[{"type":"VariableDeclarator","start":395,"end":424,"id":{"type":"Identifier","start":395,"end":401,"name":"logger"},"init":{"type":"CallExpression","start":404,"end":424,"callee":{"type":"Identifier","start":404,"end":411,"name":"require"},"arguments":[{"type":"Literal","start":412,"end":423,"value":"../logger","raw":"'../logger'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":454,"end":493,"declarations":[{"type":"VariableDeclarator","start":460,"end":492,"id":{"type":"Identifier","start":460,"end":468,"name":"Provider"},"init":{"type":"CallExpression","start":471,"end":492,"callee":{"type":"Identifier","start":471,"end":478,"name":"require"},"arguments":[{"type":"Literal","start":479,"end":491,"value":"./Provider","raw":"'./Provider'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":668,"end":1309,"expression":{"type":"AssignmentExpression","start":668,"end":1308,"operator":"=","left":{"type":"MemberExpression","start":668,"end":704,"object":{"type":"MemberExpression","start":668,"end":682,"object":{"type":"Identifier","start":668,"end":674,"name":"module"},"property":{"type":"Identifier","start":675,"end":682,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":683,"end":704,"name":"getProviderMiddleware"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":707,"end":1308,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":708,"end":717,"name":"providers"}],"body":{"type":"BlockStatement","start":722,"end":1308,"body":[{"type":"VariableDeclaration","start":871,"end":1283,"declarations":[{"type":"VariableDeclarator","start":877,"end":1282,"id":{"type":"Identifier","start":877,"end":887,"name":"middleware"},"init":{"type":"ArrowFunctionExpression","start":890,"end":1282,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":891,"end":894,"name":"req"},{"type":"Identifier","start":896,"end":899,"name":"res"},{"type":"Identifier","start":901,"end":905,"name":"next"},{"type":"Identifier","start":907,"end":919,"name":"providerName"}],"body":{"type":"BlockStatement","start":924,"end":1282,"body":[{"type":"IfStatement","start":934,"end":1260,"test":{"type":"LogicalExpression","start":938,"end":1000,"left":{"type":"MemberExpression","start":938,"end":961,"object":{"type":"Identifier","start":938,"end":947,"name":"providers"},"property":{"type":"Identifier","start":948,"end":960,"name":"providerName"},"computed":true},"operator":"&&","right":{"type":"CallExpression","start":965,"end":1000,"callee":{"type":"Identifier","start":965,"end":977,"name":"validOptions"},"arguments":[{"type":"MemberExpression","start":978,"end":999,"object":{"type":"MemberExpression","start":978,"end":991,"object":{"type":"Identifier","start":978,"end":981,"name":"req"},"property":{"type":"Identifier","start":982,"end":991,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":992,"end":999,"name":"options"},"computed":false}]}},"consequent":{"type":"BlockStatement","start":1002,"end":1105,"body":[{"type":"ExpressionStatement","start":1016,"end":1095,"expression":{"type":"AssignmentExpression","start":1016,"end":1094,"operator":"=","left":{"type":"MemberExpression","start":1016,"end":1038,"object":{"type":"MemberExpression","start":1016,"end":1029,"object":{"type":"Identifier","start":1016,"end":1019,"name":"req"},"property":{"type":"Identifier","start":1020,"end":1029,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1030,"end":1038,"name":"provider"},"computed":false},"right":{"type":"NewExpression","start":1041,"end":1094,"callee":{"type":"MemberExpression","start":1045,"end":1068,"object":{"type":"Identifier","start":1045,"end":1054,"name":"providers"},"property":{"type":"Identifier","start":1055,"end":1067,"name":"providerName"},"computed":true},"arguments":[{"type":"ObjectExpression","start":1069,"end":1093,"properties":[{"type":"Property","start":1071,"end":1083,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1071,"end":1083,"name":"providerName"},"kind":"init","value":{"type":"Identifier","start":1071,"end":1083,"name":"providerName"}},{"type":"Property","start":1085,"end":1091,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1085,"end":1091,"name":"config"},"kind":"init","value":{"type":"Identifier","start":1085,"end":1091,"name":"config"}}]}]}}}]},"alternate":{"type":"BlockStatement","start":1119,"end":1260,"body":[{"type":"ExpressionStatement","start":1133,"end":1250,"expression":{"type":"CallExpression","start":1133,"end":1249,"callee":{"type":"MemberExpression","start":1133,"end":1144,"object":{"type":"Identifier","start":1133,"end":1139,"name":"logger"},"property":{"type":"Identifier","start":1140,"end":1144,"name":"warn"},"computed":false},"arguments":[{"type":"Literal","start":1145,"end":1209,"value":"invalid provider options detected. Provider will not be loaded","raw":"'invalid provider options detected. Provider will not be loaded'"},{"type":"Literal","start":1211,"end":1240,"value":"provider.middleware.invalid","raw":"'provider.middleware.invalid'"},{"type":"MemberExpression","start":1242,"end":1248,"object":{"type":"Identifier","start":1242,"end":1245,"name":"req"},"property":{"type":"Identifier","start":1246,"end":1248,"name":"id"},"computed":false}]}}]}},{"type":"ExpressionStatement","start":1269,"end":1276,"expression":{"type":"CallExpression","start":1269,"end":1275,"callee":{"type":"Identifier","start":1269,"end":1273,"name":"next"},"arguments":[]}}]}}}],"kind":"const"},{"type":"ReturnStatement","start":1288,"end":1306,"argument":{"type":"Identifier","start":1295,"end":1305,"name":"middleware"}}]}}}},{"type":"ExpressionStatement","start":1435,"end":2082,"expression":{"type":"AssignmentExpression","start":1435,"end":2081,"operator":"=","left":{"type":"MemberExpression","start":1435,"end":1469,"object":{"type":"MemberExpression","start":1435,"end":1449,"object":{"type":"Identifier","start":1435,"end":1441,"name":"module"},"property":{"type":"Identifier","start":1442,"end":1449,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":1450,"end":1469,"name":"getDefaultProviders"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1472,"end":2081,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1473,"end":1489,"name":"companionOptions"}],"body":{"type":"BlockStatement","start":1494,"end":2081,"body":[{"type":"VariableDeclaration","start":1500,"end":1574,"declarations":[{"type":"VariableDeclarator","start":1506,"end":1573,"id":{"type":"ObjectPattern","start":1506,"end":1525,"properties":[{"type":"Property","start":1508,"end":1523,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1508,"end":1523,"name":"providerOptions"},"kind":"init","value":{"type":"Identifier","start":1508,"end":1523,"name":"providerOptions"}}]},"init":{"type":"LogicalExpression","start":1528,"end":1573,"left":{"type":"Identifier","start":1528,"end":1544,"name":"companionOptions"},"operator":"||","right":{"type":"ObjectExpression","start":1548,"end":1573,"properties":[{"type":"Property","start":1550,"end":1571,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1550,"end":1565,"name":"providerOptions"},"value":{"type":"Literal","start":1567,"end":1571,"value":null,"raw":"null"},"kind":"init"}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1661,"end":1718,"declarations":[{"type":"VariableDeclarator","start":1667,"end":1717,"id":{"type":"Identifier","start":1667,"end":1676,"name":"providers"},"init":{"type":"ObjectExpression","start":1679,"end":1717,"properties":[{"type":"Property","start":1681,"end":1688,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1681,"end":1688,"name":"dropbox"},"kind":"init","value":{"type":"Identifier","start":1681,"end":1688,"name":"dropbox"}},{"type":"Property","start":1690,"end":1695,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1690,"end":1695,"name":"drive"},"kind":"init","value":{"type":"Identifier","start":1690,"end":1695,"name":"drive"}},{"type":"Property","start":1697,"end":1705,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1697,"end":1705,"name":"facebook"},"kind":"init","value":{"type":"Identifier","start":1697,"end":1705,"name":"facebook"}},{"type":"Property","start":1707,"end":1715,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1707,"end":1715,"name":"onedrive"},"kind":"init","value":{"type":"Identifier","start":1707,"end":1715,"name":"onedrive"}}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1802,"end":1873,"declarations":[{"type":"VariableDeclarator","start":1808,"end":1872,"id":{"type":"Identifier","start":1808,"end":1820,"name":"usesGraphAPI"},"init":{"type":"ArrowFunctionExpression","start":1823,"end":1872,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":1829,"end":1872,"callee":{"type":"MemberExpression","start":1829,"end":1841,"object":{"type":"Literal","start":1829,"end":1836,"value":{},"raw":"/^\\d+$/","regex":{"pattern":"^\\d+$","flags":""}},"property":{"type":"Identifier","start":1837,"end":1841,"name":"test"},"computed":false},"arguments":[{"type":"MemberExpression","start":1842,"end":1871,"object":{"type":"MemberExpression","start":1842,"end":1867,"object":{"type":"Identifier","start":1842,"end":1857,"name":"providerOptions"},"property":{"type":"Identifier","start":1858,"end":1867,"name":"instagram"},"computed":false},"property":{"type":"Identifier","start":1868,"end":1871,"name":"key"},"computed":false}]}}}],"kind":"const"},{"type":"IfStatement","start":1878,"end":2057,"test":{"type":"LogicalExpression","start":1882,"end":1944,"left":{"type":"LogicalExpression","start":1882,"end":1926,"left":{"type":"Identifier","start":1882,"end":1897,"name":"providerOptions"},"operator":"&&","right":{"type":"MemberExpression","start":1901,"end":1926,"object":{"type":"Identifier","start":1901,"end":1916,"name":"providerOptions"},"property":{"type":"Identifier","start":1917,"end":1926,"name":"instagram"},"computed":false}},"operator":"&&","right":{"type":"CallExpression","start":1930,"end":1944,"callee":{"type":"Identifier","start":1930,"end":1942,"name":"usesGraphAPI"},"arguments":[]}},"consequent":{"type":"BlockStatement","start":1946,"end":1999,"body":[{"type":"ExpressionStatement","start":1956,"end":1993,"expression":{"type":"AssignmentExpression","start":1956,"end":1992,"operator":"=","left":{"type":"MemberExpression","start":1956,"end":1975,"object":{"type":"Identifier","start":1956,"end":1965,"name":"providers"},"property":{"type":"Identifier","start":1966,"end":1975,"name":"instagram"},"computed":false},"right":{"type":"Identifier","start":1978,"end":1992,"name":"instagramGraph"}}}]},"alternate":{"type":"BlockStatement","start":2009,"end":2057,"body":[{"type":"ExpressionStatement","start":2019,"end":2051,"expression":{"type":"AssignmentExpression","start":2019,"end":2050,"operator":"=","left":{"type":"MemberExpression","start":2019,"end":2038,"object":{"type":"Identifier","start":2019,"end":2028,"name":"providers"},"property":{"type":"Identifier","start":2029,"end":2038,"name":"instagram"},"computed":false},"right":{"type":"Identifier","start":2041,"end":2050,"name":"instagram"}}}]}},{"type":"ReturnStatement","start":2062,"end":2079,"argument":{"type":"Identifier","start":2069,"end":2078,"name":"providers"}}]}}}},{"type":"ExpressionStatement","start":2314,"end":2614,"expression":{"type":"AssignmentExpression","start":2314,"end":2613,"operator":"=","left":{"type":"MemberExpression","start":2314,"end":2347,"object":{"type":"MemberExpression","start":2314,"end":2328,"object":{"type":"Identifier","start":2314,"end":2320,"name":"module"},"property":{"type":"Identifier","start":2321,"end":2328,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2329,"end":2347,"name":"addCustomProviders"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2350,"end":2613,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2351,"end":2366,"name":"customProviders"},{"type":"Identifier","start":2368,"end":2377,"name":"providers"},{"type":"Identifier","start":2379,"end":2390,"name":"grantConfig"}],"body":{"type":"BlockStatement","start":2395,"end":2613,"body":[{"type":"ExpressionStatement","start":2401,"end":2611,"expression":{"type":"CallExpression","start":2401,"end":2610,"callee":{"type":"MemberExpression","start":2401,"end":2437,"object":{"type":"CallExpression","start":2401,"end":2429,"callee":{"type":"MemberExpression","start":2401,"end":2412,"object":{"type":"Identifier","start":2401,"end":2407,"name":"Object"},"property":{"type":"Identifier","start":2408,"end":2412,"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":2413,"end":2428,"name":"customProviders"}]},"property":{"type":"Identifier","start":2430,"end":2437,"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2438,"end":2609,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2439,"end":2451,"name":"providerName"}],"body":{"type":"BlockStatement","start":2456,"end":2609,"body":[{"type":"ExpressionStatement","start":2466,"end":2529,"expression":{"type":"AssignmentExpression","start":2466,"end":2528,"operator":"=","left":{"type":"MemberExpression","start":2466,"end":2489,"object":{"type":"Identifier","start":2466,"end":2475,"name":"providers"},"property":{"type":"Identifier","start":2476,"end":2488,"name":"providerName"},"computed":true},"right":{"type":"MemberExpression","start":2492,"end":2528,"object":{"type":"MemberExpression","start":2492,"end":2521,"object":{"type":"Identifier","start":2492,"end":2507,"name":"customProviders"},"property":{"type":"Identifier","start":2508,"end":2520,"name":"providerName"},"computed":true},"property":{"type":"Identifier","start":2522,"end":2528,"name":"module"},"computed":false}}},{"type":"ExpressionStatement","start":2538,"end":2603,"expression":{"type":"AssignmentExpression","start":2538,"end":2602,"operator":"=","left":{"type":"MemberExpression","start":2538,"end":2563,"object":{"type":"Identifier","start":2538,"end":2549,"name":"grantConfig"},"property":{"type":"Identifier","start":2550,"end":2562,"name":"providerName"},"computed":true},"right":{"type":"MemberExpression","start":2566,"end":2602,"object":{"type":"MemberExpression","start":2566,"end":2595,"object":{"type":"Identifier","start":2566,"end":2581,"name":"customProviders"},"property":{"type":"Identifier","start":2582,"end":2594,"name":"providerName"},"computed":true},"property":{"type":"Identifier","start":2596,"end":2602,"name":"config"},"computed":false}}}]}}]}}]}}}},{"type":"ExpressionStatement","start":2728,"end":4899,"expression":{"type":"AssignmentExpression","start":2728,"end":4898,"operator":"=","left":{"type":"MemberExpression","start":2728,"end":2761,"object":{"type":"MemberExpression","start":2728,"end":2742,"object":{"type":"Identifier","start":2728,"end":2734,"name":"module"},"property":{"type":"Identifier","start":2735,"end":2742,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2743,"end":2761,"name":"addProviderOptions"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2764,"end":4898,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2765,"end":2781,"name":"companionOptions"},{"type":"Identifier","start":2783,"end":2794,"name":"grantConfig"}],"body":{"type":"BlockStatement","start":2799,"end":4898,"body":[{"type":"VariableDeclaration","start":2805,"end":2858,"declarations":[{"type":"VariableDeclarator","start":2811,"end":2857,"id":{"type":"ObjectPattern","start":2811,"end":2838,"properties":[{"type":"Property","start":2813,"end":2819,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2813,"end":2819,"name":"server"},"kind":"init","value":{"type":"Identifier","start":2813,"end":2819,"name":"server"}},{"type":"Property","start":2821,"end":2836,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2821,"end":2836,"name":"providerOptions"},"kind":"init","value":{"type":"Identifier","start":2821,"end":2836,"name":"providerOptions"}}]},"init":{"type":"Identifier","start":2841,"end":2857,"name":"companionOptions"}}],"kind":"const"},{"type":"IfStatement","start":2863,"end":3033,"test":{"type":"UnaryExpression","start":2867,"end":2892,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":2868,"end":2892,"callee":{"type":"Identifier","start":2868,"end":2880,"name":"validOptions"},"arguments":[{"type":"ObjectExpression","start":2881,"end":2891,"properties":[{"type":"Property","start":2883,"end":2889,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2883,"end":2889,"name":"server"},"kind":"init","value":{"type":"Identifier","start":2883,"end":2889,"name":"server"}}]}]}},"consequent":{"type":"BlockStatement","start":2894,"end":3033,"body":[{"type":"ExpressionStatement","start":2904,"end":3011,"expression":{"type":"CallExpression","start":2904,"end":3010,"callee":{"type":"MemberExpression","start":2904,"end":2915,"object":{"type":"Identifier","start":2904,"end":2910,"name":"logger"},"property":{"type":"Identifier","start":2911,"end":2915,"name":"warn"},"computed":false},"arguments":[{"type":"Literal","start":2916,"end":2981,"value":"invalid provider options detected. Providers will not be loaded","raw":"'invalid provider options detected. Providers will not be loaded'"},{"type":"Literal","start":2983,"end":3009,"value":"provider.options.invalid","raw":"'provider.options.invalid'"}]}},{"type":"ReturnStatement","start":3020,"end":3027,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":3038,"end":3157,"expression":{"type":"AssignmentExpression","start":3038,"end":3156,"operator":"=","left":{"type":"MemberExpression","start":3038,"end":3058,"object":{"type":"Identifier","start":3038,"end":3049,"name":"grantConfig"},"property":{"type":"Identifier","start":3050,"end":3058,"name":"defaults"},"computed":false},"right":{"type":"ObjectExpression","start":3061,"end":3156,"properties":[{"type":"Property","start":3071,"end":3088,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3071,"end":3075,"name":"host"},"value":{"type":"MemberExpression","start":3077,"end":3088,"object":{"type":"Identifier","start":3077,"end":3083,"name":"server"},"property":{"type":"Identifier","start":3084,"end":3088,"name":"host"},"computed":false},"kind":"init"},{"type":"Property","start":3098,"end":3123,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3098,"end":3106,"name":"protocol"},"value":{"type":"MemberExpression","start":3108,"end":3123,"object":{"type":"Identifier","start":3108,"end":3114,"name":"server"},"property":{"type":"Identifier","start":3115,"end":3123,"name":"protocol"},"computed":false},"kind":"init"},{"type":"Property","start":3133,"end":3150,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3133,"end":3137,"name":"path"},"value":{"type":"MemberExpression","start":3139,"end":3150,"object":{"type":"Identifier","start":3139,"end":3145,"name":"server"},"property":{"type":"Identifier","start":3146,"end":3150,"name":"path"},"computed":false},"kind":"init"}]}}},{"type":"VariableDeclaration","start":3162,"end":3193,"declarations":[{"type":"VariableDeclarator","start":3168,"end":3192,"id":{"type":"ObjectPattern","start":3168,"end":3183,"properties":[{"type":"Property","start":3170,"end":3181,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3170,"end":3181,"name":"oauthDomain"},"kind":"init","value":{"type":"Identifier","start":3170,"end":3181,"name":"oauthDomain"}}]},"init":{"type":"Identifier","start":3186,"end":3192,"name":"server"}}],"kind":"const"},{"type":"VariableDeclaration","start":3198,"end":3274,"declarations":[{"type":"VariableDeclarator","start":3204,"end":3273,"id":{"type":"Identifier","start":3204,"end":3208,"name":"keys"},"init":{"type":"CallExpression","start":3211,"end":3273,"callee":{"type":"MemberExpression","start":3211,"end":3246,"object":{"type":"CallExpression","start":3211,"end":3239,"callee":{"type":"MemberExpression","start":3211,"end":3222,"object":{"type":"Identifier","start":3211,"end":3217,"name":"Object"},"property":{"type":"Identifier","start":3218,"end":3222,"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":3223,"end":3238,"name":"providerOptions"}]},"property":{"type":"Identifier","start":3240,"end":3246,"name":"filter"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3247,"end":3272,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3248,"end":3251,"name":"key"}],"body":{"type":"BinaryExpression","start":3256,"end":3272,"left":{"type":"Identifier","start":3256,"end":3259,"name":"key"},"operator":"!==","right":{"type":"Literal","start":3264,"end":3272,"value":"server","raw":"'server'"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3279,"end":4896,"expression":{"type":"CallExpression","start":3279,"end":4895,"callee":{"type":"MemberExpression","start":3279,"end":3291,"object":{"type":"Identifier","start":3279,"end":3283,"name":"keys"},"property":{"type":"Identifier","start":3284,"end":3291,"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3292,"end":4894,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3293,"end":3305,"name":"authProvider"}],"body":{"type":"BlockStatement","start":3310,"end":4894,"body":[{"type":"IfStatement","start":3320,"end":4888,"test":{"type":"MemberExpression","start":3324,"end":3349,"object":{"type":"Identifier","start":3324,"end":3335,"name":"grantConfig"},"property":{"type":"Identifier","start":3336,"end":3348,"name":"authProvider"},"computed":true},"consequent":{"type":"BlockStatement","start":3351,"end":4724,"body":[{"type":"ExpressionStatement","start":3458,"end":3524,"expression":{"type":"AssignmentExpression","start":3458,"end":3523,"operator":"=","left":{"type":"MemberExpression","start":3458,"end":3487,"object":{"type":"MemberExpression","start":3458,"end":3483,"object":{"type":"Identifier","start":3458,"end":3469,"name":"grantConfig"},"property":{"type":"Identifier","start":3470,"end":3482,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3484,"end":3487,"name":"key"},"computed":false},"right":{"type":"MemberExpression","start":3490,"end":3523,"object":{"type":"MemberExpression","start":3490,"end":3519,"object":{"type":"Identifier","start":3490,"end":3505,"name":"providerOptions"},"property":{"type":"Identifier","start":3506,"end":3518,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3520,"end":3523,"name":"key"},"computed":false}}},{"type":"ExpressionStatement","start":3537,"end":3609,"expression":{"type":"AssignmentExpression","start":3537,"end":3608,"operator":"=","left":{"type":"MemberExpression","start":3537,"end":3569,"object":{"type":"MemberExpression","start":3537,"end":3562,"object":{"type":"Identifier","start":3537,"end":3548,"name":"grantConfig"},"property":{"type":"Identifier","start":3549,"end":3561,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3563,"end":3569,"name":"secret"},"computed":false},"right":{"type":"MemberExpression","start":3572,"end":3608,"object":{"type":"MemberExpression","start":3572,"end":3601,"object":{"type":"Identifier","start":3572,"end":3587,"name":"providerOptions"},"property":{"type":"Identifier","start":3588,"end":3600,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3602,"end":3608,"name":"secret"},"computed":false}}},{"type":"VariableDeclaration","start":3622,"end":3700,"declarations":[{"type":"VariableDeclarator","start":3628,"end":3699,"id":{"type":"ObjectPattern","start":3628,"end":3646,"properties":[{"type":"Property","start":3630,"end":3638,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3630,"end":3638,"name":"provider"},"kind":"init","value":{"type":"Identifier","start":3630,"end":3638,"name":"provider"}},{"type":"Property","start":3640,"end":3644,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3640,"end":3644,"name":"name"},"kind":"init","value":{"type":"Identifier","start":3640,"end":3644,"name":"name"}}]},"init":{"type":"CallExpression","start":3649,"end":3699,"callee":{"type":"Identifier","start":3649,"end":3667,"name":"authNameToProvider"},"arguments":[{"type":"Identifier","start":3668,"end":3680,"name":"authProvider"},{"type":"Identifier","start":3682,"end":3698,"name":"companionOptions"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3713,"end":3781,"expression":{"type":"CallExpression","start":3713,"end":3780,"callee":{"type":"MemberExpression","start":3713,"end":3726,"object":{"type":"Identifier","start":3713,"end":3719,"name":"Object"},"property":{"type":"Identifier","start":3720,"end":3726,"name":"assign"},"computed":false},"arguments":[{"type":"MemberExpression","start":3727,"end":3752,"object":{"type":"Identifier","start":3727,"end":3738,"name":"grantConfig"},"property":{"type":"Identifier","start":3739,"end":3751,"name":"authProvider"},"computed":true},{"type":"CallExpression","start":3754,"end":3779,"callee":{"type":"MemberExpression","start":3754,"end":3777,"object":{"type":"Identifier","start":3754,"end":3762,"name":"provider"},"property":{"type":"Identifier","start":3763,"end":3777,"name":"getExtraConfig"},"computed":false},"arguments":[]}]}},{"type":"IfStatement","start":3877,"end":4297,"test":{"type":"Identifier","start":3881,"end":3892,"name":"oauthDomain"},"consequent":{"type":"BlockStatement","start":3894,"end":4297,"body":[{"type":"VariableDeclaration","start":3912,"end":3938,"declarations":[{"type":"VariableDeclarator","start":3918,"end":3937,"id":{"type":"Identifier","start":3918,"end":3930,"name":"providerName"},"init":{"type":"Identifier","start":3933,"end":3937,"name":"name"}}],"kind":"const"},{"type":"VariableDeclaration","start":3955,"end":4004,"declarations":[{"type":"VariableDeclarator","start":3961,"end":4003,"id":{"type":"Identifier","start":3961,"end":3973,"name":"redirectPath"},"init":{"type":"TemplateLiteral","start":3976,"end":4003,"expressions":[{"type":"Identifier","start":3980,"end":3992,"name":"providerName"}],"quasis":[{"type":"TemplateElement","start":3977,"end":3978,"value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","start":3993,"end":4002,"value":{"raw":"/redirect","cooked":"/redirect"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4021,"end":4062,"declarations":[{"type":"VariableDeclarator","start":4027,"end":4061,"id":{"type":"Identifier","start":4027,"end":4037,"name":"isExternal"},"init":{"type":"UnaryExpression","start":4040,"end":4061,"operator":"!","prefix":true,"argument":{"type":"UnaryExpression","start":4041,"end":4061,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":4042,"end":4061,"object":{"type":"Identifier","start":4042,"end":4048,"name":"server"},"property":{"type":"Identifier","start":4049,"end":4061,"name":"implicitPath"},"computed":false}}}}],"kind":"const"},{"type":"VariableDeclaration","start":4079,"end":4168,"declarations":[{"type":"VariableDeclarator","start":4085,"end":4167,"id":{"type":"Identifier","start":4085,"end":4101,"name":"fullRedirectPath"},"init":{"type":"CallExpression","start":4104,"end":4167,"callee":{"type":"CallExpression","start":4104,"end":4135,"callee":{"type":"Identifier","start":4104,"end":4117,"name":"getURLBuilder"},"arguments":[{"type":"Identifier","start":4118,"end":4134,"name":"companionOptions"}]},"arguments":[{"type":"Identifier","start":4136,"end":4148,"name":"redirectPath"},{"type":"Identifier","start":4150,"end":4160,"name":"isExternal"},{"type":"Literal","start":4162,"end":4166,"value":true,"raw":"true"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":4185,"end":4283,"expression":{"type":"AssignmentExpression","start":4185,"end":4282,"operator":"=","left":{"type":"MemberExpression","start":4185,"end":4223,"object":{"type":"MemberExpression","start":4185,"end":4210,"object":{"type":"Identifier","start":4185,"end":4196,"name":"grantConfig"},"property":{"type":"Identifier","start":4197,"end":4209,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4211,"end":4223,"name":"redirect_uri"},"computed":false},"right":{"type":"TemplateLiteral","start":4226,"end":4282,"expressions":[{"type":"MemberExpression","start":4229,"end":4244,"object":{"type":"Identifier","start":4229,"end":4235,"name":"server"},"property":{"type":"Identifier","start":4236,"end":4244,"name":"protocol"},"computed":false},{"type":"Identifier","start":4250,"end":4261,"name":"oauthDomain"},{"type":"Identifier","start":4264,"end":4280,"name":"fullRedirectPath"}],"quasis":[{"type":"TemplateElement","start":4227,"end":4227,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4245,"end":4248,"value":{"raw":"://","cooked":"://"},"tail":false},{"type":"TemplateElement","start":4262,"end":4262,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4281,"end":4281,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"IfStatement","start":4310,"end":4714,"test":{"type":"MemberExpression","start":4314,"end":4333,"object":{"type":"Identifier","start":4314,"end":4320,"name":"server"},"property":{"type":"Identifier","start":4321,"end":4333,"name":"implicitPath"},"computed":false},"consequent":{"type":"BlockStatement","start":4335,"end":4556,"body":[{"type":"ExpressionStatement","start":4443,"end":4542,"expression":{"type":"AssignmentExpression","start":4443,"end":4541,"operator":"=","left":{"type":"MemberExpression","start":4443,"end":4477,"object":{"type":"MemberExpression","start":4443,"end":4468,"object":{"type":"Identifier","start":4443,"end":4454,"name":"grantConfig"},"property":{"type":"Identifier","start":4455,"end":4467,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4469,"end":4477,"name":"callback"},"computed":false},"right":{"type":"TemplateLiteral","start":4480,"end":4541,"expressions":[{"type":"MemberExpression","start":4483,"end":4502,"object":{"type":"Identifier","start":4483,"end":4489,"name":"server"},"property":{"type":"Identifier","start":4490,"end":4502,"name":"implicitPath"},"computed":false},{"type":"MemberExpression","start":4505,"end":4539,"object":{"type":"MemberExpression","start":4505,"end":4530,"object":{"type":"Identifier","start":4505,"end":4516,"name":"grantConfig"},"property":{"type":"Identifier","start":4517,"end":4529,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4531,"end":4539,"name":"callback"},"computed":false}],"quasis":[{"type":"TemplateElement","start":4481,"end":4481,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4503,"end":4503,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4540,"end":4540,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":{"type":"IfStatement","start":4574,"end":4714,"test":{"type":"MemberExpression","start":4578,"end":4589,"object":{"type":"Identifier","start":4578,"end":4584,"name":"server"},"property":{"type":"Identifier","start":4585,"end":4589,"name":"path"},"computed":false},"consequent":{"type":"BlockStatement","start":4591,"end":4714,"body":[{"type":"ExpressionStatement","start":4609,"end":4700,"expression":{"type":"AssignmentExpression","start":4609,"end":4699,"operator":"=","left":{"type":"MemberExpression","start":4609,"end":4643,"object":{"type":"MemberExpression","start":4609,"end":4634,"object":{"type":"Identifier","start":4609,"end":4620,"name":"grantConfig"},"property":{"type":"Identifier","start":4621,"end":4633,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4635,"end":4643,"name":"callback"},"computed":false},"right":{"type":"TemplateLiteral","start":4646,"end":4699,"expressions":[{"type":"MemberExpression","start":4649,"end":4660,"object":{"type":"Identifier","start":4649,"end":4655,"name":"server"},"property":{"type":"Identifier","start":4656,"end":4660,"name":"path"},"computed":false},{"type":"MemberExpression","start":4663,"end":4697,"object":{"type":"MemberExpression","start":4663,"end":4688,"object":{"type":"Identifier","start":4663,"end":4674,"name":"grantConfig"},"property":{"type":"Identifier","start":4675,"end":4687,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4689,"end":4697,"name":"callback"},"computed":false}],"quasis":[{"type":"TemplateElement","start":4647,"end":4647,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4661,"end":4661,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4698,"end":4698,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null}}]},"alternate":{"type":"IfStatement","start":4738,"end":4888,"test":{"type":"BinaryExpression","start":4742,"end":4763,"left":{"type":"Identifier","start":4742,"end":4754,"name":"authProvider"},"operator":"!==","right":{"type":"Literal","start":4759,"end":4763,"value":"s3","raw":"'s3'"}},"consequent":{"type":"BlockStatement","start":4765,"end":4888,"body":[{"type":"ExpressionStatement","start":4779,"end":4878,"expression":{"type":"CallExpression","start":4779,"end":4877,"callee":{"type":"MemberExpression","start":4779,"end":4790,"object":{"type":"Identifier","start":4779,"end":4785,"name":"logger"},"property":{"type":"Identifier","start":4786,"end":4790,"name":"warn"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":4791,"end":4851,"expressions":[{"type":"Identifier","start":4835,"end":4847,"name":"authProvider"}],"quasis":[{"type":"TemplateElement","start":4792,"end":4833,"value":{"raw":"skipping one found unsupported provider \"","cooked":"skipping one found unsupported provider \""},"tail":false},{"type":"TemplateElement","start":4848,"end":4850,"value":{"raw":"\".","cooked":"\"."},"tail":true}]},{"type":"Literal","start":4853,"end":4876,"value":"provider.options.skip","raw":"'provider.options.skip'"}]}}]},"alternate":null}}]}}]}}]}}}},{"type":"VariableDeclaration","start":5060,"end":5419,"declarations":[{"type":"VariableDeclarator","start":5066,"end":5418,"id":{"type":"Identifier","start":5066,"end":5084,"name":"authNameToProvider"},"init":{"type":"ArrowFunctionExpression","start":5087,"end":5418,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5088,"end":5100,"name":"authProvider"},{"type":"Identifier","start":5102,"end":5109,"name":"options"}],"body":{"type":"BlockStatement","start":5114,"end":5418,"body":[{"type":"VariableDeclaration","start":5120,"end":5175,"declarations":[{"type":"VariableDeclarator","start":5126,"end":5174,"id":{"type":"Identifier","start":5126,"end":5135,"name":"providers"},"init":{"type":"CallExpression","start":5138,"end":5174,"callee":{"type":"MemberExpression","start":5138,"end":5165,"object":{"type":"Identifier","start":5138,"end":5145,"name":"exports"},"property":{"type":"Identifier","start":5146,"end":5165,"name":"getDefaultProviders"},"computed":false},"arguments":[{"type":"Identifier","start":5166,"end":5173,"name":"options"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":5180,"end":5225,"declarations":[{"type":"VariableDeclarator","start":5186,"end":5224,"id":{"type":"Identifier","start":5186,"end":5199,"name":"providerNames"},"init":{"type":"CallExpression","start":5202,"end":5224,"callee":{"type":"MemberExpression","start":5202,"end":5213,"object":{"type":"Identifier","start":5202,"end":5208,"name":"Object"},"property":{"type":"Identifier","start":5209,"end":5213,"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":5214,"end":5223,"name":"providers"}]}}],"kind":"const"},{"type":"ForOfStatement","start":5230,"end":5416,"await":false,"left":{"type":"VariableDeclaration","start":5235,"end":5245,"declarations":[{"type":"VariableDeclarator","start":5241,"end":5245,"id":{"type":"Identifier","start":5241,"end":5245,"name":"name"},"init":null}],"kind":"const"},"right":{"type":"Identifier","start":5249,"end":5262,"name":"providerNames"},"body":{"type":"BlockStatement","start":5264,"end":5416,"body":[{"type":"VariableDeclaration","start":5274,"end":5307,"declarations":[{"type":"VariableDeclarator","start":5280,"end":5306,"id":{"type":"Identifier","start":5280,"end":5288,"name":"provider"},"init":{"type":"MemberExpression","start":5291,"end":5306,"object":{"type":"Identifier","start":5291,"end":5300,"name":"providers"},"property":{"type":"Identifier","start":5301,"end":5305,"name":"name"},"computed":true}}],"kind":"const"},{"type":"IfStatement","start":5316,"end":5410,"test":{"type":"BinaryExpression","start":5320,"end":5358,"left":{"type":"MemberExpression","start":5320,"end":5341,"object":{"type":"Identifier","start":5320,"end":5328,"name":"provider"},"property":{"type":"Identifier","start":5329,"end":5341,"name":"authProvider"},"computed":false},"operator":"===","right":{"type":"Identifier","start":5346,"end":5358,"name":"authProvider"}},"consequent":{"type":"BlockStatement","start":5360,"end":5410,"body":[{"type":"ReturnStatement","start":5374,"end":5400,"argument":{"type":"ObjectExpression","start":5381,"end":5399,"properties":[{"type":"Property","start":5383,"end":5387,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5383,"end":5387,"name":"name"},"kind":"init","value":{"type":"Identifier","start":5383,"end":5387,"name":"name"}},{"type":"Property","start":5389,"end":5397,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5389,"end":5397,"name":"provider"},"kind":"init","value":{"type":"Identifier","start":5389,"end":5397,"name":"provider"}}]}}]},"alternate":null}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":5468,"end":5565,"declarations":[{"type":"VariableDeclarator","start":5474,"end":5564,"id":{"type":"Identifier","start":5474,"end":5486,"name":"validOptions"},"init":{"type":"ArrowFunctionExpression","start":5489,"end":5564,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5490,"end":5497,"name":"options"}],"body":{"type":"BlockStatement","start":5502,"end":5564,"body":[{"type":"ReturnStatement","start":5508,"end":5562,"argument":{"type":"LogicalExpression","start":5515,"end":5561,"left":{"type":"MemberExpression","start":5515,"end":5534,"object":{"type":"MemberExpression","start":5515,"end":5529,"object":{"type":"Identifier","start":5515,"end":5522,"name":"options"},"property":{"type":"Identifier","start":5523,"end":5529,"name":"server"},"computed":false},"property":{"type":"Identifier","start":5530,"end":5534,"name":"host"},"computed":false},"operator":"&&","right":{"type":"MemberExpression","start":5538,"end":5561,"object":{"type":"MemberExpression","start":5538,"end":5552,"object":{"type":"Identifier","start":5538,"end":5545,"name":"options"},"property":{"type":"Identifier","start":5546,"end":5552,"name":"server"},"computed":false},"property":{"type":"Identifier","start":5553,"end":5561,"name":"protocol"},"computed":false}}}]}}}],"kind":"const"}],"sourceType":"script"}