{"type":"Program","start":0,"end":1569,"body":[{"type":"VariableDeclaration","start":0,"end":36,"declarations":[{"type":"VariableDeclarator","start":6,"end":35,"id":{"type":"Identifier","start":6,"end":9,"name":"jwt"},"init":{"type":"CallExpression","start":12,"end":35,"callee":{"type":"Identifier","start":12,"end":19,"name":"require"},"arguments":[{"type":"Literal","start":20,"end":34,"value":"jsonwebtoken","raw":"'jsonwebtoken'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":37,"end":85,"declarations":[{"type":"VariableDeclarator","start":43,"end":84,"id":{"type":"ObjectPattern","start":43,"end":63,"properties":[{"type":"Property","start":45,"end":52,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":45,"end":52,"name":"encrypt"},"kind":"init","value":{"type":"Identifier","start":45,"end":52,"name":"encrypt"}},{"type":"Property","start":54,"end":61,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":54,"end":61,"name":"decrypt"},"kind":"init","value":{"type":"Identifier","start":54,"end":61,"name":"decrypt"}}]},"init":{"type":"CallExpression","start":66,"end":84,"callee":{"type":"Identifier","start":66,"end":73,"name":"require"},"arguments":[{"type":"Literal","start":74,"end":83,"value":"./utils","raw":"'./utils'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":145,"end":295,"expression":{"type":"AssignmentExpression","start":145,"end":294,"operator":"=","left":{"type":"MemberExpression","start":145,"end":173,"object":{"type":"MemberExpression","start":145,"end":159,"object":{"type":"Identifier","start":145,"end":151,"name":"module"},"property":{"type":"Identifier","start":152,"end":159,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":160,"end":173,"name":"generateToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":176,"end":294,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":177,"end":184,"name":"payload"},{"type":"Identifier","start":186,"end":192,"name":"secret"}],"body":{"type":"BlockStatement","start":197,"end":294,"body":[{"type":"ReturnStatement","start":203,"end":292,"argument":{"type":"CallExpression","start":210,"end":291,"callee":{"type":"Identifier","start":210,"end":217,"name":"encrypt"},"arguments":[{"type":"CallExpression","start":218,"end":282,"callee":{"type":"MemberExpression","start":218,"end":226,"object":{"type":"Identifier","start":218,"end":221,"name":"jwt"},"property":{"type":"Identifier","start":222,"end":226,"name":"sign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":227,"end":244,"properties":[{"type":"Property","start":229,"end":242,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":229,"end":233,"name":"data"},"value":{"type":"Identifier","start":235,"end":242,"name":"payload"},"kind":"init"}]},{"type":"Identifier","start":246,"end":252,"name":"secret"},{"type":"ObjectExpression","start":254,"end":281,"properties":[{"type":"Property","start":256,"end":279,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":256,"end":265,"name":"expiresIn"},"value":{"type":"BinaryExpression","start":267,"end":279,"left":{"type":"BinaryExpression","start":267,"end":274,"left":{"type":"Literal","start":267,"end":269,"value":60,"raw":"60"},"operator":"*","right":{"type":"Literal","start":272,"end":274,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":277,"end":279,"value":24,"raw":"24"}},"kind":"init"}]}]},{"type":"Identifier","start":284,"end":290,"name":"secret"}]}}]}}}},{"type":"ExpressionStatement","start":358,"end":577,"expression":{"type":"AssignmentExpression","start":358,"end":576,"operator":"=","left":{"type":"MemberExpression","start":358,"end":384,"object":{"type":"MemberExpression","start":358,"end":372,"object":{"type":"Identifier","start":358,"end":364,"name":"module"},"property":{"type":"Identifier","start":365,"end":372,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":373,"end":384,"name":"verifyToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":387,"end":576,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":388,"end":393,"name":"token"},{"type":"Identifier","start":395,"end":401,"name":"secret"}],"body":{"type":"BlockStatement","start":406,"end":576,"body":[{"type":"TryStatement","start":412,"end":574,"block":{"type":"BlockStatement","start":416,"end":526,"body":[{"type":"ReturnStatement","start":448,"end":520,"argument":{"type":"ObjectExpression","start":455,"end":519,"properties":[{"type":"Property","start":457,"end":517,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":457,"end":464,"name":"payload"},"value":{"type":"MemberExpression","start":466,"end":517,"object":{"type":"CallExpression","start":466,"end":512,"callee":{"type":"MemberExpression","start":466,"end":476,"object":{"type":"Identifier","start":466,"end":469,"name":"jwt"},"property":{"type":"Identifier","start":470,"end":476,"name":"verify"},"computed":false},"arguments":[{"type":"CallExpression","start":477,"end":499,"callee":{"type":"Identifier","start":477,"end":484,"name":"decrypt"},"arguments":[{"type":"Identifier","start":485,"end":490,"name":"token"},{"type":"Identifier","start":492,"end":498,"name":"secret"}]},{"type":"Identifier","start":501,"end":507,"name":"secret"},{"type":"ObjectExpression","start":509,"end":511,"properties":[]}]},"property":{"type":"Identifier","start":513,"end":517,"name":"data"},"computed":false},"kind":"init"}]}}]},"handler":{"type":"CatchClause","start":531,"end":574,"param":{"type":"Identifier","start":538,"end":541,"name":"err"},"body":{"type":"BlockStatement","start":543,"end":574,"body":[{"type":"ReturnStatement","start":553,"end":568,"argument":{"type":"ObjectExpression","start":560,"end":567,"properties":[{"type":"Property","start":562,"end":565,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":562,"end":565,"name":"err"},"kind":"init","value":{"type":"Identifier","start":562,"end":565,"name":"err"}}]}}]}},"finalizer":null}]}}}},{"type":"ExpressionStatement","start":706,"end":1105,"expression":{"type":"AssignmentExpression","start":706,"end":1104,"operator":"=","left":{"type":"MemberExpression","start":706,"end":733,"object":{"type":"MemberExpression","start":706,"end":720,"object":{"type":"Identifier","start":706,"end":712,"name":"module"},"property":{"type":"Identifier","start":713,"end":720,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":721,"end":733,"name":"addToCookies"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":736,"end":1104,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":737,"end":740,"name":"res"},{"type":"Identifier","start":742,"end":747,"name":"token"},{"type":"Identifier","start":749,"end":765,"name":"companionOptions"},{"type":"Identifier","start":767,"end":779,"name":"providerName"}],"body":{"type":"BlockStatement","start":784,"end":1104,"body":[{"type":"VariableDeclaration","start":790,"end":885,"declarations":[{"type":"VariableDeclarator","start":796,"end":884,"id":{"type":"Identifier","start":796,"end":809,"name":"cookieOptions"},"init":{"type":"ObjectExpression","start":812,"end":884,"properties":[{"type":"Property","start":822,"end":854,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":822,"end":828,"name":"maxAge"},"value":{"type":"BinaryExpression","start":830,"end":854,"left":{"type":"BinaryExpression","start":830,"end":849,"left":{"type":"BinaryExpression","start":830,"end":844,"left":{"type":"BinaryExpression","start":830,"end":839,"left":{"type":"Literal","start":830,"end":834,"value":1000,"raw":"1000"},"operator":"*","right":{"type":"Literal","start":837,"end":839,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":842,"end":844,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":847,"end":849,"value":24,"raw":"24"}},"operator":"*","right":{"type":"Literal","start":852,"end":854,"value":30,"raw":"30"}},"kind":"init"},{"type":"Property","start":864,"end":878,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":864,"end":872,"name":"httpOnly"},"value":{"type":"Literal","start":874,"end":878,"value":true,"raw":"true"},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":890,"end":994,"test":{"type":"MemberExpression","start":894,"end":923,"object":{"type":"Identifier","start":894,"end":910,"name":"companionOptions"},"property":{"type":"Identifier","start":911,"end":923,"name":"cookieDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":925,"end":994,"body":[{"type":"ExpressionStatement","start":935,"end":988,"expression":{"type":"AssignmentExpression","start":935,"end":987,"operator":"=","left":{"type":"MemberExpression","start":935,"end":955,"object":{"type":"Identifier","start":935,"end":948,"name":"cookieOptions"},"property":{"type":"Identifier","start":949,"end":955,"name":"domain"},"computed":false},"right":{"type":"MemberExpression","start":958,"end":987,"object":{"type":"Identifier","start":958,"end":974,"name":"companionOptions"},"property":{"type":"Identifier","start":975,"end":987,"name":"cookieDomain"},"computed":false}}}]},"alternate":null},{"type":"ExpressionStatement","start":1035,"end":1102,"expression":{"type":"CallExpression","start":1035,"end":1101,"callee":{"type":"MemberExpression","start":1035,"end":1045,"object":{"type":"Identifier","start":1035,"end":1038,"name":"res"},"property":{"type":"Identifier","start":1039,"end":1045,"name":"cookie"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1046,"end":1078,"expressions":[{"type":"Identifier","start":1064,"end":1076,"name":"providerName"}],"quasis":[{"type":"TemplateElement","start":1047,"end":1062,"value":{"raw":"uppyAuthToken--","cooked":"uppyAuthToken--"},"tail":false},{"type":"TemplateElement","start":1077,"end":1077,"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","start":1080,"end":1085,"name":"token"},{"type":"Identifier","start":1087,"end":1100,"name":"cookieOptions"}]}}]}}}},{"type":"ExpressionStatement","start":1209,"end":1568,"expression":{"type":"AssignmentExpression","start":1209,"end":1567,"operator":"=","left":{"type":"MemberExpression","start":1209,"end":1241,"object":{"type":"MemberExpression","start":1209,"end":1223,"object":{"type":"Identifier","start":1209,"end":1215,"name":"module"},"property":{"type":"Identifier","start":1216,"end":1223,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":1224,"end":1241,"name":"removeFromCookies"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1244,"end":1567,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1245,"end":1248,"name":"res"},{"type":"Identifier","start":1250,"end":1266,"name":"companionOptions"},{"type":"Identifier","start":1268,"end":1280,"name":"providerName"}],"body":{"type":"BlockStatement","start":1285,"end":1567,"body":[{"type":"VariableDeclaration","start":1291,"end":1386,"declarations":[{"type":"VariableDeclarator","start":1297,"end":1385,"id":{"type":"Identifier","start":1297,"end":1310,"name":"cookieOptions"},"init":{"type":"ObjectExpression","start":1313,"end":1385,"properties":[{"type":"Property","start":1323,"end":1355,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1323,"end":1329,"name":"maxAge"},"value":{"type":"BinaryExpression","start":1331,"end":1355,"left":{"type":"BinaryExpression","start":1331,"end":1350,"left":{"type":"BinaryExpression","start":1331,"end":1345,"left":{"type":"BinaryExpression","start":1331,"end":1340,"left":{"type":"Literal","start":1331,"end":1335,"value":1000,"raw":"1000"},"operator":"*","right":{"type":"Literal","start":1338,"end":1340,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1343,"end":1345,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1348,"end":1350,"value":24,"raw":"24"}},"operator":"*","right":{"type":"Literal","start":1353,"end":1355,"value":30,"raw":"30"}},"kind":"init"},{"type":"Property","start":1365,"end":1379,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1365,"end":1373,"name":"httpOnly"},"value":{"type":"Literal","start":1375,"end":1379,"value":true,"raw":"true"},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":1391,"end":1495,"test":{"type":"MemberExpression","start":1395,"end":1424,"object":{"type":"Identifier","start":1395,"end":1411,"name":"companionOptions"},"property":{"type":"Identifier","start":1412,"end":1424,"name":"cookieDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":1426,"end":1495,"body":[{"type":"ExpressionStatement","start":1436,"end":1489,"expression":{"type":"AssignmentExpression","start":1436,"end":1488,"operator":"=","left":{"type":"MemberExpression","start":1436,"end":1456,"object":{"type":"Identifier","start":1436,"end":1449,"name":"cookieOptions"},"property":{"type":"Identifier","start":1450,"end":1456,"name":"domain"},"computed":false},"right":{"type":"MemberExpression","start":1459,"end":1488,"object":{"type":"Identifier","start":1459,"end":1475,"name":"companionOptions"},"property":{"type":"Identifier","start":1476,"end":1488,"name":"cookieDomain"},"computed":false}}}]},"alternate":null},{"type":"ExpressionStatement","start":1500,"end":1565,"expression":{"type":"CallExpression","start":1500,"end":1564,"callee":{"type":"MemberExpression","start":1500,"end":1515,"object":{"type":"Identifier","start":1500,"end":1503,"name":"res"},"property":{"type":"Identifier","start":1504,"end":1515,"name":"clearCookie"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1516,"end":1548,"expressions":[{"type":"Identifier","start":1534,"end":1546,"name":"providerName"}],"quasis":[{"type":"TemplateElement","start":1517,"end":1532,"value":{"raw":"uppyAuthToken--","cooked":"uppyAuthToken--"},"tail":false},{"type":"TemplateElement","start":1547,"end":1547,"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","start":1550,"end":1563,"name":"cookieOptions"}]}}]}}}}],"sourceType":"script"}