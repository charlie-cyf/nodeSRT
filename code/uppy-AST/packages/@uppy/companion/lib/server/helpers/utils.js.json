{"type":"Program","start":0,"end":5099,"body":[{"type":"VariableDeclaration","start":0,"end":35,"declarations":[{"type":"VariableDeclarator","start":6,"end":34,"id":{"type":"Identifier","start":6,"end":13,"name":"request"},"init":{"type":"CallExpression","start":16,"end":34,"callee":{"type":"Identifier","start":16,"end":23,"name":"require"},"arguments":[{"type":"Literal","start":24,"end":33,"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":36,"end":69,"declarations":[{"type":"VariableDeclarator","start":42,"end":68,"id":{"type":"Identifier","start":42,"end":51,"name":"urlParser"},"init":{"type":"CallExpression","start":54,"end":68,"callee":{"type":"Identifier","start":54,"end":61,"name":"require"},"arguments":[{"type":"Literal","start":62,"end":67,"value":"url","raw":"'url'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":70,"end":103,"declarations":[{"type":"VariableDeclarator","start":76,"end":102,"id":{"type":"Identifier","start":76,"end":82,"name":"crypto"},"init":{"type":"CallExpression","start":85,"end":102,"callee":{"type":"Identifier","start":85,"end":92,"name":"require"},"arguments":[{"type":"Literal","start":93,"end":101,"value":"crypto","raw":"'crypto'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":104,"end":159,"declarations":[{"type":"VariableDeclarator","start":110,"end":158,"id":{"type":"ObjectPattern","start":110,"end":135,"properties":[{"type":"Property","start":112,"end":133,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":112,"end":133,"name":"getProtectedHttpAgent"},"kind":"init","value":{"type":"Identifier","start":112,"end":133,"name":"getProtectedHttpAgent"}}]},"init":{"type":"CallExpression","start":138,"end":158,"callee":{"type":"Identifier","start":138,"end":145,"name":"require"},"arguments":[{"type":"Literal","start":146,"end":157,"value":"./request","raw":"'./request'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":248,"end":393,"expression":{"type":"AssignmentExpression","start":248,"end":392,"operator":"=","left":{"type":"MemberExpression","start":248,"end":264,"object":{"type":"Identifier","start":248,"end":255,"name":"exports"},"property":{"type":"Identifier","start":256,"end":264,"name":"hasMatch"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":267,"end":392,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":268,"end":273,"name":"value"},{"type":"Identifier","start":275,"end":283,"name":"criteria"}],"body":{"type":"BlockStatement","start":288,"end":392,"body":[{"type":"ReturnStatement","start":294,"end":390,"argument":{"type":"CallExpression","start":301,"end":389,"callee":{"type":"MemberExpression","start":301,"end":314,"object":{"type":"Identifier","start":301,"end":309,"name":"criteria"},"property":{"type":"Identifier","start":310,"end":314,"name":"some"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":315,"end":388,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":316,"end":317,"name":"i"}],"body":{"type":"BlockStatement","start":322,"end":388,"body":[{"type":"ReturnStatement","start":332,"end":382,"argument":{"type":"LogicalExpression","start":339,"end":381,"left":{"type":"BinaryExpression","start":339,"end":350,"left":{"type":"Identifier","start":339,"end":344,"name":"value"},"operator":"===","right":{"type":"Identifier","start":349,"end":350,"name":"i"}},"operator":"||","right":{"type":"CallExpression","start":354,"end":381,"callee":{"type":"MemberExpression","start":354,"end":374,"object":{"type":"NewExpression","start":355,"end":368,"callee":{"type":"Identifier","start":359,"end":365,"name":"RegExp"},"arguments":[{"type":"Identifier","start":366,"end":367,"name":"i"}]},"property":{"type":"Identifier","start":370,"end":374,"name":"test"},"computed":false},"arguments":[{"type":"Identifier","start":375,"end":380,"name":"value"}]}}}]}}]}}]}}}},{"type":"ExpressionStatement","start":450,"end":832,"expression":{"type":"AssignmentExpression","start":450,"end":831,"operator":"=","left":{"type":"MemberExpression","start":450,"end":471,"object":{"type":"Identifier","start":450,"end":457,"name":"exports"},"property":{"type":"Identifier","start":458,"end":471,"name":"jsonStringify"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":474,"end":831,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":475,"end":479,"name":"data"}],"body":{"type":"BlockStatement","start":484,"end":831,"body":[{"type":"VariableDeclaration","start":490,"end":507,"declarations":[{"type":"VariableDeclarator","start":496,"end":506,"id":{"type":"Identifier","start":496,"end":501,"name":"cache"},"init":{"type":"ArrayExpression","start":504,"end":506,"elements":[]}}],"kind":"const"},{"type":"ReturnStatement","start":512,"end":829,"argument":{"type":"CallExpression","start":519,"end":828,"callee":{"type":"MemberExpression","start":519,"end":533,"object":{"type":"Identifier","start":519,"end":523,"name":"JSON"},"property":{"type":"Identifier","start":524,"end":533,"name":"stringify"},"computed":false},"arguments":[{"type":"Identifier","start":534,"end":538,"name":"data"},{"type":"ArrowFunctionExpression","start":540,"end":827,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":541,"end":544,"name":"key"},{"type":"Identifier","start":546,"end":551,"name":"value"}],"body":{"type":"BlockStatement","start":556,"end":827,"body":[{"type":"IfStatement","start":566,"end":799,"test":{"type":"LogicalExpression","start":570,"end":613,"left":{"type":"BinaryExpression","start":570,"end":595,"left":{"type":"UnaryExpression","start":570,"end":582,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":577,"end":582,"name":"value"}},"operator":"===","right":{"type":"Literal","start":587,"end":595,"value":"object","raw":"'object'"}},"operator":"&&","right":{"type":"BinaryExpression","start":599,"end":613,"left":{"type":"Identifier","start":599,"end":604,"name":"value"},"operator":"!==","right":{"type":"Literal","start":609,"end":613,"value":null,"raw":"null"}}},"consequent":{"type":"BlockStatement","start":615,"end":799,"body":[{"type":"IfStatement","start":629,"end":758,"test":{"type":"BinaryExpression","start":633,"end":660,"left":{"type":"CallExpression","start":633,"end":653,"callee":{"type":"MemberExpression","start":633,"end":646,"object":{"type":"Identifier","start":633,"end":638,"name":"cache"},"property":{"type":"Identifier","start":639,"end":646,"name":"indexOf"},"computed":false},"arguments":[{"type":"Identifier","start":647,"end":652,"name":"value"}]},"operator":"!==","right":{"type":"UnaryExpression","start":658,"end":660,"operator":"-","prefix":true,"argument":{"type":"Literal","start":659,"end":660,"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":662,"end":758,"body":[{"type":"ReturnStatement","start":737,"end":744,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":771,"end":789,"expression":{"type":"CallExpression","start":771,"end":788,"callee":{"type":"MemberExpression","start":771,"end":781,"object":{"type":"Identifier","start":771,"end":776,"name":"cache"},"property":{"type":"Identifier","start":777,"end":781,"name":"push"},"computed":false},"arguments":[{"type":"Identifier","start":782,"end":787,"name":"value"}]}}]},"alternate":null},{"type":"ReturnStatement","start":808,"end":821,"argument":{"type":"Identifier","start":815,"end":820,"name":"value"}}]}}]}}]}}}},{"type":"ExpressionStatement","start":923,"end":1022,"expression":{"type":"AssignmentExpression","start":923,"end":1021,"operator":"=","left":{"type":"MemberExpression","start":923,"end":943,"object":{"type":"Identifier","start":923,"end":930,"name":"exports"},"property":{"type":"Identifier","start":931,"end":943,"name":"sanitizeHtml"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":946,"end":1021,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":947,"end":951,"name":"text"}],"body":{"type":"BlockStatement","start":956,"end":1021,"body":[{"type":"ReturnStatement","start":962,"end":1019,"argument":{"type":"ConditionalExpression","start":969,"end":1018,"test":{"type":"Identifier","start":969,"end":973,"name":"text"},"consequent":{"type":"CallExpression","start":976,"end":1011,"callee":{"type":"MemberExpression","start":976,"end":988,"object":{"type":"Identifier","start":976,"end":980,"name":"text"},"property":{"type":"Identifier","start":981,"end":988,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":989,"end":1006,"value":{},"raw":"/<\\/?[^>]+(>|$)/g","regex":{"pattern":"<\\/?[^>]+(>|$)","flags":"g"}},{"type":"Literal","start":1008,"end":1010,"value":"","raw":"''"}]},"alternate":{"type":"Identifier","start":1014,"end":1018,"name":"text"}}}]}}}},{"type":"ExpressionStatement","start":1188,"end":1326,"expression":{"type":"AssignmentExpression","start":1188,"end":1325,"operator":"=","left":{"type":"MemberExpression","start":1188,"end":1204,"object":{"type":"Identifier","start":1188,"end":1195,"name":"exports"},"property":{"type":"Identifier","start":1196,"end":1204,"name":"parseURL"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1207,"end":1325,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1208,"end":1211,"name":"url"}],"body":{"type":"BlockStatement","start":1216,"end":1325,"body":[{"type":"ReturnStatement","start":1254,"end":1323,"argument":{"type":"ConditionalExpression","start":1261,"end":1322,"test":{"type":"MemberExpression","start":1261,"end":1274,"object":{"type":"Identifier","start":1261,"end":1270,"name":"urlParser"},"property":{"type":"Identifier","start":1271,"end":1274,"name":"URL"},"computed":false},"consequent":{"type":"NewExpression","start":1277,"end":1299,"callee":{"type":"MemberExpression","start":1281,"end":1294,"object":{"type":"Identifier","start":1281,"end":1290,"name":"urlParser"},"property":{"type":"Identifier","start":1291,"end":1294,"name":"URL"},"computed":false},"arguments":[{"type":"Identifier","start":1295,"end":1298,"name":"url"}]},"alternate":{"type":"CallExpression","start":1302,"end":1322,"callee":{"type":"MemberExpression","start":1302,"end":1317,"object":{"type":"Identifier","start":1302,"end":1311,"name":"urlParser"},"property":{"type":"Identifier","start":1312,"end":1317,"name":"parse"},"computed":false},"arguments":[{"type":"Identifier","start":1318,"end":1321,"name":"url"}]}}}]}}}},{"type":"ExpressionStatement","start":1470,"end":2133,"expression":{"type":"AssignmentExpression","start":1470,"end":2132,"operator":"=","left":{"type":"MemberExpression","start":1470,"end":1488,"object":{"type":"Identifier","start":1470,"end":1477,"name":"exports"},"property":{"type":"Identifier","start":1478,"end":1488,"name":"getURLMeta"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1491,"end":2132,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1492,"end":1495,"name":"url"},{"type":"AssignmentPattern","start":1497,"end":1518,"left":{"type":"Identifier","start":1497,"end":1510,"name":"blockLocalIPs"},"right":{"type":"Literal","start":1513,"end":1518,"value":false,"raw":"false"}}],"body":{"type":"BlockStatement","start":1523,"end":2132,"body":[{"type":"ReturnStatement","start":1529,"end":2130,"argument":{"type":"NewExpression","start":1536,"end":2129,"callee":{"type":"Identifier","start":1540,"end":1547,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":1548,"end":2128,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1549,"end":1556,"name":"resolve"},{"type":"Identifier","start":1558,"end":1564,"name":"reject"}],"body":{"type":"BlockStatement","start":1569,"end":2128,"body":[{"type":"VariableDeclaration","start":1579,"end":1785,"declarations":[{"type":"VariableDeclarator","start":1585,"end":1784,"id":{"type":"Identifier","start":1585,"end":1589,"name":"opts"},"init":{"type":"ObjectExpression","start":1592,"end":1784,"properties":[{"type":"Property","start":1606,"end":1614,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1606,"end":1609,"name":"uri"},"value":{"type":"Identifier","start":1611,"end":1614,"name":"url"},"kind":"init"},{"type":"Property","start":1628,"end":1642,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1628,"end":1634,"name":"method"},"value":{"type":"Literal","start":1636,"end":1642,"value":"HEAD","raw":"'HEAD'"},"kind":"init"},{"type":"Property","start":1656,"end":1680,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1656,"end":1674,"name":"followAllRedirects"},"value":{"type":"Literal","start":1676,"end":1680,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":1694,"end":1774,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1694,"end":1704,"name":"agentClass"},"value":{"type":"CallExpression","start":1706,"end":1774,"callee":{"type":"Identifier","start":1706,"end":1727,"name":"getProtectedHttpAgent"},"arguments":[{"type":"MemberExpression","start":1728,"end":1758,"object":{"type":"CallExpression","start":1728,"end":1749,"callee":{"type":"MemberExpression","start":1728,"end":1744,"object":{"type":"Identifier","start":1728,"end":1735,"name":"exports"},"property":{"type":"Identifier","start":1736,"end":1744,"name":"parseURL"},"computed":false},"arguments":[{"type":"Identifier","start":1745,"end":1748,"name":"url"}]},"property":{"type":"Identifier","start":1750,"end":1758,"name":"protocol"},"computed":false},{"type":"Identifier","start":1760,"end":1773,"name":"blockLocalIPs"}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1794,"end":2122,"expression":{"type":"CallExpression","start":1794,"end":2121,"callee":{"type":"Identifier","start":1794,"end":1801,"name":"request"},"arguments":[{"type":"Identifier","start":1802,"end":1806,"name":"opts"},{"type":"ArrowFunctionExpression","start":1808,"end":2120,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1809,"end":1812,"name":"err"},{"type":"Identifier","start":1814,"end":1822,"name":"response"},{"type":"Identifier","start":1824,"end":1828,"name":"body"}],"body":{"type":"BlockStatement","start":1833,"end":2120,"body":[{"type":"IfStatement","start":1847,"end":2110,"test":{"type":"Identifier","start":1851,"end":1854,"name":"err"},"consequent":{"type":"BlockStatement","start":1856,"end":1900,"body":[{"type":"ExpressionStatement","start":1874,"end":1886,"expression":{"type":"CallExpression","start":1874,"end":1885,"callee":{"type":"Identifier","start":1874,"end":1880,"name":"reject"},"arguments":[{"type":"Identifier","start":1881,"end":1884,"name":"err"}]}}]},"alternate":{"type":"BlockStatement","start":1918,"end":2110,"body":[{"type":"ExpressionStatement","start":1936,"end":2096,"expression":{"type":"CallExpression","start":1936,"end":2095,"callee":{"type":"Identifier","start":1936,"end":1943,"name":"resolve"},"arguments":[{"type":"ObjectExpression","start":1944,"end":2094,"properties":[{"type":"Property","start":1966,"end":2004,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1966,"end":1970,"name":"type"},"value":{"type":"MemberExpression","start":1972,"end":2004,"object":{"type":"MemberExpression","start":1972,"end":1988,"object":{"type":"Identifier","start":1972,"end":1980,"name":"response"},"property":{"type":"Identifier","start":1981,"end":1988,"name":"headers"},"computed":false},"property":{"type":"Literal","start":1989,"end":2003,"value":"content-type","raw":"'content-type'"},"computed":true},"kind":"init"},{"type":"Property","start":2026,"end":2076,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2026,"end":2030,"name":"size"},"value":{"type":"CallExpression","start":2032,"end":2076,"callee":{"type":"Identifier","start":2032,"end":2040,"name":"parseInt"},"arguments":[{"type":"MemberExpression","start":2041,"end":2075,"object":{"type":"MemberExpression","start":2041,"end":2057,"object":{"type":"Identifier","start":2041,"end":2049,"name":"response"},"property":{"type":"Identifier","start":2050,"end":2057,"name":"headers"},"computed":false},"property":{"type":"Literal","start":2058,"end":2074,"value":"content-length","raw":"'content-length'"},"computed":true}]},"kind":"init"}]}]}}]}}]}}]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":2260,"end":3028,"expression":{"type":"AssignmentExpression","start":2260,"end":3027,"operator":"=","left":{"type":"MemberExpression","start":2260,"end":2288,"object":{"type":"MemberExpression","start":2260,"end":2274,"object":{"type":"Identifier","start":2260,"end":2266,"name":"module"},"property":{"type":"Identifier","start":2267,"end":2274,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2275,"end":2288,"name":"getURLBuilder"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2291,"end":3027,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2292,"end":2299,"name":"options"}],"body":{"type":"BlockStatement","start":2304,"end":3027,"body":[{"type":"VariableDeclaration","start":2585,"end":3004,"declarations":[{"type":"VariableDeclarator","start":2591,"end":3003,"id":{"type":"Identifier","start":2591,"end":2599,"name":"buildURL"},"init":{"type":"ArrowFunctionExpression","start":2602,"end":3003,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2603,"end":2607,"name":"path"},{"type":"Identifier","start":2609,"end":2619,"name":"isExternal"},{"type":"Identifier","start":2621,"end":2632,"name":"excludeHost"}],"body":{"type":"BlockStatement","start":2637,"end":3003,"body":[{"type":"VariableDeclaration","start":2647,"end":2662,"declarations":[{"type":"VariableDeclarator","start":2651,"end":2661,"id":{"type":"Identifier","start":2651,"end":2654,"name":"url"},"init":{"type":"Identifier","start":2657,"end":2661,"name":"path"}}],"kind":"let"},{"type":"IfStatement","start":2717,"end":2808,"test":{"type":"Identifier","start":2721,"end":2731,"name":"isExternal"},"consequent":{"type":"BlockStatement","start":2733,"end":2808,"body":[{"type":"ExpressionStatement","start":2747,"end":2798,"expression":{"type":"AssignmentExpression","start":2747,"end":2797,"operator":"=","left":{"type":"Identifier","start":2747,"end":2750,"name":"url"},"right":{"type":"TemplateLiteral","start":2753,"end":2797,"expressions":[{"type":"LogicalExpression","start":2756,"end":2789,"left":{"type":"MemberExpression","start":2756,"end":2783,"object":{"type":"MemberExpression","start":2756,"end":2770,"object":{"type":"Identifier","start":2756,"end":2763,"name":"options"},"property":{"type":"Identifier","start":2764,"end":2770,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2771,"end":2783,"name":"implicitPath"},"computed":false},"operator":"||","right":{"type":"Literal","start":2787,"end":2789,"value":"","raw":"''"}},{"type":"Identifier","start":2792,"end":2795,"name":"url"}],"quasis":[{"type":"TemplateElement","start":2754,"end":2754,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2790,"end":2790,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2796,"end":2796,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"ExpressionStatement","start":2817,"end":2860,"expression":{"type":"AssignmentExpression","start":2817,"end":2859,"operator":"=","left":{"type":"Identifier","start":2817,"end":2820,"name":"url"},"right":{"type":"TemplateLiteral","start":2823,"end":2859,"expressions":[{"type":"LogicalExpression","start":2826,"end":2851,"left":{"type":"MemberExpression","start":2826,"end":2845,"object":{"type":"MemberExpression","start":2826,"end":2840,"object":{"type":"Identifier","start":2826,"end":2833,"name":"options"},"property":{"type":"Identifier","start":2834,"end":2840,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2841,"end":2845,"name":"path"},"computed":false},"operator":"||","right":{"type":"Literal","start":2849,"end":2851,"value":"","raw":"''"}},{"type":"Identifier","start":2854,"end":2857,"name":"url"}],"quasis":[{"type":"TemplateElement","start":2824,"end":2824,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2852,"end":2852,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2858,"end":2858,"value":{"raw":"","cooked":""},"tail":true}]}}},{"type":"IfStatement","start":2869,"end":2977,"test":{"type":"UnaryExpression","start":2873,"end":2885,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2874,"end":2885,"name":"excludeHost"}},"consequent":{"type":"BlockStatement","start":2887,"end":2977,"body":[{"type":"ExpressionStatement","start":2901,"end":2967,"expression":{"type":"AssignmentExpression","start":2901,"end":2966,"operator":"=","left":{"type":"Identifier","start":2901,"end":2904,"name":"url"},"right":{"type":"TemplateLiteral","start":2907,"end":2966,"expressions":[{"type":"MemberExpression","start":2910,"end":2933,"object":{"type":"MemberExpression","start":2910,"end":2924,"object":{"type":"Identifier","start":2910,"end":2917,"name":"options"},"property":{"type":"Identifier","start":2918,"end":2924,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2925,"end":2933,"name":"protocol"},"computed":false},{"type":"MemberExpression","start":2939,"end":2958,"object":{"type":"MemberExpression","start":2939,"end":2953,"object":{"type":"Identifier","start":2939,"end":2946,"name":"options"},"property":{"type":"Identifier","start":2947,"end":2953,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2954,"end":2958,"name":"host"},"computed":false},{"type":"Identifier","start":2961,"end":2964,"name":"url"}],"quasis":[{"type":"TemplateElement","start":2908,"end":2908,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2934,"end":2937,"value":{"raw":"://","cooked":"://"},"tail":false},{"type":"TemplateElement","start":2959,"end":2959,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2965,"end":2965,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"ReturnStatement","start":2986,"end":2997,"argument":{"type":"Identifier","start":2993,"end":2996,"name":"url"}}]}}}],"kind":"const"},{"type":"ReturnStatement","start":3009,"end":3025,"argument":{"type":"Identifier","start":3016,"end":3024,"name":"buildURL"}}]}}}},{"type":"FunctionDeclaration","start":3200,"end":3330,"id":{"type":"Identifier","start":3209,"end":3221,"name":"createSecret"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3222,"end":3228,"name":"secret"}],"body":{"type":"BlockStatement","start":3230,"end":3330,"body":[{"type":"VariableDeclaration","start":3236,"end":3277,"declarations":[{"type":"VariableDeclarator","start":3242,"end":3276,"id":{"type":"Identifier","start":3242,"end":3246,"name":"hash"},"init":{"type":"CallExpression","start":3249,"end":3276,"callee":{"type":"MemberExpression","start":3249,"end":3266,"object":{"type":"Identifier","start":3249,"end":3255,"name":"crypto"},"property":{"type":"Identifier","start":3256,"end":3266,"name":"createHash"},"computed":false},"arguments":[{"type":"Literal","start":3267,"end":3275,"value":"sha256","raw":"'sha256'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3282,"end":3302,"expression":{"type":"CallExpression","start":3282,"end":3301,"callee":{"type":"MemberExpression","start":3282,"end":3293,"object":{"type":"Identifier","start":3282,"end":3286,"name":"hash"},"property":{"type":"Identifier","start":3287,"end":3293,"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":3294,"end":3300,"name":"secret"}]}},{"type":"ReturnStatement","start":3307,"end":3328,"argument":{"type":"CallExpression","start":3314,"end":3327,"callee":{"type":"MemberExpression","start":3314,"end":3325,"object":{"type":"Identifier","start":3314,"end":3318,"name":"hash"},"property":{"type":"Identifier","start":3319,"end":3325,"name":"digest"},"computed":false},"arguments":[]}}]}},{"type":"FunctionDeclaration","start":3409,"end":3467,"id":{"type":"Identifier","start":3418,"end":3426,"name":"createIv"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3429,"end":3467,"body":[{"type":"ReturnStatement","start":3435,"end":3465,"argument":{"type":"CallExpression","start":3442,"end":3464,"callee":{"type":"MemberExpression","start":3442,"end":3460,"object":{"type":"Identifier","start":3442,"end":3448,"name":"crypto"},"property":{"type":"Identifier","start":3449,"end":3460,"name":"randomBytes"},"computed":false},"arguments":[{"type":"Literal","start":3461,"end":3463,"value":16,"raw":"16"}]}}]}},{"type":"FunctionDeclaration","start":3468,"end":3582,"id":{"type":"Identifier","start":3477,"end":3486,"name":"urlEncode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3487,"end":3496,"name":"unencoded"}],"body":{"type":"BlockStatement","start":3498,"end":3582,"body":[{"type":"ReturnStatement","start":3504,"end":3580,"argument":{"type":"CallExpression","start":3511,"end":3579,"callee":{"type":"MemberExpression","start":3511,"end":3568,"object":{"type":"CallExpression","start":3511,"end":3560,"callee":{"type":"MemberExpression","start":3511,"end":3548,"object":{"type":"CallExpression","start":3511,"end":3540,"callee":{"type":"MemberExpression","start":3511,"end":3528,"object":{"type":"Identifier","start":3511,"end":3520,"name":"unencoded"},"property":{"type":"Identifier","start":3521,"end":3528,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3529,"end":3534,"value":{},"raw":"/\\+/g","regex":{"pattern":"\\+","flags":"g"}},{"type":"Literal","start":3536,"end":3539,"value":"-","raw":"'-'"}]},"property":{"type":"Identifier","start":3541,"end":3548,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3549,"end":3554,"value":{},"raw":"/\\//g","regex":{"pattern":"\\/","flags":"g"}},{"type":"Literal","start":3556,"end":3559,"value":"_","raw":"'_'"}]},"property":{"type":"Identifier","start":3561,"end":3568,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3569,"end":3573,"value":{},"raw":"/=/g","regex":{"pattern":"=","flags":"g"}},{"type":"Literal","start":3575,"end":3578,"value":"~","raw":"'~'"}]}}]}},{"type":"FunctionDeclaration","start":3583,"end":3714,"id":{"type":"Identifier","start":3592,"end":3601,"name":"urlDecode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3602,"end":3609,"name":"encoded"}],"body":{"type":"BlockStatement","start":3611,"end":3714,"body":[{"type":"ExpressionStatement","start":3617,"end":3692,"expression":{"type":"AssignmentExpression","start":3617,"end":3691,"operator":"=","left":{"type":"Identifier","start":3617,"end":3624,"name":"encoded"},"right":{"type":"CallExpression","start":3627,"end":3691,"callee":{"type":"MemberExpression","start":3627,"end":3680,"object":{"type":"CallExpression","start":3627,"end":3672,"callee":{"type":"MemberExpression","start":3627,"end":3661,"object":{"type":"CallExpression","start":3627,"end":3653,"callee":{"type":"MemberExpression","start":3627,"end":3642,"object":{"type":"Identifier","start":3627,"end":3634,"name":"encoded"},"property":{"type":"Identifier","start":3635,"end":3642,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3643,"end":3647,"value":{},"raw":"/-/g","regex":{"pattern":"-","flags":"g"}},{"type":"Literal","start":3649,"end":3652,"value":"+","raw":"'+'"}]},"property":{"type":"Identifier","start":3654,"end":3661,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3662,"end":3666,"value":{},"raw":"/_/g","regex":{"pattern":"_","flags":"g"}},{"type":"Literal","start":3668,"end":3671,"value":"/","raw":"'/'"}]},"property":{"type":"Identifier","start":3673,"end":3680,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3681,"end":3685,"value":{},"raw":"/~/g","regex":{"pattern":"~","flags":"g"}},{"type":"Literal","start":3687,"end":3690,"value":"=","raw":"'='"}]}}},{"type":"ReturnStatement","start":3697,"end":3712,"argument":{"type":"Identifier","start":3704,"end":3711,"name":"encoded"}}]}},{"type":"ExpressionStatement","start":3942,"end":4306,"expression":{"type":"AssignmentExpression","start":3942,"end":4305,"operator":"=","left":{"type":"MemberExpression","start":3942,"end":3964,"object":{"type":"MemberExpression","start":3942,"end":3956,"object":{"type":"Identifier","start":3942,"end":3948,"name":"module"},"property":{"type":"Identifier","start":3949,"end":3956,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":3957,"end":3964,"name":"encrypt"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":3967,"end":4305,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3968,"end":3973,"name":"input"},{"type":"Identifier","start":3975,"end":3981,"name":"secret"}],"body":{"type":"BlockStatement","start":3986,"end":4305,"body":[{"type":"VariableDeclaration","start":3992,"end":4014,"declarations":[{"type":"VariableDeclarator","start":3998,"end":4013,"id":{"type":"Identifier","start":3998,"end":4000,"name":"iv"},"init":{"type":"CallExpression","start":4003,"end":4013,"callee":{"type":"Identifier","start":4003,"end":4011,"name":"createIv"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":4019,"end":4092,"declarations":[{"type":"VariableDeclarator","start":4025,"end":4091,"id":{"type":"Identifier","start":4025,"end":4031,"name":"cipher"},"init":{"type":"CallExpression","start":4034,"end":4091,"callee":{"type":"MemberExpression","start":4034,"end":4055,"object":{"type":"Identifier","start":4034,"end":4040,"name":"crypto"},"property":{"type":"Identifier","start":4041,"end":4055,"name":"createCipheriv"},"computed":false},"arguments":[{"type":"Literal","start":4056,"end":4064,"value":"aes256","raw":"'aes256'"},{"type":"CallExpression","start":4066,"end":4086,"callee":{"type":"Identifier","start":4066,"end":4078,"name":"createSecret"},"arguments":[{"type":"Identifier","start":4079,"end":4085,"name":"secret"}]},{"type":"Identifier","start":4088,"end":4090,"name":"iv"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4097,"end":4152,"declarations":[{"type":"VariableDeclarator","start":4101,"end":4151,"id":{"type":"Identifier","start":4101,"end":4110,"name":"encrypted"},"init":{"type":"CallExpression","start":4113,"end":4151,"callee":{"type":"MemberExpression","start":4113,"end":4126,"object":{"type":"Identifier","start":4113,"end":4119,"name":"cipher"},"property":{"type":"Identifier","start":4120,"end":4126,"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":4127,"end":4132,"name":"input"},{"type":"Literal","start":4134,"end":4140,"value":"utf8","raw":"'utf8'"},{"type":"Literal","start":4142,"end":4150,"value":"base64","raw":"'base64'"}]}}],"kind":"let"},{"type":"ExpressionStatement","start":4157,"end":4193,"expression":{"type":"AssignmentExpression","start":4157,"end":4192,"operator":"+=","left":{"type":"Identifier","start":4157,"end":4166,"name":"encrypted"},"right":{"type":"CallExpression","start":4170,"end":4192,"callee":{"type":"MemberExpression","start":4170,"end":4182,"object":{"type":"Identifier","start":4170,"end":4176,"name":"cipher"},"property":{"type":"Identifier","start":4177,"end":4182,"name":"final"},"computed":false},"arguments":[{"type":"Literal","start":4183,"end":4191,"value":"base64","raw":"'base64'"}]}}},{"type":"ReturnStatement","start":4254,"end":4303,"argument":{"type":"BinaryExpression","start":4261,"end":4302,"left":{"type":"CallExpression","start":4261,"end":4279,"callee":{"type":"MemberExpression","start":4261,"end":4272,"object":{"type":"Identifier","start":4261,"end":4263,"name":"iv"},"property":{"type":"Identifier","start":4264,"end":4272,"name":"toString"},"computed":false},"arguments":[{"type":"Literal","start":4273,"end":4278,"value":"hex","raw":"'hex'"}]},"operator":"+","right":{"type":"CallExpression","start":4282,"end":4302,"callee":{"type":"Identifier","start":4282,"end":4291,"name":"urlEncode"},"arguments":[{"type":"Identifier","start":4292,"end":4301,"name":"encrypted"}]}}}]}}}},{"type":"ExpressionStatement","start":4515,"end":5098,"expression":{"type":"AssignmentExpression","start":4515,"end":5097,"operator":"=","left":{"type":"MemberExpression","start":4515,"end":4537,"object":{"type":"MemberExpression","start":4515,"end":4529,"object":{"type":"Identifier","start":4515,"end":4521,"name":"module"},"property":{"type":"Identifier","start":4522,"end":4529,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":4530,"end":4537,"name":"decrypt"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":4540,"end":5097,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4541,"end":4550,"name":"encrypted"},{"type":"Identifier","start":4552,"end":4558,"name":"secret"}],"body":{"type":"BlockStatement","start":4563,"end":5097,"body":[{"type":"IfStatement","start":4610,"end":4751,"test":{"type":"BinaryExpression","start":4614,"end":4635,"left":{"type":"MemberExpression","start":4614,"end":4630,"object":{"type":"Identifier","start":4614,"end":4623,"name":"encrypted"},"property":{"type":"Identifier","start":4624,"end":4630,"name":"length"},"computed":false},"operator":"<","right":{"type":"Literal","start":4633,"end":4635,"value":32,"raw":"32"}},"consequent":{"type":"BlockStatement","start":4637,"end":4751,"body":[{"type":"ThrowStatement","start":4647,"end":4745,"argument":{"type":"NewExpression","start":4653,"end":4744,"callee":{"type":"Identifier","start":4657,"end":4662,"name":"Error"},"arguments":[{"type":"Literal","start":4663,"end":4743,"value":"Invalid encrypted value. Maybe it was generated with an old Companion version?","raw":"'Invalid encrypted value. Maybe it was generated with an old Companion version?'"}]}}]},"alternate":null},{"type":"VariableDeclaration","start":4756,"end":4810,"declarations":[{"type":"VariableDeclarator","start":4762,"end":4809,"id":{"type":"Identifier","start":4762,"end":4764,"name":"iv"},"init":{"type":"CallExpression","start":4767,"end":4809,"callee":{"type":"MemberExpression","start":4767,"end":4778,"object":{"type":"Identifier","start":4767,"end":4773,"name":"Buffer"},"property":{"type":"Identifier","start":4774,"end":4778,"name":"from"},"computed":false},"arguments":[{"type":"CallExpression","start":4779,"end":4801,"callee":{"type":"MemberExpression","start":4779,"end":4794,"object":{"type":"Identifier","start":4779,"end":4788,"name":"encrypted"},"property":{"type":"Identifier","start":4789,"end":4794,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":4795,"end":4796,"value":0,"raw":"0"},{"type":"Literal","start":4798,"end":4800,"value":32,"raw":"32"}]},{"type":"Literal","start":4803,"end":4808,"value":"hex","raw":"'hex'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4815,"end":4863,"declarations":[{"type":"VariableDeclarator","start":4821,"end":4862,"id":{"type":"Identifier","start":4821,"end":4840,"name":"encryptionWithoutIv"},"init":{"type":"CallExpression","start":4843,"end":4862,"callee":{"type":"MemberExpression","start":4843,"end":4858,"object":{"type":"Identifier","start":4843,"end":4852,"name":"encrypted"},"property":{"type":"Identifier","start":4853,"end":4858,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":4859,"end":4861,"value":32,"raw":"32"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4868,"end":4945,"declarations":[{"type":"VariableDeclarator","start":4874,"end":4944,"id":{"type":"Identifier","start":4874,"end":4882,"name":"decipher"},"init":{"type":"CallExpression","start":4885,"end":4944,"callee":{"type":"MemberExpression","start":4885,"end":4908,"object":{"type":"Identifier","start":4885,"end":4891,"name":"crypto"},"property":{"type":"Identifier","start":4892,"end":4908,"name":"createDecipheriv"},"computed":false},"arguments":[{"type":"Literal","start":4909,"end":4917,"value":"aes256","raw":"'aes256'"},{"type":"CallExpression","start":4919,"end":4939,"callee":{"type":"Identifier","start":4919,"end":4931,"name":"createSecret"},"arguments":[{"type":"Identifier","start":4932,"end":4938,"name":"secret"}]},{"type":"Identifier","start":4941,"end":4943,"name":"iv"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4950,"end":5032,"declarations":[{"type":"VariableDeclarator","start":4954,"end":5031,"id":{"type":"Identifier","start":4954,"end":4963,"name":"decrypted"},"init":{"type":"CallExpression","start":4966,"end":5031,"callee":{"type":"MemberExpression","start":4966,"end":4981,"object":{"type":"Identifier","start":4966,"end":4974,"name":"decipher"},"property":{"type":"Identifier","start":4975,"end":4981,"name":"update"},"computed":false},"arguments":[{"type":"CallExpression","start":4982,"end":5012,"callee":{"type":"Identifier","start":4982,"end":4991,"name":"urlDecode"},"arguments":[{"type":"Identifier","start":4992,"end":5011,"name":"encryptionWithoutIv"}]},{"type":"Literal","start":5014,"end":5022,"value":"base64","raw":"'base64'"},{"type":"Literal","start":5024,"end":5030,"value":"utf8","raw":"'utf8'"}]}}],"kind":"let"},{"type":"ExpressionStatement","start":5037,"end":5073,"expression":{"type":"AssignmentExpression","start":5037,"end":5072,"operator":"+=","left":{"type":"Identifier","start":5037,"end":5046,"name":"decrypted"},"right":{"type":"CallExpression","start":5050,"end":5072,"callee":{"type":"MemberExpression","start":5050,"end":5064,"object":{"type":"Identifier","start":5050,"end":5058,"name":"decipher"},"property":{"type":"Identifier","start":5059,"end":5064,"name":"final"},"computed":false},"arguments":[{"type":"Literal","start":5065,"end":5071,"value":"utf8","raw":"'utf8'"}]}}},{"type":"ReturnStatement","start":5078,"end":5095,"argument":{"type":"Identifier","start":5085,"end":5094,"name":"decrypted"}}]}}}}],"sourceType":"script"}