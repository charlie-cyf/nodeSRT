{"type":"Program","start":0,"end":4041,"body":[{"type":"VariableDeclaration","start":0,"end":41,"declarations":[{"type":"VariableDeclarator","start":6,"end":40,"id":{"type":"Identifier","start":6,"end":12,"name":"router"},"init":{"type":"MemberExpression","start":15,"end":40,"object":{"type":"CallExpression","start":15,"end":33,"callee":{"type":"Identifier","start":15,"end":22,"name":"require"},"arguments":[{"type":"Literal","start":23,"end":32,"value":"express","raw":"'express'"}]},"property":{"type":"Identifier","start":34,"end":40,"name":"Router"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":42,"end":77,"declarations":[{"type":"VariableDeclarator","start":48,"end":76,"id":{"type":"Identifier","start":48,"end":55,"name":"request"},"init":{"type":"CallExpression","start":58,"end":76,"callee":{"type":"Identifier","start":58,"end":65,"name":"require"},"arguments":[{"type":"Literal","start":66,"end":75,"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":78,"end":118,"declarations":[{"type":"VariableDeclarator","start":84,"end":117,"id":{"type":"Identifier","start":84,"end":92,"name":"Uploader"},"init":{"type":"CallExpression","start":95,"end":117,"callee":{"type":"Identifier","start":95,"end":102,"name":"require"},"arguments":[{"type":"Literal","start":103,"end":116,"value":"../Uploader","raw":"'../Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":119,"end":158,"declarations":[{"type":"VariableDeclarator","start":125,"end":157,"id":{"type":"Identifier","start":125,"end":134,"name":"validator"},"init":{"type":"CallExpression","start":137,"end":157,"callee":{"type":"Identifier","start":137,"end":144,"name":"require"},"arguments":[{"type":"Literal","start":145,"end":156,"value":"validator","raw":"'validator'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":159,"end":201,"declarations":[{"type":"VariableDeclarator","start":165,"end":200,"id":{"type":"Identifier","start":165,"end":170,"name":"utils"},"init":{"type":"CallExpression","start":173,"end":200,"callee":{"type":"Identifier","start":173,"end":180,"name":"require"},"arguments":[{"type":"Literal","start":181,"end":199,"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":202,"end":266,"declarations":[{"type":"VariableDeclarator","start":208,"end":265,"id":{"type":"ObjectPattern","start":208,"end":233,"properties":[{"type":"Property","start":210,"end":231,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":210,"end":231,"name":"getProtectedHttpAgent"},"kind":"init","value":{"type":"Identifier","start":210,"end":231,"name":"getProtectedHttpAgent"}}]},"init":{"type":"CallExpression","start":236,"end":265,"callee":{"type":"Identifier","start":236,"end":243,"name":"require"},"arguments":[{"type":"Literal","start":244,"end":264,"value":"../helpers/request","raw":"'../helpers/request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":267,"end":303,"declarations":[{"type":"VariableDeclarator","start":273,"end":302,"id":{"type":"Identifier","start":273,"end":279,"name":"logger"},"init":{"type":"CallExpression","start":282,"end":302,"callee":{"type":"Identifier","start":282,"end":289,"name":"require"},"arguments":[{"type":"Literal","start":290,"end":301,"value":"../logger","raw":"'../logger'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":304,"end":408,"expression":{"type":"AssignmentExpression","start":304,"end":407,"operator":"=","left":{"type":"MemberExpression","start":304,"end":318,"object":{"type":"Identifier","start":304,"end":310,"name":"module"},"property":{"type":"Identifier","start":311,"end":318,"name":"exports"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":321,"end":407,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":327,"end":407,"body":[{"type":"ReturnStatement","start":333,"end":405,"argument":{"type":"CallExpression","start":340,"end":404,"callee":{"type":"MemberExpression","start":340,"end":391,"object":{"type":"CallExpression","start":340,"end":377,"callee":{"type":"MemberExpression","start":340,"end":362,"object":{"type":"CallExpression","start":340,"end":348,"callee":{"type":"Identifier","start":340,"end":346,"name":"router"},"arguments":[]},"property":{"type":"Identifier","start":358,"end":362,"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":363,"end":370,"value":"/meta","raw":"'/meta'"},{"type":"Identifier","start":372,"end":376,"name":"meta"}]},"property":{"type":"Identifier","start":387,"end":391,"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":392,"end":398,"value":"/get","raw":"'/get'"},{"type":"Identifier","start":400,"end":403,"name":"get"}]}}]}}}},{"type":"VariableDeclaration","start":563,"end":1161,"declarations":[{"type":"VariableDeclarator","start":569,"end":1160,"id":{"type":"Identifier","start":569,"end":573,"name":"meta"},"init":{"type":"ArrowFunctionExpression","start":576,"end":1160,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":577,"end":580,"name":"req"},{"type":"Identifier","start":582,"end":585,"name":"res"}],"body":{"type":"BlockStatement","start":590,"end":1160,"body":[{"type":"ExpressionStatement","start":596,"end":658,"expression":{"type":"CallExpression","start":596,"end":657,"callee":{"type":"MemberExpression","start":596,"end":608,"object":{"type":"Identifier","start":596,"end":602,"name":"logger"},"property":{"type":"Identifier","start":603,"end":608,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":609,"end":642,"value":"URL file import handler running","raw":"'URL file import handler running'"},{"type":"Literal","start":644,"end":648,"value":null,"raw":"null"},{"type":"MemberExpression","start":650,"end":656,"object":{"type":"Identifier","start":650,"end":653,"name":"req"},"property":{"type":"Identifier","start":654,"end":656,"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":663,"end":705,"declarations":[{"type":"VariableDeclarator","start":669,"end":704,"id":{"type":"Identifier","start":669,"end":674,"name":"debug"},"init":{"type":"MemberExpression","start":677,"end":704,"object":{"type":"MemberExpression","start":677,"end":698,"object":{"type":"MemberExpression","start":677,"end":690,"object":{"type":"Identifier","start":677,"end":680,"name":"req"},"property":{"type":"Identifier","start":681,"end":690,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":691,"end":698,"name":"options"},"computed":false},"property":{"type":"Identifier","start":699,"end":704,"name":"debug"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":710,"end":924,"test":{"type":"UnaryExpression","start":714,"end":747,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":715,"end":747,"callee":{"type":"Identifier","start":715,"end":726,"name":"validateURL"},"arguments":[{"type":"MemberExpression","start":727,"end":739,"object":{"type":"MemberExpression","start":727,"end":735,"object":{"type":"Identifier","start":727,"end":730,"name":"req"},"property":{"type":"Identifier","start":731,"end":735,"name":"body"},"computed":false},"property":{"type":"Identifier","start":736,"end":739,"name":"url"},"computed":false},{"type":"Identifier","start":741,"end":746,"name":"debug"}]}},"consequent":{"type":"BlockStatement","start":749,"end":924,"body":[{"type":"ExpressionStatement","start":759,"end":846,"expression":{"type":"CallExpression","start":759,"end":845,"callee":{"type":"MemberExpression","start":759,"end":771,"object":{"type":"Identifier","start":759,"end":765,"name":"logger"},"property":{"type":"Identifier","start":766,"end":771,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":772,"end":830,"value":"Invalid request body detected. Exiting url meta handler.","raw":"'Invalid request body detected. Exiting url meta handler.'"},{"type":"Literal","start":832,"end":836,"value":null,"raw":"null"},{"type":"MemberExpression","start":838,"end":844,"object":{"type":"Identifier","start":838,"end":841,"name":"req"},"property":{"type":"Identifier","start":842,"end":844,"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":855,"end":918,"argument":{"type":"CallExpression","start":862,"end":917,"callee":{"type":"MemberExpression","start":862,"end":882,"object":{"type":"CallExpression","start":862,"end":877,"callee":{"type":"MemberExpression","start":862,"end":872,"object":{"type":"Identifier","start":862,"end":865,"name":"res"},"property":{"type":"Identifier","start":866,"end":872,"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":873,"end":876,"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":878,"end":882,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":883,"end":916,"properties":[{"type":"Property","start":885,"end":914,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":885,"end":890,"name":"error"},"value":{"type":"Literal","start":892,"end":914,"value":"Invalid request body","raw":"'Invalid request body'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":929,"end":1158,"expression":{"type":"CallExpression","start":929,"end":1157,"callee":{"type":"MemberExpression","start":929,"end":1022,"object":{"type":"CallExpression","start":929,"end":1007,"callee":{"type":"MemberExpression","start":929,"end":981,"object":{"type":"CallExpression","start":929,"end":967,"callee":{"type":"MemberExpression","start":929,"end":945,"object":{"type":"Identifier","start":929,"end":934,"name":"utils"},"property":{"type":"Identifier","start":935,"end":945,"name":"getURLMeta"},"computed":false},"arguments":[{"type":"MemberExpression","start":946,"end":958,"object":{"type":"MemberExpression","start":946,"end":954,"object":{"type":"Identifier","start":946,"end":949,"name":"req"},"property":{"type":"Identifier","start":950,"end":954,"name":"body"},"computed":false},"property":{"type":"Identifier","start":955,"end":958,"name":"url"},"computed":false},{"type":"UnaryExpression","start":960,"end":966,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":961,"end":966,"name":"debug"}}]},"property":{"type":"Identifier","start":977,"end":981,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":982,"end":1006,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":983,"end":987,"name":"meta"}],"body":{"type":"CallExpression","start":992,"end":1006,"callee":{"type":"MemberExpression","start":992,"end":1000,"object":{"type":"Identifier","start":992,"end":995,"name":"res"},"property":{"type":"Identifier","start":996,"end":1000,"name":"json"},"computed":false},"arguments":[{"type":"Identifier","start":1001,"end":1005,"name":"meta"}]}}]},"property":{"type":"Identifier","start":1017,"end":1022,"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1023,"end":1156,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1024,"end":1027,"name":"err"}],"body":{"type":"BlockStatement","start":1032,"end":1156,"body":[{"type":"ExpressionStatement","start":1042,"end":1097,"expression":{"type":"CallExpression","start":1042,"end":1096,"callee":{"type":"MemberExpression","start":1042,"end":1054,"object":{"type":"Identifier","start":1042,"end":1048,"name":"logger"},"property":{"type":"Identifier","start":1049,"end":1054,"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":1055,"end":1058,"name":"err"},{"type":"Literal","start":1060,"end":1087,"value":"controller.url.meta.error","raw":"'controller.url.meta.error'"},{"type":"MemberExpression","start":1089,"end":1095,"object":{"type":"Identifier","start":1089,"end":1092,"name":"req"},"property":{"type":"Identifier","start":1093,"end":1095,"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":1106,"end":1150,"argument":{"type":"CallExpression","start":1113,"end":1149,"callee":{"type":"MemberExpression","start":1113,"end":1133,"object":{"type":"CallExpression","start":1113,"end":1128,"callee":{"type":"MemberExpression","start":1113,"end":1123,"object":{"type":"Identifier","start":1113,"end":1116,"name":"res"},"property":{"type":"Identifier","start":1117,"end":1123,"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1124,"end":1127,"value":500,"raw":"500"}]},"property":{"type":"Identifier","start":1129,"end":1133,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1134,"end":1148,"properties":[{"type":"Property","start":1136,"end":1146,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1136,"end":1141,"name":"error"},"value":{"type":"Identifier","start":1143,"end":1146,"name":"err"},"kind":"init"}]}]}}]}}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1396,"end":2789,"declarations":[{"type":"VariableDeclarator","start":1402,"end":2788,"id":{"type":"Identifier","start":1402,"end":1405,"name":"get"},"init":{"type":"ArrowFunctionExpression","start":1408,"end":2788,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1409,"end":1412,"name":"req"},{"type":"Identifier","start":1414,"end":1417,"name":"res"}],"body":{"type":"BlockStatement","start":1422,"end":2788,"body":[{"type":"ExpressionStatement","start":1428,"end":1490,"expression":{"type":"CallExpression","start":1428,"end":1489,"callee":{"type":"MemberExpression","start":1428,"end":1440,"object":{"type":"Identifier","start":1428,"end":1434,"name":"logger"},"property":{"type":"Identifier","start":1435,"end":1440,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1441,"end":1474,"value":"URL file import handler running","raw":"'URL file import handler running'"},{"type":"Literal","start":1476,"end":1480,"value":null,"raw":"null"},{"type":"MemberExpression","start":1482,"end":1488,"object":{"type":"Identifier","start":1482,"end":1485,"name":"req"},"property":{"type":"Identifier","start":1486,"end":1488,"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":1495,"end":1537,"declarations":[{"type":"VariableDeclarator","start":1501,"end":1536,"id":{"type":"Identifier","start":1501,"end":1506,"name":"debug"},"init":{"type":"MemberExpression","start":1509,"end":1536,"object":{"type":"MemberExpression","start":1509,"end":1530,"object":{"type":"MemberExpression","start":1509,"end":1522,"object":{"type":"Identifier","start":1509,"end":1512,"name":"req"},"property":{"type":"Identifier","start":1513,"end":1522,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1523,"end":1530,"name":"options"},"computed":false},"property":{"type":"Identifier","start":1531,"end":1536,"name":"debug"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1542,"end":1758,"test":{"type":"UnaryExpression","start":1546,"end":1579,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1547,"end":1579,"callee":{"type":"Identifier","start":1547,"end":1558,"name":"validateURL"},"arguments":[{"type":"MemberExpression","start":1559,"end":1571,"object":{"type":"MemberExpression","start":1559,"end":1567,"object":{"type":"Identifier","start":1559,"end":1562,"name":"req"},"property":{"type":"Identifier","start":1563,"end":1567,"name":"body"},"computed":false},"property":{"type":"Identifier","start":1568,"end":1571,"name":"url"},"computed":false},{"type":"Identifier","start":1573,"end":1578,"name":"debug"}]}},"consequent":{"type":"BlockStatement","start":1581,"end":1758,"body":[{"type":"ExpressionStatement","start":1591,"end":1680,"expression":{"type":"CallExpression","start":1591,"end":1679,"callee":{"type":"MemberExpression","start":1591,"end":1603,"object":{"type":"Identifier","start":1591,"end":1597,"name":"logger"},"property":{"type":"Identifier","start":1598,"end":1603,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1604,"end":1664,"value":"Invalid request body detected. Exiting url import handler.","raw":"'Invalid request body detected. Exiting url import handler.'"},{"type":"Literal","start":1666,"end":1670,"value":null,"raw":"null"},{"type":"MemberExpression","start":1672,"end":1678,"object":{"type":"Identifier","start":1672,"end":1675,"name":"req"},"property":{"type":"Identifier","start":1676,"end":1678,"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":1689,"end":1752,"argument":{"type":"CallExpression","start":1696,"end":1751,"callee":{"type":"MemberExpression","start":1696,"end":1716,"object":{"type":"CallExpression","start":1696,"end":1711,"callee":{"type":"MemberExpression","start":1696,"end":1706,"object":{"type":"Identifier","start":1696,"end":1699,"name":"res"},"property":{"type":"Identifier","start":1700,"end":1706,"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1707,"end":1710,"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":1712,"end":1716,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1717,"end":1750,"properties":[{"type":"Property","start":1719,"end":1748,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1719,"end":1724,"name":"error"},"value":{"type":"Literal","start":1726,"end":1748,"value":"Invalid request body","raw":"'Invalid request body'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":1763,"end":2786,"expression":{"type":"CallExpression","start":1763,"end":2785,"callee":{"type":"MemberExpression","start":1763,"end":2622,"object":{"type":"CallExpression","start":1763,"end":2616,"callee":{"type":"MemberExpression","start":1763,"end":1807,"object":{"type":"CallExpression","start":1763,"end":1793,"callee":{"type":"MemberExpression","start":1763,"end":1779,"object":{"type":"Identifier","start":1763,"end":1768,"name":"utils"},"property":{"type":"Identifier","start":1769,"end":1779,"name":"getURLMeta"},"computed":false},"arguments":[{"type":"MemberExpression","start":1780,"end":1792,"object":{"type":"MemberExpression","start":1780,"end":1788,"object":{"type":"Identifier","start":1780,"end":1783,"name":"req"},"property":{"type":"Identifier","start":1784,"end":1788,"name":"body"},"computed":false},"property":{"type":"Identifier","start":1789,"end":1792,"name":"url"},"computed":false}]},"property":{"type":"Identifier","start":1803,"end":1807,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1808,"end":2615,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"ObjectPattern","start":1809,"end":1817,"properties":[{"type":"Property","start":1811,"end":1815,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1811,"end":1815,"name":"size"},"kind":"init","value":{"type":"Identifier","start":1811,"end":1815,"name":"size"}}]}],"body":{"type":"BlockStatement","start":1822,"end":2615,"body":[{"type":"ExpressionStatement","start":1854,"end":1908,"expression":{"type":"CallExpression","start":1854,"end":1907,"callee":{"type":"MemberExpression","start":1854,"end":1866,"object":{"type":"Identifier","start":1854,"end":1860,"name":"logger"},"property":{"type":"Identifier","start":1861,"end":1866,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1867,"end":1892,"value":"Instantiating uploader.","raw":"'Instantiating uploader.'"},{"type":"Literal","start":1894,"end":1898,"value":null,"raw":"null"},{"type":"MemberExpression","start":1900,"end":1906,"object":{"type":"Identifier","start":1900,"end":1903,"name":"req"},"property":{"type":"Identifier","start":1904,"end":1906,"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":1917,"end":1981,"declarations":[{"type":"VariableDeclarator","start":1923,"end":1980,"id":{"type":"Identifier","start":1923,"end":1931,"name":"uploader"},"init":{"type":"NewExpression","start":1934,"end":1980,"callee":{"type":"Identifier","start":1938,"end":1946,"name":"Uploader"},"arguments":[{"type":"CallExpression","start":1947,"end":1979,"callee":{"type":"MemberExpression","start":1947,"end":1968,"object":{"type":"Identifier","start":1947,"end":1955,"name":"Uploader"},"property":{"type":"Identifier","start":1956,"end":1968,"name":"reqToOptions"},"computed":false},"arguments":[{"type":"Identifier","start":1969,"end":1972,"name":"req"},{"type":"Identifier","start":1974,"end":1978,"name":"size"}]}]}}],"kind":"const"},{"type":"IfStatement","start":1990,"end":2160,"test":{"type":"CallExpression","start":1994,"end":2013,"callee":{"type":"MemberExpression","start":1994,"end":2011,"object":{"type":"Identifier","start":1994,"end":2002,"name":"uploader"},"property":{"type":"Identifier","start":2003,"end":2011,"name":"hasError"},"computed":false},"arguments":[]},"consequent":{"type":"BlockStatement","start":2015,"end":2160,"body":[{"type":"VariableDeclaration","start":2029,"end":2069,"declarations":[{"type":"VariableDeclarator","start":2035,"end":2068,"id":{"type":"Identifier","start":2035,"end":2043,"name":"response"},"init":{"type":"CallExpression","start":2046,"end":2068,"callee":{"type":"MemberExpression","start":2046,"end":2066,"object":{"type":"Identifier","start":2046,"end":2054,"name":"uploader"},"property":{"type":"Identifier","start":2055,"end":2066,"name":"getResponse"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":2082,"end":2130,"expression":{"type":"CallExpression","start":2082,"end":2129,"callee":{"type":"MemberExpression","start":2082,"end":2114,"object":{"type":"CallExpression","start":2082,"end":2109,"callee":{"type":"MemberExpression","start":2082,"end":2092,"object":{"type":"Identifier","start":2082,"end":2085,"name":"res"},"property":{"type":"Identifier","start":2086,"end":2092,"name":"status"},"computed":false},"arguments":[{"type":"MemberExpression","start":2093,"end":2108,"object":{"type":"Identifier","start":2093,"end":2101,"name":"response"},"property":{"type":"Identifier","start":2102,"end":2108,"name":"status"},"computed":false}]},"property":{"type":"Identifier","start":2110,"end":2114,"name":"json"},"computed":false},"arguments":[{"type":"MemberExpression","start":2115,"end":2128,"object":{"type":"Identifier","start":2115,"end":2123,"name":"response"},"property":{"type":"Identifier","start":2124,"end":2128,"name":"body"},"computed":false}]}},{"type":"ReturnStatement","start":2143,"end":2150,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":2169,"end":2263,"expression":{"type":"CallExpression","start":2169,"end":2262,"callee":{"type":"MemberExpression","start":2169,"end":2181,"object":{"type":"Identifier","start":2169,"end":2175,"name":"logger"},"property":{"type":"Identifier","start":2176,"end":2181,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":2182,"end":2247,"value":"Waiting for socket connection before beginning remote download.","raw":"'Waiting for socket connection before beginning remote download.'"},{"type":"Literal","start":2249,"end":2253,"value":null,"raw":"null"},{"type":"MemberExpression","start":2255,"end":2261,"object":{"type":"Identifier","start":2255,"end":2258,"name":"req"},"property":{"type":"Identifier","start":2259,"end":2261,"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2272,"end":2503,"expression":{"type":"CallExpression","start":2272,"end":2502,"callee":{"type":"MemberExpression","start":2272,"end":2294,"object":{"type":"Identifier","start":2272,"end":2280,"name":"uploader"},"property":{"type":"Identifier","start":2281,"end":2294,"name":"onSocketReady"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2295,"end":2501,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2301,"end":2501,"body":[{"type":"ExpressionStatement","start":2315,"end":2399,"expression":{"type":"CallExpression","start":2315,"end":2398,"callee":{"type":"MemberExpression","start":2315,"end":2327,"object":{"type":"Identifier","start":2315,"end":2321,"name":"logger"},"property":{"type":"Identifier","start":2322,"end":2327,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":2328,"end":2383,"value":"Socket connection received. Starting remote download.","raw":"'Socket connection received. Starting remote download.'"},{"type":"Literal","start":2385,"end":2389,"value":null,"raw":"null"},{"type":"MemberExpression","start":2391,"end":2397,"object":{"type":"Identifier","start":2391,"end":2394,"name":"req"},"property":{"type":"Identifier","start":2395,"end":2397,"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2412,"end":2491,"expression":{"type":"CallExpression","start":2412,"end":2490,"callee":{"type":"Identifier","start":2412,"end":2423,"name":"downloadURL"},"arguments":[{"type":"MemberExpression","start":2424,"end":2436,"object":{"type":"MemberExpression","start":2424,"end":2432,"object":{"type":"Identifier","start":2424,"end":2427,"name":"req"},"property":{"type":"Identifier","start":2428,"end":2432,"name":"body"},"computed":false},"property":{"type":"Identifier","start":2433,"end":2436,"name":"url"},"computed":false},{"type":"CallExpression","start":2438,"end":2473,"callee":{"type":"MemberExpression","start":2438,"end":2463,"object":{"type":"MemberExpression","start":2438,"end":2458,"object":{"type":"Identifier","start":2438,"end":2446,"name":"uploader"},"property":{"type":"Identifier","start":2447,"end":2458,"name":"handleChunk"},"computed":false},"property":{"type":"Identifier","start":2459,"end":2463,"name":"bind"},"computed":false},"arguments":[{"type":"Identifier","start":2464,"end":2472,"name":"uploader"}]},{"type":"UnaryExpression","start":2475,"end":2481,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2476,"end":2481,"name":"debug"}},{"type":"MemberExpression","start":2483,"end":2489,"object":{"type":"Identifier","start":2483,"end":2486,"name":"req"},"property":{"type":"Identifier","start":2487,"end":2489,"name":"id"},"computed":false}]}}]}}]}},{"type":"VariableDeclaration","start":2512,"end":2552,"declarations":[{"type":"VariableDeclarator","start":2518,"end":2551,"id":{"type":"Identifier","start":2518,"end":2526,"name":"response"},"init":{"type":"CallExpression","start":2529,"end":2551,"callee":{"type":"MemberExpression","start":2529,"end":2549,"object":{"type":"Identifier","start":2529,"end":2537,"name":"uploader"},"property":{"type":"Identifier","start":2538,"end":2549,"name":"getResponse"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":2561,"end":2609,"expression":{"type":"CallExpression","start":2561,"end":2608,"callee":{"type":"MemberExpression","start":2561,"end":2593,"object":{"type":"CallExpression","start":2561,"end":2588,"callee":{"type":"MemberExpression","start":2561,"end":2571,"object":{"type":"Identifier","start":2561,"end":2564,"name":"res"},"property":{"type":"Identifier","start":2565,"end":2571,"name":"status"},"computed":false},"arguments":[{"type":"MemberExpression","start":2572,"end":2587,"object":{"type":"Identifier","start":2572,"end":2580,"name":"response"},"property":{"type":"Identifier","start":2581,"end":2587,"name":"status"},"computed":false}]},"property":{"type":"Identifier","start":2589,"end":2593,"name":"json"},"computed":false},"arguments":[{"type":"MemberExpression","start":2594,"end":2607,"object":{"type":"Identifier","start":2594,"end":2602,"name":"response"},"property":{"type":"Identifier","start":2603,"end":2607,"name":"body"},"computed":false}]}}]}}]},"property":{"type":"Identifier","start":2617,"end":2622,"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2623,"end":2784,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2624,"end":2627,"name":"err"}],"body":{"type":"BlockStatement","start":2632,"end":2784,"body":[{"type":"ExpressionStatement","start":2642,"end":2696,"expression":{"type":"CallExpression","start":2642,"end":2695,"callee":{"type":"MemberExpression","start":2642,"end":2654,"object":{"type":"Identifier","start":2642,"end":2648,"name":"logger"},"property":{"type":"Identifier","start":2649,"end":2654,"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":2655,"end":2658,"name":"err"},{"type":"Literal","start":2660,"end":2686,"value":"controller.url.get.error","raw":"'controller.url.get.error'"},{"type":"MemberExpression","start":2688,"end":2694,"object":{"type":"Identifier","start":2688,"end":2691,"name":"req"},"property":{"type":"Identifier","start":2692,"end":2694,"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2760,"end":2778,"expression":{"type":"CallExpression","start":2760,"end":2777,"callee":{"type":"MemberExpression","start":2760,"end":2768,"object":{"type":"Identifier","start":2760,"end":2763,"name":"res"},"property":{"type":"Identifier","start":2764,"end":2768,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2769,"end":2776,"properties":[{"type":"Property","start":2771,"end":2774,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2771,"end":2774,"name":"err"},"kind":"init","value":{"type":"Identifier","start":2771,"end":2774,"name":"err"}}]}]}}]}}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":2956,"end":3220,"declarations":[{"type":"VariableDeclarator","start":2962,"end":3219,"id":{"type":"Identifier","start":2962,"end":2973,"name":"validateURL"},"init":{"type":"ArrowFunctionExpression","start":2976,"end":3219,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2977,"end":2980,"name":"url"},{"type":"Identifier","start":2982,"end":2987,"name":"debug"}],"body":{"type":"BlockStatement","start":2992,"end":3219,"body":[{"type":"VariableDeclaration","start":2998,"end":3125,"declarations":[{"type":"VariableDeclarator","start":3004,"end":3124,"id":{"type":"Identifier","start":3004,"end":3016,"name":"validURLOpts"},"init":{"type":"ObjectExpression","start":3019,"end":3124,"properties":[{"type":"Property","start":3029,"end":3057,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3029,"end":3038,"name":"protocols"},"value":{"type":"ArrayExpression","start":3040,"end":3057,"elements":[{"type":"Literal","start":3041,"end":3047,"value":"http","raw":"'http'"},{"type":"Literal","start":3049,"end":3056,"value":"https","raw":"'https'"}]},"kind":"init"},{"type":"Property","start":3067,"end":3089,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3067,"end":3083,"name":"require_protocol"},"value":{"type":"Literal","start":3085,"end":3089,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":3099,"end":3118,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3099,"end":3110,"name":"require_tld"},"value":{"type":"UnaryExpression","start":3112,"end":3118,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":3113,"end":3118,"name":"debug"}},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":3130,"end":3200,"test":{"type":"UnaryExpression","start":3134,"end":3169,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":3135,"end":3169,"callee":{"type":"MemberExpression","start":3135,"end":3150,"object":{"type":"Identifier","start":3135,"end":3144,"name":"validator"},"property":{"type":"Identifier","start":3145,"end":3150,"name":"isURL"},"computed":false},"arguments":[{"type":"Identifier","start":3151,"end":3154,"name":"url"},{"type":"Identifier","start":3156,"end":3168,"name":"validURLOpts"}]}},"consequent":{"type":"BlockStatement","start":3171,"end":3200,"body":[{"type":"ReturnStatement","start":3181,"end":3194,"argument":{"type":"Literal","start":3188,"end":3193,"value":false,"raw":"false"}}]},"alternate":null},{"type":"ReturnStatement","start":3205,"end":3217,"argument":{"type":"Literal","start":3212,"end":3216,"value":true,"raw":"true"}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":3565,"end":4040,"declarations":[{"type":"VariableDeclarator","start":3571,"end":4039,"id":{"type":"Identifier","start":3571,"end":3582,"name":"downloadURL"},"init":{"type":"ArrowFunctionExpression","start":3585,"end":4039,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3586,"end":3589,"name":"url"},{"type":"Identifier","start":3591,"end":3602,"name":"onDataChunk"},{"type":"Identifier","start":3604,"end":3617,"name":"blockLocalIPs"},{"type":"Identifier","start":3619,"end":3626,"name":"traceId"}],"body":{"type":"BlockStatement","start":3631,"end":4039,"body":[{"type":"VariableDeclaration","start":3637,"end":3820,"declarations":[{"type":"VariableDeclarator","start":3643,"end":3819,"id":{"type":"Identifier","start":3643,"end":3647,"name":"opts"},"init":{"type":"ObjectExpression","start":3650,"end":3819,"properties":[{"type":"Property","start":3660,"end":3668,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3660,"end":3663,"name":"uri"},"value":{"type":"Identifier","start":3665,"end":3668,"name":"url"},"kind":"init"},{"type":"Property","start":3678,"end":3691,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3678,"end":3684,"name":"method"},"value":{"type":"Literal","start":3686,"end":3691,"value":"GET","raw":"'GET'"},"kind":"init"},{"type":"Property","start":3701,"end":3725,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3701,"end":3719,"name":"followAllRedirects"},"value":{"type":"Literal","start":3721,"end":3725,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":3735,"end":3813,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3735,"end":3745,"name":"agentClass"},"value":{"type":"CallExpression","start":3747,"end":3813,"callee":{"type":"Identifier","start":3747,"end":3768,"name":"getProtectedHttpAgent"},"arguments":[{"type":"MemberExpression","start":3769,"end":3797,"object":{"type":"CallExpression","start":3769,"end":3788,"callee":{"type":"MemberExpression","start":3769,"end":3783,"object":{"type":"Identifier","start":3769,"end":3774,"name":"utils"},"property":{"type":"Identifier","start":3775,"end":3783,"name":"parseURL"},"computed":false},"arguments":[{"type":"Identifier","start":3784,"end":3787,"name":"url"}]},"property":{"type":"Identifier","start":3789,"end":3797,"name":"protocol"},"computed":false},{"type":"Identifier","start":3799,"end":3812,"name":"blockLocalIPs"}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3825,"end":4037,"expression":{"type":"CallExpression","start":3825,"end":4036,"callee":{"type":"MemberExpression","start":3825,"end":3957,"object":{"type":"CallExpression","start":3825,"end":3945,"callee":{"type":"MemberExpression","start":3825,"end":3907,"object":{"type":"CallExpression","start":3825,"end":3895,"callee":{"type":"MemberExpression","start":3825,"end":3850,"object":{"type":"CallExpression","start":3825,"end":3838,"callee":{"type":"Identifier","start":3825,"end":3832,"name":"request"},"arguments":[{"type":"Identifier","start":3833,"end":3837,"name":"opts"}]},"property":{"type":"Identifier","start":3848,"end":3850,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3851,"end":3857,"value":"data","raw":"'data'"},{"type":"ArrowFunctionExpression","start":3859,"end":3894,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3860,"end":3865,"name":"chunk"}],"body":{"type":"CallExpression","start":3870,"end":3894,"callee":{"type":"Identifier","start":3870,"end":3881,"name":"onDataChunk"},"arguments":[{"type":"Literal","start":3882,"end":3886,"value":null,"raw":"null"},{"type":"Identifier","start":3888,"end":3893,"name":"chunk"}]}}]},"property":{"type":"Identifier","start":3905,"end":3907,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3908,"end":3913,"value":"end","raw":"'end'"},{"type":"ArrowFunctionExpression","start":3915,"end":3944,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":3921,"end":3944,"callee":{"type":"Identifier","start":3921,"end":3932,"name":"onDataChunk"},"arguments":[{"type":"Literal","start":3933,"end":3937,"value":null,"raw":"null"},{"type":"Literal","start":3939,"end":3943,"value":null,"raw":"null"}]}}]},"property":{"type":"Identifier","start":3955,"end":3957,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3958,"end":3965,"value":"error","raw":"'error'"},{"type":"ArrowFunctionExpression","start":3967,"end":4035,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3968,"end":3971,"name":"err"}],"body":{"type":"CallExpression","start":3976,"end":4035,"callee":{"type":"MemberExpression","start":3976,"end":3988,"object":{"type":"Identifier","start":3976,"end":3982,"name":"logger"},"property":{"type":"Identifier","start":3983,"end":3988,"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":3989,"end":3992,"name":"err"},{"type":"Literal","start":3994,"end":4025,"value":"controller.url.download.error","raw":"'controller.url.download.error'"},{"type":"Identifier","start":4027,"end":4034,"name":"traceId"}]}}]}}]}}}],"kind":"const"}],"sourceType":"script"}