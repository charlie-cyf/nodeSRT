{"type":"Program","start":0,"end":989,"loc":{"start":{"line":1,"column":0},"end":{"line":26,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":53,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":53}},"declarations":[{"type":"VariableDeclarator","start":6,"end":52,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":52}},"id":{"type":"Identifier","start":6,"end":16,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":16}},"name":"oAuthState"},"init":{"type":"CallExpression","start":19,"end":52,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":52}},"callee":{"type":"Identifier","start":19,"end":26,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":26}},"name":"require"},"arguments":[{"type":"Literal","start":27,"end":51,"loc":{"start":{"line":1,"column":27},"end":{"line":1,"column":51}},"value":"../helpers/oauth-state","raw":"'../helpers/oauth-state'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":68,"end":97,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"declarations":[{"type":"VariableDeclarator","start":74,"end":96,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":28}},"id":{"type":"Identifier","start":74,"end":78,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":10}},"name":"atob"},"init":{"type":"CallExpression","start":81,"end":96,"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":28}},"callee":{"type":"Identifier","start":81,"end":88,"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":89,"end":95,"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":27}},"value":"atob","raw":"'atob'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":201,"end":988,"loc":{"start":{"line":10,"column":0},"end":{"line":25,"column":2}},"expression":{"type":"AssignmentExpression","start":201,"end":987,"loc":{"start":{"line":10,"column":0},"end":{"line":25,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":201,"end":215,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":14}},"object":{"type":"Identifier","start":201,"end":207,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":6}},"name":"module"},"property":{"type":"Identifier","start":208,"end":215,"loc":{"start":{"line":10,"column":7},"end":{"line":10,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":218,"end":987,"loc":{"start":{"line":10,"column":17},"end":{"line":25,"column":1}},"id":{"type":"Identifier","start":227,"end":234,"loc":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"name":"connect"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":235,"end":238,"loc":{"start":{"line":10,"column":34},"end":{"line":10,"column":37}},"name":"req"},{"type":"Identifier","start":240,"end":243,"loc":{"start":{"line":10,"column":39},"end":{"line":10,"column":42}},"name":"res"}],"body":{"type":"BlockStatement","start":245,"end":987,"loc":{"start":{"line":10,"column":44},"end":{"line":25,"column":1}},"body":[{"type":"VariableDeclaration","start":251,"end":295,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":48}},"declarations":[{"type":"VariableDeclarator","start":257,"end":294,"loc":{"start":{"line":11,"column":10},"end":{"line":11,"column":47}},"id":{"type":"Identifier","start":257,"end":263,"loc":{"start":{"line":11,"column":10},"end":{"line":11,"column":16}},"name":"secret"},"init":{"type":"MemberExpression","start":266,"end":294,"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":47}},"object":{"type":"MemberExpression","start":266,"end":287,"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":40}},"object":{"type":"MemberExpression","start":266,"end":279,"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":32}},"object":{"type":"Identifier","start":266,"end":269,"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":22}},"name":"req"},"property":{"type":"Identifier","start":270,"end":279,"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":280,"end":287,"loc":{"start":{"line":11,"column":33},"end":{"line":11,"column":40}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":288,"end":294,"loc":{"start":{"line":11,"column":41},"end":{"line":11,"column":47}},"name":"secret"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":300,"end":345,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":49}},"declarations":[{"type":"VariableDeclarator","start":304,"end":344,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":48}},"id":{"type":"Identifier","start":304,"end":309,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":13}},"name":"state"},"init":{"type":"CallExpression","start":312,"end":344,"loc":{"start":{"line":12,"column":16},"end":{"line":12,"column":48}},"callee":{"type":"MemberExpression","start":312,"end":336,"loc":{"start":{"line":12,"column":16},"end":{"line":12,"column":40}},"object":{"type":"Identifier","start":312,"end":322,"loc":{"start":{"line":12,"column":16},"end":{"line":12,"column":26}},"name":"oAuthState"},"property":{"type":"Identifier","start":323,"end":336,"loc":{"start":{"line":12,"column":27},"end":{"line":12,"column":40}},"name":"generateState"},"computed":false},"arguments":[{"type":"Identifier","start":337,"end":343,"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":47}},"name":"secret"}]}}],"kind":"let"},{"type":"IfStatement","start":350,"end":555,"loc":{"start":{"line":13,"column":4},"end":{"line":17,"column":5}},"test":{"type":"MemberExpression","start":354,"end":369,"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":23}},"object":{"type":"MemberExpression","start":354,"end":363,"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":17}},"object":{"type":"Identifier","start":354,"end":357,"loc":{"start":{"line":13,"column":8},"end":{"line":13,"column":11}},"name":"req"},"property":{"type":"Identifier","start":358,"end":363,"loc":{"start":{"line":13,"column":12},"end":{"line":13,"column":17}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":364,"end":369,"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":23}},"name":"state"},"computed":false},"consequent":{"type":"BlockStatement","start":371,"end":555,"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":5}},"body":[{"type":"VariableDeclaration","start":438,"end":487,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":57}},"declarations":[{"type":"VariableDeclarator","start":444,"end":486,"loc":{"start":{"line":15,"column":14},"end":{"line":15,"column":56}},"id":{"type":"Identifier","start":444,"end":450,"loc":{"start":{"line":15,"column":14},"end":{"line":15,"column":20}},"name":"origin"},"init":{"type":"CallExpression","start":453,"end":486,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":56}},"callee":{"type":"MemberExpression","start":453,"end":463,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":33}},"object":{"type":"Identifier","start":453,"end":457,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":27}},"name":"JSON"},"property":{"type":"Identifier","start":458,"end":463,"loc":{"start":{"line":15,"column":28},"end":{"line":15,"column":33}},"name":"parse"},"computed":false},"arguments":[{"type":"CallExpression","start":464,"end":485,"loc":{"start":{"line":15,"column":34},"end":{"line":15,"column":55}},"callee":{"type":"Identifier","start":464,"end":468,"loc":{"start":{"line":15,"column":34},"end":{"line":15,"column":38}},"name":"atob"},"arguments":[{"type":"MemberExpression","start":469,"end":484,"loc":{"start":{"line":15,"column":39},"end":{"line":15,"column":54}},"object":{"type":"MemberExpression","start":469,"end":478,"loc":{"start":{"line":15,"column":39},"end":{"line":15,"column":48}},"object":{"type":"Identifier","start":469,"end":472,"loc":{"start":{"line":15,"column":39},"end":{"line":15,"column":42}},"name":"req"},"property":{"type":"Identifier","start":473,"end":478,"loc":{"start":{"line":15,"column":43},"end":{"line":15,"column":48}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":479,"end":484,"loc":{"start":{"line":15,"column":49},"end":{"line":15,"column":54}},"name":"state"},"computed":false}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":496,"end":549,"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":61}},"expression":{"type":"AssignmentExpression","start":496,"end":548,"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":60}},"operator":"=","left":{"type":"Identifier","start":496,"end":501,"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":13}},"name":"state"},"right":{"type":"CallExpression","start":504,"end":548,"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":60}},"callee":{"type":"MemberExpression","start":504,"end":525,"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":37}},"object":{"type":"Identifier","start":504,"end":514,"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":26}},"name":"oAuthState"},"property":{"type":"Identifier","start":515,"end":525,"loc":{"start":{"line":16,"column":27},"end":{"line":16,"column":37}},"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":526,"end":531,"loc":{"start":{"line":16,"column":38},"end":{"line":16,"column":43}},"name":"state"},{"type":"Identifier","start":533,"end":539,"loc":{"start":{"line":16,"column":45},"end":{"line":16,"column":51}},"name":"origin"},{"type":"Identifier","start":541,"end":547,"loc":{"start":{"line":16,"column":53},"end":{"line":16,"column":59}},"name":"secret"}]}}}]},"alternate":null},{"type":"IfStatement","start":560,"end":724,"loc":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"test":{"type":"MemberExpression","start":564,"end":604,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":48}},"object":{"type":"MemberExpression","start":564,"end":592,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":36}},"object":{"type":"MemberExpression","start":564,"end":585,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":29}},"object":{"type":"MemberExpression","start":564,"end":577,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":21}},"object":{"type":"Identifier","start":564,"end":567,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":11}},"name":"req"},"property":{"type":"Identifier","start":568,"end":577,"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":21}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":578,"end":585,"loc":{"start":{"line":18,"column":22},"end":{"line":18,"column":29}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":586,"end":592,"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":36}},"name":"server"},"computed":false},"property":{"type":"Identifier","start":593,"end":604,"loc":{"start":{"line":18,"column":37},"end":{"line":18,"column":48}},"name":"oauthDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":606,"end":724,"loc":{"start":{"line":18,"column":50},"end":{"line":20,"column":5}},"body":[{"type":"ExpressionStatement","start":616,"end":718,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":110}},"expression":{"type":"AssignmentExpression","start":616,"end":717,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":109}},"operator":"=","left":{"type":"Identifier","start":616,"end":621,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":13}},"name":"state"},"right":{"type":"CallExpression","start":624,"end":717,"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":109}},"callee":{"type":"MemberExpression","start":624,"end":645,"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":37}},"object":{"type":"Identifier","start":624,"end":634,"loc":{"start":{"line":19,"column":16},"end":{"line":19,"column":26}},"name":"oAuthState"},"property":{"type":"Identifier","start":635,"end":645,"loc":{"start":{"line":19,"column":27},"end":{"line":19,"column":37}},"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":646,"end":651,"loc":{"start":{"line":19,"column":38},"end":{"line":19,"column":43}},"name":"state"},{"type":"ObjectExpression","start":653,"end":708,"loc":{"start":{"line":19,"column":45},"end":{"line":19,"column":100}},"properties":[{"type":"Property","start":655,"end":706,"loc":{"start":{"line":19,"column":47},"end":{"line":19,"column":98}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":655,"end":672,"loc":{"start":{"line":19,"column":47},"end":{"line":19,"column":64}},"name":"companionInstance"},"value":{"type":"CallExpression","start":674,"end":706,"loc":{"start":{"line":19,"column":66},"end":{"line":19,"column":98}},"callee":{"type":"MemberExpression","start":674,"end":696,"loc":{"start":{"line":19,"column":66},"end":{"line":19,"column":88}},"object":{"type":"MemberExpression","start":674,"end":687,"loc":{"start":{"line":19,"column":66},"end":{"line":19,"column":79}},"object":{"type":"Identifier","start":674,"end":677,"loc":{"start":{"line":19,"column":66},"end":{"line":19,"column":69}},"name":"req"},"property":{"type":"Identifier","start":678,"end":687,"loc":{"start":{"line":19,"column":70},"end":{"line":19,"column":79}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":688,"end":696,"loc":{"start":{"line":19,"column":80},"end":{"line":19,"column":88}},"name":"buildURL"},"computed":false},"arguments":[{"type":"Literal","start":697,"end":699,"loc":{"start":{"line":19,"column":89},"end":{"line":19,"column":91}},"value":"","raw":"''"},{"type":"Literal","start":701,"end":705,"loc":{"start":{"line":19,"column":93},"end":{"line":19,"column":97}},"value":true,"raw":"true"}]},"kind":"init"}]},{"type":"Identifier","start":710,"end":716,"loc":{"start":{"line":19,"column":102},"end":{"line":19,"column":108}},"name":"secret"}]}}}]},"alternate":null},{"type":"IfStatement","start":729,"end":871,"loc":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"test":{"type":"MemberExpression","start":733,"end":760,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":35}},"object":{"type":"MemberExpression","start":733,"end":746,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":21}},"object":{"type":"Identifier","start":733,"end":736,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":11}},"name":"req"},"property":{"type":"Identifier","start":737,"end":746,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":21}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":747,"end":760,"loc":{"start":{"line":21,"column":22},"end":{"line":21,"column":35}},"name":"clientVersion"},"computed":false},"consequent":{"type":"BlockStatement","start":762,"end":871,"loc":{"start":{"line":21,"column":37},"end":{"line":23,"column":5}},"body":[{"type":"ExpressionStatement","start":772,"end":865,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":101}},"expression":{"type":"AssignmentExpression","start":772,"end":864,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":100}},"operator":"=","left":{"type":"Identifier","start":772,"end":777,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":13}},"name":"state"},"right":{"type":"CallExpression","start":780,"end":864,"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":100}},"callee":{"type":"MemberExpression","start":780,"end":801,"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":37}},"object":{"type":"Identifier","start":780,"end":790,"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":26}},"name":"oAuthState"},"property":{"type":"Identifier","start":791,"end":801,"loc":{"start":{"line":22,"column":27},"end":{"line":22,"column":37}},"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":802,"end":807,"loc":{"start":{"line":22,"column":38},"end":{"line":22,"column":43}},"name":"state"},{"type":"ObjectExpression","start":809,"end":855,"loc":{"start":{"line":22,"column":45},"end":{"line":22,"column":91}},"properties":[{"type":"Property","start":811,"end":853,"loc":{"start":{"line":22,"column":47},"end":{"line":22,"column":89}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":811,"end":824,"loc":{"start":{"line":22,"column":47},"end":{"line":22,"column":60}},"name":"clientVersion"},"value":{"type":"MemberExpression","start":826,"end":853,"loc":{"start":{"line":22,"column":62},"end":{"line":22,"column":89}},"object":{"type":"MemberExpression","start":826,"end":839,"loc":{"start":{"line":22,"column":62},"end":{"line":22,"column":75}},"object":{"type":"Identifier","start":826,"end":829,"loc":{"start":{"line":22,"column":62},"end":{"line":22,"column":65}},"name":"req"},"property":{"type":"Identifier","start":830,"end":839,"loc":{"start":{"line":22,"column":66},"end":{"line":22,"column":75}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":840,"end":853,"loc":{"start":{"line":22,"column":76},"end":{"line":22,"column":89}},"name":"clientVersion"},"computed":false},"kind":"init"}]},{"type":"Identifier","start":857,"end":863,"loc":{"start":{"line":22,"column":93},"end":{"line":22,"column":99}},"name":"secret"}]}}}]},"alternate":null},{"type":"ExpressionStatement","start":876,"end":985,"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":113}},"expression":{"type":"CallExpression","start":876,"end":984,"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":112}},"callee":{"type":"MemberExpression","start":876,"end":888,"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":16}},"object":{"type":"Identifier","start":876,"end":879,"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":7}},"name":"res"},"property":{"type":"Identifier","start":880,"end":888,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":16}},"name":"redirect"},"computed":false},"arguments":[{"type":"CallExpression","start":889,"end":983,"loc":{"start":{"line":24,"column":17},"end":{"line":24,"column":111}},"callee":{"type":"MemberExpression","start":889,"end":911,"loc":{"start":{"line":24,"column":17},"end":{"line":24,"column":39}},"object":{"type":"MemberExpression","start":889,"end":902,"loc":{"start":{"line":24,"column":17},"end":{"line":24,"column":30}},"object":{"type":"Identifier","start":889,"end":892,"loc":{"start":{"line":24,"column":17},"end":{"line":24,"column":20}},"name":"req"},"property":{"type":"Identifier","start":893,"end":902,"loc":{"start":{"line":24,"column":21},"end":{"line":24,"column":30}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":903,"end":911,"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":39}},"name":"buildURL"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":912,"end":976,"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":104}},"expressions":[{"type":"MemberExpression","start":924,"end":959,"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":87}},"object":{"type":"MemberExpression","start":924,"end":946,"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":74}},"object":{"type":"MemberExpression","start":924,"end":937,"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":65}},"object":{"type":"Identifier","start":924,"end":927,"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":55}},"name":"req"},"property":{"type":"Identifier","start":928,"end":937,"loc":{"start":{"line":24,"column":56},"end":{"line":24,"column":65}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":938,"end":946,"loc":{"start":{"line":24,"column":66},"end":{"line":24,"column":74}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":947,"end":959,"loc":{"start":{"line":24,"column":75},"end":{"line":24,"column":87}},"name":"authProvider"},"computed":false},{"type":"Identifier","start":969,"end":974,"loc":{"start":{"line":24,"column":97},"end":{"line":24,"column":102}},"name":"state"}],"quasis":[{"type":"TemplateElement","start":913,"end":922,"loc":{"start":{"line":24,"column":41},"end":{"line":24,"column":50}},"value":{"raw":"/connect/","cooked":"/connect/"},"tail":false},{"type":"TemplateElement","start":960,"end":967,"loc":{"start":{"line":24,"column":88},"end":{"line":24,"column":95}},"value":{"raw":"?state=","cooked":"?state="},"tail":false},{"type":"TemplateElement","start":975,"end":975,"loc":{"start":{"line":24,"column":103},"end":{"line":24,"column":103}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":978,"end":982,"loc":{"start":{"line":24,"column":106},"end":{"line":24,"column":110}},"value":true,"raw":"true"}]}]}}]}}}}],"sourceType":"module"}