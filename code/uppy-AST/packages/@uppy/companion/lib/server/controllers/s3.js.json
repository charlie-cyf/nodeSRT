{"type":"Program","start":0,"end":10210,"loc":{"start":{"line":1,"column":0},"end":{"line":268,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":41,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":41}},"declarations":[{"type":"VariableDeclarator","start":6,"end":40,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":40}},"id":{"type":"Identifier","start":6,"end":12,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":12}},"name":"router"},"init":{"type":"MemberExpression","start":15,"end":40,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":40}},"object":{"type":"CallExpression","start":15,"end":33,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":33}},"callee":{"type":"Identifier","start":15,"end":22,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":23,"end":32,"loc":{"start":{"line":1,"column":23},"end":{"line":1,"column":32}},"value":"express","raw":"'express'"}]},"property":{"type":"Identifier","start":34,"end":40,"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":40}},"name":"Router"},"computed":false}}],"kind":"const"},{"type":"ExpressionStatement","start":42,"end":10061,"loc":{"start":{"line":2,"column":0},"end":{"line":264,"column":2}},"expression":{"type":"AssignmentExpression","start":42,"end":10060,"loc":{"start":{"line":2,"column":0},"end":{"line":264,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":42,"end":56,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":14}},"object":{"type":"Identifier","start":42,"end":48,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":6}},"name":"module"},"property":{"type":"Identifier","start":49,"end":56,"loc":{"start":{"line":2,"column":7},"end":{"line":2,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":59,"end":10060,"loc":{"start":{"line":2,"column":17},"end":{"line":264,"column":1}},"id":{"type":"Identifier","start":68,"end":70,"loc":{"start":{"line":2,"column":26},"end":{"line":2,"column":28}},"name":"s3"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":71,"end":77,"loc":{"start":{"line":2,"column":29},"end":{"line":2,"column":35}},"name":"config"}],"body":{"type":"BlockStatement","start":79,"end":10060,"loc":{"start":{"line":2,"column":37},"end":{"line":264,"column":1}},"body":[{"type":"IfStatement","start":85,"end":198,"loc":{"start":{"line":3,"column":4},"end":{"line":5,"column":5}},"test":{"type":"BinaryExpression","start":89,"end":119,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":38}},"left":{"type":"UnaryExpression","start":89,"end":106,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":25}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":96,"end":106,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":25}},"object":{"type":"Identifier","start":96,"end":102,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":21}},"name":"config"},"property":{"type":"Identifier","start":103,"end":106,"loc":{"start":{"line":3,"column":22},"end":{"line":3,"column":25}},"name":"acl"},"computed":false}},"operator":"!==","right":{"type":"Literal","start":111,"end":119,"loc":{"start":{"line":3,"column":30},"end":{"line":3,"column":38}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":121,"end":198,"loc":{"start":{"line":3,"column":40},"end":{"line":5,"column":5}},"body":[{"type":"ThrowStatement","start":131,"end":192,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":69}},"argument":{"type":"NewExpression","start":137,"end":191,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":68}},"callee":{"type":"Identifier","start":141,"end":150,"loc":{"start":{"line":4,"column":18},"end":{"line":4,"column":27}},"name":"TypeError"},"arguments":[{"type":"Literal","start":151,"end":190,"loc":{"start":{"line":4,"column":28},"end":{"line":4,"column":67}},"value":"s3: The `acl` option must be a string","raw":"'s3: The `acl` option must be a string'"}]}}]},"alternate":null},{"type":"IfStatement","start":203,"end":326,"loc":{"start":{"line":6,"column":4},"end":{"line":8,"column":5}},"test":{"type":"BinaryExpression","start":207,"end":242,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":43}},"left":{"type":"UnaryExpression","start":207,"end":227,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":28}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":214,"end":227,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":28}},"object":{"type":"Identifier","start":214,"end":220,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":21}},"name":"config"},"property":{"type":"Identifier","start":221,"end":227,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":28}},"name":"getKey"},"computed":false}},"operator":"!==","right":{"type":"Literal","start":232,"end":242,"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":43}},"value":"function","raw":"'function'"}},"consequent":{"type":"BlockStatement","start":244,"end":326,"loc":{"start":{"line":6,"column":45},"end":{"line":8,"column":5}},"body":[{"type":"ThrowStatement","start":254,"end":320,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":74}},"argument":{"type":"NewExpression","start":260,"end":319,"loc":{"start":{"line":7,"column":14},"end":{"line":7,"column":73}},"callee":{"type":"Identifier","start":264,"end":273,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":27}},"name":"TypeError"},"arguments":[{"type":"Literal","start":274,"end":318,"loc":{"start":{"line":7,"column":28},"end":{"line":7,"column":72}},"value":"s3: The `getKey` option must be a function","raw":"'s3: The `getKey` option must be a function'"}]}}]},"alternate":null},{"type":"FunctionDeclaration","start":952,"end":2156,"loc":{"start":{"line":24,"column":4},"end":{"line":57,"column":5}},"id":{"type":"Identifier","start":961,"end":980,"loc":{"start":{"line":24,"column":13},"end":{"line":24,"column":32}},"name":"getUploadParameters"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":981,"end":984,"loc":{"start":{"line":24,"column":33},"end":{"line":24,"column":36}},"name":"req"},{"type":"Identifier","start":986,"end":989,"loc":{"start":{"line":24,"column":38},"end":{"line":24,"column":41}},"name":"res"},{"type":"Identifier","start":991,"end":995,"loc":{"start":{"line":24,"column":43},"end":{"line":24,"column":47}},"name":"next"}],"body":{"type":"BlockStatement","start":997,"end":2156,"loc":{"start":{"line":24,"column":49},"end":{"line":57,"column":5}},"body":[{"type":"VariableDeclaration","start":1099,"end":1137,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":46}},"declarations":[{"type":"VariableDeclarator","start":1105,"end":1136,"loc":{"start":{"line":26,"column":14},"end":{"line":26,"column":45}},"id":{"type":"Identifier","start":1105,"end":1111,"loc":{"start":{"line":26,"column":14},"end":{"line":26,"column":20}},"name":"client"},"init":{"type":"MemberExpression","start":1114,"end":1136,"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":45}},"object":{"type":"MemberExpression","start":1114,"end":1127,"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":36}},"object":{"type":"Identifier","start":1114,"end":1117,"loc":{"start":{"line":26,"column":23},"end":{"line":26,"column":26}},"name":"req"},"property":{"type":"Identifier","start":1118,"end":1127,"loc":{"start":{"line":26,"column":27},"end":{"line":26,"column":36}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1128,"end":1136,"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":45}},"name":"s3Client"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":1146,"end":1188,"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":50}},"declarations":[{"type":"VariableDeclarator","start":1152,"end":1187,"loc":{"start":{"line":27,"column":14},"end":{"line":27,"column":49}},"id":{"type":"Identifier","start":1152,"end":1160,"loc":{"start":{"line":27,"column":14},"end":{"line":27,"column":22}},"name":"metadata"},"init":{"type":"LogicalExpression","start":1163,"end":1187,"loc":{"start":{"line":27,"column":25},"end":{"line":27,"column":49}},"left":{"type":"MemberExpression","start":1163,"end":1181,"loc":{"start":{"line":27,"column":25},"end":{"line":27,"column":43}},"object":{"type":"MemberExpression","start":1163,"end":1172,"loc":{"start":{"line":27,"column":25},"end":{"line":27,"column":34}},"object":{"type":"Identifier","start":1163,"end":1166,"loc":{"start":{"line":27,"column":25},"end":{"line":27,"column":28}},"name":"req"},"property":{"type":"Identifier","start":1167,"end":1172,"loc":{"start":{"line":27,"column":29},"end":{"line":27,"column":34}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":1173,"end":1181,"loc":{"start":{"line":27,"column":35},"end":{"line":27,"column":43}},"name":"metadata"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":1185,"end":1187,"loc":{"start":{"line":27,"column":47},"end":{"line":27,"column":49}},"properties":[]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1197,"end":1258,"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":69}},"declarations":[{"type":"VariableDeclarator","start":1203,"end":1257,"loc":{"start":{"line":28,"column":14},"end":{"line":28,"column":68}},"id":{"type":"Identifier","start":1203,"end":1206,"loc":{"start":{"line":28,"column":14},"end":{"line":28,"column":17}},"name":"key"},"init":{"type":"CallExpression","start":1209,"end":1257,"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":68}},"callee":{"type":"MemberExpression","start":1209,"end":1222,"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":33}},"object":{"type":"Identifier","start":1209,"end":1215,"loc":{"start":{"line":28,"column":20},"end":{"line":28,"column":26}},"name":"config"},"property":{"type":"Identifier","start":1216,"end":1222,"loc":{"start":{"line":28,"column":27},"end":{"line":28,"column":33}},"name":"getKey"},"computed":false},"arguments":[{"type":"Identifier","start":1223,"end":1226,"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":37}},"name":"req"},{"type":"MemberExpression","start":1228,"end":1246,"loc":{"start":{"line":28,"column":39},"end":{"line":28,"column":57}},"object":{"type":"MemberExpression","start":1228,"end":1237,"loc":{"start":{"line":28,"column":39},"end":{"line":28,"column":48}},"object":{"type":"Identifier","start":1228,"end":1231,"loc":{"start":{"line":28,"column":39},"end":{"line":28,"column":42}},"name":"req"},"property":{"type":"Identifier","start":1232,"end":1237,"loc":{"start":{"line":28,"column":43},"end":{"line":28,"column":48}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":1238,"end":1246,"loc":{"start":{"line":28,"column":49},"end":{"line":28,"column":57}},"name":"filename"},"computed":false},{"type":"Identifier","start":1248,"end":1256,"loc":{"start":{"line":28,"column":59},"end":{"line":28,"column":67}},"name":"metadata"}]}}],"kind":"const"},{"type":"IfStatement","start":1267,"end":1415,"loc":{"start":{"line":29,"column":8},"end":{"line":31,"column":9}},"test":{"type":"BinaryExpression","start":1271,"end":1294,"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":35}},"left":{"type":"UnaryExpression","start":1271,"end":1281,"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":22}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":1278,"end":1281,"loc":{"start":{"line":29,"column":19},"end":{"line":29,"column":22}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":1286,"end":1294,"loc":{"start":{"line":29,"column":27},"end":{"line":29,"column":35}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":1296,"end":1415,"loc":{"start":{"line":29,"column":37},"end":{"line":31,"column":9}},"body":[{"type":"ReturnStatement","start":1310,"end":1405,"loc":{"start":{"line":30,"column":12},"end":{"line":30,"column":107}},"argument":{"type":"CallExpression","start":1317,"end":1404,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":106}},"callee":{"type":"MemberExpression","start":1317,"end":1337,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":39}},"object":{"type":"CallExpression","start":1317,"end":1332,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":34}},"callee":{"type":"MemberExpression","start":1317,"end":1327,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":29}},"object":{"type":"Identifier","start":1317,"end":1320,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":22}},"name":"res"},"property":{"type":"Identifier","start":1321,"end":1327,"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1328,"end":1331,"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":33}},"value":500,"raw":"500"}]},"property":{"type":"Identifier","start":1333,"end":1337,"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1338,"end":1403,"loc":{"start":{"line":30,"column":40},"end":{"line":30,"column":105}},"properties":[{"type":"Property","start":1340,"end":1401,"loc":{"start":{"line":30,"column":42},"end":{"line":30,"column":103}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1340,"end":1345,"loc":{"start":{"line":30,"column":42},"end":{"line":30,"column":47}},"name":"error"},"value":{"type":"Literal","start":1347,"end":1401,"loc":{"start":{"line":30,"column":49},"end":{"line":30,"column":103}},"value":"s3: filename returned from `getKey` must be a string","raw":"'s3: filename returned from `getKey` must be a string'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"VariableDeclaration","start":1424,"end":1587,"loc":{"start":{"line":32,"column":8},"end":{"line":37,"column":10}},"declarations":[{"type":"VariableDeclarator","start":1430,"end":1586,"loc":{"start":{"line":32,"column":14},"end":{"line":37,"column":9}},"id":{"type":"Identifier","start":1430,"end":1436,"loc":{"start":{"line":32,"column":14},"end":{"line":32,"column":20}},"name":"fields"},"init":{"type":"ObjectExpression","start":1439,"end":1586,"loc":{"start":{"line":32,"column":23},"end":{"line":37,"column":9}},"properties":[{"type":"Property","start":1453,"end":1468,"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1453,"end":1456,"loc":{"start":{"line":33,"column":12},"end":{"line":33,"column":15}},"name":"acl"},"value":{"type":"MemberExpression","start":1458,"end":1468,"loc":{"start":{"line":33,"column":17},"end":{"line":33,"column":27}},"object":{"type":"Identifier","start":1458,"end":1464,"loc":{"start":{"line":33,"column":17},"end":{"line":33,"column":23}},"name":"config"},"property":{"type":"Identifier","start":1465,"end":1468,"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":27}},"name":"acl"},"computed":false},"kind":"init"},{"type":"Property","start":1482,"end":1490,"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1482,"end":1485,"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":15}},"name":"key"},"value":{"type":"Identifier","start":1487,"end":1490,"loc":{"start":{"line":34,"column":17},"end":{"line":34,"column":20}},"name":"key"},"kind":"init"},{"type":"Property","start":1504,"end":1532,"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":40}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1504,"end":1525,"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"name":"success_action_status"},"value":{"type":"Literal","start":1527,"end":1532,"loc":{"start":{"line":35,"column":35},"end":{"line":35,"column":40}},"value":"201","raw":"'201'"},"kind":"init"},{"type":"Property","start":1546,"end":1576,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":42}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":1546,"end":1560,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":26}},"value":"content-type","raw":"'content-type'"},"value":{"type":"MemberExpression","start":1562,"end":1576,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":42}},"object":{"type":"MemberExpression","start":1562,"end":1571,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":37}},"object":{"type":"Identifier","start":1562,"end":1565,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":31}},"name":"req"},"property":{"type":"Identifier","start":1566,"end":1571,"loc":{"start":{"line":36,"column":32},"end":{"line":36,"column":37}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":1572,"end":1576,"loc":{"start":{"line":36,"column":38},"end":{"line":36,"column":42}},"name":"type"},"computed":false},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1596,"end":1705,"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":11}},"expression":{"type":"CallExpression","start":1596,"end":1704,"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":10}},"callee":{"type":"MemberExpression","start":1596,"end":1625,"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":37}},"object":{"type":"CallExpression","start":1596,"end":1617,"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"callee":{"type":"MemberExpression","start":1596,"end":1607,"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":19}},"object":{"type":"Identifier","start":1596,"end":1602,"loc":{"start":{"line":38,"column":8},"end":{"line":38,"column":14}},"name":"Object"},"property":{"type":"Identifier","start":1603,"end":1607,"loc":{"start":{"line":38,"column":15},"end":{"line":38,"column":19}},"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":1608,"end":1616,"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":28}},"name":"metadata"}]},"property":{"type":"Identifier","start":1618,"end":1625,"loc":{"start":{"line":38,"column":30},"end":{"line":38,"column":37}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1626,"end":1703,"loc":{"start":{"line":38,"column":38},"end":{"line":40,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1627,"end":1630,"loc":{"start":{"line":38,"column":39},"end":{"line":38,"column":42}},"name":"key"}],"body":{"type":"BlockStatement","start":1635,"end":1703,"loc":{"start":{"line":38,"column":47},"end":{"line":40,"column":9}},"body":[{"type":"ExpressionStatement","start":1649,"end":1693,"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":56}},"expression":{"type":"AssignmentExpression","start":1649,"end":1692,"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":55}},"operator":"=","left":{"type":"MemberExpression","start":1649,"end":1676,"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":39}},"object":{"type":"Identifier","start":1649,"end":1655,"loc":{"start":{"line":39,"column":12},"end":{"line":39,"column":18}},"name":"fields"},"property":{"type":"TemplateLiteral","start":1656,"end":1675,"loc":{"start":{"line":39,"column":19},"end":{"line":39,"column":38}},"expressions":[{"type":"Identifier","start":1670,"end":1673,"loc":{"start":{"line":39,"column":33},"end":{"line":39,"column":36}},"name":"key"}],"quasis":[{"type":"TemplateElement","start":1657,"end":1668,"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":31}},"value":{"raw":"x-amz-meta-","cooked":"x-amz-meta-"},"tail":false},{"type":"TemplateElement","start":1674,"end":1674,"loc":{"start":{"line":39,"column":37},"end":{"line":39,"column":37}},"value":{"raw":"","cooked":""},"tail":true}]},"computed":true},"right":{"type":"MemberExpression","start":1679,"end":1692,"loc":{"start":{"line":39,"column":42},"end":{"line":39,"column":55}},"object":{"type":"Identifier","start":1679,"end":1687,"loc":{"start":{"line":39,"column":42},"end":{"line":39,"column":50}},"name":"metadata"},"property":{"type":"Identifier","start":1688,"end":1691,"loc":{"start":{"line":39,"column":51},"end":{"line":39,"column":54}},"name":"key"},"computed":true}}}]}}]}},{"type":"ExpressionStatement","start":1714,"end":2150,"loc":{"start":{"line":41,"column":8},"end":{"line":56,"column":11}},"expression":{"type":"CallExpression","start":1714,"end":2149,"loc":{"start":{"line":41,"column":8},"end":{"line":56,"column":10}},"callee":{"type":"MemberExpression","start":1714,"end":1740,"loc":{"start":{"line":41,"column":8},"end":{"line":41,"column":34}},"object":{"type":"Identifier","start":1714,"end":1720,"loc":{"start":{"line":41,"column":8},"end":{"line":41,"column":14}},"name":"client"},"property":{"type":"Identifier","start":1721,"end":1740,"loc":{"start":{"line":41,"column":15},"end":{"line":41,"column":34}},"name":"createPresignedPost"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1741,"end":1894,"loc":{"start":{"line":41,"column":35},"end":{"line":46,"column":9}},"properties":[{"type":"Property","start":1755,"end":1776,"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1755,"end":1761,"loc":{"start":{"line":42,"column":12},"end":{"line":42,"column":18}},"name":"Bucket"},"value":{"type":"MemberExpression","start":1763,"end":1776,"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":33}},"object":{"type":"Identifier","start":1763,"end":1769,"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":26}},"name":"config"},"property":{"type":"Identifier","start":1770,"end":1776,"loc":{"start":{"line":42,"column":27},"end":{"line":42,"column":33}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":1790,"end":1813,"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1790,"end":1797,"loc":{"start":{"line":43,"column":12},"end":{"line":43,"column":19}},"name":"Expires"},"value":{"type":"MemberExpression","start":1799,"end":1813,"loc":{"start":{"line":43,"column":21},"end":{"line":43,"column":35}},"object":{"type":"Identifier","start":1799,"end":1805,"loc":{"start":{"line":43,"column":21},"end":{"line":43,"column":27}},"name":"config"},"property":{"type":"Identifier","start":1806,"end":1813,"loc":{"start":{"line":43,"column":28},"end":{"line":43,"column":35}},"name":"expires"},"computed":false},"kind":"init"},{"type":"Property","start":1827,"end":1841,"loc":{"start":{"line":44,"column":12},"end":{"line":44,"column":26}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1827,"end":1833,"loc":{"start":{"line":44,"column":12},"end":{"line":44,"column":18}},"name":"Fields"},"value":{"type":"Identifier","start":1835,"end":1841,"loc":{"start":{"line":44,"column":20},"end":{"line":44,"column":26}},"name":"fields"},"kind":"init"},{"type":"Property","start":1855,"end":1884,"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":41}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1855,"end":1865,"loc":{"start":{"line":45,"column":12},"end":{"line":45,"column":22}},"name":"Conditions"},"value":{"type":"MemberExpression","start":1867,"end":1884,"loc":{"start":{"line":45,"column":24},"end":{"line":45,"column":41}},"object":{"type":"Identifier","start":1867,"end":1873,"loc":{"start":{"line":45,"column":24},"end":{"line":45,"column":30}},"name":"config"},"property":{"type":"Identifier","start":1874,"end":1884,"loc":{"start":{"line":45,"column":31},"end":{"line":45,"column":41}},"name":"conditions"},"computed":false},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":1896,"end":2148,"loc":{"start":{"line":46,"column":11},"end":{"line":56,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1897,"end":1900,"loc":{"start":{"line":46,"column":12},"end":{"line":46,"column":15}},"name":"err"},{"type":"Identifier","start":1902,"end":1906,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":21}},"name":"data"}],"body":{"type":"BlockStatement","start":1911,"end":2148,"loc":{"start":{"line":46,"column":26},"end":{"line":56,"column":9}},"body":[{"type":"IfStatement","start":1925,"end":2000,"loc":{"start":{"line":47,"column":12},"end":{"line":50,"column":13}},"test":{"type":"Identifier","start":1929,"end":1932,"loc":{"start":{"line":47,"column":16},"end":{"line":47,"column":19}},"name":"err"},"consequent":{"type":"BlockStatement","start":1934,"end":2000,"loc":{"start":{"line":47,"column":21},"end":{"line":50,"column":13}},"body":[{"type":"ExpressionStatement","start":1952,"end":1962,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":26}},"expression":{"type":"CallExpression","start":1952,"end":1961,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":25}},"callee":{"type":"Identifier","start":1952,"end":1956,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":20}},"name":"next"},"arguments":[{"type":"Identifier","start":1957,"end":1960,"loc":{"start":{"line":48,"column":21},"end":{"line":48,"column":24}},"name":"err"}]}},{"type":"ReturnStatement","start":1979,"end":1986,"loc":{"start":{"line":49,"column":16},"end":{"line":49,"column":23}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":2013,"end":2138,"loc":{"start":{"line":51,"column":12},"end":{"line":55,"column":15}},"expression":{"type":"CallExpression","start":2013,"end":2137,"loc":{"start":{"line":51,"column":12},"end":{"line":55,"column":14}},"callee":{"type":"MemberExpression","start":2013,"end":2021,"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":20}},"object":{"type":"Identifier","start":2013,"end":2016,"loc":{"start":{"line":51,"column":12},"end":{"line":51,"column":15}},"name":"res"},"property":{"type":"Identifier","start":2017,"end":2021,"loc":{"start":{"line":51,"column":16},"end":{"line":51,"column":20}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2022,"end":2136,"loc":{"start":{"line":51,"column":21},"end":{"line":55,"column":13}},"properties":[{"type":"Property","start":2040,"end":2054,"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2040,"end":2046,"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":22}},"name":"method"},"value":{"type":"Literal","start":2048,"end":2054,"loc":{"start":{"line":52,"column":24},"end":{"line":52,"column":30}},"value":"post","raw":"'post'"},"kind":"init"},{"type":"Property","start":2072,"end":2085,"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2072,"end":2075,"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":19}},"name":"url"},"value":{"type":"MemberExpression","start":2077,"end":2085,"loc":{"start":{"line":53,"column":21},"end":{"line":53,"column":29}},"object":{"type":"Identifier","start":2077,"end":2081,"loc":{"start":{"line":53,"column":21},"end":{"line":53,"column":25}},"name":"data"},"property":{"type":"Identifier","start":2082,"end":2085,"loc":{"start":{"line":53,"column":26},"end":{"line":53,"column":29}},"name":"url"},"computed":false},"kind":"init"},{"type":"Property","start":2103,"end":2122,"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2103,"end":2109,"loc":{"start":{"line":54,"column":16},"end":{"line":54,"column":22}},"name":"fields"},"value":{"type":"MemberExpression","start":2111,"end":2122,"loc":{"start":{"line":54,"column":24},"end":{"line":54,"column":35}},"object":{"type":"Identifier","start":2111,"end":2115,"loc":{"start":{"line":54,"column":24},"end":{"line":54,"column":28}},"name":"data"},"property":{"type":"Identifier","start":2116,"end":2122,"loc":{"start":{"line":54,"column":29},"end":{"line":54,"column":35}},"name":"fields"},"computed":false},"kind":"init"}]}]}}]}}]}}]}},{"type":"FunctionDeclaration","start":2781,"end":3861,"loc":{"start":{"line":72,"column":4},"end":{"line":100,"column":5}},"id":{"type":"Identifier","start":2790,"end":2811,"loc":{"start":{"line":72,"column":13},"end":{"line":72,"column":34}},"name":"createMultipartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2812,"end":2815,"loc":{"start":{"line":72,"column":35},"end":{"line":72,"column":38}},"name":"req"},{"type":"Identifier","start":2817,"end":2820,"loc":{"start":{"line":72,"column":40},"end":{"line":72,"column":43}},"name":"res"},{"type":"Identifier","start":2822,"end":2826,"loc":{"start":{"line":72,"column":45},"end":{"line":72,"column":49}},"name":"next"}],"body":{"type":"BlockStatement","start":2828,"end":3861,"loc":{"start":{"line":72,"column":51},"end":{"line":100,"column":5}},"body":[{"type":"VariableDeclaration","start":2930,"end":2968,"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":46}},"declarations":[{"type":"VariableDeclarator","start":2936,"end":2967,"loc":{"start":{"line":74,"column":14},"end":{"line":74,"column":45}},"id":{"type":"Identifier","start":2936,"end":2942,"loc":{"start":{"line":74,"column":14},"end":{"line":74,"column":20}},"name":"client"},"init":{"type":"MemberExpression","start":2945,"end":2967,"loc":{"start":{"line":74,"column":23},"end":{"line":74,"column":45}},"object":{"type":"MemberExpression","start":2945,"end":2958,"loc":{"start":{"line":74,"column":23},"end":{"line":74,"column":36}},"object":{"type":"Identifier","start":2945,"end":2948,"loc":{"start":{"line":74,"column":23},"end":{"line":74,"column":26}},"name":"req"},"property":{"type":"Identifier","start":2949,"end":2958,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":36}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":2959,"end":2967,"loc":{"start":{"line":74,"column":37},"end":{"line":74,"column":45}},"name":"s3Client"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":2977,"end":3052,"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":83}},"declarations":[{"type":"VariableDeclarator","start":2983,"end":3051,"loc":{"start":{"line":75,"column":14},"end":{"line":75,"column":82}},"id":{"type":"Identifier","start":2983,"end":2986,"loc":{"start":{"line":75,"column":14},"end":{"line":75,"column":17}},"name":"key"},"init":{"type":"CallExpression","start":2989,"end":3051,"loc":{"start":{"line":75,"column":20},"end":{"line":75,"column":82}},"callee":{"type":"MemberExpression","start":2989,"end":3002,"loc":{"start":{"line":75,"column":20},"end":{"line":75,"column":33}},"object":{"type":"Identifier","start":2989,"end":2995,"loc":{"start":{"line":75,"column":20},"end":{"line":75,"column":26}},"name":"config"},"property":{"type":"Identifier","start":2996,"end":3002,"loc":{"start":{"line":75,"column":27},"end":{"line":75,"column":33}},"name":"getKey"},"computed":false},"arguments":[{"type":"Identifier","start":3003,"end":3006,"loc":{"start":{"line":75,"column":34},"end":{"line":75,"column":37}},"name":"req"},{"type":"MemberExpression","start":3008,"end":3025,"loc":{"start":{"line":75,"column":39},"end":{"line":75,"column":56}},"object":{"type":"MemberExpression","start":3008,"end":3016,"loc":{"start":{"line":75,"column":39},"end":{"line":75,"column":47}},"object":{"type":"Identifier","start":3008,"end":3011,"loc":{"start":{"line":75,"column":39},"end":{"line":75,"column":42}},"name":"req"},"property":{"type":"Identifier","start":3012,"end":3016,"loc":{"start":{"line":75,"column":43},"end":{"line":75,"column":47}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3017,"end":3025,"loc":{"start":{"line":75,"column":48},"end":{"line":75,"column":56}},"name":"filename"},"computed":false},{"type":"LogicalExpression","start":3027,"end":3050,"loc":{"start":{"line":75,"column":58},"end":{"line":75,"column":81}},"left":{"type":"MemberExpression","start":3027,"end":3044,"loc":{"start":{"line":75,"column":58},"end":{"line":75,"column":75}},"object":{"type":"MemberExpression","start":3027,"end":3035,"loc":{"start":{"line":75,"column":58},"end":{"line":75,"column":66}},"object":{"type":"Identifier","start":3027,"end":3030,"loc":{"start":{"line":75,"column":58},"end":{"line":75,"column":61}},"name":"req"},"property":{"type":"Identifier","start":3031,"end":3035,"loc":{"start":{"line":75,"column":62},"end":{"line":75,"column":66}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3036,"end":3044,"loc":{"start":{"line":75,"column":67},"end":{"line":75,"column":75}},"name":"metadata"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":3048,"end":3050,"loc":{"start":{"line":75,"column":79},"end":{"line":75,"column":81}},"properties":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","start":3061,"end":3097,"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":44}},"declarations":[{"type":"VariableDeclarator","start":3067,"end":3096,"loc":{"start":{"line":76,"column":14},"end":{"line":76,"column":43}},"id":{"type":"ObjectPattern","start":3067,"end":3085,"loc":{"start":{"line":76,"column":14},"end":{"line":76,"column":32}},"properties":[{"type":"Property","start":3069,"end":3073,"loc":{"start":{"line":76,"column":16},"end":{"line":76,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3069,"end":3073,"loc":{"start":{"line":76,"column":16},"end":{"line":76,"column":20}},"name":"type"},"kind":"init","value":{"type":"Identifier","start":3069,"end":3073,"loc":{"start":{"line":76,"column":16},"end":{"line":76,"column":20}},"name":"type"}},{"type":"Property","start":3075,"end":3083,"loc":{"start":{"line":76,"column":22},"end":{"line":76,"column":30}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3075,"end":3083,"loc":{"start":{"line":76,"column":22},"end":{"line":76,"column":30}},"name":"metadata"},"kind":"init","value":{"type":"Identifier","start":3075,"end":3083,"loc":{"start":{"line":76,"column":22},"end":{"line":76,"column":30}},"name":"metadata"}}]},"init":{"type":"MemberExpression","start":3088,"end":3096,"loc":{"start":{"line":76,"column":35},"end":{"line":76,"column":43}},"object":{"type":"Identifier","start":3088,"end":3091,"loc":{"start":{"line":76,"column":35},"end":{"line":76,"column":38}},"name":"req"},"property":{"type":"Identifier","start":3092,"end":3096,"loc":{"start":{"line":76,"column":39},"end":{"line":76,"column":43}},"name":"body"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":3106,"end":3254,"loc":{"start":{"line":77,"column":8},"end":{"line":79,"column":9}},"test":{"type":"BinaryExpression","start":3110,"end":3133,"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":35}},"left":{"type":"UnaryExpression","start":3110,"end":3120,"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":22}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":3117,"end":3120,"loc":{"start":{"line":77,"column":19},"end":{"line":77,"column":22}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":3125,"end":3133,"loc":{"start":{"line":77,"column":27},"end":{"line":77,"column":35}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":3135,"end":3254,"loc":{"start":{"line":77,"column":37},"end":{"line":79,"column":9}},"body":[{"type":"ReturnStatement","start":3149,"end":3244,"loc":{"start":{"line":78,"column":12},"end":{"line":78,"column":107}},"argument":{"type":"CallExpression","start":3156,"end":3243,"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":106}},"callee":{"type":"MemberExpression","start":3156,"end":3176,"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":39}},"object":{"type":"CallExpression","start":3156,"end":3171,"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":34}},"callee":{"type":"MemberExpression","start":3156,"end":3166,"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":29}},"object":{"type":"Identifier","start":3156,"end":3159,"loc":{"start":{"line":78,"column":19},"end":{"line":78,"column":22}},"name":"res"},"property":{"type":"Identifier","start":3160,"end":3166,"loc":{"start":{"line":78,"column":23},"end":{"line":78,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":3167,"end":3170,"loc":{"start":{"line":78,"column":30},"end":{"line":78,"column":33}},"value":500,"raw":"500"}]},"property":{"type":"Identifier","start":3172,"end":3176,"loc":{"start":{"line":78,"column":35},"end":{"line":78,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3177,"end":3242,"loc":{"start":{"line":78,"column":40},"end":{"line":78,"column":105}},"properties":[{"type":"Property","start":3179,"end":3240,"loc":{"start":{"line":78,"column":42},"end":{"line":78,"column":103}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3179,"end":3184,"loc":{"start":{"line":78,"column":42},"end":{"line":78,"column":47}},"name":"error"},"value":{"type":"Literal","start":3186,"end":3240,"loc":{"start":{"line":78,"column":49},"end":{"line":78,"column":103}},"value":"s3: filename returned from `getKey` must be a string","raw":"'s3: filename returned from `getKey` must be a string'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":3263,"end":3393,"loc":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"test":{"type":"BinaryExpression","start":3267,"end":3291,"loc":{"start":{"line":80,"column":12},"end":{"line":80,"column":36}},"left":{"type":"UnaryExpression","start":3267,"end":3278,"loc":{"start":{"line":80,"column":12},"end":{"line":80,"column":23}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":3274,"end":3278,"loc":{"start":{"line":80,"column":19},"end":{"line":80,"column":23}},"name":"type"}},"operator":"!==","right":{"type":"Literal","start":3283,"end":3291,"loc":{"start":{"line":80,"column":28},"end":{"line":80,"column":36}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":3293,"end":3393,"loc":{"start":{"line":80,"column":38},"end":{"line":82,"column":9}},"body":[{"type":"ReturnStatement","start":3307,"end":3383,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":88}},"argument":{"type":"CallExpression","start":3314,"end":3382,"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":87}},"callee":{"type":"MemberExpression","start":3314,"end":3334,"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":39}},"object":{"type":"CallExpression","start":3314,"end":3329,"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":34}},"callee":{"type":"MemberExpression","start":3314,"end":3324,"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":29}},"object":{"type":"Identifier","start":3314,"end":3317,"loc":{"start":{"line":81,"column":19},"end":{"line":81,"column":22}},"name":"res"},"property":{"type":"Identifier","start":3318,"end":3324,"loc":{"start":{"line":81,"column":23},"end":{"line":81,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":3325,"end":3328,"loc":{"start":{"line":81,"column":30},"end":{"line":81,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":3330,"end":3334,"loc":{"start":{"line":81,"column":35},"end":{"line":81,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3335,"end":3381,"loc":{"start":{"line":81,"column":40},"end":{"line":81,"column":86}},"properties":[{"type":"Property","start":3337,"end":3379,"loc":{"start":{"line":81,"column":42},"end":{"line":81,"column":84}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3337,"end":3342,"loc":{"start":{"line":81,"column":42},"end":{"line":81,"column":47}},"name":"error"},"value":{"type":"Literal","start":3344,"end":3379,"loc":{"start":{"line":81,"column":49},"end":{"line":81,"column":84}},"value":"s3: content type must be a string","raw":"'s3: content type must be a string'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":3402,"end":3855,"loc":{"start":{"line":83,"column":8},"end":{"line":99,"column":11}},"expression":{"type":"CallExpression","start":3402,"end":3854,"loc":{"start":{"line":83,"column":8},"end":{"line":99,"column":10}},"callee":{"type":"MemberExpression","start":3402,"end":3430,"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":36}},"object":{"type":"Identifier","start":3402,"end":3408,"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":14}},"name":"client"},"property":{"type":"Identifier","start":3409,"end":3430,"loc":{"start":{"line":83,"column":15},"end":{"line":83,"column":36}},"name":"createMultipartUpload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3431,"end":3627,"loc":{"start":{"line":83,"column":37},"end":{"line":90,"column":9}},"properties":[{"type":"Property","start":3445,"end":3466,"loc":{"start":{"line":84,"column":12},"end":{"line":84,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3445,"end":3451,"loc":{"start":{"line":84,"column":12},"end":{"line":84,"column":18}},"name":"Bucket"},"value":{"type":"MemberExpression","start":3453,"end":3466,"loc":{"start":{"line":84,"column":20},"end":{"line":84,"column":33}},"object":{"type":"Identifier","start":3453,"end":3459,"loc":{"start":{"line":84,"column":20},"end":{"line":84,"column":26}},"name":"config"},"property":{"type":"Identifier","start":3460,"end":3466,"loc":{"start":{"line":84,"column":27},"end":{"line":84,"column":33}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":3480,"end":3488,"loc":{"start":{"line":85,"column":12},"end":{"line":85,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3480,"end":3483,"loc":{"start":{"line":85,"column":12},"end":{"line":85,"column":15}},"name":"Key"},"value":{"type":"Identifier","start":3485,"end":3488,"loc":{"start":{"line":85,"column":17},"end":{"line":85,"column":20}},"name":"key"},"kind":"init"},{"type":"Property","start":3502,"end":3517,"loc":{"start":{"line":86,"column":12},"end":{"line":86,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3502,"end":3505,"loc":{"start":{"line":86,"column":12},"end":{"line":86,"column":15}},"name":"ACL"},"value":{"type":"MemberExpression","start":3507,"end":3517,"loc":{"start":{"line":86,"column":17},"end":{"line":86,"column":27}},"object":{"type":"Identifier","start":3507,"end":3513,"loc":{"start":{"line":86,"column":17},"end":{"line":86,"column":23}},"name":"config"},"property":{"type":"Identifier","start":3514,"end":3517,"loc":{"start":{"line":86,"column":24},"end":{"line":86,"column":27}},"name":"acl"},"computed":false},"kind":"init"},{"type":"Property","start":3531,"end":3548,"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3531,"end":3542,"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":23}},"name":"ContentType"},"value":{"type":"Identifier","start":3544,"end":3548,"loc":{"start":{"line":87,"column":25},"end":{"line":87,"column":29}},"name":"type"},"kind":"init"},{"type":"Property","start":3562,"end":3580,"loc":{"start":{"line":88,"column":12},"end":{"line":88,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3562,"end":3570,"loc":{"start":{"line":88,"column":12},"end":{"line":88,"column":20}},"name":"Metadata"},"value":{"type":"Identifier","start":3572,"end":3580,"loc":{"start":{"line":88,"column":22},"end":{"line":88,"column":30}},"name":"metadata"},"kind":"init"},{"type":"Property","start":3594,"end":3617,"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3594,"end":3601,"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":19}},"name":"Expires"},"value":{"type":"MemberExpression","start":3603,"end":3617,"loc":{"start":{"line":89,"column":21},"end":{"line":89,"column":35}},"object":{"type":"Identifier","start":3603,"end":3609,"loc":{"start":{"line":89,"column":21},"end":{"line":89,"column":27}},"name":"config"},"property":{"type":"Identifier","start":3610,"end":3617,"loc":{"start":{"line":89,"column":28},"end":{"line":89,"column":35}},"name":"expires"},"computed":false},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":3629,"end":3853,"loc":{"start":{"line":90,"column":11},"end":{"line":99,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3630,"end":3633,"loc":{"start":{"line":90,"column":12},"end":{"line":90,"column":15}},"name":"err"},{"type":"Identifier","start":3635,"end":3639,"loc":{"start":{"line":90,"column":17},"end":{"line":90,"column":21}},"name":"data"}],"body":{"type":"BlockStatement","start":3644,"end":3853,"loc":{"start":{"line":90,"column":26},"end":{"line":99,"column":9}},"body":[{"type":"IfStatement","start":3658,"end":3733,"loc":{"start":{"line":91,"column":12},"end":{"line":94,"column":13}},"test":{"type":"Identifier","start":3662,"end":3665,"loc":{"start":{"line":91,"column":16},"end":{"line":91,"column":19}},"name":"err"},"consequent":{"type":"BlockStatement","start":3667,"end":3733,"loc":{"start":{"line":91,"column":21},"end":{"line":94,"column":13}},"body":[{"type":"ExpressionStatement","start":3685,"end":3695,"loc":{"start":{"line":92,"column":16},"end":{"line":92,"column":26}},"expression":{"type":"CallExpression","start":3685,"end":3694,"loc":{"start":{"line":92,"column":16},"end":{"line":92,"column":25}},"callee":{"type":"Identifier","start":3685,"end":3689,"loc":{"start":{"line":92,"column":16},"end":{"line":92,"column":20}},"name":"next"},"arguments":[{"type":"Identifier","start":3690,"end":3693,"loc":{"start":{"line":92,"column":21},"end":{"line":92,"column":24}},"name":"err"}]}},{"type":"ReturnStatement","start":3712,"end":3719,"loc":{"start":{"line":93,"column":16},"end":{"line":93,"column":23}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":3746,"end":3843,"loc":{"start":{"line":95,"column":12},"end":{"line":98,"column":15}},"expression":{"type":"CallExpression","start":3746,"end":3842,"loc":{"start":{"line":95,"column":12},"end":{"line":98,"column":14}},"callee":{"type":"MemberExpression","start":3746,"end":3754,"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":20}},"object":{"type":"Identifier","start":3746,"end":3749,"loc":{"start":{"line":95,"column":12},"end":{"line":95,"column":15}},"name":"res"},"property":{"type":"Identifier","start":3750,"end":3754,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":20}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3755,"end":3841,"loc":{"start":{"line":95,"column":21},"end":{"line":98,"column":13}},"properties":[{"type":"Property","start":3773,"end":3786,"loc":{"start":{"line":96,"column":16},"end":{"line":96,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3773,"end":3776,"loc":{"start":{"line":96,"column":16},"end":{"line":96,"column":19}},"name":"key"},"value":{"type":"MemberExpression","start":3778,"end":3786,"loc":{"start":{"line":96,"column":21},"end":{"line":96,"column":29}},"object":{"type":"Identifier","start":3778,"end":3782,"loc":{"start":{"line":96,"column":21},"end":{"line":96,"column":25}},"name":"data"},"property":{"type":"Identifier","start":3783,"end":3786,"loc":{"start":{"line":96,"column":26},"end":{"line":96,"column":29}},"name":"Key"},"computed":false},"kind":"init"},{"type":"Property","start":3804,"end":3827,"loc":{"start":{"line":97,"column":16},"end":{"line":97,"column":39}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3804,"end":3812,"loc":{"start":{"line":97,"column":16},"end":{"line":97,"column":24}},"name":"uploadId"},"value":{"type":"MemberExpression","start":3814,"end":3827,"loc":{"start":{"line":97,"column":26},"end":{"line":97,"column":39}},"object":{"type":"Identifier","start":3814,"end":3818,"loc":{"start":{"line":97,"column":26},"end":{"line":97,"column":30}},"name":"data"},"property":{"type":"Identifier","start":3819,"end":3827,"loc":{"start":{"line":97,"column":31},"end":{"line":97,"column":39}},"name":"UploadId"},"computed":false},"kind":"init"}]}]}}]}}]}}]}},{"type":"FunctionDeclaration","start":4367,"end":5593,"loc":{"start":{"line":114,"column":4},"end":{"line":148,"column":5}},"id":{"type":"Identifier","start":4376,"end":4392,"loc":{"start":{"line":114,"column":13},"end":{"line":114,"column":29}},"name":"getUploadedParts"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4393,"end":4396,"loc":{"start":{"line":114,"column":30},"end":{"line":114,"column":33}},"name":"req"},{"type":"Identifier","start":4398,"end":4401,"loc":{"start":{"line":114,"column":35},"end":{"line":114,"column":38}},"name":"res"},{"type":"Identifier","start":4403,"end":4407,"loc":{"start":{"line":114,"column":40},"end":{"line":114,"column":44}},"name":"next"}],"body":{"type":"BlockStatement","start":4409,"end":5593,"loc":{"start":{"line":114,"column":46},"end":{"line":148,"column":5}},"body":[{"type":"VariableDeclaration","start":4511,"end":4549,"loc":{"start":{"line":116,"column":8},"end":{"line":116,"column":46}},"declarations":[{"type":"VariableDeclarator","start":4517,"end":4548,"loc":{"start":{"line":116,"column":14},"end":{"line":116,"column":45}},"id":{"type":"Identifier","start":4517,"end":4523,"loc":{"start":{"line":116,"column":14},"end":{"line":116,"column":20}},"name":"client"},"init":{"type":"MemberExpression","start":4526,"end":4548,"loc":{"start":{"line":116,"column":23},"end":{"line":116,"column":45}},"object":{"type":"MemberExpression","start":4526,"end":4539,"loc":{"start":{"line":116,"column":23},"end":{"line":116,"column":36}},"object":{"type":"Identifier","start":4526,"end":4529,"loc":{"start":{"line":116,"column":23},"end":{"line":116,"column":26}},"name":"req"},"property":{"type":"Identifier","start":4530,"end":4539,"loc":{"start":{"line":116,"column":27},"end":{"line":116,"column":36}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":4540,"end":4548,"loc":{"start":{"line":116,"column":37},"end":{"line":116,"column":45}},"name":"s3Client"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":4558,"end":4590,"loc":{"start":{"line":117,"column":8},"end":{"line":117,"column":40}},"declarations":[{"type":"VariableDeclarator","start":4564,"end":4589,"loc":{"start":{"line":117,"column":14},"end":{"line":117,"column":39}},"id":{"type":"ObjectPattern","start":4564,"end":4576,"loc":{"start":{"line":117,"column":14},"end":{"line":117,"column":26}},"properties":[{"type":"Property","start":4566,"end":4574,"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4566,"end":4574,"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":24}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":4566,"end":4574,"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":24}},"name":"uploadId"}}]},"init":{"type":"MemberExpression","start":4579,"end":4589,"loc":{"start":{"line":117,"column":29},"end":{"line":117,"column":39}},"object":{"type":"Identifier","start":4579,"end":4582,"loc":{"start":{"line":117,"column":29},"end":{"line":117,"column":32}},"name":"req"},"property":{"type":"Identifier","start":4583,"end":4589,"loc":{"start":{"line":117,"column":33},"end":{"line":117,"column":39}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":4599,"end":4625,"loc":{"start":{"line":118,"column":8},"end":{"line":118,"column":34}},"declarations":[{"type":"VariableDeclarator","start":4605,"end":4624,"loc":{"start":{"line":118,"column":14},"end":{"line":118,"column":33}},"id":{"type":"ObjectPattern","start":4605,"end":4612,"loc":{"start":{"line":118,"column":14},"end":{"line":118,"column":21}},"properties":[{"type":"Property","start":4607,"end":4610,"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":19}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4607,"end":4610,"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":19}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":4607,"end":4610,"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":19}},"name":"key"}}]},"init":{"type":"MemberExpression","start":4615,"end":4624,"loc":{"start":{"line":118,"column":24},"end":{"line":118,"column":33}},"object":{"type":"Identifier","start":4615,"end":4618,"loc":{"start":{"line":118,"column":24},"end":{"line":118,"column":27}},"name":"req"},"property":{"type":"Identifier","start":4619,"end":4624,"loc":{"start":{"line":118,"column":28},"end":{"line":118,"column":33}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":4634,"end":4813,"loc":{"start":{"line":119,"column":8},"end":{"line":121,"column":9}},"test":{"type":"BinaryExpression","start":4638,"end":4661,"loc":{"start":{"line":119,"column":12},"end":{"line":119,"column":35}},"left":{"type":"UnaryExpression","start":4638,"end":4648,"loc":{"start":{"line":119,"column":12},"end":{"line":119,"column":22}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":4645,"end":4648,"loc":{"start":{"line":119,"column":19},"end":{"line":119,"column":22}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":4653,"end":4661,"loc":{"start":{"line":119,"column":27},"end":{"line":119,"column":35}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":4663,"end":4813,"loc":{"start":{"line":119,"column":37},"end":{"line":121,"column":9}},"body":[{"type":"ReturnStatement","start":4677,"end":4803,"loc":{"start":{"line":120,"column":12},"end":{"line":120,"column":138}},"argument":{"type":"CallExpression","start":4684,"end":4802,"loc":{"start":{"line":120,"column":19},"end":{"line":120,"column":137}},"callee":{"type":"MemberExpression","start":4684,"end":4704,"loc":{"start":{"line":120,"column":19},"end":{"line":120,"column":39}},"object":{"type":"CallExpression","start":4684,"end":4699,"loc":{"start":{"line":120,"column":19},"end":{"line":120,"column":34}},"callee":{"type":"MemberExpression","start":4684,"end":4694,"loc":{"start":{"line":120,"column":19},"end":{"line":120,"column":29}},"object":{"type":"Identifier","start":4684,"end":4687,"loc":{"start":{"line":120,"column":19},"end":{"line":120,"column":22}},"name":"res"},"property":{"type":"Identifier","start":4688,"end":4694,"loc":{"start":{"line":120,"column":23},"end":{"line":120,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":4695,"end":4698,"loc":{"start":{"line":120,"column":30},"end":{"line":120,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":4700,"end":4704,"loc":{"start":{"line":120,"column":35},"end":{"line":120,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":4705,"end":4801,"loc":{"start":{"line":120,"column":40},"end":{"line":120,"column":136}},"properties":[{"type":"Property","start":4707,"end":4799,"loc":{"start":{"line":120,"column":42},"end":{"line":120,"column":134}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4707,"end":4712,"loc":{"start":{"line":120,"column":42},"end":{"line":120,"column":47}},"name":"error"},"value":{"type":"Literal","start":4714,"end":4799,"loc":{"start":{"line":120,"column":49},"end":{"line":120,"column":134}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"VariableDeclaration","start":4822,"end":4837,"loc":{"start":{"line":122,"column":8},"end":{"line":122,"column":23}},"declarations":[{"type":"VariableDeclarator","start":4826,"end":4836,"loc":{"start":{"line":122,"column":12},"end":{"line":122,"column":22}},"id":{"type":"Identifier","start":4826,"end":4831,"loc":{"start":{"line":122,"column":12},"end":{"line":122,"column":17}},"name":"parts"},"init":{"type":"ArrayExpression","start":4834,"end":4836,"loc":{"start":{"line":122,"column":20},"end":{"line":122,"column":22}},"elements":[]}}],"kind":"let"},{"type":"ExpressionStatement","start":4846,"end":4863,"loc":{"start":{"line":123,"column":8},"end":{"line":123,"column":25}},"expression":{"type":"CallExpression","start":4846,"end":4862,"loc":{"start":{"line":123,"column":8},"end":{"line":123,"column":24}},"callee":{"type":"Identifier","start":4846,"end":4859,"loc":{"start":{"line":123,"column":8},"end":{"line":123,"column":21}},"name":"listPartsPage"},"arguments":[{"type":"Literal","start":4860,"end":4861,"loc":{"start":{"line":123,"column":22},"end":{"line":123,"column":23}},"value":0,"raw":"0"}]}},{"type":"FunctionDeclaration","start":4872,"end":5522,"loc":{"start":{"line":124,"column":8},"end":{"line":144,"column":9}},"id":{"type":"Identifier","start":4881,"end":4894,"loc":{"start":{"line":124,"column":17},"end":{"line":124,"column":30}},"name":"listPartsPage"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4895,"end":4902,"loc":{"start":{"line":124,"column":31},"end":{"line":124,"column":38}},"name":"startAt"}],"body":{"type":"BlockStatement","start":4904,"end":5522,"loc":{"start":{"line":124,"column":40},"end":{"line":144,"column":9}},"body":[{"type":"ExpressionStatement","start":4918,"end":5512,"loc":{"start":{"line":125,"column":12},"end":{"line":143,"column":15}},"expression":{"type":"CallExpression","start":4918,"end":5511,"loc":{"start":{"line":125,"column":12},"end":{"line":143,"column":14}},"callee":{"type":"MemberExpression","start":4918,"end":4934,"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":28}},"object":{"type":"Identifier","start":4918,"end":4924,"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":18}},"name":"client"},"property":{"type":"Identifier","start":4925,"end":4934,"loc":{"start":{"line":125,"column":19},"end":{"line":125,"column":28}},"name":"listParts"},"computed":false},"arguments":[{"type":"ObjectExpression","start":4935,"end":5093,"loc":{"start":{"line":125,"column":29},"end":{"line":130,"column":13}},"properties":[{"type":"Property","start":4953,"end":4974,"loc":{"start":{"line":126,"column":16},"end":{"line":126,"column":37}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4953,"end":4959,"loc":{"start":{"line":126,"column":16},"end":{"line":126,"column":22}},"name":"Bucket"},"value":{"type":"MemberExpression","start":4961,"end":4974,"loc":{"start":{"line":126,"column":24},"end":{"line":126,"column":37}},"object":{"type":"Identifier","start":4961,"end":4967,"loc":{"start":{"line":126,"column":24},"end":{"line":126,"column":30}},"name":"config"},"property":{"type":"Identifier","start":4968,"end":4974,"loc":{"start":{"line":126,"column":31},"end":{"line":126,"column":37}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":4992,"end":5000,"loc":{"start":{"line":127,"column":16},"end":{"line":127,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4992,"end":4995,"loc":{"start":{"line":127,"column":16},"end":{"line":127,"column":19}},"name":"Key"},"value":{"type":"Identifier","start":4997,"end":5000,"loc":{"start":{"line":127,"column":21},"end":{"line":127,"column":24}},"name":"key"},"kind":"init"},{"type":"Property","start":5018,"end":5036,"loc":{"start":{"line":128,"column":16},"end":{"line":128,"column":34}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5018,"end":5026,"loc":{"start":{"line":128,"column":16},"end":{"line":128,"column":24}},"name":"UploadId"},"value":{"type":"Identifier","start":5028,"end":5036,"loc":{"start":{"line":128,"column":26},"end":{"line":128,"column":34}},"name":"uploadId"},"kind":"init"},{"type":"Property","start":5054,"end":5079,"loc":{"start":{"line":129,"column":16},"end":{"line":129,"column":41}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5054,"end":5070,"loc":{"start":{"line":129,"column":16},"end":{"line":129,"column":32}},"name":"PartNumberMarker"},"value":{"type":"Identifier","start":5072,"end":5079,"loc":{"start":{"line":129,"column":34},"end":{"line":129,"column":41}},"name":"startAt"},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":5095,"end":5510,"loc":{"start":{"line":130,"column":15},"end":{"line":143,"column":13}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5096,"end":5099,"loc":{"start":{"line":130,"column":16},"end":{"line":130,"column":19}},"name":"err"},{"type":"Identifier","start":5101,"end":5105,"loc":{"start":{"line":130,"column":21},"end":{"line":130,"column":25}},"name":"data"}],"body":{"type":"BlockStatement","start":5110,"end":5510,"loc":{"start":{"line":130,"column":30},"end":{"line":143,"column":13}},"body":[{"type":"IfStatement","start":5128,"end":5215,"loc":{"start":{"line":131,"column":16},"end":{"line":134,"column":17}},"test":{"type":"Identifier","start":5132,"end":5135,"loc":{"start":{"line":131,"column":20},"end":{"line":131,"column":23}},"name":"err"},"consequent":{"type":"BlockStatement","start":5137,"end":5215,"loc":{"start":{"line":131,"column":25},"end":{"line":134,"column":17}},"body":[{"type":"ExpressionStatement","start":5159,"end":5169,"loc":{"start":{"line":132,"column":20},"end":{"line":132,"column":30}},"expression":{"type":"CallExpression","start":5159,"end":5168,"loc":{"start":{"line":132,"column":20},"end":{"line":132,"column":29}},"callee":{"type":"Identifier","start":5159,"end":5163,"loc":{"start":{"line":132,"column":20},"end":{"line":132,"column":24}},"name":"next"},"arguments":[{"type":"Identifier","start":5164,"end":5167,"loc":{"start":{"line":132,"column":25},"end":{"line":132,"column":28}},"name":"err"}]}},{"type":"ReturnStatement","start":5190,"end":5197,"loc":{"start":{"line":133,"column":20},"end":{"line":133,"column":27}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":5232,"end":5265,"loc":{"start":{"line":135,"column":16},"end":{"line":135,"column":49}},"expression":{"type":"AssignmentExpression","start":5232,"end":5264,"loc":{"start":{"line":135,"column":16},"end":{"line":135,"column":48}},"operator":"=","left":{"type":"Identifier","start":5232,"end":5237,"loc":{"start":{"line":135,"column":16},"end":{"line":135,"column":21}},"name":"parts"},"right":{"type":"CallExpression","start":5240,"end":5264,"loc":{"start":{"line":135,"column":24},"end":{"line":135,"column":48}},"callee":{"type":"MemberExpression","start":5240,"end":5252,"loc":{"start":{"line":135,"column":24},"end":{"line":135,"column":36}},"object":{"type":"Identifier","start":5240,"end":5245,"loc":{"start":{"line":135,"column":24},"end":{"line":135,"column":29}},"name":"parts"},"property":{"type":"Identifier","start":5246,"end":5252,"loc":{"start":{"line":135,"column":30},"end":{"line":135,"column":36}},"name":"concat"},"computed":false},"arguments":[{"type":"MemberExpression","start":5253,"end":5263,"loc":{"start":{"line":135,"column":37},"end":{"line":135,"column":47}},"object":{"type":"Identifier","start":5253,"end":5257,"loc":{"start":{"line":135,"column":37},"end":{"line":135,"column":41}},"name":"data"},"property":{"type":"Identifier","start":5258,"end":5263,"loc":{"start":{"line":135,"column":42},"end":{"line":135,"column":47}},"name":"Parts"},"computed":false}]}}},{"type":"IfStatement","start":5282,"end":5496,"loc":{"start":{"line":136,"column":16},"end":{"line":142,"column":17}},"test":{"type":"MemberExpression","start":5286,"end":5302,"loc":{"start":{"line":136,"column":20},"end":{"line":136,"column":36}},"object":{"type":"Identifier","start":5286,"end":5290,"loc":{"start":{"line":136,"column":20},"end":{"line":136,"column":24}},"name":"data"},"property":{"type":"Identifier","start":5291,"end":5302,"loc":{"start":{"line":136,"column":25},"end":{"line":136,"column":36}},"name":"IsTruncated"},"computed":false},"consequent":{"type":"BlockStatement","start":5304,"end":5427,"loc":{"start":{"line":136,"column":38},"end":{"line":139,"column":17}},"body":[{"type":"ExpressionStatement","start":5368,"end":5409,"loc":{"start":{"line":138,"column":20},"end":{"line":138,"column":61}},"expression":{"type":"CallExpression","start":5368,"end":5408,"loc":{"start":{"line":138,"column":20},"end":{"line":138,"column":60}},"callee":{"type":"Identifier","start":5368,"end":5381,"loc":{"start":{"line":138,"column":20},"end":{"line":138,"column":33}},"name":"listPartsPage"},"arguments":[{"type":"MemberExpression","start":5382,"end":5407,"loc":{"start":{"line":138,"column":34},"end":{"line":138,"column":59}},"object":{"type":"Identifier","start":5382,"end":5386,"loc":{"start":{"line":138,"column":34},"end":{"line":138,"column":38}},"name":"data"},"property":{"type":"Identifier","start":5387,"end":5407,"loc":{"start":{"line":138,"column":39},"end":{"line":138,"column":59}},"name":"NextPartNumberMarker"},"computed":false}]}}]},"alternate":{"type":"BlockStatement","start":5449,"end":5496,"loc":{"start":{"line":140,"column":21},"end":{"line":142,"column":17}},"body":[{"type":"ExpressionStatement","start":5471,"end":5478,"loc":{"start":{"line":141,"column":20},"end":{"line":141,"column":27}},"expression":{"type":"CallExpression","start":5471,"end":5477,"loc":{"start":{"line":141,"column":20},"end":{"line":141,"column":26}},"callee":{"type":"Identifier","start":5471,"end":5475,"loc":{"start":{"line":141,"column":20},"end":{"line":141,"column":24}},"name":"done"},"arguments":[]}}]}}]}}]}}]}},{"type":"FunctionDeclaration","start":5531,"end":5587,"loc":{"start":{"line":145,"column":8},"end":{"line":147,"column":9}},"id":{"type":"Identifier","start":5540,"end":5544,"loc":{"start":{"line":145,"column":17},"end":{"line":145,"column":21}},"name":"done"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5547,"end":5587,"loc":{"start":{"line":145,"column":24},"end":{"line":147,"column":9}},"body":[{"type":"ExpressionStatement","start":5561,"end":5577,"loc":{"start":{"line":146,"column":12},"end":{"line":146,"column":28}},"expression":{"type":"CallExpression","start":5561,"end":5576,"loc":{"start":{"line":146,"column":12},"end":{"line":146,"column":27}},"callee":{"type":"MemberExpression","start":5561,"end":5569,"loc":{"start":{"line":146,"column":12},"end":{"line":146,"column":20}},"object":{"type":"Identifier","start":5561,"end":5564,"loc":{"start":{"line":146,"column":12},"end":{"line":146,"column":15}},"name":"res"},"property":{"type":"Identifier","start":5565,"end":5569,"loc":{"start":{"line":146,"column":16},"end":{"line":146,"column":20}},"name":"json"},"computed":false},"arguments":[{"type":"Identifier","start":5570,"end":5575,"loc":{"start":{"line":146,"column":21},"end":{"line":146,"column":26}},"name":"parts"}]}}]}}]}},{"type":"FunctionDeclaration","start":6014,"end":7025,"loc":{"start":{"line":160,"column":4},"end":{"line":185,"column":5}},"id":{"type":"Identifier","start":6023,"end":6037,"loc":{"start":{"line":160,"column":13},"end":{"line":160,"column":27}},"name":"signPartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6038,"end":6041,"loc":{"start":{"line":160,"column":28},"end":{"line":160,"column":31}},"name":"req"},{"type":"Identifier","start":6043,"end":6046,"loc":{"start":{"line":160,"column":33},"end":{"line":160,"column":36}},"name":"res"},{"type":"Identifier","start":6048,"end":6052,"loc":{"start":{"line":160,"column":38},"end":{"line":160,"column":42}},"name":"next"}],"body":{"type":"BlockStatement","start":6054,"end":7025,"loc":{"start":{"line":160,"column":44},"end":{"line":185,"column":5}},"body":[{"type":"VariableDeclaration","start":6156,"end":6194,"loc":{"start":{"line":162,"column":8},"end":{"line":162,"column":46}},"declarations":[{"type":"VariableDeclarator","start":6162,"end":6193,"loc":{"start":{"line":162,"column":14},"end":{"line":162,"column":45}},"id":{"type":"Identifier","start":6162,"end":6168,"loc":{"start":{"line":162,"column":14},"end":{"line":162,"column":20}},"name":"client"},"init":{"type":"MemberExpression","start":6171,"end":6193,"loc":{"start":{"line":162,"column":23},"end":{"line":162,"column":45}},"object":{"type":"MemberExpression","start":6171,"end":6184,"loc":{"start":{"line":162,"column":23},"end":{"line":162,"column":36}},"object":{"type":"Identifier","start":6171,"end":6174,"loc":{"start":{"line":162,"column":23},"end":{"line":162,"column":26}},"name":"req"},"property":{"type":"Identifier","start":6175,"end":6184,"loc":{"start":{"line":162,"column":27},"end":{"line":162,"column":36}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":6185,"end":6193,"loc":{"start":{"line":162,"column":37},"end":{"line":162,"column":45}},"name":"s3Client"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":6203,"end":6247,"loc":{"start":{"line":163,"column":8},"end":{"line":163,"column":52}},"declarations":[{"type":"VariableDeclarator","start":6209,"end":6246,"loc":{"start":{"line":163,"column":14},"end":{"line":163,"column":51}},"id":{"type":"ObjectPattern","start":6209,"end":6233,"loc":{"start":{"line":163,"column":14},"end":{"line":163,"column":38}},"properties":[{"type":"Property","start":6211,"end":6219,"loc":{"start":{"line":163,"column":16},"end":{"line":163,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":6211,"end":6219,"loc":{"start":{"line":163,"column":16},"end":{"line":163,"column":24}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":6211,"end":6219,"loc":{"start":{"line":163,"column":16},"end":{"line":163,"column":24}},"name":"uploadId"}},{"type":"Property","start":6221,"end":6231,"loc":{"start":{"line":163,"column":26},"end":{"line":163,"column":36}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":6221,"end":6231,"loc":{"start":{"line":163,"column":26},"end":{"line":163,"column":36}},"name":"partNumber"},"kind":"init","value":{"type":"Identifier","start":6221,"end":6231,"loc":{"start":{"line":163,"column":26},"end":{"line":163,"column":36}},"name":"partNumber"}}]},"init":{"type":"MemberExpression","start":6236,"end":6246,"loc":{"start":{"line":163,"column":41},"end":{"line":163,"column":51}},"object":{"type":"Identifier","start":6236,"end":6239,"loc":{"start":{"line":163,"column":41},"end":{"line":163,"column":44}},"name":"req"},"property":{"type":"Identifier","start":6240,"end":6246,"loc":{"start":{"line":163,"column":45},"end":{"line":163,"column":51}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":6256,"end":6282,"loc":{"start":{"line":164,"column":8},"end":{"line":164,"column":34}},"declarations":[{"type":"VariableDeclarator","start":6262,"end":6281,"loc":{"start":{"line":164,"column":14},"end":{"line":164,"column":33}},"id":{"type":"ObjectPattern","start":6262,"end":6269,"loc":{"start":{"line":164,"column":14},"end":{"line":164,"column":21}},"properties":[{"type":"Property","start":6264,"end":6267,"loc":{"start":{"line":164,"column":16},"end":{"line":164,"column":19}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":6264,"end":6267,"loc":{"start":{"line":164,"column":16},"end":{"line":164,"column":19}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":6264,"end":6267,"loc":{"start":{"line":164,"column":16},"end":{"line":164,"column":19}},"name":"key"}}]},"init":{"type":"MemberExpression","start":6272,"end":6281,"loc":{"start":{"line":164,"column":24},"end":{"line":164,"column":33}},"object":{"type":"Identifier","start":6272,"end":6275,"loc":{"start":{"line":164,"column":24},"end":{"line":164,"column":27}},"name":"req"},"property":{"type":"Identifier","start":6276,"end":6281,"loc":{"start":{"line":164,"column":28},"end":{"line":164,"column":33}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":6291,"end":6470,"loc":{"start":{"line":165,"column":8},"end":{"line":167,"column":9}},"test":{"type":"BinaryExpression","start":6295,"end":6318,"loc":{"start":{"line":165,"column":12},"end":{"line":165,"column":35}},"left":{"type":"UnaryExpression","start":6295,"end":6305,"loc":{"start":{"line":165,"column":12},"end":{"line":165,"column":22}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":6302,"end":6305,"loc":{"start":{"line":165,"column":19},"end":{"line":165,"column":22}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":6310,"end":6318,"loc":{"start":{"line":165,"column":27},"end":{"line":165,"column":35}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":6320,"end":6470,"loc":{"start":{"line":165,"column":37},"end":{"line":167,"column":9}},"body":[{"type":"ReturnStatement","start":6334,"end":6460,"loc":{"start":{"line":166,"column":12},"end":{"line":166,"column":138}},"argument":{"type":"CallExpression","start":6341,"end":6459,"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":137}},"callee":{"type":"MemberExpression","start":6341,"end":6361,"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":39}},"object":{"type":"CallExpression","start":6341,"end":6356,"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":34}},"callee":{"type":"MemberExpression","start":6341,"end":6351,"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":29}},"object":{"type":"Identifier","start":6341,"end":6344,"loc":{"start":{"line":166,"column":19},"end":{"line":166,"column":22}},"name":"res"},"property":{"type":"Identifier","start":6345,"end":6351,"loc":{"start":{"line":166,"column":23},"end":{"line":166,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":6352,"end":6355,"loc":{"start":{"line":166,"column":30},"end":{"line":166,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":6357,"end":6361,"loc":{"start":{"line":166,"column":35},"end":{"line":166,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":6362,"end":6458,"loc":{"start":{"line":166,"column":40},"end":{"line":166,"column":136}},"properties":[{"type":"Property","start":6364,"end":6456,"loc":{"start":{"line":166,"column":42},"end":{"line":166,"column":134}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6364,"end":6369,"loc":{"start":{"line":166,"column":42},"end":{"line":166,"column":47}},"name":"error"},"value":{"type":"Literal","start":6371,"end":6456,"loc":{"start":{"line":166,"column":49},"end":{"line":166,"column":134}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":6479,"end":6634,"loc":{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},"test":{"type":"UnaryExpression","start":6483,"end":6508,"loc":{"start":{"line":168,"column":12},"end":{"line":168,"column":37}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":6484,"end":6508,"loc":{"start":{"line":168,"column":13},"end":{"line":168,"column":37}},"callee":{"type":"Identifier","start":6484,"end":6492,"loc":{"start":{"line":168,"column":13},"end":{"line":168,"column":21}},"name":"parseInt"},"arguments":[{"type":"Identifier","start":6493,"end":6503,"loc":{"start":{"line":168,"column":22},"end":{"line":168,"column":32}},"name":"partNumber"},{"type":"Literal","start":6505,"end":6507,"loc":{"start":{"line":168,"column":34},"end":{"line":168,"column":36}},"value":10,"raw":"10"}]}},"consequent":{"type":"BlockStatement","start":6510,"end":6634,"loc":{"start":{"line":168,"column":39},"end":{"line":170,"column":9}},"body":[{"type":"ReturnStatement","start":6524,"end":6624,"loc":{"start":{"line":169,"column":12},"end":{"line":169,"column":112}},"argument":{"type":"CallExpression","start":6531,"end":6623,"loc":{"start":{"line":169,"column":19},"end":{"line":169,"column":111}},"callee":{"type":"MemberExpression","start":6531,"end":6551,"loc":{"start":{"line":169,"column":19},"end":{"line":169,"column":39}},"object":{"type":"CallExpression","start":6531,"end":6546,"loc":{"start":{"line":169,"column":19},"end":{"line":169,"column":34}},"callee":{"type":"MemberExpression","start":6531,"end":6541,"loc":{"start":{"line":169,"column":19},"end":{"line":169,"column":29}},"object":{"type":"Identifier","start":6531,"end":6534,"loc":{"start":{"line":169,"column":19},"end":{"line":169,"column":22}},"name":"res"},"property":{"type":"Identifier","start":6535,"end":6541,"loc":{"start":{"line":169,"column":23},"end":{"line":169,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":6542,"end":6545,"loc":{"start":{"line":169,"column":30},"end":{"line":169,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":6547,"end":6551,"loc":{"start":{"line":169,"column":35},"end":{"line":169,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":6552,"end":6622,"loc":{"start":{"line":169,"column":40},"end":{"line":169,"column":110}},"properties":[{"type":"Property","start":6554,"end":6620,"loc":{"start":{"line":169,"column":42},"end":{"line":169,"column":108}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6554,"end":6559,"loc":{"start":{"line":169,"column":42},"end":{"line":169,"column":47}},"name":"error"},"value":{"type":"Literal","start":6561,"end":6620,"loc":{"start":{"line":169,"column":49},"end":{"line":169,"column":108}},"value":"s3: the part number must be a number between 1 and 10000.","raw":"'s3: the part number must be a number between 1 and 10000.'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":6643,"end":7019,"loc":{"start":{"line":171,"column":8},"end":{"line":184,"column":11}},"expression":{"type":"CallExpression","start":6643,"end":7018,"loc":{"start":{"line":171,"column":8},"end":{"line":184,"column":10}},"callee":{"type":"MemberExpression","start":6643,"end":6662,"loc":{"start":{"line":171,"column":8},"end":{"line":171,"column":27}},"object":{"type":"Identifier","start":6643,"end":6649,"loc":{"start":{"line":171,"column":8},"end":{"line":171,"column":14}},"name":"client"},"property":{"type":"Identifier","start":6650,"end":6662,"loc":{"start":{"line":171,"column":15},"end":{"line":171,"column":27}},"name":"getSignedUrl"},"computed":false},"arguments":[{"type":"Literal","start":6663,"end":6675,"loc":{"start":{"line":171,"column":28},"end":{"line":171,"column":40}},"value":"uploadPart","raw":"'uploadPart'"},{"type":"ObjectExpression","start":6677,"end":6871,"loc":{"start":{"line":171,"column":42},"end":{"line":178,"column":9}},"properties":[{"type":"Property","start":6691,"end":6712,"loc":{"start":{"line":172,"column":12},"end":{"line":172,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6691,"end":6697,"loc":{"start":{"line":172,"column":12},"end":{"line":172,"column":18}},"name":"Bucket"},"value":{"type":"MemberExpression","start":6699,"end":6712,"loc":{"start":{"line":172,"column":20},"end":{"line":172,"column":33}},"object":{"type":"Identifier","start":6699,"end":6705,"loc":{"start":{"line":172,"column":20},"end":{"line":172,"column":26}},"name":"config"},"property":{"type":"Identifier","start":6706,"end":6712,"loc":{"start":{"line":172,"column":27},"end":{"line":172,"column":33}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":6726,"end":6734,"loc":{"start":{"line":173,"column":12},"end":{"line":173,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6726,"end":6729,"loc":{"start":{"line":173,"column":12},"end":{"line":173,"column":15}},"name":"Key"},"value":{"type":"Identifier","start":6731,"end":6734,"loc":{"start":{"line":173,"column":17},"end":{"line":173,"column":20}},"name":"key"},"kind":"init"},{"type":"Property","start":6748,"end":6766,"loc":{"start":{"line":174,"column":12},"end":{"line":174,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6748,"end":6756,"loc":{"start":{"line":174,"column":12},"end":{"line":174,"column":20}},"name":"UploadId"},"value":{"type":"Identifier","start":6758,"end":6766,"loc":{"start":{"line":174,"column":22},"end":{"line":174,"column":30}},"name":"uploadId"},"kind":"init"},{"type":"Property","start":6780,"end":6802,"loc":{"start":{"line":175,"column":12},"end":{"line":175,"column":34}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6780,"end":6790,"loc":{"start":{"line":175,"column":12},"end":{"line":175,"column":22}},"name":"PartNumber"},"value":{"type":"Identifier","start":6792,"end":6802,"loc":{"start":{"line":175,"column":24},"end":{"line":175,"column":34}},"name":"partNumber"},"kind":"init"},{"type":"Property","start":6816,"end":6824,"loc":{"start":{"line":176,"column":12},"end":{"line":176,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6816,"end":6820,"loc":{"start":{"line":176,"column":12},"end":{"line":176,"column":16}},"name":"Body"},"value":{"type":"Literal","start":6822,"end":6824,"loc":{"start":{"line":176,"column":18},"end":{"line":176,"column":20}},"value":"","raw":"''"},"kind":"init"},{"type":"Property","start":6838,"end":6861,"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6838,"end":6845,"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":19}},"name":"Expires"},"value":{"type":"MemberExpression","start":6847,"end":6861,"loc":{"start":{"line":177,"column":21},"end":{"line":177,"column":35}},"object":{"type":"Identifier","start":6847,"end":6853,"loc":{"start":{"line":177,"column":21},"end":{"line":177,"column":27}},"name":"config"},"property":{"type":"Identifier","start":6854,"end":6861,"loc":{"start":{"line":177,"column":28},"end":{"line":177,"column":35}},"name":"expires"},"computed":false},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":6873,"end":7017,"loc":{"start":{"line":178,"column":11},"end":{"line":184,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6874,"end":6877,"loc":{"start":{"line":178,"column":12},"end":{"line":178,"column":15}},"name":"err"},{"type":"Identifier","start":6879,"end":6882,"loc":{"start":{"line":178,"column":17},"end":{"line":178,"column":20}},"name":"url"}],"body":{"type":"BlockStatement","start":6887,"end":7017,"loc":{"start":{"line":178,"column":25},"end":{"line":184,"column":9}},"body":[{"type":"IfStatement","start":6901,"end":6976,"loc":{"start":{"line":179,"column":12},"end":{"line":182,"column":13}},"test":{"type":"Identifier","start":6905,"end":6908,"loc":{"start":{"line":179,"column":16},"end":{"line":179,"column":19}},"name":"err"},"consequent":{"type":"BlockStatement","start":6910,"end":6976,"loc":{"start":{"line":179,"column":21},"end":{"line":182,"column":13}},"body":[{"type":"ExpressionStatement","start":6928,"end":6938,"loc":{"start":{"line":180,"column":16},"end":{"line":180,"column":26}},"expression":{"type":"CallExpression","start":6928,"end":6937,"loc":{"start":{"line":180,"column":16},"end":{"line":180,"column":25}},"callee":{"type":"Identifier","start":6928,"end":6932,"loc":{"start":{"line":180,"column":16},"end":{"line":180,"column":20}},"name":"next"},"arguments":[{"type":"Identifier","start":6933,"end":6936,"loc":{"start":{"line":180,"column":21},"end":{"line":180,"column":24}},"name":"err"}]}},{"type":"ReturnStatement","start":6955,"end":6962,"loc":{"start":{"line":181,"column":16},"end":{"line":181,"column":23}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":6989,"end":7007,"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":30}},"expression":{"type":"CallExpression","start":6989,"end":7006,"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":29}},"callee":{"type":"MemberExpression","start":6989,"end":6997,"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":20}},"object":{"type":"Identifier","start":6989,"end":6992,"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":15}},"name":"res"},"property":{"type":"Identifier","start":6993,"end":6997,"loc":{"start":{"line":183,"column":16},"end":{"line":183,"column":20}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":6998,"end":7005,"loc":{"start":{"line":183,"column":21},"end":{"line":183,"column":28}},"properties":[{"type":"Property","start":7000,"end":7003,"loc":{"start":{"line":183,"column":23},"end":{"line":183,"column":26}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":7000,"end":7003,"loc":{"start":{"line":183,"column":23},"end":{"line":183,"column":26}},"name":"url"},"kind":"init","value":{"type":"Identifier","start":7000,"end":7003,"loc":{"start":{"line":183,"column":23},"end":{"line":183,"column":26}},"name":"url"}}]}]}}]}}]}}]}},{"type":"FunctionDeclaration","start":7345,"end":8081,"loc":{"start":{"line":196,"column":4},"end":{"line":215,"column":5}},"id":{"type":"Identifier","start":7354,"end":7374,"loc":{"start":{"line":196,"column":13},"end":{"line":196,"column":33}},"name":"abortMultipartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7375,"end":7378,"loc":{"start":{"line":196,"column":34},"end":{"line":196,"column":37}},"name":"req"},{"type":"Identifier","start":7380,"end":7383,"loc":{"start":{"line":196,"column":39},"end":{"line":196,"column":42}},"name":"res"},{"type":"Identifier","start":7385,"end":7389,"loc":{"start":{"line":196,"column":44},"end":{"line":196,"column":48}},"name":"next"}],"body":{"type":"BlockStatement","start":7391,"end":8081,"loc":{"start":{"line":196,"column":50},"end":{"line":215,"column":5}},"body":[{"type":"VariableDeclaration","start":7493,"end":7531,"loc":{"start":{"line":198,"column":8},"end":{"line":198,"column":46}},"declarations":[{"type":"VariableDeclarator","start":7499,"end":7530,"loc":{"start":{"line":198,"column":14},"end":{"line":198,"column":45}},"id":{"type":"Identifier","start":7499,"end":7505,"loc":{"start":{"line":198,"column":14},"end":{"line":198,"column":20}},"name":"client"},"init":{"type":"MemberExpression","start":7508,"end":7530,"loc":{"start":{"line":198,"column":23},"end":{"line":198,"column":45}},"object":{"type":"MemberExpression","start":7508,"end":7521,"loc":{"start":{"line":198,"column":23},"end":{"line":198,"column":36}},"object":{"type":"Identifier","start":7508,"end":7511,"loc":{"start":{"line":198,"column":23},"end":{"line":198,"column":26}},"name":"req"},"property":{"type":"Identifier","start":7512,"end":7521,"loc":{"start":{"line":198,"column":27},"end":{"line":198,"column":36}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":7522,"end":7530,"loc":{"start":{"line":198,"column":37},"end":{"line":198,"column":45}},"name":"s3Client"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":7540,"end":7572,"loc":{"start":{"line":199,"column":8},"end":{"line":199,"column":40}},"declarations":[{"type":"VariableDeclarator","start":7546,"end":7571,"loc":{"start":{"line":199,"column":14},"end":{"line":199,"column":39}},"id":{"type":"ObjectPattern","start":7546,"end":7558,"loc":{"start":{"line":199,"column":14},"end":{"line":199,"column":26}},"properties":[{"type":"Property","start":7548,"end":7556,"loc":{"start":{"line":199,"column":16},"end":{"line":199,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":7548,"end":7556,"loc":{"start":{"line":199,"column":16},"end":{"line":199,"column":24}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":7548,"end":7556,"loc":{"start":{"line":199,"column":16},"end":{"line":199,"column":24}},"name":"uploadId"}}]},"init":{"type":"MemberExpression","start":7561,"end":7571,"loc":{"start":{"line":199,"column":29},"end":{"line":199,"column":39}},"object":{"type":"Identifier","start":7561,"end":7564,"loc":{"start":{"line":199,"column":29},"end":{"line":199,"column":32}},"name":"req"},"property":{"type":"Identifier","start":7565,"end":7571,"loc":{"start":{"line":199,"column":33},"end":{"line":199,"column":39}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":7581,"end":7607,"loc":{"start":{"line":200,"column":8},"end":{"line":200,"column":34}},"declarations":[{"type":"VariableDeclarator","start":7587,"end":7606,"loc":{"start":{"line":200,"column":14},"end":{"line":200,"column":33}},"id":{"type":"ObjectPattern","start":7587,"end":7594,"loc":{"start":{"line":200,"column":14},"end":{"line":200,"column":21}},"properties":[{"type":"Property","start":7589,"end":7592,"loc":{"start":{"line":200,"column":16},"end":{"line":200,"column":19}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":7589,"end":7592,"loc":{"start":{"line":200,"column":16},"end":{"line":200,"column":19}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":7589,"end":7592,"loc":{"start":{"line":200,"column":16},"end":{"line":200,"column":19}},"name":"key"}}]},"init":{"type":"MemberExpression","start":7597,"end":7606,"loc":{"start":{"line":200,"column":24},"end":{"line":200,"column":33}},"object":{"type":"Identifier","start":7597,"end":7600,"loc":{"start":{"line":200,"column":24},"end":{"line":200,"column":27}},"name":"req"},"property":{"type":"Identifier","start":7601,"end":7606,"loc":{"start":{"line":200,"column":28},"end":{"line":200,"column":33}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":7616,"end":7795,"loc":{"start":{"line":201,"column":8},"end":{"line":203,"column":9}},"test":{"type":"BinaryExpression","start":7620,"end":7643,"loc":{"start":{"line":201,"column":12},"end":{"line":201,"column":35}},"left":{"type":"UnaryExpression","start":7620,"end":7630,"loc":{"start":{"line":201,"column":12},"end":{"line":201,"column":22}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":7627,"end":7630,"loc":{"start":{"line":201,"column":19},"end":{"line":201,"column":22}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":7635,"end":7643,"loc":{"start":{"line":201,"column":27},"end":{"line":201,"column":35}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":7645,"end":7795,"loc":{"start":{"line":201,"column":37},"end":{"line":203,"column":9}},"body":[{"type":"ReturnStatement","start":7659,"end":7785,"loc":{"start":{"line":202,"column":12},"end":{"line":202,"column":138}},"argument":{"type":"CallExpression","start":7666,"end":7784,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":137}},"callee":{"type":"MemberExpression","start":7666,"end":7686,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":39}},"object":{"type":"CallExpression","start":7666,"end":7681,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":34}},"callee":{"type":"MemberExpression","start":7666,"end":7676,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":29}},"object":{"type":"Identifier","start":7666,"end":7669,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":22}},"name":"res"},"property":{"type":"Identifier","start":7670,"end":7676,"loc":{"start":{"line":202,"column":23},"end":{"line":202,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":7677,"end":7680,"loc":{"start":{"line":202,"column":30},"end":{"line":202,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":7682,"end":7686,"loc":{"start":{"line":202,"column":35},"end":{"line":202,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":7687,"end":7783,"loc":{"start":{"line":202,"column":40},"end":{"line":202,"column":136}},"properties":[{"type":"Property","start":7689,"end":7781,"loc":{"start":{"line":202,"column":42},"end":{"line":202,"column":134}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7689,"end":7694,"loc":{"start":{"line":202,"column":42},"end":{"line":202,"column":47}},"name":"error"},"value":{"type":"Literal","start":7696,"end":7781,"loc":{"start":{"line":202,"column":49},"end":{"line":202,"column":134}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":7804,"end":8075,"loc":{"start":{"line":204,"column":8},"end":{"line":214,"column":11}},"expression":{"type":"CallExpression","start":7804,"end":8074,"loc":{"start":{"line":204,"column":8},"end":{"line":214,"column":10}},"callee":{"type":"MemberExpression","start":7804,"end":7831,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":35}},"object":{"type":"Identifier","start":7804,"end":7810,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":14}},"name":"client"},"property":{"type":"Identifier","start":7811,"end":7831,"loc":{"start":{"line":204,"column":15},"end":{"line":204,"column":35}},"name":"abortMultipartUpload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":7832,"end":7931,"loc":{"start":{"line":204,"column":36},"end":{"line":208,"column":9}},"properties":[{"type":"Property","start":7846,"end":7867,"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7846,"end":7852,"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":18}},"name":"Bucket"},"value":{"type":"MemberExpression","start":7854,"end":7867,"loc":{"start":{"line":205,"column":20},"end":{"line":205,"column":33}},"object":{"type":"Identifier","start":7854,"end":7860,"loc":{"start":{"line":205,"column":20},"end":{"line":205,"column":26}},"name":"config"},"property":{"type":"Identifier","start":7861,"end":7867,"loc":{"start":{"line":205,"column":27},"end":{"line":205,"column":33}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":7881,"end":7889,"loc":{"start":{"line":206,"column":12},"end":{"line":206,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7881,"end":7884,"loc":{"start":{"line":206,"column":12},"end":{"line":206,"column":15}},"name":"Key"},"value":{"type":"Identifier","start":7886,"end":7889,"loc":{"start":{"line":206,"column":17},"end":{"line":206,"column":20}},"name":"key"},"kind":"init"},{"type":"Property","start":7903,"end":7921,"loc":{"start":{"line":207,"column":12},"end":{"line":207,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7903,"end":7911,"loc":{"start":{"line":207,"column":12},"end":{"line":207,"column":20}},"name":"UploadId"},"value":{"type":"Identifier","start":7913,"end":7921,"loc":{"start":{"line":207,"column":22},"end":{"line":207,"column":30}},"name":"uploadId"},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":7933,"end":8073,"loc":{"start":{"line":208,"column":11},"end":{"line":214,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7934,"end":7937,"loc":{"start":{"line":208,"column":12},"end":{"line":208,"column":15}},"name":"err"},{"type":"Identifier","start":7939,"end":7943,"loc":{"start":{"line":208,"column":17},"end":{"line":208,"column":21}},"name":"data"}],"body":{"type":"BlockStatement","start":7948,"end":8073,"loc":{"start":{"line":208,"column":26},"end":{"line":214,"column":9}},"body":[{"type":"IfStatement","start":7962,"end":8037,"loc":{"start":{"line":209,"column":12},"end":{"line":212,"column":13}},"test":{"type":"Identifier","start":7966,"end":7969,"loc":{"start":{"line":209,"column":16},"end":{"line":209,"column":19}},"name":"err"},"consequent":{"type":"BlockStatement","start":7971,"end":8037,"loc":{"start":{"line":209,"column":21},"end":{"line":212,"column":13}},"body":[{"type":"ExpressionStatement","start":7989,"end":7999,"loc":{"start":{"line":210,"column":16},"end":{"line":210,"column":26}},"expression":{"type":"CallExpression","start":7989,"end":7998,"loc":{"start":{"line":210,"column":16},"end":{"line":210,"column":25}},"callee":{"type":"Identifier","start":7989,"end":7993,"loc":{"start":{"line":210,"column":16},"end":{"line":210,"column":20}},"name":"next"},"arguments":[{"type":"Identifier","start":7994,"end":7997,"loc":{"start":{"line":210,"column":21},"end":{"line":210,"column":24}},"name":"err"}]}},{"type":"ReturnStatement","start":8016,"end":8023,"loc":{"start":{"line":211,"column":16},"end":{"line":211,"column":23}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":8050,"end":8063,"loc":{"start":{"line":213,"column":12},"end":{"line":213,"column":25}},"expression":{"type":"CallExpression","start":8050,"end":8062,"loc":{"start":{"line":213,"column":12},"end":{"line":213,"column":24}},"callee":{"type":"MemberExpression","start":8050,"end":8058,"loc":{"start":{"line":213,"column":12},"end":{"line":213,"column":20}},"object":{"type":"Identifier","start":8050,"end":8053,"loc":{"start":{"line":213,"column":12},"end":{"line":213,"column":15}},"name":"res"},"property":{"type":"Identifier","start":8054,"end":8058,"loc":{"start":{"line":213,"column":16},"end":{"line":213,"column":20}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":8059,"end":8061,"loc":{"start":{"line":213,"column":21},"end":{"line":213,"column":23}},"properties":[]}]}}]}}]}}]}},{"type":"FunctionDeclaration","start":8590,"end":9687,"loc":{"start":{"line":228,"column":4},"end":{"line":256,"column":5}},"id":{"type":"Identifier","start":8599,"end":8622,"loc":{"start":{"line":228,"column":13},"end":{"line":228,"column":36}},"name":"completeMultipartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":8623,"end":8626,"loc":{"start":{"line":228,"column":37},"end":{"line":228,"column":40}},"name":"req"},{"type":"Identifier","start":8628,"end":8631,"loc":{"start":{"line":228,"column":42},"end":{"line":228,"column":45}},"name":"res"},{"type":"Identifier","start":8633,"end":8637,"loc":{"start":{"line":228,"column":47},"end":{"line":228,"column":51}},"name":"next"}],"body":{"type":"BlockStatement","start":8639,"end":9687,"loc":{"start":{"line":228,"column":53},"end":{"line":256,"column":5}},"body":[{"type":"VariableDeclaration","start":8741,"end":8779,"loc":{"start":{"line":230,"column":8},"end":{"line":230,"column":46}},"declarations":[{"type":"VariableDeclarator","start":8747,"end":8778,"loc":{"start":{"line":230,"column":14},"end":{"line":230,"column":45}},"id":{"type":"Identifier","start":8747,"end":8753,"loc":{"start":{"line":230,"column":14},"end":{"line":230,"column":20}},"name":"client"},"init":{"type":"MemberExpression","start":8756,"end":8778,"loc":{"start":{"line":230,"column":23},"end":{"line":230,"column":45}},"object":{"type":"MemberExpression","start":8756,"end":8769,"loc":{"start":{"line":230,"column":23},"end":{"line":230,"column":36}},"object":{"type":"Identifier","start":8756,"end":8759,"loc":{"start":{"line":230,"column":23},"end":{"line":230,"column":26}},"name":"req"},"property":{"type":"Identifier","start":8760,"end":8769,"loc":{"start":{"line":230,"column":27},"end":{"line":230,"column":36}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":8770,"end":8778,"loc":{"start":{"line":230,"column":37},"end":{"line":230,"column":45}},"name":"s3Client"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":8788,"end":8820,"loc":{"start":{"line":231,"column":8},"end":{"line":231,"column":40}},"declarations":[{"type":"VariableDeclarator","start":8794,"end":8819,"loc":{"start":{"line":231,"column":14},"end":{"line":231,"column":39}},"id":{"type":"ObjectPattern","start":8794,"end":8806,"loc":{"start":{"line":231,"column":14},"end":{"line":231,"column":26}},"properties":[{"type":"Property","start":8796,"end":8804,"loc":{"start":{"line":231,"column":16},"end":{"line":231,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":8796,"end":8804,"loc":{"start":{"line":231,"column":16},"end":{"line":231,"column":24}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":8796,"end":8804,"loc":{"start":{"line":231,"column":16},"end":{"line":231,"column":24}},"name":"uploadId"}}]},"init":{"type":"MemberExpression","start":8809,"end":8819,"loc":{"start":{"line":231,"column":29},"end":{"line":231,"column":39}},"object":{"type":"Identifier","start":8809,"end":8812,"loc":{"start":{"line":231,"column":29},"end":{"line":231,"column":32}},"name":"req"},"property":{"type":"Identifier","start":8813,"end":8819,"loc":{"start":{"line":231,"column":33},"end":{"line":231,"column":39}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":8829,"end":8855,"loc":{"start":{"line":232,"column":8},"end":{"line":232,"column":34}},"declarations":[{"type":"VariableDeclarator","start":8835,"end":8854,"loc":{"start":{"line":232,"column":14},"end":{"line":232,"column":33}},"id":{"type":"ObjectPattern","start":8835,"end":8842,"loc":{"start":{"line":232,"column":14},"end":{"line":232,"column":21}},"properties":[{"type":"Property","start":8837,"end":8840,"loc":{"start":{"line":232,"column":16},"end":{"line":232,"column":19}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":8837,"end":8840,"loc":{"start":{"line":232,"column":16},"end":{"line":232,"column":19}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":8837,"end":8840,"loc":{"start":{"line":232,"column":16},"end":{"line":232,"column":19}},"name":"key"}}]},"init":{"type":"MemberExpression","start":8845,"end":8854,"loc":{"start":{"line":232,"column":24},"end":{"line":232,"column":33}},"object":{"type":"Identifier","start":8845,"end":8848,"loc":{"start":{"line":232,"column":24},"end":{"line":232,"column":27}},"name":"req"},"property":{"type":"Identifier","start":8849,"end":8854,"loc":{"start":{"line":232,"column":28},"end":{"line":232,"column":33}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":8864,"end":8891,"loc":{"start":{"line":233,"column":8},"end":{"line":233,"column":35}},"declarations":[{"type":"VariableDeclarator","start":8870,"end":8890,"loc":{"start":{"line":233,"column":14},"end":{"line":233,"column":34}},"id":{"type":"ObjectPattern","start":8870,"end":8879,"loc":{"start":{"line":233,"column":14},"end":{"line":233,"column":23}},"properties":[{"type":"Property","start":8872,"end":8877,"loc":{"start":{"line":233,"column":16},"end":{"line":233,"column":21}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":8872,"end":8877,"loc":{"start":{"line":233,"column":16},"end":{"line":233,"column":21}},"name":"parts"},"kind":"init","value":{"type":"Identifier","start":8872,"end":8877,"loc":{"start":{"line":233,"column":16},"end":{"line":233,"column":21}},"name":"parts"}}]},"init":{"type":"MemberExpression","start":8882,"end":8890,"loc":{"start":{"line":233,"column":26},"end":{"line":233,"column":34}},"object":{"type":"Identifier","start":8882,"end":8885,"loc":{"start":{"line":233,"column":26},"end":{"line":233,"column":29}},"name":"req"},"property":{"type":"Identifier","start":8886,"end":8890,"loc":{"start":{"line":233,"column":30},"end":{"line":233,"column":34}},"name":"body"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":8900,"end":9079,"loc":{"start":{"line":234,"column":8},"end":{"line":236,"column":9}},"test":{"type":"BinaryExpression","start":8904,"end":8927,"loc":{"start":{"line":234,"column":12},"end":{"line":234,"column":35}},"left":{"type":"UnaryExpression","start":8904,"end":8914,"loc":{"start":{"line":234,"column":12},"end":{"line":234,"column":22}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":8911,"end":8914,"loc":{"start":{"line":234,"column":19},"end":{"line":234,"column":22}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":8919,"end":8927,"loc":{"start":{"line":234,"column":27},"end":{"line":234,"column":35}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":8929,"end":9079,"loc":{"start":{"line":234,"column":37},"end":{"line":236,"column":9}},"body":[{"type":"ReturnStatement","start":8943,"end":9069,"loc":{"start":{"line":235,"column":12},"end":{"line":235,"column":138}},"argument":{"type":"CallExpression","start":8950,"end":9068,"loc":{"start":{"line":235,"column":19},"end":{"line":235,"column":137}},"callee":{"type":"MemberExpression","start":8950,"end":8970,"loc":{"start":{"line":235,"column":19},"end":{"line":235,"column":39}},"object":{"type":"CallExpression","start":8950,"end":8965,"loc":{"start":{"line":235,"column":19},"end":{"line":235,"column":34}},"callee":{"type":"MemberExpression","start":8950,"end":8960,"loc":{"start":{"line":235,"column":19},"end":{"line":235,"column":29}},"object":{"type":"Identifier","start":8950,"end":8953,"loc":{"start":{"line":235,"column":19},"end":{"line":235,"column":22}},"name":"res"},"property":{"type":"Identifier","start":8954,"end":8960,"loc":{"start":{"line":235,"column":23},"end":{"line":235,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":8961,"end":8964,"loc":{"start":{"line":235,"column":30},"end":{"line":235,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":8966,"end":8970,"loc":{"start":{"line":235,"column":35},"end":{"line":235,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":8971,"end":9067,"loc":{"start":{"line":235,"column":40},"end":{"line":235,"column":136}},"properties":[{"type":"Property","start":8973,"end":9065,"loc":{"start":{"line":235,"column":42},"end":{"line":235,"column":134}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8973,"end":8978,"loc":{"start":{"line":235,"column":42},"end":{"line":235,"column":47}},"name":"error"},"value":{"type":"Literal","start":8980,"end":9065,"loc":{"start":{"line":235,"column":49},"end":{"line":235,"column":134}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":9088,"end":9270,"loc":{"start":{"line":237,"column":8},"end":{"line":239,"column":9}},"test":{"type":"LogicalExpression","start":9092,"end":9142,"loc":{"start":{"line":237,"column":12},"end":{"line":237,"column":62}},"left":{"type":"UnaryExpression","start":9092,"end":9113,"loc":{"start":{"line":237,"column":12},"end":{"line":237,"column":33}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":9093,"end":9113,"loc":{"start":{"line":237,"column":13},"end":{"line":237,"column":33}},"callee":{"type":"MemberExpression","start":9093,"end":9106,"loc":{"start":{"line":237,"column":13},"end":{"line":237,"column":26}},"object":{"type":"Identifier","start":9093,"end":9098,"loc":{"start":{"line":237,"column":13},"end":{"line":237,"column":18}},"name":"Array"},"property":{"type":"Identifier","start":9099,"end":9106,"loc":{"start":{"line":237,"column":19},"end":{"line":237,"column":26}},"name":"isArray"},"computed":false},"arguments":[{"type":"Identifier","start":9107,"end":9112,"loc":{"start":{"line":237,"column":27},"end":{"line":237,"column":32}},"name":"parts"}]}},"operator":"||","right":{"type":"UnaryExpression","start":9117,"end":9142,"loc":{"start":{"line":237,"column":37},"end":{"line":237,"column":62}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":9118,"end":9142,"loc":{"start":{"line":237,"column":38},"end":{"line":237,"column":62}},"callee":{"type":"MemberExpression","start":9118,"end":9129,"loc":{"start":{"line":237,"column":38},"end":{"line":237,"column":49}},"object":{"type":"Identifier","start":9118,"end":9123,"loc":{"start":{"line":237,"column":38},"end":{"line":237,"column":43}},"name":"parts"},"property":{"type":"Identifier","start":9124,"end":9129,"loc":{"start":{"line":237,"column":44},"end":{"line":237,"column":49}},"name":"every"},"computed":false},"arguments":[{"type":"Identifier","start":9130,"end":9141,"loc":{"start":{"line":237,"column":50},"end":{"line":237,"column":61}},"name":"isValidPart"}]}}},"consequent":{"type":"BlockStatement","start":9144,"end":9270,"loc":{"start":{"line":237,"column":64},"end":{"line":239,"column":9}},"body":[{"type":"ReturnStatement","start":9158,"end":9260,"loc":{"start":{"line":238,"column":12},"end":{"line":238,"column":114}},"argument":{"type":"CallExpression","start":9165,"end":9259,"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":113}},"callee":{"type":"MemberExpression","start":9165,"end":9185,"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":39}},"object":{"type":"CallExpression","start":9165,"end":9180,"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":34}},"callee":{"type":"MemberExpression","start":9165,"end":9175,"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":29}},"object":{"type":"Identifier","start":9165,"end":9168,"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":22}},"name":"res"},"property":{"type":"Identifier","start":9169,"end":9175,"loc":{"start":{"line":238,"column":23},"end":{"line":238,"column":29}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":9176,"end":9179,"loc":{"start":{"line":238,"column":30},"end":{"line":238,"column":33}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":9181,"end":9185,"loc":{"start":{"line":238,"column":35},"end":{"line":238,"column":39}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":9186,"end":9258,"loc":{"start":{"line":238,"column":40},"end":{"line":238,"column":112}},"properties":[{"type":"Property","start":9188,"end":9256,"loc":{"start":{"line":238,"column":42},"end":{"line":238,"column":110}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9188,"end":9193,"loc":{"start":{"line":238,"column":42},"end":{"line":238,"column":47}},"name":"error"},"value":{"type":"Literal","start":9195,"end":9256,"loc":{"start":{"line":238,"column":49},"end":{"line":238,"column":110}},"value":"s3: `parts` must be an array of {ETag, PartNumber} objects.","raw":"'s3: `parts` must be an array of {ETag, PartNumber} objects.'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":9279,"end":9681,"loc":{"start":{"line":240,"column":8},"end":{"line":255,"column":11}},"expression":{"type":"CallExpression","start":9279,"end":9680,"loc":{"start":{"line":240,"column":8},"end":{"line":255,"column":10}},"callee":{"type":"MemberExpression","start":9279,"end":9309,"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":38}},"object":{"type":"Identifier","start":9279,"end":9285,"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":14}},"name":"client"},"property":{"type":"Identifier","start":9286,"end":9309,"loc":{"start":{"line":240,"column":15},"end":{"line":240,"column":38}},"name":"completeMultipartUpload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":9310,"end":9484,"loc":{"start":{"line":240,"column":39},"end":{"line":247,"column":9}},"properties":[{"type":"Property","start":9324,"end":9345,"loc":{"start":{"line":241,"column":12},"end":{"line":241,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9324,"end":9330,"loc":{"start":{"line":241,"column":12},"end":{"line":241,"column":18}},"name":"Bucket"},"value":{"type":"MemberExpression","start":9332,"end":9345,"loc":{"start":{"line":241,"column":20},"end":{"line":241,"column":33}},"object":{"type":"Identifier","start":9332,"end":9338,"loc":{"start":{"line":241,"column":20},"end":{"line":241,"column":26}},"name":"config"},"property":{"type":"Identifier","start":9339,"end":9345,"loc":{"start":{"line":241,"column":27},"end":{"line":241,"column":33}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":9359,"end":9367,"loc":{"start":{"line":242,"column":12},"end":{"line":242,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9359,"end":9362,"loc":{"start":{"line":242,"column":12},"end":{"line":242,"column":15}},"name":"Key"},"value":{"type":"Identifier","start":9364,"end":9367,"loc":{"start":{"line":242,"column":17},"end":{"line":242,"column":20}},"name":"key"},"kind":"init"},{"type":"Property","start":9381,"end":9399,"loc":{"start":{"line":243,"column":12},"end":{"line":243,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9381,"end":9389,"loc":{"start":{"line":243,"column":12},"end":{"line":243,"column":20}},"name":"UploadId"},"value":{"type":"Identifier","start":9391,"end":9399,"loc":{"start":{"line":243,"column":22},"end":{"line":243,"column":30}},"name":"uploadId"},"kind":"init"},{"type":"Property","start":9413,"end":9474,"loc":{"start":{"line":244,"column":12},"end":{"line":246,"column":13}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9413,"end":9428,"loc":{"start":{"line":244,"column":12},"end":{"line":244,"column":27}},"name":"MultipartUpload"},"value":{"type":"ObjectExpression","start":9430,"end":9474,"loc":{"start":{"line":244,"column":29},"end":{"line":246,"column":13}},"properties":[{"type":"Property","start":9448,"end":9460,"loc":{"start":{"line":245,"column":16},"end":{"line":245,"column":28}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9448,"end":9453,"loc":{"start":{"line":245,"column":16},"end":{"line":245,"column":21}},"name":"Parts"},"value":{"type":"Identifier","start":9455,"end":9460,"loc":{"start":{"line":245,"column":23},"end":{"line":245,"column":28}},"name":"parts"},"kind":"init"}]},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":9486,"end":9679,"loc":{"start":{"line":247,"column":11},"end":{"line":255,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":9487,"end":9490,"loc":{"start":{"line":247,"column":12},"end":{"line":247,"column":15}},"name":"err"},{"type":"Identifier","start":9492,"end":9496,"loc":{"start":{"line":247,"column":17},"end":{"line":247,"column":21}},"name":"data"}],"body":{"type":"BlockStatement","start":9501,"end":9679,"loc":{"start":{"line":247,"column":26},"end":{"line":255,"column":9}},"body":[{"type":"IfStatement","start":9515,"end":9590,"loc":{"start":{"line":248,"column":12},"end":{"line":251,"column":13}},"test":{"type":"Identifier","start":9519,"end":9522,"loc":{"start":{"line":248,"column":16},"end":{"line":248,"column":19}},"name":"err"},"consequent":{"type":"BlockStatement","start":9524,"end":9590,"loc":{"start":{"line":248,"column":21},"end":{"line":251,"column":13}},"body":[{"type":"ExpressionStatement","start":9542,"end":9552,"loc":{"start":{"line":249,"column":16},"end":{"line":249,"column":26}},"expression":{"type":"CallExpression","start":9542,"end":9551,"loc":{"start":{"line":249,"column":16},"end":{"line":249,"column":25}},"callee":{"type":"Identifier","start":9542,"end":9546,"loc":{"start":{"line":249,"column":16},"end":{"line":249,"column":20}},"name":"next"},"arguments":[{"type":"Identifier","start":9547,"end":9550,"loc":{"start":{"line":249,"column":21},"end":{"line":249,"column":24}},"name":"err"}]}},{"type":"ReturnStatement","start":9569,"end":9576,"loc":{"start":{"line":250,"column":16},"end":{"line":250,"column":23}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":9603,"end":9669,"loc":{"start":{"line":252,"column":12},"end":{"line":254,"column":15}},"expression":{"type":"CallExpression","start":9603,"end":9668,"loc":{"start":{"line":252,"column":12},"end":{"line":254,"column":14}},"callee":{"type":"MemberExpression","start":9603,"end":9611,"loc":{"start":{"line":252,"column":12},"end":{"line":252,"column":20}},"object":{"type":"Identifier","start":9603,"end":9606,"loc":{"start":{"line":252,"column":12},"end":{"line":252,"column":15}},"name":"res"},"property":{"type":"Identifier","start":9607,"end":9611,"loc":{"start":{"line":252,"column":16},"end":{"line":252,"column":20}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":9612,"end":9667,"loc":{"start":{"line":252,"column":21},"end":{"line":254,"column":13}},"properties":[{"type":"Property","start":9630,"end":9653,"loc":{"start":{"line":253,"column":16},"end":{"line":253,"column":39}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9630,"end":9638,"loc":{"start":{"line":253,"column":16},"end":{"line":253,"column":24}},"name":"location"},"value":{"type":"MemberExpression","start":9640,"end":9653,"loc":{"start":{"line":253,"column":26},"end":{"line":253,"column":39}},"object":{"type":"Identifier","start":9640,"end":9644,"loc":{"start":{"line":253,"column":26},"end":{"line":253,"column":30}},"name":"data"},"property":{"type":"Identifier","start":9645,"end":9653,"loc":{"start":{"line":253,"column":31},"end":{"line":253,"column":39}},"name":"Location"},"computed":false},"kind":"init"}]}]}}]}}]}}]}},{"type":"ReturnStatement","start":9692,"end":10058,"loc":{"start":{"line":257,"column":4},"end":{"line":263,"column":62}},"argument":{"type":"CallExpression","start":9699,"end":10057,"loc":{"start":{"line":257,"column":11},"end":{"line":263,"column":61}},"callee":{"type":"MemberExpression","start":9699,"end":10011,"loc":{"start":{"line":257,"column":11},"end":{"line":263,"column":15}},"object":{"type":"CallExpression","start":9699,"end":9995,"loc":{"start":{"line":257,"column":11},"end":{"line":262,"column":71}},"callee":{"type":"MemberExpression","start":9699,"end":9937,"loc":{"start":{"line":257,"column":11},"end":{"line":262,"column":13}},"object":{"type":"CallExpression","start":9699,"end":9923,"loc":{"start":{"line":257,"column":11},"end":{"line":261,"column":64}},"callee":{"type":"MemberExpression","start":9699,"end":9871,"loc":{"start":{"line":257,"column":11},"end":{"line":261,"column":12}},"object":{"type":"CallExpression","start":9699,"end":9858,"loc":{"start":{"line":257,"column":11},"end":{"line":260,"column":54}},"callee":{"type":"MemberExpression","start":9699,"end":9816,"loc":{"start":{"line":257,"column":11},"end":{"line":260,"column":12}},"object":{"type":"CallExpression","start":9699,"end":9803,"loc":{"start":{"line":257,"column":11},"end":{"line":259,"column":50}},"callee":{"type":"MemberExpression","start":9699,"end":9766,"loc":{"start":{"line":257,"column":11},"end":{"line":259,"column":13}},"object":{"type":"CallExpression","start":9699,"end":9752,"loc":{"start":{"line":257,"column":11},"end":{"line":258,"column":44}},"callee":{"type":"MemberExpression","start":9699,"end":9720,"loc":{"start":{"line":257,"column":11},"end":{"line":258,"column":12}},"object":{"type":"CallExpression","start":9699,"end":9707,"loc":{"start":{"line":257,"column":11},"end":{"line":257,"column":19}},"callee":{"type":"Identifier","start":9699,"end":9705,"loc":{"start":{"line":257,"column":11},"end":{"line":257,"column":17}},"name":"router"},"arguments":[]},"property":{"type":"Identifier","start":9717,"end":9720,"loc":{"start":{"line":258,"column":9},"end":{"line":258,"column":12}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":9721,"end":9730,"loc":{"start":{"line":258,"column":13},"end":{"line":258,"column":22}},"value":"/params","raw":"'/params'"},{"type":"Identifier","start":9732,"end":9751,"loc":{"start":{"line":258,"column":24},"end":{"line":258,"column":43}},"name":"getUploadParameters"}]},"property":{"type":"Identifier","start":9762,"end":9766,"loc":{"start":{"line":259,"column":9},"end":{"line":259,"column":13}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":9767,"end":9779,"loc":{"start":{"line":259,"column":14},"end":{"line":259,"column":26}},"value":"/multipart","raw":"'/multipart'"},{"type":"Identifier","start":9781,"end":9802,"loc":{"start":{"line":259,"column":28},"end":{"line":259,"column":49}},"name":"createMultipartUpload"}]},"property":{"type":"Identifier","start":9813,"end":9816,"loc":{"start":{"line":260,"column":9},"end":{"line":260,"column":12}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":9817,"end":9839,"loc":{"start":{"line":260,"column":13},"end":{"line":260,"column":35}},"value":"/multipart/:uploadId","raw":"'/multipart/:uploadId'"},{"type":"Identifier","start":9841,"end":9857,"loc":{"start":{"line":260,"column":37},"end":{"line":260,"column":53}},"name":"getUploadedParts"}]},"property":{"type":"Identifier","start":9868,"end":9871,"loc":{"start":{"line":261,"column":9},"end":{"line":261,"column":12}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":9872,"end":9906,"loc":{"start":{"line":261,"column":13},"end":{"line":261,"column":47}},"value":"/multipart/:uploadId/:partNumber","raw":"'/multipart/:uploadId/:partNumber'"},{"type":"Identifier","start":9908,"end":9922,"loc":{"start":{"line":261,"column":49},"end":{"line":261,"column":63}},"name":"signPartUpload"}]},"property":{"type":"Identifier","start":9933,"end":9937,"loc":{"start":{"line":262,"column":9},"end":{"line":262,"column":13}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":9938,"end":9969,"loc":{"start":{"line":262,"column":14},"end":{"line":262,"column":45}},"value":"/multipart/:uploadId/complete","raw":"'/multipart/:uploadId/complete'"},{"type":"Identifier","start":9971,"end":9994,"loc":{"start":{"line":262,"column":47},"end":{"line":262,"column":70}},"name":"completeMultipartUpload"}]},"property":{"type":"Identifier","start":10005,"end":10011,"loc":{"start":{"line":263,"column":9},"end":{"line":263,"column":15}},"name":"delete"},"computed":false},"arguments":[{"type":"Literal","start":10012,"end":10034,"loc":{"start":{"line":263,"column":16},"end":{"line":263,"column":38}},"value":"/multipart/:uploadId","raw":"'/multipart/:uploadId'"},{"type":"Identifier","start":10036,"end":10056,"loc":{"start":{"line":263,"column":40},"end":{"line":263,"column":60}},"name":"abortMultipartUpload"}]}}]}}}},{"type":"FunctionDeclaration","start":10062,"end":10209,"loc":{"start":{"line":265,"column":0},"end":{"line":267,"column":1}},"id":{"type":"Identifier","start":10071,"end":10082,"loc":{"start":{"line":265,"column":9},"end":{"line":265,"column":20}},"name":"isValidPart"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":10083,"end":10087,"loc":{"start":{"line":265,"column":21},"end":{"line":265,"column":25}},"name":"part"}],"body":{"type":"BlockStatement","start":10089,"end":10209,"loc":{"start":{"line":265,"column":27},"end":{"line":267,"column":1}},"body":[{"type":"ReturnStatement","start":10095,"end":10207,"loc":{"start":{"line":266,"column":4},"end":{"line":266,"column":116}},"argument":{"type":"LogicalExpression","start":10102,"end":10206,"loc":{"start":{"line":266,"column":11},"end":{"line":266,"column":115}},"left":{"type":"LogicalExpression","start":10102,"end":10173,"loc":{"start":{"line":266,"column":11},"end":{"line":266,"column":82}},"left":{"type":"LogicalExpression","start":10102,"end":10134,"loc":{"start":{"line":266,"column":11},"end":{"line":266,"column":43}},"left":{"type":"Identifier","start":10102,"end":10106,"loc":{"start":{"line":266,"column":11},"end":{"line":266,"column":15}},"name":"part"},"operator":"&&","right":{"type":"BinaryExpression","start":10110,"end":10134,"loc":{"start":{"line":266,"column":19},"end":{"line":266,"column":43}},"left":{"type":"UnaryExpression","start":10110,"end":10121,"loc":{"start":{"line":266,"column":19},"end":{"line":266,"column":30}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":10117,"end":10121,"loc":{"start":{"line":266,"column":26},"end":{"line":266,"column":30}},"name":"part"}},"operator":"===","right":{"type":"Literal","start":10126,"end":10134,"loc":{"start":{"line":266,"column":35},"end":{"line":266,"column":43}},"value":"object","raw":"'object'"}}},"operator":"&&","right":{"type":"BinaryExpression","start":10138,"end":10173,"loc":{"start":{"line":266,"column":47},"end":{"line":266,"column":82}},"left":{"type":"UnaryExpression","start":10138,"end":10160,"loc":{"start":{"line":266,"column":47},"end":{"line":266,"column":69}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":10145,"end":10160,"loc":{"start":{"line":266,"column":54},"end":{"line":266,"column":69}},"object":{"type":"Identifier","start":10145,"end":10149,"loc":{"start":{"line":266,"column":54},"end":{"line":266,"column":58}},"name":"part"},"property":{"type":"Identifier","start":10150,"end":10160,"loc":{"start":{"line":266,"column":59},"end":{"line":266,"column":69}},"name":"PartNumber"},"computed":false}},"operator":"===","right":{"type":"Literal","start":10165,"end":10173,"loc":{"start":{"line":266,"column":74},"end":{"line":266,"column":82}},"value":"number","raw":"'number'"}}},"operator":"&&","right":{"type":"BinaryExpression","start":10177,"end":10206,"loc":{"start":{"line":266,"column":86},"end":{"line":266,"column":115}},"left":{"type":"UnaryExpression","start":10177,"end":10193,"loc":{"start":{"line":266,"column":86},"end":{"line":266,"column":102}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":10184,"end":10193,"loc":{"start":{"line":266,"column":93},"end":{"line":266,"column":102}},"object":{"type":"Identifier","start":10184,"end":10188,"loc":{"start":{"line":266,"column":93},"end":{"line":266,"column":97}},"name":"part"},"property":{"type":"Identifier","start":10189,"end":10193,"loc":{"start":{"line":266,"column":98},"end":{"line":266,"column":102}},"name":"ETag"},"computed":false}},"operator":"===","right":{"type":"Literal","start":10198,"end":10206,"loc":{"start":{"line":266,"column":107},"end":{"line":266,"column":115}},"value":"string","raw":"'string'"}}}}]}}],"sourceType":"module"}