{"type":"Program","start":0,"end":5192,"body":[{"type":"VariableDeclaration","start":42,"end":85,"declarations":[{"type":"VariableDeclarator","start":48,"end":85,"id":{"type":"Identifier","start":48,"end":54,"name":"config"},"init":{"type":"CallExpression","start":57,"end":85,"callee":{"type":"Identifier","start":57,"end":64,"name":"require"},"arguments":[{"type":"Literal","start":65,"end":84,"value":"@purest/providers","raw":"'@purest/providers'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":86,"end":122,"declarations":[{"type":"VariableDeclarator","start":92,"end":122,"id":{"type":"Identifier","start":92,"end":99,"name":"dropbox"},"init":{"type":"CallExpression","start":102,"end":122,"callee":{"type":"Identifier","start":102,"end":109,"name":"require"},"arguments":[{"type":"Literal","start":110,"end":121,"value":"./dropbox","raw":"'./dropbox'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":123,"end":155,"declarations":[{"type":"VariableDeclarator","start":129,"end":155,"id":{"type":"Identifier","start":129,"end":134,"name":"drive"},"init":{"type":"CallExpression","start":137,"end":155,"callee":{"type":"Identifier","start":137,"end":144,"name":"require"},"arguments":[{"type":"Literal","start":145,"end":154,"value":"./drive","raw":"'./drive'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":156,"end":196,"declarations":[{"type":"VariableDeclarator","start":162,"end":196,"id":{"type":"Identifier","start":162,"end":171,"name":"instagram"},"init":{"type":"CallExpression","start":174,"end":196,"callee":{"type":"Identifier","start":174,"end":181,"name":"require"},"arguments":[{"type":"Literal","start":182,"end":195,"value":"./instagram","raw":"'./instagram'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":197,"end":248,"declarations":[{"type":"VariableDeclarator","start":203,"end":248,"id":{"type":"Identifier","start":203,"end":217,"name":"instagramGraph"},"init":{"type":"CallExpression","start":220,"end":248,"callee":{"type":"Identifier","start":220,"end":227,"name":"require"},"arguments":[{"type":"Literal","start":228,"end":247,"value":"./instagram/graph","raw":"'./instagram/graph'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":249,"end":287,"declarations":[{"type":"VariableDeclarator","start":255,"end":287,"id":{"type":"Identifier","start":255,"end":263,"name":"facebook"},"init":{"type":"CallExpression","start":266,"end":287,"callee":{"type":"Identifier","start":266,"end":273,"name":"require"},"arguments":[{"type":"Literal","start":274,"end":286,"value":"./facebook","raw":"'./facebook'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":288,"end":326,"declarations":[{"type":"VariableDeclarator","start":294,"end":326,"id":{"type":"Identifier","start":294,"end":302,"name":"onedrive"},"init":{"type":"CallExpression","start":305,"end":326,"callee":{"type":"Identifier","start":305,"end":312,"name":"require"},"arguments":[{"type":"Literal","start":313,"end":325,"value":"./onedrive","raw":"'./onedrive'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":327,"end":380,"declarations":[{"type":"VariableDeclarator","start":333,"end":380,"id":{"type":"ObjectPattern","start":333,"end":350,"properties":[{"type":"Property","start":335,"end":348,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":335,"end":348,"name":"getURLBuilder"},"kind":"init","value":{"type":"Identifier","start":335,"end":348,"name":"getURLBuilder"}}]},"init":{"type":"CallExpression","start":353,"end":380,"callee":{"type":"Identifier","start":353,"end":360,"name":"require"},"arguments":[{"type":"Literal","start":361,"end":379,"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":381,"end":416,"declarations":[{"type":"VariableDeclarator","start":387,"end":416,"id":{"type":"Identifier","start":387,"end":393,"name":"logger"},"init":{"type":"CallExpression","start":396,"end":416,"callee":{"type":"Identifier","start":396,"end":403,"name":"require"},"arguments":[{"type":"Literal","start":404,"end":415,"value":"../logger","raw":"'../logger'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":445,"end":483,"declarations":[{"type":"VariableDeclarator","start":451,"end":483,"id":{"type":"Identifier","start":451,"end":459,"name":"Provider"},"init":{"type":"CallExpression","start":462,"end":483,"callee":{"type":"Identifier","start":462,"end":469,"name":"require"},"arguments":[{"type":"Literal","start":470,"end":482,"value":"./Provider","raw":"'./Provider'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":659,"end":1239,"expression":{"type":"AssignmentExpression","start":659,"end":1239,"operator":"=","left":{"type":"MemberExpression","start":659,"end":695,"object":{"type":"MemberExpression","start":659,"end":673,"object":{"type":"Identifier","start":659,"end":665,"name":"module"},"property":{"type":"Identifier","start":666,"end":673,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":674,"end":695,"name":"getProviderMiddleware"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":698,"end":1239,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":699,"end":708,"name":"providers"}],"body":{"type":"BlockStatement","start":713,"end":1239,"body":[{"type":"VariableDeclaration","start":846,"end":1216,"declarations":[{"type":"VariableDeclarator","start":852,"end":1216,"id":{"type":"Identifier","start":852,"end":862,"name":"middleware"},"init":{"type":"ArrowFunctionExpression","start":865,"end":1216,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":866,"end":869,"name":"req"},{"type":"Identifier","start":871,"end":874,"name":"res"},{"type":"Identifier","start":876,"end":880,"name":"next"},{"type":"Identifier","start":882,"end":894,"name":"providerName"}],"body":{"type":"BlockStatement","start":899,"end":1216,"body":[{"type":"IfStatement","start":905,"end":1201,"test":{"type":"LogicalExpression","start":909,"end":971,"left":{"type":"MemberExpression","start":909,"end":932,"object":{"type":"Identifier","start":909,"end":918,"name":"providers"},"property":{"type":"Identifier","start":919,"end":931,"name":"providerName"},"computed":true},"operator":"&&","right":{"type":"CallExpression","start":936,"end":971,"callee":{"type":"Identifier","start":936,"end":948,"name":"validOptions"},"arguments":[{"type":"MemberExpression","start":949,"end":970,"object":{"type":"MemberExpression","start":949,"end":962,"object":{"type":"Identifier","start":949,"end":952,"name":"req"},"property":{"type":"Identifier","start":953,"end":962,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":963,"end":970,"name":"options"},"computed":false}]}},"consequent":{"type":"BlockStatement","start":973,"end":1065,"body":[{"type":"ExpressionStatement","start":981,"end":1059,"expression":{"type":"AssignmentExpression","start":981,"end":1059,"operator":"=","left":{"type":"MemberExpression","start":981,"end":1003,"object":{"type":"MemberExpression","start":981,"end":994,"object":{"type":"Identifier","start":981,"end":984,"name":"req"},"property":{"type":"Identifier","start":985,"end":994,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":995,"end":1003,"name":"provider"},"computed":false},"right":{"type":"NewExpression","start":1006,"end":1059,"callee":{"type":"MemberExpression","start":1010,"end":1033,"object":{"type":"Identifier","start":1010,"end":1019,"name":"providers"},"property":{"type":"Identifier","start":1020,"end":1032,"name":"providerName"},"computed":true},"arguments":[{"type":"ObjectExpression","start":1034,"end":1058,"properties":[{"type":"Property","start":1036,"end":1048,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1036,"end":1048,"name":"providerName"},"kind":"init","value":{"type":"Identifier","start":1036,"end":1048,"name":"providerName"}},{"type":"Property","start":1050,"end":1056,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1050,"end":1056,"name":"config"},"kind":"init","value":{"type":"Identifier","start":1050,"end":1056,"name":"config"}}]}]}}}]},"alternate":{"type":"BlockStatement","start":1071,"end":1201,"body":[{"type":"ExpressionStatement","start":1079,"end":1195,"expression":{"type":"CallExpression","start":1079,"end":1195,"callee":{"type":"MemberExpression","start":1079,"end":1090,"object":{"type":"Identifier","start":1079,"end":1085,"name":"logger"},"property":{"type":"Identifier","start":1086,"end":1090,"name":"warn"},"computed":false},"arguments":[{"type":"Literal","start":1091,"end":1155,"value":"invalid provider options detected. Provider will not be loaded","raw":"'invalid provider options detected. Provider will not be loaded'"},{"type":"Literal","start":1157,"end":1186,"value":"provider.middleware.invalid","raw":"'provider.middleware.invalid'"},{"type":"MemberExpression","start":1188,"end":1194,"object":{"type":"Identifier","start":1188,"end":1191,"name":"req"},"property":{"type":"Identifier","start":1192,"end":1194,"name":"id"},"computed":false}]}}]}},{"type":"ExpressionStatement","start":1206,"end":1212,"expression":{"type":"CallExpression","start":1206,"end":1212,"callee":{"type":"Identifier","start":1206,"end":1210,"name":"next"},"arguments":[]}}]}}}],"kind":"const"},{"type":"ReturnStatement","start":1220,"end":1237,"argument":{"type":"Identifier","start":1227,"end":1237,"name":"middleware"}}]}}}},{"type":"ExpressionStatement","start":1366,"end":1977,"expression":{"type":"AssignmentExpression","start":1366,"end":1977,"operator":"=","left":{"type":"MemberExpression","start":1366,"end":1400,"object":{"type":"MemberExpression","start":1366,"end":1380,"object":{"type":"Identifier","start":1366,"end":1372,"name":"module"},"property":{"type":"Identifier","start":1373,"end":1380,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":1381,"end":1400,"name":"getDefaultProviders"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1403,"end":1977,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1404,"end":1420,"name":"companionOptions"}],"body":{"type":"BlockStatement","start":1425,"end":1977,"body":[{"type":"VariableDeclaration","start":1429,"end":1502,"declarations":[{"type":"VariableDeclarator","start":1435,"end":1502,"id":{"type":"ObjectPattern","start":1435,"end":1454,"properties":[{"type":"Property","start":1437,"end":1452,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1437,"end":1452,"name":"providerOptions"},"kind":"init","value":{"type":"Identifier","start":1437,"end":1452,"name":"providerOptions"}}]},"init":{"type":"LogicalExpression","start":1457,"end":1502,"left":{"type":"Identifier","start":1457,"end":1473,"name":"companionOptions"},"operator":"||","right":{"type":"ObjectExpression","start":1477,"end":1502,"properties":[{"type":"Property","start":1479,"end":1500,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1479,"end":1494,"name":"providerOptions"},"value":{"type":"Literal","start":1496,"end":1500,"value":null,"raw":"null"},"kind":"init"}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1585,"end":1641,"declarations":[{"type":"VariableDeclarator","start":1591,"end":1641,"id":{"type":"Identifier","start":1591,"end":1600,"name":"providers"},"init":{"type":"ObjectExpression","start":1603,"end":1641,"properties":[{"type":"Property","start":1605,"end":1612,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1605,"end":1612,"name":"dropbox"},"kind":"init","value":{"type":"Identifier","start":1605,"end":1612,"name":"dropbox"}},{"type":"Property","start":1614,"end":1619,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1614,"end":1619,"name":"drive"},"kind":"init","value":{"type":"Identifier","start":1614,"end":1619,"name":"drive"}},{"type":"Property","start":1621,"end":1629,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1621,"end":1629,"name":"facebook"},"kind":"init","value":{"type":"Identifier","start":1621,"end":1629,"name":"facebook"}},{"type":"Property","start":1631,"end":1639,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1631,"end":1639,"name":"onedrive"},"kind":"init","value":{"type":"Identifier","start":1631,"end":1639,"name":"onedrive"}}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1721,"end":1791,"declarations":[{"type":"VariableDeclarator","start":1727,"end":1791,"id":{"type":"Identifier","start":1727,"end":1739,"name":"usesGraphAPI"},"init":{"type":"ArrowFunctionExpression","start":1742,"end":1791,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":1748,"end":1791,"callee":{"type":"MemberExpression","start":1748,"end":1760,"object":{"type":"Literal","start":1748,"end":1755,"value":{},"raw":"/^\\d+$/","regex":{"pattern":"^\\d+$","flags":""}},"property":{"type":"Identifier","start":1756,"end":1760,"name":"test"},"computed":false},"arguments":[{"type":"MemberExpression","start":1761,"end":1790,"object":{"type":"MemberExpression","start":1761,"end":1786,"object":{"type":"Identifier","start":1761,"end":1776,"name":"providerOptions"},"property":{"type":"Identifier","start":1777,"end":1786,"name":"instagram"},"computed":false},"property":{"type":"Identifier","start":1787,"end":1790,"name":"key"},"computed":false}]}}}],"kind":"const"},{"type":"IfStatement","start":1794,"end":1955,"test":{"type":"LogicalExpression","start":1798,"end":1860,"left":{"type":"LogicalExpression","start":1798,"end":1842,"left":{"type":"Identifier","start":1798,"end":1813,"name":"providerOptions"},"operator":"&&","right":{"type":"MemberExpression","start":1817,"end":1842,"object":{"type":"Identifier","start":1817,"end":1832,"name":"providerOptions"},"property":{"type":"Identifier","start":1833,"end":1842,"name":"instagram"},"computed":false}},"operator":"&&","right":{"type":"CallExpression","start":1846,"end":1860,"callee":{"type":"Identifier","start":1846,"end":1858,"name":"usesGraphAPI"},"arguments":[]}},"consequent":{"type":"BlockStatement","start":1862,"end":1908,"body":[{"type":"ExpressionStatement","start":1868,"end":1904,"expression":{"type":"AssignmentExpression","start":1868,"end":1904,"operator":"=","left":{"type":"MemberExpression","start":1868,"end":1887,"object":{"type":"Identifier","start":1868,"end":1877,"name":"providers"},"property":{"type":"Identifier","start":1878,"end":1887,"name":"instagram"},"computed":false},"right":{"type":"Identifier","start":1890,"end":1904,"name":"instagramGraph"}}}]},"alternate":{"type":"BlockStatement","start":1914,"end":1955,"body":[{"type":"ExpressionStatement","start":1920,"end":1951,"expression":{"type":"AssignmentExpression","start":1920,"end":1951,"operator":"=","left":{"type":"MemberExpression","start":1920,"end":1939,"object":{"type":"Identifier","start":1920,"end":1929,"name":"providers"},"property":{"type":"Identifier","start":1930,"end":1939,"name":"instagram"},"computed":false},"right":{"type":"Identifier","start":1942,"end":1951,"name":"instagram"}}}]}},{"type":"ReturnStatement","start":1959,"end":1975,"argument":{"type":"Identifier","start":1966,"end":1975,"name":"providers"}}]}}}},{"type":"ExpressionStatement","start":2210,"end":2494,"expression":{"type":"AssignmentExpression","start":2210,"end":2494,"operator":"=","left":{"type":"MemberExpression","start":2210,"end":2243,"object":{"type":"MemberExpression","start":2210,"end":2224,"object":{"type":"Identifier","start":2210,"end":2216,"name":"module"},"property":{"type":"Identifier","start":2217,"end":2224,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2225,"end":2243,"name":"addCustomProviders"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2246,"end":2494,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2247,"end":2262,"name":"customProviders"},{"type":"Identifier","start":2264,"end":2273,"name":"providers"},{"type":"Identifier","start":2275,"end":2286,"name":"grantConfig"}],"body":{"type":"BlockStatement","start":2291,"end":2494,"body":[{"type":"ExpressionStatement","start":2295,"end":2492,"expression":{"type":"CallExpression","start":2295,"end":2492,"callee":{"type":"MemberExpression","start":2295,"end":2331,"object":{"type":"CallExpression","start":2295,"end":2323,"callee":{"type":"MemberExpression","start":2295,"end":2306,"object":{"type":"Identifier","start":2295,"end":2301,"name":"Object"},"property":{"type":"Identifier","start":2302,"end":2306,"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":2307,"end":2322,"name":"customProviders"}]},"property":{"type":"Identifier","start":2324,"end":2331,"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2332,"end":2491,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2333,"end":2345,"name":"providerName"}],"body":{"type":"BlockStatement","start":2350,"end":2491,"body":[{"type":"ExpressionStatement","start":2356,"end":2418,"expression":{"type":"AssignmentExpression","start":2356,"end":2418,"operator":"=","left":{"type":"MemberExpression","start":2356,"end":2379,"object":{"type":"Identifier","start":2356,"end":2365,"name":"providers"},"property":{"type":"Identifier","start":2366,"end":2378,"name":"providerName"},"computed":true},"right":{"type":"MemberExpression","start":2382,"end":2418,"object":{"type":"MemberExpression","start":2382,"end":2411,"object":{"type":"Identifier","start":2382,"end":2397,"name":"customProviders"},"property":{"type":"Identifier","start":2398,"end":2410,"name":"providerName"},"computed":true},"property":{"type":"Identifier","start":2412,"end":2418,"name":"module"},"computed":false}}},{"type":"ExpressionStatement","start":2423,"end":2487,"expression":{"type":"AssignmentExpression","start":2423,"end":2487,"operator":"=","left":{"type":"MemberExpression","start":2423,"end":2448,"object":{"type":"Identifier","start":2423,"end":2434,"name":"grantConfig"},"property":{"type":"Identifier","start":2435,"end":2447,"name":"providerName"},"computed":true},"right":{"type":"MemberExpression","start":2451,"end":2487,"object":{"type":"MemberExpression","start":2451,"end":2480,"object":{"type":"Identifier","start":2451,"end":2466,"name":"customProviders"},"property":{"type":"Identifier","start":2467,"end":2479,"name":"providerName"},"computed":true},"property":{"type":"Identifier","start":2481,"end":2487,"name":"config"},"computed":false}}}]}}]}}]}}}},{"type":"ExpressionStatement","start":2609,"end":4558,"expression":{"type":"AssignmentExpression","start":2609,"end":4558,"operator":"=","left":{"type":"MemberExpression","start":2609,"end":2642,"object":{"type":"MemberExpression","start":2609,"end":2623,"object":{"type":"Identifier","start":2609,"end":2615,"name":"module"},"property":{"type":"Identifier","start":2616,"end":2623,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2624,"end":2642,"name":"addProviderOptions"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2645,"end":4558,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2646,"end":2662,"name":"companionOptions"},{"type":"Identifier","start":2664,"end":2675,"name":"grantConfig"}],"body":{"type":"BlockStatement","start":2680,"end":4558,"body":[{"type":"VariableDeclaration","start":2684,"end":2736,"declarations":[{"type":"VariableDeclarator","start":2690,"end":2736,"id":{"type":"ObjectPattern","start":2690,"end":2717,"properties":[{"type":"Property","start":2692,"end":2698,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2692,"end":2698,"name":"server"},"kind":"init","value":{"type":"Identifier","start":2692,"end":2698,"name":"server"}},{"type":"Property","start":2700,"end":2715,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2700,"end":2715,"name":"providerOptions"},"kind":"init","value":{"type":"Identifier","start":2700,"end":2715,"name":"providerOptions"}}]},"init":{"type":"Identifier","start":2720,"end":2736,"name":"companionOptions"}}],"kind":"const"},{"type":"IfStatement","start":2739,"end":2897,"test":{"type":"UnaryExpression","start":2743,"end":2768,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":2744,"end":2768,"callee":{"type":"Identifier","start":2744,"end":2756,"name":"validOptions"},"arguments":[{"type":"ObjectExpression","start":2757,"end":2767,"properties":[{"type":"Property","start":2759,"end":2765,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2759,"end":2765,"name":"server"},"kind":"init","value":{"type":"Identifier","start":2759,"end":2765,"name":"server"}}]}]}},"consequent":{"type":"BlockStatement","start":2770,"end":2897,"body":[{"type":"ExpressionStatement","start":2776,"end":2882,"expression":{"type":"CallExpression","start":2776,"end":2882,"callee":{"type":"MemberExpression","start":2776,"end":2787,"object":{"type":"Identifier","start":2776,"end":2782,"name":"logger"},"property":{"type":"Identifier","start":2783,"end":2787,"name":"warn"},"computed":false},"arguments":[{"type":"Literal","start":2788,"end":2853,"value":"invalid provider options detected. Providers will not be loaded","raw":"'invalid provider options detected. Providers will not be loaded'"},{"type":"Literal","start":2855,"end":2881,"value":"provider.options.invalid","raw":"'provider.options.invalid'"}]}},{"type":"ReturnStatement","start":2887,"end":2893,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":2901,"end":3005,"expression":{"type":"AssignmentExpression","start":2901,"end":3005,"operator":"=","left":{"type":"MemberExpression","start":2901,"end":2921,"object":{"type":"Identifier","start":2901,"end":2912,"name":"grantConfig"},"property":{"type":"Identifier","start":2913,"end":2921,"name":"defaults"},"computed":false},"right":{"type":"ObjectExpression","start":2924,"end":3005,"properties":[{"type":"Property","start":2930,"end":2947,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2930,"end":2934,"name":"host"},"value":{"type":"MemberExpression","start":2936,"end":2947,"object":{"type":"Identifier","start":2936,"end":2942,"name":"server"},"property":{"type":"Identifier","start":2943,"end":2947,"name":"host"},"computed":false},"kind":"init"},{"type":"Property","start":2953,"end":2978,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2953,"end":2961,"name":"protocol"},"value":{"type":"MemberExpression","start":2963,"end":2978,"object":{"type":"Identifier","start":2963,"end":2969,"name":"server"},"property":{"type":"Identifier","start":2970,"end":2978,"name":"protocol"},"computed":false},"kind":"init"},{"type":"Property","start":2984,"end":3001,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2984,"end":2988,"name":"path"},"value":{"type":"MemberExpression","start":2990,"end":3001,"object":{"type":"Identifier","start":2990,"end":2996,"name":"server"},"property":{"type":"Identifier","start":2997,"end":3001,"name":"path"},"computed":false},"kind":"init"}]}}},{"type":"VariableDeclaration","start":3009,"end":3039,"declarations":[{"type":"VariableDeclarator","start":3015,"end":3039,"id":{"type":"ObjectPattern","start":3015,"end":3030,"properties":[{"type":"Property","start":3017,"end":3028,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3017,"end":3028,"name":"oauthDomain"},"kind":"init","value":{"type":"Identifier","start":3017,"end":3028,"name":"oauthDomain"}}]},"init":{"type":"Identifier","start":3033,"end":3039,"name":"server"}}],"kind":"const"},{"type":"VariableDeclaration","start":3042,"end":3117,"declarations":[{"type":"VariableDeclarator","start":3048,"end":3117,"id":{"type":"Identifier","start":3048,"end":3052,"name":"keys"},"init":{"type":"CallExpression","start":3055,"end":3117,"callee":{"type":"MemberExpression","start":3055,"end":3090,"object":{"type":"CallExpression","start":3055,"end":3083,"callee":{"type":"MemberExpression","start":3055,"end":3066,"object":{"type":"Identifier","start":3055,"end":3061,"name":"Object"},"property":{"type":"Identifier","start":3062,"end":3066,"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":3067,"end":3082,"name":"providerOptions"}]},"property":{"type":"Identifier","start":3084,"end":3090,"name":"filter"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3091,"end":3116,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3092,"end":3095,"name":"key"}],"body":{"type":"BinaryExpression","start":3100,"end":3116,"left":{"type":"Identifier","start":3100,"end":3103,"name":"key"},"operator":"!==","right":{"type":"Literal","start":3108,"end":3116,"value":"server","raw":"'server'"}}}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3120,"end":4556,"expression":{"type":"CallExpression","start":3120,"end":4556,"callee":{"type":"MemberExpression","start":3120,"end":3132,"object":{"type":"Identifier","start":3120,"end":3124,"name":"keys"},"property":{"type":"Identifier","start":3125,"end":3132,"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3133,"end":4555,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3134,"end":3146,"name":"authProvider"}],"body":{"type":"BlockStatement","start":3151,"end":4555,"body":[{"type":"IfStatement","start":3157,"end":4551,"test":{"type":"MemberExpression","start":3161,"end":3186,"object":{"type":"Identifier","start":3161,"end":3172,"name":"grantConfig"},"property":{"type":"Identifier","start":3173,"end":3185,"name":"authProvider"},"computed":true},"consequent":{"type":"BlockStatement","start":3188,"end":4406,"body":[{"type":"ExpressionStatement","start":3283,"end":3348,"expression":{"type":"AssignmentExpression","start":3283,"end":3348,"operator":"=","left":{"type":"MemberExpression","start":3283,"end":3312,"object":{"type":"MemberExpression","start":3283,"end":3308,"object":{"type":"Identifier","start":3283,"end":3294,"name":"grantConfig"},"property":{"type":"Identifier","start":3295,"end":3307,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3309,"end":3312,"name":"key"},"computed":false},"right":{"type":"MemberExpression","start":3315,"end":3348,"object":{"type":"MemberExpression","start":3315,"end":3344,"object":{"type":"Identifier","start":3315,"end":3330,"name":"providerOptions"},"property":{"type":"Identifier","start":3331,"end":3343,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3345,"end":3348,"name":"key"},"computed":false}}},{"type":"ExpressionStatement","start":3355,"end":3426,"expression":{"type":"AssignmentExpression","start":3355,"end":3426,"operator":"=","left":{"type":"MemberExpression","start":3355,"end":3387,"object":{"type":"MemberExpression","start":3355,"end":3380,"object":{"type":"Identifier","start":3355,"end":3366,"name":"grantConfig"},"property":{"type":"Identifier","start":3367,"end":3379,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3381,"end":3387,"name":"secret"},"computed":false},"right":{"type":"MemberExpression","start":3390,"end":3426,"object":{"type":"MemberExpression","start":3390,"end":3419,"object":{"type":"Identifier","start":3390,"end":3405,"name":"providerOptions"},"property":{"type":"Identifier","start":3406,"end":3418,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3420,"end":3426,"name":"secret"},"computed":false}}},{"type":"VariableDeclaration","start":3433,"end":3510,"declarations":[{"type":"VariableDeclarator","start":3439,"end":3510,"id":{"type":"ObjectPattern","start":3439,"end":3457,"properties":[{"type":"Property","start":3441,"end":3449,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3441,"end":3449,"name":"provider"},"kind":"init","value":{"type":"Identifier","start":3441,"end":3449,"name":"provider"}},{"type":"Property","start":3451,"end":3455,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3451,"end":3455,"name":"name"},"kind":"init","value":{"type":"Identifier","start":3451,"end":3455,"name":"name"}}]},"init":{"type":"CallExpression","start":3460,"end":3510,"callee":{"type":"Identifier","start":3460,"end":3478,"name":"authNameToProvider"},"arguments":[{"type":"Identifier","start":3479,"end":3491,"name":"authProvider"},{"type":"Identifier","start":3493,"end":3509,"name":"companionOptions"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3517,"end":3584,"expression":{"type":"CallExpression","start":3517,"end":3584,"callee":{"type":"MemberExpression","start":3517,"end":3530,"object":{"type":"Identifier","start":3517,"end":3523,"name":"Object"},"property":{"type":"Identifier","start":3524,"end":3530,"name":"assign"},"computed":false},"arguments":[{"type":"MemberExpression","start":3531,"end":3556,"object":{"type":"Identifier","start":3531,"end":3542,"name":"grantConfig"},"property":{"type":"Identifier","start":3543,"end":3555,"name":"authProvider"},"computed":true},{"type":"CallExpression","start":3558,"end":3583,"callee":{"type":"MemberExpression","start":3558,"end":3581,"object":{"type":"Identifier","start":3558,"end":3566,"name":"provider"},"property":{"type":"Identifier","start":3567,"end":3581,"name":"getExtraConfig"},"computed":false},"arguments":[]}]}},{"type":"IfStatement","start":3669,"end":4038,"test":{"type":"Identifier","start":3673,"end":3684,"name":"oauthDomain"},"consequent":{"type":"BlockStatement","start":3686,"end":4038,"body":[{"type":"VariableDeclaration","start":3696,"end":3721,"declarations":[{"type":"VariableDeclarator","start":3702,"end":3721,"id":{"type":"Identifier","start":3702,"end":3714,"name":"providerName"},"init":{"type":"Identifier","start":3717,"end":3721,"name":"name"}}],"kind":"const"},{"type":"VariableDeclaration","start":3730,"end":3778,"declarations":[{"type":"VariableDeclarator","start":3736,"end":3778,"id":{"type":"Identifier","start":3736,"end":3748,"name":"redirectPath"},"init":{"type":"TemplateLiteral","start":3751,"end":3778,"expressions":[{"type":"Identifier","start":3755,"end":3767,"name":"providerName"}],"quasis":[{"type":"TemplateElement","start":3752,"end":3753,"value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","start":3768,"end":3777,"value":{"raw":"/redirect","cooked":"/redirect"},"tail":true}]}}],"kind":"const"},{"type":"VariableDeclaration","start":3787,"end":3827,"declarations":[{"type":"VariableDeclarator","start":3793,"end":3827,"id":{"type":"Identifier","start":3793,"end":3803,"name":"isExternal"},"init":{"type":"UnaryExpression","start":3806,"end":3827,"operator":"!","prefix":true,"argument":{"type":"UnaryExpression","start":3807,"end":3827,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":3808,"end":3827,"object":{"type":"Identifier","start":3808,"end":3814,"name":"server"},"property":{"type":"Identifier","start":3815,"end":3827,"name":"implicitPath"},"computed":false}}}}],"kind":"const"},{"type":"VariableDeclaration","start":3836,"end":3924,"declarations":[{"type":"VariableDeclarator","start":3842,"end":3924,"id":{"type":"Identifier","start":3842,"end":3858,"name":"fullRedirectPath"},"init":{"type":"CallExpression","start":3861,"end":3924,"callee":{"type":"CallExpression","start":3861,"end":3892,"callee":{"type":"Identifier","start":3861,"end":3874,"name":"getURLBuilder"},"arguments":[{"type":"Identifier","start":3875,"end":3891,"name":"companionOptions"}]},"arguments":[{"type":"Identifier","start":3893,"end":3905,"name":"redirectPath"},{"type":"Identifier","start":3907,"end":3917,"name":"isExternal"},{"type":"Literal","start":3919,"end":3923,"value":true,"raw":"true"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3933,"end":4030,"expression":{"type":"AssignmentExpression","start":3933,"end":4030,"operator":"=","left":{"type":"MemberExpression","start":3933,"end":3971,"object":{"type":"MemberExpression","start":3933,"end":3958,"object":{"type":"Identifier","start":3933,"end":3944,"name":"grantConfig"},"property":{"type":"Identifier","start":3945,"end":3957,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":3959,"end":3971,"name":"redirect_uri"},"computed":false},"right":{"type":"TemplateLiteral","start":3974,"end":4030,"expressions":[{"type":"MemberExpression","start":3977,"end":3992,"object":{"type":"Identifier","start":3977,"end":3983,"name":"server"},"property":{"type":"Identifier","start":3984,"end":3992,"name":"protocol"},"computed":false},{"type":"Identifier","start":3998,"end":4009,"name":"oauthDomain"},{"type":"Identifier","start":4012,"end":4028,"name":"fullRedirectPath"}],"quasis":[{"type":"TemplateElement","start":3975,"end":3975,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":3993,"end":3996,"value":{"raw":"://","cooked":"://"},"tail":false},{"type":"TemplateElement","start":4010,"end":4010,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4029,"end":4029,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"IfStatement","start":4046,"end":4400,"test":{"type":"MemberExpression","start":4050,"end":4069,"object":{"type":"Identifier","start":4050,"end":4056,"name":"server"},"property":{"type":"Identifier","start":4057,"end":4069,"name":"implicitPath"},"computed":false},"consequent":{"type":"BlockStatement","start":4071,"end":4269,"body":[{"type":"ExpressionStatement","start":4163,"end":4261,"expression":{"type":"AssignmentExpression","start":4163,"end":4261,"operator":"=","left":{"type":"MemberExpression","start":4163,"end":4197,"object":{"type":"MemberExpression","start":4163,"end":4188,"object":{"type":"Identifier","start":4163,"end":4174,"name":"grantConfig"},"property":{"type":"Identifier","start":4175,"end":4187,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4189,"end":4197,"name":"callback"},"computed":false},"right":{"type":"TemplateLiteral","start":4200,"end":4261,"expressions":[{"type":"MemberExpression","start":4203,"end":4222,"object":{"type":"Identifier","start":4203,"end":4209,"name":"server"},"property":{"type":"Identifier","start":4210,"end":4222,"name":"implicitPath"},"computed":false},{"type":"MemberExpression","start":4225,"end":4259,"object":{"type":"MemberExpression","start":4225,"end":4250,"object":{"type":"Identifier","start":4225,"end":4236,"name":"grantConfig"},"property":{"type":"Identifier","start":4237,"end":4249,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4251,"end":4259,"name":"callback"},"computed":false}],"quasis":[{"type":"TemplateElement","start":4201,"end":4201,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4223,"end":4223,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4260,"end":4260,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":{"type":"IfStatement","start":4275,"end":4400,"test":{"type":"MemberExpression","start":4279,"end":4290,"object":{"type":"Identifier","start":4279,"end":4285,"name":"server"},"property":{"type":"Identifier","start":4286,"end":4290,"name":"path"},"computed":false},"consequent":{"type":"BlockStatement","start":4292,"end":4400,"body":[{"type":"ExpressionStatement","start":4302,"end":4392,"expression":{"type":"AssignmentExpression","start":4302,"end":4392,"operator":"=","left":{"type":"MemberExpression","start":4302,"end":4336,"object":{"type":"MemberExpression","start":4302,"end":4327,"object":{"type":"Identifier","start":4302,"end":4313,"name":"grantConfig"},"property":{"type":"Identifier","start":4314,"end":4326,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4328,"end":4336,"name":"callback"},"computed":false},"right":{"type":"TemplateLiteral","start":4339,"end":4392,"expressions":[{"type":"MemberExpression","start":4342,"end":4353,"object":{"type":"Identifier","start":4342,"end":4348,"name":"server"},"property":{"type":"Identifier","start":4349,"end":4353,"name":"path"},"computed":false},{"type":"MemberExpression","start":4356,"end":4390,"object":{"type":"MemberExpression","start":4356,"end":4381,"object":{"type":"Identifier","start":4356,"end":4367,"name":"grantConfig"},"property":{"type":"Identifier","start":4368,"end":4380,"name":"authProvider"},"computed":true},"property":{"type":"Identifier","start":4382,"end":4390,"name":"callback"},"computed":false}],"quasis":[{"type":"TemplateElement","start":4340,"end":4340,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4354,"end":4354,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4391,"end":4391,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null}}]},"alternate":{"type":"IfStatement","start":4412,"end":4551,"test":{"type":"BinaryExpression","start":4416,"end":4437,"left":{"type":"Identifier","start":4416,"end":4428,"name":"authProvider"},"operator":"!==","right":{"type":"Literal","start":4433,"end":4437,"value":"s3","raw":"'s3'"}},"consequent":{"type":"BlockStatement","start":4439,"end":4551,"body":[{"type":"ExpressionStatement","start":4447,"end":4545,"expression":{"type":"CallExpression","start":4447,"end":4545,"callee":{"type":"MemberExpression","start":4447,"end":4458,"object":{"type":"Identifier","start":4447,"end":4453,"name":"logger"},"property":{"type":"Identifier","start":4454,"end":4458,"name":"warn"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":4459,"end":4519,"expressions":[{"type":"Identifier","start":4503,"end":4515,"name":"authProvider"}],"quasis":[{"type":"TemplateElement","start":4460,"end":4501,"value":{"raw":"skipping one found unsupported provider \"","cooked":"skipping one found unsupported provider \""},"tail":false},{"type":"TemplateElement","start":4516,"end":4518,"value":{"raw":"\".","cooked":"\"."},"tail":true}]},{"type":"Literal","start":4521,"end":4544,"value":"provider.options.skip","raw":"'provider.options.skip'"}]}}]},"alternate":null}}]}}]}}]}}}},{"type":"VariableDeclaration","start":4720,"end":5048,"declarations":[{"type":"VariableDeclarator","start":4726,"end":5048,"id":{"type":"Identifier","start":4726,"end":4744,"name":"authNameToProvider"},"init":{"type":"ArrowFunctionExpression","start":4747,"end":5048,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4748,"end":4760,"name":"authProvider"},{"type":"Identifier","start":4762,"end":4769,"name":"options"}],"body":{"type":"BlockStatement","start":4774,"end":5048,"body":[{"type":"VariableDeclaration","start":4778,"end":4832,"declarations":[{"type":"VariableDeclarator","start":4784,"end":4832,"id":{"type":"Identifier","start":4784,"end":4793,"name":"providers"},"init":{"type":"CallExpression","start":4796,"end":4832,"callee":{"type":"MemberExpression","start":4796,"end":4823,"object":{"type":"Identifier","start":4796,"end":4803,"name":"exports"},"property":{"type":"Identifier","start":4804,"end":4823,"name":"getDefaultProviders"},"computed":false},"arguments":[{"type":"Identifier","start":4824,"end":4831,"name":"options"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4835,"end":4879,"declarations":[{"type":"VariableDeclarator","start":4841,"end":4879,"id":{"type":"Identifier","start":4841,"end":4854,"name":"providerNames"},"init":{"type":"CallExpression","start":4857,"end":4879,"callee":{"type":"MemberExpression","start":4857,"end":4868,"object":{"type":"Identifier","start":4857,"end":4863,"name":"Object"},"property":{"type":"Identifier","start":4864,"end":4868,"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":4869,"end":4878,"name":"providers"}]}}],"kind":"const"},{"type":"ForOfStatement","start":4882,"end":5046,"await":false,"left":{"type":"VariableDeclaration","start":4887,"end":4897,"declarations":[{"type":"VariableDeclarator","start":4893,"end":4897,"id":{"type":"Identifier","start":4893,"end":4897,"name":"name"},"init":null}],"kind":"const"},"right":{"type":"Identifier","start":4901,"end":4914,"name":"providerNames"},"body":{"type":"BlockStatement","start":4916,"end":5046,"body":[{"type":"VariableDeclaration","start":4922,"end":4954,"declarations":[{"type":"VariableDeclarator","start":4928,"end":4954,"id":{"type":"Identifier","start":4928,"end":4936,"name":"provider"},"init":{"type":"MemberExpression","start":4939,"end":4954,"object":{"type":"Identifier","start":4939,"end":4948,"name":"providers"},"property":{"type":"Identifier","start":4949,"end":4953,"name":"name"},"computed":true}}],"kind":"const"},{"type":"IfStatement","start":4959,"end":5042,"test":{"type":"BinaryExpression","start":4963,"end":5001,"left":{"type":"MemberExpression","start":4963,"end":4984,"object":{"type":"Identifier","start":4963,"end":4971,"name":"provider"},"property":{"type":"Identifier","start":4972,"end":4984,"name":"authProvider"},"computed":false},"operator":"===","right":{"type":"Identifier","start":4989,"end":5001,"name":"authProvider"}},"consequent":{"type":"BlockStatement","start":5003,"end":5042,"body":[{"type":"ReturnStatement","start":5011,"end":5036,"argument":{"type":"ObjectExpression","start":5018,"end":5036,"properties":[{"type":"Property","start":5020,"end":5024,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5020,"end":5024,"name":"name"},"kind":"init","value":{"type":"Identifier","start":5020,"end":5024,"name":"name"}},{"type":"Property","start":5026,"end":5034,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5026,"end":5034,"name":"provider"},"kind":"init","value":{"type":"Identifier","start":5026,"end":5034,"name":"provider"}}]}}]},"alternate":null}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":5098,"end":5191,"declarations":[{"type":"VariableDeclarator","start":5104,"end":5191,"id":{"type":"Identifier","start":5104,"end":5116,"name":"validOptions"},"init":{"type":"ArrowFunctionExpression","start":5119,"end":5191,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5120,"end":5127,"name":"options"}],"body":{"type":"BlockStatement","start":5132,"end":5191,"body":[{"type":"ReturnStatement","start":5136,"end":5189,"argument":{"type":"LogicalExpression","start":5143,"end":5189,"left":{"type":"MemberExpression","start":5143,"end":5162,"object":{"type":"MemberExpression","start":5143,"end":5157,"object":{"type":"Identifier","start":5143,"end":5150,"name":"options"},"property":{"type":"Identifier","start":5151,"end":5157,"name":"server"},"computed":false},"property":{"type":"Identifier","start":5158,"end":5162,"name":"host"},"computed":false},"operator":"&&","right":{"type":"MemberExpression","start":5166,"end":5189,"object":{"type":"MemberExpression","start":5166,"end":5180,"object":{"type":"Identifier","start":5166,"end":5173,"name":"options"},"property":{"type":"Identifier","start":5174,"end":5180,"name":"server"},"computed":false},"property":{"type":"Identifier","start":5181,"end":5189,"name":"protocol"},"computed":false}}}]}}}],"kind":"const"}],"sourceType":"script"}