{"type":"Program","start":0,"end":2351,"loc":{"start":{"line":1,"column":0},"end":{"line":82,"column":0}},"body":[{"type":"VariableDeclaration","start":46,"end":92,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":46}},"declarations":[{"type":"VariableDeclarator","start":52,"end":92,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":46}},"id":{"type":"Identifier","start":52,"end":64,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":18}},"name":"tokenService"},"init":{"type":"CallExpression","start":67,"end":92,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":46}},"callee":{"type":"Identifier","start":67,"end":74,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":28}},"name":"require"},"arguments":[{"type":"Literal","start":75,"end":91,"loc":{"start":{"line":5,"column":29},"end":{"line":5,"column":45}},"value":"../helpers/jwt","raw":"'../helpers/jwt'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":93,"end":123,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"declarations":[{"type":"VariableDeclarator","start":99,"end":123,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":30}},"id":{"type":"ObjectPattern","start":99,"end":106,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":13}},"properties":[{"type":"Property","start":101,"end":104,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":11}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":101,"end":104,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":11}},"name":"URL"},"kind":"init","value":{"type":"Identifier","start":101,"end":104,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":11}},"name":"URL"}}]},"init":{"type":"CallExpression","start":109,"end":123,"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":30}},"callee":{"type":"Identifier","start":109,"end":116,"loc":{"start":{"line":6,"column":16},"end":{"line":6,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":117,"end":122,"loc":{"start":{"line":6,"column":24},"end":{"line":6,"column":29}},"value":"url","raw":"'url'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":124,"end":186,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":62}},"declarations":[{"type":"VariableDeclarator","start":130,"end":186,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":62}},"id":{"type":"ObjectPattern","start":130,"end":156,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":32}},"properties":[{"type":"Property","start":132,"end":140,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":132,"end":140,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"name":"hasMatch"},"kind":"init","value":{"type":"Identifier","start":132,"end":140,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"name":"hasMatch"}},{"type":"Property","start":142,"end":154,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":30}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":142,"end":154,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":30}},"name":"sanitizeHtml"},"kind":"init","value":{"type":"Identifier","start":142,"end":154,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":30}},"name":"sanitizeHtml"}}]},"init":{"type":"CallExpression","start":159,"end":186,"loc":{"start":{"line":7,"column":35},"end":{"line":7,"column":62}},"callee":{"type":"Identifier","start":159,"end":166,"loc":{"start":{"line":7,"column":35},"end":{"line":7,"column":42}},"name":"require"},"arguments":[{"type":"Literal","start":167,"end":185,"loc":{"start":{"line":7,"column":43},"end":{"line":7,"column":61}},"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":187,"end":239,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":52}},"declarations":[{"type":"VariableDeclarator","start":193,"end":239,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":52}},"id":{"type":"Identifier","start":193,"end":203,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":16}},"name":"oAuthState"},"init":{"type":"CallExpression","start":206,"end":239,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":52}},"callee":{"type":"Identifier","start":206,"end":213,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":26}},"name":"require"},"arguments":[{"type":"Literal","start":214,"end":238,"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":51}},"value":"../helpers/oauth-state","raw":"'../helpers/oauth-state'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":240,"end":288,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":48}},"declarations":[{"type":"VariableDeclarator","start":246,"end":288,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":48}},"id":{"type":"Identifier","start":246,"end":256,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":16}},"name":"versionCmp"},"init":{"type":"CallExpression","start":259,"end":288,"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":48}},"callee":{"type":"Identifier","start":259,"end":266,"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":26}},"name":"require"},"arguments":[{"type":"Literal","start":267,"end":287,"loc":{"start":{"line":9,"column":27},"end":{"line":9,"column":47}},"value":"../helpers/version","raw":"'../helpers/version'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":373,"end":1470,"loc":{"start":{"line":17,"column":0},"end":{"line":41,"column":1}},"expression":{"type":"AssignmentExpression","start":373,"end":1470,"loc":{"start":{"line":17,"column":0},"end":{"line":41,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":373,"end":387,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":14}},"object":{"type":"Identifier","start":373,"end":379,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":6}},"name":"module"},"property":{"type":"Identifier","start":380,"end":387,"loc":{"start":{"line":17,"column":7},"end":{"line":17,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":390,"end":1470,"loc":{"start":{"line":17,"column":17},"end":{"line":41,"column":1}},"id":{"type":"Identifier","start":399,"end":408,"loc":{"start":{"line":17,"column":26},"end":{"line":17,"column":35}},"name":"sendToken"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":410,"end":413,"loc":{"start":{"line":17,"column":37},"end":{"line":17,"column":40}},"name":"req"},{"type":"Identifier","start":415,"end":418,"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":45}},"name":"res"},{"type":"Identifier","start":420,"end":424,"loc":{"start":{"line":17,"column":47},"end":{"line":17,"column":51}},"name":"next"}],"body":{"type":"BlockStatement","start":426,"end":1470,"loc":{"start":{"line":17,"column":53},"end":{"line":41,"column":1}},"body":[{"type":"VariableDeclaration","start":430,"end":475,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":47}},"declarations":[{"type":"VariableDeclarator","start":436,"end":475,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":47}},"id":{"type":"Identifier","start":436,"end":449,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":21}},"name":"uppyAuthToken"},"init":{"type":"MemberExpression","start":452,"end":475,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":47}},"object":{"type":"MemberExpression","start":452,"end":465,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":37}},"object":{"type":"Identifier","start":452,"end":455,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":27}},"name":"req"},"property":{"type":"Identifier","start":456,"end":465,"loc":{"start":{"line":18,"column":28},"end":{"line":18,"column":37}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":466,"end":475,"loc":{"start":{"line":18,"column":38},"end":{"line":18,"column":47}},"name":"authToken"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":553,"end":712,"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"test":{"type":"MemberExpression","start":557,"end":595,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":44}},"object":{"type":"MemberExpression","start":557,"end":579,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":28}},"object":{"type":"MemberExpression","start":557,"end":570,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":19}},"object":{"type":"Identifier","start":557,"end":560,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":9}},"name":"req"},"property":{"type":"Identifier","start":561,"end":570,"loc":{"start":{"line":20,"column":10},"end":{"line":20,"column":19}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":571,"end":579,"loc":{"start":{"line":20,"column":20},"end":{"line":20,"column":28}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":580,"end":595,"loc":{"start":{"line":20,"column":29},"end":{"line":20,"column":44}},"name":"needsCookieAuth"},"computed":false},"consequent":{"type":"BlockStatement","start":597,"end":712,"loc":{"start":{"line":20,"column":46},"end":{"line":22,"column":3}},"body":[{"type":"ExpressionStatement","start":603,"end":708,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":109}},"expression":{"type":"CallExpression","start":603,"end":708,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":109}},"callee":{"type":"MemberExpression","start":603,"end":628,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":29}},"object":{"type":"Identifier","start":603,"end":615,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":16}},"name":"tokenService"},"property":{"type":"Identifier","start":616,"end":628,"loc":{"start":{"line":21,"column":17},"end":{"line":21,"column":29}},"name":"addToCookies"},"computed":false},"arguments":[{"type":"Identifier","start":629,"end":632,"loc":{"start":{"line":21,"column":30},"end":{"line":21,"column":33}},"name":"res"},{"type":"Identifier","start":634,"end":647,"loc":{"start":{"line":21,"column":35},"end":{"line":21,"column":48}},"name":"uppyAuthToken"},{"type":"MemberExpression","start":649,"end":670,"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":71}},"object":{"type":"MemberExpression","start":649,"end":662,"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":63}},"object":{"type":"Identifier","start":649,"end":652,"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":53}},"name":"req"},"property":{"type":"Identifier","start":653,"end":662,"loc":{"start":{"line":21,"column":54},"end":{"line":21,"column":63}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":663,"end":670,"loc":{"start":{"line":21,"column":64},"end":{"line":21,"column":71}},"name":"options"},"computed":false},{"type":"MemberExpression","start":672,"end":707,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":108}},"object":{"type":"MemberExpression","start":672,"end":694,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":95}},"object":{"type":"MemberExpression","start":672,"end":685,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":86}},"object":{"type":"Identifier","start":672,"end":675,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":76}},"name":"req"},"property":{"type":"Identifier","start":676,"end":685,"loc":{"start":{"line":21,"column":77},"end":{"line":21,"column":86}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":686,"end":694,"loc":{"start":{"line":21,"column":87},"end":{"line":21,"column":95}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":695,"end":707,"loc":{"start":{"line":21,"column":96},"end":{"line":21,"column":108}},"name":"authProvider"},"computed":false}]}}]},"alternate":null},{"type":"VariableDeclaration","start":716,"end":771,"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":57}},"declarations":[{"type":"VariableDeclarator","start":722,"end":771,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":57}},"id":{"type":"Identifier","start":722,"end":729,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":15}},"name":"dynamic"},"init":{"type":"LogicalExpression","start":732,"end":771,"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":57}},"left":{"type":"MemberExpression","start":732,"end":765,"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":51}},"object":{"type":"LogicalExpression","start":733,"end":756,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":42}},"left":{"type":"MemberExpression","start":733,"end":750,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":36}},"object":{"type":"MemberExpression","start":733,"end":744,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":30}},"object":{"type":"Identifier","start":733,"end":736,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":22}},"name":"req"},"property":{"type":"Identifier","start":737,"end":744,"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":30}},"name":"session"},"computed":false},"property":{"type":"Identifier","start":745,"end":750,"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":36}},"name":"grant"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":754,"end":756,"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":42}},"properties":[]}},"property":{"type":"Identifier","start":758,"end":765,"loc":{"start":{"line":24,"column":44},"end":{"line":24,"column":51}},"name":"dynamic"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":769,"end":771,"loc":{"start":{"line":24,"column":55},"end":{"line":24,"column":57}},"properties":[]}}}],"kind":"const"},{"type":"VariableDeclaration","start":774,"end":801,"loc":{"start":{"line":25,"column":2},"end":{"line":25,"column":29}},"declarations":[{"type":"VariableDeclarator","start":780,"end":801,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":29}},"id":{"type":"Identifier","start":780,"end":785,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":13}},"name":"state"},"init":{"type":"MemberExpression","start":788,"end":801,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":29}},"object":{"type":"Identifier","start":788,"end":795,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":23}},"name":"dynamic"},"property":{"type":"Identifier","start":796,"end":801,"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":29}},"name":"state"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":804,"end":1459,"loc":{"start":{"line":26,"column":2},"end":{"line":39,"column":3}},"test":{"type":"Identifier","start":808,"end":813,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":11}},"name":"state"},"consequent":{"type":"BlockStatement","start":815,"end":1459,"loc":{"start":{"line":26,"column":13},"end":{"line":39,"column":3}},"body":[{"type":"VariableDeclaration","start":821,"end":906,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":89}},"declarations":[{"type":"VariableDeclarator","start":827,"end":906,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":89}},"id":{"type":"Identifier","start":827,"end":833,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":16}},"name":"origin"},"init":{"type":"CallExpression","start":836,"end":906,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":89}},"callee":{"type":"MemberExpression","start":836,"end":859,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":42}},"object":{"type":"Identifier","start":836,"end":846,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":29}},"name":"oAuthState"},"property":{"type":"Identifier","start":847,"end":859,"loc":{"start":{"line":27,"column":30},"end":{"line":27,"column":42}},"name":"getFromState"},"computed":false},"arguments":[{"type":"Identifier","start":860,"end":865,"loc":{"start":{"line":27,"column":43},"end":{"line":27,"column":48}},"name":"state"},{"type":"Literal","start":867,"end":875,"loc":{"start":{"line":27,"column":50},"end":{"line":27,"column":58}},"value":"origin","raw":"'origin'"},{"type":"MemberExpression","start":877,"end":905,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":88}},"object":{"type":"MemberExpression","start":877,"end":898,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":81}},"object":{"type":"MemberExpression","start":877,"end":890,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":73}},"object":{"type":"Identifier","start":877,"end":880,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":63}},"name":"req"},"property":{"type":"Identifier","start":881,"end":890,"loc":{"start":{"line":27,"column":64},"end":{"line":27,"column":73}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":891,"end":898,"loc":{"start":{"line":27,"column":74},"end":{"line":27,"column":81}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":899,"end":905,"loc":{"start":{"line":27,"column":82},"end":{"line":27,"column":88}},"name":"secret"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":911,"end":1034,"loc":{"start":{"line":28,"column":4},"end":{"line":32,"column":5}},"declarations":[{"type":"VariableDeclarator","start":917,"end":1034,"loc":{"start":{"line":28,"column":10},"end":{"line":32,"column":5}},"id":{"type":"Identifier","start":917,"end":930,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":23}},"name":"clientVersion"},"init":{"type":"CallExpression","start":933,"end":1034,"loc":{"start":{"line":28,"column":26},"end":{"line":32,"column":5}},"callee":{"type":"MemberExpression","start":933,"end":956,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":49}},"object":{"type":"Identifier","start":933,"end":943,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":36}},"name":"oAuthState"},"property":{"type":"Identifier","start":944,"end":956,"loc":{"start":{"line":28,"column":37},"end":{"line":28,"column":49}},"name":"getFromState"},"computed":false},"arguments":[{"type":"Identifier","start":964,"end":969,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":11}},"name":"state"},{"type":"Literal","start":977,"end":992,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":21}},"value":"clientVersion","raw":"'clientVersion'"},{"type":"MemberExpression","start":1000,"end":1028,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":34}},"object":{"type":"MemberExpression","start":1000,"end":1021,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":27}},"object":{"type":"MemberExpression","start":1000,"end":1013,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":19}},"object":{"type":"Identifier","start":1000,"end":1003,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":9}},"name":"req"},"property":{"type":"Identifier","start":1004,"end":1013,"loc":{"start":{"line":31,"column":10},"end":{"line":31,"column":19}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1014,"end":1021,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":27}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1022,"end":1028,"loc":{"start":{"line":31,"column":28},"end":{"line":31,"column":34}},"name":"secret"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1039,"end":1091,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":56}},"declarations":[{"type":"VariableDeclarator","start":1045,"end":1091,"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":56}},"id":{"type":"Identifier","start":1045,"end":1059,"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":24}},"name":"allowedClients"},"init":{"type":"MemberExpression","start":1062,"end":1091,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":56}},"object":{"type":"MemberExpression","start":1062,"end":1083,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":48}},"object":{"type":"MemberExpression","start":1062,"end":1075,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":40}},"object":{"type":"Identifier","start":1062,"end":1065,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":30}},"name":"req"},"property":{"type":"Identifier","start":1066,"end":1075,"loc":{"start":{"line":33,"column":31},"end":{"line":33,"column":40}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1076,"end":1083,"loc":{"start":{"line":33,"column":41},"end":{"line":33,"column":48}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1084,"end":1091,"loc":{"start":{"line":33,"column":49},"end":{"line":33,"column":56}},"name":"clients"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1146,"end":1455,"loc":{"start":{"line":35,"column":4},"end":{"line":38,"column":5}},"test":{"type":"LogicalExpression","start":1150,"end":1253,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":111}},"left":{"type":"LogicalExpression","start":1150,"end":1201,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":59}},"left":{"type":"UnaryExpression","start":1150,"end":1165,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":23}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1151,"end":1165,"loc":{"start":{"line":35,"column":9},"end":{"line":35,"column":23}},"name":"allowedClients"}},"operator":"||","right":{"type":"CallExpression","start":1169,"end":1201,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":59}},"callee":{"type":"Identifier","start":1169,"end":1177,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":35}},"name":"hasMatch"},"arguments":[{"type":"Identifier","start":1178,"end":1184,"loc":{"start":{"line":35,"column":36},"end":{"line":35,"column":42}},"name":"origin"},{"type":"Identifier","start":1186,"end":1200,"loc":{"start":{"line":35,"column":44},"end":{"line":35,"column":58}},"name":"allowedClients"}]}},"operator":"||","right":{"type":"CallExpression","start":1205,"end":1253,"loc":{"start":{"line":35,"column":63},"end":{"line":35,"column":111}},"callee":{"type":"Identifier","start":1205,"end":1213,"loc":{"start":{"line":35,"column":63},"end":{"line":35,"column":71}},"name":"hasMatch"},"arguments":[{"type":"MemberExpression","start":1214,"end":1236,"loc":{"start":{"line":35,"column":72},"end":{"line":35,"column":94}},"object":{"type":"NewExpression","start":1215,"end":1230,"loc":{"start":{"line":35,"column":73},"end":{"line":35,"column":88}},"callee":{"type":"Identifier","start":1219,"end":1222,"loc":{"start":{"line":35,"column":77},"end":{"line":35,"column":80}},"name":"URL"},"arguments":[{"type":"Identifier","start":1223,"end":1229,"loc":{"start":{"line":35,"column":81},"end":{"line":35,"column":87}},"name":"origin"}]},"property":{"type":"Identifier","start":1232,"end":1236,"loc":{"start":{"line":35,"column":90},"end":{"line":35,"column":94}},"name":"host"},"computed":false},{"type":"Identifier","start":1238,"end":1252,"loc":{"start":{"line":35,"column":96},"end":{"line":35,"column":110}},"name":"allowedClients"}]}},"consequent":{"type":"BlockStatement","start":1255,"end":1455,"loc":{"start":{"line":35,"column":113},"end":{"line":38,"column":5}},"body":[{"type":"VariableDeclaration","start":1263,"end":1329,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":72}},"declarations":[{"type":"VariableDeclarator","start":1269,"end":1329,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":72}},"id":{"type":"Identifier","start":1269,"end":1288,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":31}},"name":"allowsStringMessage"},"init":{"type":"CallExpression","start":1291,"end":1329,"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":72}},"callee":{"type":"MemberExpression","start":1291,"end":1305,"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":48}},"object":{"type":"Identifier","start":1291,"end":1301,"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":44}},"name":"versionCmp"},"property":{"type":"Identifier","start":1302,"end":1305,"loc":{"start":{"line":36,"column":45},"end":{"line":36,"column":48}},"name":"gte"},"computed":false},"arguments":[{"type":"Identifier","start":1306,"end":1319,"loc":{"start":{"line":36,"column":49},"end":{"line":36,"column":62}},"name":"clientVersion"},{"type":"Literal","start":1321,"end":1328,"loc":{"start":{"line":36,"column":64},"end":{"line":36,"column":71}},"value":"1.0.2","raw":"'1.0.2'"}]}}],"kind":"const"},{"type":"ReturnStatement","start":1336,"end":1449,"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":119}},"argument":{"type":"CallExpression","start":1343,"end":1449,"loc":{"start":{"line":37,"column":13},"end":{"line":37,"column":119}},"callee":{"type":"MemberExpression","start":1343,"end":1351,"loc":{"start":{"line":37,"column":13},"end":{"line":37,"column":21}},"object":{"type":"Identifier","start":1343,"end":1346,"loc":{"start":{"line":37,"column":13},"end":{"line":37,"column":16}},"name":"res"},"property":{"type":"Identifier","start":1347,"end":1351,"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":21}},"name":"send"},"computed":false},"arguments":[{"type":"ConditionalExpression","start":1352,"end":1448,"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":118}},"test":{"type":"Identifier","start":1352,"end":1371,"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":41}},"name":"allowsStringMessage"},"consequent":{"type":"CallExpression","start":1374,"end":1408,"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":78}},"callee":{"type":"Identifier","start":1374,"end":1385,"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":55}},"name":"htmlContent"},"arguments":[{"type":"Identifier","start":1386,"end":1399,"loc":{"start":{"line":37,"column":56},"end":{"line":37,"column":69}},"name":"uppyAuthToken"},{"type":"Identifier","start":1401,"end":1407,"loc":{"start":{"line":37,"column":71},"end":{"line":37,"column":77}},"name":"origin"}]},"alternate":{"type":"CallExpression","start":1411,"end":1448,"loc":{"start":{"line":37,"column":81},"end":{"line":37,"column":118}},"callee":{"type":"Identifier","start":1411,"end":1425,"loc":{"start":{"line":37,"column":81},"end":{"line":37,"column":95}},"name":"oldHtmlContent"},"arguments":[{"type":"Identifier","start":1426,"end":1439,"loc":{"start":{"line":37,"column":96},"end":{"line":37,"column":109}},"name":"uppyAuthToken"},{"type":"Identifier","start":1441,"end":1447,"loc":{"start":{"line":37,"column":111},"end":{"line":37,"column":117}},"name":"origin"}]}}]}}]},"alternate":null}]},"alternate":null},{"type":"ExpressionStatement","start":1462,"end":1468,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":8}},"expression":{"type":"CallExpression","start":1462,"end":1468,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":8}},"callee":{"type":"Identifier","start":1462,"end":1466,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":6}},"name":"next"},"arguments":[]}}]}}}},{"type":"VariableDeclaration","start":1561,"end":1892,"loc":{"start":{"line":48,"column":0},"end":{"line":61,"column":1}},"declarations":[{"type":"VariableDeclarator","start":1567,"end":1892,"loc":{"start":{"line":48,"column":6},"end":{"line":61,"column":1}},"id":{"type":"Identifier","start":1567,"end":1578,"loc":{"start":{"line":48,"column":6},"end":{"line":48,"column":17}},"name":"htmlContent"},"init":{"type":"ArrowFunctionExpression","start":1581,"end":1892,"loc":{"start":{"line":48,"column":20},"end":{"line":61,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1582,"end":1587,"loc":{"start":{"line":48,"column":21},"end":{"line":48,"column":26}},"name":"token"},{"type":"Identifier","start":1589,"end":1595,"loc":{"start":{"line":48,"column":28},"end":{"line":48,"column":34}},"name":"origin"}],"body":{"type":"BlockStatement","start":1600,"end":1892,"loc":{"start":{"line":48,"column":39},"end":{"line":61,"column":1}},"body":[{"type":"ReturnStatement","start":1604,"end":1890,"loc":{"start":{"line":49,"column":2},"end":{"line":60,"column":12}},"argument":{"type":"TemplateLiteral","start":1611,"end":1890,"loc":{"start":{"line":49,"column":9},"end":{"line":60,"column":12}},"expressions":[{"type":"Identifier","start":1767,"end":1772,"loc":{"start":{"line":55,"column":62},"end":{"line":55,"column":67}},"name":"token"},{"type":"CallExpression","start":1781,"end":1801,"loc":{"start":{"line":55,"column":76},"end":{"line":55,"column":96}},"callee":{"type":"Identifier","start":1781,"end":1793,"loc":{"start":{"line":55,"column":76},"end":{"line":55,"column":88}},"name":"sanitizeHtml"},"arguments":[{"type":"Identifier","start":1794,"end":1800,"loc":{"start":{"line":55,"column":89},"end":{"line":55,"column":95}},"name":"origin"}]}],"quasis":[{"type":"TemplateElement","start":1612,"end":1765,"loc":{"start":{"line":49,"column":10},"end":{"line":55,"column":60}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \""},"tail":false},{"type":"TemplateElement","start":1773,"end":1779,"loc":{"start":{"line":55,"column":68},"end":{"line":55,"column":74}},"value":{"raw":"\"}), \"","cooked":"\"}), \""},"tail":false},{"type":"TemplateElement","start":1802,"end":1889,"loc":{"start":{"line":55,"column":97},"end":{"line":60,"column":11}},"value":{"raw":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":2032,"end":2350,"loc":{"start":{"line":68,"column":0},"end":{"line":81,"column":1}},"declarations":[{"type":"VariableDeclarator","start":2038,"end":2350,"loc":{"start":{"line":68,"column":6},"end":{"line":81,"column":1}},"id":{"type":"Identifier","start":2038,"end":2052,"loc":{"start":{"line":68,"column":6},"end":{"line":68,"column":20}},"name":"oldHtmlContent"},"init":{"type":"ArrowFunctionExpression","start":2055,"end":2350,"loc":{"start":{"line":68,"column":23},"end":{"line":81,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2056,"end":2061,"loc":{"start":{"line":68,"column":24},"end":{"line":68,"column":29}},"name":"token"},{"type":"Identifier","start":2063,"end":2069,"loc":{"start":{"line":68,"column":31},"end":{"line":68,"column":37}},"name":"origin"}],"body":{"type":"BlockStatement","start":2074,"end":2350,"loc":{"start":{"line":68,"column":42},"end":{"line":81,"column":1}},"body":[{"type":"ReturnStatement","start":2078,"end":2348,"loc":{"start":{"line":69,"column":2},"end":{"line":80,"column":12}},"argument":{"type":"TemplateLiteral","start":2085,"end":2348,"loc":{"start":{"line":69,"column":9},"end":{"line":80,"column":12}},"expressions":[{"type":"Identifier","start":2226,"end":2231,"loc":{"start":{"line":75,"column":47},"end":{"line":75,"column":52}},"name":"token"},{"type":"CallExpression","start":2239,"end":2259,"loc":{"start":{"line":75,"column":60},"end":{"line":75,"column":80}},"callee":{"type":"Identifier","start":2239,"end":2251,"loc":{"start":{"line":75,"column":60},"end":{"line":75,"column":72}},"name":"sanitizeHtml"},"arguments":[{"type":"Identifier","start":2252,"end":2258,"loc":{"start":{"line":75,"column":73},"end":{"line":75,"column":79}},"name":"origin"}]}],"quasis":[{"type":"TemplateElement","start":2086,"end":2224,"loc":{"start":{"line":69,"column":10},"end":{"line":75,"column":45}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage({token: \""},"tail":false},{"type":"TemplateElement","start":2232,"end":2237,"loc":{"start":{"line":75,"column":53},"end":{"line":75,"column":58}},"value":{"raw":"\"}, \"","cooked":"\"}, \""},"tail":false},{"type":"TemplateElement","start":2260,"end":2347,"loc":{"start":{"line":75,"column":81},"end":{"line":80,"column":11}},"value":{"raw":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}]}}}],"kind":"const"}],"sourceType":"module"}