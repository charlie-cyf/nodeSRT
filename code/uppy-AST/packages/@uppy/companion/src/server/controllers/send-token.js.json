{"type":"Program","start":0,"end":2403,"loc":{"start":{"line":1,"column":0},"end":{"line":82,"column":0}},"body":[{"type":"VariableDeclaration","start":46,"end":92,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":46}},"declarations":[{"type":"VariableDeclarator","start":52,"end":92,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":46}},"id":{"type":"Identifier","start":52,"end":64,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":18}},"name":"tokenService"},"init":{"type":"CallExpression","start":67,"end":92,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":46}},"callee":{"type":"Identifier","start":67,"end":74,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":28}},"name":"require"},"arguments":[{"type":"Literal","start":75,"end":91,"loc":{"start":{"line":5,"column":29},"end":{"line":5,"column":45}},"value":"../helpers/jwt","raw":"'../helpers/jwt'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":93,"end":130,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":37}},"declarations":[{"type":"VariableDeclarator","start":99,"end":130,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":37}},"id":{"type":"Identifier","start":99,"end":107,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":14}},"name":"parseUrl"},"init":{"type":"MemberExpression","start":110,"end":130,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":37}},"object":{"type":"CallExpression","start":110,"end":124,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":31}},"callee":{"type":"Identifier","start":110,"end":117,"loc":{"start":{"line":6,"column":17},"end":{"line":6,"column":24}},"name":"require"},"arguments":[{"type":"Literal","start":118,"end":123,"loc":{"start":{"line":6,"column":25},"end":{"line":6,"column":30}},"value":"url","raw":"'url'"}]},"property":{"type":"Identifier","start":125,"end":130,"loc":{"start":{"line":6,"column":32},"end":{"line":6,"column":37}},"name":"parse"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":177,"end":239,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":62}},"declarations":[{"type":"VariableDeclarator","start":183,"end":239,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":62}},"id":{"type":"ObjectPattern","start":183,"end":209,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":32}},"properties":[{"type":"Property","start":185,"end":193,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":185,"end":193,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"name":"hasMatch"},"kind":"init","value":{"type":"Identifier","start":185,"end":193,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":16}},"name":"hasMatch"}},{"type":"Property","start":195,"end":207,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":30}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":195,"end":207,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":30}},"name":"sanitizeHtml"},"kind":"init","value":{"type":"Identifier","start":195,"end":207,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":30}},"name":"sanitizeHtml"}}]},"init":{"type":"CallExpression","start":212,"end":239,"loc":{"start":{"line":7,"column":35},"end":{"line":7,"column":62}},"callee":{"type":"Identifier","start":212,"end":219,"loc":{"start":{"line":7,"column":35},"end":{"line":7,"column":42}},"name":"require"},"arguments":[{"type":"Literal","start":220,"end":238,"loc":{"start":{"line":7,"column":43},"end":{"line":7,"column":61}},"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":240,"end":292,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":52}},"declarations":[{"type":"VariableDeclarator","start":246,"end":292,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":52}},"id":{"type":"Identifier","start":246,"end":256,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":16}},"name":"oAuthState"},"init":{"type":"CallExpression","start":259,"end":292,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":52}},"callee":{"type":"Identifier","start":259,"end":266,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":26}},"name":"require"},"arguments":[{"type":"Literal","start":267,"end":291,"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":51}},"value":"../helpers/oauth-state","raw":"'../helpers/oauth-state'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":293,"end":341,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":48}},"declarations":[{"type":"VariableDeclarator","start":299,"end":341,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":48}},"id":{"type":"Identifier","start":299,"end":309,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":16}},"name":"versionCmp"},"init":{"type":"CallExpression","start":312,"end":341,"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":48}},"callee":{"type":"Identifier","start":312,"end":319,"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":26}},"name":"require"},"arguments":[{"type":"Literal","start":320,"end":340,"loc":{"start":{"line":9,"column":27},"end":{"line":9,"column":47}},"value":"../helpers/version","raw":"'../helpers/version'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":426,"end":1522,"loc":{"start":{"line":17,"column":0},"end":{"line":41,"column":1}},"expression":{"type":"AssignmentExpression","start":426,"end":1522,"loc":{"start":{"line":17,"column":0},"end":{"line":41,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":426,"end":440,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":14}},"object":{"type":"Identifier","start":426,"end":432,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":6}},"name":"module"},"property":{"type":"Identifier","start":433,"end":440,"loc":{"start":{"line":17,"column":7},"end":{"line":17,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":443,"end":1522,"loc":{"start":{"line":17,"column":17},"end":{"line":41,"column":1}},"id":{"type":"Identifier","start":452,"end":461,"loc":{"start":{"line":17,"column":26},"end":{"line":17,"column":35}},"name":"sendToken"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":463,"end":466,"loc":{"start":{"line":17,"column":37},"end":{"line":17,"column":40}},"name":"req"},{"type":"Identifier","start":468,"end":471,"loc":{"start":{"line":17,"column":42},"end":{"line":17,"column":45}},"name":"res"},{"type":"Identifier","start":473,"end":477,"loc":{"start":{"line":17,"column":47},"end":{"line":17,"column":51}},"name":"next"}],"body":{"type":"BlockStatement","start":479,"end":1522,"loc":{"start":{"line":17,"column":53},"end":{"line":41,"column":1}},"body":[{"type":"VariableDeclaration","start":483,"end":528,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":47}},"declarations":[{"type":"VariableDeclarator","start":489,"end":528,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":47}},"id":{"type":"Identifier","start":489,"end":502,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":21}},"name":"uppyAuthToken"},"init":{"type":"MemberExpression","start":505,"end":528,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":47}},"object":{"type":"MemberExpression","start":505,"end":518,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":37}},"object":{"type":"Identifier","start":505,"end":508,"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":27}},"name":"req"},"property":{"type":"Identifier","start":509,"end":518,"loc":{"start":{"line":18,"column":28},"end":{"line":18,"column":37}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":519,"end":528,"loc":{"start":{"line":18,"column":38},"end":{"line":18,"column":47}},"name":"authToken"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":606,"end":765,"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"test":{"type":"MemberExpression","start":610,"end":648,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":44}},"object":{"type":"MemberExpression","start":610,"end":632,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":28}},"object":{"type":"MemberExpression","start":610,"end":623,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":19}},"object":{"type":"Identifier","start":610,"end":613,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":9}},"name":"req"},"property":{"type":"Identifier","start":614,"end":623,"loc":{"start":{"line":20,"column":10},"end":{"line":20,"column":19}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":624,"end":632,"loc":{"start":{"line":20,"column":20},"end":{"line":20,"column":28}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":633,"end":648,"loc":{"start":{"line":20,"column":29},"end":{"line":20,"column":44}},"name":"needsCookieAuth"},"computed":false},"consequent":{"type":"BlockStatement","start":650,"end":765,"loc":{"start":{"line":20,"column":46},"end":{"line":22,"column":3}},"body":[{"type":"ExpressionStatement","start":656,"end":761,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":109}},"expression":{"type":"CallExpression","start":656,"end":761,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":109}},"callee":{"type":"MemberExpression","start":656,"end":681,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":29}},"object":{"type":"Identifier","start":656,"end":668,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":16}},"name":"tokenService"},"property":{"type":"Identifier","start":669,"end":681,"loc":{"start":{"line":21,"column":17},"end":{"line":21,"column":29}},"name":"addToCookies"},"computed":false},"arguments":[{"type":"Identifier","start":682,"end":685,"loc":{"start":{"line":21,"column":30},"end":{"line":21,"column":33}},"name":"res"},{"type":"Identifier","start":687,"end":700,"loc":{"start":{"line":21,"column":35},"end":{"line":21,"column":48}},"name":"uppyAuthToken"},{"type":"MemberExpression","start":702,"end":723,"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":71}},"object":{"type":"MemberExpression","start":702,"end":715,"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":63}},"object":{"type":"Identifier","start":702,"end":705,"loc":{"start":{"line":21,"column":50},"end":{"line":21,"column":53}},"name":"req"},"property":{"type":"Identifier","start":706,"end":715,"loc":{"start":{"line":21,"column":54},"end":{"line":21,"column":63}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":716,"end":723,"loc":{"start":{"line":21,"column":64},"end":{"line":21,"column":71}},"name":"options"},"computed":false},{"type":"MemberExpression","start":725,"end":760,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":108}},"object":{"type":"MemberExpression","start":725,"end":747,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":95}},"object":{"type":"MemberExpression","start":725,"end":738,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":86}},"object":{"type":"Identifier","start":725,"end":728,"loc":{"start":{"line":21,"column":73},"end":{"line":21,"column":76}},"name":"req"},"property":{"type":"Identifier","start":729,"end":738,"loc":{"start":{"line":21,"column":77},"end":{"line":21,"column":86}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":739,"end":747,"loc":{"start":{"line":21,"column":87},"end":{"line":21,"column":95}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":748,"end":760,"loc":{"start":{"line":21,"column":96},"end":{"line":21,"column":108}},"name":"authProvider"},"computed":false}]}}]},"alternate":null},{"type":"VariableDeclaration","start":769,"end":824,"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":57}},"declarations":[{"type":"VariableDeclarator","start":775,"end":824,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":57}},"id":{"type":"Identifier","start":775,"end":782,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":15}},"name":"dynamic"},"init":{"type":"LogicalExpression","start":785,"end":824,"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":57}},"left":{"type":"MemberExpression","start":785,"end":818,"loc":{"start":{"line":24,"column":18},"end":{"line":24,"column":51}},"object":{"type":"LogicalExpression","start":786,"end":809,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":42}},"left":{"type":"MemberExpression","start":786,"end":803,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":36}},"object":{"type":"MemberExpression","start":786,"end":797,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":30}},"object":{"type":"Identifier","start":786,"end":789,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":22}},"name":"req"},"property":{"type":"Identifier","start":790,"end":797,"loc":{"start":{"line":24,"column":23},"end":{"line":24,"column":30}},"name":"session"},"computed":false},"property":{"type":"Identifier","start":798,"end":803,"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":36}},"name":"grant"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":807,"end":809,"loc":{"start":{"line":24,"column":40},"end":{"line":24,"column":42}},"properties":[]}},"property":{"type":"Identifier","start":811,"end":818,"loc":{"start":{"line":24,"column":44},"end":{"line":24,"column":51}},"name":"dynamic"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":822,"end":824,"loc":{"start":{"line":24,"column":55},"end":{"line":24,"column":57}},"properties":[]}}}],"kind":"const"},{"type":"VariableDeclaration","start":827,"end":854,"loc":{"start":{"line":25,"column":2},"end":{"line":25,"column":29}},"declarations":[{"type":"VariableDeclarator","start":833,"end":854,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":29}},"id":{"type":"Identifier","start":833,"end":838,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":13}},"name":"state"},"init":{"type":"MemberExpression","start":841,"end":854,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":29}},"object":{"type":"Identifier","start":841,"end":848,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":23}},"name":"dynamic"},"property":{"type":"Identifier","start":849,"end":854,"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":29}},"name":"state"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":857,"end":1511,"loc":{"start":{"line":26,"column":2},"end":{"line":39,"column":3}},"test":{"type":"Identifier","start":861,"end":866,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":11}},"name":"state"},"consequent":{"type":"BlockStatement","start":868,"end":1511,"loc":{"start":{"line":26,"column":13},"end":{"line":39,"column":3}},"body":[{"type":"VariableDeclaration","start":874,"end":959,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":89}},"declarations":[{"type":"VariableDeclarator","start":880,"end":959,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":89}},"id":{"type":"Identifier","start":880,"end":886,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":16}},"name":"origin"},"init":{"type":"CallExpression","start":889,"end":959,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":89}},"callee":{"type":"MemberExpression","start":889,"end":912,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":42}},"object":{"type":"Identifier","start":889,"end":899,"loc":{"start":{"line":27,"column":19},"end":{"line":27,"column":29}},"name":"oAuthState"},"property":{"type":"Identifier","start":900,"end":912,"loc":{"start":{"line":27,"column":30},"end":{"line":27,"column":42}},"name":"getFromState"},"computed":false},"arguments":[{"type":"Identifier","start":913,"end":918,"loc":{"start":{"line":27,"column":43},"end":{"line":27,"column":48}},"name":"state"},{"type":"Literal","start":920,"end":928,"loc":{"start":{"line":27,"column":50},"end":{"line":27,"column":58}},"value":"origin","raw":"'origin'"},{"type":"MemberExpression","start":930,"end":958,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":88}},"object":{"type":"MemberExpression","start":930,"end":951,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":81}},"object":{"type":"MemberExpression","start":930,"end":943,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":73}},"object":{"type":"Identifier","start":930,"end":933,"loc":{"start":{"line":27,"column":60},"end":{"line":27,"column":63}},"name":"req"},"property":{"type":"Identifier","start":934,"end":943,"loc":{"start":{"line":27,"column":64},"end":{"line":27,"column":73}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":944,"end":951,"loc":{"start":{"line":27,"column":74},"end":{"line":27,"column":81}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":952,"end":958,"loc":{"start":{"line":27,"column":82},"end":{"line":27,"column":88}},"name":"secret"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":964,"end":1087,"loc":{"start":{"line":28,"column":4},"end":{"line":32,"column":5}},"declarations":[{"type":"VariableDeclarator","start":970,"end":1087,"loc":{"start":{"line":28,"column":10},"end":{"line":32,"column":5}},"id":{"type":"Identifier","start":970,"end":983,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":23}},"name":"clientVersion"},"init":{"type":"CallExpression","start":986,"end":1087,"loc":{"start":{"line":28,"column":26},"end":{"line":32,"column":5}},"callee":{"type":"MemberExpression","start":986,"end":1009,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":49}},"object":{"type":"Identifier","start":986,"end":996,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":36}},"name":"oAuthState"},"property":{"type":"Identifier","start":997,"end":1009,"loc":{"start":{"line":28,"column":37},"end":{"line":28,"column":49}},"name":"getFromState"},"computed":false},"arguments":[{"type":"Identifier","start":1017,"end":1022,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":11}},"name":"state"},{"type":"Literal","start":1030,"end":1045,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":21}},"value":"clientVersion","raw":"'clientVersion'"},{"type":"MemberExpression","start":1053,"end":1081,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":34}},"object":{"type":"MemberExpression","start":1053,"end":1074,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":27}},"object":{"type":"MemberExpression","start":1053,"end":1066,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":19}},"object":{"type":"Identifier","start":1053,"end":1056,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":9}},"name":"req"},"property":{"type":"Identifier","start":1057,"end":1066,"loc":{"start":{"line":31,"column":10},"end":{"line":31,"column":19}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1067,"end":1074,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":27}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1075,"end":1081,"loc":{"start":{"line":31,"column":28},"end":{"line":31,"column":34}},"name":"secret"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1092,"end":1144,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":56}},"declarations":[{"type":"VariableDeclarator","start":1098,"end":1144,"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":56}},"id":{"type":"Identifier","start":1098,"end":1112,"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":24}},"name":"allowedClients"},"init":{"type":"MemberExpression","start":1115,"end":1144,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":56}},"object":{"type":"MemberExpression","start":1115,"end":1136,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":48}},"object":{"type":"MemberExpression","start":1115,"end":1128,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":40}},"object":{"type":"Identifier","start":1115,"end":1118,"loc":{"start":{"line":33,"column":27},"end":{"line":33,"column":30}},"name":"req"},"property":{"type":"Identifier","start":1119,"end":1128,"loc":{"start":{"line":33,"column":31},"end":{"line":33,"column":40}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1129,"end":1136,"loc":{"start":{"line":33,"column":41},"end":{"line":33,"column":48}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1137,"end":1144,"loc":{"start":{"line":33,"column":49},"end":{"line":33,"column":56}},"name":"clients"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1199,"end":1507,"loc":{"start":{"line":35,"column":4},"end":{"line":38,"column":5}},"test":{"type":"LogicalExpression","start":1203,"end":1305,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":110}},"left":{"type":"LogicalExpression","start":1203,"end":1254,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":59}},"left":{"type":"UnaryExpression","start":1203,"end":1218,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":23}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1204,"end":1218,"loc":{"start":{"line":35,"column":9},"end":{"line":35,"column":23}},"name":"allowedClients"}},"operator":"||","right":{"type":"CallExpression","start":1222,"end":1254,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":59}},"callee":{"type":"Identifier","start":1222,"end":1230,"loc":{"start":{"line":35,"column":27},"end":{"line":35,"column":35}},"name":"hasMatch"},"arguments":[{"type":"Identifier","start":1231,"end":1237,"loc":{"start":{"line":35,"column":36},"end":{"line":35,"column":42}},"name":"origin"},{"type":"Identifier","start":1239,"end":1253,"loc":{"start":{"line":35,"column":44},"end":{"line":35,"column":58}},"name":"allowedClients"}]}},"operator":"||","right":{"type":"CallExpression","start":1258,"end":1305,"loc":{"start":{"line":35,"column":63},"end":{"line":35,"column":110}},"callee":{"type":"Identifier","start":1258,"end":1266,"loc":{"start":{"line":35,"column":63},"end":{"line":35,"column":71}},"name":"hasMatch"},"arguments":[{"type":"MemberExpression","start":1267,"end":1288,"loc":{"start":{"line":35,"column":72},"end":{"line":35,"column":93}},"object":{"type":"CallExpression","start":1267,"end":1283,"loc":{"start":{"line":35,"column":72},"end":{"line":35,"column":88}},"callee":{"type":"Identifier","start":1267,"end":1275,"loc":{"start":{"line":35,"column":72},"end":{"line":35,"column":80}},"name":"parseUrl"},"arguments":[{"type":"Identifier","start":1276,"end":1282,"loc":{"start":{"line":35,"column":81},"end":{"line":35,"column":87}},"name":"origin"}]},"property":{"type":"Identifier","start":1284,"end":1288,"loc":{"start":{"line":35,"column":89},"end":{"line":35,"column":93}},"name":"host"},"computed":false},{"type":"Identifier","start":1290,"end":1304,"loc":{"start":{"line":35,"column":95},"end":{"line":35,"column":109}},"name":"allowedClients"}]}},"consequent":{"type":"BlockStatement","start":1307,"end":1507,"loc":{"start":{"line":35,"column":112},"end":{"line":38,"column":5}},"body":[{"type":"VariableDeclaration","start":1315,"end":1381,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":72}},"declarations":[{"type":"VariableDeclarator","start":1321,"end":1381,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":72}},"id":{"type":"Identifier","start":1321,"end":1340,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":31}},"name":"allowsStringMessage"},"init":{"type":"CallExpression","start":1343,"end":1381,"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":72}},"callee":{"type":"MemberExpression","start":1343,"end":1357,"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":48}},"object":{"type":"Identifier","start":1343,"end":1353,"loc":{"start":{"line":36,"column":34},"end":{"line":36,"column":44}},"name":"versionCmp"},"property":{"type":"Identifier","start":1354,"end":1357,"loc":{"start":{"line":36,"column":45},"end":{"line":36,"column":48}},"name":"gte"},"computed":false},"arguments":[{"type":"Identifier","start":1358,"end":1371,"loc":{"start":{"line":36,"column":49},"end":{"line":36,"column":62}},"name":"clientVersion"},{"type":"Literal","start":1373,"end":1380,"loc":{"start":{"line":36,"column":64},"end":{"line":36,"column":71}},"value":"1.0.2","raw":"'1.0.2'"}]}}],"kind":"const"},{"type":"ReturnStatement","start":1388,"end":1501,"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":119}},"argument":{"type":"CallExpression","start":1395,"end":1501,"loc":{"start":{"line":37,"column":13},"end":{"line":37,"column":119}},"callee":{"type":"MemberExpression","start":1395,"end":1403,"loc":{"start":{"line":37,"column":13},"end":{"line":37,"column":21}},"object":{"type":"Identifier","start":1395,"end":1398,"loc":{"start":{"line":37,"column":13},"end":{"line":37,"column":16}},"name":"res"},"property":{"type":"Identifier","start":1399,"end":1403,"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":21}},"name":"send"},"computed":false},"arguments":[{"type":"ConditionalExpression","start":1404,"end":1500,"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":118}},"test":{"type":"Identifier","start":1404,"end":1423,"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":41}},"name":"allowsStringMessage"},"consequent":{"type":"CallExpression","start":1426,"end":1460,"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":78}},"callee":{"type":"Identifier","start":1426,"end":1437,"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":55}},"name":"htmlContent"},"arguments":[{"type":"Identifier","start":1438,"end":1451,"loc":{"start":{"line":37,"column":56},"end":{"line":37,"column":69}},"name":"uppyAuthToken"},{"type":"Identifier","start":1453,"end":1459,"loc":{"start":{"line":37,"column":71},"end":{"line":37,"column":77}},"name":"origin"}]},"alternate":{"type":"CallExpression","start":1463,"end":1500,"loc":{"start":{"line":37,"column":81},"end":{"line":37,"column":118}},"callee":{"type":"Identifier","start":1463,"end":1477,"loc":{"start":{"line":37,"column":81},"end":{"line":37,"column":95}},"name":"oldHtmlContent"},"arguments":[{"type":"Identifier","start":1478,"end":1491,"loc":{"start":{"line":37,"column":96},"end":{"line":37,"column":109}},"name":"uppyAuthToken"},{"type":"Identifier","start":1493,"end":1499,"loc":{"start":{"line":37,"column":111},"end":{"line":37,"column":117}},"name":"origin"}]}}]}}]},"alternate":null}]},"alternate":null},{"type":"ExpressionStatement","start":1514,"end":1520,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":8}},"expression":{"type":"CallExpression","start":1514,"end":1520,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":8}},"callee":{"type":"Identifier","start":1514,"end":1518,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":6}},"name":"next"},"arguments":[]}}]}}}},{"type":"VariableDeclaration","start":1613,"end":1944,"loc":{"start":{"line":48,"column":0},"end":{"line":61,"column":1}},"declarations":[{"type":"VariableDeclarator","start":1619,"end":1944,"loc":{"start":{"line":48,"column":6},"end":{"line":61,"column":1}},"id":{"type":"Identifier","start":1619,"end":1630,"loc":{"start":{"line":48,"column":6},"end":{"line":48,"column":17}},"name":"htmlContent"},"init":{"type":"ArrowFunctionExpression","start":1633,"end":1944,"loc":{"start":{"line":48,"column":20},"end":{"line":61,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1634,"end":1639,"loc":{"start":{"line":48,"column":21},"end":{"line":48,"column":26}},"name":"token"},{"type":"Identifier","start":1641,"end":1647,"loc":{"start":{"line":48,"column":28},"end":{"line":48,"column":34}},"name":"origin"}],"body":{"type":"BlockStatement","start":1652,"end":1944,"loc":{"start":{"line":48,"column":39},"end":{"line":61,"column":1}},"body":[{"type":"ReturnStatement","start":1656,"end":1942,"loc":{"start":{"line":49,"column":2},"end":{"line":60,"column":12}},"argument":{"type":"TemplateLiteral","start":1663,"end":1942,"loc":{"start":{"line":49,"column":9},"end":{"line":60,"column":12}},"expressions":[{"type":"Identifier","start":1819,"end":1824,"loc":{"start":{"line":55,"column":62},"end":{"line":55,"column":67}},"name":"token"},{"type":"CallExpression","start":1833,"end":1853,"loc":{"start":{"line":55,"column":76},"end":{"line":55,"column":96}},"callee":{"type":"Identifier","start":1833,"end":1845,"loc":{"start":{"line":55,"column":76},"end":{"line":55,"column":88}},"name":"sanitizeHtml"},"arguments":[{"type":"Identifier","start":1846,"end":1852,"loc":{"start":{"line":55,"column":89},"end":{"line":55,"column":95}},"name":"origin"}]}],"quasis":[{"type":"TemplateElement","start":1664,"end":1817,"loc":{"start":{"line":49,"column":10},"end":{"line":55,"column":60}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \""},"tail":false},{"type":"TemplateElement","start":1825,"end":1831,"loc":{"start":{"line":55,"column":68},"end":{"line":55,"column":74}},"value":{"raw":"\"}), \"","cooked":"\"}), \""},"tail":false},{"type":"TemplateElement","start":1854,"end":1941,"loc":{"start":{"line":55,"column":97},"end":{"line":60,"column":11}},"value":{"raw":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":2084,"end":2402,"loc":{"start":{"line":68,"column":0},"end":{"line":81,"column":1}},"declarations":[{"type":"VariableDeclarator","start":2090,"end":2402,"loc":{"start":{"line":68,"column":6},"end":{"line":81,"column":1}},"id":{"type":"Identifier","start":2090,"end":2104,"loc":{"start":{"line":68,"column":6},"end":{"line":68,"column":20}},"name":"oldHtmlContent"},"init":{"type":"ArrowFunctionExpression","start":2107,"end":2402,"loc":{"start":{"line":68,"column":23},"end":{"line":81,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2108,"end":2113,"loc":{"start":{"line":68,"column":24},"end":{"line":68,"column":29}},"name":"token"},{"type":"Identifier","start":2115,"end":2121,"loc":{"start":{"line":68,"column":31},"end":{"line":68,"column":37}},"name":"origin"}],"body":{"type":"BlockStatement","start":2126,"end":2402,"loc":{"start":{"line":68,"column":42},"end":{"line":81,"column":1}},"body":[{"type":"ReturnStatement","start":2130,"end":2400,"loc":{"start":{"line":69,"column":2},"end":{"line":80,"column":12}},"argument":{"type":"TemplateLiteral","start":2137,"end":2400,"loc":{"start":{"line":69,"column":9},"end":{"line":80,"column":12}},"expressions":[{"type":"Identifier","start":2278,"end":2283,"loc":{"start":{"line":75,"column":47},"end":{"line":75,"column":52}},"name":"token"},{"type":"CallExpression","start":2291,"end":2311,"loc":{"start":{"line":75,"column":60},"end":{"line":75,"column":80}},"callee":{"type":"Identifier","start":2291,"end":2303,"loc":{"start":{"line":75,"column":60},"end":{"line":75,"column":72}},"name":"sanitizeHtml"},"arguments":[{"type":"Identifier","start":2304,"end":2310,"loc":{"start":{"line":75,"column":73},"end":{"line":75,"column":79}},"name":"origin"}]}],"quasis":[{"type":"TemplateElement","start":2138,"end":2276,"loc":{"start":{"line":69,"column":10},"end":{"line":75,"column":45}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage({token: \""},"tail":false},{"type":"TemplateElement","start":2284,"end":2289,"loc":{"start":{"line":75,"column":53},"end":{"line":75,"column":58}},"value":{"raw":"\"}, \"","cooked":"\"}, \""},"tail":false},{"type":"TemplateElement","start":2312,"end":2399,"loc":{"start":{"line":75,"column":81},"end":{"line":80,"column":11}},"value":{"raw":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}]}}}],"kind":"const"}],"sourceType":"module"}