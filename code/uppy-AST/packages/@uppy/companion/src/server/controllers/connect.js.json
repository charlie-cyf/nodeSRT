{"type":"Program","start":0,"end":946,"body":[{"type":"VariableDeclaration","start":0,"end":52,"declarations":[{"type":"VariableDeclarator","start":6,"end":52,"id":{"type":"Identifier","start":6,"end":16,"name":"oAuthState"},"init":{"type":"CallExpression","start":19,"end":52,"callee":{"type":"Identifier","start":19,"end":26,"name":"require"},"arguments":[{"type":"Literal","start":27,"end":51,"value":"../helpers/oauth-state","raw":"'../helpers/oauth-state'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":67,"end":95,"declarations":[{"type":"VariableDeclarator","start":73,"end":95,"id":{"type":"Identifier","start":73,"end":77,"name":"atob"},"init":{"type":"CallExpression","start":80,"end":95,"callee":{"type":"Identifier","start":80,"end":87,"name":"require"},"arguments":[{"type":"Literal","start":88,"end":94,"value":"atob","raw":"'atob'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":200,"end":945,"expression":{"type":"AssignmentExpression","start":200,"end":945,"operator":"=","left":{"type":"MemberExpression","start":200,"end":214,"object":{"type":"Identifier","start":200,"end":206,"name":"module"},"property":{"type":"Identifier","start":207,"end":214,"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":217,"end":945,"id":{"type":"Identifier","start":226,"end":233,"name":"connect"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":235,"end":238,"name":"req"},{"type":"Identifier","start":240,"end":243,"name":"res"}],"body":{"type":"BlockStatement","start":245,"end":945,"body":[{"type":"VariableDeclaration","start":249,"end":292,"declarations":[{"type":"VariableDeclarator","start":255,"end":292,"id":{"type":"Identifier","start":255,"end":261,"name":"secret"},"init":{"type":"MemberExpression","start":264,"end":292,"object":{"type":"MemberExpression","start":264,"end":285,"object":{"type":"MemberExpression","start":264,"end":277,"object":{"type":"Identifier","start":264,"end":267,"name":"req"},"property":{"type":"Identifier","start":268,"end":277,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":278,"end":285,"name":"options"},"computed":false},"property":{"type":"Identifier","start":286,"end":292,"name":"secret"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":295,"end":339,"declarations":[{"type":"VariableDeclarator","start":299,"end":339,"id":{"type":"Identifier","start":299,"end":304,"name":"state"},"init":{"type":"CallExpression","start":307,"end":339,"callee":{"type":"MemberExpression","start":307,"end":331,"object":{"type":"Identifier","start":307,"end":317,"name":"oAuthState"},"property":{"type":"Identifier","start":318,"end":331,"name":"generateState"},"computed":false},"arguments":[{"type":"Identifier","start":332,"end":338,"name":"secret"}]}}],"kind":"let"},{"type":"IfStatement","start":342,"end":531,"test":{"type":"MemberExpression","start":346,"end":361,"object":{"type":"MemberExpression","start":346,"end":355,"object":{"type":"Identifier","start":346,"end":349,"name":"req"},"property":{"type":"Identifier","start":350,"end":355,"name":"query"},"computed":false},"property":{"type":"Identifier","start":356,"end":361,"name":"state"},"computed":false},"consequent":{"type":"BlockStatement","start":363,"end":531,"body":[{"type":"VariableDeclaration","start":422,"end":470,"declarations":[{"type":"VariableDeclarator","start":428,"end":470,"id":{"type":"Identifier","start":428,"end":434,"name":"origin"},"init":{"type":"CallExpression","start":437,"end":470,"callee":{"type":"MemberExpression","start":437,"end":447,"object":{"type":"Identifier","start":437,"end":441,"name":"JSON"},"property":{"type":"Identifier","start":442,"end":447,"name":"parse"},"computed":false},"arguments":[{"type":"CallExpression","start":448,"end":469,"callee":{"type":"Identifier","start":448,"end":452,"name":"atob"},"arguments":[{"type":"MemberExpression","start":453,"end":468,"object":{"type":"MemberExpression","start":453,"end":462,"object":{"type":"Identifier","start":453,"end":456,"name":"req"},"property":{"type":"Identifier","start":457,"end":462,"name":"query"},"computed":false},"property":{"type":"Identifier","start":463,"end":468,"name":"state"},"computed":false}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":475,"end":527,"expression":{"type":"AssignmentExpression","start":475,"end":527,"operator":"=","left":{"type":"Identifier","start":475,"end":480,"name":"state"},"right":{"type":"CallExpression","start":483,"end":527,"callee":{"type":"MemberExpression","start":483,"end":504,"object":{"type":"Identifier","start":483,"end":493,"name":"oAuthState"},"property":{"type":"Identifier","start":494,"end":504,"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":505,"end":510,"name":"state"},{"type":"Identifier","start":512,"end":518,"name":"origin"},{"type":"Identifier","start":520,"end":526,"name":"secret"}]}}}]},"alternate":null},{"type":"IfStatement","start":535,"end":692,"test":{"type":"MemberExpression","start":539,"end":579,"object":{"type":"MemberExpression","start":539,"end":567,"object":{"type":"MemberExpression","start":539,"end":560,"object":{"type":"MemberExpression","start":539,"end":552,"object":{"type":"Identifier","start":539,"end":542,"name":"req"},"property":{"type":"Identifier","start":543,"end":552,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":553,"end":560,"name":"options"},"computed":false},"property":{"type":"Identifier","start":561,"end":567,"name":"server"},"computed":false},"property":{"type":"Identifier","start":568,"end":579,"name":"oauthDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":581,"end":692,"body":[{"type":"ExpressionStatement","start":587,"end":688,"expression":{"type":"AssignmentExpression","start":587,"end":688,"operator":"=","left":{"type":"Identifier","start":587,"end":592,"name":"state"},"right":{"type":"CallExpression","start":595,"end":688,"callee":{"type":"MemberExpression","start":595,"end":616,"object":{"type":"Identifier","start":595,"end":605,"name":"oAuthState"},"property":{"type":"Identifier","start":606,"end":616,"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":617,"end":622,"name":"state"},{"type":"ObjectExpression","start":624,"end":679,"properties":[{"type":"Property","start":626,"end":677,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":626,"end":643,"name":"companionInstance"},"value":{"type":"CallExpression","start":645,"end":677,"callee":{"type":"MemberExpression","start":645,"end":667,"object":{"type":"MemberExpression","start":645,"end":658,"object":{"type":"Identifier","start":645,"end":648,"name":"req"},"property":{"type":"Identifier","start":649,"end":658,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":659,"end":667,"name":"buildURL"},"computed":false},"arguments":[{"type":"Literal","start":668,"end":670,"value":"","raw":"''"},{"type":"Literal","start":672,"end":676,"value":true,"raw":"true"}]},"kind":"init"}]},{"type":"Identifier","start":681,"end":687,"name":"secret"}]}}}]},"alternate":null},{"type":"IfStatement","start":696,"end":831,"test":{"type":"MemberExpression","start":700,"end":727,"object":{"type":"MemberExpression","start":700,"end":713,"object":{"type":"Identifier","start":700,"end":703,"name":"req"},"property":{"type":"Identifier","start":704,"end":713,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":714,"end":727,"name":"clientVersion"},"computed":false},"consequent":{"type":"BlockStatement","start":729,"end":831,"body":[{"type":"ExpressionStatement","start":735,"end":827,"expression":{"type":"AssignmentExpression","start":735,"end":827,"operator":"=","left":{"type":"Identifier","start":735,"end":740,"name":"state"},"right":{"type":"CallExpression","start":743,"end":827,"callee":{"type":"MemberExpression","start":743,"end":764,"object":{"type":"Identifier","start":743,"end":753,"name":"oAuthState"},"property":{"type":"Identifier","start":754,"end":764,"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":765,"end":770,"name":"state"},{"type":"ObjectExpression","start":772,"end":818,"properties":[{"type":"Property","start":774,"end":816,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":774,"end":787,"name":"clientVersion"},"value":{"type":"MemberExpression","start":789,"end":816,"object":{"type":"MemberExpression","start":789,"end":802,"object":{"type":"Identifier","start":789,"end":792,"name":"req"},"property":{"type":"Identifier","start":793,"end":802,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":803,"end":816,"name":"clientVersion"},"computed":false},"kind":"init"}]},{"type":"Identifier","start":820,"end":826,"name":"secret"}]}}}]},"alternate":null},{"type":"ExpressionStatement","start":835,"end":943,"expression":{"type":"CallExpression","start":835,"end":943,"callee":{"type":"MemberExpression","start":835,"end":847,"object":{"type":"Identifier","start":835,"end":838,"name":"res"},"property":{"type":"Identifier","start":839,"end":847,"name":"redirect"},"computed":false},"arguments":[{"type":"CallExpression","start":848,"end":942,"callee":{"type":"MemberExpression","start":848,"end":870,"object":{"type":"MemberExpression","start":848,"end":861,"object":{"type":"Identifier","start":848,"end":851,"name":"req"},"property":{"type":"Identifier","start":852,"end":861,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":862,"end":870,"name":"buildURL"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":871,"end":935,"expressions":[{"type":"MemberExpression","start":883,"end":918,"object":{"type":"MemberExpression","start":883,"end":905,"object":{"type":"MemberExpression","start":883,"end":896,"object":{"type":"Identifier","start":883,"end":886,"name":"req"},"property":{"type":"Identifier","start":887,"end":896,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":897,"end":905,"name":"provider"},"computed":false},"property":{"type":"Identifier","start":906,"end":918,"name":"authProvider"},"computed":false},{"type":"Identifier","start":928,"end":933,"name":"state"}],"quasis":[{"type":"TemplateElement","start":872,"end":881,"value":{"raw":"/connect/","cooked":"/connect/"},"tail":false},{"type":"TemplateElement","start":919,"end":926,"value":{"raw":"?state=","cooked":"?state="},"tail":false},{"type":"TemplateElement","start":934,"end":934,"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":937,"end":941,"value":true,"raw":"true"}]}]}}]}}}}],"sourceType":"script"}