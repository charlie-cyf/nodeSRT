{"type":"Program","start":0,"end":946,"loc":{"start":{"line":1,"column":0},"end":{"line":30,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":52,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":52}},"declarations":[{"type":"VariableDeclarator","start":6,"end":52,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":52}},"id":{"type":"Identifier","start":6,"end":16,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":16}},"name":"oAuthState"},"init":{"type":"CallExpression","start":19,"end":52,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":52}},"callee":{"type":"Identifier","start":19,"end":26,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":26}},"name":"require"},"arguments":[{"type":"Literal","start":27,"end":51,"loc":{"start":{"line":1,"column":27},"end":{"line":1,"column":51}},"value":"../helpers/oauth-state","raw":"'../helpers/oauth-state'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":67,"end":95,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"declarations":[{"type":"VariableDeclarator","start":73,"end":95,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":28}},"id":{"type":"Identifier","start":73,"end":77,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":10}},"name":"atob"},"init":{"type":"CallExpression","start":80,"end":95,"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":28}},"callee":{"type":"Identifier","start":80,"end":87,"loc":{"start":{"line":3,"column":13},"end":{"line":3,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":88,"end":94,"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":27}},"value":"atob","raw":"'atob'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":200,"end":945,"loc":{"start":{"line":11,"column":0},"end":{"line":29,"column":1}},"expression":{"type":"AssignmentExpression","start":200,"end":945,"loc":{"start":{"line":11,"column":0},"end":{"line":29,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":200,"end":214,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":14}},"object":{"type":"Identifier","start":200,"end":206,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":6}},"name":"module"},"property":{"type":"Identifier","start":207,"end":214,"loc":{"start":{"line":11,"column":7},"end":{"line":11,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":217,"end":945,"loc":{"start":{"line":11,"column":17},"end":{"line":29,"column":1}},"id":{"type":"Identifier","start":226,"end":233,"loc":{"start":{"line":11,"column":26},"end":{"line":11,"column":33}},"name":"connect"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":235,"end":238,"loc":{"start":{"line":11,"column":35},"end":{"line":11,"column":38}},"name":"req"},{"type":"Identifier","start":240,"end":243,"loc":{"start":{"line":11,"column":40},"end":{"line":11,"column":43}},"name":"res"}],"body":{"type":"BlockStatement","start":245,"end":945,"loc":{"start":{"line":11,"column":45},"end":{"line":29,"column":1}},"body":[{"type":"VariableDeclaration","start":249,"end":292,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":45}},"declarations":[{"type":"VariableDeclarator","start":255,"end":292,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":45}},"id":{"type":"Identifier","start":255,"end":261,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":14}},"name":"secret"},"init":{"type":"MemberExpression","start":264,"end":292,"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":45}},"object":{"type":"MemberExpression","start":264,"end":285,"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":38}},"object":{"type":"MemberExpression","start":264,"end":277,"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":30}},"object":{"type":"Identifier","start":264,"end":267,"loc":{"start":{"line":12,"column":17},"end":{"line":12,"column":20}},"name":"req"},"property":{"type":"Identifier","start":268,"end":277,"loc":{"start":{"line":12,"column":21},"end":{"line":12,"column":30}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":278,"end":285,"loc":{"start":{"line":12,"column":31},"end":{"line":12,"column":38}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":286,"end":292,"loc":{"start":{"line":12,"column":39},"end":{"line":12,"column":45}},"name":"secret"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":295,"end":339,"loc":{"start":{"line":13,"column":2},"end":{"line":13,"column":46}},"declarations":[{"type":"VariableDeclarator","start":299,"end":339,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":46}},"id":{"type":"Identifier","start":299,"end":304,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":11}},"name":"state"},"init":{"type":"CallExpression","start":307,"end":339,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":46}},"callee":{"type":"MemberExpression","start":307,"end":331,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":38}},"object":{"type":"Identifier","start":307,"end":317,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":24}},"name":"oAuthState"},"property":{"type":"Identifier","start":318,"end":331,"loc":{"start":{"line":13,"column":25},"end":{"line":13,"column":38}},"name":"generateState"},"computed":false},"arguments":[{"type":"Identifier","start":332,"end":338,"loc":{"start":{"line":13,"column":39},"end":{"line":13,"column":45}},"name":"secret"}]}}],"kind":"let"},{"type":"IfStatement","start":342,"end":531,"loc":{"start":{"line":14,"column":2},"end":{"line":18,"column":3}},"test":{"type":"MemberExpression","start":346,"end":361,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":21}},"object":{"type":"MemberExpression","start":346,"end":355,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":15}},"object":{"type":"Identifier","start":346,"end":349,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":9}},"name":"req"},"property":{"type":"Identifier","start":350,"end":355,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":15}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":356,"end":361,"loc":{"start":{"line":14,"column":16},"end":{"line":14,"column":21}},"name":"state"},"computed":false},"consequent":{"type":"BlockStatement","start":363,"end":531,"loc":{"start":{"line":14,"column":23},"end":{"line":18,"column":3}},"body":[{"type":"VariableDeclaration","start":422,"end":470,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":52}},"declarations":[{"type":"VariableDeclarator","start":428,"end":470,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":52}},"id":{"type":"Identifier","start":428,"end":434,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":16}},"name":"origin"},"init":{"type":"CallExpression","start":437,"end":470,"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":52}},"callee":{"type":"MemberExpression","start":437,"end":447,"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":29}},"object":{"type":"Identifier","start":437,"end":441,"loc":{"start":{"line":16,"column":19},"end":{"line":16,"column":23}},"name":"JSON"},"property":{"type":"Identifier","start":442,"end":447,"loc":{"start":{"line":16,"column":24},"end":{"line":16,"column":29}},"name":"parse"},"computed":false},"arguments":[{"type":"CallExpression","start":448,"end":469,"loc":{"start":{"line":16,"column":30},"end":{"line":16,"column":51}},"callee":{"type":"Identifier","start":448,"end":452,"loc":{"start":{"line":16,"column":30},"end":{"line":16,"column":34}},"name":"atob"},"arguments":[{"type":"MemberExpression","start":453,"end":468,"loc":{"start":{"line":16,"column":35},"end":{"line":16,"column":50}},"object":{"type":"MemberExpression","start":453,"end":462,"loc":{"start":{"line":16,"column":35},"end":{"line":16,"column":44}},"object":{"type":"Identifier","start":453,"end":456,"loc":{"start":{"line":16,"column":35},"end":{"line":16,"column":38}},"name":"req"},"property":{"type":"Identifier","start":457,"end":462,"loc":{"start":{"line":16,"column":39},"end":{"line":16,"column":44}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":463,"end":468,"loc":{"start":{"line":16,"column":45},"end":{"line":16,"column":50}},"name":"state"},"computed":false}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":475,"end":527,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":56}},"expression":{"type":"AssignmentExpression","start":475,"end":527,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":56}},"operator":"=","left":{"type":"Identifier","start":475,"end":480,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":9}},"name":"state"},"right":{"type":"CallExpression","start":483,"end":527,"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":56}},"callee":{"type":"MemberExpression","start":483,"end":504,"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":33}},"object":{"type":"Identifier","start":483,"end":493,"loc":{"start":{"line":17,"column":12},"end":{"line":17,"column":22}},"name":"oAuthState"},"property":{"type":"Identifier","start":494,"end":504,"loc":{"start":{"line":17,"column":23},"end":{"line":17,"column":33}},"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":505,"end":510,"loc":{"start":{"line":17,"column":34},"end":{"line":17,"column":39}},"name":"state"},{"type":"Identifier","start":512,"end":518,"loc":{"start":{"line":17,"column":41},"end":{"line":17,"column":47}},"name":"origin"},{"type":"Identifier","start":520,"end":526,"loc":{"start":{"line":17,"column":49},"end":{"line":17,"column":55}},"name":"secret"}]}}}]},"alternate":null},{"type":"IfStatement","start":535,"end":692,"loc":{"start":{"line":20,"column":2},"end":{"line":22,"column":3}},"test":{"type":"MemberExpression","start":539,"end":579,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":46}},"object":{"type":"MemberExpression","start":539,"end":567,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":34}},"object":{"type":"MemberExpression","start":539,"end":560,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":27}},"object":{"type":"MemberExpression","start":539,"end":552,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":19}},"object":{"type":"Identifier","start":539,"end":542,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":9}},"name":"req"},"property":{"type":"Identifier","start":543,"end":552,"loc":{"start":{"line":20,"column":10},"end":{"line":20,"column":19}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":553,"end":560,"loc":{"start":{"line":20,"column":20},"end":{"line":20,"column":27}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":561,"end":567,"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":34}},"name":"server"},"computed":false},"property":{"type":"Identifier","start":568,"end":579,"loc":{"start":{"line":20,"column":35},"end":{"line":20,"column":46}},"name":"oauthDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":581,"end":692,"loc":{"start":{"line":20,"column":48},"end":{"line":22,"column":3}},"body":[{"type":"ExpressionStatement","start":587,"end":688,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":105}},"expression":{"type":"AssignmentExpression","start":587,"end":688,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":105}},"operator":"=","left":{"type":"Identifier","start":587,"end":592,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":9}},"name":"state"},"right":{"type":"CallExpression","start":595,"end":688,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":105}},"callee":{"type":"MemberExpression","start":595,"end":616,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":33}},"object":{"type":"Identifier","start":595,"end":605,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":22}},"name":"oAuthState"},"property":{"type":"Identifier","start":606,"end":616,"loc":{"start":{"line":21,"column":23},"end":{"line":21,"column":33}},"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":617,"end":622,"loc":{"start":{"line":21,"column":34},"end":{"line":21,"column":39}},"name":"state"},{"type":"ObjectExpression","start":624,"end":679,"loc":{"start":{"line":21,"column":41},"end":{"line":21,"column":96}},"properties":[{"type":"Property","start":626,"end":677,"loc":{"start":{"line":21,"column":43},"end":{"line":21,"column":94}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":626,"end":643,"loc":{"start":{"line":21,"column":43},"end":{"line":21,"column":60}},"name":"companionInstance"},"value":{"type":"CallExpression","start":645,"end":677,"loc":{"start":{"line":21,"column":62},"end":{"line":21,"column":94}},"callee":{"type":"MemberExpression","start":645,"end":667,"loc":{"start":{"line":21,"column":62},"end":{"line":21,"column":84}},"object":{"type":"MemberExpression","start":645,"end":658,"loc":{"start":{"line":21,"column":62},"end":{"line":21,"column":75}},"object":{"type":"Identifier","start":645,"end":648,"loc":{"start":{"line":21,"column":62},"end":{"line":21,"column":65}},"name":"req"},"property":{"type":"Identifier","start":649,"end":658,"loc":{"start":{"line":21,"column":66},"end":{"line":21,"column":75}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":659,"end":667,"loc":{"start":{"line":21,"column":76},"end":{"line":21,"column":84}},"name":"buildURL"},"computed":false},"arguments":[{"type":"Literal","start":668,"end":670,"loc":{"start":{"line":21,"column":85},"end":{"line":21,"column":87}},"value":"","raw":"''"},{"type":"Literal","start":672,"end":676,"loc":{"start":{"line":21,"column":89},"end":{"line":21,"column":93}},"value":true,"raw":"true"}]},"kind":"init"}]},{"type":"Identifier","start":681,"end":687,"loc":{"start":{"line":21,"column":98},"end":{"line":21,"column":104}},"name":"secret"}]}}}]},"alternate":null},{"type":"IfStatement","start":696,"end":831,"loc":{"start":{"line":24,"column":2},"end":{"line":26,"column":3}},"test":{"type":"MemberExpression","start":700,"end":727,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":33}},"object":{"type":"MemberExpression","start":700,"end":713,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":19}},"object":{"type":"Identifier","start":700,"end":703,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":9}},"name":"req"},"property":{"type":"Identifier","start":704,"end":713,"loc":{"start":{"line":24,"column":10},"end":{"line":24,"column":19}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":714,"end":727,"loc":{"start":{"line":24,"column":20},"end":{"line":24,"column":33}},"name":"clientVersion"},"computed":false},"consequent":{"type":"BlockStatement","start":729,"end":831,"loc":{"start":{"line":24,"column":35},"end":{"line":26,"column":3}},"body":[{"type":"ExpressionStatement","start":735,"end":827,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":96}},"expression":{"type":"AssignmentExpression","start":735,"end":827,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":96}},"operator":"=","left":{"type":"Identifier","start":735,"end":740,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":9}},"name":"state"},"right":{"type":"CallExpression","start":743,"end":827,"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":96}},"callee":{"type":"MemberExpression","start":743,"end":764,"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":33}},"object":{"type":"Identifier","start":743,"end":753,"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":22}},"name":"oAuthState"},"property":{"type":"Identifier","start":754,"end":764,"loc":{"start":{"line":25,"column":23},"end":{"line":25,"column":33}},"name":"addToState"},"computed":false},"arguments":[{"type":"Identifier","start":765,"end":770,"loc":{"start":{"line":25,"column":34},"end":{"line":25,"column":39}},"name":"state"},{"type":"ObjectExpression","start":772,"end":818,"loc":{"start":{"line":25,"column":41},"end":{"line":25,"column":87}},"properties":[{"type":"Property","start":774,"end":816,"loc":{"start":{"line":25,"column":43},"end":{"line":25,"column":85}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":774,"end":787,"loc":{"start":{"line":25,"column":43},"end":{"line":25,"column":56}},"name":"clientVersion"},"value":{"type":"MemberExpression","start":789,"end":816,"loc":{"start":{"line":25,"column":58},"end":{"line":25,"column":85}},"object":{"type":"MemberExpression","start":789,"end":802,"loc":{"start":{"line":25,"column":58},"end":{"line":25,"column":71}},"object":{"type":"Identifier","start":789,"end":792,"loc":{"start":{"line":25,"column":58},"end":{"line":25,"column":61}},"name":"req"},"property":{"type":"Identifier","start":793,"end":802,"loc":{"start":{"line":25,"column":62},"end":{"line":25,"column":71}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":803,"end":816,"loc":{"start":{"line":25,"column":72},"end":{"line":25,"column":85}},"name":"clientVersion"},"computed":false},"kind":"init"}]},{"type":"Identifier","start":820,"end":826,"loc":{"start":{"line":25,"column":89},"end":{"line":25,"column":95}},"name":"secret"}]}}}]},"alternate":null},{"type":"ExpressionStatement","start":835,"end":943,"loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":110}},"expression":{"type":"CallExpression","start":835,"end":943,"loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":110}},"callee":{"type":"MemberExpression","start":835,"end":847,"loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":14}},"object":{"type":"Identifier","start":835,"end":838,"loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":5}},"name":"res"},"property":{"type":"Identifier","start":839,"end":847,"loc":{"start":{"line":28,"column":6},"end":{"line":28,"column":14}},"name":"redirect"},"computed":false},"arguments":[{"type":"CallExpression","start":848,"end":942,"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":109}},"callee":{"type":"MemberExpression","start":848,"end":870,"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":37}},"object":{"type":"MemberExpression","start":848,"end":861,"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":28}},"object":{"type":"Identifier","start":848,"end":851,"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":18}},"name":"req"},"property":{"type":"Identifier","start":852,"end":861,"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":28}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":862,"end":870,"loc":{"start":{"line":28,"column":29},"end":{"line":28,"column":37}},"name":"buildURL"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":871,"end":935,"loc":{"start":{"line":28,"column":38},"end":{"line":28,"column":102}},"expressions":[{"type":"MemberExpression","start":883,"end":918,"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":85}},"object":{"type":"MemberExpression","start":883,"end":905,"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":72}},"object":{"type":"MemberExpression","start":883,"end":896,"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":63}},"object":{"type":"Identifier","start":883,"end":886,"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":53}},"name":"req"},"property":{"type":"Identifier","start":887,"end":896,"loc":{"start":{"line":28,"column":54},"end":{"line":28,"column":63}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":897,"end":905,"loc":{"start":{"line":28,"column":64},"end":{"line":28,"column":72}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":906,"end":918,"loc":{"start":{"line":28,"column":73},"end":{"line":28,"column":85}},"name":"authProvider"},"computed":false},{"type":"Identifier","start":928,"end":933,"loc":{"start":{"line":28,"column":95},"end":{"line":28,"column":100}},"name":"state"}],"quasis":[{"type":"TemplateElement","start":872,"end":881,"loc":{"start":{"line":28,"column":39},"end":{"line":28,"column":48}},"value":{"raw":"/connect/","cooked":"/connect/"},"tail":false},{"type":"TemplateElement","start":919,"end":926,"loc":{"start":{"line":28,"column":86},"end":{"line":28,"column":93}},"value":{"raw":"?state=","cooked":"?state="},"tail":false},{"type":"TemplateElement","start":934,"end":934,"loc":{"start":{"line":28,"column":101},"end":{"line":28,"column":101}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":937,"end":941,"loc":{"start":{"line":28,"column":104},"end":{"line":28,"column":108}},"value":true,"raw":"true"}]}]}}]}}}}],"sourceType":"module"}