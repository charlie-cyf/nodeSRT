{"type":"Program","start":0,"end":4432,"loc":{"start":{"line":1,"column":0},"end":{"line":137,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":40,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":40}},"declarations":[{"type":"VariableDeclarator","start":6,"end":40,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":40}},"id":{"type":"Identifier","start":6,"end":12,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":12}},"name":"router"},"init":{"type":"MemberExpression","start":15,"end":40,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":40}},"object":{"type":"CallExpression","start":15,"end":33,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":33}},"callee":{"type":"Identifier","start":15,"end":22,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":23,"end":32,"loc":{"start":{"line":1,"column":23},"end":{"line":1,"column":32}},"value":"express","raw":"'express'"}]},"property":{"type":"Identifier","start":34,"end":40,"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":40}},"name":"Router"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":41,"end":75,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":34}},"declarations":[{"type":"VariableDeclarator","start":47,"end":75,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":34}},"id":{"type":"Identifier","start":47,"end":54,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":13}},"name":"request"},"init":{"type":"CallExpression","start":57,"end":75,"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":34}},"callee":{"type":"Identifier","start":57,"end":64,"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":65,"end":74,"loc":{"start":{"line":2,"column":24},"end":{"line":2,"column":33}},"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":76,"end":106,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"declarations":[{"type":"VariableDeclarator","start":82,"end":106,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":30}},"id":{"type":"ObjectPattern","start":82,"end":89,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":13}},"properties":[{"type":"Property","start":84,"end":87,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":11}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":84,"end":87,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":11}},"name":"URL"},"kind":"init","value":{"type":"Identifier","start":84,"end":87,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":11}},"name":"URL"}}]},"init":{"type":"CallExpression","start":92,"end":106,"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":30}},"callee":{"type":"Identifier","start":92,"end":99,"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":100,"end":105,"loc":{"start":{"line":3,"column":24},"end":{"line":3,"column":29}},"value":"url","raw":"'url'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":107,"end":146,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":39}},"declarations":[{"type":"VariableDeclarator","start":113,"end":146,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":39}},"id":{"type":"Identifier","start":113,"end":121,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":14}},"name":"Uploader"},"init":{"type":"CallExpression","start":124,"end":146,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":39}},"callee":{"type":"Identifier","start":124,"end":131,"loc":{"start":{"line":4,"column":17},"end":{"line":4,"column":24}},"name":"require"},"arguments":[{"type":"Literal","start":132,"end":145,"loc":{"start":{"line":4,"column":25},"end":{"line":4,"column":38}},"value":"../Uploader","raw":"'../Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":147,"end":185,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":38}},"declarations":[{"type":"VariableDeclarator","start":153,"end":185,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":38}},"id":{"type":"Identifier","start":153,"end":162,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":15}},"name":"validator"},"init":{"type":"CallExpression","start":165,"end":185,"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":38}},"callee":{"type":"Identifier","start":165,"end":172,"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":25}},"name":"require"},"arguments":[{"type":"Literal","start":173,"end":184,"loc":{"start":{"line":5,"column":26},"end":{"line":5,"column":37}},"value":"validator","raw":"'validator'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":186,"end":227,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":41}},"declarations":[{"type":"VariableDeclarator","start":192,"end":227,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":41}},"id":{"type":"Identifier","start":192,"end":197,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":11}},"name":"utils"},"init":{"type":"CallExpression","start":200,"end":227,"loc":{"start":{"line":6,"column":14},"end":{"line":6,"column":41}},"callee":{"type":"Identifier","start":200,"end":207,"loc":{"start":{"line":6,"column":14},"end":{"line":6,"column":21}},"name":"require"},"arguments":[{"type":"Literal","start":208,"end":226,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":40}},"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":228,"end":313,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":85}},"declarations":[{"type":"VariableDeclarator","start":234,"end":313,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":85}},"id":{"type":"ObjectPattern","start":234,"end":281,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":53}},"properties":[{"type":"Property","start":236,"end":257,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":236,"end":257,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"name":"getProtectedHttpAgent"},"kind":"init","value":{"type":"Identifier","start":236,"end":257,"loc":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"name":"getProtectedHttpAgent"}},{"type":"Property","start":259,"end":279,"loc":{"start":{"line":7,"column":31},"end":{"line":7,"column":51}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":259,"end":279,"loc":{"start":{"line":7,"column":31},"end":{"line":7,"column":51}},"name":"getRedirectEvaluator"},"kind":"init","value":{"type":"Identifier","start":259,"end":279,"loc":{"start":{"line":7,"column":31},"end":{"line":7,"column":51}},"name":"getRedirectEvaluator"}}]},"init":{"type":"CallExpression","start":284,"end":313,"loc":{"start":{"line":7,"column":56},"end":{"line":7,"column":85}},"callee":{"type":"Identifier","start":284,"end":291,"loc":{"start":{"line":7,"column":56},"end":{"line":7,"column":63}},"name":"require"},"arguments":[{"type":"Literal","start":292,"end":312,"loc":{"start":{"line":7,"column":64},"end":{"line":7,"column":84}},"value":"../helpers/request","raw":"'../helpers/request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":314,"end":349,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":35}},"declarations":[{"type":"VariableDeclarator","start":320,"end":349,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":35}},"id":{"type":"Identifier","start":320,"end":326,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":12}},"name":"logger"},"init":{"type":"CallExpression","start":329,"end":349,"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":35}},"callee":{"type":"Identifier","start":329,"end":336,"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":337,"end":348,"loc":{"start":{"line":8,"column":23},"end":{"line":8,"column":34}},"value":"../logger","raw":"'../logger'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":351,"end":443,"loc":{"start":{"line":10,"column":0},"end":{"line":14,"column":1}},"expression":{"type":"AssignmentExpression","start":351,"end":443,"loc":{"start":{"line":10,"column":0},"end":{"line":14,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":351,"end":365,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":14}},"object":{"type":"Identifier","start":351,"end":357,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":6}},"name":"module"},"property":{"type":"Identifier","start":358,"end":365,"loc":{"start":{"line":10,"column":7},"end":{"line":10,"column":14}},"name":"exports"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":368,"end":443,"loc":{"start":{"line":10,"column":17},"end":{"line":14,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":374,"end":443,"loc":{"start":{"line":10,"column":23},"end":{"line":14,"column":1}},"body":[{"type":"ReturnStatement","start":378,"end":441,"loc":{"start":{"line":11,"column":2},"end":{"line":13,"column":22}},"argument":{"type":"CallExpression","start":385,"end":441,"loc":{"start":{"line":11,"column":9},"end":{"line":13,"column":22}},"callee":{"type":"MemberExpression","start":385,"end":428,"loc":{"start":{"line":11,"column":9},"end":{"line":13,"column":9}},"object":{"type":"CallExpression","start":385,"end":418,"loc":{"start":{"line":11,"column":9},"end":{"line":12,"column":24}},"callee":{"type":"MemberExpression","start":385,"end":403,"loc":{"start":{"line":11,"column":9},"end":{"line":12,"column":9}},"object":{"type":"CallExpression","start":385,"end":393,"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":17}},"callee":{"type":"Identifier","start":385,"end":391,"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":15}},"name":"router"},"arguments":[]},"property":{"type":"Identifier","start":399,"end":403,"loc":{"start":{"line":12,"column":5},"end":{"line":12,"column":9}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":404,"end":411,"loc":{"start":{"line":12,"column":10},"end":{"line":12,"column":17}},"value":"/meta","raw":"'/meta'"},{"type":"Identifier","start":413,"end":417,"loc":{"start":{"line":12,"column":19},"end":{"line":12,"column":23}},"name":"meta"}]},"property":{"type":"Identifier","start":424,"end":428,"loc":{"start":{"line":13,"column":5},"end":{"line":13,"column":9}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":429,"end":435,"loc":{"start":{"line":13,"column":10},"end":{"line":13,"column":16}},"value":"/get","raw":"'/get'"},{"type":"Identifier","start":437,"end":440,"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":21}},"name":"get"}]}}]}}}},{"type":"VariableDeclaration","start":599,"end":1291,"loc":{"start":{"line":22,"column":0},"end":{"line":37,"column":1}},"declarations":[{"type":"VariableDeclarator","start":605,"end":1291,"loc":{"start":{"line":22,"column":6},"end":{"line":37,"column":1}},"id":{"type":"Identifier","start":605,"end":609,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":10}},"name":"meta"},"init":{"type":"ArrowFunctionExpression","start":612,"end":1291,"loc":{"start":{"line":22,"column":13},"end":{"line":37,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":613,"end":616,"loc":{"start":{"line":22,"column":14},"end":{"line":22,"column":17}},"name":"req"},{"type":"Identifier","start":618,"end":621,"loc":{"start":{"line":22,"column":19},"end":{"line":22,"column":22}},"name":"res"}],"body":{"type":"BlockStatement","start":626,"end":1291,"loc":{"start":{"line":22,"column":27},"end":{"line":37,"column":1}},"body":[{"type":"ExpressionStatement","start":630,"end":691,"loc":{"start":{"line":23,"column":2},"end":{"line":23,"column":63}},"expression":{"type":"CallExpression","start":630,"end":691,"loc":{"start":{"line":23,"column":2},"end":{"line":23,"column":63}},"callee":{"type":"MemberExpression","start":630,"end":642,"loc":{"start":{"line":23,"column":2},"end":{"line":23,"column":14}},"object":{"type":"Identifier","start":630,"end":636,"loc":{"start":{"line":23,"column":2},"end":{"line":23,"column":8}},"name":"logger"},"property":{"type":"Identifier","start":637,"end":642,"loc":{"start":{"line":23,"column":9},"end":{"line":23,"column":14}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":643,"end":676,"loc":{"start":{"line":23,"column":15},"end":{"line":23,"column":48}},"value":"URL file import handler running","raw":"'URL file import handler running'"},{"type":"Literal","start":678,"end":682,"loc":{"start":{"line":23,"column":50},"end":{"line":23,"column":54}},"value":null,"raw":"null"},{"type":"MemberExpression","start":684,"end":690,"loc":{"start":{"line":23,"column":56},"end":{"line":23,"column":62}},"object":{"type":"Identifier","start":684,"end":687,"loc":{"start":{"line":23,"column":56},"end":{"line":23,"column":59}},"name":"req"},"property":{"type":"Identifier","start":688,"end":690,"loc":{"start":{"line":23,"column":60},"end":{"line":23,"column":62}},"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":694,"end":735,"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":43}},"declarations":[{"type":"VariableDeclarator","start":700,"end":735,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":43}},"id":{"type":"Identifier","start":700,"end":705,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":13}},"name":"debug"},"init":{"type":"MemberExpression","start":708,"end":735,"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":43}},"object":{"type":"MemberExpression","start":708,"end":729,"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":37}},"object":{"type":"MemberExpression","start":708,"end":721,"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":29}},"object":{"type":"Identifier","start":708,"end":711,"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":19}},"name":"req"},"property":{"type":"Identifier","start":712,"end":721,"loc":{"start":{"line":24,"column":20},"end":{"line":24,"column":29}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":722,"end":729,"loc":{"start":{"line":24,"column":30},"end":{"line":24,"column":37}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":730,"end":735,"loc":{"start":{"line":24,"column":38},"end":{"line":24,"column":43}},"name":"debug"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":738,"end":940,"loc":{"start":{"line":25,"column":2},"end":{"line":28,"column":3}},"test":{"type":"UnaryExpression","start":742,"end":775,"loc":{"start":{"line":25,"column":6},"end":{"line":25,"column":39}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":743,"end":775,"loc":{"start":{"line":25,"column":7},"end":{"line":25,"column":39}},"callee":{"type":"Identifier","start":743,"end":754,"loc":{"start":{"line":25,"column":7},"end":{"line":25,"column":18}},"name":"validateURL"},"arguments":[{"type":"MemberExpression","start":755,"end":767,"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":31}},"object":{"type":"MemberExpression","start":755,"end":763,"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":27}},"object":{"type":"Identifier","start":755,"end":758,"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":22}},"name":"req"},"property":{"type":"Identifier","start":759,"end":763,"loc":{"start":{"line":25,"column":23},"end":{"line":25,"column":27}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":764,"end":767,"loc":{"start":{"line":25,"column":28},"end":{"line":25,"column":31}},"name":"url"},"computed":false},{"type":"Identifier","start":769,"end":774,"loc":{"start":{"line":25,"column":33},"end":{"line":25,"column":38}},"name":"debug"}]}},"consequent":{"type":"BlockStatement","start":777,"end":940,"loc":{"start":{"line":25,"column":41},"end":{"line":28,"column":3}},"body":[{"type":"ExpressionStatement","start":783,"end":869,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":90}},"expression":{"type":"CallExpression","start":783,"end":869,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":90}},"callee":{"type":"MemberExpression","start":783,"end":795,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":16}},"object":{"type":"Identifier","start":783,"end":789,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":790,"end":795,"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":16}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":796,"end":854,"loc":{"start":{"line":26,"column":17},"end":{"line":26,"column":75}},"value":"Invalid request body detected. Exiting url meta handler.","raw":"'Invalid request body detected. Exiting url meta handler.'"},{"type":"Literal","start":856,"end":860,"loc":{"start":{"line":26,"column":77},"end":{"line":26,"column":81}},"value":null,"raw":"null"},{"type":"MemberExpression","start":862,"end":868,"loc":{"start":{"line":26,"column":83},"end":{"line":26,"column":89}},"object":{"type":"Identifier","start":862,"end":865,"loc":{"start":{"line":26,"column":83},"end":{"line":26,"column":86}},"name":"req"},"property":{"type":"Identifier","start":866,"end":868,"loc":{"start":{"line":26,"column":87},"end":{"line":26,"column":89}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":874,"end":936,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":66}},"argument":{"type":"CallExpression","start":881,"end":936,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":66}},"callee":{"type":"MemberExpression","start":881,"end":901,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":31}},"object":{"type":"CallExpression","start":881,"end":896,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":26}},"callee":{"type":"MemberExpression","start":881,"end":891,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":21}},"object":{"type":"Identifier","start":881,"end":884,"loc":{"start":{"line":27,"column":11},"end":{"line":27,"column":14}},"name":"res"},"property":{"type":"Identifier","start":885,"end":891,"loc":{"start":{"line":27,"column":15},"end":{"line":27,"column":21}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":892,"end":895,"loc":{"start":{"line":27,"column":22},"end":{"line":27,"column":25}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":897,"end":901,"loc":{"start":{"line":27,"column":27},"end":{"line":27,"column":31}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":902,"end":935,"loc":{"start":{"line":27,"column":32},"end":{"line":27,"column":65}},"properties":[{"type":"Property","start":904,"end":933,"loc":{"start":{"line":27,"column":34},"end":{"line":27,"column":63}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":904,"end":909,"loc":{"start":{"line":27,"column":34},"end":{"line":27,"column":39}},"name":"error"},"value":{"type":"Literal","start":911,"end":933,"loc":{"start":{"line":27,"column":41},"end":{"line":27,"column":63}},"value":"Invalid request body","raw":"'Invalid request body'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":944,"end":1289,"loc":{"start":{"line":30,"column":2},"end":{"line":36,"column":6}},"expression":{"type":"CallExpression","start":944,"end":1289,"loc":{"start":{"line":30,"column":2},"end":{"line":36,"column":6}},"callee":{"type":"MemberExpression","start":944,"end":1029,"loc":{"start":{"line":30,"column":2},"end":{"line":32,"column":10}},"object":{"type":"CallExpression","start":944,"end":1018,"loc":{"start":{"line":30,"column":2},"end":{"line":31,"column":35}},"callee":{"type":"MemberExpression","start":944,"end":992,"loc":{"start":{"line":30,"column":2},"end":{"line":31,"column":9}},"object":{"type":"CallExpression","start":944,"end":982,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":40}},"callee":{"type":"MemberExpression","start":944,"end":960,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":18}},"object":{"type":"Identifier","start":944,"end":949,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":7}},"name":"utils"},"property":{"type":"Identifier","start":950,"end":960,"loc":{"start":{"line":30,"column":8},"end":{"line":30,"column":18}},"name":"getURLMeta"},"computed":false},"arguments":[{"type":"MemberExpression","start":961,"end":973,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":31}},"object":{"type":"MemberExpression","start":961,"end":969,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":27}},"object":{"type":"Identifier","start":961,"end":964,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":22}},"name":"req"},"property":{"type":"Identifier","start":965,"end":969,"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":27}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":970,"end":973,"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":31}},"name":"url"},"computed":false},{"type":"UnaryExpression","start":975,"end":981,"loc":{"start":{"line":30,"column":33},"end":{"line":30,"column":39}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":976,"end":981,"loc":{"start":{"line":30,"column":34},"end":{"line":30,"column":39}},"name":"debug"}}]},"property":{"type":"Identifier","start":988,"end":992,"loc":{"start":{"line":31,"column":5},"end":{"line":31,"column":9}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":993,"end":1017,"loc":{"start":{"line":31,"column":10},"end":{"line":31,"column":34}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":994,"end":998,"loc":{"start":{"line":31,"column":11},"end":{"line":31,"column":15}},"name":"meta"}],"body":{"type":"CallExpression","start":1003,"end":1017,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":34}},"callee":{"type":"MemberExpression","start":1003,"end":1011,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":28}},"object":{"type":"Identifier","start":1003,"end":1006,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":23}},"name":"res"},"property":{"type":"Identifier","start":1007,"end":1011,"loc":{"start":{"line":31,"column":24},"end":{"line":31,"column":28}},"name":"json"},"computed":false},"arguments":[{"type":"Identifier","start":1012,"end":1016,"loc":{"start":{"line":31,"column":29},"end":{"line":31,"column":33}},"name":"meta"}]}}]},"property":{"type":"Identifier","start":1024,"end":1029,"loc":{"start":{"line":32,"column":5},"end":{"line":32,"column":10}},"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1030,"end":1288,"loc":{"start":{"line":32,"column":11},"end":{"line":36,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1031,"end":1034,"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":15}},"name":"err"}],"body":{"type":"BlockStatement","start":1039,"end":1288,"loc":{"start":{"line":32,"column":20},"end":{"line":36,"column":5}},"body":[{"type":"ExpressionStatement","start":1047,"end":1101,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":60}},"expression":{"type":"CallExpression","start":1047,"end":1101,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":60}},"callee":{"type":"MemberExpression","start":1047,"end":1059,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":18}},"object":{"type":"Identifier","start":1047,"end":1053,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":1054,"end":1059,"loc":{"start":{"line":33,"column":13},"end":{"line":33,"column":18}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":1060,"end":1063,"loc":{"start":{"line":33,"column":19},"end":{"line":33,"column":22}},"name":"err"},{"type":"Literal","start":1065,"end":1092,"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":51}},"value":"controller.url.meta.error","raw":"'controller.url.meta.error'"},{"type":"MemberExpression","start":1094,"end":1100,"loc":{"start":{"line":33,"column":53},"end":{"line":33,"column":59}},"object":{"type":"Identifier","start":1094,"end":1097,"loc":{"start":{"line":33,"column":53},"end":{"line":33,"column":56}},"name":"req"},"property":{"type":"Identifier","start":1098,"end":1100,"loc":{"start":{"line":33,"column":57},"end":{"line":33,"column":59}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":1196,"end":1282,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":92}},"argument":{"type":"CallExpression","start":1203,"end":1282,"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":92}},"callee":{"type":"MemberExpression","start":1203,"end":1237,"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":47}},"object":{"type":"CallExpression","start":1203,"end":1232,"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":42}},"callee":{"type":"MemberExpression","start":1203,"end":1213,"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":23}},"object":{"type":"Identifier","start":1203,"end":1206,"loc":{"start":{"line":35,"column":13},"end":{"line":35,"column":16}},"name":"res"},"property":{"type":"Identifier","start":1207,"end":1213,"loc":{"start":{"line":35,"column":17},"end":{"line":35,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"LogicalExpression","start":1214,"end":1231,"loc":{"start":{"line":35,"column":24},"end":{"line":35,"column":41}},"left":{"type":"MemberExpression","start":1214,"end":1224,"loc":{"start":{"line":35,"column":24},"end":{"line":35,"column":34}},"object":{"type":"Identifier","start":1214,"end":1217,"loc":{"start":{"line":35,"column":24},"end":{"line":35,"column":27}},"name":"err"},"property":{"type":"Identifier","start":1218,"end":1224,"loc":{"start":{"line":35,"column":28},"end":{"line":35,"column":34}},"name":"status"},"computed":false},"operator":"||","right":{"type":"Literal","start":1228,"end":1231,"loc":{"start":{"line":35,"column":38},"end":{"line":35,"column":41}},"value":500,"raw":"500"}}]},"property":{"type":"Identifier","start":1233,"end":1237,"loc":{"start":{"line":35,"column":43},"end":{"line":35,"column":47}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1238,"end":1281,"loc":{"start":{"line":35,"column":48},"end":{"line":35,"column":91}},"properties":[{"type":"Property","start":1240,"end":1279,"loc":{"start":{"line":35,"column":50},"end":{"line":35,"column":89}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1240,"end":1247,"loc":{"start":{"line":35,"column":50},"end":{"line":35,"column":57}},"name":"message"},"value":{"type":"Literal","start":1249,"end":1279,"loc":{"start":{"line":35,"column":59},"end":{"line":35,"column":89}},"value":"failed to fetch URL metadata","raw":"'failed to fetch URL metadata'"},"kind":"init"}]}]},"comments":[{"type":"Line","value":" @todo send more meaningful error message and status code to client if possible","start":1108,"end":1189,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":87}}}]}]}}]}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n * Fteches the size and content type of a URL\n *\n * @param {object} req expressJS request object\n * @param {object} res expressJS response object\n ","start":445,"end":598,"loc":{"start":{"line":16,"column":0},"end":{"line":21,"column":3}}}]},{"type":"VariableDeclaration","start":1527,"end":2949,"loc":{"start":{"line":46,"column":0},"end":{"line":79,"column":1}},"declarations":[{"type":"VariableDeclarator","start":1533,"end":2949,"loc":{"start":{"line":46,"column":6},"end":{"line":79,"column":1}},"id":{"type":"Identifier","start":1533,"end":1536,"loc":{"start":{"line":46,"column":6},"end":{"line":46,"column":9}},"name":"get"},"init":{"type":"ArrowFunctionExpression","start":1539,"end":2949,"loc":{"start":{"line":46,"column":12},"end":{"line":79,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1540,"end":1543,"loc":{"start":{"line":46,"column":13},"end":{"line":46,"column":16}},"name":"req"},{"type":"Identifier","start":1545,"end":1548,"loc":{"start":{"line":46,"column":18},"end":{"line":46,"column":21}},"name":"res"}],"body":{"type":"BlockStatement","start":1553,"end":2949,"loc":{"start":{"line":46,"column":26},"end":{"line":79,"column":1}},"body":[{"type":"ExpressionStatement","start":1557,"end":1618,"loc":{"start":{"line":47,"column":2},"end":{"line":47,"column":63}},"expression":{"type":"CallExpression","start":1557,"end":1618,"loc":{"start":{"line":47,"column":2},"end":{"line":47,"column":63}},"callee":{"type":"MemberExpression","start":1557,"end":1569,"loc":{"start":{"line":47,"column":2},"end":{"line":47,"column":14}},"object":{"type":"Identifier","start":1557,"end":1563,"loc":{"start":{"line":47,"column":2},"end":{"line":47,"column":8}},"name":"logger"},"property":{"type":"Identifier","start":1564,"end":1569,"loc":{"start":{"line":47,"column":9},"end":{"line":47,"column":14}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1570,"end":1603,"loc":{"start":{"line":47,"column":15},"end":{"line":47,"column":48}},"value":"URL file import handler running","raw":"'URL file import handler running'"},{"type":"Literal","start":1605,"end":1609,"loc":{"start":{"line":47,"column":50},"end":{"line":47,"column":54}},"value":null,"raw":"null"},{"type":"MemberExpression","start":1611,"end":1617,"loc":{"start":{"line":47,"column":56},"end":{"line":47,"column":62}},"object":{"type":"Identifier","start":1611,"end":1614,"loc":{"start":{"line":47,"column":56},"end":{"line":47,"column":59}},"name":"req"},"property":{"type":"Identifier","start":1615,"end":1617,"loc":{"start":{"line":47,"column":60},"end":{"line":47,"column":62}},"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":1621,"end":1662,"loc":{"start":{"line":48,"column":2},"end":{"line":48,"column":43}},"declarations":[{"type":"VariableDeclarator","start":1627,"end":1662,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":43}},"id":{"type":"Identifier","start":1627,"end":1632,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":13}},"name":"debug"},"init":{"type":"MemberExpression","start":1635,"end":1662,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":43}},"object":{"type":"MemberExpression","start":1635,"end":1656,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":37}},"object":{"type":"MemberExpression","start":1635,"end":1648,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":29}},"object":{"type":"Identifier","start":1635,"end":1638,"loc":{"start":{"line":48,"column":16},"end":{"line":48,"column":19}},"name":"req"},"property":{"type":"Identifier","start":1639,"end":1648,"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":29}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1649,"end":1656,"loc":{"start":{"line":48,"column":30},"end":{"line":48,"column":37}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1657,"end":1662,"loc":{"start":{"line":48,"column":38},"end":{"line":48,"column":43}},"name":"debug"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1665,"end":1869,"loc":{"start":{"line":49,"column":2},"end":{"line":52,"column":3}},"test":{"type":"UnaryExpression","start":1669,"end":1702,"loc":{"start":{"line":49,"column":6},"end":{"line":49,"column":39}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1670,"end":1702,"loc":{"start":{"line":49,"column":7},"end":{"line":49,"column":39}},"callee":{"type":"Identifier","start":1670,"end":1681,"loc":{"start":{"line":49,"column":7},"end":{"line":49,"column":18}},"name":"validateURL"},"arguments":[{"type":"MemberExpression","start":1682,"end":1694,"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":31}},"object":{"type":"MemberExpression","start":1682,"end":1690,"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":27}},"object":{"type":"Identifier","start":1682,"end":1685,"loc":{"start":{"line":49,"column":19},"end":{"line":49,"column":22}},"name":"req"},"property":{"type":"Identifier","start":1686,"end":1690,"loc":{"start":{"line":49,"column":23},"end":{"line":49,"column":27}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":1691,"end":1694,"loc":{"start":{"line":49,"column":28},"end":{"line":49,"column":31}},"name":"url"},"computed":false},{"type":"Identifier","start":1696,"end":1701,"loc":{"start":{"line":49,"column":33},"end":{"line":49,"column":38}},"name":"debug"}]}},"consequent":{"type":"BlockStatement","start":1704,"end":1869,"loc":{"start":{"line":49,"column":41},"end":{"line":52,"column":3}},"body":[{"type":"ExpressionStatement","start":1710,"end":1798,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":92}},"expression":{"type":"CallExpression","start":1710,"end":1798,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":92}},"callee":{"type":"MemberExpression","start":1710,"end":1722,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":16}},"object":{"type":"Identifier","start":1710,"end":1716,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":1717,"end":1722,"loc":{"start":{"line":50,"column":11},"end":{"line":50,"column":16}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1723,"end":1783,"loc":{"start":{"line":50,"column":17},"end":{"line":50,"column":77}},"value":"Invalid request body detected. Exiting url import handler.","raw":"'Invalid request body detected. Exiting url import handler.'"},{"type":"Literal","start":1785,"end":1789,"loc":{"start":{"line":50,"column":79},"end":{"line":50,"column":83}},"value":null,"raw":"null"},{"type":"MemberExpression","start":1791,"end":1797,"loc":{"start":{"line":50,"column":85},"end":{"line":50,"column":91}},"object":{"type":"Identifier","start":1791,"end":1794,"loc":{"start":{"line":50,"column":85},"end":{"line":50,"column":88}},"name":"req"},"property":{"type":"Identifier","start":1795,"end":1797,"loc":{"start":{"line":50,"column":89},"end":{"line":50,"column":91}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":1803,"end":1865,"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":66}},"argument":{"type":"CallExpression","start":1810,"end":1865,"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":66}},"callee":{"type":"MemberExpression","start":1810,"end":1830,"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":31}},"object":{"type":"CallExpression","start":1810,"end":1825,"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":26}},"callee":{"type":"MemberExpression","start":1810,"end":1820,"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":21}},"object":{"type":"Identifier","start":1810,"end":1813,"loc":{"start":{"line":51,"column":11},"end":{"line":51,"column":14}},"name":"res"},"property":{"type":"Identifier","start":1814,"end":1820,"loc":{"start":{"line":51,"column":15},"end":{"line":51,"column":21}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1821,"end":1824,"loc":{"start":{"line":51,"column":22},"end":{"line":51,"column":25}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":1826,"end":1830,"loc":{"start":{"line":51,"column":27},"end":{"line":51,"column":31}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1831,"end":1864,"loc":{"start":{"line":51,"column":32},"end":{"line":51,"column":65}},"properties":[{"type":"Property","start":1833,"end":1862,"loc":{"start":{"line":51,"column":34},"end":{"line":51,"column":63}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1833,"end":1838,"loc":{"start":{"line":51,"column":34},"end":{"line":51,"column":39}},"name":"error"},"value":{"type":"Literal","start":1840,"end":1862,"loc":{"start":{"line":51,"column":41},"end":{"line":51,"column":63}},"value":"Invalid request body","raw":"'Invalid request body'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":1873,"end":2947,"loc":{"start":{"line":54,"column":2},"end":{"line":78,"column":6}},"expression":{"type":"CallExpression","start":1873,"end":2947,"loc":{"start":{"line":54,"column":2},"end":{"line":78,"column":6}},"callee":{"type":"MemberExpression","start":1873,"end":2688,"loc":{"start":{"line":54,"column":2},"end":{"line":74,"column":12}},"object":{"type":"CallExpression","start":1873,"end":2682,"loc":{"start":{"line":54,"column":2},"end":{"line":74,"column":6}},"callee":{"type":"MemberExpression","start":1873,"end":1921,"loc":{"start":{"line":54,"column":2},"end":{"line":55,"column":9}},"object":{"type":"CallExpression","start":1873,"end":1911,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":40}},"callee":{"type":"MemberExpression","start":1873,"end":1889,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":18}},"object":{"type":"Identifier","start":1873,"end":1878,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":7}},"name":"utils"},"property":{"type":"Identifier","start":1879,"end":1889,"loc":{"start":{"line":54,"column":8},"end":{"line":54,"column":18}},"name":"getURLMeta"},"computed":false},"arguments":[{"type":"MemberExpression","start":1890,"end":1902,"loc":{"start":{"line":54,"column":19},"end":{"line":54,"column":31}},"object":{"type":"MemberExpression","start":1890,"end":1898,"loc":{"start":{"line":54,"column":19},"end":{"line":54,"column":27}},"object":{"type":"Identifier","start":1890,"end":1893,"loc":{"start":{"line":54,"column":19},"end":{"line":54,"column":22}},"name":"req"},"property":{"type":"Identifier","start":1894,"end":1898,"loc":{"start":{"line":54,"column":23},"end":{"line":54,"column":27}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":1899,"end":1902,"loc":{"start":{"line":54,"column":28},"end":{"line":54,"column":31}},"name":"url"},"computed":false},{"type":"UnaryExpression","start":1904,"end":1910,"loc":{"start":{"line":54,"column":33},"end":{"line":54,"column":39}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1905,"end":1910,"loc":{"start":{"line":54,"column":34},"end":{"line":54,"column":39}},"name":"debug"}}]},"property":{"type":"Identifier","start":1917,"end":1921,"loc":{"start":{"line":55,"column":5},"end":{"line":55,"column":9}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1922,"end":2681,"loc":{"start":{"line":55,"column":10},"end":{"line":74,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"ObjectPattern","start":1923,"end":1931,"loc":{"start":{"line":55,"column":11},"end":{"line":55,"column":19}},"properties":[{"type":"Property","start":1925,"end":1929,"loc":{"start":{"line":55,"column":13},"end":{"line":55,"column":17}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1925,"end":1929,"loc":{"start":{"line":55,"column":13},"end":{"line":55,"column":17}},"name":"size"},"kind":"init","value":{"type":"Identifier","start":1925,"end":1929,"loc":{"start":{"line":55,"column":13},"end":{"line":55,"column":17}},"name":"size"}}]}],"body":{"type":"BlockStatement","start":1936,"end":2681,"loc":{"start":{"line":55,"column":24},"end":{"line":74,"column":5}},"body":[{"type":"ExpressionStatement","start":1964,"end":2017,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":59}},"expression":{"type":"CallExpression","start":1964,"end":2017,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":59}},"callee":{"type":"MemberExpression","start":1964,"end":1976,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":18}},"object":{"type":"Identifier","start":1964,"end":1970,"loc":{"start":{"line":57,"column":6},"end":{"line":57,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":1971,"end":1976,"loc":{"start":{"line":57,"column":13},"end":{"line":57,"column":18}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1977,"end":2002,"loc":{"start":{"line":57,"column":19},"end":{"line":57,"column":44}},"value":"Instantiating uploader.","raw":"'Instantiating uploader.'"},{"type":"Literal","start":2004,"end":2008,"loc":{"start":{"line":57,"column":46},"end":{"line":57,"column":50}},"value":null,"raw":"null"},{"type":"MemberExpression","start":2010,"end":2016,"loc":{"start":{"line":57,"column":52},"end":{"line":57,"column":58}},"object":{"type":"Identifier","start":2010,"end":2013,"loc":{"start":{"line":57,"column":52},"end":{"line":57,"column":55}},"name":"req"},"property":{"type":"Identifier","start":2014,"end":2016,"loc":{"start":{"line":57,"column":56},"end":{"line":57,"column":58}},"name":"id"},"computed":false}]},"comments":[{"type":"Line","value":" @ts-ignore","start":1944,"end":1957,"loc":{"start":{"line":56,"column":6},"end":{"line":56,"column":19}}}]},{"type":"VariableDeclaration","start":2024,"end":2087,"loc":{"start":{"line":58,"column":6},"end":{"line":58,"column":69}},"declarations":[{"type":"VariableDeclarator","start":2030,"end":2087,"loc":{"start":{"line":58,"column":12},"end":{"line":58,"column":69}},"id":{"type":"Identifier","start":2030,"end":2038,"loc":{"start":{"line":58,"column":12},"end":{"line":58,"column":20}},"name":"uploader"},"init":{"type":"NewExpression","start":2041,"end":2087,"loc":{"start":{"line":58,"column":23},"end":{"line":58,"column":69}},"callee":{"type":"Identifier","start":2045,"end":2053,"loc":{"start":{"line":58,"column":27},"end":{"line":58,"column":35}},"name":"Uploader"},"arguments":[{"type":"CallExpression","start":2054,"end":2086,"loc":{"start":{"line":58,"column":36},"end":{"line":58,"column":68}},"callee":{"type":"MemberExpression","start":2054,"end":2075,"loc":{"start":{"line":58,"column":36},"end":{"line":58,"column":57}},"object":{"type":"Identifier","start":2054,"end":2062,"loc":{"start":{"line":58,"column":36},"end":{"line":58,"column":44}},"name":"Uploader"},"property":{"type":"Identifier","start":2063,"end":2075,"loc":{"start":{"line":58,"column":45},"end":{"line":58,"column":57}},"name":"reqToOptions"},"computed":false},"arguments":[{"type":"Identifier","start":2076,"end":2079,"loc":{"start":{"line":58,"column":58},"end":{"line":58,"column":61}},"name":"req"},{"type":"Identifier","start":2081,"end":2085,"loc":{"start":{"line":58,"column":63},"end":{"line":58,"column":67}},"name":"size"}]}]}}],"kind":"const"},{"type":"IfStatement","start":2095,"end":2248,"loc":{"start":{"line":60,"column":6},"end":{"line":64,"column":7}},"test":{"type":"CallExpression","start":2099,"end":2118,"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":29}},"callee":{"type":"MemberExpression","start":2099,"end":2116,"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":27}},"object":{"type":"Identifier","start":2099,"end":2107,"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":18}},"name":"uploader"},"property":{"type":"Identifier","start":2108,"end":2116,"loc":{"start":{"line":60,"column":19},"end":{"line":60,"column":27}},"name":"hasError"},"computed":false},"arguments":[]},"consequent":{"type":"BlockStatement","start":2120,"end":2248,"loc":{"start":{"line":60,"column":31},"end":{"line":64,"column":7}},"body":[{"type":"VariableDeclaration","start":2130,"end":2169,"loc":{"start":{"line":61,"column":8},"end":{"line":61,"column":47}},"declarations":[{"type":"VariableDeclarator","start":2136,"end":2169,"loc":{"start":{"line":61,"column":14},"end":{"line":61,"column":47}},"id":{"type":"Identifier","start":2136,"end":2144,"loc":{"start":{"line":61,"column":14},"end":{"line":61,"column":22}},"name":"response"},"init":{"type":"CallExpression","start":2147,"end":2169,"loc":{"start":{"line":61,"column":25},"end":{"line":61,"column":47}},"callee":{"type":"MemberExpression","start":2147,"end":2167,"loc":{"start":{"line":61,"column":25},"end":{"line":61,"column":45}},"object":{"type":"Identifier","start":2147,"end":2155,"loc":{"start":{"line":61,"column":25},"end":{"line":61,"column":33}},"name":"uploader"},"property":{"type":"Identifier","start":2156,"end":2167,"loc":{"start":{"line":61,"column":34},"end":{"line":61,"column":45}},"name":"getResponse"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":2178,"end":2225,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":55}},"expression":{"type":"CallExpression","start":2178,"end":2225,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":55}},"callee":{"type":"MemberExpression","start":2178,"end":2210,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":40}},"object":{"type":"CallExpression","start":2178,"end":2205,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":35}},"callee":{"type":"MemberExpression","start":2178,"end":2188,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":18}},"object":{"type":"Identifier","start":2178,"end":2181,"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":11}},"name":"res"},"property":{"type":"Identifier","start":2182,"end":2188,"loc":{"start":{"line":62,"column":12},"end":{"line":62,"column":18}},"name":"status"},"computed":false},"arguments":[{"type":"MemberExpression","start":2189,"end":2204,"loc":{"start":{"line":62,"column":19},"end":{"line":62,"column":34}},"object":{"type":"Identifier","start":2189,"end":2197,"loc":{"start":{"line":62,"column":19},"end":{"line":62,"column":27}},"name":"response"},"property":{"type":"Identifier","start":2198,"end":2204,"loc":{"start":{"line":62,"column":28},"end":{"line":62,"column":34}},"name":"status"},"computed":false}]},"property":{"type":"Identifier","start":2206,"end":2210,"loc":{"start":{"line":62,"column":36},"end":{"line":62,"column":40}},"name":"json"},"computed":false},"arguments":[{"type":"MemberExpression","start":2211,"end":2224,"loc":{"start":{"line":62,"column":41},"end":{"line":62,"column":54}},"object":{"type":"Identifier","start":2211,"end":2219,"loc":{"start":{"line":62,"column":41},"end":{"line":62,"column":49}},"name":"response"},"property":{"type":"Identifier","start":2220,"end":2224,"loc":{"start":{"line":62,"column":50},"end":{"line":62,"column":54}},"name":"body"},"computed":false}]}},{"type":"ReturnStatement","start":2234,"end":2240,"loc":{"start":{"line":63,"column":8},"end":{"line":63,"column":14}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":2256,"end":2349,"loc":{"start":{"line":66,"column":6},"end":{"line":66,"column":99}},"expression":{"type":"CallExpression","start":2256,"end":2349,"loc":{"start":{"line":66,"column":6},"end":{"line":66,"column":99}},"callee":{"type":"MemberExpression","start":2256,"end":2268,"loc":{"start":{"line":66,"column":6},"end":{"line":66,"column":18}},"object":{"type":"Identifier","start":2256,"end":2262,"loc":{"start":{"line":66,"column":6},"end":{"line":66,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":2263,"end":2268,"loc":{"start":{"line":66,"column":13},"end":{"line":66,"column":18}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":2269,"end":2334,"loc":{"start":{"line":66,"column":19},"end":{"line":66,"column":84}},"value":"Waiting for socket connection before beginning remote download.","raw":"'Waiting for socket connection before beginning remote download.'"},{"type":"Literal","start":2336,"end":2340,"loc":{"start":{"line":66,"column":86},"end":{"line":66,"column":90}},"value":null,"raw":"null"},{"type":"MemberExpression","start":2342,"end":2348,"loc":{"start":{"line":66,"column":92},"end":{"line":66,"column":98}},"object":{"type":"Identifier","start":2342,"end":2345,"loc":{"start":{"line":66,"column":92},"end":{"line":66,"column":95}},"name":"req"},"property":{"type":"Identifier","start":2346,"end":2348,"loc":{"start":{"line":66,"column":96},"end":{"line":66,"column":98}},"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2356,"end":2574,"loc":{"start":{"line":67,"column":6},"end":{"line":70,"column":8}},"expression":{"type":"CallExpression","start":2356,"end":2574,"loc":{"start":{"line":67,"column":6},"end":{"line":70,"column":8}},"callee":{"type":"MemberExpression","start":2356,"end":2378,"loc":{"start":{"line":67,"column":6},"end":{"line":67,"column":28}},"object":{"type":"Identifier","start":2356,"end":2364,"loc":{"start":{"line":67,"column":6},"end":{"line":67,"column":14}},"name":"uploader"},"property":{"type":"Identifier","start":2365,"end":2378,"loc":{"start":{"line":67,"column":15},"end":{"line":67,"column":28}},"name":"onSocketReady"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2379,"end":2573,"loc":{"start":{"line":67,"column":29},"end":{"line":70,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2385,"end":2573,"loc":{"start":{"line":67,"column":35},"end":{"line":70,"column":7}},"body":[{"type":"ExpressionStatement","start":2395,"end":2478,"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":91}},"expression":{"type":"CallExpression","start":2395,"end":2478,"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":91}},"callee":{"type":"MemberExpression","start":2395,"end":2407,"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":20}},"object":{"type":"Identifier","start":2395,"end":2401,"loc":{"start":{"line":68,"column":8},"end":{"line":68,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":2402,"end":2407,"loc":{"start":{"line":68,"column":15},"end":{"line":68,"column":20}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":2408,"end":2463,"loc":{"start":{"line":68,"column":21},"end":{"line":68,"column":76}},"value":"Socket connection received. Starting remote download.","raw":"'Socket connection received. Starting remote download.'"},{"type":"Literal","start":2465,"end":2469,"loc":{"start":{"line":68,"column":78},"end":{"line":68,"column":82}},"value":null,"raw":"null"},{"type":"MemberExpression","start":2471,"end":2477,"loc":{"start":{"line":68,"column":84},"end":{"line":68,"column":90}},"object":{"type":"Identifier","start":2471,"end":2474,"loc":{"start":{"line":68,"column":84},"end":{"line":68,"column":87}},"name":"req"},"property":{"type":"Identifier","start":2475,"end":2477,"loc":{"start":{"line":68,"column":88},"end":{"line":68,"column":90}},"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2487,"end":2565,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":86}},"expression":{"type":"CallExpression","start":2487,"end":2565,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":86}},"callee":{"type":"Identifier","start":2487,"end":2498,"loc":{"start":{"line":69,"column":8},"end":{"line":69,"column":19}},"name":"downloadURL"},"arguments":[{"type":"MemberExpression","start":2499,"end":2511,"loc":{"start":{"line":69,"column":20},"end":{"line":69,"column":32}},"object":{"type":"MemberExpression","start":2499,"end":2507,"loc":{"start":{"line":69,"column":20},"end":{"line":69,"column":28}},"object":{"type":"Identifier","start":2499,"end":2502,"loc":{"start":{"line":69,"column":20},"end":{"line":69,"column":23}},"name":"req"},"property":{"type":"Identifier","start":2503,"end":2507,"loc":{"start":{"line":69,"column":24},"end":{"line":69,"column":28}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":2508,"end":2511,"loc":{"start":{"line":69,"column":29},"end":{"line":69,"column":32}},"name":"url"},"computed":false},{"type":"CallExpression","start":2513,"end":2548,"loc":{"start":{"line":69,"column":34},"end":{"line":69,"column":69}},"callee":{"type":"MemberExpression","start":2513,"end":2538,"loc":{"start":{"line":69,"column":34},"end":{"line":69,"column":59}},"object":{"type":"MemberExpression","start":2513,"end":2533,"loc":{"start":{"line":69,"column":34},"end":{"line":69,"column":54}},"object":{"type":"Identifier","start":2513,"end":2521,"loc":{"start":{"line":69,"column":34},"end":{"line":69,"column":42}},"name":"uploader"},"property":{"type":"Identifier","start":2522,"end":2533,"loc":{"start":{"line":69,"column":43},"end":{"line":69,"column":54}},"name":"handleChunk"},"computed":false},"property":{"type":"Identifier","start":2534,"end":2538,"loc":{"start":{"line":69,"column":55},"end":{"line":69,"column":59}},"name":"bind"},"computed":false},"arguments":[{"type":"Identifier","start":2539,"end":2547,"loc":{"start":{"line":69,"column":60},"end":{"line":69,"column":68}},"name":"uploader"}]},{"type":"UnaryExpression","start":2550,"end":2556,"loc":{"start":{"line":69,"column":71},"end":{"line":69,"column":77}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2551,"end":2556,"loc":{"start":{"line":69,"column":72},"end":{"line":69,"column":77}},"name":"debug"}},{"type":"MemberExpression","start":2558,"end":2564,"loc":{"start":{"line":69,"column":79},"end":{"line":69,"column":85}},"object":{"type":"Identifier","start":2558,"end":2561,"loc":{"start":{"line":69,"column":79},"end":{"line":69,"column":82}},"name":"req"},"property":{"type":"Identifier","start":2562,"end":2564,"loc":{"start":{"line":69,"column":83},"end":{"line":69,"column":85}},"name":"id"},"computed":false}]}}]}}]}},{"type":"VariableDeclaration","start":2582,"end":2621,"loc":{"start":{"line":72,"column":6},"end":{"line":72,"column":45}},"declarations":[{"type":"VariableDeclarator","start":2588,"end":2621,"loc":{"start":{"line":72,"column":12},"end":{"line":72,"column":45}},"id":{"type":"Identifier","start":2588,"end":2596,"loc":{"start":{"line":72,"column":12},"end":{"line":72,"column":20}},"name":"response"},"init":{"type":"CallExpression","start":2599,"end":2621,"loc":{"start":{"line":72,"column":23},"end":{"line":72,"column":45}},"callee":{"type":"MemberExpression","start":2599,"end":2619,"loc":{"start":{"line":72,"column":23},"end":{"line":72,"column":43}},"object":{"type":"Identifier","start":2599,"end":2607,"loc":{"start":{"line":72,"column":23},"end":{"line":72,"column":31}},"name":"uploader"},"property":{"type":"Identifier","start":2608,"end":2619,"loc":{"start":{"line":72,"column":32},"end":{"line":72,"column":43}},"name":"getResponse"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":2628,"end":2675,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":53}},"expression":{"type":"CallExpression","start":2628,"end":2675,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":53}},"callee":{"type":"MemberExpression","start":2628,"end":2660,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":38}},"object":{"type":"CallExpression","start":2628,"end":2655,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":33}},"callee":{"type":"MemberExpression","start":2628,"end":2638,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":16}},"object":{"type":"Identifier","start":2628,"end":2631,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":9}},"name":"res"},"property":{"type":"Identifier","start":2632,"end":2638,"loc":{"start":{"line":73,"column":10},"end":{"line":73,"column":16}},"name":"status"},"computed":false},"arguments":[{"type":"MemberExpression","start":2639,"end":2654,"loc":{"start":{"line":73,"column":17},"end":{"line":73,"column":32}},"object":{"type":"Identifier","start":2639,"end":2647,"loc":{"start":{"line":73,"column":17},"end":{"line":73,"column":25}},"name":"response"},"property":{"type":"Identifier","start":2648,"end":2654,"loc":{"start":{"line":73,"column":26},"end":{"line":73,"column":32}},"name":"status"},"computed":false}]},"property":{"type":"Identifier","start":2656,"end":2660,"loc":{"start":{"line":73,"column":34},"end":{"line":73,"column":38}},"name":"json"},"computed":false},"arguments":[{"type":"MemberExpression","start":2661,"end":2674,"loc":{"start":{"line":73,"column":39},"end":{"line":73,"column":52}},"object":{"type":"Identifier","start":2661,"end":2669,"loc":{"start":{"line":73,"column":39},"end":{"line":73,"column":47}},"name":"response"},"property":{"type":"Identifier","start":2670,"end":2674,"loc":{"start":{"line":73,"column":48},"end":{"line":73,"column":52}},"name":"body"},"computed":false}]}}]}}]},"property":{"type":"Identifier","start":2683,"end":2688,"loc":{"start":{"line":74,"column":7},"end":{"line":74,"column":12}},"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2689,"end":2946,"loc":{"start":{"line":74,"column":13},"end":{"line":78,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2690,"end":2693,"loc":{"start":{"line":74,"column":14},"end":{"line":74,"column":17}},"name":"err"}],"body":{"type":"BlockStatement","start":2698,"end":2946,"loc":{"start":{"line":74,"column":22},"end":{"line":78,"column":5}},"body":[{"type":"ExpressionStatement","start":2706,"end":2759,"loc":{"start":{"line":75,"column":6},"end":{"line":75,"column":59}},"expression":{"type":"CallExpression","start":2706,"end":2759,"loc":{"start":{"line":75,"column":6},"end":{"line":75,"column":59}},"callee":{"type":"MemberExpression","start":2706,"end":2718,"loc":{"start":{"line":75,"column":6},"end":{"line":75,"column":18}},"object":{"type":"Identifier","start":2706,"end":2712,"loc":{"start":{"line":75,"column":6},"end":{"line":75,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":2713,"end":2718,"loc":{"start":{"line":75,"column":13},"end":{"line":75,"column":18}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":2719,"end":2722,"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":22}},"name":"err"},{"type":"Literal","start":2724,"end":2750,"loc":{"start":{"line":75,"column":24},"end":{"line":75,"column":50}},"value":"controller.url.get.error","raw":"'controller.url.get.error'"},{"type":"MemberExpression","start":2752,"end":2758,"loc":{"start":{"line":75,"column":52},"end":{"line":75,"column":58}},"object":{"type":"Identifier","start":2752,"end":2755,"loc":{"start":{"line":75,"column":52},"end":{"line":75,"column":55}},"name":"req"},"property":{"type":"Identifier","start":2756,"end":2758,"loc":{"start":{"line":75,"column":56},"end":{"line":75,"column":58}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":2854,"end":2940,"loc":{"start":{"line":77,"column":6},"end":{"line":77,"column":92}},"argument":{"type":"CallExpression","start":2861,"end":2940,"loc":{"start":{"line":77,"column":13},"end":{"line":77,"column":92}},"callee":{"type":"MemberExpression","start":2861,"end":2895,"loc":{"start":{"line":77,"column":13},"end":{"line":77,"column":47}},"object":{"type":"CallExpression","start":2861,"end":2890,"loc":{"start":{"line":77,"column":13},"end":{"line":77,"column":42}},"callee":{"type":"MemberExpression","start":2861,"end":2871,"loc":{"start":{"line":77,"column":13},"end":{"line":77,"column":23}},"object":{"type":"Identifier","start":2861,"end":2864,"loc":{"start":{"line":77,"column":13},"end":{"line":77,"column":16}},"name":"res"},"property":{"type":"Identifier","start":2865,"end":2871,"loc":{"start":{"line":77,"column":17},"end":{"line":77,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"LogicalExpression","start":2872,"end":2889,"loc":{"start":{"line":77,"column":24},"end":{"line":77,"column":41}},"left":{"type":"MemberExpression","start":2872,"end":2882,"loc":{"start":{"line":77,"column":24},"end":{"line":77,"column":34}},"object":{"type":"Identifier","start":2872,"end":2875,"loc":{"start":{"line":77,"column":24},"end":{"line":77,"column":27}},"name":"err"},"property":{"type":"Identifier","start":2876,"end":2882,"loc":{"start":{"line":77,"column":28},"end":{"line":77,"column":34}},"name":"status"},"computed":false},"operator":"||","right":{"type":"Literal","start":2886,"end":2889,"loc":{"start":{"line":77,"column":38},"end":{"line":77,"column":41}},"value":500,"raw":"500"}}]},"property":{"type":"Identifier","start":2891,"end":2895,"loc":{"start":{"line":77,"column":43},"end":{"line":77,"column":47}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2896,"end":2939,"loc":{"start":{"line":77,"column":48},"end":{"line":77,"column":91}},"properties":[{"type":"Property","start":2898,"end":2937,"loc":{"start":{"line":77,"column":50},"end":{"line":77,"column":89}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2898,"end":2905,"loc":{"start":{"line":77,"column":50},"end":{"line":77,"column":57}},"name":"message"},"value":{"type":"Literal","start":2907,"end":2937,"loc":{"start":{"line":77,"column":59},"end":{"line":77,"column":89}},"value":"failed to fetch URL metadata","raw":"'failed to fetch URL metadata'"},"kind":"init"}]}]},"comments":[{"type":"Line","value":" @todo send more meaningful error message and status code to client if possible","start":2766,"end":2847,"loc":{"start":{"line":76,"column":6},"end":{"line":76,"column":87}}}]}]}}]}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n * Handles the reques of import a file from a remote URL, and then\n * subsequently uploading it to the specified destination.\n *\n * @param {object} req expressJS request object\n * @param {object} res expressJS response object\n ","start":1293,"end":1526,"loc":{"start":{"line":39,"column":0},"end":{"line":45,"column":3}}}]},{"type":"VariableDeclaration","start":3117,"end":3352,"loc":{"start":{"line":86,"column":0},"end":{"line":97,"column":1}},"declarations":[{"type":"VariableDeclarator","start":3123,"end":3352,"loc":{"start":{"line":86,"column":6},"end":{"line":97,"column":1}},"id":{"type":"Identifier","start":3123,"end":3134,"loc":{"start":{"line":86,"column":6},"end":{"line":86,"column":17}},"name":"validateURL"},"init":{"type":"ArrowFunctionExpression","start":3137,"end":3352,"loc":{"start":{"line":86,"column":20},"end":{"line":97,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3138,"end":3141,"loc":{"start":{"line":86,"column":21},"end":{"line":86,"column":24}},"name":"url"},{"type":"Identifier","start":3143,"end":3148,"loc":{"start":{"line":86,"column":26},"end":{"line":86,"column":31}},"name":"debug"}],"body":{"type":"BlockStatement","start":3153,"end":3352,"loc":{"start":{"line":86,"column":36},"end":{"line":97,"column":1}},"body":[{"type":"VariableDeclaration","start":3157,"end":3269,"loc":{"start":{"line":87,"column":2},"end":{"line":91,"column":3}},"declarations":[{"type":"VariableDeclarator","start":3163,"end":3269,"loc":{"start":{"line":87,"column":8},"end":{"line":91,"column":3}},"id":{"type":"Identifier","start":3163,"end":3175,"loc":{"start":{"line":87,"column":8},"end":{"line":87,"column":20}},"name":"validURLOpts"},"init":{"type":"ObjectExpression","start":3178,"end":3269,"loc":{"start":{"line":87,"column":23},"end":{"line":91,"column":3}},"properties":[{"type":"Property","start":3184,"end":3212,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":32}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3184,"end":3193,"loc":{"start":{"line":88,"column":4},"end":{"line":88,"column":13}},"name":"protocols"},"value":{"type":"ArrayExpression","start":3195,"end":3212,"loc":{"start":{"line":88,"column":15},"end":{"line":88,"column":32}},"elements":[{"type":"Literal","start":3196,"end":3202,"loc":{"start":{"line":88,"column":16},"end":{"line":88,"column":22}},"value":"http","raw":"'http'"},{"type":"Literal","start":3204,"end":3211,"loc":{"start":{"line":88,"column":24},"end":{"line":88,"column":31}},"value":"https","raw":"'https'"}]},"kind":"init"},{"type":"Property","start":3218,"end":3240,"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":26}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3218,"end":3234,"loc":{"start":{"line":89,"column":4},"end":{"line":89,"column":20}},"name":"require_protocol"},"value":{"type":"Literal","start":3236,"end":3240,"loc":{"start":{"line":89,"column":22},"end":{"line":89,"column":26}},"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":3246,"end":3265,"loc":{"start":{"line":90,"column":4},"end":{"line":90,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3246,"end":3257,"loc":{"start":{"line":90,"column":4},"end":{"line":90,"column":15}},"name":"require_tld"},"value":{"type":"UnaryExpression","start":3259,"end":3265,"loc":{"start":{"line":90,"column":17},"end":{"line":90,"column":23}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":3260,"end":3265,"loc":{"start":{"line":90,"column":18},"end":{"line":90,"column":23}},"name":"debug"}},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":3272,"end":3335,"loc":{"start":{"line":92,"column":2},"end":{"line":94,"column":3}},"test":{"type":"UnaryExpression","start":3276,"end":3311,"loc":{"start":{"line":92,"column":6},"end":{"line":92,"column":41}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":3277,"end":3311,"loc":{"start":{"line":92,"column":7},"end":{"line":92,"column":41}},"callee":{"type":"MemberExpression","start":3277,"end":3292,"loc":{"start":{"line":92,"column":7},"end":{"line":92,"column":22}},"object":{"type":"Identifier","start":3277,"end":3286,"loc":{"start":{"line":92,"column":7},"end":{"line":92,"column":16}},"name":"validator"},"property":{"type":"Identifier","start":3287,"end":3292,"loc":{"start":{"line":92,"column":17},"end":{"line":92,"column":22}},"name":"isURL"},"computed":false},"arguments":[{"type":"Identifier","start":3293,"end":3296,"loc":{"start":{"line":92,"column":23},"end":{"line":92,"column":26}},"name":"url"},{"type":"Identifier","start":3298,"end":3310,"loc":{"start":{"line":92,"column":28},"end":{"line":92,"column":40}},"name":"validURLOpts"}]}},"consequent":{"type":"BlockStatement","start":3313,"end":3335,"loc":{"start":{"line":92,"column":43},"end":{"line":94,"column":3}},"body":[{"type":"ReturnStatement","start":3319,"end":3331,"loc":{"start":{"line":93,"column":4},"end":{"line":93,"column":16}},"argument":{"type":"Literal","start":3326,"end":3331,"loc":{"start":{"line":93,"column":11},"end":{"line":93,"column":16}},"value":false,"raw":"false"}}]},"alternate":null},{"type":"ReturnStatement","start":3339,"end":3350,"loc":{"start":{"line":96,"column":2},"end":{"line":96,"column":13}},"argument":{"type":"Literal","start":3346,"end":3350,"loc":{"start":{"line":96,"column":9},"end":{"line":96,"column":13}},"value":true,"raw":"true"}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n * Validates that the download URL is secure\n * @param {string} url the url to validate\n * @param {boolean} debug whether the server is running in debug mode\n ","start":2951,"end":3116,"loc":{"start":{"line":81,"column":0},"end":{"line":85,"column":3}}}]},{"type":"VariableDeclaration","start":3699,"end":4431,"loc":{"start":{"line":114,"column":0},"end":{"line":136,"column":1}},"declarations":[{"type":"VariableDeclarator","start":3705,"end":4431,"loc":{"start":{"line":114,"column":6},"end":{"line":136,"column":1}},"id":{"type":"Identifier","start":3705,"end":3716,"loc":{"start":{"line":114,"column":6},"end":{"line":114,"column":17}},"name":"downloadURL"},"init":{"type":"ArrowFunctionExpression","start":3719,"end":4431,"loc":{"start":{"line":114,"column":20},"end":{"line":136,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3720,"end":3723,"loc":{"start":{"line":114,"column":21},"end":{"line":114,"column":24}},"name":"url"},{"type":"Identifier","start":3725,"end":3736,"loc":{"start":{"line":114,"column":26},"end":{"line":114,"column":37}},"name":"onDataChunk"},{"type":"Identifier","start":3738,"end":3751,"loc":{"start":{"line":114,"column":39},"end":{"line":114,"column":52}},"name":"blockLocalIPs"},{"type":"Identifier","start":3753,"end":3760,"loc":{"start":{"line":114,"column":54},"end":{"line":114,"column":61}},"name":"traceId"}],"body":{"type":"BlockStatement","start":3765,"end":4431,"loc":{"start":{"line":114,"column":66},"end":{"line":136,"column":1}},"body":[{"type":"VariableDeclaration","start":3769,"end":3960,"loc":{"start":{"line":115,"column":2},"end":{"line":120,"column":3}},"declarations":[{"type":"VariableDeclarator","start":3775,"end":3960,"loc":{"start":{"line":115,"column":8},"end":{"line":120,"column":3}},"id":{"type":"Identifier","start":3775,"end":3779,"loc":{"start":{"line":115,"column":8},"end":{"line":115,"column":12}},"name":"opts"},"init":{"type":"ObjectExpression","start":3782,"end":3960,"loc":{"start":{"line":115,"column":15},"end":{"line":120,"column":3}},"properties":[{"type":"Property","start":3788,"end":3796,"loc":{"start":{"line":116,"column":4},"end":{"line":116,"column":12}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3788,"end":3791,"loc":{"start":{"line":116,"column":4},"end":{"line":116,"column":7}},"name":"uri"},"value":{"type":"Identifier","start":3793,"end":3796,"loc":{"start":{"line":116,"column":9},"end":{"line":116,"column":12}},"name":"url"},"kind":"init"},{"type":"Property","start":3802,"end":3815,"loc":{"start":{"line":117,"column":4},"end":{"line":117,"column":17}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3802,"end":3808,"loc":{"start":{"line":117,"column":4},"end":{"line":117,"column":10}},"name":"method"},"value":{"type":"Literal","start":3810,"end":3815,"loc":{"start":{"line":117,"column":12},"end":{"line":117,"column":17}},"value":"GET","raw":"'GET'"},"kind":"init"},{"type":"Property","start":3821,"end":3877,"loc":{"start":{"line":118,"column":4},"end":{"line":118,"column":60}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3821,"end":3835,"loc":{"start":{"line":118,"column":4},"end":{"line":118,"column":18}},"name":"followRedirect"},"value":{"type":"CallExpression","start":3837,"end":3877,"loc":{"start":{"line":118,"column":20},"end":{"line":118,"column":60}},"callee":{"type":"Identifier","start":3837,"end":3857,"loc":{"start":{"line":118,"column":20},"end":{"line":118,"column":40}},"name":"getRedirectEvaluator"},"arguments":[{"type":"Identifier","start":3858,"end":3861,"loc":{"start":{"line":118,"column":41},"end":{"line":118,"column":44}},"name":"url"},{"type":"Identifier","start":3863,"end":3876,"loc":{"start":{"line":118,"column":46},"end":{"line":118,"column":59}},"name":"blockLocalIPs"}]},"kind":"init"},{"type":"Property","start":3883,"end":3956,"loc":{"start":{"line":119,"column":4},"end":{"line":119,"column":77}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3883,"end":3893,"loc":{"start":{"line":119,"column":4},"end":{"line":119,"column":14}},"name":"agentClass"},"value":{"type":"CallExpression","start":3895,"end":3956,"loc":{"start":{"line":119,"column":16},"end":{"line":119,"column":77}},"callee":{"type":"Identifier","start":3895,"end":3916,"loc":{"start":{"line":119,"column":16},"end":{"line":119,"column":37}},"name":"getProtectedHttpAgent"},"arguments":[{"type":"MemberExpression","start":3917,"end":3940,"loc":{"start":{"line":119,"column":38},"end":{"line":119,"column":61}},"object":{"type":"NewExpression","start":3918,"end":3930,"loc":{"start":{"line":119,"column":39},"end":{"line":119,"column":51}},"callee":{"type":"Identifier","start":3922,"end":3925,"loc":{"start":{"line":119,"column":43},"end":{"line":119,"column":46}},"name":"URL"},"arguments":[{"type":"Identifier","start":3926,"end":3929,"loc":{"start":{"line":119,"column":47},"end":{"line":119,"column":50}},"name":"url"}]},"property":{"type":"Identifier","start":3932,"end":3940,"loc":{"start":{"line":119,"column":53},"end":{"line":119,"column":61}},"name":"protocol"},"computed":false},{"type":"Identifier","start":3942,"end":3955,"loc":{"start":{"line":119,"column":63},"end":{"line":119,"column":76}},"name":"blockLocalIPs"}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3964,"end":4429,"loc":{"start":{"line":122,"column":2},"end":{"line":135,"column":6}},"expression":{"type":"CallExpression","start":3964,"end":4429,"loc":{"start":{"line":122,"column":2},"end":{"line":135,"column":6}},"callee":{"type":"MemberExpression","start":3964,"end":4307,"loc":{"start":{"line":122,"column":2},"end":{"line":132,"column":7}},"object":{"type":"CallExpression","start":3964,"end":4299,"loc":{"start":{"line":122,"column":2},"end":{"line":131,"column":45}},"callee":{"type":"MemberExpression","start":3964,"end":4261,"loc":{"start":{"line":122,"column":2},"end":{"line":131,"column":7}},"object":{"type":"CallExpression","start":3964,"end":4253,"loc":{"start":{"line":122,"column":2},"end":{"line":130,"column":6}},"callee":{"type":"MemberExpression","start":3964,"end":3985,"loc":{"start":{"line":122,"column":2},"end":{"line":123,"column":7}},"object":{"type":"CallExpression","start":3964,"end":3977,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":15}},"callee":{"type":"Identifier","start":3964,"end":3971,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":9}},"name":"request"},"arguments":[{"type":"Identifier","start":3972,"end":3976,"loc":{"start":{"line":122,"column":10},"end":{"line":122,"column":14}},"name":"opts"}]},"property":{"type":"Identifier","start":3983,"end":3985,"loc":{"start":{"line":123,"column":5},"end":{"line":123,"column":7}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3986,"end":3996,"loc":{"start":{"line":123,"column":8},"end":{"line":123,"column":18}},"value":"response","raw":"'response'"},{"type":"ArrowFunctionExpression","start":3998,"end":4252,"loc":{"start":{"line":123,"column":20},"end":{"line":130,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3999,"end":4003,"loc":{"start":{"line":123,"column":21},"end":{"line":123,"column":25}},"name":"resp"}],"body":{"type":"BlockStatement","start":4008,"end":4252,"loc":{"start":{"line":123,"column":30},"end":{"line":130,"column":5}},"body":[{"type":"IfStatement","start":4016,"end":4246,"loc":{"start":{"line":124,"column":6},"end":{"line":129,"column":7}},"test":{"type":"BinaryExpression","start":4020,"end":4042,"loc":{"start":{"line":124,"column":10},"end":{"line":124,"column":32}},"left":{"type":"MemberExpression","start":4020,"end":4035,"loc":{"start":{"line":124,"column":10},"end":{"line":124,"column":25}},"object":{"type":"Identifier","start":4020,"end":4024,"loc":{"start":{"line":124,"column":10},"end":{"line":124,"column":14}},"name":"resp"},"property":{"type":"Identifier","start":4025,"end":4035,"loc":{"start":{"line":124,"column":15},"end":{"line":124,"column":25}},"name":"statusCode"},"computed":false},"operator":">=","right":{"type":"Literal","start":4039,"end":4042,"loc":{"start":{"line":124,"column":29},"end":{"line":124,"column":32}},"value":300,"raw":"300"}},"consequent":{"type":"BlockStatement","start":4044,"end":4170,"loc":{"start":{"line":124,"column":34},"end":{"line":127,"column":7}},"body":[{"type":"VariableDeclaration","start":4054,"end":4131,"loc":{"start":{"line":125,"column":8},"end":{"line":125,"column":85}},"declarations":[{"type":"VariableDeclarator","start":4060,"end":4131,"loc":{"start":{"line":125,"column":14},"end":{"line":125,"column":85}},"id":{"type":"Identifier","start":4060,"end":4063,"loc":{"start":{"line":125,"column":14},"end":{"line":125,"column":17}},"name":"err"},"init":{"type":"NewExpression","start":4066,"end":4131,"loc":{"start":{"line":125,"column":20},"end":{"line":125,"column":85}},"callee":{"type":"Identifier","start":4070,"end":4075,"loc":{"start":{"line":125,"column":24},"end":{"line":125,"column":29}},"name":"Error"},"arguments":[{"type":"TemplateLiteral","start":4076,"end":4130,"loc":{"start":{"line":125,"column":30},"end":{"line":125,"column":84}},"expressions":[{"type":"MemberExpression","start":4113,"end":4128,"loc":{"start":{"line":125,"column":67},"end":{"line":125,"column":82}},"object":{"type":"Identifier","start":4113,"end":4117,"loc":{"start":{"line":125,"column":67},"end":{"line":125,"column":71}},"name":"resp"},"property":{"type":"Identifier","start":4118,"end":4128,"loc":{"start":{"line":125,"column":72},"end":{"line":125,"column":82}},"name":"statusCode"},"computed":false}],"quasis":[{"type":"TemplateElement","start":4077,"end":4111,"loc":{"start":{"line":125,"column":31},"end":{"line":125,"column":65}},"value":{"raw":"URL server responded with status: ","cooked":"URL server responded with status: "},"tail":false},{"type":"TemplateElement","start":4129,"end":4129,"loc":{"start":{"line":125,"column":83},"end":{"line":125,"column":83}},"value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":4140,"end":4162,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":30}},"expression":{"type":"CallExpression","start":4140,"end":4162,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":30}},"callee":{"type":"Identifier","start":4140,"end":4151,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":19}},"name":"onDataChunk"},"arguments":[{"type":"Identifier","start":4152,"end":4155,"loc":{"start":{"line":126,"column":20},"end":{"line":126,"column":23}},"name":"err"},{"type":"Literal","start":4157,"end":4161,"loc":{"start":{"line":126,"column":25},"end":{"line":126,"column":29}},"value":null,"raw":"null"}]}}]},"alternate":{"type":"BlockStatement","start":4176,"end":4246,"loc":{"start":{"line":127,"column":13},"end":{"line":129,"column":7}},"body":[{"type":"ExpressionStatement","start":4186,"end":4238,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":60}},"expression":{"type":"CallExpression","start":4186,"end":4238,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":60}},"callee":{"type":"MemberExpression","start":4186,"end":4193,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":15}},"object":{"type":"Identifier","start":4186,"end":4190,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":12}},"name":"resp"},"property":{"type":"Identifier","start":4191,"end":4193,"loc":{"start":{"line":128,"column":13},"end":{"line":128,"column":15}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":4194,"end":4200,"loc":{"start":{"line":128,"column":16},"end":{"line":128,"column":22}},"value":"data","raw":"'data'"},{"type":"ArrowFunctionExpression","start":4202,"end":4237,"loc":{"start":{"line":128,"column":24},"end":{"line":128,"column":59}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":4203,"end":4208,"loc":{"start":{"line":128,"column":25},"end":{"line":128,"column":30}},"name":"chunk"}],"body":{"type":"CallExpression","start":4213,"end":4237,"loc":{"start":{"line":128,"column":35},"end":{"line":128,"column":59}},"callee":{"type":"Identifier","start":4213,"end":4224,"loc":{"start":{"line":128,"column":35},"end":{"line":128,"column":46}},"name":"onDataChunk"},"arguments":[{"type":"Literal","start":4225,"end":4229,"loc":{"start":{"line":128,"column":47},"end":{"line":128,"column":51}},"value":null,"raw":"null"},{"type":"Identifier","start":4231,"end":4236,"loc":{"start":{"line":128,"column":53},"end":{"line":128,"column":58}},"name":"chunk"}]}}]}}]}}]}}]},"property":{"type":"Identifier","start":4259,"end":4261,"loc":{"start":{"line":131,"column":5},"end":{"line":131,"column":7}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":4262,"end":4267,"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":13}},"value":"end","raw":"'end'"},{"type":"ArrowFunctionExpression","start":4269,"end":4298,"loc":{"start":{"line":131,"column":15},"end":{"line":131,"column":44}},"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":4275,"end":4298,"loc":{"start":{"line":131,"column":21},"end":{"line":131,"column":44}},"callee":{"type":"Identifier","start":4275,"end":4286,"loc":{"start":{"line":131,"column":21},"end":{"line":131,"column":32}},"name":"onDataChunk"},"arguments":[{"type":"Literal","start":4287,"end":4291,"loc":{"start":{"line":131,"column":33},"end":{"line":131,"column":37}},"value":null,"raw":"null"},{"type":"Literal","start":4293,"end":4297,"loc":{"start":{"line":131,"column":39},"end":{"line":131,"column":43}},"value":null,"raw":"null"}]}}]},"property":{"type":"Identifier","start":4305,"end":4307,"loc":{"start":{"line":132,"column":5},"end":{"line":132,"column":7}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":4308,"end":4315,"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":15}},"value":"error","raw":"'error'"},{"type":"ArrowFunctionExpression","start":4317,"end":4428,"loc":{"start":{"line":132,"column":17},"end":{"line":135,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4318,"end":4321,"loc":{"start":{"line":132,"column":18},"end":{"line":132,"column":21}},"name":"err"}],"body":{"type":"BlockStatement","start":4326,"end":4428,"loc":{"start":{"line":132,"column":26},"end":{"line":135,"column":5}},"body":[{"type":"ExpressionStatement","start":4334,"end":4393,"loc":{"start":{"line":133,"column":6},"end":{"line":133,"column":65}},"expression":{"type":"CallExpression","start":4334,"end":4393,"loc":{"start":{"line":133,"column":6},"end":{"line":133,"column":65}},"callee":{"type":"MemberExpression","start":4334,"end":4346,"loc":{"start":{"line":133,"column":6},"end":{"line":133,"column":18}},"object":{"type":"Identifier","start":4334,"end":4340,"loc":{"start":{"line":133,"column":6},"end":{"line":133,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":4341,"end":4346,"loc":{"start":{"line":133,"column":13},"end":{"line":133,"column":18}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":4347,"end":4350,"loc":{"start":{"line":133,"column":19},"end":{"line":133,"column":22}},"name":"err"},{"type":"Literal","start":4352,"end":4383,"loc":{"start":{"line":133,"column":24},"end":{"line":133,"column":55}},"value":"controller.url.download.error","raw":"'controller.url.download.error'"},{"type":"Identifier","start":4385,"end":4392,"loc":{"start":{"line":133,"column":57},"end":{"line":133,"column":64}},"name":"traceId"}]}},{"type":"ExpressionStatement","start":4400,"end":4422,"loc":{"start":{"line":134,"column":6},"end":{"line":134,"column":28}},"expression":{"type":"CallExpression","start":4400,"end":4422,"loc":{"start":{"line":134,"column":6},"end":{"line":134,"column":28}},"callee":{"type":"Identifier","start":4400,"end":4411,"loc":{"start":{"line":134,"column":6},"end":{"line":134,"column":17}},"name":"onDataChunk"},"arguments":[{"type":"Identifier","start":4412,"end":4415,"loc":{"start":{"line":134,"column":18},"end":{"line":134,"column":21}},"name":"err"},{"type":"Literal","start":4417,"end":4421,"loc":{"start":{"line":134,"column":23},"end":{"line":134,"column":27}},"value":null,"raw":"null"}]}}]}}]}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n * @callback downloadCallback\n * @param {Error} err\n * @param {string | Buffer | Buffer[]} chunk\n ","start":3354,"end":3458,"loc":{"start":{"line":99,"column":0},"end":{"line":103,"column":3}}},{"type":"Block","value":"*\n * Downloads the content in the specified url, and passes the data\n * to the callback chunk by chunk.\n *\n * @param {string} url\n * @param {downloadCallback} onDataChunk\n * @param {boolean} blockLocalIPs\n * @param {string=} traceId\n ","start":3460,"end":3698,"loc":{"start":{"line":105,"column":0},"end":{"line":113,"column":3}}}]}],"sourceType":"script"}