{"type":"Program","start":0,"end":3843,"body":[{"type":"VariableDeclaration","start":0,"end":40,"declarations":[{"type":"VariableDeclarator","start":6,"end":40,"id":{"type":"Identifier","start":6,"end":12,"name":"router"},"init":{"type":"MemberExpression","start":15,"end":40,"object":{"type":"CallExpression","start":15,"end":33,"callee":{"type":"Identifier","start":15,"end":22,"name":"require"},"arguments":[{"type":"Literal","start":23,"end":32,"value":"express","raw":"'express'"}]},"property":{"type":"Identifier","start":34,"end":40,"name":"Router"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":41,"end":75,"declarations":[{"type":"VariableDeclarator","start":47,"end":75,"id":{"type":"Identifier","start":47,"end":54,"name":"request"},"init":{"type":"CallExpression","start":57,"end":75,"callee":{"type":"Identifier","start":57,"end":64,"name":"require"},"arguments":[{"type":"Literal","start":65,"end":74,"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":76,"end":115,"declarations":[{"type":"VariableDeclarator","start":82,"end":115,"id":{"type":"Identifier","start":82,"end":90,"name":"Uploader"},"init":{"type":"CallExpression","start":93,"end":115,"callee":{"type":"Identifier","start":93,"end":100,"name":"require"},"arguments":[{"type":"Literal","start":101,"end":114,"value":"../Uploader","raw":"'../Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":116,"end":154,"declarations":[{"type":"VariableDeclarator","start":122,"end":154,"id":{"type":"Identifier","start":122,"end":131,"name":"validator"},"init":{"type":"CallExpression","start":134,"end":154,"callee":{"type":"Identifier","start":134,"end":141,"name":"require"},"arguments":[{"type":"Literal","start":142,"end":153,"value":"validator","raw":"'validator'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":155,"end":196,"declarations":[{"type":"VariableDeclarator","start":161,"end":196,"id":{"type":"Identifier","start":161,"end":166,"name":"utils"},"init":{"type":"CallExpression","start":169,"end":196,"callee":{"type":"Identifier","start":169,"end":176,"name":"require"},"arguments":[{"type":"Literal","start":177,"end":195,"value":"../helpers/utils","raw":"'../helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":197,"end":260,"declarations":[{"type":"VariableDeclarator","start":203,"end":260,"id":{"type":"ObjectPattern","start":203,"end":228,"properties":[{"type":"Property","start":205,"end":226,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":205,"end":226,"name":"getProtectedHttpAgent"},"kind":"init","value":{"type":"Identifier","start":205,"end":226,"name":"getProtectedHttpAgent"}}]},"init":{"type":"CallExpression","start":231,"end":260,"callee":{"type":"Identifier","start":231,"end":238,"name":"require"},"arguments":[{"type":"Literal","start":239,"end":259,"value":"../helpers/request","raw":"'../helpers/request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":261,"end":296,"declarations":[{"type":"VariableDeclarator","start":267,"end":296,"id":{"type":"Identifier","start":267,"end":273,"name":"logger"},"init":{"type":"CallExpression","start":276,"end":296,"callee":{"type":"Identifier","start":276,"end":283,"name":"require"},"arguments":[{"type":"Literal","start":284,"end":295,"value":"../logger","raw":"'../logger'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":298,"end":390,"expression":{"type":"AssignmentExpression","start":298,"end":390,"operator":"=","left":{"type":"MemberExpression","start":298,"end":312,"object":{"type":"Identifier","start":298,"end":304,"name":"module"},"property":{"type":"Identifier","start":305,"end":312,"name":"exports"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":315,"end":390,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":321,"end":390,"body":[{"type":"ReturnStatement","start":325,"end":388,"argument":{"type":"CallExpression","start":332,"end":388,"callee":{"type":"MemberExpression","start":332,"end":375,"object":{"type":"CallExpression","start":332,"end":365,"callee":{"type":"MemberExpression","start":332,"end":350,"object":{"type":"CallExpression","start":332,"end":340,"callee":{"type":"Identifier","start":332,"end":338,"name":"router"},"arguments":[]},"property":{"type":"Identifier","start":346,"end":350,"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":351,"end":358,"value":"/meta","raw":"'/meta'"},{"type":"Identifier","start":360,"end":364,"name":"meta"}]},"property":{"type":"Identifier","start":371,"end":375,"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":376,"end":382,"value":"/get","raw":"'/get'"},{"type":"Identifier","start":384,"end":387,"name":"get"}]}}]}}}},{"type":"VariableDeclaration","start":546,"end":1107,"declarations":[{"type":"VariableDeclarator","start":552,"end":1107,"id":{"type":"Identifier","start":552,"end":556,"name":"meta"},"init":{"type":"ArrowFunctionExpression","start":559,"end":1107,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":560,"end":563,"name":"req"},{"type":"Identifier","start":565,"end":568,"name":"res"}],"body":{"type":"BlockStatement","start":573,"end":1107,"body":[{"type":"ExpressionStatement","start":577,"end":638,"expression":{"type":"CallExpression","start":577,"end":638,"callee":{"type":"MemberExpression","start":577,"end":589,"object":{"type":"Identifier","start":577,"end":583,"name":"logger"},"property":{"type":"Identifier","start":584,"end":589,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":590,"end":623,"value":"URL file import handler running","raw":"'URL file import handler running'"},{"type":"Literal","start":625,"end":629,"value":null,"raw":"null"},{"type":"MemberExpression","start":631,"end":637,"object":{"type":"Identifier","start":631,"end":634,"name":"req"},"property":{"type":"Identifier","start":635,"end":637,"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":641,"end":682,"declarations":[{"type":"VariableDeclarator","start":647,"end":682,"id":{"type":"Identifier","start":647,"end":652,"name":"debug"},"init":{"type":"MemberExpression","start":655,"end":682,"object":{"type":"MemberExpression","start":655,"end":676,"object":{"type":"MemberExpression","start":655,"end":668,"object":{"type":"Identifier","start":655,"end":658,"name":"req"},"property":{"type":"Identifier","start":659,"end":668,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":669,"end":676,"name":"options"},"computed":false},"property":{"type":"Identifier","start":677,"end":682,"name":"debug"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":685,"end":887,"test":{"type":"UnaryExpression","start":689,"end":722,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":690,"end":722,"callee":{"type":"Identifier","start":690,"end":701,"name":"validateURL"},"arguments":[{"type":"MemberExpression","start":702,"end":714,"object":{"type":"MemberExpression","start":702,"end":710,"object":{"type":"Identifier","start":702,"end":705,"name":"req"},"property":{"type":"Identifier","start":706,"end":710,"name":"body"},"computed":false},"property":{"type":"Identifier","start":711,"end":714,"name":"url"},"computed":false},{"type":"Identifier","start":716,"end":721,"name":"debug"}]}},"consequent":{"type":"BlockStatement","start":724,"end":887,"body":[{"type":"ExpressionStatement","start":730,"end":816,"expression":{"type":"CallExpression","start":730,"end":816,"callee":{"type":"MemberExpression","start":730,"end":742,"object":{"type":"Identifier","start":730,"end":736,"name":"logger"},"property":{"type":"Identifier","start":737,"end":742,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":743,"end":801,"value":"Invalid request body detected. Exiting url meta handler.","raw":"'Invalid request body detected. Exiting url meta handler.'"},{"type":"Literal","start":803,"end":807,"value":null,"raw":"null"},{"type":"MemberExpression","start":809,"end":815,"object":{"type":"Identifier","start":809,"end":812,"name":"req"},"property":{"type":"Identifier","start":813,"end":815,"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":821,"end":883,"argument":{"type":"CallExpression","start":828,"end":883,"callee":{"type":"MemberExpression","start":828,"end":848,"object":{"type":"CallExpression","start":828,"end":843,"callee":{"type":"MemberExpression","start":828,"end":838,"object":{"type":"Identifier","start":828,"end":831,"name":"res"},"property":{"type":"Identifier","start":832,"end":838,"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":839,"end":842,"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":844,"end":848,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":849,"end":882,"properties":[{"type":"Property","start":851,"end":880,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":851,"end":856,"name":"error"},"value":{"type":"Literal","start":858,"end":880,"value":"Invalid request body","raw":"'Invalid request body'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":891,"end":1105,"expression":{"type":"CallExpression","start":891,"end":1105,"callee":{"type":"MemberExpression","start":891,"end":976,"object":{"type":"CallExpression","start":891,"end":965,"callee":{"type":"MemberExpression","start":891,"end":939,"object":{"type":"CallExpression","start":891,"end":929,"callee":{"type":"MemberExpression","start":891,"end":907,"object":{"type":"Identifier","start":891,"end":896,"name":"utils"},"property":{"type":"Identifier","start":897,"end":907,"name":"getURLMeta"},"computed":false},"arguments":[{"type":"MemberExpression","start":908,"end":920,"object":{"type":"MemberExpression","start":908,"end":916,"object":{"type":"Identifier","start":908,"end":911,"name":"req"},"property":{"type":"Identifier","start":912,"end":916,"name":"body"},"computed":false},"property":{"type":"Identifier","start":917,"end":920,"name":"url"},"computed":false},{"type":"UnaryExpression","start":922,"end":928,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":923,"end":928,"name":"debug"}}]},"property":{"type":"Identifier","start":935,"end":939,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":940,"end":964,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":941,"end":945,"name":"meta"}],"body":{"type":"CallExpression","start":950,"end":964,"callee":{"type":"MemberExpression","start":950,"end":958,"object":{"type":"Identifier","start":950,"end":953,"name":"res"},"property":{"type":"Identifier","start":954,"end":958,"name":"json"},"computed":false},"arguments":[{"type":"Identifier","start":959,"end":963,"name":"meta"}]}}]},"property":{"type":"Identifier","start":971,"end":976,"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":977,"end":1104,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":978,"end":981,"name":"err"}],"body":{"type":"BlockStatement","start":986,"end":1104,"body":[{"type":"ExpressionStatement","start":994,"end":1048,"expression":{"type":"CallExpression","start":994,"end":1048,"callee":{"type":"MemberExpression","start":994,"end":1006,"object":{"type":"Identifier","start":994,"end":1000,"name":"logger"},"property":{"type":"Identifier","start":1001,"end":1006,"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":1007,"end":1010,"name":"err"},{"type":"Literal","start":1012,"end":1039,"value":"controller.url.meta.error","raw":"'controller.url.meta.error'"},{"type":"MemberExpression","start":1041,"end":1047,"object":{"type":"Identifier","start":1041,"end":1044,"name":"req"},"property":{"type":"Identifier","start":1045,"end":1047,"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":1055,"end":1098,"argument":{"type":"CallExpression","start":1062,"end":1098,"callee":{"type":"MemberExpression","start":1062,"end":1082,"object":{"type":"CallExpression","start":1062,"end":1077,"callee":{"type":"MemberExpression","start":1062,"end":1072,"object":{"type":"Identifier","start":1062,"end":1065,"name":"res"},"property":{"type":"Identifier","start":1066,"end":1072,"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1073,"end":1076,"value":500,"raw":"500"}]},"property":{"type":"Identifier","start":1078,"end":1082,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1083,"end":1097,"properties":[{"type":"Property","start":1085,"end":1095,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1085,"end":1090,"name":"error"},"value":{"type":"Identifier","start":1092,"end":1095,"name":"err"},"kind":"init"}]}]}}]}}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1343,"end":2653,"declarations":[{"type":"VariableDeclarator","start":1349,"end":2653,"id":{"type":"Identifier","start":1349,"end":1352,"name":"get"},"init":{"type":"ArrowFunctionExpression","start":1355,"end":2653,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1356,"end":1359,"name":"req"},{"type":"Identifier","start":1361,"end":1364,"name":"res"}],"body":{"type":"BlockStatement","start":1369,"end":2653,"body":[{"type":"ExpressionStatement","start":1373,"end":1434,"expression":{"type":"CallExpression","start":1373,"end":1434,"callee":{"type":"MemberExpression","start":1373,"end":1385,"object":{"type":"Identifier","start":1373,"end":1379,"name":"logger"},"property":{"type":"Identifier","start":1380,"end":1385,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1386,"end":1419,"value":"URL file import handler running","raw":"'URL file import handler running'"},{"type":"Literal","start":1421,"end":1425,"value":null,"raw":"null"},{"type":"MemberExpression","start":1427,"end":1433,"object":{"type":"Identifier","start":1427,"end":1430,"name":"req"},"property":{"type":"Identifier","start":1431,"end":1433,"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":1437,"end":1478,"declarations":[{"type":"VariableDeclarator","start":1443,"end":1478,"id":{"type":"Identifier","start":1443,"end":1448,"name":"debug"},"init":{"type":"MemberExpression","start":1451,"end":1478,"object":{"type":"MemberExpression","start":1451,"end":1472,"object":{"type":"MemberExpression","start":1451,"end":1464,"object":{"type":"Identifier","start":1451,"end":1454,"name":"req"},"property":{"type":"Identifier","start":1455,"end":1464,"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1465,"end":1472,"name":"options"},"computed":false},"property":{"type":"Identifier","start":1473,"end":1478,"name":"debug"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1481,"end":1685,"test":{"type":"UnaryExpression","start":1485,"end":1518,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1486,"end":1518,"callee":{"type":"Identifier","start":1486,"end":1497,"name":"validateURL"},"arguments":[{"type":"MemberExpression","start":1498,"end":1510,"object":{"type":"MemberExpression","start":1498,"end":1506,"object":{"type":"Identifier","start":1498,"end":1501,"name":"req"},"property":{"type":"Identifier","start":1502,"end":1506,"name":"body"},"computed":false},"property":{"type":"Identifier","start":1507,"end":1510,"name":"url"},"computed":false},{"type":"Identifier","start":1512,"end":1517,"name":"debug"}]}},"consequent":{"type":"BlockStatement","start":1520,"end":1685,"body":[{"type":"ExpressionStatement","start":1526,"end":1614,"expression":{"type":"CallExpression","start":1526,"end":1614,"callee":{"type":"MemberExpression","start":1526,"end":1538,"object":{"type":"Identifier","start":1526,"end":1532,"name":"logger"},"property":{"type":"Identifier","start":1533,"end":1538,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1539,"end":1599,"value":"Invalid request body detected. Exiting url import handler.","raw":"'Invalid request body detected. Exiting url import handler.'"},{"type":"Literal","start":1601,"end":1605,"value":null,"raw":"null"},{"type":"MemberExpression","start":1607,"end":1613,"object":{"type":"Identifier","start":1607,"end":1610,"name":"req"},"property":{"type":"Identifier","start":1611,"end":1613,"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":1619,"end":1681,"argument":{"type":"CallExpression","start":1626,"end":1681,"callee":{"type":"MemberExpression","start":1626,"end":1646,"object":{"type":"CallExpression","start":1626,"end":1641,"callee":{"type":"MemberExpression","start":1626,"end":1636,"object":{"type":"Identifier","start":1626,"end":1629,"name":"res"},"property":{"type":"Identifier","start":1630,"end":1636,"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1637,"end":1640,"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":1642,"end":1646,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1647,"end":1680,"properties":[{"type":"Property","start":1649,"end":1678,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1649,"end":1654,"name":"error"},"value":{"type":"Literal","start":1656,"end":1678,"value":"Invalid request body","raw":"'Invalid request body'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":1689,"end":2651,"expression":{"type":"CallExpression","start":1689,"end":2651,"callee":{"type":"MemberExpression","start":1689,"end":2496,"object":{"type":"CallExpression","start":1689,"end":2490,"callee":{"type":"MemberExpression","start":1689,"end":1729,"object":{"type":"CallExpression","start":1689,"end":1719,"callee":{"type":"MemberExpression","start":1689,"end":1705,"object":{"type":"Identifier","start":1689,"end":1694,"name":"utils"},"property":{"type":"Identifier","start":1695,"end":1705,"name":"getURLMeta"},"computed":false},"arguments":[{"type":"MemberExpression","start":1706,"end":1718,"object":{"type":"MemberExpression","start":1706,"end":1714,"object":{"type":"Identifier","start":1706,"end":1709,"name":"req"},"property":{"type":"Identifier","start":1710,"end":1714,"name":"body"},"computed":false},"property":{"type":"Identifier","start":1715,"end":1718,"name":"url"},"computed":false}]},"property":{"type":"Identifier","start":1725,"end":1729,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1730,"end":2489,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"ObjectPattern","start":1731,"end":1739,"properties":[{"type":"Property","start":1733,"end":1737,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1733,"end":1737,"name":"size"},"kind":"init","value":{"type":"Identifier","start":1733,"end":1737,"name":"size"}}]}],"body":{"type":"BlockStatement","start":1744,"end":2489,"body":[{"type":"ExpressionStatement","start":1772,"end":1825,"expression":{"type":"CallExpression","start":1772,"end":1825,"callee":{"type":"MemberExpression","start":1772,"end":1784,"object":{"type":"Identifier","start":1772,"end":1778,"name":"logger"},"property":{"type":"Identifier","start":1779,"end":1784,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":1785,"end":1810,"value":"Instantiating uploader.","raw":"'Instantiating uploader.'"},{"type":"Literal","start":1812,"end":1816,"value":null,"raw":"null"},{"type":"MemberExpression","start":1818,"end":1824,"object":{"type":"Identifier","start":1818,"end":1821,"name":"req"},"property":{"type":"Identifier","start":1822,"end":1824,"name":"id"},"computed":false}]}},{"type":"VariableDeclaration","start":1832,"end":1895,"declarations":[{"type":"VariableDeclarator","start":1838,"end":1895,"id":{"type":"Identifier","start":1838,"end":1846,"name":"uploader"},"init":{"type":"NewExpression","start":1849,"end":1895,"callee":{"type":"Identifier","start":1853,"end":1861,"name":"Uploader"},"arguments":[{"type":"CallExpression","start":1862,"end":1894,"callee":{"type":"MemberExpression","start":1862,"end":1883,"object":{"type":"Identifier","start":1862,"end":1870,"name":"Uploader"},"property":{"type":"Identifier","start":1871,"end":1883,"name":"reqToOptions"},"computed":false},"arguments":[{"type":"Identifier","start":1884,"end":1887,"name":"req"},{"type":"Identifier","start":1889,"end":1893,"name":"size"}]}]}}],"kind":"const"},{"type":"IfStatement","start":1903,"end":2056,"test":{"type":"CallExpression","start":1907,"end":1926,"callee":{"type":"MemberExpression","start":1907,"end":1924,"object":{"type":"Identifier","start":1907,"end":1915,"name":"uploader"},"property":{"type":"Identifier","start":1916,"end":1924,"name":"hasError"},"computed":false},"arguments":[]},"consequent":{"type":"BlockStatement","start":1928,"end":2056,"body":[{"type":"VariableDeclaration","start":1938,"end":1977,"declarations":[{"type":"VariableDeclarator","start":1944,"end":1977,"id":{"type":"Identifier","start":1944,"end":1952,"name":"response"},"init":{"type":"CallExpression","start":1955,"end":1977,"callee":{"type":"MemberExpression","start":1955,"end":1975,"object":{"type":"Identifier","start":1955,"end":1963,"name":"uploader"},"property":{"type":"Identifier","start":1964,"end":1975,"name":"getResponse"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":1986,"end":2033,"expression":{"type":"CallExpression","start":1986,"end":2033,"callee":{"type":"MemberExpression","start":1986,"end":2018,"object":{"type":"CallExpression","start":1986,"end":2013,"callee":{"type":"MemberExpression","start":1986,"end":1996,"object":{"type":"Identifier","start":1986,"end":1989,"name":"res"},"property":{"type":"Identifier","start":1990,"end":1996,"name":"status"},"computed":false},"arguments":[{"type":"MemberExpression","start":1997,"end":2012,"object":{"type":"Identifier","start":1997,"end":2005,"name":"response"},"property":{"type":"Identifier","start":2006,"end":2012,"name":"status"},"computed":false}]},"property":{"type":"Identifier","start":2014,"end":2018,"name":"json"},"computed":false},"arguments":[{"type":"MemberExpression","start":2019,"end":2032,"object":{"type":"Identifier","start":2019,"end":2027,"name":"response"},"property":{"type":"Identifier","start":2028,"end":2032,"name":"body"},"computed":false}]}},{"type":"ReturnStatement","start":2042,"end":2048,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":2064,"end":2157,"expression":{"type":"CallExpression","start":2064,"end":2157,"callee":{"type":"MemberExpression","start":2064,"end":2076,"object":{"type":"Identifier","start":2064,"end":2070,"name":"logger"},"property":{"type":"Identifier","start":2071,"end":2076,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":2077,"end":2142,"value":"Waiting for socket connection before beginning remote download.","raw":"'Waiting for socket connection before beginning remote download.'"},{"type":"Literal","start":2144,"end":2148,"value":null,"raw":"null"},{"type":"MemberExpression","start":2150,"end":2156,"object":{"type":"Identifier","start":2150,"end":2153,"name":"req"},"property":{"type":"Identifier","start":2154,"end":2156,"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2164,"end":2382,"expression":{"type":"CallExpression","start":2164,"end":2382,"callee":{"type":"MemberExpression","start":2164,"end":2186,"object":{"type":"Identifier","start":2164,"end":2172,"name":"uploader"},"property":{"type":"Identifier","start":2173,"end":2186,"name":"onSocketReady"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2187,"end":2381,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2193,"end":2381,"body":[{"type":"ExpressionStatement","start":2203,"end":2286,"expression":{"type":"CallExpression","start":2203,"end":2286,"callee":{"type":"MemberExpression","start":2203,"end":2215,"object":{"type":"Identifier","start":2203,"end":2209,"name":"logger"},"property":{"type":"Identifier","start":2210,"end":2215,"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":2216,"end":2271,"value":"Socket connection received. Starting remote download.","raw":"'Socket connection received. Starting remote download.'"},{"type":"Literal","start":2273,"end":2277,"value":null,"raw":"null"},{"type":"MemberExpression","start":2279,"end":2285,"object":{"type":"Identifier","start":2279,"end":2282,"name":"req"},"property":{"type":"Identifier","start":2283,"end":2285,"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2295,"end":2373,"expression":{"type":"CallExpression","start":2295,"end":2373,"callee":{"type":"Identifier","start":2295,"end":2306,"name":"downloadURL"},"arguments":[{"type":"MemberExpression","start":2307,"end":2319,"object":{"type":"MemberExpression","start":2307,"end":2315,"object":{"type":"Identifier","start":2307,"end":2310,"name":"req"},"property":{"type":"Identifier","start":2311,"end":2315,"name":"body"},"computed":false},"property":{"type":"Identifier","start":2316,"end":2319,"name":"url"},"computed":false},{"type":"CallExpression","start":2321,"end":2356,"callee":{"type":"MemberExpression","start":2321,"end":2346,"object":{"type":"MemberExpression","start":2321,"end":2341,"object":{"type":"Identifier","start":2321,"end":2329,"name":"uploader"},"property":{"type":"Identifier","start":2330,"end":2341,"name":"handleChunk"},"computed":false},"property":{"type":"Identifier","start":2342,"end":2346,"name":"bind"},"computed":false},"arguments":[{"type":"Identifier","start":2347,"end":2355,"name":"uploader"}]},{"type":"UnaryExpression","start":2358,"end":2364,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2359,"end":2364,"name":"debug"}},{"type":"MemberExpression","start":2366,"end":2372,"object":{"type":"Identifier","start":2366,"end":2369,"name":"req"},"property":{"type":"Identifier","start":2370,"end":2372,"name":"id"},"computed":false}]}}]}}]}},{"type":"VariableDeclaration","start":2390,"end":2429,"declarations":[{"type":"VariableDeclarator","start":2396,"end":2429,"id":{"type":"Identifier","start":2396,"end":2404,"name":"response"},"init":{"type":"CallExpression","start":2407,"end":2429,"callee":{"type":"MemberExpression","start":2407,"end":2427,"object":{"type":"Identifier","start":2407,"end":2415,"name":"uploader"},"property":{"type":"Identifier","start":2416,"end":2427,"name":"getResponse"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":2436,"end":2483,"expression":{"type":"CallExpression","start":2436,"end":2483,"callee":{"type":"MemberExpression","start":2436,"end":2468,"object":{"type":"CallExpression","start":2436,"end":2463,"callee":{"type":"MemberExpression","start":2436,"end":2446,"object":{"type":"Identifier","start":2436,"end":2439,"name":"res"},"property":{"type":"Identifier","start":2440,"end":2446,"name":"status"},"computed":false},"arguments":[{"type":"MemberExpression","start":2447,"end":2462,"object":{"type":"Identifier","start":2447,"end":2455,"name":"response"},"property":{"type":"Identifier","start":2456,"end":2462,"name":"status"},"computed":false}]},"property":{"type":"Identifier","start":2464,"end":2468,"name":"json"},"computed":false},"arguments":[{"type":"MemberExpression","start":2469,"end":2482,"object":{"type":"Identifier","start":2469,"end":2477,"name":"response"},"property":{"type":"Identifier","start":2478,"end":2482,"name":"body"},"computed":false}]}}]}}]},"property":{"type":"Identifier","start":2491,"end":2496,"name":"catch"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2497,"end":2650,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2498,"end":2501,"name":"err"}],"body":{"type":"BlockStatement","start":2506,"end":2650,"body":[{"type":"ExpressionStatement","start":2514,"end":2567,"expression":{"type":"CallExpression","start":2514,"end":2567,"callee":{"type":"MemberExpression","start":2514,"end":2526,"object":{"type":"Identifier","start":2514,"end":2520,"name":"logger"},"property":{"type":"Identifier","start":2521,"end":2526,"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":2527,"end":2530,"name":"err"},{"type":"Literal","start":2532,"end":2558,"value":"controller.url.get.error","raw":"'controller.url.get.error'"},{"type":"MemberExpression","start":2560,"end":2566,"object":{"type":"Identifier","start":2560,"end":2563,"name":"req"},"property":{"type":"Identifier","start":2564,"end":2566,"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":2627,"end":2644,"expression":{"type":"CallExpression","start":2627,"end":2644,"callee":{"type":"MemberExpression","start":2627,"end":2635,"object":{"type":"Identifier","start":2627,"end":2630,"name":"res"},"property":{"type":"Identifier","start":2631,"end":2635,"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2636,"end":2643,"properties":[{"type":"Property","start":2638,"end":2641,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2638,"end":2641,"name":"err"},"kind":"init","value":{"type":"Identifier","start":2638,"end":2641,"name":"err"}}]}]}}]}}]}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":2821,"end":3056,"declarations":[{"type":"VariableDeclarator","start":2827,"end":3056,"id":{"type":"Identifier","start":2827,"end":2838,"name":"validateURL"},"init":{"type":"ArrowFunctionExpression","start":2841,"end":3056,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2842,"end":2845,"name":"url"},{"type":"Identifier","start":2847,"end":2852,"name":"debug"}],"body":{"type":"BlockStatement","start":2857,"end":3056,"body":[{"type":"VariableDeclaration","start":2861,"end":2973,"declarations":[{"type":"VariableDeclarator","start":2867,"end":2973,"id":{"type":"Identifier","start":2867,"end":2879,"name":"validURLOpts"},"init":{"type":"ObjectExpression","start":2882,"end":2973,"properties":[{"type":"Property","start":2888,"end":2916,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2888,"end":2897,"name":"protocols"},"value":{"type":"ArrayExpression","start":2899,"end":2916,"elements":[{"type":"Literal","start":2900,"end":2906,"value":"http","raw":"'http'"},{"type":"Literal","start":2908,"end":2915,"value":"https","raw":"'https'"}]},"kind":"init"},{"type":"Property","start":2922,"end":2944,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2922,"end":2938,"name":"require_protocol"},"value":{"type":"Literal","start":2940,"end":2944,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":2950,"end":2969,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2950,"end":2961,"name":"require_tld"},"value":{"type":"UnaryExpression","start":2963,"end":2969,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2964,"end":2969,"name":"debug"}},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":2976,"end":3039,"test":{"type":"UnaryExpression","start":2980,"end":3015,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":2981,"end":3015,"callee":{"type":"MemberExpression","start":2981,"end":2996,"object":{"type":"Identifier","start":2981,"end":2990,"name":"validator"},"property":{"type":"Identifier","start":2991,"end":2996,"name":"isURL"},"computed":false},"arguments":[{"type":"Identifier","start":2997,"end":3000,"name":"url"},{"type":"Identifier","start":3002,"end":3014,"name":"validURLOpts"}]}},"consequent":{"type":"BlockStatement","start":3017,"end":3039,"body":[{"type":"ReturnStatement","start":3023,"end":3035,"argument":{"type":"Literal","start":3030,"end":3035,"value":false,"raw":"false"}}]},"alternate":null},{"type":"ReturnStatement","start":3043,"end":3054,"argument":{"type":"Literal","start":3050,"end":3054,"value":true,"raw":"true"}}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":3403,"end":3842,"declarations":[{"type":"VariableDeclarator","start":3409,"end":3842,"id":{"type":"Identifier","start":3409,"end":3420,"name":"downloadURL"},"init":{"type":"ArrowFunctionExpression","start":3423,"end":3842,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3424,"end":3427,"name":"url"},{"type":"Identifier","start":3429,"end":3440,"name":"onDataChunk"},{"type":"Identifier","start":3442,"end":3455,"name":"blockLocalIPs"},{"type":"Identifier","start":3457,"end":3464,"name":"traceId"}],"body":{"type":"BlockStatement","start":3469,"end":3842,"body":[{"type":"VariableDeclaration","start":3473,"end":3637,"declarations":[{"type":"VariableDeclarator","start":3479,"end":3637,"id":{"type":"Identifier","start":3479,"end":3483,"name":"opts"},"init":{"type":"ObjectExpression","start":3486,"end":3637,"properties":[{"type":"Property","start":3492,"end":3500,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3492,"end":3495,"name":"uri"},"value":{"type":"Identifier","start":3497,"end":3500,"name":"url"},"kind":"init"},{"type":"Property","start":3506,"end":3519,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3506,"end":3512,"name":"method"},"value":{"type":"Literal","start":3514,"end":3519,"value":"GET","raw":"'GET'"},"kind":"init"},{"type":"Property","start":3525,"end":3549,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3525,"end":3543,"name":"followAllRedirects"},"value":{"type":"Literal","start":3545,"end":3549,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":3555,"end":3633,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3555,"end":3565,"name":"agentClass"},"value":{"type":"CallExpression","start":3567,"end":3633,"callee":{"type":"Identifier","start":3567,"end":3588,"name":"getProtectedHttpAgent"},"arguments":[{"type":"MemberExpression","start":3589,"end":3617,"object":{"type":"CallExpression","start":3589,"end":3608,"callee":{"type":"MemberExpression","start":3589,"end":3603,"object":{"type":"Identifier","start":3589,"end":3594,"name":"utils"},"property":{"type":"Identifier","start":3595,"end":3603,"name":"parseURL"},"computed":false},"arguments":[{"type":"Identifier","start":3604,"end":3607,"name":"url"}]},"property":{"type":"Identifier","start":3609,"end":3617,"name":"protocol"},"computed":false},{"type":"Identifier","start":3619,"end":3632,"name":"blockLocalIPs"}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3641,"end":3840,"expression":{"type":"CallExpression","start":3641,"end":3840,"callee":{"type":"MemberExpression","start":3641,"end":3761,"object":{"type":"CallExpression","start":3641,"end":3753,"callee":{"type":"MemberExpression","start":3641,"end":3715,"object":{"type":"CallExpression","start":3641,"end":3707,"callee":{"type":"MemberExpression","start":3641,"end":3662,"object":{"type":"CallExpression","start":3641,"end":3654,"callee":{"type":"Identifier","start":3641,"end":3648,"name":"request"},"arguments":[{"type":"Identifier","start":3649,"end":3653,"name":"opts"}]},"property":{"type":"Identifier","start":3660,"end":3662,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3663,"end":3669,"value":"data","raw":"'data'"},{"type":"ArrowFunctionExpression","start":3671,"end":3706,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3672,"end":3677,"name":"chunk"}],"body":{"type":"CallExpression","start":3682,"end":3706,"callee":{"type":"Identifier","start":3682,"end":3693,"name":"onDataChunk"},"arguments":[{"type":"Literal","start":3694,"end":3698,"value":null,"raw":"null"},{"type":"Identifier","start":3700,"end":3705,"name":"chunk"}]}}]},"property":{"type":"Identifier","start":3713,"end":3715,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3716,"end":3721,"value":"end","raw":"'end'"},{"type":"ArrowFunctionExpression","start":3723,"end":3752,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":3729,"end":3752,"callee":{"type":"Identifier","start":3729,"end":3740,"name":"onDataChunk"},"arguments":[{"type":"Literal","start":3741,"end":3745,"value":null,"raw":"null"},{"type":"Literal","start":3747,"end":3751,"value":null,"raw":"null"}]}}]},"property":{"type":"Identifier","start":3759,"end":3761,"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":3762,"end":3769,"value":"error","raw":"'error'"},{"type":"ArrowFunctionExpression","start":3771,"end":3839,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3772,"end":3775,"name":"err"}],"body":{"type":"CallExpression","start":3780,"end":3839,"callee":{"type":"MemberExpression","start":3780,"end":3792,"object":{"type":"Identifier","start":3780,"end":3786,"name":"logger"},"property":{"type":"Identifier","start":3787,"end":3792,"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":3793,"end":3796,"name":"err"},{"type":"Literal","start":3798,"end":3829,"value":"controller.url.download.error","raw":"'controller.url.download.error'"},{"type":"Identifier","start":3831,"end":3838,"name":"traceId"}]}}]}}]}}}],"kind":"const"}],"sourceType":"script"}