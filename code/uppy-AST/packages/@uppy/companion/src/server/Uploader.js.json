{"type":"Program","start":0,"end":17985,"loc":{"start":{"line":1,"column":0},"end":{"line":613,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":24,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":24}},"declarations":[{"type":"VariableDeclarator","start":6,"end":24,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":24}},"id":{"type":"Identifier","start":6,"end":8,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":8}},"name":"fs"},"init":{"type":"CallExpression","start":11,"end":24,"loc":{"start":{"line":1,"column":11},"end":{"line":1,"column":24}},"callee":{"type":"Identifier","start":11,"end":18,"loc":{"start":{"line":1,"column":11},"end":{"line":1,"column":18}},"name":"require"},"arguments":[{"type":"Literal","start":19,"end":23,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":23}},"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":25,"end":53,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":28}},"declarations":[{"type":"VariableDeclarator","start":31,"end":53,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":28}},"id":{"type":"Identifier","start":31,"end":35,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":10}},"name":"path"},"init":{"type":"CallExpression","start":38,"end":53,"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":28}},"callee":{"type":"Identifier","start":38,"end":45,"loc":{"start":{"line":2,"column":13},"end":{"line":2,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":46,"end":52,"loc":{"start":{"line":2,"column":21},"end":{"line":2,"column":27}},"value":"path","raw":"'path'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":54,"end":90,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":36}},"declarations":[{"type":"VariableDeclarator","start":60,"end":90,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":36}},"id":{"type":"Identifier","start":60,"end":63,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":9}},"name":"tus"},"init":{"type":"CallExpression","start":66,"end":90,"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":36}},"callee":{"type":"Identifier","start":66,"end":73,"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":19}},"name":"require"},"arguments":[{"type":"Literal","start":74,"end":89,"loc":{"start":{"line":3,"column":20},"end":{"line":3,"column":35}},"value":"tus-js-client","raw":"'tus-js-client'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":91,"end":119,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"declarations":[{"type":"VariableDeclarator","start":97,"end":119,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":28}},"id":{"type":"Identifier","start":97,"end":101,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":10}},"name":"uuid"},"init":{"type":"CallExpression","start":104,"end":119,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":28}},"callee":{"type":"Identifier","start":104,"end":111,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":112,"end":118,"loc":{"start":{"line":4,"column":21},"end":{"line":4,"column":27}},"value":"uuid","raw":"'uuid'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":120,"end":156,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":36}},"declarations":[{"type":"VariableDeclarator","start":126,"end":156,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":36}},"id":{"type":"Identifier","start":126,"end":134,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":14}},"name":"isObject"},"init":{"type":"CallExpression","start":137,"end":156,"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":36}},"callee":{"type":"Identifier","start":137,"end":144,"loc":{"start":{"line":5,"column":17},"end":{"line":5,"column":24}},"name":"require"},"arguments":[{"type":"Literal","start":145,"end":155,"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":35}},"value":"isobject","raw":"'isobject'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":157,"end":195,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":38}},"declarations":[{"type":"VariableDeclarator","start":163,"end":195,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":38}},"id":{"type":"Identifier","start":163,"end":172,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":15}},"name":"validator"},"init":{"type":"CallExpression","start":175,"end":195,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":38}},"callee":{"type":"Identifier","start":175,"end":182,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":25}},"name":"require"},"arguments":[{"type":"Literal","start":183,"end":194,"loc":{"start":{"line":6,"column":26},"end":{"line":6,"column":37}},"value":"validator","raw":"'validator'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":196,"end":230,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":34}},"declarations":[{"type":"VariableDeclarator","start":202,"end":230,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":34}},"id":{"type":"Identifier","start":202,"end":209,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":13}},"name":"request"},"init":{"type":"CallExpression","start":212,"end":230,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":34}},"callee":{"type":"Identifier","start":212,"end":219,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":220,"end":229,"loc":{"start":{"line":7,"column":24},"end":{"line":7,"column":33}},"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":231,"end":267,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":36}},"declarations":[{"type":"VariableDeclarator","start":237,"end":267,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":36}},"id":{"type":"Identifier","start":237,"end":244,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":13}},"name":"emitter"},"init":{"type":"CallExpression","start":247,"end":267,"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":36}},"callee":{"type":"Identifier","start":247,"end":254,"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":255,"end":266,"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":35}},"value":"./emitter","raw":"'./emitter'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":268,"end":317,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":49}},"declarations":[{"type":"VariableDeclarator","start":274,"end":317,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":49}},"id":{"type":"Identifier","start":274,"end":288,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":20}},"name":"serializeError"},"init":{"type":"CallExpression","start":291,"end":317,"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":49}},"callee":{"type":"Identifier","start":291,"end":298,"loc":{"start":{"line":9,"column":23},"end":{"line":9,"column":30}},"name":"require"},"arguments":[{"type":"Literal","start":299,"end":316,"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":48}},"value":"serialize-error","raw":"'serialize-error'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":318,"end":380,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":62}},"declarations":[{"type":"VariableDeclarator","start":324,"end":380,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":62}},"id":{"type":"ObjectPattern","start":324,"end":351,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":33}},"properties":[{"type":"Property","start":326,"end":339,"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":326,"end":339,"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"name":"jsonStringify"},"kind":"init","value":{"type":"Identifier","start":326,"end":339,"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":21}},"name":"jsonStringify"}},{"type":"Property","start":341,"end":349,"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":31}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":341,"end":349,"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":31}},"name":"hasMatch"},"kind":"init","value":{"type":"Identifier","start":341,"end":349,"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":31}},"name":"hasMatch"}}]},"init":{"type":"CallExpression","start":354,"end":380,"loc":{"start":{"line":10,"column":36},"end":{"line":10,"column":62}},"callee":{"type":"Identifier","start":354,"end":361,"loc":{"start":{"line":10,"column":36},"end":{"line":10,"column":43}},"name":"require"},"arguments":[{"type":"Literal","start":362,"end":379,"loc":{"start":{"line":10,"column":44},"end":{"line":10,"column":61}},"value":"./helpers/utils","raw":"'./helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":381,"end":415,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":34}},"declarations":[{"type":"VariableDeclarator","start":387,"end":415,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":34}},"id":{"type":"Identifier","start":387,"end":393,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":12}},"name":"logger"},"init":{"type":"CallExpression","start":396,"end":415,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":34}},"callee":{"type":"Identifier","start":396,"end":403,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":404,"end":414,"loc":{"start":{"line":11,"column":23},"end":{"line":11,"column":33}},"value":"./logger","raw":"'./logger'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":416,"end":468,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":52}},"declarations":[{"type":"VariableDeclarator","start":422,"end":468,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":52}},"id":{"type":"Identifier","start":422,"end":436,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":20}},"name":"headerSanitize"},"init":{"type":"CallExpression","start":439,"end":468,"loc":{"start":{"line":12,"column":23},"end":{"line":12,"column":52}},"callee":{"type":"Identifier","start":439,"end":446,"loc":{"start":{"line":12,"column":23},"end":{"line":12,"column":30}},"name":"require"},"arguments":[{"type":"Literal","start":447,"end":467,"loc":{"start":{"line":12,"column":31},"end":{"line":12,"column":51}},"value":"./header-blacklist","raw":"'./header-blacklist'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":469,"end":501,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":32}},"declarations":[{"type":"VariableDeclarator","start":475,"end":501,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":32}},"id":{"type":"Identifier","start":475,"end":480,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":11}},"name":"redis"},"init":{"type":"CallExpression","start":483,"end":501,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":32}},"callee":{"type":"Identifier","start":483,"end":490,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":21}},"name":"require"},"arguments":[{"type":"Literal","start":491,"end":500,"loc":{"start":{"line":13,"column":22},"end":{"line":13,"column":31}},"value":"./redis","raw":"'./redis'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":503,"end":539,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"declarations":[{"type":"VariableDeclarator","start":509,"end":539,"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":36}},"id":{"type":"Identifier","start":509,"end":527,"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":24}},"name":"DEFAULT_FIELD_NAME"},"init":{"type":"Literal","start":530,"end":539,"loc":{"start":{"line":15,"column":27},"end":{"line":15,"column":36}},"value":"files[]","raw":"'files[]'"}}],"kind":"const"},{"type":"VariableDeclaration","start":540,"end":646,"loc":{"start":{"line":16,"column":0},"end":{"line":20,"column":2}},"declarations":[{"type":"VariableDeclarator","start":546,"end":646,"loc":{"start":{"line":16,"column":6},"end":{"line":20,"column":2}},"id":{"type":"Identifier","start":546,"end":555,"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":15}},"name":"PROTOCOLS"},"init":{"type":"CallExpression","start":558,"end":646,"loc":{"start":{"line":16,"column":18},"end":{"line":20,"column":2}},"callee":{"type":"MemberExpression","start":558,"end":571,"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":31}},"object":{"type":"Identifier","start":558,"end":564,"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":24}},"name":"Object"},"property":{"type":"Identifier","start":565,"end":571,"loc":{"start":{"line":16,"column":25},"end":{"line":16,"column":31}},"name":"freeze"},"computed":false},"arguments":[{"type":"ObjectExpression","start":572,"end":645,"loc":{"start":{"line":16,"column":32},"end":{"line":20,"column":1}},"properties":[{"type":"Property","start":576,"end":598,"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":576,"end":585,"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":11}},"name":"multipart"},"value":{"type":"Literal","start":587,"end":598,"loc":{"start":{"line":17,"column":13},"end":{"line":17,"column":24}},"value":"multipart","raw":"'multipart'"},"kind":"init"},{"type":"Property","start":602,"end":629,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":602,"end":613,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":13}},"name":"s3Multipart"},"value":{"type":"Literal","start":615,"end":629,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":29}},"value":"s3-multipart","raw":"'s3-multipart'"},"kind":"init"},{"type":"Property","start":633,"end":643,"loc":{"start":{"line":19,"column":2},"end":{"line":19,"column":12}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":633,"end":636,"loc":{"start":{"line":19,"column":2},"end":{"line":19,"column":5}},"name":"tus"},"value":{"type":"Literal","start":638,"end":643,"loc":{"start":{"line":19,"column":7},"end":{"line":19,"column":12}},"value":"tus","raw":"'tus'"},"kind":"init"}]}]}}],"kind":"const"},{"type":"ClassDeclaration","start":648,"end":17878,"loc":{"start":{"line":22,"column":0},"end":{"line":607,"column":1}},"id":{"type":"Identifier","start":654,"end":662,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":14}},"name":"Uploader"},"superClass":null,"body":{"type":"ClassBody","start":663,"end":17878,"loc":{"start":{"line":22,"column":15},"end":{"line":607,"column":1}},"body":[{"type":"MethodDefinition","start":1439,"end":3216,"loc":{"start":{"line":45,"column":2},"end":{"line":96,"column":3}},"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":1439,"end":1450,"loc":{"start":{"line":45,"column":2},"end":{"line":45,"column":13}},"name":"constructor"},"value":{"type":"FunctionExpression","start":1451,"end":3216,"loc":{"start":{"line":45,"column":14},"end":{"line":96,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1452,"end":1459,"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":22}},"name":"options"}],"body":{"type":"BlockStatement","start":1461,"end":3216,"loc":{"start":{"line":45,"column":24},"end":{"line":96,"column":3}},"body":[{"type":"IfStatement","start":1467,"end":1591,"loc":{"start":{"line":46,"column":4},"end":{"line":49,"column":5}},"test":{"type":"UnaryExpression","start":1471,"end":1501,"loc":{"start":{"line":46,"column":8},"end":{"line":46,"column":38}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1472,"end":1501,"loc":{"start":{"line":46,"column":9},"end":{"line":46,"column":38}},"callee":{"type":"MemberExpression","start":1472,"end":1492,"loc":{"start":{"line":46,"column":9},"end":{"line":46,"column":29}},"object":{"type":"ThisExpression","start":1472,"end":1476,"loc":{"start":{"line":46,"column":9},"end":{"line":46,"column":13}}},"property":{"type":"Identifier","start":1477,"end":1492,"loc":{"start":{"line":46,"column":14},"end":{"line":46,"column":29}},"name":"validateOptions"},"computed":false},"arguments":[{"type":"Identifier","start":1493,"end":1500,"loc":{"start":{"line":46,"column":30},"end":{"line":46,"column":37}},"name":"options"}]}},"consequent":{"type":"BlockStatement","start":1503,"end":1591,"loc":{"start":{"line":46,"column":40},"end":{"line":49,"column":5}},"body":[{"type":"ExpressionStatement","start":1511,"end":1572,"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":67}},"expression":{"type":"CallExpression","start":1511,"end":1572,"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":67}},"callee":{"type":"MemberExpression","start":1511,"end":1523,"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":18}},"object":{"type":"Identifier","start":1511,"end":1517,"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":1518,"end":1523,"loc":{"start":{"line":47,"column":13},"end":{"line":47,"column":18}},"name":"debug"},"computed":false},"arguments":[{"type":"MemberExpression","start":1524,"end":1544,"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":39}},"object":{"type":"ThisExpression","start":1524,"end":1528,"loc":{"start":{"line":47,"column":19},"end":{"line":47,"column":23}}},"property":{"type":"Identifier","start":1529,"end":1544,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":39}},"name":"_errRespMessage"},"computed":false},{"type":"Literal","start":1546,"end":1571,"loc":{"start":{"line":47,"column":41},"end":{"line":47,"column":66}},"value":"uploader.validator.fail","raw":"'uploader.validator.fail'"}]}},{"type":"ReturnStatement","start":1579,"end":1585,"loc":{"start":{"line":48,"column":6},"end":{"line":48,"column":12}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":1597,"end":1619,"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":26}},"expression":{"type":"AssignmentExpression","start":1597,"end":1619,"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":26}},"operator":"=","left":{"type":"MemberExpression","start":1597,"end":1609,"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":16}},"object":{"type":"ThisExpression","start":1597,"end":1601,"loc":{"start":{"line":51,"column":4},"end":{"line":51,"column":8}}},"property":{"type":"Identifier","start":1602,"end":1609,"loc":{"start":{"line":51,"column":9},"end":{"line":51,"column":16}},"name":"options"},"computed":false},"right":{"type":"Identifier","start":1612,"end":1619,"loc":{"start":{"line":51,"column":19},"end":{"line":51,"column":26}},"name":"options"}}},{"type":"ExpressionStatement","start":1624,"end":1646,"loc":{"start":{"line":52,"column":4},"end":{"line":52,"column":26}},"expression":{"type":"AssignmentExpression","start":1624,"end":1646,"loc":{"start":{"line":52,"column":4},"end":{"line":52,"column":26}},"operator":"=","left":{"type":"MemberExpression","start":1624,"end":1634,"loc":{"start":{"line":52,"column":4},"end":{"line":52,"column":14}},"object":{"type":"ThisExpression","start":1624,"end":1628,"loc":{"start":{"line":52,"column":4},"end":{"line":52,"column":8}}},"property":{"type":"Identifier","start":1629,"end":1634,"loc":{"start":{"line":52,"column":9},"end":{"line":52,"column":14}},"name":"token"},"computed":false},"right":{"type":"CallExpression","start":1637,"end":1646,"loc":{"start":{"line":52,"column":17},"end":{"line":52,"column":26}},"callee":{"type":"MemberExpression","start":1637,"end":1644,"loc":{"start":{"line":52,"column":17},"end":{"line":52,"column":24}},"object":{"type":"Identifier","start":1637,"end":1641,"loc":{"start":{"line":52,"column":17},"end":{"line":52,"column":21}},"name":"uuid"},"property":{"type":"Identifier","start":1642,"end":1644,"loc":{"start":{"line":52,"column":22},"end":{"line":52,"column":24}},"name":"v4"},"computed":false},"arguments":[]}}},{"type":"ExpressionStatement","start":1651,"end":1734,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":87}},"expression":{"type":"AssignmentExpression","start":1651,"end":1734,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":87}},"operator":"=","left":{"type":"MemberExpression","start":1651,"end":1660,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":13}},"object":{"type":"ThisExpression","start":1651,"end":1655,"loc":{"start":{"line":53,"column":4},"end":{"line":53,"column":8}}},"property":{"type":"Identifier","start":1656,"end":1660,"loc":{"start":{"line":53,"column":9},"end":{"line":53,"column":13}},"name":"path"},"computed":false},"right":{"type":"TemplateLiteral","start":1663,"end":1734,"loc":{"start":{"line":53,"column":16},"end":{"line":53,"column":87}},"expressions":[{"type":"MemberExpression","start":1666,"end":1689,"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":42}},"object":{"type":"MemberExpression","start":1666,"end":1678,"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":31}},"object":{"type":"ThisExpression","start":1666,"end":1670,"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":23}}},"property":{"type":"Identifier","start":1671,"end":1678,"loc":{"start":{"line":53,"column":24},"end":{"line":53,"column":31}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1679,"end":1689,"loc":{"start":{"line":53,"column":32},"end":{"line":53,"column":42}},"name":"pathPrefix"},"computed":false},{"type":"MemberExpression","start":1693,"end":1718,"loc":{"start":{"line":53,"column":46},"end":{"line":53,"column":71}},"object":{"type":"Identifier","start":1693,"end":1701,"loc":{"start":{"line":53,"column":46},"end":{"line":53,"column":54}},"name":"Uploader"},"property":{"type":"Identifier","start":1702,"end":1718,"loc":{"start":{"line":53,"column":55},"end":{"line":53,"column":71}},"name":"FILE_NAME_PREFIX"},"computed":false},{"type":"MemberExpression","start":1722,"end":1732,"loc":{"start":{"line":53,"column":75},"end":{"line":53,"column":85}},"object":{"type":"ThisExpression","start":1722,"end":1726,"loc":{"start":{"line":53,"column":75},"end":{"line":53,"column":79}}},"property":{"type":"Identifier","start":1727,"end":1732,"loc":{"start":{"line":53,"column":80},"end":{"line":53,"column":85}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":1664,"end":1664,"loc":{"start":{"line":53,"column":17},"end":{"line":53,"column":17}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":1690,"end":1691,"loc":{"start":{"line":53,"column":43},"end":{"line":53,"column":44}},"value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","start":1719,"end":1720,"loc":{"start":{"line":53,"column":72},"end":{"line":53,"column":73}},"value":{"raw":"-","cooked":"-"},"tail":false},{"type":"TemplateElement","start":1733,"end":1733,"loc":{"start":{"line":53,"column":86},"end":{"line":53,"column":86}},"value":{"raw":"","cooked":""},"tail":true}]}}},{"type":"ExpressionStatement","start":1739,"end":1790,"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":55}},"expression":{"type":"AssignmentExpression","start":1739,"end":1790,"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":55}},"operator":"=","left":{"type":"MemberExpression","start":1739,"end":1760,"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":25}},"object":{"type":"MemberExpression","start":1739,"end":1751,"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":16}},"object":{"type":"ThisExpression","start":1739,"end":1743,"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":8}}},"property":{"type":"Identifier","start":1744,"end":1751,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":16}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1752,"end":1760,"loc":{"start":{"line":54,"column":17},"end":{"line":54,"column":25}},"name":"metadata"},"computed":false},"right":{"type":"LogicalExpression","start":1763,"end":1790,"loc":{"start":{"line":54,"column":28},"end":{"line":54,"column":55}},"left":{"type":"MemberExpression","start":1763,"end":1784,"loc":{"start":{"line":54,"column":28},"end":{"line":54,"column":49}},"object":{"type":"MemberExpression","start":1763,"end":1775,"loc":{"start":{"line":54,"column":28},"end":{"line":54,"column":40}},"object":{"type":"ThisExpression","start":1763,"end":1767,"loc":{"start":{"line":54,"column":28},"end":{"line":54,"column":32}}},"property":{"type":"Identifier","start":1768,"end":1775,"loc":{"start":{"line":54,"column":33},"end":{"line":54,"column":40}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1776,"end":1784,"loc":{"start":{"line":54,"column":41},"end":{"line":54,"column":49}},"name":"metadata"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":1788,"end":1790,"loc":{"start":{"line":54,"column":53},"end":{"line":54,"column":55}},"properties":[]}}}},{"type":"ExpressionStatement","start":1795,"end":1864,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":73}},"expression":{"type":"AssignmentExpression","start":1795,"end":1864,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":73}},"operator":"=","left":{"type":"MemberExpression","start":1795,"end":1817,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":26}},"object":{"type":"MemberExpression","start":1795,"end":1807,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":16}},"object":{"type":"ThisExpression","start":1795,"end":1799,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":8}}},"property":{"type":"Identifier","start":1800,"end":1807,"loc":{"start":{"line":55,"column":9},"end":{"line":55,"column":16}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1808,"end":1817,"loc":{"start":{"line":55,"column":17},"end":{"line":55,"column":26}},"name":"fieldname"},"computed":false},"right":{"type":"LogicalExpression","start":1820,"end":1864,"loc":{"start":{"line":55,"column":29},"end":{"line":55,"column":73}},"left":{"type":"MemberExpression","start":1820,"end":1842,"loc":{"start":{"line":55,"column":29},"end":{"line":55,"column":51}},"object":{"type":"MemberExpression","start":1820,"end":1832,"loc":{"start":{"line":55,"column":29},"end":{"line":55,"column":41}},"object":{"type":"ThisExpression","start":1820,"end":1824,"loc":{"start":{"line":55,"column":29},"end":{"line":55,"column":33}}},"property":{"type":"Identifier","start":1825,"end":1832,"loc":{"start":{"line":55,"column":34},"end":{"line":55,"column":41}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1833,"end":1842,"loc":{"start":{"line":55,"column":42},"end":{"line":55,"column":51}},"name":"fieldname"},"computed":false},"operator":"||","right":{"type":"Identifier","start":1846,"end":1864,"loc":{"start":{"line":55,"column":55},"end":{"line":55,"column":73}},"name":"DEFAULT_FIELD_NAME"}}}},{"type":"ExpressionStatement","start":1869,"end":1945,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":80}},"expression":{"type":"AssignmentExpression","start":1869,"end":1945,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":80}},"operator":"=","left":{"type":"MemberExpression","start":1869,"end":1888,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":23}},"object":{"type":"ThisExpression","start":1869,"end":1873,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":8}}},"property":{"type":"Identifier","start":1874,"end":1888,"loc":{"start":{"line":56,"column":9},"end":{"line":56,"column":23}},"name":"uploadFileName"},"computed":false},"right":{"type":"LogicalExpression","start":1891,"end":1945,"loc":{"start":{"line":56,"column":26},"end":{"line":56,"column":80}},"left":{"type":"MemberExpression","start":1891,"end":1917,"loc":{"start":{"line":56,"column":26},"end":{"line":56,"column":52}},"object":{"type":"MemberExpression","start":1891,"end":1912,"loc":{"start":{"line":56,"column":26},"end":{"line":56,"column":47}},"object":{"type":"MemberExpression","start":1891,"end":1903,"loc":{"start":{"line":56,"column":26},"end":{"line":56,"column":38}},"object":{"type":"ThisExpression","start":1891,"end":1895,"loc":{"start":{"line":56,"column":26},"end":{"line":56,"column":30}}},"property":{"type":"Identifier","start":1896,"end":1903,"loc":{"start":{"line":56,"column":31},"end":{"line":56,"column":38}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1904,"end":1912,"loc":{"start":{"line":56,"column":39},"end":{"line":56,"column":47}},"name":"metadata"},"computed":false},"property":{"type":"Identifier","start":1913,"end":1917,"loc":{"start":{"line":56,"column":48},"end":{"line":56,"column":52}},"name":"name"},"computed":false},"operator":"||","right":{"type":"CallExpression","start":1921,"end":1945,"loc":{"start":{"line":56,"column":56},"end":{"line":56,"column":80}},"callee":{"type":"MemberExpression","start":1921,"end":1934,"loc":{"start":{"line":56,"column":56},"end":{"line":56,"column":69}},"object":{"type":"Identifier","start":1921,"end":1925,"loc":{"start":{"line":56,"column":56},"end":{"line":56,"column":60}},"name":"path"},"property":{"type":"Identifier","start":1926,"end":1934,"loc":{"start":{"line":56,"column":61},"end":{"line":56,"column":69}},"name":"basename"},"computed":false},"arguments":[{"type":"MemberExpression","start":1935,"end":1944,"loc":{"start":{"line":56,"column":70},"end":{"line":56,"column":79}},"object":{"type":"ThisExpression","start":1935,"end":1939,"loc":{"start":{"line":56,"column":70},"end":{"line":56,"column":74}}},"property":{"type":"Identifier","start":1940,"end":1944,"loc":{"start":{"line":56,"column":75},"end":{"line":56,"column":79}},"name":"path"},"computed":false}]}}}},{"type":"ExpressionStatement","start":1950,"end":1975,"loc":{"start":{"line":57,"column":4},"end":{"line":57,"column":29}},"expression":{"type":"AssignmentExpression","start":1950,"end":1975,"loc":{"start":{"line":57,"column":4},"end":{"line":57,"column":29}},"operator":"=","left":{"type":"MemberExpression","start":1950,"end":1967,"loc":{"start":{"line":57,"column":4},"end":{"line":57,"column":21}},"object":{"type":"ThisExpression","start":1950,"end":1954,"loc":{"start":{"line":57,"column":4},"end":{"line":57,"column":8}}},"property":{"type":"Identifier","start":1955,"end":1967,"loc":{"start":{"line":57,"column":9},"end":{"line":57,"column":21}},"name":"streamsEnded"},"computed":false},"right":{"type":"Literal","start":1970,"end":1975,"loc":{"start":{"line":57,"column":24},"end":{"line":57,"column":29}},"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":1980,"end":2006,"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":30}},"expression":{"type":"AssignmentExpression","start":1980,"end":2006,"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":30}},"operator":"=","left":{"type":"MemberExpression","start":1980,"end":1998,"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":22}},"object":{"type":"ThisExpression","start":1980,"end":1984,"loc":{"start":{"line":58,"column":4},"end":{"line":58,"column":8}}},"property":{"type":"Identifier","start":1985,"end":1998,"loc":{"start":{"line":58,"column":9},"end":{"line":58,"column":22}},"name":"uploadStopped"},"computed":false},"right":{"type":"Literal","start":2001,"end":2006,"loc":{"start":{"line":58,"column":25},"end":{"line":58,"column":30}},"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":2011,"end":2035,"loc":{"start":{"line":59,"column":4},"end":{"line":59,"column":28}},"expression":{"type":"AssignmentExpression","start":2011,"end":2035,"loc":{"start":{"line":59,"column":4},"end":{"line":59,"column":28}},"operator":"=","left":{"type":"MemberExpression","start":2011,"end":2028,"loc":{"start":{"line":59,"column":4},"end":{"line":59,"column":21}},"object":{"type":"ThisExpression","start":2011,"end":2015,"loc":{"start":{"line":59,"column":4},"end":{"line":59,"column":8}}},"property":{"type":"Identifier","start":2016,"end":2028,"loc":{"start":{"line":59,"column":9},"end":{"line":59,"column":21}},"name":"duplexStream"},"computed":false},"right":{"type":"Literal","start":2031,"end":2035,"loc":{"start":{"line":59,"column":24},"end":{"line":59,"column":28}},"value":null,"raw":"null"}}},{"type":"ExpressionStatement","start":2320,"end":2503,"loc":{"start":{"line":65,"column":4},"end":{"line":66,"column":92}},"expression":{"type":"AssignmentExpression","start":2320,"end":2503,"loc":{"start":{"line":65,"column":4},"end":{"line":66,"column":92}},"operator":"=","left":{"type":"MemberExpression","start":2320,"end":2336,"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":20}},"object":{"type":"ThisExpression","start":2320,"end":2324,"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":8}}},"property":{"type":"Identifier","start":2325,"end":2336,"loc":{"start":{"line":65,"column":9},"end":{"line":65,"column":20}},"name":"writeStream"},"computed":false},"right":{"type":"CallExpression","start":2339,"end":2503,"loc":{"start":{"line":65,"column":23},"end":{"line":66,"column":92}},"callee":{"type":"MemberExpression","start":2339,"end":2420,"loc":{"start":{"line":65,"column":23},"end":{"line":66,"column":9}},"object":{"type":"CallExpression","start":2339,"end":2387,"loc":{"start":{"line":65,"column":23},"end":{"line":65,"column":71}},"callee":{"type":"MemberExpression","start":2339,"end":2359,"loc":{"start":{"line":65,"column":23},"end":{"line":65,"column":43}},"object":{"type":"Identifier","start":2339,"end":2341,"loc":{"start":{"line":65,"column":23},"end":{"line":65,"column":25}},"name":"fs"},"property":{"type":"Identifier","start":2342,"end":2359,"loc":{"start":{"line":65,"column":26},"end":{"line":65,"column":43}},"name":"createWriteStream"},"computed":false},"arguments":[{"type":"MemberExpression","start":2360,"end":2369,"loc":{"start":{"line":65,"column":44},"end":{"line":65,"column":53}},"object":{"type":"ThisExpression","start":2360,"end":2364,"loc":{"start":{"line":65,"column":44},"end":{"line":65,"column":48}}},"property":{"type":"Identifier","start":2365,"end":2369,"loc":{"start":{"line":65,"column":49},"end":{"line":65,"column":53}},"name":"path"},"computed":false},{"type":"ObjectExpression","start":2371,"end":2386,"loc":{"start":{"line":65,"column":55},"end":{"line":65,"column":70}},"properties":[{"type":"Property","start":2373,"end":2384,"loc":{"start":{"line":65,"column":57},"end":{"line":65,"column":68}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2373,"end":2377,"loc":{"start":{"line":65,"column":57},"end":{"line":65,"column":61}},"name":"mode"},"value":{"type":"Literal","start":2379,"end":2384,"loc":{"start":{"line":65,"column":63},"end":{"line":65,"column":68}},"value":438,"raw":"0o666"},"kind":"init","comments":[{"type":"Line","value":" no executable files","start":2388,"end":2410,"loc":{"start":{"line":65,"column":72},"end":{"line":65,"column":94}}}]}]}]},"property":{"type":"Identifier","start":2418,"end":2420,"loc":{"start":{"line":66,"column":7},"end":{"line":66,"column":9}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":2421,"end":2428,"loc":{"start":{"line":66,"column":10},"end":{"line":66,"column":17}},"value":"error","raw":"'error'"},{"type":"ArrowFunctionExpression","start":2430,"end":2502,"loc":{"start":{"line":66,"column":19},"end":{"line":66,"column":91}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":2431,"end":2434,"loc":{"start":{"line":66,"column":20},"end":{"line":66,"column":23}},"name":"err"}],"body":{"type":"CallExpression","start":2439,"end":2502,"loc":{"start":{"line":66,"column":28},"end":{"line":66,"column":91}},"callee":{"type":"MemberExpression","start":2439,"end":2451,"loc":{"start":{"line":66,"column":28},"end":{"line":66,"column":40}},"object":{"type":"Identifier","start":2439,"end":2445,"loc":{"start":{"line":66,"column":28},"end":{"line":66,"column":34}},"name":"logger"},"property":{"type":"Identifier","start":2446,"end":2451,"loc":{"start":{"line":66,"column":35},"end":{"line":66,"column":40}},"name":"error"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":2452,"end":2460,"loc":{"start":{"line":66,"column":41},"end":{"line":66,"column":49}},"expressions":[{"type":"Identifier","start":2455,"end":2458,"loc":{"start":{"line":66,"column":44},"end":{"line":66,"column":47}},"name":"err"}],"quasis":[{"type":"TemplateElement","start":2453,"end":2453,"loc":{"start":{"line":66,"column":42},"end":{"line":66,"column":42}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2459,"end":2459,"loc":{"start":{"line":66,"column":48},"end":{"line":66,"column":48}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":2462,"end":2484,"loc":{"start":{"line":66,"column":51},"end":{"line":66,"column":73}},"value":"uploader.write.error","raw":"'uploader.write.error'"},{"type":"MemberExpression","start":2486,"end":2501,"loc":{"start":{"line":66,"column":75},"end":{"line":66,"column":90}},"object":{"type":"ThisExpression","start":2486,"end":2490,"loc":{"start":{"line":66,"column":75},"end":{"line":66,"column":79}}},"property":{"type":"Identifier","start":2491,"end":2501,"loc":{"start":{"line":66,"column":80},"end":{"line":66,"column":90}},"name":"shortToken"},"computed":false}]}}]}},"comments":[{"type":"Line","value":" @TODO disabling parallel uploads and downloads for now","start":2040,"end":2097,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":61}}},{"type":"Line","value":" if (this.options.protocol === PROTOCOLS.tus) {","start":2102,"end":2151,"loc":{"start":{"line":61,"column":4},"end":{"line":61,"column":53}}},{"type":"Line","value":"   this.duplexStream = new stream.PassThrough()","start":2156,"end":2205,"loc":{"start":{"line":62,"column":4},"end":{"line":62,"column":53}}},{"type":"Line","value":"     .on('error', (err) => logger.error(`${this.shortToken} ${err}`, 'uploader.duplex.error'))","start":2210,"end":2306,"loc":{"start":{"line":63,"column":4},"end":{"line":63,"column":100}}},{"type":"Line","value":" }","start":2311,"end":2315,"loc":{"start":{"line":64,"column":4},"end":{"line":64,"column":8}}}]},{"type":"ExpressionStatement","start":2534,"end":2558,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":28}},"expression":{"type":"AssignmentExpression","start":2534,"end":2558,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":28}},"operator":"=","left":{"type":"MemberExpression","start":2534,"end":2554,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":24}},"object":{"type":"ThisExpression","start":2534,"end":2538,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":8}}},"property":{"type":"Identifier","start":2539,"end":2554,"loc":{"start":{"line":68,"column":9},"end":{"line":68,"column":24}},"name":"emittedProgress"},"computed":false},"right":{"type":"Literal","start":2557,"end":2558,"loc":{"start":{"line":68,"column":27},"end":{"line":68,"column":28}},"value":0,"raw":"0"}},"comments":[{"type":"Block","value":"* @type {number} ","start":2508,"end":2529,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":25}}}]},{"type":"ExpressionStatement","start":2563,"end":2593,"loc":{"start":{"line":69,"column":4},"end":{"line":69,"column":34}},"expression":{"type":"AssignmentExpression","start":2563,"end":2593,"loc":{"start":{"line":69,"column":4},"end":{"line":69,"column":34}},"operator":"=","left":{"type":"MemberExpression","start":2563,"end":2575,"loc":{"start":{"line":69,"column":4},"end":{"line":69,"column":16}},"object":{"type":"ThisExpression","start":2563,"end":2567,"loc":{"start":{"line":69,"column":4},"end":{"line":69,"column":8}}},"property":{"type":"Identifier","start":2568,"end":2575,"loc":{"start":{"line":69,"column":9},"end":{"line":69,"column":16}},"name":"storage"},"computed":false},"right":{"type":"MemberExpression","start":2578,"end":2593,"loc":{"start":{"line":69,"column":19},"end":{"line":69,"column":34}},"object":{"type":"Identifier","start":2578,"end":2585,"loc":{"start":{"line":69,"column":19},"end":{"line":69,"column":26}},"name":"options"},"property":{"type":"Identifier","start":2586,"end":2593,"loc":{"start":{"line":69,"column":27},"end":{"line":69,"column":34}},"name":"storage"},"computed":false}}},{"type":"ExpressionStatement","start":2598,"end":2618,"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":24}},"expression":{"type":"AssignmentExpression","start":2598,"end":2618,"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":24}},"operator":"=","left":{"type":"MemberExpression","start":2598,"end":2610,"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":16}},"object":{"type":"ThisExpression","start":2598,"end":2602,"loc":{"start":{"line":70,"column":4},"end":{"line":70,"column":8}}},"property":{"type":"Identifier","start":2603,"end":2610,"loc":{"start":{"line":70,"column":9},"end":{"line":70,"column":16}},"name":"_paused"},"computed":false},"right":{"type":"Literal","start":2613,"end":2618,"loc":{"start":{"line":70,"column":19},"end":{"line":70,"column":24}},"value":false,"raw":"false"}}},{"type":"IfStatement","start":2624,"end":3212,"loc":{"start":{"line":72,"column":4},"end":{"line":95,"column":5}},"test":{"type":"BinaryExpression","start":2628,"end":2667,"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":47}},"left":{"type":"MemberExpression","start":2628,"end":2649,"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":29}},"object":{"type":"MemberExpression","start":2628,"end":2640,"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":20}},"object":{"type":"ThisExpression","start":2628,"end":2632,"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":12}}},"property":{"type":"Identifier","start":2633,"end":2640,"loc":{"start":{"line":72,"column":13},"end":{"line":72,"column":20}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":2641,"end":2649,"loc":{"start":{"line":72,"column":21},"end":{"line":72,"column":29}},"name":"protocol"},"computed":false},"operator":"===","right":{"type":"MemberExpression","start":2654,"end":2667,"loc":{"start":{"line":72,"column":34},"end":{"line":72,"column":47}},"object":{"type":"Identifier","start":2654,"end":2663,"loc":{"start":{"line":72,"column":34},"end":{"line":72,"column":43}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":2664,"end":2667,"loc":{"start":{"line":72,"column":44},"end":{"line":72,"column":47}},"name":"tus"},"computed":false}},"consequent":{"type":"BlockStatement","start":2669,"end":3212,"loc":{"start":{"line":72,"column":49},"end":{"line":95,"column":5}},"body":[{"type":"ExpressionStatement","start":2677,"end":2818,"loc":{"start":{"line":73,"column":6},"end":{"line":78,"column":8}},"expression":{"type":"CallExpression","start":2677,"end":2818,"loc":{"start":{"line":73,"column":6},"end":{"line":78,"column":8}},"callee":{"type":"MemberExpression","start":2677,"end":2689,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":18}},"object":{"type":"CallExpression","start":2677,"end":2686,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":15}},"callee":{"type":"Identifier","start":2677,"end":2684,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":13}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":2687,"end":2689,"loc":{"start":{"line":73,"column":16},"end":{"line":73,"column":18}},"name":"on"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":2690,"end":2711,"loc":{"start":{"line":73,"column":19},"end":{"line":73,"column":40}},"expressions":[{"type":"MemberExpression","start":2699,"end":2709,"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":38}},"object":{"type":"ThisExpression","start":2699,"end":2703,"loc":{"start":{"line":73,"column":28},"end":{"line":73,"column":32}}},"property":{"type":"Identifier","start":2704,"end":2709,"loc":{"start":{"line":73,"column":33},"end":{"line":73,"column":38}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":2691,"end":2697,"loc":{"start":{"line":73,"column":20},"end":{"line":73,"column":26}},"value":{"raw":"pause:","cooked":"pause:"},"tail":false},{"type":"TemplateElement","start":2710,"end":2710,"loc":{"start":{"line":73,"column":39},"end":{"line":73,"column":39}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"ArrowFunctionExpression","start":2713,"end":2817,"loc":{"start":{"line":73,"column":42},"end":{"line":78,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2719,"end":2817,"loc":{"start":{"line":73,"column":48},"end":{"line":78,"column":7}},"body":[{"type":"ExpressionStatement","start":2729,"end":2748,"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":27}},"expression":{"type":"AssignmentExpression","start":2729,"end":2748,"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":27}},"operator":"=","left":{"type":"MemberExpression","start":2729,"end":2741,"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":20}},"object":{"type":"ThisExpression","start":2729,"end":2733,"loc":{"start":{"line":74,"column":8},"end":{"line":74,"column":12}}},"property":{"type":"Identifier","start":2734,"end":2741,"loc":{"start":{"line":74,"column":13},"end":{"line":74,"column":20}},"name":"_paused"},"computed":false},"right":{"type":"Literal","start":2744,"end":2748,"loc":{"start":{"line":74,"column":23},"end":{"line":74,"column":27}},"value":true,"raw":"true"}}},{"type":"IfStatement","start":2757,"end":2809,"loc":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"test":{"type":"MemberExpression","start":2761,"end":2769,"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":20}},"object":{"type":"ThisExpression","start":2761,"end":2765,"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":16}}},"property":{"type":"Identifier","start":2766,"end":2769,"loc":{"start":{"line":75,"column":17},"end":{"line":75,"column":20}},"name":"tus"},"computed":false},"consequent":{"type":"BlockStatement","start":2771,"end":2809,"loc":{"start":{"line":75,"column":22},"end":{"line":77,"column":9}},"body":[{"type":"ExpressionStatement","start":2783,"end":2799,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":26}},"expression":{"type":"CallExpression","start":2783,"end":2799,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":26}},"callee":{"type":"MemberExpression","start":2783,"end":2797,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":24}},"object":{"type":"MemberExpression","start":2783,"end":2791,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":18}},"object":{"type":"ThisExpression","start":2783,"end":2787,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":14}}},"property":{"type":"Identifier","start":2788,"end":2791,"loc":{"start":{"line":76,"column":15},"end":{"line":76,"column":18}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":2792,"end":2797,"loc":{"start":{"line":76,"column":19},"end":{"line":76,"column":24}},"name":"abort"},"computed":false},"arguments":[]}}]},"alternate":null}]}}]}},{"type":"ExpressionStatement","start":2826,"end":2969,"loc":{"start":{"line":80,"column":6},"end":{"line":85,"column":8}},"expression":{"type":"CallExpression","start":2826,"end":2969,"loc":{"start":{"line":80,"column":6},"end":{"line":85,"column":8}},"callee":{"type":"MemberExpression","start":2826,"end":2838,"loc":{"start":{"line":80,"column":6},"end":{"line":80,"column":18}},"object":{"type":"CallExpression","start":2826,"end":2835,"loc":{"start":{"line":80,"column":6},"end":{"line":80,"column":15}},"callee":{"type":"Identifier","start":2826,"end":2833,"loc":{"start":{"line":80,"column":6},"end":{"line":80,"column":13}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":2836,"end":2838,"loc":{"start":{"line":80,"column":16},"end":{"line":80,"column":18}},"name":"on"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":2839,"end":2861,"loc":{"start":{"line":80,"column":19},"end":{"line":80,"column":41}},"expressions":[{"type":"MemberExpression","start":2849,"end":2859,"loc":{"start":{"line":80,"column":29},"end":{"line":80,"column":39}},"object":{"type":"ThisExpression","start":2849,"end":2853,"loc":{"start":{"line":80,"column":29},"end":{"line":80,"column":33}}},"property":{"type":"Identifier","start":2854,"end":2859,"loc":{"start":{"line":80,"column":34},"end":{"line":80,"column":39}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":2840,"end":2847,"loc":{"start":{"line":80,"column":20},"end":{"line":80,"column":27}},"value":{"raw":"resume:","cooked":"resume:"},"tail":false},{"type":"TemplateElement","start":2860,"end":2860,"loc":{"start":{"line":80,"column":40},"end":{"line":80,"column":40}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"ArrowFunctionExpression","start":2863,"end":2968,"loc":{"start":{"line":80,"column":43},"end":{"line":85,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2869,"end":2968,"loc":{"start":{"line":80,"column":49},"end":{"line":85,"column":7}},"body":[{"type":"ExpressionStatement","start":2879,"end":2899,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":28}},"expression":{"type":"AssignmentExpression","start":2879,"end":2899,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":28}},"operator":"=","left":{"type":"MemberExpression","start":2879,"end":2891,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":20}},"object":{"type":"ThisExpression","start":2879,"end":2883,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":12}}},"property":{"type":"Identifier","start":2884,"end":2891,"loc":{"start":{"line":81,"column":13},"end":{"line":81,"column":20}},"name":"_paused"},"computed":false},"right":{"type":"Literal","start":2894,"end":2899,"loc":{"start":{"line":81,"column":23},"end":{"line":81,"column":28}},"value":false,"raw":"false"}}},{"type":"IfStatement","start":2908,"end":2960,"loc":{"start":{"line":82,"column":8},"end":{"line":84,"column":9}},"test":{"type":"MemberExpression","start":2912,"end":2920,"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":20}},"object":{"type":"ThisExpression","start":2912,"end":2916,"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":16}}},"property":{"type":"Identifier","start":2917,"end":2920,"loc":{"start":{"line":82,"column":17},"end":{"line":82,"column":20}},"name":"tus"},"computed":false},"consequent":{"type":"BlockStatement","start":2922,"end":2960,"loc":{"start":{"line":82,"column":22},"end":{"line":84,"column":9}},"body":[{"type":"ExpressionStatement","start":2934,"end":2950,"loc":{"start":{"line":83,"column":10},"end":{"line":83,"column":26}},"expression":{"type":"CallExpression","start":2934,"end":2950,"loc":{"start":{"line":83,"column":10},"end":{"line":83,"column":26}},"callee":{"type":"MemberExpression","start":2934,"end":2948,"loc":{"start":{"line":83,"column":10},"end":{"line":83,"column":24}},"object":{"type":"MemberExpression","start":2934,"end":2942,"loc":{"start":{"line":83,"column":10},"end":{"line":83,"column":18}},"object":{"type":"ThisExpression","start":2934,"end":2938,"loc":{"start":{"line":83,"column":10},"end":{"line":83,"column":14}}},"property":{"type":"Identifier","start":2939,"end":2942,"loc":{"start":{"line":83,"column":15},"end":{"line":83,"column":18}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":2943,"end":2948,"loc":{"start":{"line":83,"column":19},"end":{"line":83,"column":24}},"name":"start"},"computed":false},"arguments":[]}}]},"alternate":null}]}}]}},{"type":"ExpressionStatement","start":2977,"end":3206,"loc":{"start":{"line":87,"column":6},"end":{"line":94,"column":8}},"expression":{"type":"CallExpression","start":2977,"end":3206,"loc":{"start":{"line":87,"column":6},"end":{"line":94,"column":8}},"callee":{"type":"MemberExpression","start":2977,"end":2989,"loc":{"start":{"line":87,"column":6},"end":{"line":87,"column":18}},"object":{"type":"CallExpression","start":2977,"end":2986,"loc":{"start":{"line":87,"column":6},"end":{"line":87,"column":15}},"callee":{"type":"Identifier","start":2977,"end":2984,"loc":{"start":{"line":87,"column":6},"end":{"line":87,"column":13}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":2987,"end":2989,"loc":{"start":{"line":87,"column":16},"end":{"line":87,"column":18}},"name":"on"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":2990,"end":3012,"loc":{"start":{"line":87,"column":19},"end":{"line":87,"column":41}},"expressions":[{"type":"MemberExpression","start":3000,"end":3010,"loc":{"start":{"line":87,"column":29},"end":{"line":87,"column":39}},"object":{"type":"ThisExpression","start":3000,"end":3004,"loc":{"start":{"line":87,"column":29},"end":{"line":87,"column":33}}},"property":{"type":"Identifier","start":3005,"end":3010,"loc":{"start":{"line":87,"column":34},"end":{"line":87,"column":39}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":2991,"end":2998,"loc":{"start":{"line":87,"column":20},"end":{"line":87,"column":27}},"value":{"raw":"cancel:","cooked":"cancel:"},"tail":false},{"type":"TemplateElement","start":3011,"end":3011,"loc":{"start":{"line":87,"column":40},"end":{"line":87,"column":40}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"ArrowFunctionExpression","start":3014,"end":3205,"loc":{"start":{"line":87,"column":43},"end":{"line":94,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3020,"end":3205,"loc":{"start":{"line":87,"column":49},"end":{"line":94,"column":7}},"body":[{"type":"ExpressionStatement","start":3030,"end":3049,"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":27}},"expression":{"type":"AssignmentExpression","start":3030,"end":3049,"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":27}},"operator":"=","left":{"type":"MemberExpression","start":3030,"end":3042,"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":20}},"object":{"type":"ThisExpression","start":3030,"end":3034,"loc":{"start":{"line":88,"column":8},"end":{"line":88,"column":12}}},"property":{"type":"Identifier","start":3035,"end":3042,"loc":{"start":{"line":88,"column":13},"end":{"line":88,"column":20}},"name":"_paused"},"computed":false},"right":{"type":"Literal","start":3045,"end":3049,"loc":{"start":{"line":88,"column":23},"end":{"line":88,"column":27}},"value":true,"raw":"true"}}},{"type":"IfStatement","start":3058,"end":3174,"loc":{"start":{"line":89,"column":8},"end":{"line":92,"column":9}},"test":{"type":"MemberExpression","start":3062,"end":3070,"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":20}},"object":{"type":"ThisExpression","start":3062,"end":3066,"loc":{"start":{"line":89,"column":12},"end":{"line":89,"column":16}}},"property":{"type":"Identifier","start":3067,"end":3070,"loc":{"start":{"line":89,"column":17},"end":{"line":89,"column":20}},"name":"tus"},"computed":false},"consequent":{"type":"BlockStatement","start":3072,"end":3174,"loc":{"start":{"line":89,"column":22},"end":{"line":92,"column":9}},"body":[{"type":"VariableDeclaration","start":3084,"end":3122,"loc":{"start":{"line":90,"column":10},"end":{"line":90,"column":48}},"declarations":[{"type":"VariableDeclarator","start":3090,"end":3122,"loc":{"start":{"line":90,"column":16},"end":{"line":90,"column":48}},"id":{"type":"Identifier","start":3090,"end":3105,"loc":{"start":{"line":90,"column":16},"end":{"line":90,"column":31}},"name":"shouldTerminate"},"init":{"type":"UnaryExpression","start":3108,"end":3122,"loc":{"start":{"line":90,"column":34},"end":{"line":90,"column":48}},"operator":"!","prefix":true,"argument":{"type":"UnaryExpression","start":3109,"end":3122,"loc":{"start":{"line":90,"column":35},"end":{"line":90,"column":48}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":3110,"end":3122,"loc":{"start":{"line":90,"column":36},"end":{"line":90,"column":48}},"object":{"type":"MemberExpression","start":3110,"end":3118,"loc":{"start":{"line":90,"column":36},"end":{"line":90,"column":44}},"object":{"type":"ThisExpression","start":3110,"end":3114,"loc":{"start":{"line":90,"column":36},"end":{"line":90,"column":40}}},"property":{"type":"Identifier","start":3115,"end":3118,"loc":{"start":{"line":90,"column":41},"end":{"line":90,"column":44}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":3119,"end":3122,"loc":{"start":{"line":90,"column":45},"end":{"line":90,"column":48}},"name":"url"},"computed":false}}}}],"kind":"const"},{"type":"ExpressionStatement","start":3133,"end":3164,"loc":{"start":{"line":91,"column":10},"end":{"line":91,"column":41}},"expression":{"type":"CallExpression","start":3133,"end":3164,"loc":{"start":{"line":91,"column":10},"end":{"line":91,"column":41}},"callee":{"type":"MemberExpression","start":3133,"end":3147,"loc":{"start":{"line":91,"column":10},"end":{"line":91,"column":24}},"object":{"type":"MemberExpression","start":3133,"end":3141,"loc":{"start":{"line":91,"column":10},"end":{"line":91,"column":18}},"object":{"type":"ThisExpression","start":3133,"end":3137,"loc":{"start":{"line":91,"column":10},"end":{"line":91,"column":14}}},"property":{"type":"Identifier","start":3138,"end":3141,"loc":{"start":{"line":91,"column":15},"end":{"line":91,"column":18}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":3142,"end":3147,"loc":{"start":{"line":91,"column":19},"end":{"line":91,"column":24}},"name":"abort"},"computed":false},"arguments":[{"type":"Identifier","start":3148,"end":3163,"loc":{"start":{"line":91,"column":25},"end":{"line":91,"column":40}},"name":"shouldTerminate"}]}}]},"alternate":null},{"type":"ExpressionStatement","start":3183,"end":3197,"loc":{"start":{"line":93,"column":8},"end":{"line":93,"column":22}},"expression":{"type":"CallExpression","start":3183,"end":3197,"loc":{"start":{"line":93,"column":8},"end":{"line":93,"column":22}},"callee":{"type":"MemberExpression","start":3183,"end":3195,"loc":{"start":{"line":93,"column":8},"end":{"line":93,"column":20}},"object":{"type":"ThisExpression","start":3183,"end":3187,"loc":{"start":{"line":93,"column":8},"end":{"line":93,"column":12}}},"property":{"type":"Identifier","start":3188,"end":3195,"loc":{"start":{"line":93,"column":13},"end":{"line":93,"column":20}},"name":"cleanUp"},"computed":false},"arguments":[]}}]}}]}}]},"alternate":null}],"comments":[{"type":"Block","value":"*\n   * Uploads file to destination based on the supplied protocol (tus, s3-multipart, multipart)\n   * For tus uploads, the deferredLength option is enabled, because file size value can be unreliable\n   * for some providers (Instagram particularly)\n   *\n   * @typedef {object} UploaderOptions\n   * @property {string} endpoint\n   * @property {string=} uploadUrl\n   * @property {string} protocol\n   * @property {number} size\n   * @property {string=} fieldname\n   * @property {string} pathPrefix\n   * @property {any=} s3\n   * @property {any} metadata\n   * @property {any} companionOptions\n   * @property {any=} storage\n   * @property {any=} headers\n   * @property {string=} httpMethod\n   * @property {boolean=} useFormData\n   *\n   * @param {UploaderOptions} options\n   ","start":667,"end":1436,"loc":{"start":{"line":23,"column":2},"end":{"line":44,"column":5}}}]}}},{"type":"MethodDefinition","start":3510,"end":3576,"loc":{"start":{"line":105,"column":2},"end":{"line":107,"column":3}},"kind":"method","static":true,"computed":false,"key":{"type":"Identifier","start":3517,"end":3529,"loc":{"start":{"line":105,"column":9},"end":{"line":105,"column":21}},"name":"shortenToken"},"value":{"type":"FunctionExpression","start":3530,"end":3576,"loc":{"start":{"line":105,"column":22},"end":{"line":107,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3531,"end":3536,"loc":{"start":{"line":105,"column":23},"end":{"line":105,"column":28}},"name":"token"}],"body":{"type":"BlockStatement","start":3538,"end":3576,"loc":{"start":{"line":105,"column":30},"end":{"line":107,"column":3}},"body":[{"type":"ReturnStatement","start":3544,"end":3572,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":32}},"argument":{"type":"CallExpression","start":3551,"end":3572,"loc":{"start":{"line":106,"column":11},"end":{"line":106,"column":32}},"callee":{"type":"MemberExpression","start":3551,"end":3566,"loc":{"start":{"line":106,"column":11},"end":{"line":106,"column":26}},"object":{"type":"Identifier","start":3551,"end":3556,"loc":{"start":{"line":106,"column":11},"end":{"line":106,"column":16}},"name":"token"},"property":{"type":"Identifier","start":3557,"end":3566,"loc":{"start":{"line":106,"column":17},"end":{"line":106,"column":26}},"name":"substring"},"computed":false},"arguments":[{"type":"Literal","start":3567,"end":3568,"loc":{"start":{"line":106,"column":27},"end":{"line":106,"column":28}},"value":0,"raw":"0"},{"type":"Literal","start":3570,"end":3571,"loc":{"start":{"line":106,"column":30},"end":{"line":106,"column":31}},"value":8,"raw":"8"}]}}],"comments":[{"type":"Block","value":"*\n   * returns a substring of the token. Used as traceId for logging\n   * we avoid using the entire token because this is meant to be a short term\n   * access token between uppy client and companion websocket\n   * @param {string} token the token to Shorten\n   * @returns {string}\n   ","start":3220,"end":3507,"loc":{"start":{"line":98,"column":2},"end":{"line":104,"column":5}}}]}}},{"type":"MethodDefinition","start":3580,"end":4364,"loc":{"start":{"line":109,"column":2},"end":{"line":131,"column":3}},"kind":"method","static":true,"computed":false,"key":{"type":"Identifier","start":3587,"end":3599,"loc":{"start":{"line":109,"column":9},"end":{"line":109,"column":21}},"name":"reqToOptions"},"value":{"type":"FunctionExpression","start":3600,"end":4364,"loc":{"start":{"line":109,"column":22},"end":{"line":131,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3601,"end":3604,"loc":{"start":{"line":109,"column":23},"end":{"line":109,"column":26}},"name":"req"},{"type":"Identifier","start":3606,"end":3610,"loc":{"start":{"line":109,"column":28},"end":{"line":109,"column":32}},"name":"size"}],"body":{"type":"BlockStatement","start":3612,"end":4364,"loc":{"start":{"line":109,"column":34},"end":{"line":131,"column":3}},"body":[{"type":"VariableDeclaration","start":3618,"end":3704,"loc":{"start":{"line":110,"column":4},"end":{"line":110,"column":90}},"declarations":[{"type":"VariableDeclarator","start":3624,"end":3704,"loc":{"start":{"line":110,"column":10},"end":{"line":110,"column":90}},"id":{"type":"Identifier","start":3624,"end":3640,"loc":{"start":{"line":110,"column":10},"end":{"line":110,"column":26}},"name":"useFormDataIsSet"},"init":{"type":"CallExpression","start":3643,"end":3704,"loc":{"start":{"line":110,"column":29},"end":{"line":110,"column":90}},"callee":{"type":"MemberExpression","start":3643,"end":3679,"loc":{"start":{"line":110,"column":29},"end":{"line":110,"column":65}},"object":{"type":"MemberExpression","start":3643,"end":3674,"loc":{"start":{"line":110,"column":29},"end":{"line":110,"column":60}},"object":{"type":"MemberExpression","start":3643,"end":3659,"loc":{"start":{"line":110,"column":29},"end":{"line":110,"column":45}},"object":{"type":"Identifier","start":3643,"end":3649,"loc":{"start":{"line":110,"column":29},"end":{"line":110,"column":35}},"name":"Object"},"property":{"type":"Identifier","start":3650,"end":3659,"loc":{"start":{"line":110,"column":36},"end":{"line":110,"column":45}},"name":"prototype"},"computed":false},"property":{"type":"Identifier","start":3660,"end":3674,"loc":{"start":{"line":110,"column":46},"end":{"line":110,"column":60}},"name":"hasOwnProperty"},"computed":false},"property":{"type":"Identifier","start":3675,"end":3679,"loc":{"start":{"line":110,"column":61},"end":{"line":110,"column":65}},"name":"call"},"computed":false},"arguments":[{"type":"MemberExpression","start":3680,"end":3688,"loc":{"start":{"line":110,"column":66},"end":{"line":110,"column":74}},"object":{"type":"Identifier","start":3680,"end":3683,"loc":{"start":{"line":110,"column":66},"end":{"line":110,"column":69}},"name":"req"},"property":{"type":"Identifier","start":3684,"end":3688,"loc":{"start":{"line":110,"column":70},"end":{"line":110,"column":74}},"name":"body"},"computed":false},{"type":"Literal","start":3690,"end":3703,"loc":{"start":{"line":110,"column":76},"end":{"line":110,"column":89}},"value":"useFormData","raw":"'useFormData'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":3709,"end":3775,"loc":{"start":{"line":111,"column":4},"end":{"line":111,"column":70}},"declarations":[{"type":"VariableDeclarator","start":3715,"end":3775,"loc":{"start":{"line":111,"column":10},"end":{"line":111,"column":70}},"id":{"type":"Identifier","start":3715,"end":3726,"loc":{"start":{"line":111,"column":10},"end":{"line":111,"column":21}},"name":"useFormData"},"init":{"type":"ConditionalExpression","start":3729,"end":3775,"loc":{"start":{"line":111,"column":24},"end":{"line":111,"column":70}},"test":{"type":"Identifier","start":3729,"end":3745,"loc":{"start":{"line":111,"column":24},"end":{"line":111,"column":40}},"name":"useFormDataIsSet"},"consequent":{"type":"MemberExpression","start":3748,"end":3768,"loc":{"start":{"line":111,"column":43},"end":{"line":111,"column":63}},"object":{"type":"MemberExpression","start":3748,"end":3756,"loc":{"start":{"line":111,"column":43},"end":{"line":111,"column":51}},"object":{"type":"Identifier","start":3748,"end":3751,"loc":{"start":{"line":111,"column":43},"end":{"line":111,"column":46}},"name":"req"},"property":{"type":"Identifier","start":3752,"end":3756,"loc":{"start":{"line":111,"column":47},"end":{"line":111,"column":51}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3757,"end":3768,"loc":{"start":{"line":111,"column":52},"end":{"line":111,"column":63}},"name":"useFormData"},"computed":false},"alternate":{"type":"Literal","start":3771,"end":3775,"loc":{"start":{"line":111,"column":66},"end":{"line":111,"column":70}},"value":true,"raw":"true"}}}],"kind":"const"},{"type":"ReturnStatement","start":3781,"end":4360,"loc":{"start":{"line":113,"column":4},"end":{"line":130,"column":5}},"argument":{"type":"ObjectExpression","start":3788,"end":4360,"loc":{"start":{"line":113,"column":11},"end":{"line":130,"column":5}},"properties":[{"type":"Property","start":3796,"end":3835,"loc":{"start":{"line":114,"column":6},"end":{"line":114,"column":45}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3796,"end":3812,"loc":{"start":{"line":114,"column":6},"end":{"line":114,"column":22}},"name":"companionOptions"},"value":{"type":"MemberExpression","start":3814,"end":3835,"loc":{"start":{"line":114,"column":24},"end":{"line":114,"column":45}},"object":{"type":"MemberExpression","start":3814,"end":3827,"loc":{"start":{"line":114,"column":24},"end":{"line":114,"column":37}},"object":{"type":"Identifier","start":3814,"end":3817,"loc":{"start":{"line":114,"column":24},"end":{"line":114,"column":27}},"name":"req"},"property":{"type":"Identifier","start":3818,"end":3827,"loc":{"start":{"line":114,"column":28},"end":{"line":114,"column":37}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":3828,"end":3835,"loc":{"start":{"line":114,"column":38},"end":{"line":114,"column":45}},"name":"options"},"computed":false},"kind":"init"},{"type":"Property","start":3843,"end":3870,"loc":{"start":{"line":115,"column":6},"end":{"line":115,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3843,"end":3851,"loc":{"start":{"line":115,"column":6},"end":{"line":115,"column":14}},"name":"endpoint"},"value":{"type":"MemberExpression","start":3853,"end":3870,"loc":{"start":{"line":115,"column":16},"end":{"line":115,"column":33}},"object":{"type":"MemberExpression","start":3853,"end":3861,"loc":{"start":{"line":115,"column":16},"end":{"line":115,"column":24}},"object":{"type":"Identifier","start":3853,"end":3856,"loc":{"start":{"line":115,"column":16},"end":{"line":115,"column":19}},"name":"req"},"property":{"type":"Identifier","start":3857,"end":3861,"loc":{"start":{"line":115,"column":20},"end":{"line":115,"column":24}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3862,"end":3870,"loc":{"start":{"line":115,"column":25},"end":{"line":115,"column":33}},"name":"endpoint"},"computed":false},"kind":"init"},{"type":"Property","start":3878,"end":3907,"loc":{"start":{"line":116,"column":6},"end":{"line":116,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3878,"end":3887,"loc":{"start":{"line":116,"column":6},"end":{"line":116,"column":15}},"name":"uploadUrl"},"value":{"type":"MemberExpression","start":3889,"end":3907,"loc":{"start":{"line":116,"column":17},"end":{"line":116,"column":35}},"object":{"type":"MemberExpression","start":3889,"end":3897,"loc":{"start":{"line":116,"column":17},"end":{"line":116,"column":25}},"object":{"type":"Identifier","start":3889,"end":3892,"loc":{"start":{"line":116,"column":17},"end":{"line":116,"column":20}},"name":"req"},"property":{"type":"Identifier","start":3893,"end":3897,"loc":{"start":{"line":116,"column":21},"end":{"line":116,"column":25}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3898,"end":3907,"loc":{"start":{"line":116,"column":26},"end":{"line":116,"column":35}},"name":"uploadUrl"},"computed":false},"kind":"init"},{"type":"Property","start":3915,"end":3942,"loc":{"start":{"line":117,"column":6},"end":{"line":117,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3915,"end":3923,"loc":{"start":{"line":117,"column":6},"end":{"line":117,"column":14}},"name":"protocol"},"value":{"type":"MemberExpression","start":3925,"end":3942,"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":33}},"object":{"type":"MemberExpression","start":3925,"end":3933,"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":24}},"object":{"type":"Identifier","start":3925,"end":3928,"loc":{"start":{"line":117,"column":16},"end":{"line":117,"column":19}},"name":"req"},"property":{"type":"Identifier","start":3929,"end":3933,"loc":{"start":{"line":117,"column":20},"end":{"line":117,"column":24}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3934,"end":3942,"loc":{"start":{"line":117,"column":25},"end":{"line":117,"column":33}},"name":"protocol"},"computed":false},"kind":"init"},{"type":"Property","start":3950,"end":3977,"loc":{"start":{"line":118,"column":6},"end":{"line":118,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3950,"end":3958,"loc":{"start":{"line":118,"column":6},"end":{"line":118,"column":14}},"name":"metadata"},"value":{"type":"MemberExpression","start":3960,"end":3977,"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":33}},"object":{"type":"MemberExpression","start":3960,"end":3968,"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":24}},"object":{"type":"Identifier","start":3960,"end":3963,"loc":{"start":{"line":118,"column":16},"end":{"line":118,"column":19}},"name":"req"},"property":{"type":"Identifier","start":3964,"end":3968,"loc":{"start":{"line":118,"column":20},"end":{"line":118,"column":24}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3969,"end":3977,"loc":{"start":{"line":118,"column":25},"end":{"line":118,"column":33}},"name":"metadata"},"computed":false},"kind":"init"},{"type":"Property","start":3985,"end":4016,"loc":{"start":{"line":119,"column":6},"end":{"line":119,"column":37}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3985,"end":3995,"loc":{"start":{"line":119,"column":6},"end":{"line":119,"column":16}},"name":"httpMethod"},"value":{"type":"MemberExpression","start":3997,"end":4016,"loc":{"start":{"line":119,"column":18},"end":{"line":119,"column":37}},"object":{"type":"MemberExpression","start":3997,"end":4005,"loc":{"start":{"line":119,"column":18},"end":{"line":119,"column":26}},"object":{"type":"Identifier","start":3997,"end":4000,"loc":{"start":{"line":119,"column":18},"end":{"line":119,"column":21}},"name":"req"},"property":{"type":"Identifier","start":4001,"end":4005,"loc":{"start":{"line":119,"column":22},"end":{"line":119,"column":26}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":4006,"end":4016,"loc":{"start":{"line":119,"column":27},"end":{"line":119,"column":37}},"name":"httpMethod"},"computed":false},"kind":"init"},{"type":"Property","start":4024,"end":4035,"loc":{"start":{"line":120,"column":6},"end":{"line":120,"column":17}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4024,"end":4035,"loc":{"start":{"line":120,"column":6},"end":{"line":120,"column":17}},"name":"useFormData"},"kind":"init","value":{"type":"Identifier","start":4024,"end":4035,"loc":{"start":{"line":120,"column":6},"end":{"line":120,"column":17}},"name":"useFormData"}},{"type":"Property","start":4043,"end":4047,"loc":{"start":{"line":121,"column":6},"end":{"line":121,"column":10}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4043,"end":4047,"loc":{"start":{"line":121,"column":6},"end":{"line":121,"column":10}},"name":"size"},"kind":"init","value":{"type":"Identifier","start":4043,"end":4047,"loc":{"start":{"line":121,"column":6},"end":{"line":121,"column":10}},"name":"size"}},{"type":"Property","start":4055,"end":4084,"loc":{"start":{"line":122,"column":6},"end":{"line":122,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4055,"end":4064,"loc":{"start":{"line":122,"column":6},"end":{"line":122,"column":15}},"name":"fieldname"},"value":{"type":"MemberExpression","start":4066,"end":4084,"loc":{"start":{"line":122,"column":17},"end":{"line":122,"column":35}},"object":{"type":"MemberExpression","start":4066,"end":4074,"loc":{"start":{"line":122,"column":17},"end":{"line":122,"column":25}},"object":{"type":"Identifier","start":4066,"end":4069,"loc":{"start":{"line":122,"column":17},"end":{"line":122,"column":20}},"name":"req"},"property":{"type":"Identifier","start":4070,"end":4074,"loc":{"start":{"line":122,"column":21},"end":{"line":122,"column":25}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":4075,"end":4084,"loc":{"start":{"line":122,"column":26},"end":{"line":122,"column":35}},"name":"fieldname"},"computed":false},"kind":"init"},{"type":"Property","start":4092,"end":4139,"loc":{"start":{"line":123,"column":6},"end":{"line":123,"column":53}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4092,"end":4102,"loc":{"start":{"line":123,"column":6},"end":{"line":123,"column":16}},"name":"pathPrefix"},"value":{"type":"TemplateLiteral","start":4104,"end":4139,"loc":{"start":{"line":123,"column":18},"end":{"line":123,"column":53}},"expressions":[{"type":"MemberExpression","start":4107,"end":4137,"loc":{"start":{"line":123,"column":21},"end":{"line":123,"column":51}},"object":{"type":"MemberExpression","start":4107,"end":4128,"loc":{"start":{"line":123,"column":21},"end":{"line":123,"column":42}},"object":{"type":"MemberExpression","start":4107,"end":4120,"loc":{"start":{"line":123,"column":21},"end":{"line":123,"column":34}},"object":{"type":"Identifier","start":4107,"end":4110,"loc":{"start":{"line":123,"column":21},"end":{"line":123,"column":24}},"name":"req"},"property":{"type":"Identifier","start":4111,"end":4120,"loc":{"start":{"line":123,"column":25},"end":{"line":123,"column":34}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":4121,"end":4128,"loc":{"start":{"line":123,"column":35},"end":{"line":123,"column":42}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":4129,"end":4137,"loc":{"start":{"line":123,"column":43},"end":{"line":123,"column":51}},"name":"filePath"},"computed":false}],"quasis":[{"type":"TemplateElement","start":4105,"end":4105,"loc":{"start":{"line":123,"column":19},"end":{"line":123,"column":19}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":4138,"end":4138,"loc":{"start":{"line":123,"column":52},"end":{"line":123,"column":52}},"value":{"raw":"","cooked":""},"tail":true}]},"kind":"init"},{"type":"Property","start":4147,"end":4170,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4147,"end":4154,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":13}},"name":"storage"},"value":{"type":"CallExpression","start":4156,"end":4170,"loc":{"start":{"line":124,"column":15},"end":{"line":124,"column":29}},"callee":{"type":"MemberExpression","start":4156,"end":4168,"loc":{"start":{"line":124,"column":15},"end":{"line":124,"column":27}},"object":{"type":"Identifier","start":4156,"end":4161,"loc":{"start":{"line":124,"column":15},"end":{"line":124,"column":20}},"name":"redis"},"property":{"type":"Identifier","start":4162,"end":4168,"loc":{"start":{"line":124,"column":21},"end":{"line":124,"column":27}},"name":"client"},"computed":false},"arguments":[]},"kind":"init"},{"type":"Property","start":4178,"end":4321,"loc":{"start":{"line":125,"column":6},"end":{"line":128,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4178,"end":4180,"loc":{"start":{"line":125,"column":6},"end":{"line":125,"column":8}},"name":"s3"},"value":{"type":"ConditionalExpression","start":4182,"end":4321,"loc":{"start":{"line":125,"column":10},"end":{"line":128,"column":14}},"test":{"type":"MemberExpression","start":4182,"end":4204,"loc":{"start":{"line":125,"column":10},"end":{"line":125,"column":32}},"object":{"type":"MemberExpression","start":4182,"end":4195,"loc":{"start":{"line":125,"column":10},"end":{"line":125,"column":23}},"object":{"type":"Identifier","start":4182,"end":4185,"loc":{"start":{"line":125,"column":10},"end":{"line":125,"column":13}},"name":"req"},"property":{"type":"Identifier","start":4186,"end":4195,"loc":{"start":{"line":125,"column":14},"end":{"line":125,"column":23}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":4196,"end":4204,"loc":{"start":{"line":125,"column":24},"end":{"line":125,"column":32}},"name":"s3Client"},"computed":false},"consequent":{"type":"ObjectExpression","start":4207,"end":4314,"loc":{"start":{"line":125,"column":35},"end":{"line":128,"column":7}},"properties":[{"type":"Property","start":4217,"end":4247,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4217,"end":4223,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":14}},"name":"client"},"value":{"type":"MemberExpression","start":4225,"end":4247,"loc":{"start":{"line":126,"column":16},"end":{"line":126,"column":38}},"object":{"type":"MemberExpression","start":4225,"end":4238,"loc":{"start":{"line":126,"column":16},"end":{"line":126,"column":29}},"object":{"type":"Identifier","start":4225,"end":4228,"loc":{"start":{"line":126,"column":16},"end":{"line":126,"column":19}},"name":"req"},"property":{"type":"Identifier","start":4229,"end":4238,"loc":{"start":{"line":126,"column":20},"end":{"line":126,"column":29}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":4239,"end":4247,"loc":{"start":{"line":126,"column":30},"end":{"line":126,"column":38}},"name":"s3Client"},"computed":false},"kind":"init"},{"type":"Property","start":4257,"end":4306,"loc":{"start":{"line":127,"column":8},"end":{"line":127,"column":57}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4257,"end":4264,"loc":{"start":{"line":127,"column":8},"end":{"line":127,"column":15}},"name":"options"},"value":{"type":"MemberExpression","start":4266,"end":4306,"loc":{"start":{"line":127,"column":17},"end":{"line":127,"column":57}},"object":{"type":"MemberExpression","start":4266,"end":4303,"loc":{"start":{"line":127,"column":17},"end":{"line":127,"column":54}},"object":{"type":"MemberExpression","start":4266,"end":4287,"loc":{"start":{"line":127,"column":17},"end":{"line":127,"column":38}},"object":{"type":"MemberExpression","start":4266,"end":4279,"loc":{"start":{"line":127,"column":17},"end":{"line":127,"column":30}},"object":{"type":"Identifier","start":4266,"end":4269,"loc":{"start":{"line":127,"column":17},"end":{"line":127,"column":20}},"name":"req"},"property":{"type":"Identifier","start":4270,"end":4279,"loc":{"start":{"line":127,"column":21},"end":{"line":127,"column":30}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":4280,"end":4287,"loc":{"start":{"line":127,"column":31},"end":{"line":127,"column":38}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":4288,"end":4303,"loc":{"start":{"line":127,"column":39},"end":{"line":127,"column":54}},"name":"providerOptions"},"computed":false},"property":{"type":"Identifier","start":4304,"end":4306,"loc":{"start":{"line":127,"column":55},"end":{"line":127,"column":57}},"name":"s3"},"computed":false},"kind":"init"}]},"alternate":{"type":"Literal","start":4317,"end":4321,"loc":{"start":{"line":128,"column":10},"end":{"line":128,"column":14}},"value":null,"raw":"null"}},"kind":"init"},{"type":"Property","start":4329,"end":4354,"loc":{"start":{"line":129,"column":6},"end":{"line":129,"column":31}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4329,"end":4336,"loc":{"start":{"line":129,"column":6},"end":{"line":129,"column":13}},"name":"headers"},"value":{"type":"MemberExpression","start":4338,"end":4354,"loc":{"start":{"line":129,"column":15},"end":{"line":129,"column":31}},"object":{"type":"MemberExpression","start":4338,"end":4346,"loc":{"start":{"line":129,"column":15},"end":{"line":129,"column":23}},"object":{"type":"Identifier","start":4338,"end":4341,"loc":{"start":{"line":129,"column":15},"end":{"line":129,"column":18}},"name":"req"},"property":{"type":"Identifier","start":4342,"end":4346,"loc":{"start":{"line":129,"column":19},"end":{"line":129,"column":23}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":4347,"end":4354,"loc":{"start":{"line":129,"column":24},"end":{"line":129,"column":31}},"name":"headers"},"computed":false},"kind":"init"}]}}]}}},{"type":"MethodDefinition","start":4430,"end":4496,"loc":{"start":{"line":136,"column":2},"end":{"line":138,"column":3}},"kind":"get","static":false,"computed":false,"key":{"type":"Identifier","start":4434,"end":4446,"loc":{"start":{"line":136,"column":6},"end":{"line":136,"column":18}},"name":"bytesWritten"},"value":{"type":"FunctionExpression","start":4447,"end":4496,"loc":{"start":{"line":136,"column":19},"end":{"line":138,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4450,"end":4496,"loc":{"start":{"line":136,"column":22},"end":{"line":138,"column":3}},"body":[{"type":"ReturnStatement","start":4456,"end":4492,"loc":{"start":{"line":137,"column":4},"end":{"line":137,"column":40}},"argument":{"type":"MemberExpression","start":4463,"end":4492,"loc":{"start":{"line":137,"column":11},"end":{"line":137,"column":40}},"object":{"type":"MemberExpression","start":4463,"end":4479,"loc":{"start":{"line":137,"column":11},"end":{"line":137,"column":27}},"object":{"type":"ThisExpression","start":4463,"end":4467,"loc":{"start":{"line":137,"column":11},"end":{"line":137,"column":15}}},"property":{"type":"Identifier","start":4468,"end":4479,"loc":{"start":{"line":137,"column":16},"end":{"line":137,"column":27}},"name":"writeStream"},"computed":false},"property":{"type":"Identifier","start":4480,"end":4492,"loc":{"start":{"line":137,"column":28},"end":{"line":137,"column":40}},"name":"bytesWritten"},"computed":false}}],"comments":[{"type":"Block","value":"*\n   * the number of bytes written into the streams\n   ","start":4368,"end":4427,"loc":{"start":{"line":133,"column":2},"end":{"line":135,"column":5}}}]}}},{"type":"MethodDefinition","start":4633,"end":6836,"loc":{"start":{"line":146,"column":2},"end":{"line":213,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":4633,"end":4648,"loc":{"start":{"line":146,"column":2},"end":{"line":146,"column":17}},"name":"validateOptions"},"value":{"type":"FunctionExpression","start":4649,"end":6836,"loc":{"start":{"line":146,"column":18},"end":{"line":213,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4650,"end":4657,"loc":{"start":{"line":146,"column":19},"end":{"line":146,"column":26}},"name":"options"}],"body":{"type":"BlockStatement","start":4659,"end":6836,"loc":{"start":{"line":146,"column":28},"end":{"line":213,"column":3}},"body":[{"type":"IfStatement","start":4693,"end":5074,"loc":{"start":{"line":148,"column":4},"end":{"line":159,"column":5}},"test":{"type":"MemberExpression","start":4697,"end":4715,"loc":{"start":{"line":148,"column":8},"end":{"line":148,"column":26}},"object":{"type":"Identifier","start":4697,"end":4704,"loc":{"start":{"line":148,"column":8},"end":{"line":148,"column":15}},"name":"options"},"property":{"type":"Identifier","start":4705,"end":4715,"loc":{"start":{"line":148,"column":16},"end":{"line":148,"column":26}},"name":"httpMethod"},"computed":false},"consequent":{"type":"BlockStatement","start":4717,"end":5074,"loc":{"start":{"line":148,"column":28},"end":{"line":159,"column":5}},"body":[{"type":"IfStatement","start":4725,"end":4866,"loc":{"start":{"line":149,"column":6},"end":{"line":152,"column":7}},"test":{"type":"BinaryExpression","start":4729,"end":4767,"loc":{"start":{"line":149,"column":10},"end":{"line":149,"column":48}},"left":{"type":"UnaryExpression","start":4729,"end":4754,"loc":{"start":{"line":149,"column":10},"end":{"line":149,"column":35}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":4736,"end":4754,"loc":{"start":{"line":149,"column":17},"end":{"line":149,"column":35}},"object":{"type":"Identifier","start":4736,"end":4743,"loc":{"start":{"line":149,"column":17},"end":{"line":149,"column":24}},"name":"options"},"property":{"type":"Identifier","start":4744,"end":4754,"loc":{"start":{"line":149,"column":25},"end":{"line":149,"column":35}},"name":"httpMethod"},"computed":false}},"operator":"!==","right":{"type":"Literal","start":4759,"end":4767,"loc":{"start":{"line":149,"column":40},"end":{"line":149,"column":48}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":4769,"end":4866,"loc":{"start":{"line":149,"column":50},"end":{"line":152,"column":7}},"body":[{"type":"ExpressionStatement","start":4779,"end":4837,"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":66}},"expression":{"type":"AssignmentExpression","start":4779,"end":4837,"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":66}},"operator":"=","left":{"type":"MemberExpression","start":4779,"end":4799,"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":28}},"object":{"type":"ThisExpression","start":4779,"end":4783,"loc":{"start":{"line":150,"column":8},"end":{"line":150,"column":12}}},"property":{"type":"Identifier","start":4784,"end":4799,"loc":{"start":{"line":150,"column":13},"end":{"line":150,"column":28}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":4802,"end":4837,"loc":{"start":{"line":150,"column":31},"end":{"line":150,"column":66}},"value":"unsupported HTTP METHOD specified","raw":"'unsupported HTTP METHOD specified'"}}},{"type":"ReturnStatement","start":4846,"end":4858,"loc":{"start":{"line":151,"column":8},"end":{"line":151,"column":20}},"argument":{"type":"Literal","start":4853,"end":4858,"loc":{"start":{"line":151,"column":15},"end":{"line":151,"column":20}},"value":false,"raw":"false"}}]},"alternate":null},{"type":"VariableDeclaration","start":4874,"end":4921,"loc":{"start":{"line":154,"column":6},"end":{"line":154,"column":53}},"declarations":[{"type":"VariableDeclarator","start":4880,"end":4921,"loc":{"start":{"line":154,"column":12},"end":{"line":154,"column":53}},"id":{"type":"Identifier","start":4880,"end":4886,"loc":{"start":{"line":154,"column":12},"end":{"line":154,"column":18}},"name":"method"},"init":{"type":"CallExpression","start":4889,"end":4921,"loc":{"start":{"line":154,"column":21},"end":{"line":154,"column":53}},"callee":{"type":"MemberExpression","start":4889,"end":4919,"loc":{"start":{"line":154,"column":21},"end":{"line":154,"column":51}},"object":{"type":"MemberExpression","start":4889,"end":4907,"loc":{"start":{"line":154,"column":21},"end":{"line":154,"column":39}},"object":{"type":"Identifier","start":4889,"end":4896,"loc":{"start":{"line":154,"column":21},"end":{"line":154,"column":28}},"name":"options"},"property":{"type":"Identifier","start":4897,"end":4907,"loc":{"start":{"line":154,"column":29},"end":{"line":154,"column":39}},"name":"httpMethod"},"computed":false},"property":{"type":"Identifier","start":4908,"end":4919,"loc":{"start":{"line":154,"column":40},"end":{"line":154,"column":51}},"name":"toLowerCase"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"IfStatement","start":4928,"end":5068,"loc":{"start":{"line":155,"column":6},"end":{"line":158,"column":7}},"test":{"type":"LogicalExpression","start":4932,"end":4969,"loc":{"start":{"line":155,"column":10},"end":{"line":155,"column":47}},"left":{"type":"BinaryExpression","start":4932,"end":4948,"loc":{"start":{"line":155,"column":10},"end":{"line":155,"column":26}},"left":{"type":"Identifier","start":4932,"end":4938,"loc":{"start":{"line":155,"column":10},"end":{"line":155,"column":16}},"name":"method"},"operator":"!==","right":{"type":"Literal","start":4943,"end":4948,"loc":{"start":{"line":155,"column":21},"end":{"line":155,"column":26}},"value":"put","raw":"'put'"}},"operator":"&&","right":{"type":"BinaryExpression","start":4952,"end":4969,"loc":{"start":{"line":155,"column":30},"end":{"line":155,"column":47}},"left":{"type":"Identifier","start":4952,"end":4958,"loc":{"start":{"line":155,"column":30},"end":{"line":155,"column":36}},"name":"method"},"operator":"!==","right":{"type":"Literal","start":4963,"end":4969,"loc":{"start":{"line":155,"column":41},"end":{"line":155,"column":47}},"value":"post","raw":"'post'"}}},"consequent":{"type":"BlockStatement","start":4971,"end":5068,"loc":{"start":{"line":155,"column":49},"end":{"line":158,"column":7}},"body":[{"type":"ExpressionStatement","start":4981,"end":5039,"loc":{"start":{"line":156,"column":8},"end":{"line":156,"column":66}},"expression":{"type":"AssignmentExpression","start":4981,"end":5039,"loc":{"start":{"line":156,"column":8},"end":{"line":156,"column":66}},"operator":"=","left":{"type":"MemberExpression","start":4981,"end":5001,"loc":{"start":{"line":156,"column":8},"end":{"line":156,"column":28}},"object":{"type":"ThisExpression","start":4981,"end":4985,"loc":{"start":{"line":156,"column":8},"end":{"line":156,"column":12}}},"property":{"type":"Identifier","start":4986,"end":5001,"loc":{"start":{"line":156,"column":13},"end":{"line":156,"column":28}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":5004,"end":5039,"loc":{"start":{"line":156,"column":31},"end":{"line":156,"column":66}},"value":"unsupported HTTP METHOD specified","raw":"'unsupported HTTP METHOD specified'"}}},{"type":"ReturnStatement","start":5048,"end":5060,"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":20}},"argument":{"type":"Literal","start":5055,"end":5060,"loc":{"start":{"line":157,"column":15},"end":{"line":157,"column":20}},"value":false,"raw":"false"}}]},"alternate":null}]},"alternate":null,"comments":[{"type":"Line","value":" validate HTTP Method","start":4665,"end":4688,"loc":{"start":{"line":147,"column":4},"end":{"line":147,"column":27}}}]},{"type":"IfStatement","start":5106,"end":5254,"loc":{"start":{"line":162,"column":4},"end":{"line":165,"column":5}},"test":{"type":"LogicalExpression","start":5110,"end":5168,"loc":{"start":{"line":162,"column":8},"end":{"line":162,"column":66}},"left":{"type":"MemberExpression","start":5110,"end":5127,"loc":{"start":{"line":162,"column":8},"end":{"line":162,"column":25}},"object":{"type":"Identifier","start":5110,"end":5117,"loc":{"start":{"line":162,"column":8},"end":{"line":162,"column":15}},"name":"options"},"property":{"type":"Identifier","start":5118,"end":5127,"loc":{"start":{"line":162,"column":16},"end":{"line":162,"column":25}},"name":"fieldname"},"computed":false},"operator":"&&","right":{"type":"BinaryExpression","start":5131,"end":5168,"loc":{"start":{"line":162,"column":29},"end":{"line":162,"column":66}},"left":{"type":"UnaryExpression","start":5131,"end":5155,"loc":{"start":{"line":162,"column":29},"end":{"line":162,"column":53}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":5138,"end":5155,"loc":{"start":{"line":162,"column":36},"end":{"line":162,"column":53}},"object":{"type":"Identifier","start":5138,"end":5145,"loc":{"start":{"line":162,"column":36},"end":{"line":162,"column":43}},"name":"options"},"property":{"type":"Identifier","start":5146,"end":5155,"loc":{"start":{"line":162,"column":44},"end":{"line":162,"column":53}},"name":"fieldname"},"computed":false}},"operator":"!==","right":{"type":"Literal","start":5160,"end":5168,"loc":{"start":{"line":162,"column":58},"end":{"line":162,"column":66}},"value":"string","raw":"'string'"}}},"consequent":{"type":"BlockStatement","start":5170,"end":5254,"loc":{"start":{"line":162,"column":68},"end":{"line":165,"column":5}},"body":[{"type":"ExpressionStatement","start":5178,"end":5229,"loc":{"start":{"line":163,"column":6},"end":{"line":163,"column":57}},"expression":{"type":"AssignmentExpression","start":5178,"end":5229,"loc":{"start":{"line":163,"column":6},"end":{"line":163,"column":57}},"operator":"=","left":{"type":"MemberExpression","start":5178,"end":5198,"loc":{"start":{"line":163,"column":6},"end":{"line":163,"column":26}},"object":{"type":"ThisExpression","start":5178,"end":5182,"loc":{"start":{"line":163,"column":6},"end":{"line":163,"column":10}}},"property":{"type":"Identifier","start":5183,"end":5198,"loc":{"start":{"line":163,"column":11},"end":{"line":163,"column":26}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":5201,"end":5229,"loc":{"start":{"line":163,"column":29},"end":{"line":163,"column":57}},"value":"fieldname must be a string","raw":"'fieldname must be a string'"}}},{"type":"ReturnStatement","start":5236,"end":5248,"loc":{"start":{"line":164,"column":6},"end":{"line":164,"column":18}},"argument":{"type":"Literal","start":5243,"end":5248,"loc":{"start":{"line":164,"column":13},"end":{"line":164,"column":18}},"value":false,"raw":"false"}}]},"alternate":null,"comments":[{"type":"Line","value":" validate fieldname","start":5080,"end":5101,"loc":{"start":{"line":161,"column":4},"end":{"line":161,"column":25}}}]},{"type":"IfStatement","start":5285,"end":5422,"loc":{"start":{"line":168,"column":4},"end":{"line":171,"column":5}},"test":{"type":"LogicalExpression","start":5289,"end":5336,"loc":{"start":{"line":168,"column":8},"end":{"line":168,"column":55}},"left":{"type":"MemberExpression","start":5289,"end":5305,"loc":{"start":{"line":168,"column":8},"end":{"line":168,"column":24}},"object":{"type":"Identifier","start":5289,"end":5296,"loc":{"start":{"line":168,"column":8},"end":{"line":168,"column":15}},"name":"options"},"property":{"type":"Identifier","start":5297,"end":5305,"loc":{"start":{"line":168,"column":16},"end":{"line":168,"column":24}},"name":"metadata"},"computed":false},"operator":"&&","right":{"type":"UnaryExpression","start":5309,"end":5336,"loc":{"start":{"line":168,"column":28},"end":{"line":168,"column":55}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":5310,"end":5336,"loc":{"start":{"line":168,"column":29},"end":{"line":168,"column":55}},"callee":{"type":"Identifier","start":5310,"end":5318,"loc":{"start":{"line":168,"column":29},"end":{"line":168,"column":37}},"name":"isObject"},"arguments":[{"type":"MemberExpression","start":5319,"end":5335,"loc":{"start":{"line":168,"column":38},"end":{"line":168,"column":54}},"object":{"type":"Identifier","start":5319,"end":5326,"loc":{"start":{"line":168,"column":38},"end":{"line":168,"column":45}},"name":"options"},"property":{"type":"Identifier","start":5327,"end":5335,"loc":{"start":{"line":168,"column":46},"end":{"line":168,"column":54}},"name":"metadata"},"computed":false}]}}},"consequent":{"type":"BlockStatement","start":5338,"end":5422,"loc":{"start":{"line":168,"column":57},"end":{"line":171,"column":5}},"body":[{"type":"ExpressionStatement","start":5346,"end":5397,"loc":{"start":{"line":169,"column":6},"end":{"line":169,"column":57}},"expression":{"type":"AssignmentExpression","start":5346,"end":5397,"loc":{"start":{"line":169,"column":6},"end":{"line":169,"column":57}},"operator":"=","left":{"type":"MemberExpression","start":5346,"end":5366,"loc":{"start":{"line":169,"column":6},"end":{"line":169,"column":26}},"object":{"type":"ThisExpression","start":5346,"end":5350,"loc":{"start":{"line":169,"column":6},"end":{"line":169,"column":10}}},"property":{"type":"Identifier","start":5351,"end":5366,"loc":{"start":{"line":169,"column":11},"end":{"line":169,"column":26}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":5369,"end":5397,"loc":{"start":{"line":169,"column":29},"end":{"line":169,"column":57}},"value":"metadata must be an object","raw":"'metadata must be an object'"}}},{"type":"ReturnStatement","start":5404,"end":5416,"loc":{"start":{"line":170,"column":6},"end":{"line":170,"column":18}},"argument":{"type":"Literal","start":5411,"end":5416,"loc":{"start":{"line":170,"column":13},"end":{"line":170,"column":18}},"value":false,"raw":"false"}}]},"alternate":null,"comments":[{"type":"Line","value":" validate metadata","start":5260,"end":5280,"loc":{"start":{"line":167,"column":4},"end":{"line":167,"column":24}}}]},{"type":"IfStatement","start":5452,"end":5586,"loc":{"start":{"line":174,"column":4},"end":{"line":177,"column":5}},"test":{"type":"LogicalExpression","start":5456,"end":5501,"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":53}},"left":{"type":"MemberExpression","start":5456,"end":5471,"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":23}},"object":{"type":"Identifier","start":5456,"end":5463,"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":15}},"name":"options"},"property":{"type":"Identifier","start":5464,"end":5471,"loc":{"start":{"line":174,"column":16},"end":{"line":174,"column":23}},"name":"headers"},"computed":false},"operator":"&&","right":{"type":"UnaryExpression","start":5475,"end":5501,"loc":{"start":{"line":174,"column":27},"end":{"line":174,"column":53}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":5476,"end":5501,"loc":{"start":{"line":174,"column":28},"end":{"line":174,"column":53}},"callee":{"type":"Identifier","start":5476,"end":5484,"loc":{"start":{"line":174,"column":28},"end":{"line":174,"column":36}},"name":"isObject"},"arguments":[{"type":"MemberExpression","start":5485,"end":5500,"loc":{"start":{"line":174,"column":37},"end":{"line":174,"column":52}},"object":{"type":"Identifier","start":5485,"end":5492,"loc":{"start":{"line":174,"column":37},"end":{"line":174,"column":44}},"name":"options"},"property":{"type":"Identifier","start":5493,"end":5500,"loc":{"start":{"line":174,"column":45},"end":{"line":174,"column":52}},"name":"headers"},"computed":false}]}}},"consequent":{"type":"BlockStatement","start":5503,"end":5586,"loc":{"start":{"line":174,"column":55},"end":{"line":177,"column":5}},"body":[{"type":"ExpressionStatement","start":5511,"end":5561,"loc":{"start":{"line":175,"column":6},"end":{"line":175,"column":56}},"expression":{"type":"AssignmentExpression","start":5511,"end":5561,"loc":{"start":{"line":175,"column":6},"end":{"line":175,"column":56}},"operator":"=","left":{"type":"MemberExpression","start":5511,"end":5531,"loc":{"start":{"line":175,"column":6},"end":{"line":175,"column":26}},"object":{"type":"ThisExpression","start":5511,"end":5515,"loc":{"start":{"line":175,"column":6},"end":{"line":175,"column":10}}},"property":{"type":"Identifier","start":5516,"end":5531,"loc":{"start":{"line":175,"column":11},"end":{"line":175,"column":26}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":5534,"end":5561,"loc":{"start":{"line":175,"column":29},"end":{"line":175,"column":56}},"value":"headers must be an object","raw":"'headers must be an object'"}}},{"type":"ReturnStatement","start":5568,"end":5580,"loc":{"start":{"line":176,"column":6},"end":{"line":176,"column":18}},"argument":{"type":"Literal","start":5575,"end":5580,"loc":{"start":{"line":176,"column":13},"end":{"line":176,"column":18}},"value":false,"raw":"false"}}]},"alternate":null,"comments":[{"type":"Line","value":" validate headers","start":5428,"end":5447,"loc":{"start":{"line":173,"column":4},"end":{"line":173,"column":23}}}]},{"type":"IfStatement","start":5709,"end":5897,"loc":{"start":{"line":181,"column":4},"end":{"line":184,"column":5}},"test":{"type":"LogicalExpression","start":5713,"end":5807,"loc":{"start":{"line":181,"column":8},"end":{"line":181,"column":102}},"left":{"type":"MemberExpression","start":5713,"end":5729,"loc":{"start":{"line":181,"column":8},"end":{"line":181,"column":24}},"object":{"type":"Identifier","start":5713,"end":5720,"loc":{"start":{"line":181,"column":8},"end":{"line":181,"column":15}},"name":"options"},"property":{"type":"Identifier","start":5721,"end":5729,"loc":{"start":{"line":181,"column":16},"end":{"line":181,"column":24}},"name":"protocol"},"computed":false},"operator":"&&","right":{"type":"UnaryExpression","start":5733,"end":5807,"loc":{"start":{"line":181,"column":28},"end":{"line":181,"column":102}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":5734,"end":5807,"loc":{"start":{"line":181,"column":29},"end":{"line":181,"column":102}},"callee":{"type":"MemberExpression","start":5734,"end":5761,"loc":{"start":{"line":181,"column":29},"end":{"line":181,"column":56}},"object":{"type":"CallExpression","start":5734,"end":5756,"loc":{"start":{"line":181,"column":29},"end":{"line":181,"column":51}},"callee":{"type":"MemberExpression","start":5734,"end":5745,"loc":{"start":{"line":181,"column":29},"end":{"line":181,"column":40}},"object":{"type":"Identifier","start":5734,"end":5740,"loc":{"start":{"line":181,"column":29},"end":{"line":181,"column":35}},"name":"Object"},"property":{"type":"Identifier","start":5741,"end":5745,"loc":{"start":{"line":181,"column":36},"end":{"line":181,"column":40}},"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":5746,"end":5755,"loc":{"start":{"line":181,"column":41},"end":{"line":181,"column":50}},"name":"PROTOCOLS"}]},"property":{"type":"Identifier","start":5757,"end":5761,"loc":{"start":{"line":181,"column":52},"end":{"line":181,"column":56}},"name":"some"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":5762,"end":5806,"loc":{"start":{"line":181,"column":57},"end":{"line":181,"column":101}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":5763,"end":5766,"loc":{"start":{"line":181,"column":58},"end":{"line":181,"column":61}},"name":"key"}],"body":{"type":"BinaryExpression","start":5771,"end":5806,"loc":{"start":{"line":181,"column":66},"end":{"line":181,"column":101}},"left":{"type":"MemberExpression","start":5771,"end":5785,"loc":{"start":{"line":181,"column":66},"end":{"line":181,"column":80}},"object":{"type":"Identifier","start":5771,"end":5780,"loc":{"start":{"line":181,"column":66},"end":{"line":181,"column":75}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":5781,"end":5784,"loc":{"start":{"line":181,"column":76},"end":{"line":181,"column":79}},"name":"key"},"computed":true},"operator":"===","right":{"type":"MemberExpression","start":5790,"end":5806,"loc":{"start":{"line":181,"column":85},"end":{"line":181,"column":101}},"object":{"type":"Identifier","start":5790,"end":5797,"loc":{"start":{"line":181,"column":85},"end":{"line":181,"column":92}},"name":"options"},"property":{"type":"Identifier","start":5798,"end":5806,"loc":{"start":{"line":181,"column":93},"end":{"line":181,"column":101}},"name":"protocol"},"computed":false}}}]}}},"consequent":{"type":"BlockStatement","start":5809,"end":5897,"loc":{"start":{"line":181,"column":104},"end":{"line":184,"column":5}},"body":[{"type":"ExpressionStatement","start":5817,"end":5872,"loc":{"start":{"line":182,"column":6},"end":{"line":182,"column":61}},"expression":{"type":"AssignmentExpression","start":5817,"end":5872,"loc":{"start":{"line":182,"column":6},"end":{"line":182,"column":61}},"operator":"=","left":{"type":"MemberExpression","start":5817,"end":5837,"loc":{"start":{"line":182,"column":6},"end":{"line":182,"column":26}},"object":{"type":"ThisExpression","start":5817,"end":5821,"loc":{"start":{"line":182,"column":6},"end":{"line":182,"column":10}}},"property":{"type":"Identifier","start":5822,"end":5837,"loc":{"start":{"line":182,"column":11},"end":{"line":182,"column":26}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":5840,"end":5872,"loc":{"start":{"line":182,"column":29},"end":{"line":182,"column":61}},"value":"unsupported protocol specified","raw":"'unsupported protocol specified'"}}},{"type":"ReturnStatement","start":5879,"end":5891,"loc":{"start":{"line":183,"column":6},"end":{"line":183,"column":18}},"argument":{"type":"Literal","start":5886,"end":5891,"loc":{"start":{"line":183,"column":13},"end":{"line":183,"column":18}},"value":false,"raw":"false"}}]},"alternate":null,"comments":[{"type":"Line","value":" validate protocol","start":5592,"end":5612,"loc":{"start":{"line":179,"column":4},"end":{"line":179,"column":24}}},{"type":"Line","value":" @todo this validation should not be conditional once the protocol field is mandatory","start":5617,"end":5704,"loc":{"start":{"line":180,"column":4},"end":{"line":180,"column":91}}}]},{"type":"IfStatement","start":6044,"end":6117,"loc":{"start":{"line":189,"column":4},"end":{"line":191,"column":5}},"test":{"type":"BinaryExpression","start":6048,"end":6090,"loc":{"start":{"line":189,"column":8},"end":{"line":189,"column":50}},"left":{"type":"MemberExpression","start":6048,"end":6064,"loc":{"start":{"line":189,"column":8},"end":{"line":189,"column":24}},"object":{"type":"Identifier","start":6048,"end":6055,"loc":{"start":{"line":189,"column":8},"end":{"line":189,"column":15}},"name":"options"},"property":{"type":"Identifier","start":6056,"end":6064,"loc":{"start":{"line":189,"column":16},"end":{"line":189,"column":24}},"name":"protocol"},"computed":false},"operator":"===","right":{"type":"MemberExpression","start":6069,"end":6090,"loc":{"start":{"line":189,"column":29},"end":{"line":189,"column":50}},"object":{"type":"Identifier","start":6069,"end":6078,"loc":{"start":{"line":189,"column":29},"end":{"line":189,"column":38}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":6079,"end":6090,"loc":{"start":{"line":189,"column":39},"end":{"line":189,"column":50}},"name":"s3Multipart"},"computed":false}},"consequent":{"type":"BlockStatement","start":6092,"end":6117,"loc":{"start":{"line":189,"column":52},"end":{"line":191,"column":5}},"body":[{"type":"ReturnStatement","start":6100,"end":6111,"loc":{"start":{"line":190,"column":6},"end":{"line":190,"column":17}},"argument":{"type":"Literal","start":6107,"end":6111,"loc":{"start":{"line":190,"column":13},"end":{"line":190,"column":17}},"value":true,"raw":"true"}}]},"alternate":null,"comments":[{"type":"Line","value":" s3 uploads don't require upload destination","start":5903,"end":5949,"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":50}}},{"type":"Line","value":" validation, because the destination is determined","start":5954,"end":6006,"loc":{"start":{"line":187,"column":4},"end":{"line":187,"column":56}}},{"type":"Line","value":" by the server's s3 config","start":6011,"end":6039,"loc":{"start":{"line":188,"column":4},"end":{"line":188,"column":32}}}]},{"type":"IfStatement","start":6123,"end":6250,"loc":{"start":{"line":193,"column":4},"end":{"line":196,"column":5}},"test":{"type":"LogicalExpression","start":6127,"end":6166,"loc":{"start":{"line":193,"column":8},"end":{"line":193,"column":47}},"left":{"type":"UnaryExpression","start":6127,"end":6144,"loc":{"start":{"line":193,"column":8},"end":{"line":193,"column":25}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":6128,"end":6144,"loc":{"start":{"line":193,"column":9},"end":{"line":193,"column":25}},"object":{"type":"Identifier","start":6128,"end":6135,"loc":{"start":{"line":193,"column":9},"end":{"line":193,"column":16}},"name":"options"},"property":{"type":"Identifier","start":6136,"end":6144,"loc":{"start":{"line":193,"column":17},"end":{"line":193,"column":25}},"name":"endpoint"},"computed":false}},"operator":"&&","right":{"type":"UnaryExpression","start":6148,"end":6166,"loc":{"start":{"line":193,"column":29},"end":{"line":193,"column":47}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":6149,"end":6166,"loc":{"start":{"line":193,"column":30},"end":{"line":193,"column":47}},"object":{"type":"Identifier","start":6149,"end":6156,"loc":{"start":{"line":193,"column":30},"end":{"line":193,"column":37}},"name":"options"},"property":{"type":"Identifier","start":6157,"end":6166,"loc":{"start":{"line":193,"column":38},"end":{"line":193,"column":47}},"name":"uploadUrl"},"computed":false}}},"consequent":{"type":"BlockStatement","start":6168,"end":6250,"loc":{"start":{"line":193,"column":49},"end":{"line":196,"column":5}},"body":[{"type":"ExpressionStatement","start":6176,"end":6225,"loc":{"start":{"line":194,"column":6},"end":{"line":194,"column":55}},"expression":{"type":"AssignmentExpression","start":6176,"end":6225,"loc":{"start":{"line":194,"column":6},"end":{"line":194,"column":55}},"operator":"=","left":{"type":"MemberExpression","start":6176,"end":6196,"loc":{"start":{"line":194,"column":6},"end":{"line":194,"column":26}},"object":{"type":"ThisExpression","start":6176,"end":6180,"loc":{"start":{"line":194,"column":6},"end":{"line":194,"column":10}}},"property":{"type":"Identifier","start":6181,"end":6196,"loc":{"start":{"line":194,"column":11},"end":{"line":194,"column":26}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":6199,"end":6225,"loc":{"start":{"line":194,"column":29},"end":{"line":194,"column":55}},"value":"no destination specified","raw":"'no destination specified'"}}},{"type":"ReturnStatement","start":6232,"end":6244,"loc":{"start":{"line":195,"column":6},"end":{"line":195,"column":18}},"argument":{"type":"Literal","start":6239,"end":6244,"loc":{"start":{"line":195,"column":13},"end":{"line":195,"column":18}},"value":false,"raw":"false"}}]},"alternate":null},{"type":"VariableDeclaration","start":6256,"end":6350,"loc":{"start":{"line":198,"column":4},"end":{"line":198,"column":98}},"declarations":[{"type":"VariableDeclarator","start":6262,"end":6350,"loc":{"start":{"line":198,"column":10},"end":{"line":198,"column":98}},"id":{"type":"Identifier","start":6262,"end":6275,"loc":{"start":{"line":198,"column":10},"end":{"line":198,"column":23}},"name":"validatorOpts"},"init":{"type":"ObjectExpression","start":6278,"end":6350,"loc":{"start":{"line":198,"column":26},"end":{"line":198,"column":98}},"properties":[{"type":"Property","start":6280,"end":6302,"loc":{"start":{"line":198,"column":28},"end":{"line":198,"column":50}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6280,"end":6296,"loc":{"start":{"line":198,"column":28},"end":{"line":198,"column":44}},"name":"require_protocol"},"value":{"type":"Literal","start":6298,"end":6302,"loc":{"start":{"line":198,"column":46},"end":{"line":198,"column":50}},"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":6304,"end":6348,"loc":{"start":{"line":198,"column":52},"end":{"line":198,"column":96}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6304,"end":6315,"loc":{"start":{"line":198,"column":52},"end":{"line":198,"column":63}},"name":"require_tld"},"value":{"type":"UnaryExpression","start":6317,"end":6348,"loc":{"start":{"line":198,"column":65},"end":{"line":198,"column":96}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":6318,"end":6348,"loc":{"start":{"line":198,"column":66},"end":{"line":198,"column":96}},"object":{"type":"MemberExpression","start":6318,"end":6342,"loc":{"start":{"line":198,"column":66},"end":{"line":198,"column":90}},"object":{"type":"Identifier","start":6318,"end":6325,"loc":{"start":{"line":198,"column":66},"end":{"line":198,"column":73}},"name":"options"},"property":{"type":"Identifier","start":6326,"end":6342,"loc":{"start":{"line":198,"column":74},"end":{"line":198,"column":90}},"name":"companionOptions"},"computed":false},"property":{"type":"Identifier","start":6343,"end":6348,"loc":{"start":{"line":198,"column":91},"end":{"line":198,"column":96}},"name":"debug"},"computed":false}},"kind":"init"}]}}],"kind":"const"},{"type":"ReturnStatement","start":6355,"end":6832,"loc":{"start":{"line":199,"column":4},"end":{"line":212,"column":6}},"argument":{"type":"CallExpression","start":6362,"end":6832,"loc":{"start":{"line":199,"column":11},"end":{"line":212,"column":6}},"callee":{"type":"MemberExpression","start":6362,"end":6405,"loc":{"start":{"line":199,"column":11},"end":{"line":199,"column":54}},"object":{"type":"ArrayExpression","start":6362,"end":6399,"loc":{"start":{"line":199,"column":11},"end":{"line":199,"column":48}},"elements":[{"type":"MemberExpression","start":6363,"end":6379,"loc":{"start":{"line":199,"column":12},"end":{"line":199,"column":28}},"object":{"type":"Identifier","start":6363,"end":6370,"loc":{"start":{"line":199,"column":12},"end":{"line":199,"column":19}},"name":"options"},"property":{"type":"Identifier","start":6371,"end":6379,"loc":{"start":{"line":199,"column":20},"end":{"line":199,"column":28}},"name":"endpoint"},"computed":false},{"type":"MemberExpression","start":6381,"end":6398,"loc":{"start":{"line":199,"column":30},"end":{"line":199,"column":47}},"object":{"type":"Identifier","start":6381,"end":6388,"loc":{"start":{"line":199,"column":30},"end":{"line":199,"column":37}},"name":"options"},"property":{"type":"Identifier","start":6389,"end":6398,"loc":{"start":{"line":199,"column":38},"end":{"line":199,"column":47}},"name":"uploadUrl"},"computed":false}]},"property":{"type":"Identifier","start":6400,"end":6405,"loc":{"start":{"line":199,"column":49},"end":{"line":199,"column":54}},"name":"every"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":6406,"end":6831,"loc":{"start":{"line":199,"column":55},"end":{"line":212,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6407,"end":6410,"loc":{"start":{"line":199,"column":56},"end":{"line":199,"column":59}},"name":"url"}],"body":{"type":"BlockStatement","start":6415,"end":6831,"loc":{"start":{"line":199,"column":64},"end":{"line":212,"column":5}},"body":[{"type":"IfStatement","start":6423,"end":6559,"loc":{"start":{"line":200,"column":6},"end":{"line":203,"column":7}},"test":{"type":"LogicalExpression","start":6427,"end":6470,"loc":{"start":{"line":200,"column":10},"end":{"line":200,"column":53}},"left":{"type":"Identifier","start":6427,"end":6430,"loc":{"start":{"line":200,"column":10},"end":{"line":200,"column":13}},"name":"url"},"operator":"&&","right":{"type":"UnaryExpression","start":6434,"end":6470,"loc":{"start":{"line":200,"column":17},"end":{"line":200,"column":53}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":6435,"end":6470,"loc":{"start":{"line":200,"column":18},"end":{"line":200,"column":53}},"callee":{"type":"MemberExpression","start":6435,"end":6450,"loc":{"start":{"line":200,"column":18},"end":{"line":200,"column":33}},"object":{"type":"Identifier","start":6435,"end":6444,"loc":{"start":{"line":200,"column":18},"end":{"line":200,"column":27}},"name":"validator"},"property":{"type":"Identifier","start":6445,"end":6450,"loc":{"start":{"line":200,"column":28},"end":{"line":200,"column":33}},"name":"isURL"},"computed":false},"arguments":[{"type":"Identifier","start":6451,"end":6454,"loc":{"start":{"line":200,"column":34},"end":{"line":200,"column":37}},"name":"url"},{"type":"Identifier","start":6456,"end":6469,"loc":{"start":{"line":200,"column":39},"end":{"line":200,"column":52}},"name":"validatorOpts"}]}}},"consequent":{"type":"BlockStatement","start":6472,"end":6559,"loc":{"start":{"line":200,"column":55},"end":{"line":203,"column":7}},"body":[{"type":"ExpressionStatement","start":6482,"end":6530,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":56}},"expression":{"type":"AssignmentExpression","start":6482,"end":6530,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":56}},"operator":"=","left":{"type":"MemberExpression","start":6482,"end":6502,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":28}},"object":{"type":"ThisExpression","start":6482,"end":6486,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":12}}},"property":{"type":"Identifier","start":6487,"end":6502,"loc":{"start":{"line":201,"column":13},"end":{"line":201,"column":28}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":6505,"end":6530,"loc":{"start":{"line":201,"column":31},"end":{"line":201,"column":56}},"value":"invalid destination url","raw":"'invalid destination url'"}}},{"type":"ReturnStatement","start":6539,"end":6551,"loc":{"start":{"line":202,"column":8},"end":{"line":202,"column":20}},"argument":{"type":"Literal","start":6546,"end":6551,"loc":{"start":{"line":202,"column":15},"end":{"line":202,"column":20}},"value":false,"raw":"false"}}]},"alternate":null},{"type":"VariableDeclaration","start":6567,"end":6622,"loc":{"start":{"line":205,"column":6},"end":{"line":205,"column":61}},"declarations":[{"type":"VariableDeclarator","start":6573,"end":6622,"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":61}},"id":{"type":"Identifier","start":6573,"end":6584,"loc":{"start":{"line":205,"column":12},"end":{"line":205,"column":23}},"name":"allowedUrls"},"init":{"type":"MemberExpression","start":6587,"end":6622,"loc":{"start":{"line":205,"column":26},"end":{"line":205,"column":61}},"object":{"type":"MemberExpression","start":6587,"end":6611,"loc":{"start":{"line":205,"column":26},"end":{"line":205,"column":50}},"object":{"type":"Identifier","start":6587,"end":6594,"loc":{"start":{"line":205,"column":26},"end":{"line":205,"column":33}},"name":"options"},"property":{"type":"Identifier","start":6595,"end":6611,"loc":{"start":{"line":205,"column":34},"end":{"line":205,"column":50}},"name":"companionOptions"},"computed":false},"property":{"type":"Identifier","start":6612,"end":6622,"loc":{"start":{"line":205,"column":51},"end":{"line":205,"column":61}},"name":"uploadUrls"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":6629,"end":6806,"loc":{"start":{"line":206,"column":6},"end":{"line":209,"column":7}},"test":{"type":"LogicalExpression","start":6633,"end":6682,"loc":{"start":{"line":206,"column":10},"end":{"line":206,"column":59}},"left":{"type":"LogicalExpression","start":6633,"end":6651,"loc":{"start":{"line":206,"column":10},"end":{"line":206,"column":28}},"left":{"type":"Identifier","start":6633,"end":6644,"loc":{"start":{"line":206,"column":10},"end":{"line":206,"column":21}},"name":"allowedUrls"},"operator":"&&","right":{"type":"Identifier","start":6648,"end":6651,"loc":{"start":{"line":206,"column":25},"end":{"line":206,"column":28}},"name":"url"}},"operator":"&&","right":{"type":"UnaryExpression","start":6655,"end":6682,"loc":{"start":{"line":206,"column":32},"end":{"line":206,"column":59}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":6656,"end":6682,"loc":{"start":{"line":206,"column":33},"end":{"line":206,"column":59}},"callee":{"type":"Identifier","start":6656,"end":6664,"loc":{"start":{"line":206,"column":33},"end":{"line":206,"column":41}},"name":"hasMatch"},"arguments":[{"type":"Identifier","start":6665,"end":6668,"loc":{"start":{"line":206,"column":42},"end":{"line":206,"column":45}},"name":"url"},{"type":"Identifier","start":6670,"end":6681,"loc":{"start":{"line":206,"column":47},"end":{"line":206,"column":58}},"name":"allowedUrls"}]}}},"consequent":{"type":"BlockStatement","start":6684,"end":6806,"loc":{"start":{"line":206,"column":61},"end":{"line":209,"column":7}},"body":[{"type":"ExpressionStatement","start":6694,"end":6777,"loc":{"start":{"line":207,"column":8},"end":{"line":207,"column":91}},"expression":{"type":"AssignmentExpression","start":6694,"end":6777,"loc":{"start":{"line":207,"column":8},"end":{"line":207,"column":91}},"operator":"=","left":{"type":"MemberExpression","start":6694,"end":6714,"loc":{"start":{"line":207,"column":8},"end":{"line":207,"column":28}},"object":{"type":"ThisExpression","start":6694,"end":6698,"loc":{"start":{"line":207,"column":8},"end":{"line":207,"column":12}}},"property":{"type":"Identifier","start":6699,"end":6714,"loc":{"start":{"line":207,"column":13},"end":{"line":207,"column":28}},"name":"_errRespMessage"},"computed":false},"right":{"type":"Literal","start":6717,"end":6777,"loc":{"start":{"line":207,"column":31},"end":{"line":207,"column":91}},"value":"upload destination does not match any allowed destinations","raw":"'upload destination does not match any allowed destinations'"}}},{"type":"ReturnStatement","start":6786,"end":6798,"loc":{"start":{"line":208,"column":8},"end":{"line":208,"column":20}},"argument":{"type":"Literal","start":6793,"end":6798,"loc":{"start":{"line":208,"column":15},"end":{"line":208,"column":20}},"value":false,"raw":"false"}}]},"alternate":null},{"type":"ReturnStatement","start":6814,"end":6825,"loc":{"start":{"line":211,"column":6},"end":{"line":211,"column":17}},"argument":{"type":"Literal","start":6821,"end":6825,"loc":{"start":{"line":211,"column":13},"end":{"line":211,"column":17}},"value":true,"raw":"true"}}]}}]}}],"comments":[{"type":"Block","value":"*\n   * Validate the options passed down to the uplaoder\n   *\n   * @param {UploaderOptions} options\n   * @returns {boolean}\n   ","start":4500,"end":4630,"loc":{"start":{"line":140,"column":2},"end":{"line":145,"column":5}}}]}}},{"type":"MethodDefinition","start":6840,"end":6897,"loc":{"start":{"line":215,"column":2},"end":{"line":217,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":6840,"end":6848,"loc":{"start":{"line":215,"column":2},"end":{"line":215,"column":10}},"name":"hasError"},"value":{"type":"FunctionExpression","start":6849,"end":6897,"loc":{"start":{"line":215,"column":11},"end":{"line":217,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":6852,"end":6897,"loc":{"start":{"line":215,"column":14},"end":{"line":217,"column":3}},"body":[{"type":"ReturnStatement","start":6858,"end":6893,"loc":{"start":{"line":216,"column":4},"end":{"line":216,"column":39}},"argument":{"type":"BinaryExpression","start":6865,"end":6893,"loc":{"start":{"line":216,"column":11},"end":{"line":216,"column":39}},"left":{"type":"MemberExpression","start":6865,"end":6885,"loc":{"start":{"line":216,"column":11},"end":{"line":216,"column":31}},"object":{"type":"ThisExpression","start":6865,"end":6869,"loc":{"start":{"line":216,"column":11},"end":{"line":216,"column":15}}},"property":{"type":"Identifier","start":6870,"end":6885,"loc":{"start":{"line":216,"column":16},"end":{"line":216,"column":31}},"name":"_errRespMessage"},"computed":false},"operator":"!=","right":{"type":"Literal","start":6889,"end":6893,"loc":{"start":{"line":216,"column":35},"end":{"line":216,"column":39}},"value":null,"raw":"null"}}}]}}},{"type":"MethodDefinition","start":7120,"end":7188,"loc":{"start":{"line":224,"column":2},"end":{"line":226,"column":3}},"kind":"get","static":false,"computed":false,"key":{"type":"Identifier","start":7124,"end":7134,"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":16}},"name":"shortToken"},"value":{"type":"FunctionExpression","start":7135,"end":7188,"loc":{"start":{"line":224,"column":17},"end":{"line":226,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":7138,"end":7188,"loc":{"start":{"line":224,"column":20},"end":{"line":226,"column":3}},"body":[{"type":"ReturnStatement","start":7144,"end":7184,"loc":{"start":{"line":225,"column":4},"end":{"line":225,"column":44}},"argument":{"type":"CallExpression","start":7151,"end":7184,"loc":{"start":{"line":225,"column":11},"end":{"line":225,"column":44}},"callee":{"type":"MemberExpression","start":7151,"end":7172,"loc":{"start":{"line":225,"column":11},"end":{"line":225,"column":32}},"object":{"type":"Identifier","start":7151,"end":7159,"loc":{"start":{"line":225,"column":11},"end":{"line":225,"column":19}},"name":"Uploader"},"property":{"type":"Identifier","start":7160,"end":7172,"loc":{"start":{"line":225,"column":20},"end":{"line":225,"column":32}},"name":"shortenToken"},"computed":false},"arguments":[{"type":"MemberExpression","start":7173,"end":7183,"loc":{"start":{"line":225,"column":33},"end":{"line":225,"column":43}},"object":{"type":"ThisExpression","start":7173,"end":7177,"loc":{"start":{"line":225,"column":33},"end":{"line":225,"column":37}}},"property":{"type":"Identifier","start":7178,"end":7183,"loc":{"start":{"line":225,"column":38},"end":{"line":225,"column":43}},"name":"token"},"computed":false}]}}],"comments":[{"type":"Block","value":"*\n   * returns a substring of the token. Used as traceId for logging\n   * we avoid using the entire token because this is meant to be a short term\n   * access token between uppy client and companion websocket\n   ","start":6901,"end":7117,"loc":{"start":{"line":219,"column":2},"end":{"line":223,"column":5}}}]}}},{"type":"MethodDefinition","start":7241,"end":7420,"loc":{"start":{"line":232,"column":2},"end":{"line":235,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":7241,"end":7254,"loc":{"start":{"line":232,"column":2},"end":{"line":232,"column":15}},"name":"onSocketReady"},"value":{"type":"FunctionExpression","start":7255,"end":7420,"loc":{"start":{"line":232,"column":16},"end":{"line":235,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7256,"end":7264,"loc":{"start":{"line":232,"column":17},"end":{"line":232,"column":25}},"name":"callback"}],"body":{"type":"BlockStatement","start":7266,"end":7420,"loc":{"start":{"line":232,"column":27},"end":{"line":235,"column":3}},"body":[{"type":"ExpressionStatement","start":7272,"end":7332,"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":64}},"expression":{"type":"CallExpression","start":7272,"end":7332,"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":64}},"callee":{"type":"MemberExpression","start":7272,"end":7286,"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":18}},"object":{"type":"CallExpression","start":7272,"end":7281,"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":13}},"callee":{"type":"Identifier","start":7272,"end":7279,"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":7282,"end":7286,"loc":{"start":{"line":233,"column":14},"end":{"line":233,"column":18}},"name":"once"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7287,"end":7313,"loc":{"start":{"line":233,"column":19},"end":{"line":233,"column":45}},"expressions":[{"type":"MemberExpression","start":7301,"end":7311,"loc":{"start":{"line":233,"column":33},"end":{"line":233,"column":43}},"object":{"type":"ThisExpression","start":7301,"end":7305,"loc":{"start":{"line":233,"column":33},"end":{"line":233,"column":37}}},"property":{"type":"Identifier","start":7306,"end":7311,"loc":{"start":{"line":233,"column":38},"end":{"line":233,"column":43}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":7288,"end":7299,"loc":{"start":{"line":233,"column":20},"end":{"line":233,"column":31}},"value":{"raw":"connection:","cooked":"connection:"},"tail":false},{"type":"TemplateElement","start":7312,"end":7312,"loc":{"start":{"line":233,"column":44},"end":{"line":233,"column":44}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"ArrowFunctionExpression","start":7315,"end":7331,"loc":{"start":{"line":233,"column":47},"end":{"line":233,"column":63}},"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":7321,"end":7331,"loc":{"start":{"line":233,"column":53},"end":{"line":233,"column":63}},"callee":{"type":"Identifier","start":7321,"end":7329,"loc":{"start":{"line":233,"column":53},"end":{"line":233,"column":61}},"name":"callback"},"arguments":[]}}]}},{"type":"ExpressionStatement","start":7337,"end":7416,"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":83}},"expression":{"type":"CallExpression","start":7337,"end":7416,"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":83}},"callee":{"type":"MemberExpression","start":7337,"end":7349,"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":16}},"object":{"type":"Identifier","start":7337,"end":7343,"loc":{"start":{"line":234,"column":4},"end":{"line":234,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":7344,"end":7349,"loc":{"start":{"line":234,"column":11},"end":{"line":234,"column":16}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":7350,"end":7374,"loc":{"start":{"line":234,"column":17},"end":{"line":234,"column":41}},"value":"waiting for connection","raw":"'waiting for connection'"},{"type":"Literal","start":7376,"end":7398,"loc":{"start":{"line":234,"column":43},"end":{"line":234,"column":65}},"value":"uploader.socket.wait","raw":"'uploader.socket.wait'"},{"type":"MemberExpression","start":7400,"end":7415,"loc":{"start":{"line":234,"column":67},"end":{"line":234,"column":82}},"object":{"type":"ThisExpression","start":7400,"end":7404,"loc":{"start":{"line":234,"column":67},"end":{"line":234,"column":71}}},"property":{"type":"Identifier","start":7405,"end":7415,"loc":{"start":{"line":234,"column":72},"end":{"line":234,"column":82}},"name":"shortToken"},"computed":false}]}}],"comments":[{"type":"Block","value":"*\n   *\n   * @param {function} callback\n   ","start":7192,"end":7238,"loc":{"start":{"line":228,"column":2},"end":{"line":231,"column":5}}}]}}},{"type":"MethodDefinition","start":7424,"end":7803,"loc":{"start":{"line":237,"column":2},"end":{"line":247,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":7424,"end":7431,"loc":{"start":{"line":237,"column":2},"end":{"line":237,"column":9}},"name":"cleanUp"},"value":{"type":"FunctionExpression","start":7432,"end":7803,"loc":{"start":{"line":237,"column":10},"end":{"line":247,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":7435,"end":7803,"loc":{"start":{"line":237,"column":13},"end":{"line":247,"column":3}},"body":[{"type":"ExpressionStatement","start":7441,"end":7599,"loc":{"start":{"line":238,"column":4},"end":{"line":242,"column":6}},"expression":{"type":"CallExpression","start":7441,"end":7599,"loc":{"start":{"line":238,"column":4},"end":{"line":242,"column":6}},"callee":{"type":"MemberExpression","start":7441,"end":7450,"loc":{"start":{"line":238,"column":4},"end":{"line":238,"column":13}},"object":{"type":"Identifier","start":7441,"end":7443,"loc":{"start":{"line":238,"column":4},"end":{"line":238,"column":6}},"name":"fs"},"property":{"type":"Identifier","start":7444,"end":7450,"loc":{"start":{"line":238,"column":7},"end":{"line":238,"column":13}},"name":"unlink"},"computed":false},"arguments":[{"type":"MemberExpression","start":7451,"end":7460,"loc":{"start":{"line":238,"column":14},"end":{"line":238,"column":23}},"object":{"type":"ThisExpression","start":7451,"end":7455,"loc":{"start":{"line":238,"column":14},"end":{"line":238,"column":18}}},"property":{"type":"Identifier","start":7456,"end":7460,"loc":{"start":{"line":238,"column":19},"end":{"line":238,"column":23}},"name":"path"},"computed":false},{"type":"ArrowFunctionExpression","start":7462,"end":7598,"loc":{"start":{"line":238,"column":25},"end":{"line":242,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7463,"end":7466,"loc":{"start":{"line":238,"column":26},"end":{"line":238,"column":29}},"name":"err"}],"body":{"type":"BlockStatement","start":7471,"end":7598,"loc":{"start":{"line":238,"column":34},"end":{"line":242,"column":5}},"body":[{"type":"IfStatement","start":7479,"end":7592,"loc":{"start":{"line":239,"column":6},"end":{"line":241,"column":7}},"test":{"type":"Identifier","start":7483,"end":7486,"loc":{"start":{"line":239,"column":10},"end":{"line":239,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":7488,"end":7592,"loc":{"start":{"line":239,"column":15},"end":{"line":241,"column":7}},"body":[{"type":"ExpressionStatement","start":7498,"end":7584,"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":94}},"expression":{"type":"CallExpression","start":7498,"end":7584,"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":94}},"callee":{"type":"MemberExpression","start":7498,"end":7510,"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":20}},"object":{"type":"Identifier","start":7498,"end":7504,"loc":{"start":{"line":240,"column":8},"end":{"line":240,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":7505,"end":7510,"loc":{"start":{"line":240,"column":15},"end":{"line":240,"column":20}},"name":"error"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7511,"end":7557,"loc":{"start":{"line":240,"column":21},"end":{"line":240,"column":67}},"expressions":[{"type":"MemberExpression","start":7534,"end":7543,"loc":{"start":{"line":240,"column":44},"end":{"line":240,"column":53}},"object":{"type":"ThisExpression","start":7534,"end":7538,"loc":{"start":{"line":240,"column":44},"end":{"line":240,"column":48}}},"property":{"type":"Identifier","start":7539,"end":7543,"loc":{"start":{"line":240,"column":49},"end":{"line":240,"column":53}},"name":"path"},"computed":false},{"type":"Identifier","start":7552,"end":7555,"loc":{"start":{"line":240,"column":62},"end":{"line":240,"column":65}},"name":"err"}],"quasis":[{"type":"TemplateElement","start":7512,"end":7532,"loc":{"start":{"line":240,"column":22},"end":{"line":240,"column":42}},"value":{"raw":"cleanup failed for: ","cooked":"cleanup failed for: "},"tail":false},{"type":"TemplateElement","start":7544,"end":7550,"loc":{"start":{"line":240,"column":54},"end":{"line":240,"column":60}},"value":{"raw":" err: ","cooked":" err: "},"tail":false},{"type":"TemplateElement","start":7556,"end":7556,"loc":{"start":{"line":240,"column":66},"end":{"line":240,"column":66}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":7559,"end":7583,"loc":{"start":{"line":240,"column":69},"end":{"line":240,"column":93}},"value":"uploader.cleanup.error","raw":"'uploader.cleanup.error'"}]}}]},"alternate":null}]}}]}},{"type":"ExpressionStatement","start":7604,"end":7655,"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":55}},"expression":{"type":"CallExpression","start":7604,"end":7655,"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":55}},"callee":{"type":"MemberExpression","start":7604,"end":7632,"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":32}},"object":{"type":"CallExpression","start":7604,"end":7613,"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":13}},"callee":{"type":"Identifier","start":7604,"end":7611,"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":7614,"end":7632,"loc":{"start":{"line":243,"column":14},"end":{"line":243,"column":32}},"name":"removeAllListeners"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7633,"end":7654,"loc":{"start":{"line":243,"column":33},"end":{"line":243,"column":54}},"expressions":[{"type":"MemberExpression","start":7642,"end":7652,"loc":{"start":{"line":243,"column":42},"end":{"line":243,"column":52}},"object":{"type":"ThisExpression","start":7642,"end":7646,"loc":{"start":{"line":243,"column":42},"end":{"line":243,"column":46}}},"property":{"type":"Identifier","start":7647,"end":7652,"loc":{"start":{"line":243,"column":47},"end":{"line":243,"column":52}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":7634,"end":7640,"loc":{"start":{"line":243,"column":34},"end":{"line":243,"column":40}},"value":{"raw":"pause:","cooked":"pause:"},"tail":false},{"type":"TemplateElement","start":7653,"end":7653,"loc":{"start":{"line":243,"column":53},"end":{"line":243,"column":53}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":7660,"end":7712,"loc":{"start":{"line":244,"column":4},"end":{"line":244,"column":56}},"expression":{"type":"CallExpression","start":7660,"end":7712,"loc":{"start":{"line":244,"column":4},"end":{"line":244,"column":56}},"callee":{"type":"MemberExpression","start":7660,"end":7688,"loc":{"start":{"line":244,"column":4},"end":{"line":244,"column":32}},"object":{"type":"CallExpression","start":7660,"end":7669,"loc":{"start":{"line":244,"column":4},"end":{"line":244,"column":13}},"callee":{"type":"Identifier","start":7660,"end":7667,"loc":{"start":{"line":244,"column":4},"end":{"line":244,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":7670,"end":7688,"loc":{"start":{"line":244,"column":14},"end":{"line":244,"column":32}},"name":"removeAllListeners"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7689,"end":7711,"loc":{"start":{"line":244,"column":33},"end":{"line":244,"column":55}},"expressions":[{"type":"MemberExpression","start":7699,"end":7709,"loc":{"start":{"line":244,"column":43},"end":{"line":244,"column":53}},"object":{"type":"ThisExpression","start":7699,"end":7703,"loc":{"start":{"line":244,"column":43},"end":{"line":244,"column":47}}},"property":{"type":"Identifier","start":7704,"end":7709,"loc":{"start":{"line":244,"column":48},"end":{"line":244,"column":53}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":7690,"end":7697,"loc":{"start":{"line":244,"column":34},"end":{"line":244,"column":41}},"value":{"raw":"resume:","cooked":"resume:"},"tail":false},{"type":"TemplateElement","start":7710,"end":7710,"loc":{"start":{"line":244,"column":54},"end":{"line":244,"column":54}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":7717,"end":7769,"loc":{"start":{"line":245,"column":4},"end":{"line":245,"column":56}},"expression":{"type":"CallExpression","start":7717,"end":7769,"loc":{"start":{"line":245,"column":4},"end":{"line":245,"column":56}},"callee":{"type":"MemberExpression","start":7717,"end":7745,"loc":{"start":{"line":245,"column":4},"end":{"line":245,"column":32}},"object":{"type":"CallExpression","start":7717,"end":7726,"loc":{"start":{"line":245,"column":4},"end":{"line":245,"column":13}},"callee":{"type":"Identifier","start":7717,"end":7724,"loc":{"start":{"line":245,"column":4},"end":{"line":245,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":7727,"end":7745,"loc":{"start":{"line":245,"column":14},"end":{"line":245,"column":32}},"name":"removeAllListeners"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7746,"end":7768,"loc":{"start":{"line":245,"column":33},"end":{"line":245,"column":55}},"expressions":[{"type":"MemberExpression","start":7756,"end":7766,"loc":{"start":{"line":245,"column":43},"end":{"line":245,"column":53}},"object":{"type":"ThisExpression","start":7756,"end":7760,"loc":{"start":{"line":245,"column":43},"end":{"line":245,"column":47}}},"property":{"type":"Identifier","start":7761,"end":7766,"loc":{"start":{"line":245,"column":48},"end":{"line":245,"column":53}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":7747,"end":7754,"loc":{"start":{"line":245,"column":34},"end":{"line":245,"column":41}},"value":{"raw":"cancel:","cooked":"cancel:"},"tail":false},{"type":"TemplateElement","start":7767,"end":7767,"loc":{"start":{"line":245,"column":54},"end":{"line":245,"column":54}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":7774,"end":7799,"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":29}},"expression":{"type":"AssignmentExpression","start":7774,"end":7799,"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":29}},"operator":"=","left":{"type":"MemberExpression","start":7774,"end":7792,"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":22}},"object":{"type":"ThisExpression","start":7774,"end":7778,"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":8}}},"property":{"type":"Identifier","start":7779,"end":7792,"loc":{"start":{"line":246,"column":9},"end":{"line":246,"column":22}},"name":"uploadStopped"},"computed":false},"right":{"type":"Literal","start":7795,"end":7799,"loc":{"start":{"line":246,"column":25},"end":{"line":246,"column":29}},"value":true,"raw":"true"}}}]}}},{"type":"MethodDefinition","start":7895,"end":9427,"loc":{"start":{"line":254,"column":2},"end":{"line":303,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":7895,"end":7906,"loc":{"start":{"line":254,"column":2},"end":{"line":254,"column":13}},"name":"handleChunk"},"value":{"type":"FunctionExpression","start":7907,"end":9427,"loc":{"start":{"line":254,"column":14},"end":{"line":303,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7908,"end":7911,"loc":{"start":{"line":254,"column":15},"end":{"line":254,"column":18}},"name":"err"},{"type":"Identifier","start":7913,"end":7918,"loc":{"start":{"line":254,"column":20},"end":{"line":254,"column":25}},"name":"chunk"}],"body":{"type":"BlockStatement","start":7920,"end":9427,"loc":{"start":{"line":254,"column":27},"end":{"line":303,"column":3}},"body":[{"type":"IfStatement","start":7926,"end":7970,"loc":{"start":{"line":255,"column":4},"end":{"line":257,"column":5}},"test":{"type":"MemberExpression","start":7930,"end":7948,"loc":{"start":{"line":255,"column":8},"end":{"line":255,"column":26}},"object":{"type":"ThisExpression","start":7930,"end":7934,"loc":{"start":{"line":255,"column":8},"end":{"line":255,"column":12}}},"property":{"type":"Identifier","start":7935,"end":7948,"loc":{"start":{"line":255,"column":13},"end":{"line":255,"column":26}},"name":"uploadStopped"},"computed":false},"consequent":{"type":"BlockStatement","start":7950,"end":7970,"loc":{"start":{"line":255,"column":28},"end":{"line":257,"column":5}},"body":[{"type":"ReturnStatement","start":7958,"end":7964,"loc":{"start":{"line":256,"column":6},"end":{"line":256,"column":12}},"argument":null}]},"alternate":null},{"type":"IfStatement","start":7976,"end":8120,"loc":{"start":{"line":259,"column":4},"end":{"line":264,"column":5}},"test":{"type":"Identifier","start":7980,"end":7983,"loc":{"start":{"line":259,"column":8},"end":{"line":259,"column":11}},"name":"err"},"consequent":{"type":"BlockStatement","start":7985,"end":8120,"loc":{"start":{"line":259,"column":13},"end":{"line":264,"column":5}},"body":[{"type":"ExpressionStatement","start":7993,"end":8054,"loc":{"start":{"line":260,"column":6},"end":{"line":260,"column":67}},"expression":{"type":"CallExpression","start":7993,"end":8054,"loc":{"start":{"line":260,"column":6},"end":{"line":260,"column":67}},"callee":{"type":"MemberExpression","start":7993,"end":8005,"loc":{"start":{"line":260,"column":6},"end":{"line":260,"column":18}},"object":{"type":"Identifier","start":7993,"end":7999,"loc":{"start":{"line":260,"column":6},"end":{"line":260,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":8000,"end":8005,"loc":{"start":{"line":260,"column":13},"end":{"line":260,"column":18}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":8006,"end":8009,"loc":{"start":{"line":260,"column":19},"end":{"line":260,"column":22}},"name":"err"},{"type":"Literal","start":8011,"end":8036,"loc":{"start":{"line":260,"column":24},"end":{"line":260,"column":49}},"value":"uploader.download.error","raw":"'uploader.download.error'"},{"type":"MemberExpression","start":8038,"end":8053,"loc":{"start":{"line":260,"column":51},"end":{"line":260,"column":66}},"object":{"type":"ThisExpression","start":8038,"end":8042,"loc":{"start":{"line":260,"column":51},"end":{"line":260,"column":55}}},"property":{"type":"Identifier","start":8043,"end":8053,"loc":{"start":{"line":260,"column":56},"end":{"line":260,"column":66}},"name":"shortToken"},"computed":false}]}},{"type":"ExpressionStatement","start":8061,"end":8080,"loc":{"start":{"line":261,"column":6},"end":{"line":261,"column":25}},"expression":{"type":"CallExpression","start":8061,"end":8080,"loc":{"start":{"line":261,"column":6},"end":{"line":261,"column":25}},"callee":{"type":"MemberExpression","start":8061,"end":8075,"loc":{"start":{"line":261,"column":6},"end":{"line":261,"column":20}},"object":{"type":"ThisExpression","start":8061,"end":8065,"loc":{"start":{"line":261,"column":6},"end":{"line":261,"column":10}}},"property":{"type":"Identifier","start":8066,"end":8075,"loc":{"start":{"line":261,"column":11},"end":{"line":261,"column":20}},"name":"emitError"},"computed":false},"arguments":[{"type":"Identifier","start":8076,"end":8079,"loc":{"start":{"line":261,"column":21},"end":{"line":261,"column":24}},"name":"err"}]}},{"type":"ExpressionStatement","start":8087,"end":8101,"loc":{"start":{"line":262,"column":6},"end":{"line":262,"column":20}},"expression":{"type":"CallExpression","start":8087,"end":8101,"loc":{"start":{"line":262,"column":6},"end":{"line":262,"column":20}},"callee":{"type":"MemberExpression","start":8087,"end":8099,"loc":{"start":{"line":262,"column":6},"end":{"line":262,"column":18}},"object":{"type":"ThisExpression","start":8087,"end":8091,"loc":{"start":{"line":262,"column":6},"end":{"line":262,"column":10}}},"property":{"type":"Identifier","start":8092,"end":8099,"loc":{"start":{"line":262,"column":11},"end":{"line":262,"column":18}},"name":"cleanUp"},"computed":false},"arguments":[]}},{"type":"ReturnStatement","start":8108,"end":8114,"loc":{"start":{"line":263,"column":6},"end":{"line":263,"column":12}},"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":8234,"end":8295,"loc":{"start":{"line":267,"column":4},"end":{"line":267,"column":65}},"declarations":[{"type":"VariableDeclarator","start":8240,"end":8295,"loc":{"start":{"line":267,"column":10},"end":{"line":267,"column":65}},"id":{"type":"Identifier","start":8240,"end":8248,"loc":{"start":{"line":267,"column":10},"end":{"line":267,"column":18}},"name":"protocol"},"init":{"type":"LogicalExpression","start":8251,"end":8295,"loc":{"start":{"line":267,"column":21},"end":{"line":267,"column":65}},"left":{"type":"MemberExpression","start":8251,"end":8272,"loc":{"start":{"line":267,"column":21},"end":{"line":267,"column":42}},"object":{"type":"MemberExpression","start":8251,"end":8263,"loc":{"start":{"line":267,"column":21},"end":{"line":267,"column":33}},"object":{"type":"ThisExpression","start":8251,"end":8255,"loc":{"start":{"line":267,"column":21},"end":{"line":267,"column":25}}},"property":{"type":"Identifier","start":8256,"end":8263,"loc":{"start":{"line":267,"column":26},"end":{"line":267,"column":33}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":8264,"end":8272,"loc":{"start":{"line":267,"column":34},"end":{"line":267,"column":42}},"name":"protocol"},"computed":false},"operator":"||","right":{"type":"MemberExpression","start":8276,"end":8295,"loc":{"start":{"line":267,"column":46},"end":{"line":267,"column":65}},"object":{"type":"Identifier","start":8276,"end":8285,"loc":{"start":{"line":267,"column":46},"end":{"line":267,"column":55}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":8286,"end":8295,"loc":{"start":{"line":267,"column":56},"end":{"line":267,"column":65}},"name":"multipart"},"computed":false}}}],"kind":"const","comments":[{"type":"Line","value":" @todo a default protocol should not be set. We should ensure that the user specifies their protocol.","start":8126,"end":8229,"loc":{"start":{"line":266,"column":4},"end":{"line":266,"column":107}}}]},{"type":"IfStatement","start":8385,"end":9236,"loc":{"start":{"line":270,"column":4},"end":{"line":297,"column":5}},"test":{"type":"BinaryExpression","start":8389,"end":8403,"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":22}},"left":{"type":"Identifier","start":8389,"end":8394,"loc":{"start":{"line":270,"column":8},"end":{"line":270,"column":13}},"name":"chunk"},"operator":"===","right":{"type":"Literal","start":8399,"end":8403,"loc":{"start":{"line":270,"column":18},"end":{"line":270,"column":22}},"value":null,"raw":"null"}},"consequent":{"type":"BlockStatement","start":8405,"end":9236,"loc":{"start":{"line":270,"column":24},"end":{"line":297,"column":5}},"body":[{"type":"ExpressionStatement","start":8413,"end":9198,"loc":{"start":{"line":271,"column":6},"end":{"line":294,"column":8}},"expression":{"type":"CallExpression","start":8413,"end":9198,"loc":{"start":{"line":271,"column":6},"end":{"line":294,"column":8}},"callee":{"type":"MemberExpression","start":8413,"end":8432,"loc":{"start":{"line":271,"column":6},"end":{"line":271,"column":25}},"object":{"type":"MemberExpression","start":8413,"end":8429,"loc":{"start":{"line":271,"column":6},"end":{"line":271,"column":22}},"object":{"type":"ThisExpression","start":8413,"end":8417,"loc":{"start":{"line":271,"column":6},"end":{"line":271,"column":10}}},"property":{"type":"Identifier","start":8418,"end":8429,"loc":{"start":{"line":271,"column":11},"end":{"line":271,"column":22}},"name":"writeStream"},"computed":false},"property":{"type":"Identifier","start":8430,"end":8432,"loc":{"start":{"line":271,"column":23},"end":{"line":271,"column":25}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":8433,"end":8441,"loc":{"start":{"line":271,"column":26},"end":{"line":271,"column":34}},"value":"finish","raw":"'finish'"},{"type":"ArrowFunctionExpression","start":8443,"end":9197,"loc":{"start":{"line":271,"column":36},"end":{"line":294,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8449,"end":9197,"loc":{"start":{"line":271,"column":42},"end":{"line":294,"column":7}},"body":[{"type":"ExpressionStatement","start":8459,"end":8483,"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":32}},"expression":{"type":"AssignmentExpression","start":8459,"end":8483,"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":32}},"operator":"=","left":{"type":"MemberExpression","start":8459,"end":8476,"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":25}},"object":{"type":"ThisExpression","start":8459,"end":8463,"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":12}}},"property":{"type":"Identifier","start":8464,"end":8476,"loc":{"start":{"line":272,"column":13},"end":{"line":272,"column":25}},"name":"streamsEnded"},"computed":false},"right":{"type":"Literal","start":8479,"end":8483,"loc":{"start":{"line":272,"column":28},"end":{"line":272,"column":32}},"value":true,"raw":"true"}}},{"type":"SwitchStatement","start":8492,"end":9189,"loc":{"start":{"line":273,"column":8},"end":{"line":293,"column":9}},"discriminant":{"type":"Identifier","start":8500,"end":8508,"loc":{"start":{"line":273,"column":16},"end":{"line":273,"column":24}},"name":"protocol"},"cases":[{"type":"SwitchCase","start":8522,"end":8657,"loc":{"start":{"line":274,"column":10},"end":{"line":278,"column":17}},"consequent":[{"type":"IfStatement","start":8560,"end":8639,"loc":{"start":{"line":275,"column":12},"end":{"line":277,"column":13}},"test":{"type":"MemberExpression","start":8564,"end":8585,"loc":{"start":{"line":275,"column":16},"end":{"line":275,"column":37}},"object":{"type":"MemberExpression","start":8564,"end":8576,"loc":{"start":{"line":275,"column":16},"end":{"line":275,"column":28}},"object":{"type":"ThisExpression","start":8564,"end":8568,"loc":{"start":{"line":275,"column":16},"end":{"line":275,"column":20}}},"property":{"type":"Identifier","start":8569,"end":8576,"loc":{"start":{"line":275,"column":21},"end":{"line":275,"column":28}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":8577,"end":8585,"loc":{"start":{"line":275,"column":29},"end":{"line":275,"column":37}},"name":"endpoint"},"computed":false},"consequent":{"type":"BlockStatement","start":8587,"end":8639,"loc":{"start":{"line":275,"column":39},"end":{"line":277,"column":13}},"body":[{"type":"ExpressionStatement","start":8603,"end":8625,"loc":{"start":{"line":276,"column":14},"end":{"line":276,"column":36}},"expression":{"type":"CallExpression","start":8603,"end":8625,"loc":{"start":{"line":276,"column":14},"end":{"line":276,"column":36}},"callee":{"type":"MemberExpression","start":8603,"end":8623,"loc":{"start":{"line":276,"column":14},"end":{"line":276,"column":34}},"object":{"type":"ThisExpression","start":8603,"end":8607,"loc":{"start":{"line":276,"column":14},"end":{"line":276,"column":18}}},"property":{"type":"Identifier","start":8608,"end":8623,"loc":{"start":{"line":276,"column":19},"end":{"line":276,"column":34}},"name":"uploadMultipart"},"computed":false},"arguments":[]}}]},"alternate":null},{"type":"BreakStatement","start":8652,"end":8657,"loc":{"start":{"line":278,"column":12},"end":{"line":278,"column":17}},"label":null}],"test":{"type":"MemberExpression","start":8527,"end":8546,"loc":{"start":{"line":274,"column":15},"end":{"line":274,"column":34}},"object":{"type":"Identifier","start":8527,"end":8536,"loc":{"start":{"line":274,"column":15},"end":{"line":274,"column":24}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":8537,"end":8546,"loc":{"start":{"line":274,"column":25},"end":{"line":274,"column":34}},"name":"multipart"},"computed":false}},{"type":"SwitchCase","start":8668,"end":8928,"loc":{"start":{"line":279,"column":10},"end":{"line":285,"column":17}},"consequent":[{"type":"IfStatement","start":8708,"end":8910,"loc":{"start":{"line":280,"column":12},"end":{"line":284,"column":13}},"test":{"type":"UnaryExpression","start":8712,"end":8726,"loc":{"start":{"line":280,"column":16},"end":{"line":280,"column":30}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":8713,"end":8726,"loc":{"start":{"line":280,"column":17},"end":{"line":280,"column":30}},"object":{"type":"ThisExpression","start":8713,"end":8717,"loc":{"start":{"line":280,"column":17},"end":{"line":280,"column":21}}},"property":{"type":"Identifier","start":8718,"end":8726,"loc":{"start":{"line":280,"column":22},"end":{"line":280,"column":30}},"name":"s3Upload"},"computed":false}},"consequent":{"type":"BlockStatement","start":8728,"end":8782,"loc":{"start":{"line":280,"column":32},"end":{"line":282,"column":13}},"body":[{"type":"ExpressionStatement","start":8744,"end":8768,"loc":{"start":{"line":281,"column":14},"end":{"line":281,"column":38}},"expression":{"type":"CallExpression","start":8744,"end":8768,"loc":{"start":{"line":281,"column":14},"end":{"line":281,"column":38}},"callee":{"type":"MemberExpression","start":8744,"end":8766,"loc":{"start":{"line":281,"column":14},"end":{"line":281,"column":36}},"object":{"type":"ThisExpression","start":8744,"end":8748,"loc":{"start":{"line":281,"column":14},"end":{"line":281,"column":18}}},"property":{"type":"Identifier","start":8749,"end":8766,"loc":{"start":{"line":281,"column":19},"end":{"line":281,"column":36}},"name":"uploadS3Multipart"},"computed":false},"arguments":[]}}]},"alternate":{"type":"BlockStatement","start":8788,"end":8910,"loc":{"start":{"line":282,"column":19},"end":{"line":284,"column":13}},"body":[{"type":"ExpressionStatement","start":8804,"end":8896,"loc":{"start":{"line":283,"column":14},"end":{"line":283,"column":106}},"expression":{"type":"CallExpression","start":8804,"end":8896,"loc":{"start":{"line":283,"column":14},"end":{"line":283,"column":106}},"callee":{"type":"MemberExpression","start":8804,"end":8815,"loc":{"start":{"line":283,"column":14},"end":{"line":283,"column":25}},"object":{"type":"Identifier","start":8804,"end":8810,"loc":{"start":{"line":283,"column":14},"end":{"line":283,"column":20}},"name":"logger"},"property":{"type":"Identifier","start":8811,"end":8815,"loc":{"start":{"line":283,"column":21},"end":{"line":283,"column":25}},"name":"warn"},"computed":false},"arguments":[{"type":"Literal","start":8816,"end":8853,"loc":{"start":{"line":283,"column":26},"end":{"line":283,"column":63}},"value":"handleChunk() called multiple times","raw":"'handleChunk() called multiple times'"},{"type":"Literal","start":8855,"end":8878,"loc":{"start":{"line":283,"column":65},"end":{"line":283,"column":88}},"value":"uploader.s3.duplicate","raw":"'uploader.s3.duplicate'"},{"type":"MemberExpression","start":8880,"end":8895,"loc":{"start":{"line":283,"column":90},"end":{"line":283,"column":105}},"object":{"type":"ThisExpression","start":8880,"end":8884,"loc":{"start":{"line":283,"column":90},"end":{"line":283,"column":94}}},"property":{"type":"Identifier","start":8885,"end":8895,"loc":{"start":{"line":283,"column":95},"end":{"line":283,"column":105}},"name":"shortToken"},"computed":false}]}}]}},{"type":"BreakStatement","start":8923,"end":8928,"loc":{"start":{"line":285,"column":12},"end":{"line":285,"column":17}},"label":null}],"test":{"type":"MemberExpression","start":8673,"end":8694,"loc":{"start":{"line":279,"column":15},"end":{"line":279,"column":36}},"object":{"type":"Identifier","start":8673,"end":8682,"loc":{"start":{"line":279,"column":15},"end":{"line":279,"column":24}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":8683,"end":8694,"loc":{"start":{"line":279,"column":25},"end":{"line":279,"column":36}},"name":"s3Multipart"},"computed":false}},{"type":"SwitchCase","start":8939,"end":9179,"loc":{"start":{"line":286,"column":10},"end":{"line":292,"column":17}},"consequent":[{"type":"IfStatement","start":8971,"end":9161,"loc":{"start":{"line":287,"column":12},"end":{"line":291,"column":13}},"test":{"type":"UnaryExpression","start":8975,"end":8984,"loc":{"start":{"line":287,"column":16},"end":{"line":287,"column":25}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":8976,"end":8984,"loc":{"start":{"line":287,"column":17},"end":{"line":287,"column":25}},"object":{"type":"ThisExpression","start":8976,"end":8980,"loc":{"start":{"line":287,"column":17},"end":{"line":287,"column":21}}},"property":{"type":"Identifier","start":8981,"end":8984,"loc":{"start":{"line":287,"column":22},"end":{"line":287,"column":25}},"name":"tus"},"computed":false}},"consequent":{"type":"BlockStatement","start":8986,"end":9032,"loc":{"start":{"line":287,"column":27},"end":{"line":289,"column":13}},"body":[{"type":"ExpressionStatement","start":9002,"end":9018,"loc":{"start":{"line":288,"column":14},"end":{"line":288,"column":30}},"expression":{"type":"CallExpression","start":9002,"end":9018,"loc":{"start":{"line":288,"column":14},"end":{"line":288,"column":30}},"callee":{"type":"MemberExpression","start":9002,"end":9016,"loc":{"start":{"line":288,"column":14},"end":{"line":288,"column":28}},"object":{"type":"ThisExpression","start":9002,"end":9006,"loc":{"start":{"line":288,"column":14},"end":{"line":288,"column":18}}},"property":{"type":"Identifier","start":9007,"end":9016,"loc":{"start":{"line":288,"column":19},"end":{"line":288,"column":28}},"name":"uploadTus"},"computed":false},"arguments":[]}}]},"alternate":{"type":"BlockStatement","start":9038,"end":9161,"loc":{"start":{"line":289,"column":19},"end":{"line":291,"column":13}},"body":[{"type":"ExpressionStatement","start":9054,"end":9147,"loc":{"start":{"line":290,"column":14},"end":{"line":290,"column":107}},"expression":{"type":"CallExpression","start":9054,"end":9147,"loc":{"start":{"line":290,"column":14},"end":{"line":290,"column":107}},"callee":{"type":"MemberExpression","start":9054,"end":9065,"loc":{"start":{"line":290,"column":14},"end":{"line":290,"column":25}},"object":{"type":"Identifier","start":9054,"end":9060,"loc":{"start":{"line":290,"column":14},"end":{"line":290,"column":20}},"name":"logger"},"property":{"type":"Identifier","start":9061,"end":9065,"loc":{"start":{"line":290,"column":21},"end":{"line":290,"column":25}},"name":"warn"},"computed":false},"arguments":[{"type":"Literal","start":9066,"end":9103,"loc":{"start":{"line":290,"column":26},"end":{"line":290,"column":63}},"value":"handleChunk() called multiple times","raw":"'handleChunk() called multiple times'"},{"type":"Literal","start":9105,"end":9129,"loc":{"start":{"line":290,"column":65},"end":{"line":290,"column":89}},"value":"uploader.tus.duplicate","raw":"'uploader.tus.duplicate'"},{"type":"MemberExpression","start":9131,"end":9146,"loc":{"start":{"line":290,"column":91},"end":{"line":290,"column":106}},"object":{"type":"ThisExpression","start":9131,"end":9135,"loc":{"start":{"line":290,"column":91},"end":{"line":290,"column":95}}},"property":{"type":"Identifier","start":9136,"end":9146,"loc":{"start":{"line":290,"column":96},"end":{"line":290,"column":106}},"name":"shortToken"},"computed":false}]}}]}},{"type":"BreakStatement","start":9174,"end":9179,"loc":{"start":{"line":292,"column":12},"end":{"line":292,"column":17}},"label":null}],"test":{"type":"MemberExpression","start":8944,"end":8957,"loc":{"start":{"line":286,"column":15},"end":{"line":286,"column":28}},"object":{"type":"Identifier","start":8944,"end":8953,"loc":{"start":{"line":286,"column":15},"end":{"line":286,"column":24}},"name":"PROTOCOLS"},"property":{"type":"Identifier","start":8954,"end":8957,"loc":{"start":{"line":286,"column":25},"end":{"line":286,"column":28}},"name":"tus"},"computed":false}}]}]}}]}},{"type":"ReturnStatement","start":9206,"end":9230,"loc":{"start":{"line":296,"column":6},"end":{"line":296,"column":30}},"argument":{"type":"CallExpression","start":9213,"end":9230,"loc":{"start":{"line":296,"column":13},"end":{"line":296,"column":30}},"callee":{"type":"MemberExpression","start":9213,"end":9228,"loc":{"start":{"line":296,"column":13},"end":{"line":296,"column":28}},"object":{"type":"ThisExpression","start":9213,"end":9217,"loc":{"start":{"line":296,"column":13},"end":{"line":296,"column":17}}},"property":{"type":"Identifier","start":9218,"end":9228,"loc":{"start":{"line":296,"column":18},"end":{"line":296,"column":28}},"name":"endStreams"},"computed":false},"arguments":[]}}]},"alternate":null,"comments":[{"type":"Line","value":" The download has completed; close the file and start an upload if necessary.","start":8301,"end":8380,"loc":{"start":{"line":269,"column":4},"end":{"line":269,"column":83}}}]},{"type":"ExpressionStatement","start":9242,"end":9423,"loc":{"start":{"line":299,"column":4},"end":{"line":302,"column":6}},"expression":{"type":"CallExpression","start":9242,"end":9423,"loc":{"start":{"line":299,"column":4},"end":{"line":302,"column":6}},"callee":{"type":"MemberExpression","start":9242,"end":9264,"loc":{"start":{"line":299,"column":4},"end":{"line":299,"column":26}},"object":{"type":"MemberExpression","start":9242,"end":9258,"loc":{"start":{"line":299,"column":4},"end":{"line":299,"column":20}},"object":{"type":"ThisExpression","start":9242,"end":9246,"loc":{"start":{"line":299,"column":4},"end":{"line":299,"column":8}}},"property":{"type":"Identifier","start":9247,"end":9258,"loc":{"start":{"line":299,"column":9},"end":{"line":299,"column":20}},"name":"writeStream"},"computed":false},"property":{"type":"Identifier","start":9259,"end":9264,"loc":{"start":{"line":299,"column":21},"end":{"line":299,"column":26}},"name":"write"},"computed":false},"arguments":[{"type":"Identifier","start":9265,"end":9270,"loc":{"start":{"line":299,"column":27},"end":{"line":299,"column":32}},"name":"chunk"},{"type":"ArrowFunctionExpression","start":9272,"end":9422,"loc":{"start":{"line":299,"column":34},"end":{"line":302,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9278,"end":9422,"loc":{"start":{"line":299,"column":40},"end":{"line":302,"column":5}},"body":[{"type":"ExpressionStatement","start":9286,"end":9375,"loc":{"start":{"line":300,"column":6},"end":{"line":300,"column":95}},"expression":{"type":"CallExpression","start":9286,"end":9375,"loc":{"start":{"line":300,"column":6},"end":{"line":300,"column":95}},"callee":{"type":"MemberExpression","start":9286,"end":9298,"loc":{"start":{"line":300,"column":6},"end":{"line":300,"column":18}},"object":{"type":"Identifier","start":9286,"end":9292,"loc":{"start":{"line":300,"column":6},"end":{"line":300,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":9293,"end":9298,"loc":{"start":{"line":300,"column":13},"end":{"line":300,"column":18}},"name":"debug"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":9299,"end":9327,"loc":{"start":{"line":300,"column":19},"end":{"line":300,"column":47}},"expressions":[{"type":"MemberExpression","start":9302,"end":9319,"loc":{"start":{"line":300,"column":22},"end":{"line":300,"column":39}},"object":{"type":"ThisExpression","start":9302,"end":9306,"loc":{"start":{"line":300,"column":22},"end":{"line":300,"column":26}}},"property":{"type":"Identifier","start":9307,"end":9319,"loc":{"start":{"line":300,"column":27},"end":{"line":300,"column":39}},"name":"bytesWritten"},"computed":false}],"quasis":[{"type":"TemplateElement","start":9300,"end":9300,"loc":{"start":{"line":300,"column":20},"end":{"line":300,"column":20}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":9320,"end":9326,"loc":{"start":{"line":300,"column":40},"end":{"line":300,"column":46}},"value":{"raw":" bytes","cooked":" bytes"},"tail":true}]},{"type":"Literal","start":9329,"end":9357,"loc":{"start":{"line":300,"column":49},"end":{"line":300,"column":77}},"value":"uploader.download.progress","raw":"'uploader.download.progress'"},{"type":"MemberExpression","start":9359,"end":9374,"loc":{"start":{"line":300,"column":79},"end":{"line":300,"column":94}},"object":{"type":"ThisExpression","start":9359,"end":9363,"loc":{"start":{"line":300,"column":79},"end":{"line":300,"column":83}}},"property":{"type":"Identifier","start":9364,"end":9374,"loc":{"start":{"line":300,"column":84},"end":{"line":300,"column":94}},"name":"shortToken"},"computed":false}]}},{"type":"ReturnStatement","start":9382,"end":9416,"loc":{"start":{"line":301,"column":6},"end":{"line":301,"column":40}},"argument":{"type":"CallExpression","start":9389,"end":9416,"loc":{"start":{"line":301,"column":13},"end":{"line":301,"column":40}},"callee":{"type":"MemberExpression","start":9389,"end":9414,"loc":{"start":{"line":301,"column":13},"end":{"line":301,"column":38}},"object":{"type":"ThisExpression","start":9389,"end":9393,"loc":{"start":{"line":301,"column":13},"end":{"line":301,"column":17}}},"property":{"type":"Identifier","start":9394,"end":9414,"loc":{"start":{"line":301,"column":18},"end":{"line":301,"column":38}},"name":"emitIllusiveProgress"},"computed":false},"arguments":[]}}]}}]}}],"comments":[{"type":"Block","value":"*\n   *\n   * @param {Error} err\n   * @param {string | Buffer | Buffer[]} chunk\n   ","start":7807,"end":7892,"loc":{"start":{"line":249,"column":2},"end":{"line":253,"column":5}}}]}}},{"type":"MethodDefinition","start":9507,"end":9846,"loc":{"start":{"line":309,"column":2},"end":{"line":323,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":9507,"end":9521,"loc":{"start":{"line":309,"column":2},"end":{"line":309,"column":16}},"name":"writeToStreams"},"value":{"type":"FunctionExpression","start":9522,"end":9846,"loc":{"start":{"line":309,"column":17},"end":{"line":323,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":9523,"end":9528,"loc":{"start":{"line":309,"column":18},"end":{"line":309,"column":23}},"name":"chunk"},{"type":"Identifier","start":9530,"end":9532,"loc":{"start":{"line":309,"column":25},"end":{"line":309,"column":27}},"name":"cb"}],"body":{"type":"BlockStatement","start":9534,"end":9846,"loc":{"start":{"line":309,"column":29},"end":{"line":323,"column":3}},"body":[{"type":"VariableDeclaration","start":9540,"end":9555,"loc":{"start":{"line":310,"column":4},"end":{"line":310,"column":19}},"declarations":[{"type":"VariableDeclarator","start":9546,"end":9555,"loc":{"start":{"line":310,"column":10},"end":{"line":310,"column":19}},"id":{"type":"Identifier","start":9546,"end":9550,"loc":{"start":{"line":310,"column":10},"end":{"line":310,"column":14}},"name":"done"},"init":{"type":"ArrayExpression","start":9553,"end":9555,"loc":{"start":{"line":310,"column":17},"end":{"line":310,"column":19}},"elements":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":9560,"end":9604,"loc":{"start":{"line":311,"column":4},"end":{"line":311,"column":48}},"declarations":[{"type":"VariableDeclarator","start":9566,"end":9604,"loc":{"start":{"line":311,"column":10},"end":{"line":311,"column":48}},"id":{"type":"Identifier","start":9566,"end":9576,"loc":{"start":{"line":311,"column":10},"end":{"line":311,"column":20}},"name":"doneLength"},"init":{"type":"ConditionalExpression","start":9579,"end":9604,"loc":{"start":{"line":311,"column":23},"end":{"line":311,"column":48}},"test":{"type":"MemberExpression","start":9579,"end":9596,"loc":{"start":{"line":311,"column":23},"end":{"line":311,"column":40}},"object":{"type":"ThisExpression","start":9579,"end":9583,"loc":{"start":{"line":311,"column":23},"end":{"line":311,"column":27}}},"property":{"type":"Identifier","start":9584,"end":9596,"loc":{"start":{"line":311,"column":28},"end":{"line":311,"column":40}},"name":"duplexStream"},"computed":false},"consequent":{"type":"Literal","start":9599,"end":9600,"loc":{"start":{"line":311,"column":43},"end":{"line":311,"column":44}},"value":2,"raw":"2"},"alternate":{"type":"Literal","start":9603,"end":9604,"loc":{"start":{"line":311,"column":47},"end":{"line":311,"column":48}},"value":1,"raw":"1"}}}],"kind":"const"},{"type":"VariableDeclaration","start":9609,"end":9719,"loc":{"start":{"line":312,"column":4},"end":{"line":317,"column":5}},"declarations":[{"type":"VariableDeclarator","start":9615,"end":9719,"loc":{"start":{"line":312,"column":10},"end":{"line":317,"column":5}},"id":{"type":"Identifier","start":9615,"end":9621,"loc":{"start":{"line":312,"column":10},"end":{"line":312,"column":16}},"name":"onDone"},"init":{"type":"ArrowFunctionExpression","start":9624,"end":9719,"loc":{"start":{"line":312,"column":19},"end":{"line":317,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9630,"end":9719,"loc":{"start":{"line":312,"column":25},"end":{"line":317,"column":5}},"body":[{"type":"ExpressionStatement","start":9638,"end":9653,"loc":{"start":{"line":313,"column":6},"end":{"line":313,"column":21}},"expression":{"type":"CallExpression","start":9638,"end":9653,"loc":{"start":{"line":313,"column":6},"end":{"line":313,"column":21}},"callee":{"type":"MemberExpression","start":9638,"end":9647,"loc":{"start":{"line":313,"column":6},"end":{"line":313,"column":15}},"object":{"type":"Identifier","start":9638,"end":9642,"loc":{"start":{"line":313,"column":6},"end":{"line":313,"column":10}},"name":"done"},"property":{"type":"Identifier","start":9643,"end":9647,"loc":{"start":{"line":313,"column":11},"end":{"line":313,"column":15}},"name":"push"},"computed":false},"arguments":[{"type":"Literal","start":9648,"end":9652,"loc":{"start":{"line":313,"column":16},"end":{"line":313,"column":20}},"value":true,"raw":"true"}]}},{"type":"IfStatement","start":9660,"end":9713,"loc":{"start":{"line":314,"column":6},"end":{"line":316,"column":7}},"test":{"type":"BinaryExpression","start":9664,"end":9689,"loc":{"start":{"line":314,"column":10},"end":{"line":314,"column":35}},"left":{"type":"MemberExpression","start":9664,"end":9675,"loc":{"start":{"line":314,"column":10},"end":{"line":314,"column":21}},"object":{"type":"Identifier","start":9664,"end":9668,"loc":{"start":{"line":314,"column":10},"end":{"line":314,"column":14}},"name":"done"},"property":{"type":"Identifier","start":9669,"end":9675,"loc":{"start":{"line":314,"column":15},"end":{"line":314,"column":21}},"name":"length"},"computed":false},"operator":">=","right":{"type":"Identifier","start":9679,"end":9689,"loc":{"start":{"line":314,"column":25},"end":{"line":314,"column":35}},"name":"doneLength"}},"consequent":{"type":"BlockStatement","start":9691,"end":9713,"loc":{"start":{"line":314,"column":37},"end":{"line":316,"column":7}},"body":[{"type":"ExpressionStatement","start":9701,"end":9705,"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":12}},"expression":{"type":"CallExpression","start":9701,"end":9705,"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":12}},"callee":{"type":"Identifier","start":9701,"end":9703,"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":10}},"name":"cb"},"arguments":[]}}]},"alternate":null}]}}}],"kind":"const"},{"type":"ExpressionStatement","start":9725,"end":9762,"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":41}},"expression":{"type":"CallExpression","start":9725,"end":9762,"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":41}},"callee":{"type":"MemberExpression","start":9725,"end":9747,"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":26}},"object":{"type":"MemberExpression","start":9725,"end":9741,"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":20}},"object":{"type":"ThisExpression","start":9725,"end":9729,"loc":{"start":{"line":319,"column":4},"end":{"line":319,"column":8}}},"property":{"type":"Identifier","start":9730,"end":9741,"loc":{"start":{"line":319,"column":9},"end":{"line":319,"column":20}},"name":"writeStream"},"computed":false},"property":{"type":"Identifier","start":9742,"end":9747,"loc":{"start":{"line":319,"column":21},"end":{"line":319,"column":26}},"name":"write"},"computed":false},"arguments":[{"type":"Identifier","start":9748,"end":9753,"loc":{"start":{"line":319,"column":27},"end":{"line":319,"column":32}},"name":"chunk"},{"type":"Identifier","start":9755,"end":9761,"loc":{"start":{"line":319,"column":34},"end":{"line":319,"column":40}},"name":"onDone"}]}},{"type":"IfStatement","start":9767,"end":9842,"loc":{"start":{"line":320,"column":4},"end":{"line":322,"column":5}},"test":{"type":"MemberExpression","start":9771,"end":9788,"loc":{"start":{"line":320,"column":8},"end":{"line":320,"column":25}},"object":{"type":"ThisExpression","start":9771,"end":9775,"loc":{"start":{"line":320,"column":8},"end":{"line":320,"column":12}}},"property":{"type":"Identifier","start":9776,"end":9788,"loc":{"start":{"line":320,"column":13},"end":{"line":320,"column":25}},"name":"duplexStream"},"computed":false},"consequent":{"type":"BlockStatement","start":9790,"end":9842,"loc":{"start":{"line":320,"column":27},"end":{"line":322,"column":5}},"body":[{"type":"ExpressionStatement","start":9798,"end":9836,"loc":{"start":{"line":321,"column":6},"end":{"line":321,"column":44}},"expression":{"type":"CallExpression","start":9798,"end":9836,"loc":{"start":{"line":321,"column":6},"end":{"line":321,"column":44}},"callee":{"type":"MemberExpression","start":9798,"end":9821,"loc":{"start":{"line":321,"column":6},"end":{"line":321,"column":29}},"object":{"type":"MemberExpression","start":9798,"end":9815,"loc":{"start":{"line":321,"column":6},"end":{"line":321,"column":23}},"object":{"type":"ThisExpression","start":9798,"end":9802,"loc":{"start":{"line":321,"column":6},"end":{"line":321,"column":10}}},"property":{"type":"Identifier","start":9803,"end":9815,"loc":{"start":{"line":321,"column":11},"end":{"line":321,"column":23}},"name":"duplexStream"},"computed":false},"property":{"type":"Identifier","start":9816,"end":9821,"loc":{"start":{"line":321,"column":24},"end":{"line":321,"column":29}},"name":"write"},"computed":false},"arguments":[{"type":"Identifier","start":9822,"end":9827,"loc":{"start":{"line":321,"column":30},"end":{"line":321,"column":35}},"name":"chunk"},{"type":"Identifier","start":9829,"end":9835,"loc":{"start":{"line":321,"column":37},"end":{"line":321,"column":43}},"name":"onDone"}]}}]},"alternate":null}],"comments":[{"type":"Block","value":"*\n   * @param {Buffer | Buffer[]} chunk\n   * @param {function} cb\n   ","start":9431,"end":9504,"loc":{"start":{"line":305,"column":2},"end":{"line":308,"column":5}}}]}}},{"type":"MethodDefinition","start":9850,"end":9961,"loc":{"start":{"line":325,"column":2},"end":{"line":330,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":9850,"end":9860,"loc":{"start":{"line":325,"column":2},"end":{"line":325,"column":12}},"name":"endStreams"},"value":{"type":"FunctionExpression","start":9861,"end":9961,"loc":{"start":{"line":325,"column":13},"end":{"line":330,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9864,"end":9961,"loc":{"start":{"line":325,"column":16},"end":{"line":330,"column":3}},"body":[{"type":"ExpressionStatement","start":9870,"end":9892,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":26}},"expression":{"type":"CallExpression","start":9870,"end":9892,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":26}},"callee":{"type":"MemberExpression","start":9870,"end":9890,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":24}},"object":{"type":"MemberExpression","start":9870,"end":9886,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":20}},"object":{"type":"ThisExpression","start":9870,"end":9874,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":8}}},"property":{"type":"Identifier","start":9875,"end":9886,"loc":{"start":{"line":326,"column":9},"end":{"line":326,"column":20}},"name":"writeStream"},"computed":false},"property":{"type":"Identifier","start":9887,"end":9890,"loc":{"start":{"line":326,"column":21},"end":{"line":326,"column":24}},"name":"end"},"computed":false},"arguments":[]}},{"type":"IfStatement","start":9897,"end":9957,"loc":{"start":{"line":327,"column":4},"end":{"line":329,"column":5}},"test":{"type":"MemberExpression","start":9901,"end":9918,"loc":{"start":{"line":327,"column":8},"end":{"line":327,"column":25}},"object":{"type":"ThisExpression","start":9901,"end":9905,"loc":{"start":{"line":327,"column":8},"end":{"line":327,"column":12}}},"property":{"type":"Identifier","start":9906,"end":9918,"loc":{"start":{"line":327,"column":13},"end":{"line":327,"column":25}},"name":"duplexStream"},"computed":false},"consequent":{"type":"BlockStatement","start":9920,"end":9957,"loc":{"start":{"line":327,"column":27},"end":{"line":329,"column":5}},"body":[{"type":"ExpressionStatement","start":9928,"end":9951,"loc":{"start":{"line":328,"column":6},"end":{"line":328,"column":29}},"expression":{"type":"CallExpression","start":9928,"end":9951,"loc":{"start":{"line":328,"column":6},"end":{"line":328,"column":29}},"callee":{"type":"MemberExpression","start":9928,"end":9949,"loc":{"start":{"line":328,"column":6},"end":{"line":328,"column":27}},"object":{"type":"MemberExpression","start":9928,"end":9945,"loc":{"start":{"line":328,"column":6},"end":{"line":328,"column":23}},"object":{"type":"ThisExpression","start":9928,"end":9932,"loc":{"start":{"line":328,"column":6},"end":{"line":328,"column":10}}},"property":{"type":"Identifier","start":9933,"end":9945,"loc":{"start":{"line":328,"column":11},"end":{"line":328,"column":23}},"name":"duplexStream"},"computed":false},"property":{"type":"Identifier","start":9946,"end":9949,"loc":{"start":{"line":328,"column":24},"end":{"line":328,"column":27}},"name":"end"},"computed":false},"arguments":[]}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":9965,"end":10149,"loc":{"start":{"line":332,"column":2},"end":{"line":337,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":9965,"end":9976,"loc":{"start":{"line":332,"column":2},"end":{"line":332,"column":13}},"name":"getResponse"},"value":{"type":"FunctionExpression","start":9977,"end":10149,"loc":{"start":{"line":332,"column":14},"end":{"line":337,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9980,"end":10149,"loc":{"start":{"line":332,"column":17},"end":{"line":337,"column":3}},"body":[{"type":"IfStatement","start":9986,"end":10089,"loc":{"start":{"line":333,"column":4},"end":{"line":335,"column":5}},"test":{"type":"MemberExpression","start":9990,"end":10010,"loc":{"start":{"line":333,"column":8},"end":{"line":333,"column":28}},"object":{"type":"ThisExpression","start":9990,"end":9994,"loc":{"start":{"line":333,"column":8},"end":{"line":333,"column":12}}},"property":{"type":"Identifier","start":9995,"end":10010,"loc":{"start":{"line":333,"column":13},"end":{"line":333,"column":28}},"name":"_errRespMessage"},"computed":false},"consequent":{"type":"BlockStatement","start":10012,"end":10089,"loc":{"start":{"line":333,"column":30},"end":{"line":335,"column":5}},"body":[{"type":"ReturnStatement","start":10020,"end":10083,"loc":{"start":{"line":334,"column":6},"end":{"line":334,"column":69}},"argument":{"type":"ObjectExpression","start":10027,"end":10083,"loc":{"start":{"line":334,"column":13},"end":{"line":334,"column":69}},"properties":[{"type":"Property","start":10029,"end":10068,"loc":{"start":{"line":334,"column":15},"end":{"line":334,"column":54}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":10029,"end":10033,"loc":{"start":{"line":334,"column":15},"end":{"line":334,"column":19}},"name":"body"},"value":{"type":"ObjectExpression","start":10035,"end":10068,"loc":{"start":{"line":334,"column":21},"end":{"line":334,"column":54}},"properties":[{"type":"Property","start":10037,"end":10066,"loc":{"start":{"line":334,"column":23},"end":{"line":334,"column":52}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":10037,"end":10044,"loc":{"start":{"line":334,"column":23},"end":{"line":334,"column":30}},"name":"message"},"value":{"type":"MemberExpression","start":10046,"end":10066,"loc":{"start":{"line":334,"column":32},"end":{"line":334,"column":52}},"object":{"type":"ThisExpression","start":10046,"end":10050,"loc":{"start":{"line":334,"column":32},"end":{"line":334,"column":36}}},"property":{"type":"Identifier","start":10051,"end":10066,"loc":{"start":{"line":334,"column":37},"end":{"line":334,"column":52}},"name":"_errRespMessage"},"computed":false},"kind":"init"}]},"kind":"init"},{"type":"Property","start":10070,"end":10081,"loc":{"start":{"line":334,"column":56},"end":{"line":334,"column":67}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":10070,"end":10076,"loc":{"start":{"line":334,"column":56},"end":{"line":334,"column":62}},"name":"status"},"value":{"type":"Literal","start":10078,"end":10081,"loc":{"start":{"line":334,"column":64},"end":{"line":334,"column":67}},"value":400,"raw":"400"},"kind":"init"}]}}]},"alternate":null},{"type":"ReturnStatement","start":10094,"end":10145,"loc":{"start":{"line":336,"column":4},"end":{"line":336,"column":55}},"argument":{"type":"ObjectExpression","start":10101,"end":10145,"loc":{"start":{"line":336,"column":11},"end":{"line":336,"column":55}},"properties":[{"type":"Property","start":10103,"end":10130,"loc":{"start":{"line":336,"column":13},"end":{"line":336,"column":40}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":10103,"end":10107,"loc":{"start":{"line":336,"column":13},"end":{"line":336,"column":17}},"name":"body"},"value":{"type":"ObjectExpression","start":10109,"end":10130,"loc":{"start":{"line":336,"column":19},"end":{"line":336,"column":40}},"properties":[{"type":"Property","start":10111,"end":10128,"loc":{"start":{"line":336,"column":21},"end":{"line":336,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":10111,"end":10116,"loc":{"start":{"line":336,"column":21},"end":{"line":336,"column":26}},"name":"token"},"value":{"type":"MemberExpression","start":10118,"end":10128,"loc":{"start":{"line":336,"column":28},"end":{"line":336,"column":38}},"object":{"type":"ThisExpression","start":10118,"end":10122,"loc":{"start":{"line":336,"column":28},"end":{"line":336,"column":32}}},"property":{"type":"Identifier","start":10123,"end":10128,"loc":{"start":{"line":336,"column":33},"end":{"line":336,"column":38}},"name":"token"},"computed":false},"kind":"init"}]},"kind":"init"},{"type":"Property","start":10132,"end":10143,"loc":{"start":{"line":336,"column":42},"end":{"line":336,"column":53}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":10132,"end":10138,"loc":{"start":{"line":336,"column":42},"end":{"line":336,"column":48}},"name":"status"},"value":{"type":"Literal","start":10140,"end":10143,"loc":{"start":{"line":336,"column":50},"end":{"line":336,"column":53}},"value":200,"raw":"200"},"kind":"init"}]}}]}}},{"type":"MethodDefinition","start":10247,"end":10387,"loc":{"start":{"line":343,"column":2},"end":{"line":346,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":10247,"end":10256,"loc":{"start":{"line":343,"column":2},"end":{"line":343,"column":11}},"name":"saveState"},"value":{"type":"FunctionExpression","start":10257,"end":10387,"loc":{"start":{"line":343,"column":12},"end":{"line":346,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":10258,"end":10263,"loc":{"start":{"line":343,"column":13},"end":{"line":343,"column":18}},"name":"state"}],"body":{"type":"BlockStatement","start":10265,"end":10387,"loc":{"start":{"line":343,"column":20},"end":{"line":346,"column":3}},"body":[{"type":"IfStatement","start":10271,"end":10296,"loc":{"start":{"line":344,"column":4},"end":{"line":344,"column":29}},"test":{"type":"UnaryExpression","start":10275,"end":10288,"loc":{"start":{"line":344,"column":8},"end":{"line":344,"column":21}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":10276,"end":10288,"loc":{"start":{"line":344,"column":9},"end":{"line":344,"column":21}},"object":{"type":"ThisExpression","start":10276,"end":10280,"loc":{"start":{"line":344,"column":9},"end":{"line":344,"column":13}}},"property":{"type":"Identifier","start":10281,"end":10288,"loc":{"start":{"line":344,"column":14},"end":{"line":344,"column":21}},"name":"storage"},"computed":false}},"consequent":{"type":"ReturnStatement","start":10290,"end":10296,"loc":{"start":{"line":344,"column":23},"end":{"line":344,"column":29}},"argument":null},"alternate":null},{"type":"ExpressionStatement","start":10301,"end":10383,"loc":{"start":{"line":345,"column":4},"end":{"line":345,"column":86}},"expression":{"type":"CallExpression","start":10301,"end":10383,"loc":{"start":{"line":345,"column":4},"end":{"line":345,"column":86}},"callee":{"type":"MemberExpression","start":10301,"end":10317,"loc":{"start":{"line":345,"column":4},"end":{"line":345,"column":20}},"object":{"type":"MemberExpression","start":10301,"end":10313,"loc":{"start":{"line":345,"column":4},"end":{"line":345,"column":16}},"object":{"type":"ThisExpression","start":10301,"end":10305,"loc":{"start":{"line":345,"column":4},"end":{"line":345,"column":8}}},"property":{"type":"Identifier","start":10306,"end":10313,"loc":{"start":{"line":345,"column":9},"end":{"line":345,"column":16}},"name":"storage"},"computed":false},"property":{"type":"Identifier","start":10314,"end":10317,"loc":{"start":{"line":345,"column":17},"end":{"line":345,"column":20}},"name":"set"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":10318,"end":10360,"loc":{"start":{"line":345,"column":21},"end":{"line":345,"column":63}},"expressions":[{"type":"MemberExpression","start":10321,"end":10344,"loc":{"start":{"line":345,"column":24},"end":{"line":345,"column":47}},"object":{"type":"Identifier","start":10321,"end":10329,"loc":{"start":{"line":345,"column":24},"end":{"line":345,"column":32}},"name":"Uploader"},"property":{"type":"Identifier","start":10330,"end":10344,"loc":{"start":{"line":345,"column":33},"end":{"line":345,"column":47}},"name":"STORAGE_PREFIX"},"computed":false},{"type":"MemberExpression","start":10348,"end":10358,"loc":{"start":{"line":345,"column":51},"end":{"line":345,"column":61}},"object":{"type":"ThisExpression","start":10348,"end":10352,"loc":{"start":{"line":345,"column":51},"end":{"line":345,"column":55}}},"property":{"type":"Identifier","start":10353,"end":10358,"loc":{"start":{"line":345,"column":56},"end":{"line":345,"column":61}},"name":"token"},"computed":false}],"quasis":[{"type":"TemplateElement","start":10319,"end":10319,"loc":{"start":{"line":345,"column":22},"end":{"line":345,"column":22}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":10345,"end":10346,"loc":{"start":{"line":345,"column":48},"end":{"line":345,"column":49}},"value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","start":10359,"end":10359,"loc":{"start":{"line":345,"column":62},"end":{"line":345,"column":62}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"CallExpression","start":10362,"end":10382,"loc":{"start":{"line":345,"column":65},"end":{"line":345,"column":85}},"callee":{"type":"Identifier","start":10362,"end":10375,"loc":{"start":{"line":345,"column":65},"end":{"line":345,"column":78}},"name":"jsonStringify"},"arguments":[{"type":"Identifier","start":10376,"end":10381,"loc":{"start":{"line":345,"column":79},"end":{"line":345,"column":84}},"name":"state"}]}]}}],"comments":[{"type":"Block","value":"*\n   * @typedef {{action: string, payload: object}} State\n   * @param {State} state\n   ","start":10153,"end":10244,"loc":{"start":{"line":339,"column":2},"end":{"line":342,"column":5}}}]}}},{"type":"MethodDefinition","start":10719,"end":11427,"loc":{"start":{"line":355,"column":2},"end":{"line":374,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":10719,"end":10739,"loc":{"start":{"line":355,"column":2},"end":{"line":355,"column":22}},"name":"emitIllusiveProgress"},"value":{"type":"FunctionExpression","start":10740,"end":11427,"loc":{"start":{"line":355,"column":23},"end":{"line":374,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"AssignmentPattern","start":10741,"end":10758,"loc":{"start":{"line":355,"column":24},"end":{"line":355,"column":41}},"left":{"type":"Identifier","start":10741,"end":10754,"loc":{"start":{"line":355,"column":24},"end":{"line":355,"column":37}},"name":"bytesUploaded"},"right":{"type":"Literal","start":10757,"end":10758,"loc":{"start":{"line":355,"column":40},"end":{"line":355,"column":41}},"value":0,"raw":"0"}}],"body":{"type":"BlockStatement","start":10760,"end":11427,"loc":{"start":{"line":355,"column":43},"end":{"line":374,"column":3}},"body":[{"type":"IfStatement","start":10766,"end":10804,"loc":{"start":{"line":356,"column":4},"end":{"line":358,"column":5}},"test":{"type":"MemberExpression","start":10770,"end":10782,"loc":{"start":{"line":356,"column":8},"end":{"line":356,"column":20}},"object":{"type":"ThisExpression","start":10770,"end":10774,"loc":{"start":{"line":356,"column":8},"end":{"line":356,"column":12}}},"property":{"type":"Identifier","start":10775,"end":10782,"loc":{"start":{"line":356,"column":13},"end":{"line":356,"column":20}},"name":"_paused"},"computed":false},"consequent":{"type":"BlockStatement","start":10784,"end":10804,"loc":{"start":{"line":356,"column":22},"end":{"line":358,"column":5}},"body":[{"type":"ReturnStatement","start":10792,"end":10798,"loc":{"start":{"line":357,"column":6},"end":{"line":357,"column":12}},"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":10810,"end":10884,"loc":{"start":{"line":360,"column":4},"end":{"line":360,"column":78}},"declarations":[{"type":"VariableDeclarator","start":10814,"end":10884,"loc":{"start":{"line":360,"column":8},"end":{"line":360,"column":78}},"id":{"type":"Identifier","start":10814,"end":10824,"loc":{"start":{"line":360,"column":8},"end":{"line":360,"column":18}},"name":"bytesTotal"},"init":{"type":"ConditionalExpression","start":10827,"end":10884,"loc":{"start":{"line":360,"column":21},"end":{"line":360,"column":78}},"test":{"type":"MemberExpression","start":10827,"end":10844,"loc":{"start":{"line":360,"column":21},"end":{"line":360,"column":38}},"object":{"type":"ThisExpression","start":10827,"end":10831,"loc":{"start":{"line":360,"column":21},"end":{"line":360,"column":25}}},"property":{"type":"Identifier","start":10832,"end":10844,"loc":{"start":{"line":360,"column":26},"end":{"line":360,"column":38}},"name":"streamsEnded"},"computed":false},"consequent":{"type":"MemberExpression","start":10847,"end":10864,"loc":{"start":{"line":360,"column":41},"end":{"line":360,"column":58}},"object":{"type":"ThisExpression","start":10847,"end":10851,"loc":{"start":{"line":360,"column":41},"end":{"line":360,"column":45}}},"property":{"type":"Identifier","start":10852,"end":10864,"loc":{"start":{"line":360,"column":46},"end":{"line":360,"column":58}},"name":"bytesWritten"},"computed":false},"alternate":{"type":"MemberExpression","start":10867,"end":10884,"loc":{"start":{"line":360,"column":61},"end":{"line":360,"column":78}},"object":{"type":"MemberExpression","start":10867,"end":10879,"loc":{"start":{"line":360,"column":61},"end":{"line":360,"column":73}},"object":{"type":"ThisExpression","start":10867,"end":10871,"loc":{"start":{"line":360,"column":61},"end":{"line":360,"column":65}}},"property":{"type":"Identifier","start":10872,"end":10879,"loc":{"start":{"line":360,"column":66},"end":{"line":360,"column":73}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":10880,"end":10884,"loc":{"start":{"line":360,"column":74},"end":{"line":360,"column":78}},"name":"size"},"computed":false}}}],"kind":"let"},{"type":"IfStatement","start":10889,"end":10979,"loc":{"start":{"line":361,"column":4},"end":{"line":363,"column":5}},"test":{"type":"UnaryExpression","start":10893,"end":10911,"loc":{"start":{"line":361,"column":8},"end":{"line":361,"column":26}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":10894,"end":10911,"loc":{"start":{"line":361,"column":9},"end":{"line":361,"column":26}},"object":{"type":"ThisExpression","start":10894,"end":10898,"loc":{"start":{"line":361,"column":9},"end":{"line":361,"column":13}}},"property":{"type":"Identifier","start":10899,"end":10911,"loc":{"start":{"line":361,"column":14},"end":{"line":361,"column":26}},"name":"streamsEnded"},"computed":false}},"consequent":{"type":"BlockStatement","start":10913,"end":10979,"loc":{"start":{"line":361,"column":28},"end":{"line":363,"column":5}},"body":[{"type":"ExpressionStatement","start":10921,"end":10973,"loc":{"start":{"line":362,"column":6},"end":{"line":362,"column":58}},"expression":{"type":"AssignmentExpression","start":10921,"end":10973,"loc":{"start":{"line":362,"column":6},"end":{"line":362,"column":58}},"operator":"=","left":{"type":"Identifier","start":10921,"end":10931,"loc":{"start":{"line":362,"column":6},"end":{"line":362,"column":16}},"name":"bytesTotal"},"right":{"type":"CallExpression","start":10934,"end":10973,"loc":{"start":{"line":362,"column":19},"end":{"line":362,"column":58}},"callee":{"type":"MemberExpression","start":10934,"end":10942,"loc":{"start":{"line":362,"column":19},"end":{"line":362,"column":27}},"object":{"type":"Identifier","start":10934,"end":10938,"loc":{"start":{"line":362,"column":19},"end":{"line":362,"column":23}},"name":"Math"},"property":{"type":"Identifier","start":10939,"end":10942,"loc":{"start":{"line":362,"column":24},"end":{"line":362,"column":27}},"name":"max"},"computed":false},"arguments":[{"type":"Identifier","start":10943,"end":10953,"loc":{"start":{"line":362,"column":28},"end":{"line":362,"column":38}},"name":"bytesTotal"},{"type":"MemberExpression","start":10955,"end":10972,"loc":{"start":{"line":362,"column":40},"end":{"line":362,"column":57}},"object":{"type":"ThisExpression","start":10955,"end":10959,"loc":{"start":{"line":362,"column":40},"end":{"line":362,"column":44}}},"property":{"type":"Identifier","start":10960,"end":10972,"loc":{"start":{"line":362,"column":45},"end":{"line":362,"column":57}},"name":"bytesWritten"},"computed":false}]}}}]},"alternate":null},{"type":"VariableDeclaration","start":11143,"end":11218,"loc":{"start":{"line":366,"column":4},"end":{"line":366,"column":79}},"declarations":[{"type":"VariableDeclarator","start":11149,"end":11218,"loc":{"start":{"line":366,"column":10},"end":{"line":366,"column":79}},"id":{"type":"Identifier","start":11149,"end":11170,"loc":{"start":{"line":366,"column":10},"end":{"line":366,"column":31}},"name":"illusiveBytesUploaded"},"init":{"type":"BinaryExpression","start":11173,"end":11218,"loc":{"start":{"line":366,"column":34},"end":{"line":366,"column":79}},"left":{"type":"BinaryExpression","start":11174,"end":11195,"loc":{"start":{"line":366,"column":35},"end":{"line":366,"column":56}},"left":{"type":"MemberExpression","start":11174,"end":11191,"loc":{"start":{"line":366,"column":35},"end":{"line":366,"column":52}},"object":{"type":"ThisExpression","start":11174,"end":11178,"loc":{"start":{"line":366,"column":35},"end":{"line":366,"column":39}}},"property":{"type":"Identifier","start":11179,"end":11191,"loc":{"start":{"line":366,"column":40},"end":{"line":366,"column":52}},"name":"bytesWritten"},"computed":false},"operator":"/","right":{"type":"Literal","start":11194,"end":11195,"loc":{"start":{"line":366,"column":55},"end":{"line":366,"column":56}},"value":2,"raw":"2"}},"operator":"+","right":{"type":"BinaryExpression","start":11200,"end":11217,"loc":{"start":{"line":366,"column":61},"end":{"line":366,"column":78}},"left":{"type":"Identifier","start":11200,"end":11213,"loc":{"start":{"line":366,"column":61},"end":{"line":366,"column":74}},"name":"bytesUploaded"},"operator":"/","right":{"type":"Literal","start":11216,"end":11217,"loc":{"start":{"line":366,"column":77},"end":{"line":366,"column":78}},"value":2,"raw":"2"}}}}],"kind":"const","comments":[{"type":"Line","value":" for a 10MB file, 10MB of download will account for 5MB upload progress","start":10984,"end":11057,"loc":{"start":{"line":364,"column":4},"end":{"line":364,"column":77}}},{"type":"Line","value":" and 10MB of actual upload will account for the other 5MB upload progress.","start":11062,"end":11138,"loc":{"start":{"line":365,"column":4},"end":{"line":365,"column":80}}}]},{"type":"ExpressionStatement","start":11224,"end":11366,"loc":{"start":{"line":368,"column":4},"end":{"line":372,"column":5}},"expression":{"type":"CallExpression","start":11224,"end":11366,"loc":{"start":{"line":368,"column":4},"end":{"line":372,"column":5}},"callee":{"type":"MemberExpression","start":11224,"end":11236,"loc":{"start":{"line":368,"column":4},"end":{"line":368,"column":16}},"object":{"type":"Identifier","start":11224,"end":11230,"loc":{"start":{"line":368,"column":4},"end":{"line":368,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":11231,"end":11236,"loc":{"start":{"line":368,"column":11},"end":{"line":368,"column":16}},"name":"debug"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":11244,"end":11301,"loc":{"start":{"line":369,"column":6},"end":{"line":369,"column":63}},"expressions":[{"type":"Identifier","start":11247,"end":11260,"loc":{"start":{"line":369,"column":9},"end":{"line":369,"column":22}},"name":"bytesUploaded"},{"type":"Identifier","start":11264,"end":11285,"loc":{"start":{"line":369,"column":26},"end":{"line":369,"column":47}},"name":"illusiveBytesUploaded"},{"type":"Identifier","start":11289,"end":11299,"loc":{"start":{"line":369,"column":51},"end":{"line":369,"column":61}},"name":"bytesTotal"}],"quasis":[{"type":"TemplateElement","start":11245,"end":11245,"loc":{"start":{"line":369,"column":7},"end":{"line":369,"column":7}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":11261,"end":11262,"loc":{"start":{"line":369,"column":23},"end":{"line":369,"column":24}},"value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","start":11286,"end":11287,"loc":{"start":{"line":369,"column":48},"end":{"line":369,"column":49}},"value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","start":11300,"end":11300,"loc":{"start":{"line":369,"column":62},"end":{"line":369,"column":62}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":11309,"end":11337,"loc":{"start":{"line":370,"column":6},"end":{"line":370,"column":34}},"value":"uploader.illusive.progress","raw":"'uploader.illusive.progress'"},{"type":"MemberExpression","start":11345,"end":11360,"loc":{"start":{"line":371,"column":6},"end":{"line":371,"column":21}},"object":{"type":"ThisExpression","start":11345,"end":11349,"loc":{"start":{"line":371,"column":6},"end":{"line":371,"column":10}}},"property":{"type":"Identifier","start":11350,"end":11360,"loc":{"start":{"line":371,"column":11},"end":{"line":371,"column":21}},"name":"shortToken"},"computed":false}]}},{"type":"ExpressionStatement","start":11371,"end":11423,"loc":{"start":{"line":373,"column":4},"end":{"line":373,"column":56}},"expression":{"type":"CallExpression","start":11371,"end":11423,"loc":{"start":{"line":373,"column":4},"end":{"line":373,"column":56}},"callee":{"type":"MemberExpression","start":11371,"end":11388,"loc":{"start":{"line":373,"column":4},"end":{"line":373,"column":21}},"object":{"type":"ThisExpression","start":11371,"end":11375,"loc":{"start":{"line":373,"column":4},"end":{"line":373,"column":8}}},"property":{"type":"Identifier","start":11376,"end":11388,"loc":{"start":{"line":373,"column":9},"end":{"line":373,"column":21}},"name":"emitProgress"},"computed":false},"arguments":[{"type":"Identifier","start":11389,"end":11410,"loc":{"start":{"line":373,"column":22},"end":{"line":373,"column":43}},"name":"illusiveBytesUploaded"},{"type":"Identifier","start":11412,"end":11422,"loc":{"start":{"line":373,"column":45},"end":{"line":373,"column":55}},"name":"bytesTotal"}]}}],"comments":[{"type":"Block","value":"*\n   * This method emits upload progress but also creates an \"upload progress\" illusion\n   * for the waiting period while only download is happening. Hence, it combines both\n   * download and upload into an upload progress.\n   * @see emitProgress\n   * @param {number=} bytesUploaded the bytes actually Uploaded so far\n   ","start":10391,"end":10716,"loc":{"start":{"line":348,"column":2},"end":{"line":354,"column":5}}}]}}},{"type":"MethodDefinition","start":11522,"end":12415,"loc":{"start":{"line":381,"column":2},"end":{"line":406,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":11522,"end":11534,"loc":{"start":{"line":381,"column":2},"end":{"line":381,"column":14}},"name":"emitProgress"},"value":{"type":"FunctionExpression","start":11535,"end":12415,"loc":{"start":{"line":381,"column":15},"end":{"line":406,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":11536,"end":11549,"loc":{"start":{"line":381,"column":16},"end":{"line":381,"column":29}},"name":"bytesUploaded"},{"type":"Identifier","start":11551,"end":11561,"loc":{"start":{"line":381,"column":31},"end":{"line":381,"column":41}},"name":"bytesTotal"}],"body":{"type":"BlockStatement","start":11563,"end":12415,"loc":{"start":{"line":381,"column":43},"end":{"line":406,"column":3}},"body":[{"type":"ExpressionStatement","start":11569,"end":11613,"loc":{"start":{"line":382,"column":4},"end":{"line":382,"column":48}},"expression":{"type":"AssignmentExpression","start":11569,"end":11613,"loc":{"start":{"line":382,"column":4},"end":{"line":382,"column":48}},"operator":"=","left":{"type":"Identifier","start":11569,"end":11579,"loc":{"start":{"line":382,"column":4},"end":{"line":382,"column":14}},"name":"bytesTotal"},"right":{"type":"LogicalExpression","start":11582,"end":11613,"loc":{"start":{"line":382,"column":17},"end":{"line":382,"column":48}},"left":{"type":"Identifier","start":11582,"end":11592,"loc":{"start":{"line":382,"column":17},"end":{"line":382,"column":27}},"name":"bytesTotal"},"operator":"||","right":{"type":"MemberExpression","start":11596,"end":11613,"loc":{"start":{"line":382,"column":31},"end":{"line":382,"column":48}},"object":{"type":"MemberExpression","start":11596,"end":11608,"loc":{"start":{"line":382,"column":31},"end":{"line":382,"column":43}},"object":{"type":"ThisExpression","start":11596,"end":11600,"loc":{"start":{"line":382,"column":31},"end":{"line":382,"column":35}}},"property":{"type":"Identifier","start":11601,"end":11608,"loc":{"start":{"line":382,"column":36},"end":{"line":382,"column":43}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":11609,"end":11613,"loc":{"start":{"line":382,"column":44},"end":{"line":382,"column":48}},"name":"size"},"computed":false}}}},{"type":"IfStatement","start":11618,"end":11738,"loc":{"start":{"line":383,"column":4},"end":{"line":385,"column":5}},"test":{"type":"LogicalExpression","start":11622,"end":11692,"loc":{"start":{"line":383,"column":8},"end":{"line":383,"column":78}},"left":{"type":"LogicalExpression","start":11622,"end":11671,"loc":{"start":{"line":383,"column":8},"end":{"line":383,"column":57}},"left":{"type":"MemberExpression","start":11622,"end":11630,"loc":{"start":{"line":383,"column":8},"end":{"line":383,"column":16}},"object":{"type":"ThisExpression","start":11622,"end":11626,"loc":{"start":{"line":383,"column":8},"end":{"line":383,"column":12}}},"property":{"type":"Identifier","start":11627,"end":11630,"loc":{"start":{"line":383,"column":13},"end":{"line":383,"column":16}},"name":"tus"},"computed":false},"operator":"&&","right":{"type":"MemberExpression","start":11634,"end":11671,"loc":{"start":{"line":383,"column":20},"end":{"line":383,"column":57}},"object":{"type":"MemberExpression","start":11634,"end":11650,"loc":{"start":{"line":383,"column":20},"end":{"line":383,"column":36}},"object":{"type":"MemberExpression","start":11634,"end":11642,"loc":{"start":{"line":383,"column":20},"end":{"line":383,"column":28}},"object":{"type":"ThisExpression","start":11634,"end":11638,"loc":{"start":{"line":383,"column":20},"end":{"line":383,"column":24}}},"property":{"type":"Identifier","start":11639,"end":11642,"loc":{"start":{"line":383,"column":25},"end":{"line":383,"column":28}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":11643,"end":11650,"loc":{"start":{"line":383,"column":29},"end":{"line":383,"column":36}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":11651,"end":11671,"loc":{"start":{"line":383,"column":37},"end":{"line":383,"column":57}},"name":"uploadLengthDeferred"},"computed":false}},"operator":"&&","right":{"type":"MemberExpression","start":11675,"end":11692,"loc":{"start":{"line":383,"column":61},"end":{"line":383,"column":78}},"object":{"type":"ThisExpression","start":11675,"end":11679,"loc":{"start":{"line":383,"column":61},"end":{"line":383,"column":65}}},"property":{"type":"Identifier","start":11680,"end":11692,"loc":{"start":{"line":383,"column":66},"end":{"line":383,"column":78}},"name":"streamsEnded"},"computed":false}},"consequent":{"type":"BlockStatement","start":11694,"end":11738,"loc":{"start":{"line":383,"column":80},"end":{"line":385,"column":5}},"body":[{"type":"ExpressionStatement","start":11702,"end":11732,"loc":{"start":{"line":384,"column":6},"end":{"line":384,"column":36}},"expression":{"type":"AssignmentExpression","start":11702,"end":11732,"loc":{"start":{"line":384,"column":6},"end":{"line":384,"column":36}},"operator":"=","left":{"type":"Identifier","start":11702,"end":11712,"loc":{"start":{"line":384,"column":6},"end":{"line":384,"column":16}},"name":"bytesTotal"},"right":{"type":"MemberExpression","start":11715,"end":11732,"loc":{"start":{"line":384,"column":19},"end":{"line":384,"column":36}},"object":{"type":"ThisExpression","start":11715,"end":11719,"loc":{"start":{"line":384,"column":19},"end":{"line":384,"column":23}}},"property":{"type":"Identifier","start":11720,"end":11732,"loc":{"start":{"line":384,"column":24},"end":{"line":384,"column":36}},"name":"bytesWritten"},"computed":false}}}]},"alternate":null},{"type":"VariableDeclaration","start":11743,"end":11796,"loc":{"start":{"line":386,"column":4},"end":{"line":386,"column":57}},"declarations":[{"type":"VariableDeclarator","start":11749,"end":11796,"loc":{"start":{"line":386,"column":10},"end":{"line":386,"column":57}},"id":{"type":"Identifier","start":11749,"end":11759,"loc":{"start":{"line":386,"column":10},"end":{"line":386,"column":20}},"name":"percentage"},"init":{"type":"BinaryExpression","start":11763,"end":11795,"loc":{"start":{"line":386,"column":24},"end":{"line":386,"column":56}},"left":{"type":"BinaryExpression","start":11763,"end":11789,"loc":{"start":{"line":386,"column":24},"end":{"line":386,"column":50}},"left":{"type":"Identifier","start":11763,"end":11776,"loc":{"start":{"line":386,"column":24},"end":{"line":386,"column":37}},"name":"bytesUploaded"},"operator":"/","right":{"type":"Identifier","start":11779,"end":11789,"loc":{"start":{"line":386,"column":40},"end":{"line":386,"column":50}},"name":"bytesTotal"}},"operator":"*","right":{"type":"Literal","start":11792,"end":11795,"loc":{"start":{"line":386,"column":53},"end":{"line":386,"column":56}},"value":100,"raw":"100"}}}],"kind":"const"},{"type":"VariableDeclaration","start":11801,"end":11847,"loc":{"start":{"line":387,"column":4},"end":{"line":387,"column":50}},"declarations":[{"type":"VariableDeclarator","start":11807,"end":11847,"loc":{"start":{"line":387,"column":10},"end":{"line":387,"column":50}},"id":{"type":"Identifier","start":11807,"end":11823,"loc":{"start":{"line":387,"column":10},"end":{"line":387,"column":26}},"name":"formatPercentage"},"init":{"type":"CallExpression","start":11826,"end":11847,"loc":{"start":{"line":387,"column":29},"end":{"line":387,"column":50}},"callee":{"type":"MemberExpression","start":11826,"end":11844,"loc":{"start":{"line":387,"column":29},"end":{"line":387,"column":47}},"object":{"type":"Identifier","start":11826,"end":11836,"loc":{"start":{"line":387,"column":29},"end":{"line":387,"column":39}},"name":"percentage"},"property":{"type":"Identifier","start":11837,"end":11844,"loc":{"start":{"line":387,"column":40},"end":{"line":387,"column":47}},"name":"toFixed"},"computed":false},"arguments":[{"type":"Literal","start":11845,"end":11846,"loc":{"start":{"line":387,"column":48},"end":{"line":387,"column":49}},"value":2,"raw":"2"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":11852,"end":11988,"loc":{"start":{"line":388,"column":4},"end":{"line":392,"column":5}},"expression":{"type":"CallExpression","start":11852,"end":11988,"loc":{"start":{"line":388,"column":4},"end":{"line":392,"column":5}},"callee":{"type":"MemberExpression","start":11852,"end":11864,"loc":{"start":{"line":388,"column":4},"end":{"line":388,"column":16}},"object":{"type":"Identifier","start":11852,"end":11858,"loc":{"start":{"line":388,"column":4},"end":{"line":388,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":11859,"end":11864,"loc":{"start":{"line":388,"column":11},"end":{"line":388,"column":16}},"name":"debug"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":11872,"end":11925,"loc":{"start":{"line":389,"column":6},"end":{"line":389,"column":59}},"expressions":[{"type":"Identifier","start":11875,"end":11888,"loc":{"start":{"line":389,"column":9},"end":{"line":389,"column":22}},"name":"bytesUploaded"},{"type":"Identifier","start":11892,"end":11902,"loc":{"start":{"line":389,"column":26},"end":{"line":389,"column":36}},"name":"bytesTotal"},{"type":"Identifier","start":11906,"end":11922,"loc":{"start":{"line":389,"column":40},"end":{"line":389,"column":56}},"name":"formatPercentage"}],"quasis":[{"type":"TemplateElement","start":11873,"end":11873,"loc":{"start":{"line":389,"column":7},"end":{"line":389,"column":7}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":11889,"end":11890,"loc":{"start":{"line":389,"column":23},"end":{"line":389,"column":24}},"value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","start":11903,"end":11904,"loc":{"start":{"line":389,"column":37},"end":{"line":389,"column":38}},"value":{"raw":" ","cooked":" "},"tail":false},{"type":"TemplateElement","start":11923,"end":11924,"loc":{"start":{"line":389,"column":57},"end":{"line":389,"column":58}},"value":{"raw":"%","cooked":"%"},"tail":true}]},{"type":"Literal","start":11933,"end":11959,"loc":{"start":{"line":390,"column":6},"end":{"line":390,"column":32}},"value":"uploader.upload.progress","raw":"'uploader.upload.progress'"},{"type":"MemberExpression","start":11967,"end":11982,"loc":{"start":{"line":391,"column":6},"end":{"line":391,"column":21}},"object":{"type":"ThisExpression","start":11967,"end":11971,"loc":{"start":{"line":391,"column":6},"end":{"line":391,"column":10}}},"property":{"type":"Identifier","start":11972,"end":11982,"loc":{"start":{"line":391,"column":11},"end":{"line":391,"column":21}},"name":"shortToken"},"computed":false}]}},{"type":"VariableDeclaration","start":11994,"end":12119,"loc":{"start":{"line":394,"column":4},"end":{"line":397,"column":5}},"declarations":[{"type":"VariableDeclarator","start":12000,"end":12119,"loc":{"start":{"line":394,"column":10},"end":{"line":397,"column":5}},"id":{"type":"Identifier","start":12000,"end":12010,"loc":{"start":{"line":394,"column":10},"end":{"line":394,"column":20}},"name":"dataToEmit"},"init":{"type":"ObjectExpression","start":12013,"end":12119,"loc":{"start":{"line":394,"column":23},"end":{"line":397,"column":5}},"properties":[{"type":"Property","start":12021,"end":12039,"loc":{"start":{"line":395,"column":6},"end":{"line":395,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12021,"end":12027,"loc":{"start":{"line":395,"column":6},"end":{"line":395,"column":12}},"name":"action"},"value":{"type":"Literal","start":12029,"end":12039,"loc":{"start":{"line":395,"column":14},"end":{"line":395,"column":24}},"value":"progress","raw":"'progress'"},"kind":"init"},{"type":"Property","start":12047,"end":12113,"loc":{"start":{"line":396,"column":6},"end":{"line":396,"column":72}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12047,"end":12054,"loc":{"start":{"line":396,"column":6},"end":{"line":396,"column":13}},"name":"payload"},"value":{"type":"ObjectExpression","start":12056,"end":12113,"loc":{"start":{"line":396,"column":15},"end":{"line":396,"column":72}},"properties":[{"type":"Property","start":12058,"end":12084,"loc":{"start":{"line":396,"column":17},"end":{"line":396,"column":43}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12058,"end":12066,"loc":{"start":{"line":396,"column":17},"end":{"line":396,"column":25}},"name":"progress"},"value":{"type":"Identifier","start":12068,"end":12084,"loc":{"start":{"line":396,"column":27},"end":{"line":396,"column":43}},"name":"formatPercentage"},"kind":"init"},{"type":"Property","start":12086,"end":12099,"loc":{"start":{"line":396,"column":45},"end":{"line":396,"column":58}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":12086,"end":12099,"loc":{"start":{"line":396,"column":45},"end":{"line":396,"column":58}},"name":"bytesUploaded"},"kind":"init","value":{"type":"Identifier","start":12086,"end":12099,"loc":{"start":{"line":396,"column":45},"end":{"line":396,"column":58}},"name":"bytesUploaded"}},{"type":"Property","start":12101,"end":12111,"loc":{"start":{"line":396,"column":60},"end":{"line":396,"column":70}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":12101,"end":12111,"loc":{"start":{"line":396,"column":60},"end":{"line":396,"column":70}},"name":"bytesTotal"},"kind":"init","value":{"type":"Identifier","start":12101,"end":12111,"loc":{"start":{"line":396,"column":60},"end":{"line":396,"column":70}},"name":"bytesTotal"}}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":12124,"end":12150,"loc":{"start":{"line":398,"column":4},"end":{"line":398,"column":30}},"expression":{"type":"CallExpression","start":12124,"end":12150,"loc":{"start":{"line":398,"column":4},"end":{"line":398,"column":30}},"callee":{"type":"MemberExpression","start":12124,"end":12138,"loc":{"start":{"line":398,"column":4},"end":{"line":398,"column":18}},"object":{"type":"ThisExpression","start":12124,"end":12128,"loc":{"start":{"line":398,"column":4},"end":{"line":398,"column":8}}},"property":{"type":"Identifier","start":12129,"end":12138,"loc":{"start":{"line":398,"column":9},"end":{"line":398,"column":18}},"name":"saveState"},"computed":false},"arguments":[{"type":"Identifier","start":12139,"end":12149,"loc":{"start":{"line":398,"column":19},"end":{"line":398,"column":29}},"name":"dataToEmit"}]}},{"type":"VariableDeclaration","start":12211,"end":12259,"loc":{"start":{"line":401,"column":4},"end":{"line":401,"column":52}},"declarations":[{"type":"VariableDeclarator","start":12217,"end":12259,"loc":{"start":{"line":401,"column":10},"end":{"line":401,"column":52}},"id":{"type":"Identifier","start":12217,"end":12234,"loc":{"start":{"line":401,"column":10},"end":{"line":401,"column":27}},"name":"roundedPercentage"},"init":{"type":"CallExpression","start":12237,"end":12259,"loc":{"start":{"line":401,"column":30},"end":{"line":401,"column":52}},"callee":{"type":"MemberExpression","start":12237,"end":12247,"loc":{"start":{"line":401,"column":30},"end":{"line":401,"column":40}},"object":{"type":"Identifier","start":12237,"end":12241,"loc":{"start":{"line":401,"column":30},"end":{"line":401,"column":34}},"name":"Math"},"property":{"type":"Identifier","start":12242,"end":12247,"loc":{"start":{"line":401,"column":35},"end":{"line":401,"column":40}},"name":"floor"},"computed":false},"arguments":[{"type":"Identifier","start":12248,"end":12258,"loc":{"start":{"line":401,"column":41},"end":{"line":401,"column":51}},"name":"percentage"}]}}],"kind":"const","comments":[{"type":"Line","value":" avoid flooding the client with progress events.","start":12156,"end":12206,"loc":{"start":{"line":400,"column":4},"end":{"line":400,"column":54}}}]},{"type":"IfStatement","start":12264,"end":12411,"loc":{"start":{"line":402,"column":4},"end":{"line":405,"column":5}},"test":{"type":"BinaryExpression","start":12268,"end":12310,"loc":{"start":{"line":402,"column":8},"end":{"line":402,"column":50}},"left":{"type":"MemberExpression","start":12268,"end":12288,"loc":{"start":{"line":402,"column":8},"end":{"line":402,"column":28}},"object":{"type":"ThisExpression","start":12268,"end":12272,"loc":{"start":{"line":402,"column":8},"end":{"line":402,"column":12}}},"property":{"type":"Identifier","start":12273,"end":12288,"loc":{"start":{"line":402,"column":13},"end":{"line":402,"column":28}},"name":"emittedProgress"},"computed":false},"operator":"!==","right":{"type":"Identifier","start":12293,"end":12310,"loc":{"start":{"line":402,"column":33},"end":{"line":402,"column":50}},"name":"roundedPercentage"}},"consequent":{"type":"BlockStatement","start":12312,"end":12411,"loc":{"start":{"line":402,"column":52},"end":{"line":405,"column":5}},"body":[{"type":"ExpressionStatement","start":12320,"end":12360,"loc":{"start":{"line":403,"column":6},"end":{"line":403,"column":46}},"expression":{"type":"AssignmentExpression","start":12320,"end":12360,"loc":{"start":{"line":403,"column":6},"end":{"line":403,"column":46}},"operator":"=","left":{"type":"MemberExpression","start":12320,"end":12340,"loc":{"start":{"line":403,"column":6},"end":{"line":403,"column":26}},"object":{"type":"ThisExpression","start":12320,"end":12324,"loc":{"start":{"line":403,"column":6},"end":{"line":403,"column":10}}},"property":{"type":"Identifier","start":12325,"end":12340,"loc":{"start":{"line":403,"column":11},"end":{"line":403,"column":26}},"name":"emittedProgress"},"computed":false},"right":{"type":"Identifier","start":12343,"end":12360,"loc":{"start":{"line":403,"column":29},"end":{"line":403,"column":46}},"name":"roundedPercentage"}}},{"type":"ExpressionStatement","start":12367,"end":12405,"loc":{"start":{"line":404,"column":6},"end":{"line":404,"column":44}},"expression":{"type":"CallExpression","start":12367,"end":12405,"loc":{"start":{"line":404,"column":6},"end":{"line":404,"column":44}},"callee":{"type":"MemberExpression","start":12367,"end":12381,"loc":{"start":{"line":404,"column":6},"end":{"line":404,"column":20}},"object":{"type":"CallExpression","start":12367,"end":12376,"loc":{"start":{"line":404,"column":6},"end":{"line":404,"column":15}},"callee":{"type":"Identifier","start":12367,"end":12374,"loc":{"start":{"line":404,"column":6},"end":{"line":404,"column":13}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":12377,"end":12381,"loc":{"start":{"line":404,"column":16},"end":{"line":404,"column":20}},"name":"emit"},"computed":false},"arguments":[{"type":"MemberExpression","start":12382,"end":12392,"loc":{"start":{"line":404,"column":21},"end":{"line":404,"column":31}},"object":{"type":"ThisExpression","start":12382,"end":12386,"loc":{"start":{"line":404,"column":21},"end":{"line":404,"column":25}}},"property":{"type":"Identifier","start":12387,"end":12392,"loc":{"start":{"line":404,"column":26},"end":{"line":404,"column":31}},"name":"token"},"computed":false},{"type":"Identifier","start":12394,"end":12404,"loc":{"start":{"line":404,"column":33},"end":{"line":404,"column":43}},"name":"dataToEmit"}]}}]},"alternate":null}],"comments":[{"type":"Block","value":"*\n   *\n   * @param {number} bytesUploaded\n   * @param {number | null} bytesTotal\n   ","start":11431,"end":11519,"loc":{"start":{"line":376,"column":2},"end":{"line":380,"column":5}}}]}}},{"type":"MethodDefinition","start":12492,"end":12720,"loc":{"start":{"line":413,"column":2},"end":{"line":420,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":12492,"end":12503,"loc":{"start":{"line":413,"column":2},"end":{"line":413,"column":13}},"name":"emitSuccess"},"value":{"type":"FunctionExpression","start":12504,"end":12720,"loc":{"start":{"line":413,"column":14},"end":{"line":420,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":12505,"end":12508,"loc":{"start":{"line":413,"column":15},"end":{"line":413,"column":18}},"name":"url"},{"type":"AssignmentPattern","start":12510,"end":12524,"loc":{"start":{"line":413,"column":20},"end":{"line":413,"column":34}},"left":{"type":"Identifier","start":12510,"end":12519,"loc":{"start":{"line":413,"column":20},"end":{"line":413,"column":29}},"name":"extraData"},"right":{"type":"ObjectExpression","start":12522,"end":12524,"loc":{"start":{"line":413,"column":32},"end":{"line":413,"column":34}},"properties":[],"comments":[{"type":"Block","value":"*\n   *\n   * @param {string} url\n   * @param {object} extraData\n   ","start":12419,"end":12489,"loc":{"start":{"line":408,"column":2},"end":{"line":412,"column":5}}}]}}],"body":{"type":"BlockStatement","start":12526,"end":12720,"loc":{"start":{"line":413,"column":36},"end":{"line":420,"column":3}},"body":[{"type":"VariableDeclaration","start":12532,"end":12646,"loc":{"start":{"line":414,"column":4},"end":{"line":417,"column":5}},"declarations":[{"type":"VariableDeclarator","start":12538,"end":12646,"loc":{"start":{"line":414,"column":10},"end":{"line":417,"column":5}},"id":{"type":"Identifier","start":12538,"end":12546,"loc":{"start":{"line":414,"column":10},"end":{"line":414,"column":18}},"name":"emitData"},"init":{"type":"ObjectExpression","start":12549,"end":12646,"loc":{"start":{"line":414,"column":21},"end":{"line":417,"column":5}},"properties":[{"type":"Property","start":12557,"end":12574,"loc":{"start":{"line":415,"column":6},"end":{"line":415,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12557,"end":12563,"loc":{"start":{"line":415,"column":6},"end":{"line":415,"column":12}},"name":"action"},"value":{"type":"Literal","start":12565,"end":12574,"loc":{"start":{"line":415,"column":14},"end":{"line":415,"column":23}},"value":"success","raw":"'success'"},"kind":"init"},{"type":"Property","start":12582,"end":12640,"loc":{"start":{"line":416,"column":6},"end":{"line":416,"column":64}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12582,"end":12589,"loc":{"start":{"line":416,"column":6},"end":{"line":416,"column":13}},"name":"payload"},"value":{"type":"CallExpression","start":12591,"end":12640,"loc":{"start":{"line":416,"column":15},"end":{"line":416,"column":64}},"callee":{"type":"MemberExpression","start":12591,"end":12604,"loc":{"start":{"line":416,"column":15},"end":{"line":416,"column":28}},"object":{"type":"Identifier","start":12591,"end":12597,"loc":{"start":{"line":416,"column":15},"end":{"line":416,"column":21}},"name":"Object"},"property":{"type":"Identifier","start":12598,"end":12604,"loc":{"start":{"line":416,"column":22},"end":{"line":416,"column":28}},"name":"assign"},"computed":false},"arguments":[{"type":"Identifier","start":12605,"end":12614,"loc":{"start":{"line":416,"column":29},"end":{"line":416,"column":38}},"name":"extraData"},{"type":"ObjectExpression","start":12616,"end":12639,"loc":{"start":{"line":416,"column":40},"end":{"line":416,"column":63}},"properties":[{"type":"Property","start":12618,"end":12632,"loc":{"start":{"line":416,"column":42},"end":{"line":416,"column":56}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12618,"end":12626,"loc":{"start":{"line":416,"column":42},"end":{"line":416,"column":50}},"name":"complete"},"value":{"type":"Literal","start":12628,"end":12632,"loc":{"start":{"line":416,"column":52},"end":{"line":416,"column":56}},"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":12634,"end":12637,"loc":{"start":{"line":416,"column":58},"end":{"line":416,"column":61}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":12634,"end":12637,"loc":{"start":{"line":416,"column":58},"end":{"line":416,"column":61}},"name":"url"},"kind":"init","value":{"type":"Identifier","start":12634,"end":12637,"loc":{"start":{"line":416,"column":58},"end":{"line":416,"column":61}},"name":"url"}}]}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":12651,"end":12675,"loc":{"start":{"line":418,"column":4},"end":{"line":418,"column":28}},"expression":{"type":"CallExpression","start":12651,"end":12675,"loc":{"start":{"line":418,"column":4},"end":{"line":418,"column":28}},"callee":{"type":"MemberExpression","start":12651,"end":12665,"loc":{"start":{"line":418,"column":4},"end":{"line":418,"column":18}},"object":{"type":"ThisExpression","start":12651,"end":12655,"loc":{"start":{"line":418,"column":4},"end":{"line":418,"column":8}}},"property":{"type":"Identifier","start":12656,"end":12665,"loc":{"start":{"line":418,"column":9},"end":{"line":418,"column":18}},"name":"saveState"},"computed":false},"arguments":[{"type":"Identifier","start":12666,"end":12674,"loc":{"start":{"line":418,"column":19},"end":{"line":418,"column":27}},"name":"emitData"}]}},{"type":"ExpressionStatement","start":12680,"end":12716,"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":40}},"expression":{"type":"CallExpression","start":12680,"end":12716,"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":40}},"callee":{"type":"MemberExpression","start":12680,"end":12694,"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":18}},"object":{"type":"CallExpression","start":12680,"end":12689,"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":13}},"callee":{"type":"Identifier","start":12680,"end":12687,"loc":{"start":{"line":419,"column":4},"end":{"line":419,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":12690,"end":12694,"loc":{"start":{"line":419,"column":14},"end":{"line":419,"column":18}},"name":"emit"},"computed":false},"arguments":[{"type":"MemberExpression","start":12695,"end":12705,"loc":{"start":{"line":419,"column":19},"end":{"line":419,"column":29}},"object":{"type":"ThisExpression","start":12695,"end":12699,"loc":{"start":{"line":419,"column":19},"end":{"line":419,"column":23}}},"property":{"type":"Identifier","start":12700,"end":12705,"loc":{"start":{"line":419,"column":24},"end":{"line":419,"column":29}},"name":"token"},"computed":false},{"type":"Identifier","start":12707,"end":12715,"loc":{"start":{"line":419,"column":31},"end":{"line":419,"column":39}},"name":"emitData"}]}}]}}},{"type":"MethodDefinition","start":12797,"end":13164,"loc":{"start":{"line":427,"column":2},"end":{"line":437,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":12797,"end":12806,"loc":{"start":{"line":427,"column":2},"end":{"line":427,"column":11}},"name":"emitError"},"value":{"type":"FunctionExpression","start":12807,"end":13164,"loc":{"start":{"line":427,"column":12},"end":{"line":437,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":12808,"end":12811,"loc":{"start":{"line":427,"column":13},"end":{"line":427,"column":16}},"name":"err"},{"type":"AssignmentPattern","start":12813,"end":12827,"loc":{"start":{"line":427,"column":18},"end":{"line":427,"column":32}},"left":{"type":"Identifier","start":12813,"end":12822,"loc":{"start":{"line":427,"column":18},"end":{"line":427,"column":27}},"name":"extraData"},"right":{"type":"ObjectExpression","start":12825,"end":12827,"loc":{"start":{"line":427,"column":30},"end":{"line":427,"column":32}},"properties":[],"comments":[{"type":"Block","value":"*\n   *\n   * @param {Error} err\n   * @param {object=} extraData\n   ","start":12724,"end":12794,"loc":{"start":{"line":422,"column":2},"end":{"line":426,"column":5}}}]}}],"body":{"type":"BlockStatement","start":12829,"end":13164,"loc":{"start":{"line":427,"column":34},"end":{"line":437,"column":3}},"body":[{"type":"VariableDeclaration","start":12835,"end":12876,"loc":{"start":{"line":428,"column":4},"end":{"line":428,"column":45}},"declarations":[{"type":"VariableDeclarator","start":12841,"end":12876,"loc":{"start":{"line":428,"column":10},"end":{"line":428,"column":45}},"id":{"type":"Identifier","start":12841,"end":12854,"loc":{"start":{"line":428,"column":10},"end":{"line":428,"column":23}},"name":"serializedErr"},"init":{"type":"CallExpression","start":12857,"end":12876,"loc":{"start":{"line":428,"column":26},"end":{"line":428,"column":45}},"callee":{"type":"Identifier","start":12857,"end":12871,"loc":{"start":{"line":428,"column":26},"end":{"line":428,"column":40}},"name":"serializeError"},"arguments":[{"type":"Identifier","start":12872,"end":12875,"loc":{"start":{"line":428,"column":41},"end":{"line":428,"column":44}},"name":"err"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":12940,"end":12966,"loc":{"start":{"line":430,"column":4},"end":{"line":430,"column":30}},"expression":{"type":"UnaryExpression","start":12940,"end":12966,"loc":{"start":{"line":430,"column":4},"end":{"line":430,"column":30}},"operator":"delete","prefix":true,"argument":{"type":"MemberExpression","start":12947,"end":12966,"loc":{"start":{"line":430,"column":11},"end":{"line":430,"column":30}},"object":{"type":"Identifier","start":12947,"end":12960,"loc":{"start":{"line":430,"column":11},"end":{"line":430,"column":24}},"name":"serializedErr"},"property":{"type":"Identifier","start":12961,"end":12966,"loc":{"start":{"line":430,"column":25},"end":{"line":430,"column":30}},"name":"stack"},"computed":false}},"comments":[{"type":"Line","value":" delete stack to avoid sending server info to client","start":12881,"end":12935,"loc":{"start":{"line":429,"column":4},"end":{"line":429,"column":58}}}]},{"type":"VariableDeclaration","start":12971,"end":13086,"loc":{"start":{"line":431,"column":4},"end":{"line":434,"column":5}},"declarations":[{"type":"VariableDeclarator","start":12977,"end":13086,"loc":{"start":{"line":431,"column":10},"end":{"line":434,"column":5}},"id":{"type":"Identifier","start":12977,"end":12987,"loc":{"start":{"line":431,"column":10},"end":{"line":431,"column":20}},"name":"dataToEmit"},"init":{"type":"ObjectExpression","start":12990,"end":13086,"loc":{"start":{"line":431,"column":23},"end":{"line":434,"column":5}},"properties":[{"type":"Property","start":12998,"end":13013,"loc":{"start":{"line":432,"column":6},"end":{"line":432,"column":21}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":12998,"end":13004,"loc":{"start":{"line":432,"column":6},"end":{"line":432,"column":12}},"name":"action"},"value":{"type":"Literal","start":13006,"end":13013,"loc":{"start":{"line":432,"column":14},"end":{"line":432,"column":21}},"value":"error","raw":"'error'"},"kind":"init"},{"type":"Property","start":13021,"end":13080,"loc":{"start":{"line":433,"column":6},"end":{"line":433,"column":65}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13021,"end":13028,"loc":{"start":{"line":433,"column":6},"end":{"line":433,"column":13}},"name":"payload"},"value":{"type":"CallExpression","start":13030,"end":13080,"loc":{"start":{"line":433,"column":15},"end":{"line":433,"column":65}},"callee":{"type":"MemberExpression","start":13030,"end":13043,"loc":{"start":{"line":433,"column":15},"end":{"line":433,"column":28}},"object":{"type":"Identifier","start":13030,"end":13036,"loc":{"start":{"line":433,"column":15},"end":{"line":433,"column":21}},"name":"Object"},"property":{"type":"Identifier","start":13037,"end":13043,"loc":{"start":{"line":433,"column":22},"end":{"line":433,"column":28}},"name":"assign"},"computed":false},"arguments":[{"type":"Identifier","start":13044,"end":13053,"loc":{"start":{"line":433,"column":29},"end":{"line":433,"column":38}},"name":"extraData"},{"type":"ObjectExpression","start":13055,"end":13079,"loc":{"start":{"line":433,"column":40},"end":{"line":433,"column":64}},"properties":[{"type":"Property","start":13057,"end":13077,"loc":{"start":{"line":433,"column":42},"end":{"line":433,"column":62}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13057,"end":13062,"loc":{"start":{"line":433,"column":42},"end":{"line":433,"column":47}},"name":"error"},"value":{"type":"Identifier","start":13064,"end":13077,"loc":{"start":{"line":433,"column":49},"end":{"line":433,"column":62}},"name":"serializedErr"},"kind":"init"}]}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":13091,"end":13117,"loc":{"start":{"line":435,"column":4},"end":{"line":435,"column":30}},"expression":{"type":"CallExpression","start":13091,"end":13117,"loc":{"start":{"line":435,"column":4},"end":{"line":435,"column":30}},"callee":{"type":"MemberExpression","start":13091,"end":13105,"loc":{"start":{"line":435,"column":4},"end":{"line":435,"column":18}},"object":{"type":"ThisExpression","start":13091,"end":13095,"loc":{"start":{"line":435,"column":4},"end":{"line":435,"column":8}}},"property":{"type":"Identifier","start":13096,"end":13105,"loc":{"start":{"line":435,"column":9},"end":{"line":435,"column":18}},"name":"saveState"},"computed":false},"arguments":[{"type":"Identifier","start":13106,"end":13116,"loc":{"start":{"line":435,"column":19},"end":{"line":435,"column":29}},"name":"dataToEmit"}]}},{"type":"ExpressionStatement","start":13122,"end":13160,"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":42}},"expression":{"type":"CallExpression","start":13122,"end":13160,"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":42}},"callee":{"type":"MemberExpression","start":13122,"end":13136,"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":18}},"object":{"type":"CallExpression","start":13122,"end":13131,"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":13}},"callee":{"type":"Identifier","start":13122,"end":13129,"loc":{"start":{"line":436,"column":4},"end":{"line":436,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":13132,"end":13136,"loc":{"start":{"line":436,"column":14},"end":{"line":436,"column":18}},"name":"emit"},"computed":false},"arguments":[{"type":"MemberExpression","start":13137,"end":13147,"loc":{"start":{"line":436,"column":19},"end":{"line":436,"column":29}},"object":{"type":"ThisExpression","start":13137,"end":13141,"loc":{"start":{"line":436,"column":19},"end":{"line":436,"column":23}}},"property":{"type":"Identifier","start":13142,"end":13147,"loc":{"start":{"line":436,"column":24},"end":{"line":436,"column":29}},"name":"token"},"computed":false},{"type":"Identifier","start":13149,"end":13159,"loc":{"start":{"line":436,"column":31},"end":{"line":436,"column":41}},"name":"dataToEmit"}]}}]}}},{"type":"MethodDefinition","start":13206,"end":14498,"loc":{"start":{"line":442,"column":2},"end":{"line":488,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":13206,"end":13215,"loc":{"start":{"line":442,"column":2},"end":{"line":442,"column":11}},"name":"uploadTus"},"value":{"type":"FunctionExpression","start":13216,"end":14498,"loc":{"start":{"line":442,"column":12},"end":{"line":488,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":13219,"end":14498,"loc":{"start":{"line":442,"column":15},"end":{"line":488,"column":3}},"body":[{"type":"VariableDeclaration","start":13225,"end":13268,"loc":{"start":{"line":443,"column":4},"end":{"line":443,"column":47}},"declarations":[{"type":"VariableDeclarator","start":13231,"end":13268,"loc":{"start":{"line":443,"column":10},"end":{"line":443,"column":47}},"id":{"type":"Identifier","start":13231,"end":13235,"loc":{"start":{"line":443,"column":10},"end":{"line":443,"column":14}},"name":"file"},"init":{"type":"CallExpression","start":13238,"end":13268,"loc":{"start":{"line":443,"column":17},"end":{"line":443,"column":47}},"callee":{"type":"MemberExpression","start":13238,"end":13257,"loc":{"start":{"line":443,"column":17},"end":{"line":443,"column":36}},"object":{"type":"Identifier","start":13238,"end":13240,"loc":{"start":{"line":443,"column":17},"end":{"line":443,"column":19}},"name":"fs"},"property":{"type":"Identifier","start":13241,"end":13257,"loc":{"start":{"line":443,"column":20},"end":{"line":443,"column":36}},"name":"createReadStream"},"computed":false},"arguments":[{"type":"MemberExpression","start":13258,"end":13267,"loc":{"start":{"line":443,"column":37},"end":{"line":443,"column":46}},"object":{"type":"ThisExpression","start":13258,"end":13262,"loc":{"start":{"line":443,"column":37},"end":{"line":443,"column":41}}},"property":{"type":"Identifier","start":13263,"end":13267,"loc":{"start":{"line":443,"column":42},"end":{"line":443,"column":46}},"name":"path"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":13273,"end":13294,"loc":{"start":{"line":444,"column":4},"end":{"line":444,"column":25}},"declarations":[{"type":"VariableDeclarator","start":13279,"end":13294,"loc":{"start":{"line":444,"column":10},"end":{"line":444,"column":25}},"id":{"type":"Identifier","start":13279,"end":13287,"loc":{"start":{"line":444,"column":10},"end":{"line":444,"column":18}},"name":"uploader"},"init":{"type":"ThisExpression","start":13290,"end":13294,"loc":{"start":{"line":444,"column":21},"end":{"line":444,"column":25}}}}],"kind":"const"},{"type":"ExpressionStatement","start":13318,"end":14439,"loc":{"start":{"line":447,"column":4},"end":{"line":483,"column":6}},"expression":{"type":"AssignmentExpression","start":13318,"end":14439,"loc":{"start":{"line":447,"column":4},"end":{"line":483,"column":6}},"operator":"=","left":{"type":"MemberExpression","start":13318,"end":13326,"loc":{"start":{"line":447,"column":4},"end":{"line":447,"column":12}},"object":{"type":"ThisExpression","start":13318,"end":13322,"loc":{"start":{"line":447,"column":4},"end":{"line":447,"column":8}}},"property":{"type":"Identifier","start":13323,"end":13326,"loc":{"start":{"line":447,"column":9},"end":{"line":447,"column":12}},"name":"tus"},"computed":false},"right":{"type":"NewExpression","start":13329,"end":14439,"loc":{"start":{"line":447,"column":15},"end":{"line":483,"column":6}},"callee":{"type":"MemberExpression","start":13333,"end":13343,"loc":{"start":{"line":447,"column":19},"end":{"line":447,"column":29}},"object":{"type":"Identifier","start":13333,"end":13336,"loc":{"start":{"line":447,"column":19},"end":{"line":447,"column":22}},"name":"tus"},"property":{"type":"Identifier","start":13337,"end":13343,"loc":{"start":{"line":447,"column":23},"end":{"line":447,"column":29}},"name":"Upload"},"computed":false},"arguments":[{"type":"Identifier","start":13344,"end":13348,"loc":{"start":{"line":447,"column":30},"end":{"line":447,"column":34}},"name":"file"},{"type":"ObjectExpression","start":13350,"end":14438,"loc":{"start":{"line":447,"column":36},"end":{"line":483,"column":5}},"properties":[{"type":"Property","start":13358,"end":13389,"loc":{"start":{"line":448,"column":6},"end":{"line":448,"column":37}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13358,"end":13366,"loc":{"start":{"line":448,"column":6},"end":{"line":448,"column":14}},"name":"endpoint"},"value":{"type":"MemberExpression","start":13368,"end":13389,"loc":{"start":{"line":448,"column":16},"end":{"line":448,"column":37}},"object":{"type":"MemberExpression","start":13368,"end":13380,"loc":{"start":{"line":448,"column":16},"end":{"line":448,"column":28}},"object":{"type":"ThisExpression","start":13368,"end":13372,"loc":{"start":{"line":448,"column":16},"end":{"line":448,"column":20}}},"property":{"type":"Identifier","start":13373,"end":13380,"loc":{"start":{"line":448,"column":21},"end":{"line":448,"column":28}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":13381,"end":13389,"loc":{"start":{"line":448,"column":29},"end":{"line":448,"column":37}},"name":"endpoint"},"computed":false},"kind":"init"},{"type":"Property","start":13397,"end":13430,"loc":{"start":{"line":449,"column":6},"end":{"line":449,"column":39}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13397,"end":13406,"loc":{"start":{"line":449,"column":6},"end":{"line":449,"column":15}},"name":"uploadUrl"},"value":{"type":"MemberExpression","start":13408,"end":13430,"loc":{"start":{"line":449,"column":17},"end":{"line":449,"column":39}},"object":{"type":"MemberExpression","start":13408,"end":13420,"loc":{"start":{"line":449,"column":17},"end":{"line":449,"column":29}},"object":{"type":"ThisExpression","start":13408,"end":13412,"loc":{"start":{"line":449,"column":17},"end":{"line":449,"column":21}}},"property":{"type":"Identifier","start":13413,"end":13420,"loc":{"start":{"line":449,"column":22},"end":{"line":449,"column":29}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":13421,"end":13430,"loc":{"start":{"line":449,"column":30},"end":{"line":449,"column":39}},"name":"uploadUrl"},"computed":false},"kind":"init"},{"type":"Property","start":13458,"end":13485,"loc":{"start":{"line":451,"column":6},"end":{"line":451,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13458,"end":13478,"loc":{"start":{"line":451,"column":6},"end":{"line":451,"column":26}},"name":"uploadLengthDeferred"},"value":{"type":"Literal","start":13480,"end":13485,"loc":{"start":{"line":451,"column":28},"end":{"line":451,"column":33}},"value":false,"raw":"false"},"kind":"init","comments":[{"type":"Line","value":" @ts-ignore","start":13438,"end":13451,"loc":{"start":{"line":450,"column":6},"end":{"line":450,"column":19}}}]},{"type":"Property","start":13493,"end":13505,"loc":{"start":{"line":452,"column":6},"end":{"line":452,"column":18}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13493,"end":13499,"loc":{"start":{"line":452,"column":6},"end":{"line":452,"column":12}},"name":"resume"},"value":{"type":"Literal","start":13501,"end":13505,"loc":{"start":{"line":452,"column":14},"end":{"line":452,"column":18}},"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":13513,"end":13547,"loc":{"start":{"line":453,"column":6},"end":{"line":453,"column":40}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13513,"end":13524,"loc":{"start":{"line":453,"column":6},"end":{"line":453,"column":17}},"name":"retryDelays"},"value":{"type":"ArrayExpression","start":13526,"end":13547,"loc":{"start":{"line":453,"column":19},"end":{"line":453,"column":40}},"elements":[{"type":"Literal","start":13527,"end":13528,"loc":{"start":{"line":453,"column":20},"end":{"line":453,"column":21}},"value":0,"raw":"0"},{"type":"Literal","start":13530,"end":13534,"loc":{"start":{"line":453,"column":23},"end":{"line":453,"column":27}},"value":1000,"raw":"1000"},{"type":"Literal","start":13536,"end":13540,"loc":{"start":{"line":453,"column":29},"end":{"line":453,"column":33}},"value":3000,"raw":"3000"},{"type":"Literal","start":13542,"end":13546,"loc":{"start":{"line":453,"column":35},"end":{"line":453,"column":39}},"value":5000,"raw":"5000"}]},"kind":"init"},{"type":"Property","start":13555,"end":13584,"loc":{"start":{"line":454,"column":6},"end":{"line":454,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13555,"end":13565,"loc":{"start":{"line":454,"column":6},"end":{"line":454,"column":16}},"name":"uploadSize"},"value":{"type":"MemberExpression","start":13567,"end":13584,"loc":{"start":{"line":454,"column":18},"end":{"line":454,"column":35}},"object":{"type":"ThisExpression","start":13567,"end":13571,"loc":{"start":{"line":454,"column":18},"end":{"line":454,"column":22}}},"property":{"type":"Identifier","start":13572,"end":13584,"loc":{"start":{"line":454,"column":23},"end":{"line":454,"column":35}},"name":"bytesWritten"},"computed":false},"kind":"init"},{"type":"Property","start":13592,"end":13939,"loc":{"start":{"line":455,"column":6},"end":{"line":462,"column":7}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13592,"end":13600,"loc":{"start":{"line":455,"column":6},"end":{"line":455,"column":14}},"name":"metadata"},"value":{"type":"CallExpression","start":13602,"end":13939,"loc":{"start":{"line":455,"column":16},"end":{"line":462,"column":7}},"callee":{"type":"MemberExpression","start":13602,"end":13615,"loc":{"start":{"line":455,"column":16},"end":{"line":455,"column":29}},"object":{"type":"Identifier","start":13602,"end":13608,"loc":{"start":{"line":455,"column":16},"end":{"line":455,"column":22}},"name":"Object"},"property":{"type":"Identifier","start":13609,"end":13615,"loc":{"start":{"line":455,"column":23},"end":{"line":455,"column":29}},"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":13625,"end":13908,"loc":{"start":{"line":456,"column":8},"end":{"line":461,"column":9}},"properties":[{"type":"Property","start":13821,"end":13850,"loc":{"start":{"line":459,"column":10},"end":{"line":459,"column":39}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13821,"end":13829,"loc":{"start":{"line":459,"column":10},"end":{"line":459,"column":18}},"name":"filename"},"value":{"type":"MemberExpression","start":13831,"end":13850,"loc":{"start":{"line":459,"column":20},"end":{"line":459,"column":39}},"object":{"type":"ThisExpression","start":13831,"end":13835,"loc":{"start":{"line":459,"column":20},"end":{"line":459,"column":24}}},"property":{"type":"Identifier","start":13836,"end":13850,"loc":{"start":{"line":459,"column":25},"end":{"line":459,"column":39}},"name":"uploadFileName"},"computed":false},"kind":"init","comments":[{"type":"Line","value":" file name and type as required by the tusd tus server","start":13637,"end":13693,"loc":{"start":{"line":457,"column":10},"end":{"line":457,"column":66}}},{"type":"Line","value":" https://github.com/tus/tusd/blob/5b376141903c1fd64480c06dde3dfe61d191e53d/unrouted_handler.go#L614-L646","start":13704,"end":13810,"loc":{"start":{"line":458,"column":10},"end":{"line":458,"column":116}}}]},{"type":"Property","start":13862,"end":13898,"loc":{"start":{"line":460,"column":10},"end":{"line":460,"column":46}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":13862,"end":13870,"loc":{"start":{"line":460,"column":10},"end":{"line":460,"column":18}},"name":"filetype"},"value":{"type":"MemberExpression","start":13872,"end":13898,"loc":{"start":{"line":460,"column":20},"end":{"line":460,"column":46}},"object":{"type":"MemberExpression","start":13872,"end":13893,"loc":{"start":{"line":460,"column":20},"end":{"line":460,"column":41}},"object":{"type":"MemberExpression","start":13872,"end":13884,"loc":{"start":{"line":460,"column":20},"end":{"line":460,"column":32}},"object":{"type":"ThisExpression","start":13872,"end":13876,"loc":{"start":{"line":460,"column":20},"end":{"line":460,"column":24}}},"property":{"type":"Identifier","start":13877,"end":13884,"loc":{"start":{"line":460,"column":25},"end":{"line":460,"column":32}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":13885,"end":13893,"loc":{"start":{"line":460,"column":33},"end":{"line":460,"column":41}},"name":"metadata"},"computed":false},"property":{"type":"Identifier","start":13894,"end":13898,"loc":{"start":{"line":460,"column":42},"end":{"line":460,"column":46}},"name":"type"},"computed":false},"kind":"init"}]},{"type":"MemberExpression","start":13910,"end":13931,"loc":{"start":{"line":461,"column":11},"end":{"line":461,"column":32}},"object":{"type":"MemberExpression","start":13910,"end":13922,"loc":{"start":{"line":461,"column":11},"end":{"line":461,"column":23}},"object":{"type":"ThisExpression","start":13910,"end":13914,"loc":{"start":{"line":461,"column":11},"end":{"line":461,"column":15}}},"property":{"type":"Identifier","start":13915,"end":13922,"loc":{"start":{"line":461,"column":16},"end":{"line":461,"column":23}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":13923,"end":13931,"loc":{"start":{"line":461,"column":24},"end":{"line":461,"column":32}},"name":"metadata"},"computed":false}]},"kind":"init"},{"type":"Property","start":14006,"end":14115,"loc":{"start":{"line":467,"column":6},"end":{"line":470,"column":7}},"method":true,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":14006,"end":14013,"loc":{"start":{"line":467,"column":6},"end":{"line":467,"column":13}},"name":"onError"},"kind":"init","value":{"type":"FunctionExpression","start":14014,"end":14115,"loc":{"start":{"line":467,"column":14},"end":{"line":470,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":14015,"end":14020,"loc":{"start":{"line":467,"column":15},"end":{"line":467,"column":20}},"name":"error"}],"body":{"type":"BlockStatement","start":14022,"end":14115,"loc":{"start":{"line":467,"column":22},"end":{"line":470,"column":7}},"body":[{"type":"ExpressionStatement","start":14032,"end":14073,"loc":{"start":{"line":468,"column":8},"end":{"line":468,"column":49}},"expression":{"type":"CallExpression","start":14032,"end":14073,"loc":{"start":{"line":468,"column":8},"end":{"line":468,"column":49}},"callee":{"type":"MemberExpression","start":14032,"end":14044,"loc":{"start":{"line":468,"column":8},"end":{"line":468,"column":20}},"object":{"type":"Identifier","start":14032,"end":14038,"loc":{"start":{"line":468,"column":8},"end":{"line":468,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":14039,"end":14044,"loc":{"start":{"line":468,"column":15},"end":{"line":468,"column":20}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":14045,"end":14050,"loc":{"start":{"line":468,"column":21},"end":{"line":468,"column":26}},"name":"error"},{"type":"Literal","start":14052,"end":14072,"loc":{"start":{"line":468,"column":28},"end":{"line":468,"column":48}},"value":"uploader.tus.error","raw":"'uploader.tus.error'"}]}},{"type":"ExpressionStatement","start":14082,"end":14107,"loc":{"start":{"line":469,"column":8},"end":{"line":469,"column":33}},"expression":{"type":"CallExpression","start":14082,"end":14107,"loc":{"start":{"line":469,"column":8},"end":{"line":469,"column":33}},"callee":{"type":"MemberExpression","start":14082,"end":14100,"loc":{"start":{"line":469,"column":8},"end":{"line":469,"column":26}},"object":{"type":"Identifier","start":14082,"end":14090,"loc":{"start":{"line":469,"column":8},"end":{"line":469,"column":16}},"name":"uploader"},"property":{"type":"Identifier","start":14091,"end":14100,"loc":{"start":{"line":469,"column":17},"end":{"line":469,"column":26}},"name":"emitError"},"computed":false},"arguments":[{"type":"Identifier","start":14101,"end":14106,"loc":{"start":{"line":469,"column":27},"end":{"line":469,"column":32}},"name":"error"}]}}]}},"comments":[{"type":"Block","value":"*\n       *\n       * @param {Error} error\n       ","start":13947,"end":13999,"loc":{"start":{"line":463,"column":6},"end":{"line":466,"column":9}}}]},{"type":"Property","start":14227,"end":14328,"loc":{"start":{"line":476,"column":6},"end":{"line":478,"column":7}},"method":true,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":14227,"end":14237,"loc":{"start":{"line":476,"column":6},"end":{"line":476,"column":16}},"name":"onProgress"},"kind":"init","value":{"type":"FunctionExpression","start":14238,"end":14328,"loc":{"start":{"line":476,"column":17},"end":{"line":478,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":14239,"end":14252,"loc":{"start":{"line":476,"column":18},"end":{"line":476,"column":31}},"name":"bytesUploaded"},{"type":"Identifier","start":14254,"end":14264,"loc":{"start":{"line":476,"column":33},"end":{"line":476,"column":43}},"name":"bytesTotal"}],"body":{"type":"BlockStatement","start":14266,"end":14328,"loc":{"start":{"line":476,"column":45},"end":{"line":478,"column":7}},"body":[{"type":"ExpressionStatement","start":14276,"end":14320,"loc":{"start":{"line":477,"column":8},"end":{"line":477,"column":52}},"expression":{"type":"CallExpression","start":14276,"end":14320,"loc":{"start":{"line":477,"column":8},"end":{"line":477,"column":52}},"callee":{"type":"MemberExpression","start":14276,"end":14305,"loc":{"start":{"line":477,"column":8},"end":{"line":477,"column":37}},"object":{"type":"Identifier","start":14276,"end":14284,"loc":{"start":{"line":477,"column":8},"end":{"line":477,"column":16}},"name":"uploader"},"property":{"type":"Identifier","start":14285,"end":14305,"loc":{"start":{"line":477,"column":17},"end":{"line":477,"column":37}},"name":"emitIllusiveProgress"},"computed":false},"arguments":[{"type":"Identifier","start":14306,"end":14319,"loc":{"start":{"line":477,"column":38},"end":{"line":477,"column":51}},"name":"bytesUploaded"}]}}]}},"comments":[{"type":"Block","value":"*\n       *\n       * @param {number} bytesUploaded\n       * @param {number} bytesTotal\n       ","start":14123,"end":14220,"loc":{"start":{"line":471,"column":6},"end":{"line":475,"column":9}}}]},{"type":"Property","start":14336,"end":14432,"loc":{"start":{"line":479,"column":6},"end":{"line":482,"column":7}},"method":true,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":14336,"end":14345,"loc":{"start":{"line":479,"column":6},"end":{"line":479,"column":15}},"name":"onSuccess"},"kind":"init","value":{"type":"FunctionExpression","start":14346,"end":14432,"loc":{"start":{"line":479,"column":16},"end":{"line":482,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":14349,"end":14432,"loc":{"start":{"line":479,"column":19},"end":{"line":482,"column":7}},"body":[{"type":"ExpressionStatement","start":14359,"end":14397,"loc":{"start":{"line":480,"column":8},"end":{"line":480,"column":46}},"expression":{"type":"CallExpression","start":14359,"end":14397,"loc":{"start":{"line":480,"column":8},"end":{"line":480,"column":46}},"callee":{"type":"MemberExpression","start":14359,"end":14379,"loc":{"start":{"line":480,"column":8},"end":{"line":480,"column":28}},"object":{"type":"Identifier","start":14359,"end":14367,"loc":{"start":{"line":480,"column":8},"end":{"line":480,"column":16}},"name":"uploader"},"property":{"type":"Identifier","start":14368,"end":14379,"loc":{"start":{"line":480,"column":17},"end":{"line":480,"column":28}},"name":"emitSuccess"},"computed":false},"arguments":[{"type":"MemberExpression","start":14380,"end":14396,"loc":{"start":{"line":480,"column":29},"end":{"line":480,"column":45}},"object":{"type":"MemberExpression","start":14380,"end":14392,"loc":{"start":{"line":480,"column":29},"end":{"line":480,"column":41}},"object":{"type":"Identifier","start":14380,"end":14388,"loc":{"start":{"line":480,"column":29},"end":{"line":480,"column":37}},"name":"uploader"},"property":{"type":"Identifier","start":14389,"end":14392,"loc":{"start":{"line":480,"column":38},"end":{"line":480,"column":41}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":14393,"end":14396,"loc":{"start":{"line":480,"column":42},"end":{"line":480,"column":45}},"name":"url"},"computed":false}]}},{"type":"ExpressionStatement","start":14406,"end":14424,"loc":{"start":{"line":481,"column":8},"end":{"line":481,"column":26}},"expression":{"type":"CallExpression","start":14406,"end":14424,"loc":{"start":{"line":481,"column":8},"end":{"line":481,"column":26}},"callee":{"type":"MemberExpression","start":14406,"end":14422,"loc":{"start":{"line":481,"column":8},"end":{"line":481,"column":24}},"object":{"type":"Identifier","start":14406,"end":14414,"loc":{"start":{"line":481,"column":8},"end":{"line":481,"column":16}},"name":"uploader"},"property":{"type":"Identifier","start":14415,"end":14422,"loc":{"start":{"line":481,"column":17},"end":{"line":481,"column":24}},"name":"cleanUp"},"computed":false},"arguments":[]}}]}}}]}]}},"comments":[{"type":"Line","value":" @ts-ignore","start":13300,"end":13313,"loc":{"start":{"line":446,"column":4},"end":{"line":446,"column":17}}}]},{"type":"IfStatement","start":14445,"end":14494,"loc":{"start":{"line":485,"column":4},"end":{"line":487,"column":5}},"test":{"type":"UnaryExpression","start":14449,"end":14462,"loc":{"start":{"line":485,"column":8},"end":{"line":485,"column":21}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":14450,"end":14462,"loc":{"start":{"line":485,"column":9},"end":{"line":485,"column":21}},"object":{"type":"ThisExpression","start":14450,"end":14454,"loc":{"start":{"line":485,"column":9},"end":{"line":485,"column":13}}},"property":{"type":"Identifier","start":14455,"end":14462,"loc":{"start":{"line":485,"column":14},"end":{"line":485,"column":21}},"name":"_paused"},"computed":false}},"consequent":{"type":"BlockStatement","start":14464,"end":14494,"loc":{"start":{"line":485,"column":23},"end":{"line":487,"column":5}},"body":[{"type":"ExpressionStatement","start":14472,"end":14488,"loc":{"start":{"line":486,"column":6},"end":{"line":486,"column":22}},"expression":{"type":"CallExpression","start":14472,"end":14488,"loc":{"start":{"line":486,"column":6},"end":{"line":486,"column":22}},"callee":{"type":"MemberExpression","start":14472,"end":14486,"loc":{"start":{"line":486,"column":6},"end":{"line":486,"column":20}},"object":{"type":"MemberExpression","start":14472,"end":14480,"loc":{"start":{"line":486,"column":6},"end":{"line":486,"column":14}},"object":{"type":"ThisExpression","start":14472,"end":14476,"loc":{"start":{"line":486,"column":6},"end":{"line":486,"column":10}}},"property":{"type":"Identifier","start":14477,"end":14480,"loc":{"start":{"line":486,"column":11},"end":{"line":486,"column":14}},"name":"tus"},"computed":false},"property":{"type":"Identifier","start":14481,"end":14486,"loc":{"start":{"line":486,"column":15},"end":{"line":486,"column":20}},"name":"start"},"computed":false},"arguments":[]}}]},"alternate":null}],"comments":[{"type":"Block","value":"*\n   * start the tus upload\n   ","start":13168,"end":13203,"loc":{"start":{"line":439,"column":2},"end":{"line":441,"column":5}}}]}}},{"type":"MethodDefinition","start":14502,"end":16531,"loc":{"start":{"line":490,"column":2},"end":{"line":552,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":14502,"end":14517,"loc":{"start":{"line":490,"column":2},"end":{"line":490,"column":17}},"name":"uploadMultipart"},"value":{"type":"FunctionExpression","start":14518,"end":16531,"loc":{"start":{"line":490,"column":18},"end":{"line":552,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":14521,"end":16531,"loc":{"start":{"line":490,"column":21},"end":{"line":552,"column":3}},"body":[{"type":"VariableDeclaration","start":14527,"end":14570,"loc":{"start":{"line":491,"column":4},"end":{"line":491,"column":47}},"declarations":[{"type":"VariableDeclarator","start":14533,"end":14570,"loc":{"start":{"line":491,"column":10},"end":{"line":491,"column":47}},"id":{"type":"Identifier","start":14533,"end":14537,"loc":{"start":{"line":491,"column":10},"end":{"line":491,"column":14}},"name":"file"},"init":{"type":"CallExpression","start":14540,"end":14570,"loc":{"start":{"line":491,"column":17},"end":{"line":491,"column":47}},"callee":{"type":"MemberExpression","start":14540,"end":14559,"loc":{"start":{"line":491,"column":17},"end":{"line":491,"column":36}},"object":{"type":"Identifier","start":14540,"end":14542,"loc":{"start":{"line":491,"column":17},"end":{"line":491,"column":19}},"name":"fs"},"property":{"type":"Identifier","start":14543,"end":14559,"loc":{"start":{"line":491,"column":20},"end":{"line":491,"column":36}},"name":"createReadStream"},"computed":false},"arguments":[{"type":"MemberExpression","start":14560,"end":14569,"loc":{"start":{"line":491,"column":37},"end":{"line":491,"column":46}},"object":{"type":"ThisExpression","start":14560,"end":14564,"loc":{"start":{"line":491,"column":37},"end":{"line":491,"column":41}}},"property":{"type":"Identifier","start":14565,"end":14569,"loc":{"start":{"line":491,"column":42},"end":{"line":491,"column":46}},"name":"path"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":14599,"end":14620,"loc":{"start":{"line":494,"column":4},"end":{"line":494,"column":25}},"declarations":[{"type":"VariableDeclarator","start":14603,"end":14620,"loc":{"start":{"line":494,"column":8},"end":{"line":494,"column":25}},"id":{"type":"Identifier","start":14603,"end":14616,"loc":{"start":{"line":494,"column":8},"end":{"line":494,"column":21}},"name":"bytesUploaded"},"init":{"type":"Literal","start":14619,"end":14620,"loc":{"start":{"line":494,"column":24},"end":{"line":494,"column":25}},"value":0,"raw":"0"}}],"kind":"let","comments":[{"type":"Line","value":" upload progress","start":14576,"end":14594,"loc":{"start":{"line":493,"column":4},"end":{"line":493,"column":22}}}]},{"type":"ExpressionStatement","start":14625,"end":14741,"loc":{"start":{"line":495,"column":4},"end":{"line":498,"column":6}},"expression":{"type":"CallExpression","start":14625,"end":14741,"loc":{"start":{"line":495,"column":4},"end":{"line":498,"column":6}},"callee":{"type":"MemberExpression","start":14625,"end":14632,"loc":{"start":{"line":495,"column":4},"end":{"line":495,"column":11}},"object":{"type":"Identifier","start":14625,"end":14629,"loc":{"start":{"line":495,"column":4},"end":{"line":495,"column":8}},"name":"file"},"property":{"type":"Identifier","start":14630,"end":14632,"loc":{"start":{"line":495,"column":9},"end":{"line":495,"column":11}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":14633,"end":14639,"loc":{"start":{"line":495,"column":12},"end":{"line":495,"column":18}},"value":"data","raw":"'data'"},{"type":"ArrowFunctionExpression","start":14641,"end":14740,"loc":{"start":{"line":495,"column":20},"end":{"line":498,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":14642,"end":14646,"loc":{"start":{"line":495,"column":21},"end":{"line":495,"column":25}},"name":"data"}],"body":{"type":"BlockStatement","start":14651,"end":14740,"loc":{"start":{"line":495,"column":30},"end":{"line":498,"column":5}},"body":[{"type":"ExpressionStatement","start":14659,"end":14687,"loc":{"start":{"line":496,"column":6},"end":{"line":496,"column":34}},"expression":{"type":"AssignmentExpression","start":14659,"end":14687,"loc":{"start":{"line":496,"column":6},"end":{"line":496,"column":34}},"operator":"+=","left":{"type":"Identifier","start":14659,"end":14672,"loc":{"start":{"line":496,"column":6},"end":{"line":496,"column":19}},"name":"bytesUploaded"},"right":{"type":"MemberExpression","start":14676,"end":14687,"loc":{"start":{"line":496,"column":23},"end":{"line":496,"column":34}},"object":{"type":"Identifier","start":14676,"end":14680,"loc":{"start":{"line":496,"column":23},"end":{"line":496,"column":27}},"name":"data"},"property":{"type":"Identifier","start":14681,"end":14687,"loc":{"start":{"line":496,"column":28},"end":{"line":496,"column":34}},"name":"length"},"computed":false}}},{"type":"ExpressionStatement","start":14694,"end":14734,"loc":{"start":{"line":497,"column":6},"end":{"line":497,"column":46}},"expression":{"type":"CallExpression","start":14694,"end":14734,"loc":{"start":{"line":497,"column":6},"end":{"line":497,"column":46}},"callee":{"type":"MemberExpression","start":14694,"end":14719,"loc":{"start":{"line":497,"column":6},"end":{"line":497,"column":31}},"object":{"type":"ThisExpression","start":14694,"end":14698,"loc":{"start":{"line":497,"column":6},"end":{"line":497,"column":10}}},"property":{"type":"Identifier","start":14699,"end":14719,"loc":{"start":{"line":497,"column":11},"end":{"line":497,"column":31}},"name":"emitIllusiveProgress"},"computed":false},"arguments":[{"type":"Identifier","start":14720,"end":14733,"loc":{"start":{"line":497,"column":32},"end":{"line":497,"column":45}},"name":"bytesUploaded"}]}}]}}]}},{"type":"VariableDeclaration","start":14747,"end":14838,"loc":{"start":{"line":500,"column":4},"end":{"line":500,"column":95}},"declarations":[{"type":"VariableDeclarator","start":14753,"end":14838,"loc":{"start":{"line":500,"column":10},"end":{"line":500,"column":95}},"id":{"type":"Identifier","start":14753,"end":14763,"loc":{"start":{"line":500,"column":10},"end":{"line":500,"column":20}},"name":"httpMethod"},"init":{"type":"ConditionalExpression","start":14766,"end":14838,"loc":{"start":{"line":500,"column":23},"end":{"line":500,"column":95}},"test":{"type":"BinaryExpression","start":14766,"end":14821,"loc":{"start":{"line":500,"column":23},"end":{"line":500,"column":78}},"left":{"type":"CallExpression","start":14766,"end":14811,"loc":{"start":{"line":500,"column":23},"end":{"line":500,"column":68}},"callee":{"type":"MemberExpression","start":14766,"end":14809,"loc":{"start":{"line":500,"column":23},"end":{"line":500,"column":66}},"object":{"type":"LogicalExpression","start":14767,"end":14796,"loc":{"start":{"line":500,"column":24},"end":{"line":500,"column":53}},"left":{"type":"MemberExpression","start":14767,"end":14790,"loc":{"start":{"line":500,"column":24},"end":{"line":500,"column":47}},"object":{"type":"MemberExpression","start":14767,"end":14779,"loc":{"start":{"line":500,"column":24},"end":{"line":500,"column":36}},"object":{"type":"ThisExpression","start":14767,"end":14771,"loc":{"start":{"line":500,"column":24},"end":{"line":500,"column":28}}},"property":{"type":"Identifier","start":14772,"end":14779,"loc":{"start":{"line":500,"column":29},"end":{"line":500,"column":36}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":14780,"end":14790,"loc":{"start":{"line":500,"column":37},"end":{"line":500,"column":47}},"name":"httpMethod"},"computed":false},"operator":"||","right":{"type":"Literal","start":14794,"end":14796,"loc":{"start":{"line":500,"column":51},"end":{"line":500,"column":53}},"value":"","raw":"''"}},"property":{"type":"Identifier","start":14798,"end":14809,"loc":{"start":{"line":500,"column":55},"end":{"line":500,"column":66}},"name":"toLowerCase"},"computed":false},"arguments":[]},"operator":"===","right":{"type":"Literal","start":14816,"end":14821,"loc":{"start":{"line":500,"column":73},"end":{"line":500,"column":78}},"value":"put","raw":"'put'"}},"consequent":{"type":"Literal","start":14824,"end":14829,"loc":{"start":{"line":500,"column":81},"end":{"line":500,"column":86}},"value":"put","raw":"'put'"},"alternate":{"type":"Literal","start":14832,"end":14838,"loc":{"start":{"line":500,"column":89},"end":{"line":500,"column":95}},"value":"post","raw":"'post'"}}}],"kind":"const"},{"type":"VariableDeclaration","start":14843,"end":14895,"loc":{"start":{"line":501,"column":4},"end":{"line":501,"column":56}},"declarations":[{"type":"VariableDeclarator","start":14849,"end":14895,"loc":{"start":{"line":501,"column":10},"end":{"line":501,"column":56}},"id":{"type":"Identifier","start":14849,"end":14856,"loc":{"start":{"line":501,"column":10},"end":{"line":501,"column":17}},"name":"headers"},"init":{"type":"CallExpression","start":14859,"end":14895,"loc":{"start":{"line":501,"column":20},"end":{"line":501,"column":56}},"callee":{"type":"Identifier","start":14859,"end":14873,"loc":{"start":{"line":501,"column":20},"end":{"line":501,"column":34}},"name":"headerSanitize"},"arguments":[{"type":"MemberExpression","start":14874,"end":14894,"loc":{"start":{"line":501,"column":35},"end":{"line":501,"column":55}},"object":{"type":"MemberExpression","start":14874,"end":14886,"loc":{"start":{"line":501,"column":35},"end":{"line":501,"column":47}},"object":{"type":"ThisExpression","start":14874,"end":14878,"loc":{"start":{"line":501,"column":35},"end":{"line":501,"column":39}}},"property":{"type":"Identifier","start":14879,"end":14886,"loc":{"start":{"line":501,"column":40},"end":{"line":501,"column":47}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":14887,"end":14894,"loc":{"start":{"line":501,"column":48},"end":{"line":501,"column":55}},"name":"headers"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":14900,"end":14974,"loc":{"start":{"line":502,"column":4},"end":{"line":502,"column":78}},"declarations":[{"type":"VariableDeclarator","start":14906,"end":14974,"loc":{"start":{"line":502,"column":10},"end":{"line":502,"column":78}},"id":{"type":"Identifier","start":14906,"end":14916,"loc":{"start":{"line":502,"column":10},"end":{"line":502,"column":20}},"name":"reqOptions"},"init":{"type":"ObjectExpression","start":14919,"end":14974,"loc":{"start":{"line":502,"column":23},"end":{"line":502,"column":78}},"properties":[{"type":"Property","start":14921,"end":14947,"loc":{"start":{"line":502,"column":25},"end":{"line":502,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":14921,"end":14924,"loc":{"start":{"line":502,"column":25},"end":{"line":502,"column":28}},"name":"url"},"value":{"type":"MemberExpression","start":14926,"end":14947,"loc":{"start":{"line":502,"column":30},"end":{"line":502,"column":51}},"object":{"type":"MemberExpression","start":14926,"end":14938,"loc":{"start":{"line":502,"column":30},"end":{"line":502,"column":42}},"object":{"type":"ThisExpression","start":14926,"end":14930,"loc":{"start":{"line":502,"column":30},"end":{"line":502,"column":34}}},"property":{"type":"Identifier","start":14931,"end":14938,"loc":{"start":{"line":502,"column":35},"end":{"line":502,"column":42}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":14939,"end":14947,"loc":{"start":{"line":502,"column":43},"end":{"line":502,"column":51}},"name":"endpoint"},"computed":false},"kind":"init"},{"type":"Property","start":14949,"end":14956,"loc":{"start":{"line":502,"column":53},"end":{"line":502,"column":60}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":14949,"end":14956,"loc":{"start":{"line":502,"column":53},"end":{"line":502,"column":60}},"name":"headers"},"kind":"init","value":{"type":"Identifier","start":14949,"end":14956,"loc":{"start":{"line":502,"column":53},"end":{"line":502,"column":60}},"name":"headers"}},{"type":"Property","start":14958,"end":14972,"loc":{"start":{"line":502,"column":62},"end":{"line":502,"column":76}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":14958,"end":14966,"loc":{"start":{"line":502,"column":62},"end":{"line":502,"column":70}},"name":"encoding"},"value":{"type":"Literal","start":14968,"end":14972,"loc":{"start":{"line":502,"column":72},"end":{"line":502,"column":76}},"value":null,"raw":"null"},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":14979,"end":15383,"loc":{"start":{"line":503,"column":4},"end":{"line":519,"column":5}},"test":{"type":"MemberExpression","start":14983,"end":15007,"loc":{"start":{"line":503,"column":8},"end":{"line":503,"column":32}},"object":{"type":"MemberExpression","start":14983,"end":14995,"loc":{"start":{"line":503,"column":8},"end":{"line":503,"column":20}},"object":{"type":"ThisExpression","start":14983,"end":14987,"loc":{"start":{"line":503,"column":8},"end":{"line":503,"column":12}}},"property":{"type":"Identifier","start":14988,"end":14995,"loc":{"start":{"line":503,"column":13},"end":{"line":503,"column":20}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":14996,"end":15007,"loc":{"start":{"line":503,"column":21},"end":{"line":503,"column":32}},"name":"useFormData"},"computed":false},"consequent":{"type":"BlockStatement","start":15009,"end":15341,"loc":{"start":{"line":503,"column":34},"end":{"line":517,"column":5}},"body":[{"type":"ExpressionStatement","start":15017,"end":15335,"loc":{"start":{"line":504,"column":6},"end":{"line":516,"column":7}},"expression":{"type":"AssignmentExpression","start":15017,"end":15335,"loc":{"start":{"line":504,"column":6},"end":{"line":516,"column":7}},"operator":"=","left":{"type":"MemberExpression","start":15017,"end":15036,"loc":{"start":{"line":504,"column":6},"end":{"line":504,"column":25}},"object":{"type":"Identifier","start":15017,"end":15027,"loc":{"start":{"line":504,"column":6},"end":{"line":504,"column":16}},"name":"reqOptions"},"property":{"type":"Identifier","start":15028,"end":15036,"loc":{"start":{"line":504,"column":17},"end":{"line":504,"column":25}},"name":"formData"},"computed":false},"right":{"type":"CallExpression","start":15039,"end":15335,"loc":{"start":{"line":504,"column":28},"end":{"line":516,"column":7}},"callee":{"type":"MemberExpression","start":15039,"end":15052,"loc":{"start":{"line":504,"column":28},"end":{"line":504,"column":41}},"object":{"type":"Identifier","start":15039,"end":15045,"loc":{"start":{"line":504,"column":28},"end":{"line":504,"column":34}},"name":"Object"},"property":{"type":"Identifier","start":15046,"end":15052,"loc":{"start":{"line":504,"column":35},"end":{"line":504,"column":41}},"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":15062,"end":15064,"loc":{"start":{"line":505,"column":8},"end":{"line":505,"column":10}},"properties":[]},{"type":"MemberExpression","start":15074,"end":15095,"loc":{"start":{"line":506,"column":8},"end":{"line":506,"column":29}},"object":{"type":"MemberExpression","start":15074,"end":15086,"loc":{"start":{"line":506,"column":8},"end":{"line":506,"column":20}},"object":{"type":"ThisExpression","start":15074,"end":15078,"loc":{"start":{"line":506,"column":8},"end":{"line":506,"column":12}}},"property":{"type":"Identifier","start":15079,"end":15086,"loc":{"start":{"line":506,"column":13},"end":{"line":506,"column":20}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":15087,"end":15095,"loc":{"start":{"line":506,"column":21},"end":{"line":506,"column":29}},"name":"metadata"},"computed":false},{"type":"ObjectExpression","start":15105,"end":15327,"loc":{"start":{"line":507,"column":8},"end":{"line":515,"column":9}},"properties":[{"type":"Property","start":15117,"end":15317,"loc":{"start":{"line":508,"column":10},"end":{"line":514,"column":11}},"method":false,"shorthand":false,"computed":true,"key":{"type":"MemberExpression","start":15118,"end":15140,"loc":{"start":{"line":508,"column":11},"end":{"line":508,"column":33}},"object":{"type":"MemberExpression","start":15118,"end":15130,"loc":{"start":{"line":508,"column":11},"end":{"line":508,"column":23}},"object":{"type":"ThisExpression","start":15118,"end":15122,"loc":{"start":{"line":508,"column":11},"end":{"line":508,"column":15}}},"property":{"type":"Identifier","start":15123,"end":15130,"loc":{"start":{"line":508,"column":16},"end":{"line":508,"column":23}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":15131,"end":15140,"loc":{"start":{"line":508,"column":24},"end":{"line":508,"column":33}},"name":"fieldname"},"computed":false},"value":{"type":"ObjectExpression","start":15143,"end":15317,"loc":{"start":{"line":508,"column":36},"end":{"line":514,"column":11}},"properties":[{"type":"Property","start":15157,"end":15168,"loc":{"start":{"line":509,"column":12},"end":{"line":509,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15157,"end":15162,"loc":{"start":{"line":509,"column":12},"end":{"line":509,"column":17}},"name":"value"},"value":{"type":"Identifier","start":15164,"end":15168,"loc":{"start":{"line":509,"column":19},"end":{"line":509,"column":23}},"name":"file"},"kind":"init"},{"type":"Property","start":15182,"end":15305,"loc":{"start":{"line":510,"column":12},"end":{"line":513,"column":13}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15182,"end":15189,"loc":{"start":{"line":510,"column":12},"end":{"line":510,"column":19}},"name":"options"},"value":{"type":"ObjectExpression","start":15191,"end":15305,"loc":{"start":{"line":510,"column":21},"end":{"line":513,"column":13}},"properties":[{"type":"Property","start":15207,"end":15236,"loc":{"start":{"line":511,"column":14},"end":{"line":511,"column":43}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15207,"end":15215,"loc":{"start":{"line":511,"column":14},"end":{"line":511,"column":22}},"name":"filename"},"value":{"type":"MemberExpression","start":15217,"end":15236,"loc":{"start":{"line":511,"column":24},"end":{"line":511,"column":43}},"object":{"type":"ThisExpression","start":15217,"end":15221,"loc":{"start":{"line":511,"column":24},"end":{"line":511,"column":28}}},"property":{"type":"Identifier","start":15222,"end":15236,"loc":{"start":{"line":511,"column":29},"end":{"line":511,"column":43}},"name":"uploadFileName"},"computed":false},"kind":"init"},{"type":"Property","start":15252,"end":15291,"loc":{"start":{"line":512,"column":14},"end":{"line":512,"column":53}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15252,"end":15263,"loc":{"start":{"line":512,"column":14},"end":{"line":512,"column":25}},"name":"contentType"},"value":{"type":"MemberExpression","start":15265,"end":15291,"loc":{"start":{"line":512,"column":27},"end":{"line":512,"column":53}},"object":{"type":"MemberExpression","start":15265,"end":15286,"loc":{"start":{"line":512,"column":27},"end":{"line":512,"column":48}},"object":{"type":"MemberExpression","start":15265,"end":15277,"loc":{"start":{"line":512,"column":27},"end":{"line":512,"column":39}},"object":{"type":"ThisExpression","start":15265,"end":15269,"loc":{"start":{"line":512,"column":27},"end":{"line":512,"column":31}}},"property":{"type":"Identifier","start":15270,"end":15277,"loc":{"start":{"line":512,"column":32},"end":{"line":512,"column":39}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":15278,"end":15286,"loc":{"start":{"line":512,"column":40},"end":{"line":512,"column":48}},"name":"metadata"},"computed":false},"property":{"type":"Identifier","start":15287,"end":15291,"loc":{"start":{"line":512,"column":49},"end":{"line":512,"column":53}},"name":"type"},"computed":false},"kind":"init"}]},"kind":"init"}]},"kind":"init"}]}]}}}]},"alternate":{"type":"BlockStatement","start":15347,"end":15383,"loc":{"start":{"line":517,"column":11},"end":{"line":519,"column":5}},"body":[{"type":"ExpressionStatement","start":15355,"end":15377,"loc":{"start":{"line":518,"column":6},"end":{"line":518,"column":28}},"expression":{"type":"AssignmentExpression","start":15355,"end":15377,"loc":{"start":{"line":518,"column":6},"end":{"line":518,"column":28}},"operator":"=","left":{"type":"MemberExpression","start":15355,"end":15370,"loc":{"start":{"line":518,"column":6},"end":{"line":518,"column":21}},"object":{"type":"Identifier","start":15355,"end":15365,"loc":{"start":{"line":518,"column":6},"end":{"line":518,"column":16}},"name":"reqOptions"},"property":{"type":"Identifier","start":15366,"end":15370,"loc":{"start":{"line":518,"column":17},"end":{"line":518,"column":21}},"name":"body"},"computed":false},"right":{"type":"Identifier","start":15373,"end":15377,"loc":{"start":{"line":518,"column":24},"end":{"line":518,"column":28}},"name":"file"}}}]}},{"type":"ExpressionStatement","start":15389,"end":16527,"loc":{"start":{"line":521,"column":4},"end":{"line":551,"column":6}},"expression":{"type":"CallExpression","start":15389,"end":16527,"loc":{"start":{"line":521,"column":4},"end":{"line":551,"column":6}},"callee":{"type":"MemberExpression","start":15389,"end":15408,"loc":{"start":{"line":521,"column":4},"end":{"line":521,"column":23}},"object":{"type":"Identifier","start":15389,"end":15396,"loc":{"start":{"line":521,"column":4},"end":{"line":521,"column":11}},"name":"request"},"property":{"type":"Identifier","start":15397,"end":15407,"loc":{"start":{"line":521,"column":12},"end":{"line":521,"column":22}},"name":"httpMethod"},"computed":true},"arguments":[{"type":"Identifier","start":15409,"end":15419,"loc":{"start":{"line":521,"column":24},"end":{"line":521,"column":34}},"name":"reqOptions"},{"type":"ArrowFunctionExpression","start":15421,"end":16526,"loc":{"start":{"line":521,"column":36},"end":{"line":551,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":15422,"end":15427,"loc":{"start":{"line":521,"column":37},"end":{"line":521,"column":42}},"name":"error"},{"type":"Identifier","start":15429,"end":15437,"loc":{"start":{"line":521,"column":44},"end":{"line":521,"column":52}},"name":"response"},{"type":"Identifier","start":15439,"end":15443,"loc":{"start":{"line":521,"column":54},"end":{"line":521,"column":58}},"name":"body"}],"body":{"type":"BlockStatement","start":15448,"end":16526,"loc":{"start":{"line":521,"column":63},"end":{"line":551,"column":5}},"body":[{"type":"IfStatement","start":15456,"end":15575,"loc":{"start":{"line":522,"column":6},"end":{"line":526,"column":7}},"test":{"type":"Identifier","start":15460,"end":15465,"loc":{"start":{"line":522,"column":10},"end":{"line":522,"column":15}},"name":"error"},"consequent":{"type":"BlockStatement","start":15467,"end":15575,"loc":{"start":{"line":522,"column":17},"end":{"line":526,"column":7}},"body":[{"type":"ExpressionStatement","start":15477,"end":15522,"loc":{"start":{"line":523,"column":8},"end":{"line":523,"column":53}},"expression":{"type":"CallExpression","start":15477,"end":15522,"loc":{"start":{"line":523,"column":8},"end":{"line":523,"column":53}},"callee":{"type":"MemberExpression","start":15477,"end":15489,"loc":{"start":{"line":523,"column":8},"end":{"line":523,"column":20}},"object":{"type":"Identifier","start":15477,"end":15483,"loc":{"start":{"line":523,"column":8},"end":{"line":523,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":15484,"end":15489,"loc":{"start":{"line":523,"column":15},"end":{"line":523,"column":20}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":15490,"end":15495,"loc":{"start":{"line":523,"column":21},"end":{"line":523,"column":26}},"name":"error"},{"type":"Literal","start":15497,"end":15521,"loc":{"start":{"line":523,"column":28},"end":{"line":523,"column":52}},"value":"upload.multipart.error","raw":"'upload.multipart.error'"}]}},{"type":"ExpressionStatement","start":15531,"end":15552,"loc":{"start":{"line":524,"column":8},"end":{"line":524,"column":29}},"expression":{"type":"CallExpression","start":15531,"end":15552,"loc":{"start":{"line":524,"column":8},"end":{"line":524,"column":29}},"callee":{"type":"MemberExpression","start":15531,"end":15545,"loc":{"start":{"line":524,"column":8},"end":{"line":524,"column":22}},"object":{"type":"ThisExpression","start":15531,"end":15535,"loc":{"start":{"line":524,"column":8},"end":{"line":524,"column":12}}},"property":{"type":"Identifier","start":15536,"end":15545,"loc":{"start":{"line":524,"column":13},"end":{"line":524,"column":22}},"name":"emitError"},"computed":false},"arguments":[{"type":"Identifier","start":15546,"end":15551,"loc":{"start":{"line":524,"column":23},"end":{"line":524,"column":28}},"name":"error"}]}},{"type":"ReturnStatement","start":15561,"end":15567,"loc":{"start":{"line":525,"column":8},"end":{"line":525,"column":14}},"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":15582,"end":15614,"loc":{"start":{"line":527,"column":6},"end":{"line":527,"column":38}},"declarations":[{"type":"VariableDeclarator","start":15588,"end":15614,"loc":{"start":{"line":527,"column":12},"end":{"line":527,"column":38}},"id":{"type":"Identifier","start":15588,"end":15595,"loc":{"start":{"line":527,"column":12},"end":{"line":527,"column":19}},"name":"headers"},"init":{"type":"MemberExpression","start":15598,"end":15614,"loc":{"start":{"line":527,"column":22},"end":{"line":527,"column":38}},"object":{"type":"Identifier","start":15598,"end":15606,"loc":{"start":{"line":527,"column":22},"end":{"line":527,"column":30}},"name":"response"},"property":{"type":"Identifier","start":15607,"end":15614,"loc":{"start":{"line":527,"column":31},"end":{"line":527,"column":38}},"name":"headers"},"computed":false}}],"kind":"const"},{"type":"ExpressionStatement","start":15663,"end":15691,"loc":{"start":{"line":529,"column":6},"end":{"line":529,"column":34}},"expression":{"type":"UnaryExpression","start":15663,"end":15691,"loc":{"start":{"line":529,"column":6},"end":{"line":529,"column":34}},"operator":"delete","prefix":true,"argument":{"type":"MemberExpression","start":15670,"end":15691,"loc":{"start":{"line":529,"column":13},"end":{"line":529,"column":34}},"object":{"type":"Identifier","start":15670,"end":15677,"loc":{"start":{"line":529,"column":13},"end":{"line":529,"column":20}},"name":"headers"},"property":{"type":"Literal","start":15678,"end":15690,"loc":{"start":{"line":529,"column":21},"end":{"line":529,"column":33}},"value":"set-cookie","raw":"'set-cookie'"},"computed":true}},"comments":[{"type":"Line","value":" remove browser forbidden headers","start":15621,"end":15656,"loc":{"start":{"line":528,"column":6},"end":{"line":528,"column":41}}}]},{"type":"ExpressionStatement","start":15698,"end":15727,"loc":{"start":{"line":530,"column":6},"end":{"line":530,"column":35}},"expression":{"type":"UnaryExpression","start":15698,"end":15727,"loc":{"start":{"line":530,"column":6},"end":{"line":530,"column":35}},"operator":"delete","prefix":true,"argument":{"type":"MemberExpression","start":15705,"end":15727,"loc":{"start":{"line":530,"column":13},"end":{"line":530,"column":35}},"object":{"type":"Identifier","start":15705,"end":15712,"loc":{"start":{"line":530,"column":13},"end":{"line":530,"column":20}},"name":"headers"},"property":{"type":"Literal","start":15713,"end":15726,"loc":{"start":{"line":530,"column":21},"end":{"line":530,"column":34}},"value":"set-cookie2","raw":"'set-cookie2'"},"computed":true}}},{"type":"VariableDeclaration","start":15735,"end":15896,"loc":{"start":{"line":532,"column":6},"end":{"line":537,"column":7}},"declarations":[{"type":"VariableDeclarator","start":15741,"end":15896,"loc":{"start":{"line":532,"column":12},"end":{"line":537,"column":7}},"id":{"type":"Identifier","start":15741,"end":15748,"loc":{"start":{"line":532,"column":12},"end":{"line":532,"column":19}},"name":"respObj"},"init":{"type":"ObjectExpression","start":15751,"end":15896,"loc":{"start":{"line":532,"column":22},"end":{"line":537,"column":7}},"properties":[{"type":"Property","start":15761,"end":15790,"loc":{"start":{"line":533,"column":8},"end":{"line":533,"column":37}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15761,"end":15773,"loc":{"start":{"line":533,"column":8},"end":{"line":533,"column":20}},"name":"responseText"},"value":{"type":"CallExpression","start":15775,"end":15790,"loc":{"start":{"line":533,"column":22},"end":{"line":533,"column":37}},"callee":{"type":"MemberExpression","start":15775,"end":15788,"loc":{"start":{"line":533,"column":22},"end":{"line":533,"column":35}},"object":{"type":"Identifier","start":15775,"end":15779,"loc":{"start":{"line":533,"column":22},"end":{"line":533,"column":26}},"name":"body"},"property":{"type":"Identifier","start":15780,"end":15788,"loc":{"start":{"line":533,"column":27},"end":{"line":533,"column":35}},"name":"toString"},"computed":false},"arguments":[]},"kind":"init"},{"type":"Property","start":15800,"end":15827,"loc":{"start":{"line":534,"column":8},"end":{"line":534,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15800,"end":15806,"loc":{"start":{"line":534,"column":8},"end":{"line":534,"column":14}},"name":"status"},"value":{"type":"MemberExpression","start":15808,"end":15827,"loc":{"start":{"line":534,"column":16},"end":{"line":534,"column":35}},"object":{"type":"Identifier","start":15808,"end":15816,"loc":{"start":{"line":534,"column":16},"end":{"line":534,"column":24}},"name":"response"},"property":{"type":"Identifier","start":15817,"end":15827,"loc":{"start":{"line":534,"column":25},"end":{"line":534,"column":35}},"name":"statusCode"},"computed":false},"kind":"init"},{"type":"Property","start":15837,"end":15871,"loc":{"start":{"line":535,"column":8},"end":{"line":535,"column":42}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":15837,"end":15847,"loc":{"start":{"line":535,"column":8},"end":{"line":535,"column":18}},"name":"statusText"},"value":{"type":"MemberExpression","start":15849,"end":15871,"loc":{"start":{"line":535,"column":20},"end":{"line":535,"column":42}},"object":{"type":"Identifier","start":15849,"end":15857,"loc":{"start":{"line":535,"column":20},"end":{"line":535,"column":28}},"name":"response"},"property":{"type":"Identifier","start":15858,"end":15871,"loc":{"start":{"line":535,"column":29},"end":{"line":535,"column":42}},"name":"statusMessage"},"computed":false},"kind":"init"},{"type":"Property","start":15881,"end":15888,"loc":{"start":{"line":536,"column":8},"end":{"line":536,"column":15}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":15881,"end":15888,"loc":{"start":{"line":536,"column":8},"end":{"line":536,"column":15}},"name":"headers"},"kind":"init","value":{"type":"Identifier","start":15881,"end":15888,"loc":{"start":{"line":536,"column":8},"end":{"line":536,"column":15}},"name":"headers"}}]}}],"kind":"const"},{"type":"IfStatement","start":15904,"end":16498,"loc":{"start":{"line":539,"column":6},"end":{"line":548,"column":7}},"test":{"type":"BinaryExpression","start":15908,"end":15934,"loc":{"start":{"line":539,"column":10},"end":{"line":539,"column":36}},"left":{"type":"MemberExpression","start":15908,"end":15927,"loc":{"start":{"line":539,"column":10},"end":{"line":539,"column":29}},"object":{"type":"Identifier","start":15908,"end":15916,"loc":{"start":{"line":539,"column":10},"end":{"line":539,"column":18}},"name":"response"},"property":{"type":"Identifier","start":15917,"end":15927,"loc":{"start":{"line":539,"column":19},"end":{"line":539,"column":29}},"name":"statusCode"},"computed":false},"operator":">=","right":{"type":"Literal","start":15931,"end":15934,"loc":{"start":{"line":539,"column":33},"end":{"line":539,"column":36}},"value":400,"raw":"400"}},"consequent":{"type":"BlockStatement","start":15936,"end":16112,"loc":{"start":{"line":539,"column":38},"end":{"line":542,"column":7}},"body":[{"type":"ExpressionStatement","start":15946,"end":16037,"loc":{"start":{"line":540,"column":8},"end":{"line":540,"column":99}},"expression":{"type":"CallExpression","start":15946,"end":16037,"loc":{"start":{"line":540,"column":8},"end":{"line":540,"column":99}},"callee":{"type":"MemberExpression","start":15946,"end":15958,"loc":{"start":{"line":540,"column":8},"end":{"line":540,"column":20}},"object":{"type":"Identifier","start":15946,"end":15952,"loc":{"start":{"line":540,"column":8},"end":{"line":540,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":15953,"end":15958,"loc":{"start":{"line":540,"column":15},"end":{"line":540,"column":20}},"name":"error"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":15959,"end":16010,"loc":{"start":{"line":540,"column":21},"end":{"line":540,"column":72}},"expressions":[{"type":"MemberExpression","start":15989,"end":16008,"loc":{"start":{"line":540,"column":51},"end":{"line":540,"column":70}},"object":{"type":"Identifier","start":15989,"end":15997,"loc":{"start":{"line":540,"column":51},"end":{"line":540,"column":59}},"name":"response"},"property":{"type":"Identifier","start":15998,"end":16008,"loc":{"start":{"line":540,"column":60},"end":{"line":540,"column":70}},"name":"statusCode"},"computed":false}],"quasis":[{"type":"TemplateElement","start":15960,"end":15987,"loc":{"start":{"line":540,"column":22},"end":{"line":540,"column":49}},"value":{"raw":"upload failed with status: ","cooked":"upload failed with status: "},"tail":false},{"type":"TemplateElement","start":16009,"end":16009,"loc":{"start":{"line":540,"column":71},"end":{"line":540,"column":71}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":16012,"end":16036,"loc":{"start":{"line":540,"column":74},"end":{"line":540,"column":98}},"value":"upload.multipart.error","raw":"'upload.multipart.error'"}]}},{"type":"ExpressionStatement","start":16046,"end":16104,"loc":{"start":{"line":541,"column":8},"end":{"line":541,"column":66}},"expression":{"type":"CallExpression","start":16046,"end":16104,"loc":{"start":{"line":541,"column":8},"end":{"line":541,"column":66}},"callee":{"type":"MemberExpression","start":16046,"end":16060,"loc":{"start":{"line":541,"column":8},"end":{"line":541,"column":22}},"object":{"type":"ThisExpression","start":16046,"end":16050,"loc":{"start":{"line":541,"column":8},"end":{"line":541,"column":12}}},"property":{"type":"Identifier","start":16051,"end":16060,"loc":{"start":{"line":541,"column":13},"end":{"line":541,"column":22}},"name":"emitError"},"computed":false},"arguments":[{"type":"NewExpression","start":16061,"end":16094,"loc":{"start":{"line":541,"column":23},"end":{"line":541,"column":56}},"callee":{"type":"Identifier","start":16065,"end":16070,"loc":{"start":{"line":541,"column":27},"end":{"line":541,"column":32}},"name":"Error"},"arguments":[{"type":"MemberExpression","start":16071,"end":16093,"loc":{"start":{"line":541,"column":33},"end":{"line":541,"column":55}},"object":{"type":"Identifier","start":16071,"end":16079,"loc":{"start":{"line":541,"column":33},"end":{"line":541,"column":41}},"name":"response"},"property":{"type":"Identifier","start":16080,"end":16093,"loc":{"start":{"line":541,"column":42},"end":{"line":541,"column":55}},"name":"statusMessage"},"computed":false}]},{"type":"Identifier","start":16096,"end":16103,"loc":{"start":{"line":541,"column":58},"end":{"line":541,"column":65}},"name":"respObj"}]}}]},"alternate":{"type":"IfStatement","start":16118,"end":16498,"loc":{"start":{"line":542,"column":13},"end":{"line":548,"column":7}},"test":{"type":"LogicalExpression","start":16122,"end":16196,"loc":{"start":{"line":542,"column":17},"end":{"line":542,"column":91}},"left":{"type":"BinaryExpression","start":16122,"end":16157,"loc":{"start":{"line":542,"column":17},"end":{"line":542,"column":52}},"left":{"type":"Identifier","start":16122,"end":16135,"loc":{"start":{"line":542,"column":17},"end":{"line":542,"column":30}},"name":"bytesUploaded"},"operator":"!==","right":{"type":"MemberExpression","start":16140,"end":16157,"loc":{"start":{"line":542,"column":35},"end":{"line":542,"column":52}},"object":{"type":"ThisExpression","start":16140,"end":16144,"loc":{"start":{"line":542,"column":35},"end":{"line":542,"column":39}}},"property":{"type":"Identifier","start":16145,"end":16157,"loc":{"start":{"line":542,"column":40},"end":{"line":542,"column":52}},"name":"bytesWritten"},"computed":false}},"operator":"&&","right":{"type":"BinaryExpression","start":16161,"end":16196,"loc":{"start":{"line":542,"column":56},"end":{"line":542,"column":91}},"left":{"type":"Identifier","start":16161,"end":16174,"loc":{"start":{"line":542,"column":56},"end":{"line":542,"column":69}},"name":"bytesUploaded"},"operator":"!==","right":{"type":"MemberExpression","start":16179,"end":16196,"loc":{"start":{"line":542,"column":74},"end":{"line":542,"column":91}},"object":{"type":"MemberExpression","start":16179,"end":16191,"loc":{"start":{"line":542,"column":74},"end":{"line":542,"column":86}},"object":{"type":"ThisExpression","start":16179,"end":16183,"loc":{"start":{"line":542,"column":74},"end":{"line":542,"column":78}}},"property":{"type":"Identifier","start":16184,"end":16191,"loc":{"start":{"line":542,"column":79},"end":{"line":542,"column":86}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":16192,"end":16196,"loc":{"start":{"line":542,"column":87},"end":{"line":542,"column":91}},"name":"size"},"computed":false}}},"consequent":{"type":"BlockStatement","start":16198,"end":16429,"loc":{"start":{"line":542,"column":93},"end":{"line":546,"column":7}},"body":[{"type":"VariableDeclaration","start":16208,"end":16315,"loc":{"start":{"line":543,"column":8},"end":{"line":543,"column":115}},"declarations":[{"type":"VariableDeclarator","start":16214,"end":16315,"loc":{"start":{"line":543,"column":14},"end":{"line":543,"column":115}},"id":{"type":"Identifier","start":16214,"end":16220,"loc":{"start":{"line":543,"column":14},"end":{"line":543,"column":20}},"name":"errMsg"},"init":{"type":"TemplateLiteral","start":16223,"end":16315,"loc":{"start":{"line":543,"column":23},"end":{"line":543,"column":115}},"expressions":[{"type":"Identifier","start":16240,"end":16253,"loc":{"start":{"line":543,"column":40},"end":{"line":543,"column":53}},"name":"bytesUploaded"},{"type":"MemberExpression","start":16260,"end":16277,"loc":{"start":{"line":543,"column":60},"end":{"line":543,"column":77}},"object":{"type":"ThisExpression","start":16260,"end":16264,"loc":{"start":{"line":543,"column":60},"end":{"line":543,"column":64}}},"property":{"type":"Identifier","start":16265,"end":16277,"loc":{"start":{"line":543,"column":65},"end":{"line":543,"column":77}},"name":"bytesWritten"},"computed":false},{"type":"MemberExpression","start":16294,"end":16313,"loc":{"start":{"line":543,"column":94},"end":{"line":543,"column":113}},"object":{"type":"Identifier","start":16294,"end":16302,"loc":{"start":{"line":543,"column":94},"end":{"line":543,"column":102}},"name":"response"},"property":{"type":"Identifier","start":16303,"end":16313,"loc":{"start":{"line":543,"column":103},"end":{"line":543,"column":113}},"name":"statusCode"},"computed":false}],"quasis":[{"type":"TemplateElement","start":16224,"end":16238,"loc":{"start":{"line":543,"column":24},"end":{"line":543,"column":38}},"value":{"raw":"uploaded only ","cooked":"uploaded only "},"tail":false},{"type":"TemplateElement","start":16254,"end":16258,"loc":{"start":{"line":543,"column":54},"end":{"line":543,"column":58}},"value":{"raw":" of ","cooked":" of "},"tail":false},{"type":"TemplateElement","start":16278,"end":16292,"loc":{"start":{"line":543,"column":78},"end":{"line":543,"column":92}},"value":{"raw":" with status: ","cooked":" with status: "},"tail":false},{"type":"TemplateElement","start":16314,"end":16314,"loc":{"start":{"line":543,"column":114},"end":{"line":543,"column":114}},"value":{"raw":"","cooked":""},"tail":true}]}}],"kind":"const"},{"type":"ExpressionStatement","start":16324,"end":16379,"loc":{"start":{"line":544,"column":8},"end":{"line":544,"column":63}},"expression":{"type":"CallExpression","start":16324,"end":16379,"loc":{"start":{"line":544,"column":8},"end":{"line":544,"column":63}},"callee":{"type":"MemberExpression","start":16324,"end":16336,"loc":{"start":{"line":544,"column":8},"end":{"line":544,"column":20}},"object":{"type":"Identifier","start":16324,"end":16330,"loc":{"start":{"line":544,"column":8},"end":{"line":544,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":16331,"end":16336,"loc":{"start":{"line":544,"column":15},"end":{"line":544,"column":20}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":16337,"end":16343,"loc":{"start":{"line":544,"column":21},"end":{"line":544,"column":27}},"name":"errMsg"},{"type":"Literal","start":16345,"end":16378,"loc":{"start":{"line":544,"column":29},"end":{"line":544,"column":62}},"value":"upload.multipart.mismatch.error","raw":"'upload.multipart.mismatch.error'"}]}},{"type":"ExpressionStatement","start":16388,"end":16421,"loc":{"start":{"line":545,"column":8},"end":{"line":545,"column":41}},"expression":{"type":"CallExpression","start":16388,"end":16421,"loc":{"start":{"line":545,"column":8},"end":{"line":545,"column":41}},"callee":{"type":"MemberExpression","start":16388,"end":16402,"loc":{"start":{"line":545,"column":8},"end":{"line":545,"column":22}},"object":{"type":"ThisExpression","start":16388,"end":16392,"loc":{"start":{"line":545,"column":8},"end":{"line":545,"column":12}}},"property":{"type":"Identifier","start":16393,"end":16402,"loc":{"start":{"line":545,"column":13},"end":{"line":545,"column":22}},"name":"emitError"},"computed":false},"arguments":[{"type":"NewExpression","start":16403,"end":16420,"loc":{"start":{"line":545,"column":23},"end":{"line":545,"column":40}},"callee":{"type":"Identifier","start":16407,"end":16412,"loc":{"start":{"line":545,"column":27},"end":{"line":545,"column":32}},"name":"Error"},"arguments":[{"type":"Identifier","start":16413,"end":16419,"loc":{"start":{"line":545,"column":33},"end":{"line":545,"column":39}},"name":"errMsg"}]}]}}]},"alternate":{"type":"BlockStatement","start":16435,"end":16498,"loc":{"start":{"line":546,"column":13},"end":{"line":548,"column":7}},"body":[{"type":"ExpressionStatement","start":16445,"end":16490,"loc":{"start":{"line":547,"column":8},"end":{"line":547,"column":53}},"expression":{"type":"CallExpression","start":16445,"end":16490,"loc":{"start":{"line":547,"column":8},"end":{"line":547,"column":53}},"callee":{"type":"MemberExpression","start":16445,"end":16461,"loc":{"start":{"line":547,"column":8},"end":{"line":547,"column":24}},"object":{"type":"ThisExpression","start":16445,"end":16449,"loc":{"start":{"line":547,"column":8},"end":{"line":547,"column":12}}},"property":{"type":"Identifier","start":16450,"end":16461,"loc":{"start":{"line":547,"column":13},"end":{"line":547,"column":24}},"name":"emitSuccess"},"computed":false},"arguments":[{"type":"Literal","start":16462,"end":16466,"loc":{"start":{"line":547,"column":25},"end":{"line":547,"column":29}},"value":null,"raw":"null"},{"type":"ObjectExpression","start":16468,"end":16489,"loc":{"start":{"line":547,"column":31},"end":{"line":547,"column":52}},"properties":[{"type":"Property","start":16470,"end":16487,"loc":{"start":{"line":547,"column":33},"end":{"line":547,"column":50}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":16470,"end":16478,"loc":{"start":{"line":547,"column":33},"end":{"line":547,"column":41}},"name":"response"},"value":{"type":"Identifier","start":16480,"end":16487,"loc":{"start":{"line":547,"column":43},"end":{"line":547,"column":50}},"name":"respObj"},"kind":"init"}]}]}}]}}},{"type":"ExpressionStatement","start":16506,"end":16520,"loc":{"start":{"line":550,"column":6},"end":{"line":550,"column":20}},"expression":{"type":"CallExpression","start":16506,"end":16520,"loc":{"start":{"line":550,"column":6},"end":{"line":550,"column":20}},"callee":{"type":"MemberExpression","start":16506,"end":16518,"loc":{"start":{"line":550,"column":6},"end":{"line":550,"column":18}},"object":{"type":"ThisExpression","start":16506,"end":16510,"loc":{"start":{"line":550,"column":6},"end":{"line":550,"column":10}}},"property":{"type":"Identifier","start":16511,"end":16518,"loc":{"start":{"line":550,"column":11},"end":{"line":550,"column":18}},"name":"cleanUp"},"computed":false},"arguments":[]}}]}}]}}]}}},{"type":"MethodDefinition","start":16600,"end":16722,"loc":{"start":{"line":557,"column":2},"end":{"line":561,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":16600,"end":16617,"loc":{"start":{"line":557,"column":2},"end":{"line":557,"column":19}},"name":"uploadS3Multipart"},"value":{"type":"FunctionExpression","start":16618,"end":16722,"loc":{"start":{"line":557,"column":20},"end":{"line":561,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":16621,"end":16722,"loc":{"start":{"line":557,"column":23},"end":{"line":561,"column":3}},"body":[{"type":"VariableDeclaration","start":16627,"end":16670,"loc":{"start":{"line":558,"column":4},"end":{"line":558,"column":47}},"declarations":[{"type":"VariableDeclarator","start":16633,"end":16670,"loc":{"start":{"line":558,"column":10},"end":{"line":558,"column":47}},"id":{"type":"Identifier","start":16633,"end":16637,"loc":{"start":{"line":558,"column":10},"end":{"line":558,"column":14}},"name":"file"},"init":{"type":"CallExpression","start":16640,"end":16670,"loc":{"start":{"line":558,"column":17},"end":{"line":558,"column":47}},"callee":{"type":"MemberExpression","start":16640,"end":16659,"loc":{"start":{"line":558,"column":17},"end":{"line":558,"column":36}},"object":{"type":"Identifier","start":16640,"end":16642,"loc":{"start":{"line":558,"column":17},"end":{"line":558,"column":19}},"name":"fs"},"property":{"type":"Identifier","start":16643,"end":16659,"loc":{"start":{"line":558,"column":20},"end":{"line":558,"column":36}},"name":"createReadStream"},"computed":false},"arguments":[{"type":"MemberExpression","start":16660,"end":16669,"loc":{"start":{"line":558,"column":37},"end":{"line":558,"column":46}},"object":{"type":"ThisExpression","start":16660,"end":16664,"loc":{"start":{"line":558,"column":37},"end":{"line":558,"column":41}}},"property":{"type":"Identifier","start":16665,"end":16669,"loc":{"start":{"line":558,"column":42},"end":{"line":558,"column":46}},"name":"path"},"computed":false}]}}],"kind":"const"},{"type":"ReturnStatement","start":16676,"end":16718,"loc":{"start":{"line":560,"column":4},"end":{"line":560,"column":46}},"argument":{"type":"CallExpression","start":16683,"end":16718,"loc":{"start":{"line":560,"column":11},"end":{"line":560,"column":46}},"callee":{"type":"MemberExpression","start":16683,"end":16712,"loc":{"start":{"line":560,"column":11},"end":{"line":560,"column":40}},"object":{"type":"ThisExpression","start":16683,"end":16687,"loc":{"start":{"line":560,"column":11},"end":{"line":560,"column":15}}},"property":{"type":"Identifier","start":16688,"end":16712,"loc":{"start":{"line":560,"column":16},"end":{"line":560,"column":40}},"name":"_uploadS3MultipartStream"},"computed":false},"arguments":[{"type":"Identifier","start":16713,"end":16717,"loc":{"start":{"line":560,"column":41},"end":{"line":560,"column":45}},"name":"file"}]}}],"comments":[{"type":"Block","value":"*\n   * Upload the file to S3 using a Multipart upload.\n   ","start":16535,"end":16597,"loc":{"start":{"line":554,"column":2},"end":{"line":556,"column":5}}}]}}},{"type":"MethodDefinition","start":16766,"end":17876,"loc":{"start":{"line":566,"column":2},"end":{"line":606,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":16766,"end":16790,"loc":{"start":{"line":566,"column":2},"end":{"line":566,"column":26}},"name":"_uploadS3MultipartStream"},"value":{"type":"FunctionExpression","start":16791,"end":17876,"loc":{"start":{"line":566,"column":27},"end":{"line":606,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":16792,"end":16798,"loc":{"start":{"line":566,"column":28},"end":{"line":566,"column":34}},"name":"stream"}],"body":{"type":"BlockStatement","start":16800,"end":17876,"loc":{"start":{"line":566,"column":36},"end":{"line":606,"column":3}},"body":[{"type":"IfStatement","start":16806,"end":16943,"loc":{"start":{"line":567,"column":4},"end":{"line":570,"column":5}},"test":{"type":"UnaryExpression","start":16810,"end":16826,"loc":{"start":{"line":567,"column":8},"end":{"line":567,"column":24}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":16811,"end":16826,"loc":{"start":{"line":567,"column":9},"end":{"line":567,"column":24}},"object":{"type":"MemberExpression","start":16811,"end":16823,"loc":{"start":{"line":567,"column":9},"end":{"line":567,"column":21}},"object":{"type":"ThisExpression","start":16811,"end":16815,"loc":{"start":{"line":567,"column":9},"end":{"line":567,"column":13}}},"property":{"type":"Identifier","start":16816,"end":16823,"loc":{"start":{"line":567,"column":14},"end":{"line":567,"column":21}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":16824,"end":16826,"loc":{"start":{"line":567,"column":22},"end":{"line":567,"column":24}},"name":"s3"},"computed":false}},"consequent":{"type":"BlockStatement","start":16828,"end":16943,"loc":{"start":{"line":567,"column":26},"end":{"line":570,"column":5}},"body":[{"type":"ExpressionStatement","start":16836,"end":16924,"loc":{"start":{"line":568,"column":6},"end":{"line":568,"column":94}},"expression":{"type":"CallExpression","start":16836,"end":16924,"loc":{"start":{"line":568,"column":6},"end":{"line":568,"column":94}},"callee":{"type":"MemberExpression","start":16836,"end":16850,"loc":{"start":{"line":568,"column":6},"end":{"line":568,"column":20}},"object":{"type":"ThisExpression","start":16836,"end":16840,"loc":{"start":{"line":568,"column":6},"end":{"line":568,"column":10}}},"property":{"type":"Identifier","start":16841,"end":16850,"loc":{"start":{"line":568,"column":11},"end":{"line":568,"column":20}},"name":"emitError"},"computed":false},"arguments":[{"type":"NewExpression","start":16851,"end":16923,"loc":{"start":{"line":568,"column":21},"end":{"line":568,"column":93}},"callee":{"type":"Identifier","start":16855,"end":16860,"loc":{"start":{"line":568,"column":25},"end":{"line":568,"column":30}},"name":"Error"},"arguments":[{"type":"Literal","start":16861,"end":16922,"loc":{"start":{"line":568,"column":31},"end":{"line":568,"column":92}},"value":"The S3 client is not configured on this companion instance.","raw":"'The S3 client is not configured on this companion instance.'"}]}]}},{"type":"ReturnStatement","start":16931,"end":16937,"loc":{"start":{"line":569,"column":6},"end":{"line":569,"column":12}},"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":16949,"end":17020,"loc":{"start":{"line":572,"column":4},"end":{"line":572,"column":75}},"declarations":[{"type":"VariableDeclarator","start":16955,"end":17020,"loc":{"start":{"line":572,"column":10},"end":{"line":572,"column":75}},"id":{"type":"Identifier","start":16955,"end":16963,"loc":{"start":{"line":572,"column":10},"end":{"line":572,"column":18}},"name":"filename"},"init":{"type":"LogicalExpression","start":16966,"end":17020,"loc":{"start":{"line":572,"column":21},"end":{"line":572,"column":75}},"left":{"type":"MemberExpression","start":16966,"end":16992,"loc":{"start":{"line":572,"column":21},"end":{"line":572,"column":47}},"object":{"type":"MemberExpression","start":16966,"end":16987,"loc":{"start":{"line":572,"column":21},"end":{"line":572,"column":42}},"object":{"type":"MemberExpression","start":16966,"end":16978,"loc":{"start":{"line":572,"column":21},"end":{"line":572,"column":33}},"object":{"type":"ThisExpression","start":16966,"end":16970,"loc":{"start":{"line":572,"column":21},"end":{"line":572,"column":25}}},"property":{"type":"Identifier","start":16971,"end":16978,"loc":{"start":{"line":572,"column":26},"end":{"line":572,"column":33}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":16979,"end":16987,"loc":{"start":{"line":572,"column":34},"end":{"line":572,"column":42}},"name":"metadata"},"computed":false},"property":{"type":"Identifier","start":16988,"end":16992,"loc":{"start":{"line":572,"column":43},"end":{"line":572,"column":47}},"name":"name"},"computed":false},"operator":"||","right":{"type":"CallExpression","start":16996,"end":17020,"loc":{"start":{"line":572,"column":51},"end":{"line":572,"column":75}},"callee":{"type":"MemberExpression","start":16996,"end":17009,"loc":{"start":{"line":572,"column":51},"end":{"line":572,"column":64}},"object":{"type":"Identifier","start":16996,"end":17000,"loc":{"start":{"line":572,"column":51},"end":{"line":572,"column":55}},"name":"path"},"property":{"type":"Identifier","start":17001,"end":17009,"loc":{"start":{"line":572,"column":56},"end":{"line":572,"column":64}},"name":"basename"},"computed":false},"arguments":[{"type":"MemberExpression","start":17010,"end":17019,"loc":{"start":{"line":572,"column":65},"end":{"line":572,"column":74}},"object":{"type":"ThisExpression","start":17010,"end":17014,"loc":{"start":{"line":572,"column":65},"end":{"line":572,"column":69}}},"property":{"type":"Identifier","start":17015,"end":17019,"loc":{"start":{"line":572,"column":70},"end":{"line":572,"column":74}},"name":"path"},"computed":false}]}}}],"kind":"const"},{"type":"VariableDeclaration","start":17025,"end":17068,"loc":{"start":{"line":573,"column":4},"end":{"line":573,"column":47}},"declarations":[{"type":"VariableDeclarator","start":17031,"end":17068,"loc":{"start":{"line":573,"column":10},"end":{"line":573,"column":47}},"id":{"type":"ObjectPattern","start":17031,"end":17050,"loc":{"start":{"line":573,"column":10},"end":{"line":573,"column":29}},"properties":[{"type":"Property","start":17033,"end":17039,"loc":{"start":{"line":573,"column":12},"end":{"line":573,"column":18}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":17033,"end":17039,"loc":{"start":{"line":573,"column":12},"end":{"line":573,"column":18}},"name":"client"},"kind":"init","value":{"type":"Identifier","start":17033,"end":17039,"loc":{"start":{"line":573,"column":12},"end":{"line":573,"column":18}},"name":"client"}},{"type":"Property","start":17041,"end":17048,"loc":{"start":{"line":573,"column":20},"end":{"line":573,"column":27}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":17041,"end":17048,"loc":{"start":{"line":573,"column":20},"end":{"line":573,"column":27}},"name":"options"},"kind":"init","value":{"type":"Identifier","start":17041,"end":17048,"loc":{"start":{"line":573,"column":20},"end":{"line":573,"column":27}},"name":"options"}}]},"init":{"type":"MemberExpression","start":17053,"end":17068,"loc":{"start":{"line":573,"column":32},"end":{"line":573,"column":47}},"object":{"type":"MemberExpression","start":17053,"end":17065,"loc":{"start":{"line":573,"column":32},"end":{"line":573,"column":44}},"object":{"type":"ThisExpression","start":17053,"end":17057,"loc":{"start":{"line":573,"column":32},"end":{"line":573,"column":36}}},"property":{"type":"Identifier","start":17058,"end":17065,"loc":{"start":{"line":573,"column":37},"end":{"line":573,"column":44}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":17066,"end":17068,"loc":{"start":{"line":573,"column":45},"end":{"line":573,"column":47}},"name":"s3"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":17074,"end":17297,"loc":{"start":{"line":575,"column":4},"end":{"line":581,"column":6}},"declarations":[{"type":"VariableDeclarator","start":17080,"end":17297,"loc":{"start":{"line":575,"column":10},"end":{"line":581,"column":6}},"id":{"type":"Identifier","start":17080,"end":17086,"loc":{"start":{"line":575,"column":10},"end":{"line":575,"column":16}},"name":"upload"},"init":{"type":"CallExpression","start":17089,"end":17297,"loc":{"start":{"line":575,"column":19},"end":{"line":581,"column":6}},"callee":{"type":"MemberExpression","start":17089,"end":17102,"loc":{"start":{"line":575,"column":19},"end":{"line":575,"column":32}},"object":{"type":"Identifier","start":17089,"end":17095,"loc":{"start":{"line":575,"column":19},"end":{"line":575,"column":25}},"name":"client"},"property":{"type":"Identifier","start":17096,"end":17102,"loc":{"start":{"line":575,"column":26},"end":{"line":575,"column":32}},"name":"upload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":17103,"end":17296,"loc":{"start":{"line":575,"column":33},"end":{"line":581,"column":5}},"properties":[{"type":"Property","start":17111,"end":17133,"loc":{"start":{"line":576,"column":6},"end":{"line":576,"column":28}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17111,"end":17117,"loc":{"start":{"line":576,"column":6},"end":{"line":576,"column":12}},"name":"Bucket"},"value":{"type":"MemberExpression","start":17119,"end":17133,"loc":{"start":{"line":576,"column":14},"end":{"line":576,"column":28}},"object":{"type":"Identifier","start":17119,"end":17126,"loc":{"start":{"line":576,"column":14},"end":{"line":576,"column":21}},"name":"options"},"property":{"type":"Identifier","start":17127,"end":17133,"loc":{"start":{"line":576,"column":22},"end":{"line":576,"column":28}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":17141,"end":17199,"loc":{"start":{"line":577,"column":6},"end":{"line":577,"column":64}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17141,"end":17144,"loc":{"start":{"line":577,"column":6},"end":{"line":577,"column":9}},"name":"Key"},"value":{"type":"CallExpression","start":17146,"end":17199,"loc":{"start":{"line":577,"column":11},"end":{"line":577,"column":64}},"callee":{"type":"MemberExpression","start":17146,"end":17160,"loc":{"start":{"line":577,"column":11},"end":{"line":577,"column":25}},"object":{"type":"Identifier","start":17146,"end":17153,"loc":{"start":{"line":577,"column":11},"end":{"line":577,"column":18}},"name":"options"},"property":{"type":"Identifier","start":17154,"end":17160,"loc":{"start":{"line":577,"column":19},"end":{"line":577,"column":25}},"name":"getKey"},"computed":false},"arguments":[{"type":"Literal","start":17161,"end":17165,"loc":{"start":{"line":577,"column":26},"end":{"line":577,"column":30}},"value":null,"raw":"null"},{"type":"Identifier","start":17167,"end":17175,"loc":{"start":{"line":577,"column":32},"end":{"line":577,"column":40}},"name":"filename"},{"type":"MemberExpression","start":17177,"end":17198,"loc":{"start":{"line":577,"column":42},"end":{"line":577,"column":63}},"object":{"type":"MemberExpression","start":17177,"end":17189,"loc":{"start":{"line":577,"column":42},"end":{"line":577,"column":54}},"object":{"type":"ThisExpression","start":17177,"end":17181,"loc":{"start":{"line":577,"column":42},"end":{"line":577,"column":46}}},"property":{"type":"Identifier","start":17182,"end":17189,"loc":{"start":{"line":577,"column":47},"end":{"line":577,"column":54}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":17190,"end":17198,"loc":{"start":{"line":577,"column":55},"end":{"line":577,"column":63}},"name":"metadata"},"computed":false}]},"kind":"init"},{"type":"Property","start":17207,"end":17223,"loc":{"start":{"line":578,"column":6},"end":{"line":578,"column":22}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17207,"end":17210,"loc":{"start":{"line":578,"column":6},"end":{"line":578,"column":9}},"name":"ACL"},"value":{"type":"MemberExpression","start":17212,"end":17223,"loc":{"start":{"line":578,"column":11},"end":{"line":578,"column":22}},"object":{"type":"Identifier","start":17212,"end":17219,"loc":{"start":{"line":578,"column":11},"end":{"line":578,"column":18}},"name":"options"},"property":{"type":"Identifier","start":17220,"end":17223,"loc":{"start":{"line":578,"column":19},"end":{"line":578,"column":22}},"name":"acl"},"computed":false},"kind":"init"},{"type":"Property","start":17231,"end":17270,"loc":{"start":{"line":579,"column":6},"end":{"line":579,"column":45}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17231,"end":17242,"loc":{"start":{"line":579,"column":6},"end":{"line":579,"column":17}},"name":"ContentType"},"value":{"type":"MemberExpression","start":17244,"end":17270,"loc":{"start":{"line":579,"column":19},"end":{"line":579,"column":45}},"object":{"type":"MemberExpression","start":17244,"end":17265,"loc":{"start":{"line":579,"column":19},"end":{"line":579,"column":40}},"object":{"type":"MemberExpression","start":17244,"end":17256,"loc":{"start":{"line":579,"column":19},"end":{"line":579,"column":31}},"object":{"type":"ThisExpression","start":17244,"end":17248,"loc":{"start":{"line":579,"column":19},"end":{"line":579,"column":23}}},"property":{"type":"Identifier","start":17249,"end":17256,"loc":{"start":{"line":579,"column":24},"end":{"line":579,"column":31}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":17257,"end":17265,"loc":{"start":{"line":579,"column":32},"end":{"line":579,"column":40}},"name":"metadata"},"computed":false},"property":{"type":"Identifier","start":17266,"end":17270,"loc":{"start":{"line":579,"column":41},"end":{"line":579,"column":45}},"name":"type"},"computed":false},"kind":"init"},{"type":"Property","start":17278,"end":17290,"loc":{"start":{"line":580,"column":6},"end":{"line":580,"column":18}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17278,"end":17282,"loc":{"start":{"line":580,"column":6},"end":{"line":580,"column":10}},"name":"Body"},"value":{"type":"Identifier","start":17284,"end":17290,"loc":{"start":{"line":580,"column":12},"end":{"line":580,"column":18}},"name":"stream"},"kind":"init"}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":17303,"end":17325,"loc":{"start":{"line":583,"column":4},"end":{"line":583,"column":26}},"expression":{"type":"AssignmentExpression","start":17303,"end":17325,"loc":{"start":{"line":583,"column":4},"end":{"line":583,"column":26}},"operator":"=","left":{"type":"MemberExpression","start":17303,"end":17316,"loc":{"start":{"line":583,"column":4},"end":{"line":583,"column":17}},"object":{"type":"ThisExpression","start":17303,"end":17307,"loc":{"start":{"line":583,"column":4},"end":{"line":583,"column":8}}},"property":{"type":"Identifier","start":17308,"end":17316,"loc":{"start":{"line":583,"column":9},"end":{"line":583,"column":17}},"name":"s3Upload"},"computed":false},"right":{"type":"Identifier","start":17319,"end":17325,"loc":{"start":{"line":583,"column":20},"end":{"line":583,"column":26}},"name":"upload"}}},{"type":"ExpressionStatement","start":17331,"end":17433,"loc":{"start":{"line":585,"column":4},"end":{"line":587,"column":6}},"expression":{"type":"CallExpression","start":17331,"end":17433,"loc":{"start":{"line":585,"column":4},"end":{"line":587,"column":6}},"callee":{"type":"MemberExpression","start":17331,"end":17340,"loc":{"start":{"line":585,"column":4},"end":{"line":585,"column":13}},"object":{"type":"Identifier","start":17331,"end":17337,"loc":{"start":{"line":585,"column":4},"end":{"line":585,"column":10}},"name":"upload"},"property":{"type":"Identifier","start":17338,"end":17340,"loc":{"start":{"line":585,"column":11},"end":{"line":585,"column":13}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":17341,"end":17361,"loc":{"start":{"line":585,"column":14},"end":{"line":585,"column":34}},"value":"httpUploadProgress","raw":"'httpUploadProgress'"},{"type":"ArrowFunctionExpression","start":17363,"end":17432,"loc":{"start":{"line":585,"column":36},"end":{"line":587,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"ObjectPattern","start":17364,"end":17381,"loc":{"start":{"line":585,"column":37},"end":{"line":585,"column":54}},"properties":[{"type":"Property","start":17366,"end":17372,"loc":{"start":{"line":585,"column":39},"end":{"line":585,"column":45}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":17366,"end":17372,"loc":{"start":{"line":585,"column":39},"end":{"line":585,"column":45}},"name":"loaded"},"kind":"init","value":{"type":"Identifier","start":17366,"end":17372,"loc":{"start":{"line":585,"column":39},"end":{"line":585,"column":45}},"name":"loaded"}},{"type":"Property","start":17374,"end":17379,"loc":{"start":{"line":585,"column":47},"end":{"line":585,"column":52}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":17374,"end":17379,"loc":{"start":{"line":585,"column":47},"end":{"line":585,"column":52}},"name":"total"},"kind":"init","value":{"type":"Identifier","start":17374,"end":17379,"loc":{"start":{"line":585,"column":47},"end":{"line":585,"column":52}},"name":"total"}}]}],"body":{"type":"BlockStatement","start":17386,"end":17432,"loc":{"start":{"line":585,"column":59},"end":{"line":587,"column":5}},"body":[{"type":"ExpressionStatement","start":17394,"end":17426,"loc":{"start":{"line":586,"column":6},"end":{"line":586,"column":38}},"expression":{"type":"CallExpression","start":17394,"end":17426,"loc":{"start":{"line":586,"column":6},"end":{"line":586,"column":38}},"callee":{"type":"MemberExpression","start":17394,"end":17411,"loc":{"start":{"line":586,"column":6},"end":{"line":586,"column":23}},"object":{"type":"ThisExpression","start":17394,"end":17398,"loc":{"start":{"line":586,"column":6},"end":{"line":586,"column":10}}},"property":{"type":"Identifier","start":17399,"end":17411,"loc":{"start":{"line":586,"column":11},"end":{"line":586,"column":23}},"name":"emitProgress"},"computed":false},"arguments":[{"type":"Identifier","start":17412,"end":17418,"loc":{"start":{"line":586,"column":24},"end":{"line":586,"column":30}},"name":"loaded"},{"type":"Identifier","start":17420,"end":17425,"loc":{"start":{"line":586,"column":32},"end":{"line":586,"column":37}},"name":"total"}]}}]}}]}},{"type":"ExpressionStatement","start":17439,"end":17872,"loc":{"start":{"line":589,"column":4},"end":{"line":605,"column":6}},"expression":{"type":"CallExpression","start":17439,"end":17872,"loc":{"start":{"line":589,"column":4},"end":{"line":605,"column":6}},"callee":{"type":"MemberExpression","start":17439,"end":17450,"loc":{"start":{"line":589,"column":4},"end":{"line":589,"column":15}},"object":{"type":"Identifier","start":17439,"end":17445,"loc":{"start":{"line":589,"column":4},"end":{"line":589,"column":10}},"name":"upload"},"property":{"type":"Identifier","start":17446,"end":17450,"loc":{"start":{"line":589,"column":11},"end":{"line":589,"column":15}},"name":"send"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":17451,"end":17871,"loc":{"start":{"line":589,"column":16},"end":{"line":605,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":17452,"end":17457,"loc":{"start":{"line":589,"column":17},"end":{"line":589,"column":22}},"name":"error"},{"type":"Identifier","start":17459,"end":17463,"loc":{"start":{"line":589,"column":24},"end":{"line":589,"column":28}},"name":"data"}],"body":{"type":"BlockStatement","start":17468,"end":17871,"loc":{"start":{"line":589,"column":33},"end":{"line":605,"column":5}},"body":[{"type":"ExpressionStatement","start":17476,"end":17496,"loc":{"start":{"line":590,"column":6},"end":{"line":590,"column":26}},"expression":{"type":"AssignmentExpression","start":17476,"end":17496,"loc":{"start":{"line":590,"column":6},"end":{"line":590,"column":26}},"operator":"=","left":{"type":"MemberExpression","start":17476,"end":17489,"loc":{"start":{"line":590,"column":6},"end":{"line":590,"column":19}},"object":{"type":"ThisExpression","start":17476,"end":17480,"loc":{"start":{"line":590,"column":6},"end":{"line":590,"column":10}}},"property":{"type":"Identifier","start":17481,"end":17489,"loc":{"start":{"line":590,"column":11},"end":{"line":590,"column":19}},"name":"s3Upload"},"computed":false},"right":{"type":"Literal","start":17492,"end":17496,"loc":{"start":{"line":590,"column":22},"end":{"line":590,"column":26}},"value":null,"raw":"null"}}},{"type":"IfStatement","start":17503,"end":17844,"loc":{"start":{"line":591,"column":6},"end":{"line":603,"column":7}},"test":{"type":"Identifier","start":17507,"end":17512,"loc":{"start":{"line":591,"column":10},"end":{"line":591,"column":15}},"name":"error"},"consequent":{"type":"BlockStatement","start":17514,"end":17553,"loc":{"start":{"line":591,"column":17},"end":{"line":593,"column":7}},"body":[{"type":"ExpressionStatement","start":17524,"end":17545,"loc":{"start":{"line":592,"column":8},"end":{"line":592,"column":29}},"expression":{"type":"CallExpression","start":17524,"end":17545,"loc":{"start":{"line":592,"column":8},"end":{"line":592,"column":29}},"callee":{"type":"MemberExpression","start":17524,"end":17538,"loc":{"start":{"line":592,"column":8},"end":{"line":592,"column":22}},"object":{"type":"ThisExpression","start":17524,"end":17528,"loc":{"start":{"line":592,"column":8},"end":{"line":592,"column":12}}},"property":{"type":"Identifier","start":17529,"end":17538,"loc":{"start":{"line":592,"column":13},"end":{"line":592,"column":22}},"name":"emitError"},"computed":false},"arguments":[{"type":"Identifier","start":17539,"end":17544,"loc":{"start":{"line":592,"column":23},"end":{"line":592,"column":28}},"name":"error"}]}}]},"alternate":{"type":"BlockStatement","start":17559,"end":17844,"loc":{"start":{"line":593,"column":13},"end":{"line":603,"column":7}},"body":[{"type":"VariableDeclaration","start":17569,"end":17625,"loc":{"start":{"line":594,"column":8},"end":{"line":594,"column":64}},"declarations":[{"type":"VariableDeclarator","start":17575,"end":17625,"loc":{"start":{"line":594,"column":14},"end":{"line":594,"column":64}},"id":{"type":"Identifier","start":17575,"end":17578,"loc":{"start":{"line":594,"column":14},"end":{"line":594,"column":17}},"name":"url"},"init":{"type":"ConditionalExpression","start":17581,"end":17625,"loc":{"start":{"line":594,"column":20},"end":{"line":594,"column":64}},"test":{"type":"LogicalExpression","start":17581,"end":17602,"loc":{"start":{"line":594,"column":20},"end":{"line":594,"column":41}},"left":{"type":"Identifier","start":17581,"end":17585,"loc":{"start":{"line":594,"column":20},"end":{"line":594,"column":24}},"name":"data"},"operator":"&&","right":{"type":"MemberExpression","start":17589,"end":17602,"loc":{"start":{"line":594,"column":28},"end":{"line":594,"column":41}},"object":{"type":"Identifier","start":17589,"end":17593,"loc":{"start":{"line":594,"column":28},"end":{"line":594,"column":32}},"name":"data"},"property":{"type":"Identifier","start":17594,"end":17602,"loc":{"start":{"line":594,"column":33},"end":{"line":594,"column":41}},"name":"Location"},"computed":false}},"consequent":{"type":"MemberExpression","start":17605,"end":17618,"loc":{"start":{"line":594,"column":44},"end":{"line":594,"column":57}},"object":{"type":"Identifier","start":17605,"end":17609,"loc":{"start":{"line":594,"column":44},"end":{"line":594,"column":48}},"name":"data"},"property":{"type":"Identifier","start":17610,"end":17618,"loc":{"start":{"line":594,"column":49},"end":{"line":594,"column":57}},"name":"Location"},"computed":false},"alternate":{"type":"Literal","start":17621,"end":17625,"loc":{"start":{"line":594,"column":60},"end":{"line":594,"column":64}},"value":null,"raw":"null"}}}],"kind":"const"},{"type":"ExpressionStatement","start":17634,"end":17836,"loc":{"start":{"line":595,"column":8},"end":{"line":602,"column":10}},"expression":{"type":"CallExpression","start":17634,"end":17836,"loc":{"start":{"line":595,"column":8},"end":{"line":602,"column":10}},"callee":{"type":"MemberExpression","start":17634,"end":17650,"loc":{"start":{"line":595,"column":8},"end":{"line":595,"column":24}},"object":{"type":"ThisExpression","start":17634,"end":17638,"loc":{"start":{"line":595,"column":8},"end":{"line":595,"column":12}}},"property":{"type":"Identifier","start":17639,"end":17650,"loc":{"start":{"line":595,"column":13},"end":{"line":595,"column":24}},"name":"emitSuccess"},"computed":false},"arguments":[{"type":"Identifier","start":17651,"end":17654,"loc":{"start":{"line":595,"column":25},"end":{"line":595,"column":28}},"name":"url"},{"type":"ObjectExpression","start":17656,"end":17835,"loc":{"start":{"line":595,"column":30},"end":{"line":602,"column":9}},"properties":[{"type":"Property","start":17668,"end":17825,"loc":{"start":{"line":596,"column":10},"end":{"line":601,"column":11}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17668,"end":17676,"loc":{"start":{"line":596,"column":10},"end":{"line":596,"column":18}},"name":"response"},"value":{"type":"ObjectExpression","start":17678,"end":17825,"loc":{"start":{"line":596,"column":20},"end":{"line":601,"column":11}},"properties":[{"type":"Property","start":17692,"end":17726,"loc":{"start":{"line":597,"column":12},"end":{"line":597,"column":46}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17692,"end":17704,"loc":{"start":{"line":597,"column":12},"end":{"line":597,"column":24}},"name":"responseText"},"value":{"type":"CallExpression","start":17706,"end":17726,"loc":{"start":{"line":597,"column":26},"end":{"line":597,"column":46}},"callee":{"type":"MemberExpression","start":17706,"end":17720,"loc":{"start":{"line":597,"column":26},"end":{"line":597,"column":40}},"object":{"type":"Identifier","start":17706,"end":17710,"loc":{"start":{"line":597,"column":26},"end":{"line":597,"column":30}},"name":"JSON"},"property":{"type":"Identifier","start":17711,"end":17720,"loc":{"start":{"line":597,"column":31},"end":{"line":597,"column":40}},"name":"stringify"},"computed":false},"arguments":[{"type":"Identifier","start":17721,"end":17725,"loc":{"start":{"line":597,"column":41},"end":{"line":597,"column":45}},"name":"data"}]},"kind":"init"},{"type":"Property","start":17740,"end":17813,"loc":{"start":{"line":598,"column":12},"end":{"line":600,"column":13}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":17740,"end":17747,"loc":{"start":{"line":598,"column":12},"end":{"line":598,"column":19}},"name":"headers"},"value":{"type":"ObjectExpression","start":17749,"end":17813,"loc":{"start":{"line":598,"column":21},"end":{"line":600,"column":13}},"properties":[{"type":"Property","start":17765,"end":17799,"loc":{"start":{"line":599,"column":14},"end":{"line":599,"column":48}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":17765,"end":17779,"loc":{"start":{"line":599,"column":14},"end":{"line":599,"column":28}},"value":"content-type","raw":"'content-type'"},"value":{"type":"Literal","start":17781,"end":17799,"loc":{"start":{"line":599,"column":30},"end":{"line":599,"column":48}},"value":"application/json","raw":"'application/json'"},"kind":"init"}]},"kind":"init"}]},"kind":"init"}]}]}}]}},{"type":"ExpressionStatement","start":17851,"end":17865,"loc":{"start":{"line":604,"column":6},"end":{"line":604,"column":20}},"expression":{"type":"CallExpression","start":17851,"end":17865,"loc":{"start":{"line":604,"column":6},"end":{"line":604,"column":20}},"callee":{"type":"MemberExpression","start":17851,"end":17863,"loc":{"start":{"line":604,"column":6},"end":{"line":604,"column":18}},"object":{"type":"ThisExpression","start":17851,"end":17855,"loc":{"start":{"line":604,"column":6},"end":{"line":604,"column":10}}},"property":{"type":"Identifier","start":17856,"end":17863,"loc":{"start":{"line":604,"column":11},"end":{"line":604,"column":18}},"name":"cleanUp"},"computed":false},"arguments":[]}}]}}]}}],"comments":[{"type":"Block","value":"*\n   * Upload a stream to S3.\n   ","start":16726,"end":16763,"loc":{"start":{"line":563,"column":2},"end":{"line":565,"column":5}}}]}}}]}},{"type":"ExpressionStatement","start":17880,"end":17919,"loc":{"start":{"line":609,"column":0},"end":{"line":609,"column":39}},"expression":{"type":"AssignmentExpression","start":17880,"end":17919,"loc":{"start":{"line":609,"column":0},"end":{"line":609,"column":39}},"operator":"=","left":{"type":"MemberExpression","start":17880,"end":17905,"loc":{"start":{"line":609,"column":0},"end":{"line":609,"column":25}},"object":{"type":"Identifier","start":17880,"end":17888,"loc":{"start":{"line":609,"column":0},"end":{"line":609,"column":8}},"name":"Uploader"},"property":{"type":"Identifier","start":17889,"end":17905,"loc":{"start":{"line":609,"column":9},"end":{"line":609,"column":25}},"name":"FILE_NAME_PREFIX"},"computed":false},"right":{"type":"Literal","start":17908,"end":17919,"loc":{"start":{"line":609,"column":28},"end":{"line":609,"column":39}},"value":"uppy-file","raw":"'uppy-file'"}}},{"type":"ExpressionStatement","start":17920,"end":17957,"loc":{"start":{"line":610,"column":0},"end":{"line":610,"column":37}},"expression":{"type":"AssignmentExpression","start":17920,"end":17957,"loc":{"start":{"line":610,"column":0},"end":{"line":610,"column":37}},"operator":"=","left":{"type":"MemberExpression","start":17920,"end":17943,"loc":{"start":{"line":610,"column":0},"end":{"line":610,"column":23}},"object":{"type":"Identifier","start":17920,"end":17928,"loc":{"start":{"line":610,"column":0},"end":{"line":610,"column":8}},"name":"Uploader"},"property":{"type":"Identifier","start":17929,"end":17943,"loc":{"start":{"line":610,"column":9},"end":{"line":610,"column":23}},"name":"STORAGE_PREFIX"},"computed":false},"right":{"type":"Literal","start":17946,"end":17957,"loc":{"start":{"line":610,"column":26},"end":{"line":610,"column":37}},"value":"companion","raw":"'companion'"}}},{"type":"ExpressionStatement","start":17959,"end":17984,"loc":{"start":{"line":612,"column":0},"end":{"line":612,"column":25}},"expression":{"type":"AssignmentExpression","start":17959,"end":17984,"loc":{"start":{"line":612,"column":0},"end":{"line":612,"column":25}},"operator":"=","left":{"type":"MemberExpression","start":17959,"end":17973,"loc":{"start":{"line":612,"column":0},"end":{"line":612,"column":14}},"object":{"type":"Identifier","start":17959,"end":17965,"loc":{"start":{"line":612,"column":0},"end":{"line":612,"column":6}},"name":"module"},"property":{"type":"Identifier","start":17966,"end":17973,"loc":{"start":{"line":612,"column":7},"end":{"line":612,"column":14}},"name":"exports"},"computed":false},"right":{"type":"Identifier","start":17976,"end":17984,"loc":{"start":{"line":612,"column":17},"end":{"line":612,"column":25}},"name":"Uploader"}}}],"sourceType":"script"}