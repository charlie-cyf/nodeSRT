{"type":"Program","start":0,"end":1612,"loc":{"start":{"line":1,"column":0},"end":{"line":63,"column":0}},"body":[{"type":"VariableDeclaration","start":14,"end":54,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":40}},"declarations":[{"type":"VariableDeclarator","start":20,"end":54,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":40}},"id":{"type":"Identifier","start":20,"end":23,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":9}},"name":"NRP"},"init":{"type":"CallExpression","start":26,"end":54,"loc":{"start":{"line":2,"column":12},"end":{"line":2,"column":40}},"callee":{"type":"Identifier","start":26,"end":33,"loc":{"start":{"line":2,"column":12},"end":{"line":2,"column":19}},"name":"require"},"arguments":[{"type":"Literal","start":34,"end":53,"loc":{"start":{"line":2,"column":20},"end":{"line":2,"column":39}},"value":"node-redis-pubsub","raw":"'node-redis-pubsub'"}]}}],"kind":"const"},{"type":"ClassDeclaration","start":262,"end":1539,"loc":{"start":{"line":9,"column":0},"end":{"line":58,"column":1}},"id":{"type":"Identifier","start":268,"end":280,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":18}},"name":"RedisEmitter"},"superClass":{"type":"Identifier","start":289,"end":292,"loc":{"start":{"line":9,"column":27},"end":{"line":9,"column":30}},"name":"NRP"},"body":{"type":"ClassBody","start":293,"end":1539,"loc":{"start":{"line":9,"column":31},"end":{"line":58,"column":1}},"body":[{"type":"MethodDefinition","start":354,"end":429,"loc":{"start":{"line":14,"column":2},"end":{"line":17,"column":3}},"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":354,"end":365,"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":13}},"name":"constructor"},"value":{"type":"FunctionExpression","start":366,"end":429,"loc":{"start":{"line":14,"column":14},"end":{"line":17,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":367,"end":375,"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":23}},"name":"redisUrl"}],"body":{"type":"BlockStatement","start":377,"end":429,"loc":{"start":{"line":14,"column":25},"end":{"line":17,"column":3}},"body":[{"type":"ExpressionStatement","start":401,"end":425,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":28}},"expression":{"type":"CallExpression","start":401,"end":425,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":28}},"callee":{"type":"Super","start":401,"end":406,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":9}}},"arguments":[{"type":"ObjectExpression","start":407,"end":424,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":27}},"properties":[{"type":"Property","start":409,"end":422,"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":25}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":409,"end":412,"loc":{"start":{"line":16,"column":12},"end":{"line":16,"column":15}},"name":"url"},"value":{"type":"Identifier","start":414,"end":422,"loc":{"start":{"line":16,"column":17},"end":{"line":16,"column":25}},"name":"redisUrl"},"kind":"init"}]}]}}]}}},{"type":"MethodDefinition","start":584,"end":729,"loc":{"start":{"line":24,"column":2},"end":{"line":29,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":584,"end":588,"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":6}},"name":"once"},"value":{"type":"FunctionExpression","start":589,"end":729,"loc":{"start":{"line":24,"column":7},"end":{"line":29,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":590,"end":599,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":17}},"name":"eventName"},{"type":"Identifier","start":601,"end":608,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":26}},"name":"handler"}],"body":{"type":"BlockStatement","start":610,"end":729,"loc":{"start":{"line":24,"column":28},"end":{"line":29,"column":3}},"body":[{"type":"VariableDeclaration","start":616,"end":725,"loc":{"start":{"line":25,"column":4},"end":{"line":28,"column":6}},"declarations":[{"type":"VariableDeclarator","start":622,"end":725,"loc":{"start":{"line":25,"column":10},"end":{"line":28,"column":6}},"id":{"type":"Identifier","start":622,"end":636,"loc":{"start":{"line":25,"column":10},"end":{"line":25,"column":24}},"name":"removeListener"},"init":{"type":"CallExpression","start":639,"end":725,"loc":{"start":{"line":25,"column":27},"end":{"line":28,"column":6}},"callee":{"type":"MemberExpression","start":639,"end":646,"loc":{"start":{"line":25,"column":27},"end":{"line":25,"column":34}},"object":{"type":"ThisExpression","start":639,"end":643,"loc":{"start":{"line":25,"column":27},"end":{"line":25,"column":31}}},"property":{"type":"Identifier","start":644,"end":646,"loc":{"start":{"line":25,"column":32},"end":{"line":25,"column":34}},"name":"on"},"computed":false},"arguments":[{"type":"Identifier","start":647,"end":656,"loc":{"start":{"line":25,"column":35},"end":{"line":25,"column":44}},"name":"eventName"},{"type":"ArrowFunctionExpression","start":658,"end":724,"loc":{"start":{"line":25,"column":46},"end":{"line":28,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":659,"end":666,"loc":{"start":{"line":25,"column":47},"end":{"line":25,"column":54}},"name":"message"}],"body":{"type":"BlockStatement","start":671,"end":724,"loc":{"start":{"line":25,"column":59},"end":{"line":28,"column":5}},"body":[{"type":"ExpressionStatement","start":679,"end":695,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":22}},"expression":{"type":"CallExpression","start":679,"end":695,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":22}},"callee":{"type":"Identifier","start":679,"end":686,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":13}},"name":"handler"},"arguments":[{"type":"Identifier","start":687,"end":694,"loc":{"start":{"line":26,"column":14},"end":{"line":26,"column":21}},"name":"message"}]}},{"type":"ExpressionStatement","start":702,"end":718,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":22}},"expression":{"type":"CallExpression","start":702,"end":718,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":22}},"callee":{"type":"Identifier","start":702,"end":716,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":20}},"name":"removeListener"},"arguments":[]}}]}}]}}],"kind":"const"}]}}},{"type":"MethodDefinition","start":904,"end":983,"loc":{"start":{"line":36,"column":2},"end":{"line":38,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":904,"end":908,"loc":{"start":{"line":36,"column":2},"end":{"line":36,"column":6}},"name":"emit"},"value":{"type":"FunctionExpression","start":909,"end":983,"loc":{"start":{"line":36,"column":7},"end":{"line":38,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":910,"end":919,"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":17}},"name":"eventName"},{"type":"Identifier","start":921,"end":928,"loc":{"start":{"line":36,"column":19},"end":{"line":36,"column":26}},"name":"message"}],"body":{"type":"BlockStatement","start":930,"end":983,"loc":{"start":{"line":36,"column":28},"end":{"line":38,"column":3}},"body":[{"type":"ReturnStatement","start":936,"end":979,"loc":{"start":{"line":37,"column":4},"end":{"line":37,"column":47}},"argument":{"type":"CallExpression","start":943,"end":979,"loc":{"start":{"line":37,"column":11},"end":{"line":37,"column":47}},"callee":{"type":"MemberExpression","start":943,"end":953,"loc":{"start":{"line":37,"column":11},"end":{"line":37,"column":21}},"object":{"type":"Super","start":943,"end":948,"loc":{"start":{"line":37,"column":11},"end":{"line":37,"column":16}}},"property":{"type":"Identifier","start":949,"end":953,"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":21}},"name":"emit"},"computed":false},"arguments":[{"type":"Identifier","start":954,"end":963,"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":31}},"name":"eventName"},{"type":"LogicalExpression","start":965,"end":978,"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":46}},"left":{"type":"Identifier","start":965,"end":972,"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":40}},"name":"message"},"operator":"||","right":{"type":"ObjectExpression","start":976,"end":978,"loc":{"start":{"line":37,"column":44},"end":{"line":37,"column":46}},"properties":[]}}]}}]}}},{"type":"MethodDefinition","start":1144,"end":1294,"loc":{"start":{"line":45,"column":2},"end":{"line":48,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1144,"end":1158,"loc":{"start":{"line":45,"column":2},"end":{"line":45,"column":16}},"name":"removeListener"},"value":{"type":"FunctionExpression","start":1159,"end":1294,"loc":{"start":{"line":45,"column":17},"end":{"line":48,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1160,"end":1169,"loc":{"start":{"line":45,"column":18},"end":{"line":45,"column":27}},"name":"eventName"},{"type":"Identifier","start":1171,"end":1178,"loc":{"start":{"line":45,"column":29},"end":{"line":45,"column":36}},"name":"handler"}],"body":{"type":"BlockStatement","start":1180,"end":1294,"loc":{"start":{"line":45,"column":38},"end":{"line":48,"column":3}},"body":[{"type":"ExpressionStatement","start":1186,"end":1234,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":52}},"expression":{"type":"CallExpression","start":1186,"end":1234,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":52}},"callee":{"type":"MemberExpression","start":1186,"end":1214,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":32}},"object":{"type":"MemberExpression","start":1186,"end":1199,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":17}},"object":{"type":"ThisExpression","start":1186,"end":1190,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":8}}},"property":{"type":"Identifier","start":1191,"end":1199,"loc":{"start":{"line":46,"column":9},"end":{"line":46,"column":17}},"name":"receiver"},"computed":false},"property":{"type":"Identifier","start":1200,"end":1214,"loc":{"start":{"line":46,"column":18},"end":{"line":46,"column":32}},"name":"removeListener"},"computed":false},"arguments":[{"type":"Identifier","start":1215,"end":1224,"loc":{"start":{"line":46,"column":33},"end":{"line":46,"column":42}},"name":"eventName"},{"type":"Identifier","start":1226,"end":1233,"loc":{"start":{"line":46,"column":44},"end":{"line":46,"column":51}},"name":"handler"}]}},{"type":"ExpressionStatement","start":1239,"end":1290,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":55}},"expression":{"type":"CallExpression","start":1239,"end":1290,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":55}},"callee":{"type":"MemberExpression","start":1239,"end":1265,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":30}},"object":{"type":"MemberExpression","start":1239,"end":1252,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":17}},"object":{"type":"ThisExpression","start":1239,"end":1243,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":8}}},"property":{"type":"Identifier","start":1244,"end":1252,"loc":{"start":{"line":47,"column":9},"end":{"line":47,"column":17}},"name":"receiver"},"computed":false},"property":{"type":"Identifier","start":1253,"end":1265,"loc":{"start":{"line":47,"column":18},"end":{"line":47,"column":30}},"name":"punsubscribe"},"computed":false},"arguments":[{"type":"BinaryExpression","start":1266,"end":1289,"loc":{"start":{"line":47,"column":31},"end":{"line":47,"column":54}},"left":{"type":"MemberExpression","start":1266,"end":1277,"loc":{"start":{"line":47,"column":31},"end":{"line":47,"column":42}},"object":{"type":"ThisExpression","start":1266,"end":1270,"loc":{"start":{"line":47,"column":31},"end":{"line":47,"column":35}}},"property":{"type":"Identifier","start":1271,"end":1277,"loc":{"start":{"line":47,"column":36},"end":{"line":47,"column":42}},"name":"prefix"},"computed":false},"operator":"+","right":{"type":"Identifier","start":1280,"end":1289,"loc":{"start":{"line":47,"column":45},"end":{"line":47,"column":54}},"name":"eventName"}}]}}]}}},{"type":"MethodDefinition","start":1397,"end":1537,"loc":{"start":{"line":54,"column":2},"end":{"line":57,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1397,"end":1415,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":20}},"name":"removeAllListeners"},"value":{"type":"FunctionExpression","start":1416,"end":1537,"loc":{"start":{"line":54,"column":21},"end":{"line":57,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1417,"end":1426,"loc":{"start":{"line":54,"column":22},"end":{"line":54,"column":31}},"name":"eventName"}],"body":{"type":"BlockStatement","start":1428,"end":1537,"loc":{"start":{"line":54,"column":33},"end":{"line":57,"column":3}},"body":[{"type":"ExpressionStatement","start":1434,"end":1477,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":47}},"expression":{"type":"CallExpression","start":1434,"end":1477,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":47}},"callee":{"type":"MemberExpression","start":1434,"end":1466,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":36}},"object":{"type":"MemberExpression","start":1434,"end":1447,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":17}},"object":{"type":"ThisExpression","start":1434,"end":1438,"loc":{"start":{"line":55,"column":4},"end":{"line":55,"column":8}}},"property":{"type":"Identifier","start":1439,"end":1447,"loc":{"start":{"line":55,"column":9},"end":{"line":55,"column":17}},"name":"receiver"},"computed":false},"property":{"type":"Identifier","start":1448,"end":1466,"loc":{"start":{"line":55,"column":18},"end":{"line":55,"column":36}},"name":"removeAllListeners"},"computed":false},"arguments":[{"type":"Identifier","start":1467,"end":1476,"loc":{"start":{"line":55,"column":37},"end":{"line":55,"column":46}},"name":"eventName"}]}},{"type":"ExpressionStatement","start":1482,"end":1533,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":55}},"expression":{"type":"CallExpression","start":1482,"end":1533,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":55}},"callee":{"type":"MemberExpression","start":1482,"end":1508,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":30}},"object":{"type":"MemberExpression","start":1482,"end":1495,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":17}},"object":{"type":"ThisExpression","start":1482,"end":1486,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":8}}},"property":{"type":"Identifier","start":1487,"end":1495,"loc":{"start":{"line":56,"column":9},"end":{"line":56,"column":17}},"name":"receiver"},"computed":false},"property":{"type":"Identifier","start":1496,"end":1508,"loc":{"start":{"line":56,"column":18},"end":{"line":56,"column":30}},"name":"punsubscribe"},"computed":false},"arguments":[{"type":"BinaryExpression","start":1509,"end":1532,"loc":{"start":{"line":56,"column":31},"end":{"line":56,"column":54}},"left":{"type":"MemberExpression","start":1509,"end":1520,"loc":{"start":{"line":56,"column":31},"end":{"line":56,"column":42}},"object":{"type":"ThisExpression","start":1509,"end":1513,"loc":{"start":{"line":56,"column":31},"end":{"line":56,"column":35}}},"property":{"type":"Identifier","start":1514,"end":1520,"loc":{"start":{"line":56,"column":36},"end":{"line":56,"column":42}},"name":"prefix"},"computed":false},"operator":"+","right":{"type":"Identifier","start":1523,"end":1532,"loc":{"start":{"line":56,"column":45},"end":{"line":56,"column":54}},"name":"eventName"}}]}}]}}}]}},{"type":"ExpressionStatement","start":1541,"end":1611,"loc":{"start":{"line":60,"column":0},"end":{"line":62,"column":1}},"expression":{"type":"AssignmentExpression","start":1541,"end":1611,"loc":{"start":{"line":60,"column":0},"end":{"line":62,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":1541,"end":1555,"loc":{"start":{"line":60,"column":0},"end":{"line":60,"column":14}},"object":{"type":"Identifier","start":1541,"end":1547,"loc":{"start":{"line":60,"column":0},"end":{"line":60,"column":6}},"name":"module"},"property":{"type":"Identifier","start":1548,"end":1555,"loc":{"start":{"line":60,"column":7},"end":{"line":60,"column":14}},"name":"exports"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1558,"end":1611,"loc":{"start":{"line":60,"column":17},"end":{"line":62,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1559,"end":1567,"loc":{"start":{"line":60,"column":18},"end":{"line":60,"column":26}},"name":"redisUrl"}],"body":{"type":"BlockStatement","start":1572,"end":1611,"loc":{"start":{"line":60,"column":31},"end":{"line":62,"column":1}},"body":[{"type":"ReturnStatement","start":1576,"end":1609,"loc":{"start":{"line":61,"column":2},"end":{"line":61,"column":35}},"argument":{"type":"NewExpression","start":1583,"end":1609,"loc":{"start":{"line":61,"column":9},"end":{"line":61,"column":35}},"callee":{"type":"Identifier","start":1587,"end":1599,"loc":{"start":{"line":61,"column":13},"end":{"line":61,"column":25}},"name":"RedisEmitter"},"arguments":[{"type":"Identifier","start":1600,"end":1608,"loc":{"start":{"line":61,"column":26},"end":{"line":61,"column":34}},"name":"redisUrl"}]}}]}}}}],"sourceType":"module"}