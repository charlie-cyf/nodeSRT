{"type":"Program","start":0,"end":1551,"body":[{"type":"VariableDeclaration","start":0,"end":35,"declarations":[{"type":"VariableDeclarator","start":6,"end":35,"id":{"type":"Identifier","start":6,"end":9,"name":"jwt"},"init":{"type":"CallExpression","start":12,"end":35,"callee":{"type":"Identifier","start":12,"end":19,"name":"require"},"arguments":[{"type":"Literal","start":20,"end":34,"value":"jsonwebtoken","raw":"'jsonwebtoken'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":36,"end":83,"declarations":[{"type":"VariableDeclarator","start":42,"end":83,"id":{"type":"ObjectPattern","start":42,"end":62,"properties":[{"type":"Property","start":44,"end":51,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":44,"end":51,"name":"encrypt"},"kind":"init","value":{"type":"Identifier","start":44,"end":51,"name":"encrypt"}},{"type":"Property","start":53,"end":60,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":53,"end":60,"name":"decrypt"},"kind":"init","value":{"type":"Identifier","start":53,"end":60,"name":"decrypt"}}]},"init":{"type":"CallExpression","start":65,"end":83,"callee":{"type":"Identifier","start":65,"end":72,"name":"require"},"arguments":[{"type":"Literal","start":73,"end":82,"value":"./utils","raw":"'./utils'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":144,"end":290,"expression":{"type":"AssignmentExpression","start":144,"end":290,"operator":"=","left":{"type":"MemberExpression","start":144,"end":172,"object":{"type":"MemberExpression","start":144,"end":158,"object":{"type":"Identifier","start":144,"end":150,"name":"module"},"property":{"type":"Identifier","start":151,"end":158,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":159,"end":172,"name":"generateToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":175,"end":290,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":176,"end":183,"name":"payload"},{"type":"Identifier","start":185,"end":191,"name":"secret"}],"body":{"type":"BlockStatement","start":196,"end":290,"body":[{"type":"ReturnStatement","start":200,"end":288,"argument":{"type":"CallExpression","start":207,"end":288,"callee":{"type":"Identifier","start":207,"end":214,"name":"encrypt"},"arguments":[{"type":"CallExpression","start":215,"end":279,"callee":{"type":"MemberExpression","start":215,"end":223,"object":{"type":"Identifier","start":215,"end":218,"name":"jwt"},"property":{"type":"Identifier","start":219,"end":223,"name":"sign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":224,"end":241,"properties":[{"type":"Property","start":226,"end":239,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":226,"end":230,"name":"data"},"value":{"type":"Identifier","start":232,"end":239,"name":"payload"},"kind":"init"}]},{"type":"Identifier","start":243,"end":249,"name":"secret"},{"type":"ObjectExpression","start":251,"end":278,"properties":[{"type":"Property","start":253,"end":276,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":253,"end":262,"name":"expiresIn"},"value":{"type":"BinaryExpression","start":264,"end":276,"left":{"type":"BinaryExpression","start":264,"end":271,"left":{"type":"Literal","start":264,"end":266,"value":60,"raw":"60"},"operator":"*","right":{"type":"Literal","start":269,"end":271,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":274,"end":276,"value":24,"raw":"24"}},"kind":"init"}]}]},{"type":"Identifier","start":281,"end":287,"name":"secret"}]}}]}}}},{"type":"ExpressionStatement","start":354,"end":548,"expression":{"type":"AssignmentExpression","start":354,"end":548,"operator":"=","left":{"type":"MemberExpression","start":354,"end":380,"object":{"type":"MemberExpression","start":354,"end":368,"object":{"type":"Identifier","start":354,"end":360,"name":"module"},"property":{"type":"Identifier","start":361,"end":368,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":369,"end":380,"name":"verifyToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":383,"end":548,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":384,"end":389,"name":"token"},{"type":"Identifier","start":391,"end":397,"name":"secret"}],"body":{"type":"BlockStatement","start":402,"end":548,"body":[{"type":"TryStatement","start":406,"end":546,"block":{"type":"BlockStatement","start":410,"end":509,"body":[{"type":"ReturnStatement","start":434,"end":505,"argument":{"type":"ObjectExpression","start":441,"end":505,"properties":[{"type":"Property","start":443,"end":503,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":443,"end":450,"name":"payload"},"value":{"type":"MemberExpression","start":452,"end":503,"object":{"type":"CallExpression","start":452,"end":498,"callee":{"type":"MemberExpression","start":452,"end":462,"object":{"type":"Identifier","start":452,"end":455,"name":"jwt"},"property":{"type":"Identifier","start":456,"end":462,"name":"verify"},"computed":false},"arguments":[{"type":"CallExpression","start":463,"end":485,"callee":{"type":"Identifier","start":463,"end":470,"name":"decrypt"},"arguments":[{"type":"Identifier","start":471,"end":476,"name":"token"},{"type":"Identifier","start":478,"end":484,"name":"secret"}]},{"type":"Identifier","start":487,"end":493,"name":"secret"},{"type":"ObjectExpression","start":495,"end":497,"properties":[]}]},"property":{"type":"Identifier","start":499,"end":503,"name":"data"},"computed":false},"kind":"init"}]}}]},"handler":{"type":"CatchClause","start":510,"end":546,"param":{"type":"Identifier","start":517,"end":520,"name":"err"},"body":{"type":"BlockStatement","start":522,"end":546,"body":[{"type":"ReturnStatement","start":528,"end":542,"argument":{"type":"ObjectExpression","start":535,"end":542,"properties":[{"type":"Property","start":537,"end":540,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":537,"end":540,"name":"err"},"kind":"init","value":{"type":"Identifier","start":537,"end":540,"name":"err"}}]}}]}},"finalizer":null}]}}}},{"type":"ExpressionStatement","start":678,"end":1080,"expression":{"type":"AssignmentExpression","start":678,"end":1080,"operator":"=","left":{"type":"MemberExpression","start":678,"end":705,"object":{"type":"MemberExpression","start":678,"end":692,"object":{"type":"Identifier","start":678,"end":684,"name":"module"},"property":{"type":"Identifier","start":685,"end":692,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":693,"end":705,"name":"addToCookies"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":708,"end":1080,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":709,"end":712,"name":"res"},{"type":"Identifier","start":714,"end":719,"name":"token"},{"type":"Identifier","start":721,"end":737,"name":"companionOptions"},{"type":"Identifier","start":739,"end":751,"name":"providerName"}],"body":{"type":"BlockStatement","start":756,"end":1080,"body":[{"type":"VariableDeclaration","start":760,"end":874,"declarations":[{"type":"VariableDeclarator","start":766,"end":874,"id":{"type":"Identifier","start":766,"end":779,"name":"cookieOptions"},"init":{"type":"ObjectExpression","start":782,"end":874,"properties":[{"type":"Property","start":788,"end":820,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":788,"end":794,"name":"maxAge"},"value":{"type":"BinaryExpression","start":796,"end":820,"left":{"type":"BinaryExpression","start":796,"end":815,"left":{"type":"BinaryExpression","start":796,"end":810,"left":{"type":"BinaryExpression","start":796,"end":805,"left":{"type":"Literal","start":796,"end":800,"value":1000,"raw":"1000"},"operator":"*","right":{"type":"Literal","start":803,"end":805,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":808,"end":810,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":813,"end":815,"value":24,"raw":"24"}},"operator":"*","right":{"type":"Literal","start":818,"end":820,"value":30,"raw":"30"}},"kind":"init"},{"type":"Property","start":856,"end":870,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":856,"end":864,"name":"httpOnly"},"value":{"type":"Literal","start":866,"end":870,"value":true,"raw":"true"},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":878,"end":975,"test":{"type":"MemberExpression","start":882,"end":911,"object":{"type":"Identifier","start":882,"end":898,"name":"companionOptions"},"property":{"type":"Identifier","start":899,"end":911,"name":"cookieDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":913,"end":975,"body":[{"type":"ExpressionStatement","start":919,"end":971,"expression":{"type":"AssignmentExpression","start":919,"end":971,"operator":"=","left":{"type":"MemberExpression","start":919,"end":939,"object":{"type":"Identifier","start":919,"end":932,"name":"cookieOptions"},"property":{"type":"Identifier","start":933,"end":939,"name":"domain"},"computed":false},"right":{"type":"MemberExpression","start":942,"end":971,"object":{"type":"Identifier","start":942,"end":958,"name":"companionOptions"},"property":{"type":"Identifier","start":959,"end":971,"name":"cookieDomain"},"computed":false}}}]},"alternate":null},{"type":"ExpressionStatement","start":1012,"end":1078,"expression":{"type":"CallExpression","start":1012,"end":1078,"callee":{"type":"MemberExpression","start":1012,"end":1022,"object":{"type":"Identifier","start":1012,"end":1015,"name":"res"},"property":{"type":"Identifier","start":1016,"end":1022,"name":"cookie"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1023,"end":1055,"expressions":[{"type":"Identifier","start":1041,"end":1053,"name":"providerName"}],"quasis":[{"type":"TemplateElement","start":1024,"end":1039,"value":{"raw":"uppyAuthToken--","cooked":"uppyAuthToken--"},"tail":false},{"type":"TemplateElement","start":1054,"end":1054,"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","start":1057,"end":1062,"name":"token"},{"type":"Identifier","start":1064,"end":1077,"name":"cookieOptions"}]}}]}}}},{"type":"ExpressionStatement","start":1185,"end":1550,"expression":{"type":"AssignmentExpression","start":1185,"end":1550,"operator":"=","left":{"type":"MemberExpression","start":1185,"end":1217,"object":{"type":"MemberExpression","start":1185,"end":1199,"object":{"type":"Identifier","start":1185,"end":1191,"name":"module"},"property":{"type":"Identifier","start":1192,"end":1199,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":1200,"end":1217,"name":"removeFromCookies"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1220,"end":1550,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1221,"end":1224,"name":"res"},{"type":"Identifier","start":1226,"end":1242,"name":"companionOptions"},{"type":"Identifier","start":1244,"end":1256,"name":"providerName"}],"body":{"type":"BlockStatement","start":1261,"end":1550,"body":[{"type":"VariableDeclaration","start":1265,"end":1379,"declarations":[{"type":"VariableDeclarator","start":1271,"end":1379,"id":{"type":"Identifier","start":1271,"end":1284,"name":"cookieOptions"},"init":{"type":"ObjectExpression","start":1287,"end":1379,"properties":[{"type":"Property","start":1293,"end":1325,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1293,"end":1299,"name":"maxAge"},"value":{"type":"BinaryExpression","start":1301,"end":1325,"left":{"type":"BinaryExpression","start":1301,"end":1320,"left":{"type":"BinaryExpression","start":1301,"end":1315,"left":{"type":"BinaryExpression","start":1301,"end":1310,"left":{"type":"Literal","start":1301,"end":1305,"value":1000,"raw":"1000"},"operator":"*","right":{"type":"Literal","start":1308,"end":1310,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1313,"end":1315,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1318,"end":1320,"value":24,"raw":"24"}},"operator":"*","right":{"type":"Literal","start":1323,"end":1325,"value":30,"raw":"30"}},"kind":"init"},{"type":"Property","start":1361,"end":1375,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1361,"end":1369,"name":"httpOnly"},"value":{"type":"Literal","start":1371,"end":1375,"value":true,"raw":"true"},"kind":"init"}]}}],"kind":"const"},{"type":"IfStatement","start":1383,"end":1480,"test":{"type":"MemberExpression","start":1387,"end":1416,"object":{"type":"Identifier","start":1387,"end":1403,"name":"companionOptions"},"property":{"type":"Identifier","start":1404,"end":1416,"name":"cookieDomain"},"computed":false},"consequent":{"type":"BlockStatement","start":1418,"end":1480,"body":[{"type":"ExpressionStatement","start":1424,"end":1476,"expression":{"type":"AssignmentExpression","start":1424,"end":1476,"operator":"=","left":{"type":"MemberExpression","start":1424,"end":1444,"object":{"type":"Identifier","start":1424,"end":1437,"name":"cookieOptions"},"property":{"type":"Identifier","start":1438,"end":1444,"name":"domain"},"computed":false},"right":{"type":"MemberExpression","start":1447,"end":1476,"object":{"type":"Identifier","start":1447,"end":1463,"name":"companionOptions"},"property":{"type":"Identifier","start":1464,"end":1476,"name":"cookieDomain"},"computed":false}}}]},"alternate":null},{"type":"ExpressionStatement","start":1484,"end":1548,"expression":{"type":"CallExpression","start":1484,"end":1548,"callee":{"type":"MemberExpression","start":1484,"end":1499,"object":{"type":"Identifier","start":1484,"end":1487,"name":"res"},"property":{"type":"Identifier","start":1488,"end":1499,"name":"clearCookie"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1500,"end":1532,"expressions":[{"type":"Identifier","start":1518,"end":1530,"name":"providerName"}],"quasis":[{"type":"TemplateElement","start":1501,"end":1516,"value":{"raw":"uppyAuthToken--","cooked":"uppyAuthToken--"},"tail":false},{"type":"TemplateElement","start":1531,"end":1531,"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Identifier","start":1534,"end":1547,"name":"cookieOptions"}]}}]}}}}],"sourceType":"script"}