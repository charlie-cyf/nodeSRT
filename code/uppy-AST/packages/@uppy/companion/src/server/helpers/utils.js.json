{"type":"Program","start":0,"end":4773,"body":[{"type":"VariableDeclaration","start":0,"end":34,"declarations":[{"type":"VariableDeclarator","start":6,"end":34,"id":{"type":"Identifier","start":6,"end":13,"name":"request"},"init":{"type":"CallExpression","start":16,"end":34,"callee":{"type":"Identifier","start":16,"end":23,"name":"require"},"arguments":[{"type":"Literal","start":24,"end":33,"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":35,"end":67,"declarations":[{"type":"VariableDeclarator","start":41,"end":67,"id":{"type":"Identifier","start":41,"end":50,"name":"urlParser"},"init":{"type":"CallExpression","start":53,"end":67,"callee":{"type":"Identifier","start":53,"end":60,"name":"require"},"arguments":[{"type":"Literal","start":61,"end":66,"value":"url","raw":"'url'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":68,"end":100,"declarations":[{"type":"VariableDeclarator","start":74,"end":100,"id":{"type":"Identifier","start":74,"end":80,"name":"crypto"},"init":{"type":"CallExpression","start":83,"end":100,"callee":{"type":"Identifier","start":83,"end":90,"name":"require"},"arguments":[{"type":"Literal","start":91,"end":99,"value":"crypto","raw":"'crypto'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":101,"end":155,"declarations":[{"type":"VariableDeclarator","start":107,"end":155,"id":{"type":"ObjectPattern","start":107,"end":132,"properties":[{"type":"Property","start":109,"end":130,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":109,"end":130,"name":"getProtectedHttpAgent"},"kind":"init","value":{"type":"Identifier","start":109,"end":130,"name":"getProtectedHttpAgent"}}]},"init":{"type":"CallExpression","start":135,"end":155,"callee":{"type":"Identifier","start":135,"end":142,"name":"require"},"arguments":[{"type":"Literal","start":143,"end":154,"value":"./request","raw":"'./request'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":245,"end":379,"expression":{"type":"AssignmentExpression","start":245,"end":379,"operator":"=","left":{"type":"MemberExpression","start":245,"end":261,"object":{"type":"Identifier","start":245,"end":252,"name":"exports"},"property":{"type":"Identifier","start":253,"end":261,"name":"hasMatch"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":264,"end":379,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":265,"end":270,"name":"value"},{"type":"Identifier","start":272,"end":280,"name":"criteria"}],"body":{"type":"BlockStatement","start":285,"end":379,"body":[{"type":"ReturnStatement","start":289,"end":377,"argument":{"type":"CallExpression","start":296,"end":377,"callee":{"type":"MemberExpression","start":296,"end":309,"object":{"type":"Identifier","start":296,"end":304,"name":"criteria"},"property":{"type":"Identifier","start":305,"end":309,"name":"some"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":310,"end":376,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":311,"end":312,"name":"i"}],"body":{"type":"BlockStatement","start":317,"end":376,"body":[{"type":"ReturnStatement","start":323,"end":372,"argument":{"type":"LogicalExpression","start":330,"end":372,"left":{"type":"BinaryExpression","start":330,"end":341,"left":{"type":"Identifier","start":330,"end":335,"name":"value"},"operator":"===","right":{"type":"Identifier","start":340,"end":341,"name":"i"}},"operator":"||","right":{"type":"CallExpression","start":345,"end":372,"callee":{"type":"MemberExpression","start":345,"end":365,"object":{"type":"NewExpression","start":346,"end":359,"callee":{"type":"Identifier","start":350,"end":356,"name":"RegExp"},"arguments":[{"type":"Identifier","start":357,"end":358,"name":"i"}]},"property":{"type":"Identifier","start":361,"end":365,"name":"test"},"computed":false},"arguments":[{"type":"Identifier","start":366,"end":371,"name":"value"}]}}}]}}]}}]}}}},{"type":"ExpressionStatement","start":437,"end":761,"expression":{"type":"AssignmentExpression","start":437,"end":761,"operator":"=","left":{"type":"MemberExpression","start":437,"end":458,"object":{"type":"Identifier","start":437,"end":444,"name":"exports"},"property":{"type":"Identifier","start":445,"end":458,"name":"jsonStringify"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":461,"end":761,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":462,"end":466,"name":"data"}],"body":{"type":"BlockStatement","start":471,"end":761,"body":[{"type":"VariableDeclaration","start":475,"end":491,"declarations":[{"type":"VariableDeclarator","start":481,"end":491,"id":{"type":"Identifier","start":481,"end":486,"name":"cache"},"init":{"type":"ArrayExpression","start":489,"end":491,"elements":[]}}],"kind":"const"},{"type":"ReturnStatement","start":494,"end":759,"argument":{"type":"CallExpression","start":501,"end":759,"callee":{"type":"MemberExpression","start":501,"end":515,"object":{"type":"Identifier","start":501,"end":505,"name":"JSON"},"property":{"type":"Identifier","start":506,"end":515,"name":"stringify"},"computed":false},"arguments":[{"type":"Identifier","start":516,"end":520,"name":"data"},{"type":"ArrowFunctionExpression","start":522,"end":758,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":523,"end":526,"name":"key"},{"type":"Identifier","start":528,"end":533,"name":"value"}],"body":{"type":"BlockStatement","start":538,"end":758,"body":[{"type":"IfStatement","start":544,"end":737,"test":{"type":"LogicalExpression","start":548,"end":591,"left":{"type":"BinaryExpression","start":548,"end":573,"left":{"type":"UnaryExpression","start":548,"end":560,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":555,"end":560,"name":"value"}},"operator":"===","right":{"type":"Literal","start":565,"end":573,"value":"object","raw":"'object'"}},"operator":"&&","right":{"type":"BinaryExpression","start":577,"end":591,"left":{"type":"Identifier","start":577,"end":582,"name":"value"},"operator":"!==","right":{"type":"Literal","start":587,"end":591,"value":null,"raw":"null"}}},"consequent":{"type":"BlockStatement","start":593,"end":737,"body":[{"type":"IfStatement","start":601,"end":707,"test":{"type":"BinaryExpression","start":605,"end":632,"left":{"type":"CallExpression","start":605,"end":625,"callee":{"type":"MemberExpression","start":605,"end":618,"object":{"type":"Identifier","start":605,"end":610,"name":"cache"},"property":{"type":"Identifier","start":611,"end":618,"name":"indexOf"},"computed":false},"arguments":[{"type":"Identifier","start":619,"end":624,"name":"value"}]},"operator":"!==","right":{"type":"UnaryExpression","start":630,"end":632,"operator":"-","prefix":true,"argument":{"type":"Literal","start":631,"end":632,"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":634,"end":707,"body":[{"type":"ReturnStatement","start":693,"end":699,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":714,"end":731,"expression":{"type":"CallExpression","start":714,"end":731,"callee":{"type":"MemberExpression","start":714,"end":724,"object":{"type":"Identifier","start":714,"end":719,"name":"cache"},"property":{"type":"Identifier","start":720,"end":724,"name":"push"},"computed":false},"arguments":[{"type":"Identifier","start":725,"end":730,"name":"value"}]}}]},"alternate":null},{"type":"ReturnStatement","start":742,"end":754,"argument":{"type":"Identifier","start":749,"end":754,"name":"value"}}]}}]}}]}}}},{"type":"ExpressionStatement","start":853,"end":948,"expression":{"type":"AssignmentExpression","start":853,"end":948,"operator":"=","left":{"type":"MemberExpression","start":853,"end":873,"object":{"type":"Identifier","start":853,"end":860,"name":"exports"},"property":{"type":"Identifier","start":861,"end":873,"name":"sanitizeHtml"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":876,"end":948,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":877,"end":881,"name":"text"}],"body":{"type":"BlockStatement","start":886,"end":948,"body":[{"type":"ReturnStatement","start":890,"end":946,"argument":{"type":"ConditionalExpression","start":897,"end":946,"test":{"type":"Identifier","start":897,"end":901,"name":"text"},"consequent":{"type":"CallExpression","start":904,"end":939,"callee":{"type":"MemberExpression","start":904,"end":916,"object":{"type":"Identifier","start":904,"end":908,"name":"text"},"property":{"type":"Identifier","start":909,"end":916,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":917,"end":934,"value":{},"raw":"/<\\/?[^>]+(>|$)/g","regex":{"pattern":"<\\/?[^>]+(>|$)","flags":"g"}},{"type":"Literal","start":936,"end":938,"value":"","raw":"''"}]},"alternate":{"type":"Identifier","start":942,"end":946,"name":"text"}}}]}}}},{"type":"ExpressionStatement","start":1115,"end":1247,"expression":{"type":"AssignmentExpression","start":1115,"end":1247,"operator":"=","left":{"type":"MemberExpression","start":1115,"end":1131,"object":{"type":"Identifier","start":1115,"end":1122,"name":"exports"},"property":{"type":"Identifier","start":1123,"end":1131,"name":"parseURL"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1134,"end":1247,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1135,"end":1138,"name":"url"}],"body":{"type":"BlockStatement","start":1143,"end":1247,"body":[{"type":"ReturnStatement","start":1177,"end":1245,"argument":{"type":"ConditionalExpression","start":1184,"end":1245,"test":{"type":"MemberExpression","start":1184,"end":1197,"object":{"type":"Identifier","start":1184,"end":1193,"name":"urlParser"},"property":{"type":"Identifier","start":1194,"end":1197,"name":"URL"},"computed":false},"consequent":{"type":"NewExpression","start":1200,"end":1222,"callee":{"type":"MemberExpression","start":1204,"end":1217,"object":{"type":"Identifier","start":1204,"end":1213,"name":"urlParser"},"property":{"type":"Identifier","start":1214,"end":1217,"name":"URL"},"computed":false},"arguments":[{"type":"Identifier","start":1218,"end":1221,"name":"url"}]},"alternate":{"type":"CallExpression","start":1225,"end":1245,"callee":{"type":"MemberExpression","start":1225,"end":1240,"object":{"type":"Identifier","start":1225,"end":1234,"name":"urlParser"},"property":{"type":"Identifier","start":1235,"end":1240,"name":"parse"},"computed":false},"arguments":[{"type":"Identifier","start":1241,"end":1244,"name":"url"}]}}}]}}}},{"type":"ExpressionStatement","start":1392,"end":1932,"expression":{"type":"AssignmentExpression","start":1392,"end":1932,"operator":"=","left":{"type":"MemberExpression","start":1392,"end":1410,"object":{"type":"Identifier","start":1392,"end":1399,"name":"exports"},"property":{"type":"Identifier","start":1400,"end":1410,"name":"getURLMeta"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1413,"end":1932,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1414,"end":1417,"name":"url"},{"type":"AssignmentPattern","start":1419,"end":1440,"left":{"type":"Identifier","start":1419,"end":1432,"name":"blockLocalIPs"},"right":{"type":"Literal","start":1435,"end":1440,"value":false,"raw":"false"}}],"body":{"type":"BlockStatement","start":1445,"end":1932,"body":[{"type":"ReturnStatement","start":1449,"end":1930,"argument":{"type":"NewExpression","start":1456,"end":1930,"callee":{"type":"Identifier","start":1460,"end":1467,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":1468,"end":1929,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1469,"end":1476,"name":"resolve"},{"type":"Identifier","start":1478,"end":1484,"name":"reject"}],"body":{"type":"BlockStatement","start":1489,"end":1929,"body":[{"type":"VariableDeclaration","start":1495,"end":1672,"declarations":[{"type":"VariableDeclarator","start":1501,"end":1672,"id":{"type":"Identifier","start":1501,"end":1505,"name":"opts"},"init":{"type":"ObjectExpression","start":1508,"end":1672,"properties":[{"type":"Property","start":1516,"end":1524,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1516,"end":1519,"name":"uri"},"value":{"type":"Identifier","start":1521,"end":1524,"name":"url"},"kind":"init"},{"type":"Property","start":1532,"end":1546,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1532,"end":1538,"name":"method"},"value":{"type":"Literal","start":1540,"end":1546,"value":"HEAD","raw":"'HEAD'"},"kind":"init"},{"type":"Property","start":1554,"end":1578,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1554,"end":1572,"name":"followAllRedirects"},"value":{"type":"Literal","start":1574,"end":1578,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":1586,"end":1666,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1586,"end":1596,"name":"agentClass"},"value":{"type":"CallExpression","start":1598,"end":1666,"callee":{"type":"Identifier","start":1598,"end":1619,"name":"getProtectedHttpAgent"},"arguments":[{"type":"MemberExpression","start":1620,"end":1650,"object":{"type":"CallExpression","start":1620,"end":1641,"callee":{"type":"MemberExpression","start":1620,"end":1636,"object":{"type":"Identifier","start":1620,"end":1627,"name":"exports"},"property":{"type":"Identifier","start":1628,"end":1636,"name":"parseURL"},"computed":false},"arguments":[{"type":"Identifier","start":1637,"end":1640,"name":"url"}]},"property":{"type":"Identifier","start":1642,"end":1650,"name":"protocol"},"computed":false},{"type":"Identifier","start":1652,"end":1665,"name":"blockLocalIPs"}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1678,"end":1925,"expression":{"type":"CallExpression","start":1678,"end":1925,"callee":{"type":"Identifier","start":1678,"end":1685,"name":"request"},"arguments":[{"type":"Identifier","start":1686,"end":1690,"name":"opts"},{"type":"ArrowFunctionExpression","start":1692,"end":1924,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1693,"end":1696,"name":"err"},{"type":"Identifier","start":1698,"end":1706,"name":"response"},{"type":"Identifier","start":1708,"end":1712,"name":"body"}],"body":{"type":"BlockStatement","start":1717,"end":1924,"body":[{"type":"IfStatement","start":1725,"end":1918,"test":{"type":"Identifier","start":1729,"end":1732,"name":"err"},"consequent":{"type":"BlockStatement","start":1734,"end":1763,"body":[{"type":"ExpressionStatement","start":1744,"end":1755,"expression":{"type":"CallExpression","start":1744,"end":1755,"callee":{"type":"Identifier","start":1744,"end":1750,"name":"reject"},"arguments":[{"type":"Identifier","start":1751,"end":1754,"name":"err"}]}}]},"alternate":{"type":"BlockStatement","start":1769,"end":1918,"body":[{"type":"ExpressionStatement","start":1779,"end":1910,"expression":{"type":"CallExpression","start":1779,"end":1910,"callee":{"type":"Identifier","start":1779,"end":1786,"name":"resolve"},"arguments":[{"type":"ObjectExpression","start":1787,"end":1909,"properties":[{"type":"Property","start":1799,"end":1837,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1799,"end":1803,"name":"type"},"value":{"type":"MemberExpression","start":1805,"end":1837,"object":{"type":"MemberExpression","start":1805,"end":1821,"object":{"type":"Identifier","start":1805,"end":1813,"name":"response"},"property":{"type":"Identifier","start":1814,"end":1821,"name":"headers"},"computed":false},"property":{"type":"Literal","start":1822,"end":1836,"value":"content-type","raw":"'content-type'"},"computed":true},"kind":"init"},{"type":"Property","start":1849,"end":1899,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1849,"end":1853,"name":"size"},"value":{"type":"CallExpression","start":1855,"end":1899,"callee":{"type":"Identifier","start":1855,"end":1863,"name":"parseInt"},"arguments":[{"type":"MemberExpression","start":1864,"end":1898,"object":{"type":"MemberExpression","start":1864,"end":1880,"object":{"type":"Identifier","start":1864,"end":1872,"name":"response"},"property":{"type":"Identifier","start":1873,"end":1880,"name":"headers"},"computed":false},"property":{"type":"Literal","start":1881,"end":1897,"value":"content-length","raw":"'content-length'"},"computed":true}]},"kind":"init"}]}]}}]}}]}}]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":2060,"end":2760,"expression":{"type":"AssignmentExpression","start":2060,"end":2760,"operator":"=","left":{"type":"MemberExpression","start":2060,"end":2088,"object":{"type":"MemberExpression","start":2060,"end":2074,"object":{"type":"Identifier","start":2060,"end":2066,"name":"module"},"property":{"type":"Identifier","start":2067,"end":2074,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2075,"end":2088,"name":"getURLBuilder"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2091,"end":2760,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2092,"end":2099,"name":"options"}],"body":{"type":"BlockStatement","start":2104,"end":2760,"body":[{"type":"VariableDeclaration","start":2369,"end":2739,"declarations":[{"type":"VariableDeclarator","start":2375,"end":2739,"id":{"type":"Identifier","start":2375,"end":2383,"name":"buildURL"},"init":{"type":"ArrowFunctionExpression","start":2386,"end":2739,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2387,"end":2391,"name":"path"},{"type":"Identifier","start":2393,"end":2403,"name":"isExternal"},{"type":"Identifier","start":2405,"end":2416,"name":"excludeHost"}],"body":{"type":"BlockStatement","start":2421,"end":2739,"body":[{"type":"VariableDeclaration","start":2427,"end":2441,"declarations":[{"type":"VariableDeclarator","start":2431,"end":2441,"id":{"type":"Identifier","start":2431,"end":2434,"name":"url"},"init":{"type":"Identifier","start":2437,"end":2441,"name":"path"}}],"kind":"let"},{"type":"IfStatement","start":2488,"end":2568,"test":{"type":"Identifier","start":2492,"end":2502,"name":"isExternal"},"consequent":{"type":"BlockStatement","start":2504,"end":2568,"body":[{"type":"ExpressionStatement","start":2512,"end":2562,"expression":{"type":"AssignmentExpression","start":2512,"end":2562,"operator":"=","left":{"type":"Identifier","start":2512,"end":2515,"name":"url"},"right":{"type":"TemplateLiteral","start":2518,"end":2562,"expressions":[{"type":"LogicalExpression","start":2521,"end":2554,"left":{"type":"MemberExpression","start":2521,"end":2548,"object":{"type":"MemberExpression","start":2521,"end":2535,"object":{"type":"Identifier","start":2521,"end":2528,"name":"options"},"property":{"type":"Identifier","start":2529,"end":2535,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2536,"end":2548,"name":"implicitPath"},"computed":false},"operator":"||","right":{"type":"Literal","start":2552,"end":2554,"value":"","raw":"''"}},{"type":"Identifier","start":2557,"end":2560,"name":"url"}],"quasis":[{"type":"TemplateElement","start":2519,"end":2519,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2555,"end":2555,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2561,"end":2561,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"ExpressionStatement","start":2574,"end":2616,"expression":{"type":"AssignmentExpression","start":2574,"end":2616,"operator":"=","left":{"type":"Identifier","start":2574,"end":2577,"name":"url"},"right":{"type":"TemplateLiteral","start":2580,"end":2616,"expressions":[{"type":"LogicalExpression","start":2583,"end":2608,"left":{"type":"MemberExpression","start":2583,"end":2602,"object":{"type":"MemberExpression","start":2583,"end":2597,"object":{"type":"Identifier","start":2583,"end":2590,"name":"options"},"property":{"type":"Identifier","start":2591,"end":2597,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2598,"end":2602,"name":"path"},"computed":false},"operator":"||","right":{"type":"Literal","start":2606,"end":2608,"value":"","raw":"''"}},{"type":"Identifier","start":2611,"end":2614,"name":"url"}],"quasis":[{"type":"TemplateElement","start":2581,"end":2581,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2609,"end":2609,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2615,"end":2615,"value":{"raw":"","cooked":""},"tail":true}]}}},{"type":"IfStatement","start":2622,"end":2719,"test":{"type":"UnaryExpression","start":2626,"end":2638,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2627,"end":2638,"name":"excludeHost"}},"consequent":{"type":"BlockStatement","start":2640,"end":2719,"body":[{"type":"ExpressionStatement","start":2648,"end":2713,"expression":{"type":"AssignmentExpression","start":2648,"end":2713,"operator":"=","left":{"type":"Identifier","start":2648,"end":2651,"name":"url"},"right":{"type":"TemplateLiteral","start":2654,"end":2713,"expressions":[{"type":"MemberExpression","start":2657,"end":2680,"object":{"type":"MemberExpression","start":2657,"end":2671,"object":{"type":"Identifier","start":2657,"end":2664,"name":"options"},"property":{"type":"Identifier","start":2665,"end":2671,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2672,"end":2680,"name":"protocol"},"computed":false},{"type":"MemberExpression","start":2686,"end":2705,"object":{"type":"MemberExpression","start":2686,"end":2700,"object":{"type":"Identifier","start":2686,"end":2693,"name":"options"},"property":{"type":"Identifier","start":2694,"end":2700,"name":"server"},"computed":false},"property":{"type":"Identifier","start":2701,"end":2705,"name":"host"},"computed":false},{"type":"Identifier","start":2708,"end":2711,"name":"url"}],"quasis":[{"type":"TemplateElement","start":2655,"end":2655,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2681,"end":2684,"value":{"raw":"://","cooked":"://"},"tail":false},{"type":"TemplateElement","start":2706,"end":2706,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2712,"end":2712,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"ReturnStatement","start":2725,"end":2735,"argument":{"type":"Identifier","start":2732,"end":2735,"name":"url"}}]}}}],"kind":"const"},{"type":"ReturnStatement","start":2743,"end":2758,"argument":{"type":"Identifier","start":2750,"end":2758,"name":"buildURL"}}]}}}},{"type":"FunctionDeclaration","start":2933,"end":3055,"id":{"type":"Identifier","start":2942,"end":2954,"name":"createSecret"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2956,"end":2962,"name":"secret"}],"body":{"type":"BlockStatement","start":2964,"end":3055,"body":[{"type":"VariableDeclaration","start":2968,"end":3008,"declarations":[{"type":"VariableDeclarator","start":2974,"end":3008,"id":{"type":"Identifier","start":2974,"end":2978,"name":"hash"},"init":{"type":"CallExpression","start":2981,"end":3008,"callee":{"type":"MemberExpression","start":2981,"end":2998,"object":{"type":"Identifier","start":2981,"end":2987,"name":"crypto"},"property":{"type":"Identifier","start":2988,"end":2998,"name":"createHash"},"computed":false},"arguments":[{"type":"Literal","start":2999,"end":3007,"value":"sha256","raw":"'sha256'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3011,"end":3030,"expression":{"type":"CallExpression","start":3011,"end":3030,"callee":{"type":"MemberExpression","start":3011,"end":3022,"object":{"type":"Identifier","start":3011,"end":3015,"name":"hash"},"property":{"type":"Identifier","start":3016,"end":3022,"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":3023,"end":3029,"name":"secret"}]}},{"type":"ReturnStatement","start":3033,"end":3053,"argument":{"type":"CallExpression","start":3040,"end":3053,"callee":{"type":"MemberExpression","start":3040,"end":3051,"object":{"type":"Identifier","start":3040,"end":3044,"name":"hash"},"property":{"type":"Identifier","start":3045,"end":3051,"name":"digest"},"computed":false},"arguments":[]}}]}},{"type":"FunctionDeclaration","start":3135,"end":3191,"id":{"type":"Identifier","start":3144,"end":3152,"name":"createIv"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3156,"end":3191,"body":[{"type":"ReturnStatement","start":3160,"end":3189,"argument":{"type":"CallExpression","start":3167,"end":3189,"callee":{"type":"MemberExpression","start":3167,"end":3185,"object":{"type":"Identifier","start":3167,"end":3173,"name":"crypto"},"property":{"type":"Identifier","start":3174,"end":3185,"name":"randomBytes"},"computed":false},"arguments":[{"type":"Literal","start":3186,"end":3188,"value":16,"raw":"16"}]}}]}},{"type":"FunctionDeclaration","start":3193,"end":3305,"id":{"type":"Identifier","start":3202,"end":3211,"name":"urlEncode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3213,"end":3222,"name":"unencoded"}],"body":{"type":"BlockStatement","start":3224,"end":3305,"body":[{"type":"ReturnStatement","start":3228,"end":3303,"argument":{"type":"CallExpression","start":3235,"end":3303,"callee":{"type":"MemberExpression","start":3235,"end":3292,"object":{"type":"CallExpression","start":3235,"end":3284,"callee":{"type":"MemberExpression","start":3235,"end":3272,"object":{"type":"CallExpression","start":3235,"end":3264,"callee":{"type":"MemberExpression","start":3235,"end":3252,"object":{"type":"Identifier","start":3235,"end":3244,"name":"unencoded"},"property":{"type":"Identifier","start":3245,"end":3252,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3253,"end":3258,"value":{},"raw":"/\\+/g","regex":{"pattern":"\\+","flags":"g"}},{"type":"Literal","start":3260,"end":3263,"value":"-","raw":"'-'"}]},"property":{"type":"Identifier","start":3265,"end":3272,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3273,"end":3278,"value":{},"raw":"/\\//g","regex":{"pattern":"\\/","flags":"g"}},{"type":"Literal","start":3280,"end":3283,"value":"_","raw":"'_'"}]},"property":{"type":"Identifier","start":3285,"end":3292,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3293,"end":3297,"value":{},"raw":"/=/g","regex":{"pattern":"=","flags":"g"}},{"type":"Literal","start":3299,"end":3302,"value":"~","raw":"'~'"}]}}]}},{"type":"FunctionDeclaration","start":3307,"end":3433,"id":{"type":"Identifier","start":3316,"end":3325,"name":"urlDecode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3327,"end":3334,"name":"encoded"}],"body":{"type":"BlockStatement","start":3336,"end":3433,"body":[{"type":"ExpressionStatement","start":3340,"end":3414,"expression":{"type":"AssignmentExpression","start":3340,"end":3414,"operator":"=","left":{"type":"Identifier","start":3340,"end":3347,"name":"encoded"},"right":{"type":"CallExpression","start":3350,"end":3414,"callee":{"type":"MemberExpression","start":3350,"end":3403,"object":{"type":"CallExpression","start":3350,"end":3395,"callee":{"type":"MemberExpression","start":3350,"end":3384,"object":{"type":"CallExpression","start":3350,"end":3376,"callee":{"type":"MemberExpression","start":3350,"end":3365,"object":{"type":"Identifier","start":3350,"end":3357,"name":"encoded"},"property":{"type":"Identifier","start":3358,"end":3365,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3366,"end":3370,"value":{},"raw":"/-/g","regex":{"pattern":"-","flags":"g"}},{"type":"Literal","start":3372,"end":3375,"value":"+","raw":"'+'"}]},"property":{"type":"Identifier","start":3377,"end":3384,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3385,"end":3389,"value":{},"raw":"/_/g","regex":{"pattern":"_","flags":"g"}},{"type":"Literal","start":3391,"end":3394,"value":"/","raw":"'/'"}]},"property":{"type":"Identifier","start":3396,"end":3403,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3404,"end":3408,"value":{},"raw":"/~/g","regex":{"pattern":"~","flags":"g"}},{"type":"Literal","start":3410,"end":3413,"value":"=","raw":"'='"}]}}},{"type":"ReturnStatement","start":3417,"end":3431,"argument":{"type":"Identifier","start":3424,"end":3431,"name":"encoded"}}]}},{"type":"ExpressionStatement","start":3662,"end":4008,"expression":{"type":"AssignmentExpression","start":3662,"end":4008,"operator":"=","left":{"type":"MemberExpression","start":3662,"end":3684,"object":{"type":"MemberExpression","start":3662,"end":3676,"object":{"type":"Identifier","start":3662,"end":3668,"name":"module"},"property":{"type":"Identifier","start":3669,"end":3676,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":3677,"end":3684,"name":"encrypt"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":3687,"end":4008,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3688,"end":3693,"name":"input"},{"type":"Identifier","start":3695,"end":3701,"name":"secret"}],"body":{"type":"BlockStatement","start":3706,"end":4008,"body":[{"type":"VariableDeclaration","start":3710,"end":3731,"declarations":[{"type":"VariableDeclarator","start":3716,"end":3731,"id":{"type":"Identifier","start":3716,"end":3718,"name":"iv"},"init":{"type":"CallExpression","start":3721,"end":3731,"callee":{"type":"Identifier","start":3721,"end":3729,"name":"createIv"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":3734,"end":3806,"declarations":[{"type":"VariableDeclarator","start":3740,"end":3806,"id":{"type":"Identifier","start":3740,"end":3746,"name":"cipher"},"init":{"type":"CallExpression","start":3749,"end":3806,"callee":{"type":"MemberExpression","start":3749,"end":3770,"object":{"type":"Identifier","start":3749,"end":3755,"name":"crypto"},"property":{"type":"Identifier","start":3756,"end":3770,"name":"createCipheriv"},"computed":false},"arguments":[{"type":"Literal","start":3771,"end":3779,"value":"aes256","raw":"'aes256'"},{"type":"CallExpression","start":3781,"end":3801,"callee":{"type":"Identifier","start":3781,"end":3793,"name":"createSecret"},"arguments":[{"type":"Identifier","start":3794,"end":3800,"name":"secret"}]},{"type":"Identifier","start":3803,"end":3805,"name":"iv"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":3809,"end":3863,"declarations":[{"type":"VariableDeclarator","start":3813,"end":3863,"id":{"type":"Identifier","start":3813,"end":3822,"name":"encrypted"},"init":{"type":"CallExpression","start":3825,"end":3863,"callee":{"type":"MemberExpression","start":3825,"end":3838,"object":{"type":"Identifier","start":3825,"end":3831,"name":"cipher"},"property":{"type":"Identifier","start":3832,"end":3838,"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":3839,"end":3844,"name":"input"},{"type":"Literal","start":3846,"end":3852,"value":"utf8","raw":"'utf8'"},{"type":"Literal","start":3854,"end":3862,"value":"base64","raw":"'base64'"}]}}],"kind":"let"},{"type":"ExpressionStatement","start":3866,"end":3901,"expression":{"type":"AssignmentExpression","start":3866,"end":3901,"operator":"+=","left":{"type":"Identifier","start":3866,"end":3875,"name":"encrypted"},"right":{"type":"CallExpression","start":3879,"end":3901,"callee":{"type":"MemberExpression","start":3879,"end":3891,"object":{"type":"Identifier","start":3879,"end":3885,"name":"cipher"},"property":{"type":"Identifier","start":3886,"end":3891,"name":"final"},"computed":false},"arguments":[{"type":"Literal","start":3892,"end":3900,"value":"base64","raw":"'base64'"}]}}},{"type":"ReturnStatement","start":3958,"end":4006,"argument":{"type":"BinaryExpression","start":3965,"end":4006,"left":{"type":"CallExpression","start":3965,"end":3983,"callee":{"type":"MemberExpression","start":3965,"end":3976,"object":{"type":"Identifier","start":3965,"end":3967,"name":"iv"},"property":{"type":"Identifier","start":3968,"end":3976,"name":"toString"},"computed":false},"arguments":[{"type":"Literal","start":3977,"end":3982,"value":"hex","raw":"'hex'"}]},"operator":"+","right":{"type":"CallExpression","start":3986,"end":4006,"callee":{"type":"Identifier","start":3986,"end":3995,"name":"urlEncode"},"arguments":[{"type":"Identifier","start":3996,"end":4005,"name":"encrypted"}]}}}]}}}},{"type":"ExpressionStatement","start":4218,"end":4772,"expression":{"type":"AssignmentExpression","start":4218,"end":4772,"operator":"=","left":{"type":"MemberExpression","start":4218,"end":4240,"object":{"type":"MemberExpression","start":4218,"end":4232,"object":{"type":"Identifier","start":4218,"end":4224,"name":"module"},"property":{"type":"Identifier","start":4225,"end":4232,"name":"exports"},"computed":false},"property":{"type":"Identifier","start":4233,"end":4240,"name":"decrypt"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":4243,"end":4772,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4244,"end":4253,"name":"encrypted"},{"type":"Identifier","start":4255,"end":4261,"name":"secret"}],"body":{"type":"BlockStatement","start":4266,"end":4772,"body":[{"type":"IfStatement","start":4309,"end":4443,"test":{"type":"BinaryExpression","start":4313,"end":4334,"left":{"type":"MemberExpression","start":4313,"end":4329,"object":{"type":"Identifier","start":4313,"end":4322,"name":"encrypted"},"property":{"type":"Identifier","start":4323,"end":4329,"name":"length"},"computed":false},"operator":"<","right":{"type":"Literal","start":4332,"end":4334,"value":32,"raw":"32"}},"consequent":{"type":"BlockStatement","start":4336,"end":4443,"body":[{"type":"ThrowStatement","start":4342,"end":4439,"argument":{"type":"NewExpression","start":4348,"end":4439,"callee":{"type":"Identifier","start":4352,"end":4357,"name":"Error"},"arguments":[{"type":"Literal","start":4358,"end":4438,"value":"Invalid encrypted value. Maybe it was generated with an old Companion version?","raw":"'Invalid encrypted value. Maybe it was generated with an old Companion version?'"}]}}]},"alternate":null},{"type":"VariableDeclaration","start":4447,"end":4500,"declarations":[{"type":"VariableDeclarator","start":4453,"end":4500,"id":{"type":"Identifier","start":4453,"end":4455,"name":"iv"},"init":{"type":"CallExpression","start":4458,"end":4500,"callee":{"type":"MemberExpression","start":4458,"end":4469,"object":{"type":"Identifier","start":4458,"end":4464,"name":"Buffer"},"property":{"type":"Identifier","start":4465,"end":4469,"name":"from"},"computed":false},"arguments":[{"type":"CallExpression","start":4470,"end":4492,"callee":{"type":"MemberExpression","start":4470,"end":4485,"object":{"type":"Identifier","start":4470,"end":4479,"name":"encrypted"},"property":{"type":"Identifier","start":4480,"end":4485,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":4486,"end":4487,"value":0,"raw":"0"},{"type":"Literal","start":4489,"end":4491,"value":32,"raw":"32"}]},{"type":"Literal","start":4494,"end":4499,"value":"hex","raw":"'hex'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4503,"end":4550,"declarations":[{"type":"VariableDeclarator","start":4509,"end":4550,"id":{"type":"Identifier","start":4509,"end":4528,"name":"encryptionWithoutIv"},"init":{"type":"CallExpression","start":4531,"end":4550,"callee":{"type":"MemberExpression","start":4531,"end":4546,"object":{"type":"Identifier","start":4531,"end":4540,"name":"encrypted"},"property":{"type":"Identifier","start":4541,"end":4546,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":4547,"end":4549,"value":32,"raw":"32"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4553,"end":4629,"declarations":[{"type":"VariableDeclarator","start":4559,"end":4629,"id":{"type":"Identifier","start":4559,"end":4567,"name":"decipher"},"init":{"type":"CallExpression","start":4570,"end":4629,"callee":{"type":"MemberExpression","start":4570,"end":4593,"object":{"type":"Identifier","start":4570,"end":4576,"name":"crypto"},"property":{"type":"Identifier","start":4577,"end":4593,"name":"createDecipheriv"},"computed":false},"arguments":[{"type":"Literal","start":4594,"end":4602,"value":"aes256","raw":"'aes256'"},{"type":"CallExpression","start":4604,"end":4624,"callee":{"type":"Identifier","start":4604,"end":4616,"name":"createSecret"},"arguments":[{"type":"Identifier","start":4617,"end":4623,"name":"secret"}]},{"type":"Identifier","start":4626,"end":4628,"name":"iv"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4632,"end":4713,"declarations":[{"type":"VariableDeclarator","start":4636,"end":4713,"id":{"type":"Identifier","start":4636,"end":4645,"name":"decrypted"},"init":{"type":"CallExpression","start":4648,"end":4713,"callee":{"type":"MemberExpression","start":4648,"end":4663,"object":{"type":"Identifier","start":4648,"end":4656,"name":"decipher"},"property":{"type":"Identifier","start":4657,"end":4663,"name":"update"},"computed":false},"arguments":[{"type":"CallExpression","start":4664,"end":4694,"callee":{"type":"Identifier","start":4664,"end":4673,"name":"urlDecode"},"arguments":[{"type":"Identifier","start":4674,"end":4693,"name":"encryptionWithoutIv"}]},{"type":"Literal","start":4696,"end":4704,"value":"base64","raw":"'base64'"},{"type":"Literal","start":4706,"end":4712,"value":"utf8","raw":"'utf8'"}]}}],"kind":"let"},{"type":"ExpressionStatement","start":4716,"end":4751,"expression":{"type":"AssignmentExpression","start":4716,"end":4751,"operator":"+=","left":{"type":"Identifier","start":4716,"end":4725,"name":"decrypted"},"right":{"type":"CallExpression","start":4729,"end":4751,"callee":{"type":"MemberExpression","start":4729,"end":4743,"object":{"type":"Identifier","start":4729,"end":4737,"name":"decipher"},"property":{"type":"Identifier","start":4738,"end":4743,"name":"final"},"computed":false},"arguments":[{"type":"Literal","start":4744,"end":4750,"value":"utf8","raw":"'utf8'"}]}}},{"type":"ReturnStatement","start":4754,"end":4770,"argument":{"type":"Identifier","start":4761,"end":4770,"name":"decrypted"}}]}}}}],"sourceType":"script"}