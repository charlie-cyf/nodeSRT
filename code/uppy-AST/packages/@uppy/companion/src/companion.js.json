{"type":"Program","start":0,"end":11861,"loc":{"start":{"line":1,"column":0},"end":{"line":339,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":24,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":24}},"declarations":[{"type":"VariableDeclarator","start":6,"end":24,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":24}},"id":{"type":"Identifier","start":6,"end":8,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":8}},"name":"fs"},"init":{"type":"CallExpression","start":11,"end":24,"loc":{"start":{"line":1,"column":11},"end":{"line":1,"column":24}},"callee":{"type":"Identifier","start":11,"end":18,"loc":{"start":{"line":1,"column":11},"end":{"line":1,"column":18}},"name":"require"},"arguments":[{"type":"Literal","start":19,"end":23,"loc":{"start":{"line":1,"column":19},"end":{"line":1,"column":23}},"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":25,"end":59,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":34}},"declarations":[{"type":"VariableDeclarator","start":31,"end":59,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":34}},"id":{"type":"Identifier","start":31,"end":38,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":13}},"name":"express"},"init":{"type":"CallExpression","start":41,"end":59,"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":34}},"callee":{"type":"Identifier","start":41,"end":48,"loc":{"start":{"line":2,"column":16},"end":{"line":2,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":49,"end":58,"loc":{"start":{"line":2,"column":24},"end":{"line":2,"column":33}},"value":"express","raw":"'express'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":74,"end":114,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":40}},"declarations":[{"type":"VariableDeclarator","start":80,"end":114,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":40}},"id":{"type":"Identifier","start":80,"end":85,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":11}},"name":"Grant"},"init":{"type":"CallExpression","start":88,"end":114,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":40}},"callee":{"type":"MemberExpression","start":88,"end":112,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":38}},"object":{"type":"CallExpression","start":88,"end":104,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":30}},"callee":{"type":"Identifier","start":88,"end":95,"loc":{"start":{"line":4,"column":14},"end":{"line":4,"column":21}},"name":"require"},"arguments":[{"type":"Literal","start":96,"end":103,"loc":{"start":{"line":4,"column":22},"end":{"line":4,"column":29}},"value":"grant","raw":"'grant'"}]},"property":{"type":"Identifier","start":105,"end":112,"loc":{"start":{"line":4,"column":31},"end":{"line":4,"column":38}},"name":"express"},"computed":false},"arguments":[]}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore","start":60,"end":73,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":13}}}]},{"type":"VariableDeclaration","start":115,"end":162,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":47}},"declarations":[{"type":"VariableDeclarator","start":121,"end":162,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":47}},"id":{"type":"Identifier","start":121,"end":132,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":17}},"name":"grantConfig"},"init":{"type":"CallExpression","start":135,"end":162,"loc":{"start":{"line":5,"column":20},"end":{"line":5,"column":47}},"callee":{"type":"CallExpression","start":135,"end":160,"loc":{"start":{"line":5,"column":20},"end":{"line":5,"column":45}},"callee":{"type":"Identifier","start":135,"end":142,"loc":{"start":{"line":5,"column":20},"end":{"line":5,"column":27}},"name":"require"},"arguments":[{"type":"Literal","start":143,"end":159,"loc":{"start":{"line":5,"column":28},"end":{"line":5,"column":44}},"value":"./config/grant","raw":"'./config/grant'"}]},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":163,"end":215,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":52}},"declarations":[{"type":"VariableDeclarator","start":169,"end":215,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":52}},"id":{"type":"Identifier","start":169,"end":184,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":21}},"name":"providerManager"},"init":{"type":"CallExpression","start":187,"end":215,"loc":{"start":{"line":6,"column":24},"end":{"line":6,"column":52}},"callee":{"type":"Identifier","start":187,"end":194,"loc":{"start":{"line":6,"column":24},"end":{"line":6,"column":31}},"name":"require"},"arguments":[{"type":"Literal","start":195,"end":214,"loc":{"start":{"line":6,"column":32},"end":{"line":6,"column":51}},"value":"./server/provider","raw":"'./server/provider'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":216,"end":267,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":51}},"declarations":[{"type":"VariableDeclarator","start":222,"end":267,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":51}},"id":{"type":"Identifier","start":222,"end":233,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":17}},"name":"controllers"},"init":{"type":"CallExpression","start":236,"end":267,"loc":{"start":{"line":7,"column":20},"end":{"line":7,"column":51}},"callee":{"type":"Identifier","start":236,"end":243,"loc":{"start":{"line":7,"column":20},"end":{"line":7,"column":27}},"name":"require"},"arguments":[{"type":"Literal","start":244,"end":266,"loc":{"start":{"line":7,"column":28},"end":{"line":7,"column":50}},"value":"./server/controllers","raw":"'./server/controllers'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":268,"end":313,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":45}},"declarations":[{"type":"VariableDeclarator","start":274,"end":313,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":45}},"id":{"type":"Identifier","start":274,"end":276,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":8}},"name":"s3"},"init":{"type":"CallExpression","start":279,"end":313,"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":45}},"callee":{"type":"Identifier","start":279,"end":286,"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":18}},"name":"require"},"arguments":[{"type":"Literal","start":287,"end":312,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":44}},"value":"./server/controllers/s3","raw":"'./server/controllers/s3'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":314,"end":361,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":47}},"declarations":[{"type":"VariableDeclarator","start":320,"end":361,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":47}},"id":{"type":"Identifier","start":320,"end":323,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":9}},"name":"url"},"init":{"type":"CallExpression","start":326,"end":361,"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":47}},"callee":{"type":"Identifier","start":326,"end":333,"loc":{"start":{"line":9,"column":12},"end":{"line":9,"column":19}},"name":"require"},"arguments":[{"type":"Literal","start":334,"end":360,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":46}},"value":"./server/controllers/url","raw":"'./server/controllers/url'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":362,"end":403,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":41}},"declarations":[{"type":"VariableDeclarator","start":368,"end":403,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":41}},"id":{"type":"Identifier","start":368,"end":380,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":18}},"name":"SocketServer"},"init":{"type":"MemberExpression","start":383,"end":403,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":41}},"object":{"type":"CallExpression","start":383,"end":396,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":34}},"callee":{"type":"Identifier","start":383,"end":390,"loc":{"start":{"line":10,"column":21},"end":{"line":10,"column":28}},"name":"require"},"arguments":[{"type":"Literal","start":391,"end":395,"loc":{"start":{"line":10,"column":29},"end":{"line":10,"column":33}},"value":"ws","raw":"'ws'"}]},"property":{"type":"Identifier","start":397,"end":403,"loc":{"start":{"line":10,"column":35},"end":{"line":10,"column":41}},"name":"Server"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":404,"end":447,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":43}},"declarations":[{"type":"VariableDeclarator","start":410,"end":447,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":43}},"id":{"type":"Identifier","start":410,"end":417,"loc":{"start":{"line":11,"column":6},"end":{"line":11,"column":13}},"name":"emitter"},"init":{"type":"CallExpression","start":420,"end":447,"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":43}},"callee":{"type":"Identifier","start":420,"end":427,"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":428,"end":446,"loc":{"start":{"line":11,"column":24},"end":{"line":11,"column":42}},"value":"./server/emitter","raw":"'./server/emitter'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":448,"end":485,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":37}},"declarations":[{"type":"VariableDeclarator","start":454,"end":485,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":37}},"id":{"type":"Identifier","start":454,"end":459,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":11}},"name":"merge"},"init":{"type":"CallExpression","start":462,"end":485,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":37}},"callee":{"type":"Identifier","start":462,"end":469,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":21}},"name":"require"},"arguments":[{"type":"Literal","start":470,"end":484,"loc":{"start":{"line":12,"column":22},"end":{"line":12,"column":36}},"value":"lodash.merge","raw":"'lodash.merge'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":486,"end":525,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":39}},"declarations":[{"type":"VariableDeclarator","start":492,"end":525,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":39}},"id":{"type":"Identifier","start":492,"end":497,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":11}},"name":"redis"},"init":{"type":"CallExpression","start":500,"end":525,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":39}},"callee":{"type":"Identifier","start":500,"end":507,"loc":{"start":{"line":13,"column":14},"end":{"line":13,"column":21}},"name":"require"},"arguments":[{"type":"Literal","start":508,"end":524,"loc":{"start":{"line":13,"column":22},"end":{"line":13,"column":38}},"value":"./server/redis","raw":"'./server/redis'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":526,"end":571,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":45}},"declarations":[{"type":"VariableDeclarator","start":532,"end":571,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":45}},"id":{"type":"Identifier","start":532,"end":544,"loc":{"start":{"line":14,"column":6},"end":{"line":14,"column":18}},"name":"cookieParser"},"init":{"type":"CallExpression","start":547,"end":571,"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":45}},"callee":{"type":"Identifier","start":547,"end":554,"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":28}},"name":"require"},"arguments":[{"type":"Literal","start":555,"end":570,"loc":{"start":{"line":14,"column":29},"end":{"line":14,"column":44}},"value":"cookie-parser","raw":"'cookie-parser'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":572,"end":646,"loc":{"start":{"line":15,"column":0},"end":{"line":15,"column":74}},"declarations":[{"type":"VariableDeclarator","start":578,"end":646,"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":74}},"id":{"type":"ObjectPattern","start":578,"end":610,"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":38}},"properties":[{"type":"Property","start":580,"end":593,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":21}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":580,"end":593,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":21}},"name":"jsonStringify"},"kind":"init","value":{"type":"Identifier","start":580,"end":593,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":21}},"name":"jsonStringify"}},{"type":"Property","start":595,"end":608,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":36}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":595,"end":608,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":36}},"name":"getURLBuilder"},"kind":"init","value":{"type":"Identifier","start":595,"end":608,"loc":{"start":{"line":15,"column":23},"end":{"line":15,"column":36}},"name":"getURLBuilder"}}]},"init":{"type":"CallExpression","start":613,"end":646,"loc":{"start":{"line":15,"column":41},"end":{"line":15,"column":74}},"callee":{"type":"Identifier","start":613,"end":620,"loc":{"start":{"line":15,"column":41},"end":{"line":15,"column":48}},"name":"require"},"arguments":[{"type":"Literal","start":621,"end":645,"loc":{"start":{"line":15,"column":49},"end":{"line":15,"column":73}},"value":"./server/helpers/utils","raw":"'./server/helpers/utils'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":647,"end":684,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":37}},"declarations":[{"type":"VariableDeclarator","start":653,"end":684,"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":37}},"id":{"type":"Identifier","start":653,"end":657,"loc":{"start":{"line":16,"column":6},"end":{"line":16,"column":10}},"name":"jobs"},"init":{"type":"CallExpression","start":660,"end":684,"loc":{"start":{"line":16,"column":13},"end":{"line":16,"column":37}},"callee":{"type":"Identifier","start":660,"end":667,"loc":{"start":{"line":16,"column":13},"end":{"line":16,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":668,"end":683,"loc":{"start":{"line":16,"column":21},"end":{"line":16,"column":36}},"value":"./server/jobs","raw":"'./server/jobs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":685,"end":735,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":50}},"declarations":[{"type":"VariableDeclarator","start":691,"end":735,"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":50}},"id":{"type":"Identifier","start":691,"end":702,"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":17}},"name":"interceptor"},"init":{"type":"CallExpression","start":705,"end":735,"loc":{"start":{"line":17,"column":20},"end":{"line":17,"column":50}},"callee":{"type":"Identifier","start":705,"end":712,"loc":{"start":{"line":17,"column":20},"end":{"line":17,"column":27}},"name":"require"},"arguments":[{"type":"Literal","start":713,"end":734,"loc":{"start":{"line":17,"column":28},"end":{"line":17,"column":49}},"value":"express-interceptor","raw":"'express-interceptor'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":736,"end":777,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":41}},"declarations":[{"type":"VariableDeclarator","start":742,"end":777,"loc":{"start":{"line":18,"column":6},"end":{"line":18,"column":41}},"id":{"type":"Identifier","start":742,"end":748,"loc":{"start":{"line":18,"column":6},"end":{"line":18,"column":12}},"name":"logger"},"init":{"type":"CallExpression","start":751,"end":777,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":41}},"callee":{"type":"Identifier","start":751,"end":758,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":759,"end":776,"loc":{"start":{"line":18,"column":23},"end":{"line":18,"column":40}},"value":"./server/logger","raw":"'./server/logger'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":778,"end":833,"loc":{"start":{"line":19,"column":0},"end":{"line":19,"column":55}},"declarations":[{"type":"VariableDeclarator","start":784,"end":833,"loc":{"start":{"line":19,"column":6},"end":{"line":19,"column":55}},"id":{"type":"ObjectPattern","start":784,"end":802,"loc":{"start":{"line":19,"column":6},"end":{"line":19,"column":24}},"properties":[{"type":"Property","start":786,"end":800,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":22}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":786,"end":800,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":22}},"name":"STORAGE_PREFIX"},"kind":"init","value":{"type":"Identifier","start":786,"end":800,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":22}},"name":"STORAGE_PREFIX"}}]},"init":{"type":"CallExpression","start":805,"end":833,"loc":{"start":{"line":19,"column":27},"end":{"line":19,"column":55}},"callee":{"type":"Identifier","start":805,"end":812,"loc":{"start":{"line":19,"column":27},"end":{"line":19,"column":34}},"name":"require"},"arguments":[{"type":"Literal","start":813,"end":832,"loc":{"start":{"line":19,"column":35},"end":{"line":19,"column":54}},"value":"./server/Uploader","raw":"'./server/Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":834,"end":885,"loc":{"start":{"line":20,"column":0},"end":{"line":20,"column":51}},"declarations":[{"type":"VariableDeclarator","start":840,"end":885,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":51}},"id":{"type":"Identifier","start":840,"end":851,"loc":{"start":{"line":20,"column":6},"end":{"line":20,"column":17}},"name":"middlewares"},"init":{"type":"CallExpression","start":854,"end":885,"loc":{"start":{"line":20,"column":20},"end":{"line":20,"column":51}},"callee":{"type":"Identifier","start":854,"end":861,"loc":{"start":{"line":20,"column":20},"end":{"line":20,"column":27}},"name":"require"},"arguments":[{"type":"Literal","start":862,"end":884,"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":50}},"value":"./server/middlewares","raw":"'./server/middlewares'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":886,"end":939,"loc":{"start":{"line":21,"column":0},"end":{"line":21,"column":53}},"declarations":[{"type":"VariableDeclarator","start":892,"end":939,"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":53}},"id":{"type":"ObjectPattern","start":892,"end":908,"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":22}},"properties":[{"type":"Property","start":894,"end":906,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":894,"end":906,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":20}},"name":"shortenToken"},"kind":"init","value":{"type":"Identifier","start":894,"end":906,"loc":{"start":{"line":21,"column":8},"end":{"line":21,"column":20}},"name":"shortenToken"}}]},"init":{"type":"CallExpression","start":911,"end":939,"loc":{"start":{"line":21,"column":25},"end":{"line":21,"column":53}},"callee":{"type":"Identifier","start":911,"end":918,"loc":{"start":{"line":21,"column":25},"end":{"line":21,"column":32}},"name":"require"},"arguments":[{"type":"Literal","start":919,"end":938,"loc":{"start":{"line":21,"column":33},"end":{"line":21,"column":52}},"value":"./server/Uploader","raw":"'./server/Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":940,"end":1022,"loc":{"start":{"line":22,"column":0},"end":{"line":22,"column":82}},"declarations":[{"type":"VariableDeclarator","start":946,"end":1022,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":82}},"id":{"type":"ObjectPattern","start":946,"end":985,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":45}},"properties":[{"type":"Property","start":948,"end":964,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":948,"end":964,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":24}},"name":"ProviderApiError"},"kind":"init","value":{"type":"Identifier","start":948,"end":964,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":24}},"name":"ProviderApiError"}},{"type":"Property","start":966,"end":983,"loc":{"start":{"line":22,"column":26},"end":{"line":22,"column":43}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":966,"end":983,"loc":{"start":{"line":22,"column":26},"end":{"line":22,"column":43}},"name":"ProviderAuthError"},"kind":"init","value":{"type":"Identifier","start":966,"end":983,"loc":{"start":{"line":22,"column":26},"end":{"line":22,"column":43}},"name":"ProviderAuthError"}}]},"init":{"type":"CallExpression","start":988,"end":1022,"loc":{"start":{"line":22,"column":48},"end":{"line":22,"column":82}},"callee":{"type":"Identifier","start":988,"end":995,"loc":{"start":{"line":22,"column":48},"end":{"line":22,"column":55}},"name":"require"},"arguments":[{"type":"Literal","start":996,"end":1021,"loc":{"start":{"line":22,"column":56},"end":{"line":22,"column":81}},"value":"./server/provider/error","raw":"'./server/provider/error'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1023,"end":1047,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":24}},"declarations":[{"type":"VariableDeclarator","start":1029,"end":1047,"loc":{"start":{"line":23,"column":6},"end":{"line":23,"column":24}},"id":{"type":"Identifier","start":1029,"end":1031,"loc":{"start":{"line":23,"column":6},"end":{"line":23,"column":8}},"name":"ms"},"init":{"type":"CallExpression","start":1034,"end":1047,"loc":{"start":{"line":23,"column":11},"end":{"line":23,"column":24}},"callee":{"type":"Identifier","start":1034,"end":1041,"loc":{"start":{"line":23,"column":11},"end":{"line":23,"column":18}},"name":"require"},"arguments":[{"type":"Literal","start":1042,"end":1046,"loc":{"start":{"line":23,"column":19},"end":{"line":23,"column":23}},"value":"ms","raw":"'ms'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1049,"end":1408,"loc":{"start":{"line":25,"column":0},"end":{"line":41,"column":1}},"declarations":[{"type":"VariableDeclarator","start":1055,"end":1408,"loc":{"start":{"line":25,"column":6},"end":{"line":41,"column":1}},"id":{"type":"Identifier","start":1055,"end":1069,"loc":{"start":{"line":25,"column":6},"end":{"line":25,"column":20}},"name":"defaultOptions"},"init":{"type":"ObjectExpression","start":1072,"end":1408,"loc":{"start":{"line":25,"column":23},"end":{"line":41,"column":1}},"properties":[{"type":"Property","start":1076,"end":1124,"loc":{"start":{"line":26,"column":2},"end":{"line":29,"column":3}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1076,"end":1082,"loc":{"start":{"line":26,"column":2},"end":{"line":26,"column":8}},"name":"server"},"value":{"type":"ObjectExpression","start":1084,"end":1124,"loc":{"start":{"line":26,"column":10},"end":{"line":29,"column":3}},"properties":[{"type":"Property","start":1090,"end":1106,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1090,"end":1098,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":12}},"name":"protocol"},"value":{"type":"Literal","start":1100,"end":1106,"loc":{"start":{"line":27,"column":14},"end":{"line":27,"column":20}},"value":"http","raw":"'http'"},"kind":"init"},{"type":"Property","start":1112,"end":1120,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":12}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1112,"end":1116,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":8}},"name":"path"},"value":{"type":"Literal","start":1118,"end":1120,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":12}},"value":"","raw":"''"},"kind":"init"}]},"kind":"init"},{"type":"Property","start":1128,"end":1391,"loc":{"start":{"line":30,"column":2},"end":{"line":39,"column":3}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1128,"end":1143,"loc":{"start":{"line":30,"column":2},"end":{"line":30,"column":17}},"name":"providerOptions"},"value":{"type":"ObjectExpression","start":1145,"end":1391,"loc":{"start":{"line":30,"column":19},"end":{"line":39,"column":3}},"properties":[{"type":"Property","start":1151,"end":1387,"loc":{"start":{"line":31,"column":4},"end":{"line":38,"column":5}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1151,"end":1153,"loc":{"start":{"line":31,"column":4},"end":{"line":31,"column":6}},"name":"s3"},"value":{"type":"ObjectExpression","start":1155,"end":1387,"loc":{"start":{"line":31,"column":8},"end":{"line":38,"column":5}},"properties":[{"type":"Property","start":1163,"end":1181,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1163,"end":1166,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":9}},"name":"acl"},"value":{"type":"Literal","start":1168,"end":1181,"loc":{"start":{"line":32,"column":11},"end":{"line":32,"column":24}},"value":"public-read","raw":"'public-read'"},"kind":"init"},{"type":"Property","start":1189,"end":1241,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":58}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1189,"end":1197,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":14}},"name":"endpoint"},"value":{"type":"Literal","start":1199,"end":1241,"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":58}},"value":"https://{service}.{region}.amazonaws.com","raw":"'https://{service}.{region}.amazonaws.com'"},"kind":"init"},{"type":"Property","start":1249,"end":1263,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1249,"end":1259,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":16}},"name":"conditions"},"value":{"type":"ArrayExpression","start":1261,"end":1263,"loc":{"start":{"line":34,"column":18},"end":{"line":34,"column":20}},"elements":[]},"kind":"init"},{"type":"Property","start":1271,"end":1299,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":34}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1271,"end":1292,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":27}},"name":"useAccelerateEndpoint"},"value":{"type":"Literal","start":1294,"end":1299,"loc":{"start":{"line":35,"column":29},"end":{"line":35,"column":34}},"value":false,"raw":"false"},"kind":"init"},{"type":"Property","start":1307,"end":1342,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":41}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1307,"end":1313,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":12}},"name":"getKey"},"value":{"type":"ArrowFunctionExpression","start":1315,"end":1342,"loc":{"start":{"line":36,"column":14},"end":{"line":36,"column":41}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1316,"end":1319,"loc":{"start":{"line":36,"column":15},"end":{"line":36,"column":18}},"name":"req"},{"type":"Identifier","start":1321,"end":1329,"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":28}},"name":"filename"}],"body":{"type":"Identifier","start":1334,"end":1342,"loc":{"start":{"line":36,"column":33},"end":{"line":36,"column":41}},"name":"filename"}},"kind":"init"},{"type":"Property","start":1350,"end":1381,"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":37}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1350,"end":1357,"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":13}},"name":"expires"},"value":{"type":"BinaryExpression","start":1359,"end":1381,"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":37}},"left":{"type":"CallExpression","start":1359,"end":1374,"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":30}},"callee":{"type":"Identifier","start":1359,"end":1361,"loc":{"start":{"line":37,"column":15},"end":{"line":37,"column":17}},"name":"ms"},"arguments":[{"type":"Literal","start":1362,"end":1373,"loc":{"start":{"line":37,"column":18},"end":{"line":37,"column":29}},"value":"5 minutes","raw":"'5 minutes'"}]},"operator":"/","right":{"type":"Literal","start":1377,"end":1381,"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":37}},"value":1000,"raw":"1000"}},"kind":"init"}]},"kind":"init"}]},"kind":"init"},{"type":"Property","start":1395,"end":1406,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":13}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1395,"end":1400,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":7}},"name":"debug"},"value":{"type":"Literal","start":1402,"end":1406,"loc":{"start":{"line":40,"column":9},"end":{"line":40,"column":13}},"value":true,"raw":"true"},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1469,"end":1532,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":63}},"expression":{"type":"AssignmentExpression","start":1469,"end":1532,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":63}},"operator":"=","left":{"type":"MemberExpression","start":1469,"end":1490,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":21}},"object":{"type":"MemberExpression","start":1469,"end":1483,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":14}},"object":{"type":"Identifier","start":1469,"end":1475,"loc":{"start":{"line":44,"column":0},"end":{"line":44,"column":6}},"name":"module"},"property":{"type":"Identifier","start":1476,"end":1483,"loc":{"start":{"line":44,"column":7},"end":{"line":44,"column":14}},"name":"exports"},"computed":false},"property":{"type":"Identifier","start":1484,"end":1490,"loc":{"start":{"line":44,"column":15},"end":{"line":44,"column":21}},"name":"errors"},"computed":false},"right":{"type":"ObjectExpression","start":1493,"end":1532,"loc":{"start":{"line":44,"column":24},"end":{"line":44,"column":63}},"properties":[{"type":"Property","start":1495,"end":1511,"loc":{"start":{"line":44,"column":26},"end":{"line":44,"column":42}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1495,"end":1511,"loc":{"start":{"line":44,"column":26},"end":{"line":44,"column":42}},"name":"ProviderApiError"},"kind":"init","value":{"type":"Identifier","start":1495,"end":1511,"loc":{"start":{"line":44,"column":26},"end":{"line":44,"column":42}},"name":"ProviderApiError"}},{"type":"Property","start":1513,"end":1530,"loc":{"start":{"line":44,"column":44},"end":{"line":44,"column":61}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1513,"end":1530,"loc":{"start":{"line":44,"column":44},"end":{"line":44,"column":61}},"name":"ProviderAuthError"},"kind":"init","value":{"type":"Identifier","start":1513,"end":1530,"loc":{"start":{"line":44,"column":44},"end":{"line":44,"column":61}},"name":"ProviderAuthError"}}]}},"comments":[{"type":"Line","value":" make the errors available publicly for custom providers","start":1410,"end":1468,"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":58}}}]},{"type":"ExpressionStatement","start":1624,"end":4712,"loc":{"start":{"line":51,"column":0},"end":{"line":131,"column":1}},"expression":{"type":"AssignmentExpression","start":1624,"end":4712,"loc":{"start":{"line":51,"column":0},"end":{"line":131,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":1624,"end":1642,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":18}},"object":{"type":"MemberExpression","start":1624,"end":1638,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":14}},"object":{"type":"Identifier","start":1624,"end":1630,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":6}},"name":"module"},"property":{"type":"Identifier","start":1631,"end":1638,"loc":{"start":{"line":51,"column":7},"end":{"line":51,"column":14}},"name":"exports"},"computed":false},"property":{"type":"Identifier","start":1639,"end":1642,"loc":{"start":{"line":51,"column":15},"end":{"line":51,"column":18}},"name":"app"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1645,"end":4712,"loc":{"start":{"line":51,"column":21},"end":{"line":131,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"AssignmentPattern","start":1646,"end":1658,"loc":{"start":{"line":51,"column":22},"end":{"line":51,"column":34}},"left":{"type":"Identifier","start":1646,"end":1653,"loc":{"start":{"line":51,"column":22},"end":{"line":51,"column":29}},"name":"options"},"right":{"type":"ObjectExpression","start":1656,"end":1658,"loc":{"start":{"line":51,"column":32},"end":{"line":51,"column":34}},"properties":[]}}],"body":{"type":"BlockStatement","start":1663,"end":4712,"loc":{"start":{"line":51,"column":39},"end":{"line":131,"column":1}},"body":[{"type":"ExpressionStatement","start":1667,"end":1690,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":25}},"expression":{"type":"CallExpression","start":1667,"end":1690,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":25}},"callee":{"type":"Identifier","start":1667,"end":1681,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":16}},"name":"validateConfig"},"arguments":[{"type":"Identifier","start":1682,"end":1689,"loc":{"start":{"line":52,"column":17},"end":{"line":52,"column":24}},"name":"options"}]}},{"type":"ExpressionStatement","start":1694,"end":1738,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":46}},"expression":{"type":"AssignmentExpression","start":1694,"end":1738,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":46}},"operator":"=","left":{"type":"Identifier","start":1694,"end":1701,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":9}},"name":"options"},"right":{"type":"CallExpression","start":1704,"end":1738,"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":46}},"callee":{"type":"Identifier","start":1704,"end":1709,"loc":{"start":{"line":54,"column":12},"end":{"line":54,"column":17}},"name":"merge"},"arguments":[{"type":"ObjectExpression","start":1710,"end":1712,"loc":{"start":{"line":54,"column":18},"end":{"line":54,"column":20}},"properties":[]},{"type":"Identifier","start":1714,"end":1728,"loc":{"start":{"line":54,"column":22},"end":{"line":54,"column":36}},"name":"defaultOptions"},{"type":"Identifier","start":1730,"end":1737,"loc":{"start":{"line":54,"column":38},"end":{"line":54,"column":45}},"name":"options"}]}}},{"type":"VariableDeclaration","start":1741,"end":1803,"loc":{"start":{"line":55,"column":2},"end":{"line":55,"column":64}},"declarations":[{"type":"VariableDeclarator","start":1747,"end":1803,"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":64}},"id":{"type":"Identifier","start":1747,"end":1756,"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":17}},"name":"providers"},"init":{"type":"CallExpression","start":1759,"end":1803,"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":64}},"callee":{"type":"MemberExpression","start":1759,"end":1794,"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":55}},"object":{"type":"Identifier","start":1759,"end":1774,"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":35}},"name":"providerManager"},"property":{"type":"Identifier","start":1775,"end":1794,"loc":{"start":{"line":55,"column":36},"end":{"line":55,"column":55}},"name":"getDefaultProviders"},"computed":false},"arguments":[{"type":"Identifier","start":1795,"end":1802,"loc":{"start":{"line":55,"column":56},"end":{"line":55,"column":63}},"name":"options"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1806,"end":1862,"loc":{"start":{"line":56,"column":2},"end":{"line":56,"column":58}},"expression":{"type":"CallExpression","start":1806,"end":1862,"loc":{"start":{"line":56,"column":2},"end":{"line":56,"column":58}},"callee":{"type":"MemberExpression","start":1806,"end":1840,"loc":{"start":{"line":56,"column":2},"end":{"line":56,"column":36}},"object":{"type":"Identifier","start":1806,"end":1821,"loc":{"start":{"line":56,"column":2},"end":{"line":56,"column":17}},"name":"providerManager"},"property":{"type":"Identifier","start":1822,"end":1840,"loc":{"start":{"line":56,"column":18},"end":{"line":56,"column":36}},"name":"addProviderOptions"},"computed":false},"arguments":[{"type":"Identifier","start":1841,"end":1848,"loc":{"start":{"line":56,"column":37},"end":{"line":56,"column":44}},"name":"options"},{"type":"Identifier","start":1850,"end":1861,"loc":{"start":{"line":56,"column":46},"end":{"line":56,"column":57}},"name":"grantConfig"}]}},{"type":"VariableDeclaration","start":1866,"end":1913,"loc":{"start":{"line":58,"column":2},"end":{"line":58,"column":49}},"declarations":[{"type":"VariableDeclarator","start":1872,"end":1913,"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":49}},"id":{"type":"Identifier","start":1872,"end":1887,"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":23}},"name":"customProviders"},"init":{"type":"MemberExpression","start":1890,"end":1913,"loc":{"start":{"line":58,"column":26},"end":{"line":58,"column":49}},"object":{"type":"Identifier","start":1890,"end":1897,"loc":{"start":{"line":58,"column":26},"end":{"line":58,"column":33}},"name":"options"},"property":{"type":"Identifier","start":1898,"end":1913,"loc":{"start":{"line":58,"column":34},"end":{"line":58,"column":49}},"name":"customProviders"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1916,"end":2022,"loc":{"start":{"line":59,"column":2},"end":{"line":61,"column":3}},"test":{"type":"Identifier","start":1920,"end":1935,"loc":{"start":{"line":59,"column":6},"end":{"line":59,"column":21}},"name":"customProviders"},"consequent":{"type":"BlockStatement","start":1937,"end":2022,"loc":{"start":{"line":59,"column":23},"end":{"line":61,"column":3}},"body":[{"type":"ExpressionStatement","start":1943,"end":2018,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":79}},"expression":{"type":"CallExpression","start":1943,"end":2018,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":79}},"callee":{"type":"MemberExpression","start":1943,"end":1977,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":38}},"object":{"type":"Identifier","start":1943,"end":1958,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":19}},"name":"providerManager"},"property":{"type":"Identifier","start":1959,"end":1977,"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":38}},"name":"addCustomProviders"},"computed":false},"arguments":[{"type":"Identifier","start":1978,"end":1993,"loc":{"start":{"line":60,"column":39},"end":{"line":60,"column":54}},"name":"customProviders"},{"type":"Identifier","start":1995,"end":2004,"loc":{"start":{"line":60,"column":56},"end":{"line":60,"column":65}},"name":"providers"},{"type":"Identifier","start":2006,"end":2017,"loc":{"start":{"line":60,"column":67},"end":{"line":60,"column":78}},"name":"grantConfig"}]}}]},"alternate":null},{"type":"ExpressionStatement","start":2071,"end":2090,"loc":{"start":{"line":64,"column":2},"end":{"line":64,"column":21}},"expression":{"type":"CallExpression","start":2071,"end":2090,"loc":{"start":{"line":64,"column":2},"end":{"line":64,"column":21}},"callee":{"type":"Identifier","start":2071,"end":2081,"loc":{"start":{"line":64,"column":2},"end":{"line":64,"column":12}},"name":"maskLogger"},"arguments":[{"type":"Identifier","start":2082,"end":2089,"loc":{"start":{"line":64,"column":13},"end":{"line":64,"column":20}},"name":"options"}]},"comments":[{"type":"Line","value":" mask provider secrets from log messages","start":2026,"end":2068,"loc":{"start":{"line":63,"column":2},"end":{"line":63,"column":44}}}]},{"type":"IfStatement","start":2129,"end":2235,"loc":{"start":{"line":67,"column":2},"end":{"line":69,"column":3}},"test":{"type":"MemberExpression","start":2133,"end":2149,"loc":{"start":{"line":67,"column":6},"end":{"line":67,"column":22}},"object":{"type":"Identifier","start":2133,"end":2140,"loc":{"start":{"line":67,"column":6},"end":{"line":67,"column":13}},"name":"options"},"property":{"type":"Identifier","start":2141,"end":2149,"loc":{"start":{"line":67,"column":14},"end":{"line":67,"column":22}},"name":"redisUrl"},"computed":false},"consequent":{"type":"BlockStatement","start":2151,"end":2235,"loc":{"start":{"line":67,"column":24},"end":{"line":69,"column":3}},"body":[{"type":"ExpressionStatement","start":2157,"end":2231,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":78}},"expression":{"type":"CallExpression","start":2157,"end":2231,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":78}},"callee":{"type":"MemberExpression","start":2157,"end":2169,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":16}},"object":{"type":"Identifier","start":2157,"end":2162,"loc":{"start":{"line":68,"column":4},"end":{"line":68,"column":9}},"name":"redis"},"property":{"type":"Identifier","start":2163,"end":2169,"loc":{"start":{"line":68,"column":10},"end":{"line":68,"column":16}},"name":"client"},"computed":false},"arguments":[{"type":"CallExpression","start":2170,"end":2230,"loc":{"start":{"line":68,"column":17},"end":{"line":68,"column":77}},"callee":{"type":"Identifier","start":2170,"end":2175,"loc":{"start":{"line":68,"column":17},"end":{"line":68,"column":22}},"name":"merge"},"arguments":[{"type":"ObjectExpression","start":2176,"end":2201,"loc":{"start":{"line":68,"column":23},"end":{"line":68,"column":48}},"properties":[{"type":"Property","start":2178,"end":2199,"loc":{"start":{"line":68,"column":25},"end":{"line":68,"column":46}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2178,"end":2181,"loc":{"start":{"line":68,"column":25},"end":{"line":68,"column":28}},"name":"url"},"value":{"type":"MemberExpression","start":2183,"end":2199,"loc":{"start":{"line":68,"column":30},"end":{"line":68,"column":46}},"object":{"type":"Identifier","start":2183,"end":2190,"loc":{"start":{"line":68,"column":30},"end":{"line":68,"column":37}},"name":"options"},"property":{"type":"Identifier","start":2191,"end":2199,"loc":{"start":{"line":68,"column":38},"end":{"line":68,"column":46}},"name":"redisUrl"},"computed":false},"kind":"init"}]},{"type":"LogicalExpression","start":2203,"end":2229,"loc":{"start":{"line":68,"column":50},"end":{"line":68,"column":76}},"left":{"type":"MemberExpression","start":2203,"end":2223,"loc":{"start":{"line":68,"column":50},"end":{"line":68,"column":70}},"object":{"type":"Identifier","start":2203,"end":2210,"loc":{"start":{"line":68,"column":50},"end":{"line":68,"column":57}},"name":"options"},"property":{"type":"Identifier","start":2211,"end":2223,"loc":{"start":{"line":68,"column":58},"end":{"line":68,"column":70}},"name":"redisOptions"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":2227,"end":2229,"loc":{"start":{"line":68,"column":74},"end":{"line":68,"column":76}},"properties":[]}}]}]}}]},"alternate":null,"comments":[{"type":"Line","value":" create singleton redis client","start":2094,"end":2126,"loc":{"start":{"line":66,"column":2},"end":{"line":66,"column":34}}}]},{"type":"ExpressionStatement","start":2238,"end":2292,"loc":{"start":{"line":70,"column":2},"end":{"line":70,"column":56}},"expression":{"type":"CallExpression","start":2238,"end":2292,"loc":{"start":{"line":70,"column":2},"end":{"line":70,"column":56}},"callee":{"type":"Identifier","start":2238,"end":2245,"loc":{"start":{"line":70,"column":2},"end":{"line":70,"column":9}},"name":"emitter"},"arguments":[{"type":"LogicalExpression","start":2246,"end":2291,"loc":{"start":{"line":70,"column":10},"end":{"line":70,"column":55}},"left":{"type":"MemberExpression","start":2246,"end":2271,"loc":{"start":{"line":70,"column":10},"end":{"line":70,"column":35}},"object":{"type":"Identifier","start":2246,"end":2253,"loc":{"start":{"line":70,"column":10},"end":{"line":70,"column":17}},"name":"options"},"property":{"type":"Identifier","start":2254,"end":2271,"loc":{"start":{"line":70,"column":18},"end":{"line":70,"column":35}},"name":"multipleInstances"},"computed":false},"operator":"&&","right":{"type":"MemberExpression","start":2275,"end":2291,"loc":{"start":{"line":70,"column":39},"end":{"line":70,"column":55}},"object":{"type":"Identifier","start":2275,"end":2282,"loc":{"start":{"line":70,"column":39},"end":{"line":70,"column":46}},"name":"options"},"property":{"type":"Identifier","start":2283,"end":2291,"loc":{"start":{"line":70,"column":47},"end":{"line":70,"column":55}},"name":"redisUrl"},"computed":false}}]}},{"type":"VariableDeclaration","start":2296,"end":2317,"loc":{"start":{"line":72,"column":2},"end":{"line":72,"column":23}},"declarations":[{"type":"VariableDeclarator","start":2302,"end":2317,"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":23}},"id":{"type":"Identifier","start":2302,"end":2305,"loc":{"start":{"line":72,"column":8},"end":{"line":72,"column":11}},"name":"app"},"init":{"type":"CallExpression","start":2308,"end":2317,"loc":{"start":{"line":72,"column":14},"end":{"line":72,"column":23}},"callee":{"type":"Identifier","start":2308,"end":2315,"loc":{"start":{"line":72,"column":14},"end":{"line":72,"column":21}},"name":"express"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":2320,"end":2343,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":25}},"expression":{"type":"CallExpression","start":2320,"end":2343,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":25}},"callee":{"type":"MemberExpression","start":2320,"end":2327,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":9}},"object":{"type":"Identifier","start":2320,"end":2323,"loc":{"start":{"line":73,"column":2},"end":{"line":73,"column":5}},"name":"app"},"property":{"type":"Identifier","start":2324,"end":2327,"loc":{"start":{"line":73,"column":6},"end":{"line":73,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":2328,"end":2342,"loc":{"start":{"line":73,"column":10},"end":{"line":73,"column":24}},"callee":{"type":"Identifier","start":2328,"end":2340,"loc":{"start":{"line":73,"column":10},"end":{"line":73,"column":22}},"name":"cookieParser"},"arguments":[]}]},"comments":[{"type":"Line","value":" server tokens are added to cookies","start":2344,"end":2381,"loc":{"start":{"line":73,"column":26},"end":{"line":73,"column":63}}}]},{"type":"ExpressionStatement","start":2385,"end":2421,"loc":{"start":{"line":75,"column":2},"end":{"line":75,"column":38}},"expression":{"type":"CallExpression","start":2385,"end":2421,"loc":{"start":{"line":75,"column":2},"end":{"line":75,"column":38}},"callee":{"type":"MemberExpression","start":2385,"end":2392,"loc":{"start":{"line":75,"column":2},"end":{"line":75,"column":9}},"object":{"type":"Identifier","start":2385,"end":2388,"loc":{"start":{"line":75,"column":2},"end":{"line":75,"column":5}},"name":"app"},"property":{"type":"Identifier","start":2389,"end":2392,"loc":{"start":{"line":75,"column":6},"end":{"line":75,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"Identifier","start":2393,"end":2420,"loc":{"start":{"line":75,"column":10},"end":{"line":75,"column":37}},"name":"interceptGrantErrorResponse"}]}},{"type":"ExpressionStatement","start":2424,"end":2451,"loc":{"start":{"line":76,"column":2},"end":{"line":76,"column":29}},"expression":{"type":"CallExpression","start":2424,"end":2451,"loc":{"start":{"line":76,"column":2},"end":{"line":76,"column":29}},"callee":{"type":"MemberExpression","start":2424,"end":2431,"loc":{"start":{"line":76,"column":2},"end":{"line":76,"column":9}},"object":{"type":"Identifier","start":2424,"end":2427,"loc":{"start":{"line":76,"column":2},"end":{"line":76,"column":5}},"name":"app"},"property":{"type":"Identifier","start":2428,"end":2431,"loc":{"start":{"line":76,"column":6},"end":{"line":76,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":2432,"end":2450,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":28}},"callee":{"type":"Identifier","start":2432,"end":2437,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":15}},"name":"Grant"},"arguments":[{"type":"Identifier","start":2438,"end":2449,"loc":{"start":{"line":76,"column":16},"end":{"line":76,"column":27}},"name":"grantConfig"}]}]}},{"type":"ExpressionStatement","start":2454,"end":3415,"loc":{"start":{"line":77,"column":2},"end":{"line":108,"column":4}},"expression":{"type":"CallExpression","start":2454,"end":3415,"loc":{"start":{"line":77,"column":2},"end":{"line":108,"column":4}},"callee":{"type":"MemberExpression","start":2454,"end":2461,"loc":{"start":{"line":77,"column":2},"end":{"line":77,"column":9}},"object":{"type":"Identifier","start":2454,"end":2457,"loc":{"start":{"line":77,"column":2},"end":{"line":77,"column":5}},"name":"app"},"property":{"type":"Identifier","start":2458,"end":2461,"loc":{"start":{"line":77,"column":6},"end":{"line":77,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2462,"end":3414,"loc":{"start":{"line":77,"column":10},"end":{"line":108,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2463,"end":2466,"loc":{"start":{"line":77,"column":11},"end":{"line":77,"column":14}},"name":"req"},{"type":"Identifier","start":2468,"end":2471,"loc":{"start":{"line":77,"column":16},"end":{"line":77,"column":19}},"name":"res"},{"type":"Identifier","start":2473,"end":2477,"loc":{"start":{"line":77,"column":21},"end":{"line":77,"column":25}},"name":"next"}],"body":{"type":"BlockStatement","start":2482,"end":3414,"loc":{"start":{"line":77,"column":30},"end":{"line":108,"column":3}},"body":[{"type":"ExpressionStatement","start":2488,"end":2560,"loc":{"start":{"line":78,"column":4},"end":{"line":78,"column":76}},"expression":{"type":"CallExpression","start":2488,"end":2560,"loc":{"start":{"line":78,"column":4},"end":{"line":78,"column":76}},"callee":{"type":"MemberExpression","start":2488,"end":2498,"loc":{"start":{"line":78,"column":4},"end":{"line":78,"column":14}},"object":{"type":"Identifier","start":2488,"end":2491,"loc":{"start":{"line":78,"column":4},"end":{"line":78,"column":7}},"name":"res"},"property":{"type":"Identifier","start":2492,"end":2498,"loc":{"start":{"line":78,"column":8},"end":{"line":78,"column":14}},"name":"header"},"computed":false},"arguments":[{"type":"Literal","start":2499,"end":2529,"loc":{"start":{"line":78,"column":15},"end":{"line":78,"column":45}},"value":"Access-Control-Allow-Methods","raw":"'Access-Control-Allow-Methods'"},{"type":"Literal","start":2531,"end":2559,"loc":{"start":{"line":78,"column":47},"end":{"line":78,"column":75}},"value":"GET, POST, OPTIONS, DELETE","raw":"'GET, POST, OPTIONS, DELETE'"}]}},{"type":"ExpressionStatement","start":2565,"end":2746,"loc":{"start":{"line":79,"column":4},"end":{"line":86,"column":5}},"expression":{"type":"CallExpression","start":2565,"end":2746,"loc":{"start":{"line":79,"column":4},"end":{"line":86,"column":5}},"callee":{"type":"MemberExpression","start":2565,"end":2575,"loc":{"start":{"line":79,"column":4},"end":{"line":79,"column":14}},"object":{"type":"Identifier","start":2565,"end":2568,"loc":{"start":{"line":79,"column":4},"end":{"line":79,"column":7}},"name":"res"},"property":{"type":"Identifier","start":2569,"end":2575,"loc":{"start":{"line":79,"column":8},"end":{"line":79,"column":14}},"name":"header"},"computed":false},"arguments":[{"type":"Literal","start":2583,"end":2613,"loc":{"start":{"line":80,"column":6},"end":{"line":80,"column":36}},"value":"Access-Control-Allow-Headers","raw":"'Access-Control-Allow-Headers'"},{"type":"CallExpression","start":2621,"end":2740,"loc":{"start":{"line":81,"column":6},"end":{"line":85,"column":17}},"callee":{"type":"MemberExpression","start":2621,"end":2735,"loc":{"start":{"line":81,"column":6},"end":{"line":85,"column":12}},"object":{"type":"ArrayExpression","start":2621,"end":2730,"loc":{"start":{"line":81,"column":6},"end":{"line":85,"column":7}},"elements":[{"type":"Literal","start":2631,"end":2648,"loc":{"start":{"line":82,"column":8},"end":{"line":82,"column":25}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Literal","start":2658,"end":2673,"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":23}},"value":"uppy-versions","raw":"'uppy-versions'"},{"type":"CallExpression","start":2683,"end":2722,"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":47}},"callee":{"type":"MemberExpression","start":2683,"end":2690,"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":15}},"object":{"type":"Identifier","start":2683,"end":2686,"loc":{"start":{"line":84,"column":8},"end":{"line":84,"column":11}},"name":"res"},"property":{"type":"Identifier","start":2687,"end":2690,"loc":{"start":{"line":84,"column":12},"end":{"line":84,"column":15}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":2691,"end":2721,"loc":{"start":{"line":84,"column":16},"end":{"line":84,"column":46}},"value":"Access-Control-Allow-Headers","raw":"'Access-Control-Allow-Headers'"}]}]},"property":{"type":"Identifier","start":2731,"end":2735,"loc":{"start":{"line":85,"column":8},"end":{"line":85,"column":12}},"name":"join"},"computed":false},"arguments":[{"type":"Literal","start":2736,"end":2739,"loc":{"start":{"line":85,"column":13},"end":{"line":85,"column":16}},"value":",","raw":"','"}]}]}},{"type":"VariableDeclaration","start":2752,"end":2888,"loc":{"start":{"line":88,"column":4},"end":{"line":91,"column":5}},"declarations":[{"type":"VariableDeclarator","start":2758,"end":2888,"loc":{"start":{"line":88,"column":10},"end":{"line":91,"column":5}},"id":{"type":"Identifier","start":2758,"end":2772,"loc":{"start":{"line":88,"column":10},"end":{"line":88,"column":24}},"name":"exposedHeaders"},"init":{"type":"ArrayExpression","start":2775,"end":2888,"loc":{"start":{"line":88,"column":27},"end":{"line":91,"column":5}},"elements":[{"type":"Literal","start":2852,"end":2882,"loc":{"start":{"line":90,"column":6},"end":{"line":90,"column":36}},"value":"Access-Control-Allow-Headers","raw":"'Access-Control-Allow-Headers'","comments":[{"type":"Line","value":" exposed so it can be accessed for our custom uppy preflight","start":2783,"end":2845,"loc":{"start":{"line":89,"column":6},"end":{"line":89,"column":68}}}]}]}}],"kind":"const"},{"type":"IfStatement","start":2894,"end":3118,"loc":{"start":{"line":93,"column":4},"end":{"line":99,"column":5}},"test":{"type":"MemberExpression","start":2898,"end":2922,"loc":{"start":{"line":93,"column":8},"end":{"line":93,"column":32}},"object":{"type":"Identifier","start":2898,"end":2905,"loc":{"start":{"line":93,"column":8},"end":{"line":93,"column":15}},"name":"options"},"property":{"type":"Identifier","start":2906,"end":2922,"loc":{"start":{"line":93,"column":16},"end":{"line":93,"column":32}},"name":"sendSelfEndpoint"},"computed":false},"consequent":{"type":"BlockStatement","start":2924,"end":3118,"loc":{"start":{"line":93,"column":34},"end":{"line":99,"column":5}},"body":[{"type":"ExpressionStatement","start":2972,"end":2999,"loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":33}},"expression":{"type":"CallExpression","start":2972,"end":2999,"loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":33}},"callee":{"type":"MemberExpression","start":2972,"end":2991,"loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":25}},"object":{"type":"Identifier","start":2972,"end":2986,"loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":20}},"name":"exposedHeaders"},"property":{"type":"Identifier","start":2987,"end":2991,"loc":{"start":{"line":95,"column":21},"end":{"line":95,"column":25}},"name":"push"},"computed":false},"arguments":[{"type":"Literal","start":2992,"end":2998,"loc":{"start":{"line":95,"column":26},"end":{"line":95,"column":32}},"value":"i-am","raw":"'i-am'"}]},"comments":[{"type":"Line","value":" add it to the exposed headers.","start":2932,"end":2965,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":39}}}]},{"type":"VariableDeclaration","start":3007,"end":3042,"loc":{"start":{"line":97,"column":6},"end":{"line":97,"column":41}},"declarations":[{"type":"VariableDeclarator","start":3013,"end":3042,"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":41}},"id":{"type":"ObjectPattern","start":3013,"end":3025,"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":24}},"properties":[{"type":"Property","start":3015,"end":3023,"loc":{"start":{"line":97,"column":14},"end":{"line":97,"column":22}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":3015,"end":3023,"loc":{"start":{"line":97,"column":14},"end":{"line":97,"column":22}},"name":"protocol"},"kind":"init","value":{"type":"Identifier","start":3015,"end":3023,"loc":{"start":{"line":97,"column":14},"end":{"line":97,"column":22}},"name":"protocol"}}]},"init":{"type":"MemberExpression","start":3028,"end":3042,"loc":{"start":{"line":97,"column":27},"end":{"line":97,"column":41}},"object":{"type":"Identifier","start":3028,"end":3035,"loc":{"start":{"line":97,"column":27},"end":{"line":97,"column":34}},"name":"options"},"property":{"type":"Identifier","start":3036,"end":3042,"loc":{"start":{"line":97,"column":35},"end":{"line":97,"column":41}},"name":"server"},"computed":false}}],"kind":"const"},{"type":"ExpressionStatement","start":3049,"end":3112,"loc":{"start":{"line":98,"column":6},"end":{"line":98,"column":69}},"expression":{"type":"CallExpression","start":3049,"end":3112,"loc":{"start":{"line":98,"column":6},"end":{"line":98,"column":69}},"callee":{"type":"MemberExpression","start":3049,"end":3059,"loc":{"start":{"line":98,"column":6},"end":{"line":98,"column":16}},"object":{"type":"Identifier","start":3049,"end":3052,"loc":{"start":{"line":98,"column":6},"end":{"line":98,"column":9}},"name":"res"},"property":{"type":"Identifier","start":3053,"end":3059,"loc":{"start":{"line":98,"column":10},"end":{"line":98,"column":16}},"name":"header"},"computed":false},"arguments":[{"type":"Literal","start":3060,"end":3066,"loc":{"start":{"line":98,"column":17},"end":{"line":98,"column":23}},"value":"i-am","raw":"'i-am'"},{"type":"TemplateLiteral","start":3068,"end":3111,"loc":{"start":{"line":98,"column":25},"end":{"line":98,"column":68}},"expressions":[{"type":"Identifier","start":3071,"end":3079,"loc":{"start":{"line":98,"column":28},"end":{"line":98,"column":36}},"name":"protocol"},{"type":"MemberExpression","start":3085,"end":3109,"loc":{"start":{"line":98,"column":42},"end":{"line":98,"column":66}},"object":{"type":"Identifier","start":3085,"end":3092,"loc":{"start":{"line":98,"column":42},"end":{"line":98,"column":49}},"name":"options"},"property":{"type":"Identifier","start":3093,"end":3109,"loc":{"start":{"line":98,"column":50},"end":{"line":98,"column":66}},"name":"sendSelfEndpoint"},"computed":false}],"quasis":[{"type":"TemplateElement","start":3069,"end":3069,"loc":{"start":{"line":98,"column":26},"end":{"line":98,"column":26}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":3080,"end":3083,"loc":{"start":{"line":98,"column":37},"end":{"line":98,"column":40}},"value":{"raw":"://","cooked":"://"},"tail":false},{"type":"TemplateElement","start":3110,"end":3110,"loc":{"start":{"line":98,"column":67},"end":{"line":98,"column":67}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]},"alternate":null},{"type":"IfStatement","start":3124,"end":3324,"loc":{"start":{"line":101,"column":4},"end":{"line":104,"column":5}},"test":{"type":"CallExpression","start":3128,"end":3168,"loc":{"start":{"line":101,"column":8},"end":{"line":101,"column":48}},"callee":{"type":"MemberExpression","start":3128,"end":3135,"loc":{"start":{"line":101,"column":8},"end":{"line":101,"column":15}},"object":{"type":"Identifier","start":3128,"end":3131,"loc":{"start":{"line":101,"column":8},"end":{"line":101,"column":11}},"name":"res"},"property":{"type":"Identifier","start":3132,"end":3135,"loc":{"start":{"line":101,"column":12},"end":{"line":101,"column":15}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":3136,"end":3167,"loc":{"start":{"line":101,"column":16},"end":{"line":101,"column":47}},"value":"Access-Control-Expose-Headers","raw":"'Access-Control-Expose-Headers'"}]},"consequent":{"type":"BlockStatement","start":3170,"end":3324,"loc":{"start":{"line":101,"column":50},"end":{"line":104,"column":5}},"body":[{"type":"ExpressionStatement","start":3257,"end":3318,"loc":{"start":{"line":103,"column":6},"end":{"line":103,"column":67}},"expression":{"type":"CallExpression","start":3257,"end":3318,"loc":{"start":{"line":103,"column":6},"end":{"line":103,"column":67}},"callee":{"type":"MemberExpression","start":3257,"end":3276,"loc":{"start":{"line":103,"column":6},"end":{"line":103,"column":25}},"object":{"type":"Identifier","start":3257,"end":3271,"loc":{"start":{"line":103,"column":6},"end":{"line":103,"column":20}},"name":"exposedHeaders"},"property":{"type":"Identifier","start":3272,"end":3276,"loc":{"start":{"line":103,"column":21},"end":{"line":103,"column":25}},"name":"push"},"computed":false},"arguments":[{"type":"CallExpression","start":3277,"end":3317,"loc":{"start":{"line":103,"column":26},"end":{"line":103,"column":66}},"callee":{"type":"MemberExpression","start":3277,"end":3284,"loc":{"start":{"line":103,"column":26},"end":{"line":103,"column":33}},"object":{"type":"Identifier","start":3277,"end":3280,"loc":{"start":{"line":103,"column":26},"end":{"line":103,"column":29}},"name":"res"},"property":{"type":"Identifier","start":3281,"end":3284,"loc":{"start":{"line":103,"column":30},"end":{"line":103,"column":33}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":3285,"end":3316,"loc":{"start":{"line":103,"column":34},"end":{"line":103,"column":65}},"value":"Access-Control-Expose-Headers","raw":"'Access-Control-Expose-Headers'"}]}]},"comments":[{"type":"Line","value":" if the header had been previously set, the values should be added too","start":3178,"end":3250,"loc":{"start":{"line":102,"column":6},"end":{"line":102,"column":78}}}]}]},"alternate":null},{"type":"ExpressionStatement","start":3330,"end":3399,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":73}},"expression":{"type":"CallExpression","start":3330,"end":3399,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":73}},"callee":{"type":"MemberExpression","start":3330,"end":3340,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":14}},"object":{"type":"Identifier","start":3330,"end":3333,"loc":{"start":{"line":106,"column":4},"end":{"line":106,"column":7}},"name":"res"},"property":{"type":"Identifier","start":3334,"end":3340,"loc":{"start":{"line":106,"column":8},"end":{"line":106,"column":14}},"name":"header"},"computed":false},"arguments":[{"type":"Literal","start":3341,"end":3372,"loc":{"start":{"line":106,"column":15},"end":{"line":106,"column":46}},"value":"Access-Control-Expose-Headers","raw":"'Access-Control-Expose-Headers'"},{"type":"CallExpression","start":3374,"end":3398,"loc":{"start":{"line":106,"column":48},"end":{"line":106,"column":72}},"callee":{"type":"MemberExpression","start":3374,"end":3393,"loc":{"start":{"line":106,"column":48},"end":{"line":106,"column":67}},"object":{"type":"Identifier","start":3374,"end":3388,"loc":{"start":{"line":106,"column":48},"end":{"line":106,"column":62}},"name":"exposedHeaders"},"property":{"type":"Identifier","start":3389,"end":3393,"loc":{"start":{"line":106,"column":63},"end":{"line":106,"column":67}},"name":"join"},"computed":false},"arguments":[{"type":"Literal","start":3394,"end":3397,"loc":{"start":{"line":106,"column":68},"end":{"line":106,"column":71}},"value":",","raw":"','"}]}]}},{"type":"ExpressionStatement","start":3404,"end":3410,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":10}},"expression":{"type":"CallExpression","start":3404,"end":3410,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":10}},"callee":{"type":"Identifier","start":3404,"end":3408,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":8}},"name":"next"},"arguments":[]}}]}}]}},{"type":"ExpressionStatement","start":3509,"end":3552,"loc":{"start":{"line":111,"column":2},"end":{"line":111,"column":45}},"expression":{"type":"CallExpression","start":3509,"end":3552,"loc":{"start":{"line":111,"column":2},"end":{"line":111,"column":45}},"callee":{"type":"MemberExpression","start":3509,"end":3516,"loc":{"start":{"line":111,"column":2},"end":{"line":111,"column":9}},"object":{"type":"Identifier","start":3509,"end":3512,"loc":{"start":{"line":111,"column":2},"end":{"line":111,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3513,"end":3516,"loc":{"start":{"line":111,"column":6},"end":{"line":111,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"Literal","start":3517,"end":3520,"loc":{"start":{"line":111,"column":10},"end":{"line":111,"column":13}},"value":"*","raw":"'*'"},{"type":"CallExpression","start":3522,"end":3551,"loc":{"start":{"line":111,"column":15},"end":{"line":111,"column":44}},"callee":{"type":"Identifier","start":3522,"end":3542,"loc":{"start":{"line":111,"column":15},"end":{"line":111,"column":35}},"name":"getOptionsMiddleware"},"arguments":[{"type":"Identifier","start":3543,"end":3550,"loc":{"start":{"line":111,"column":36},"end":{"line":111,"column":43}},"name":"options"}]}]},"comments":[{"type":"Line","value":" add uppy options to the request object so it can be accessed by subsequent handlers.","start":3419,"end":3506,"loc":{"start":{"line":110,"column":2},"end":{"line":110,"column":89}}}]},{"type":"ExpressionStatement","start":3555,"end":3601,"loc":{"start":{"line":112,"column":2},"end":{"line":112,"column":48}},"expression":{"type":"CallExpression","start":3555,"end":3601,"loc":{"start":{"line":112,"column":2},"end":{"line":112,"column":48}},"callee":{"type":"MemberExpression","start":3555,"end":3562,"loc":{"start":{"line":112,"column":2},"end":{"line":112,"column":9}},"object":{"type":"Identifier","start":3555,"end":3558,"loc":{"start":{"line":112,"column":2},"end":{"line":112,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3559,"end":3562,"loc":{"start":{"line":112,"column":6},"end":{"line":112,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"Literal","start":3563,"end":3568,"loc":{"start":{"line":112,"column":10},"end":{"line":112,"column":15}},"value":"/s3","raw":"'/s3'"},{"type":"CallExpression","start":3570,"end":3600,"loc":{"start":{"line":112,"column":17},"end":{"line":112,"column":47}},"callee":{"type":"Identifier","start":3570,"end":3572,"loc":{"start":{"line":112,"column":17},"end":{"line":112,"column":19}},"name":"s3"},"arguments":[{"type":"MemberExpression","start":3573,"end":3599,"loc":{"start":{"line":112,"column":20},"end":{"line":112,"column":46}},"object":{"type":"MemberExpression","start":3573,"end":3596,"loc":{"start":{"line":112,"column":20},"end":{"line":112,"column":43}},"object":{"type":"Identifier","start":3573,"end":3580,"loc":{"start":{"line":112,"column":20},"end":{"line":112,"column":27}},"name":"options"},"property":{"type":"Identifier","start":3581,"end":3596,"loc":{"start":{"line":112,"column":28},"end":{"line":112,"column":43}},"name":"providerOptions"},"computed":false},"property":{"type":"Identifier","start":3597,"end":3599,"loc":{"start":{"line":112,"column":44},"end":{"line":112,"column":46}},"name":"s3"},"computed":false}]}]}},{"type":"ExpressionStatement","start":3604,"end":3626,"loc":{"start":{"line":113,"column":2},"end":{"line":113,"column":24}},"expression":{"type":"CallExpression","start":3604,"end":3626,"loc":{"start":{"line":113,"column":2},"end":{"line":113,"column":24}},"callee":{"type":"MemberExpression","start":3604,"end":3611,"loc":{"start":{"line":113,"column":2},"end":{"line":113,"column":9}},"object":{"type":"Identifier","start":3604,"end":3607,"loc":{"start":{"line":113,"column":2},"end":{"line":113,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3608,"end":3611,"loc":{"start":{"line":113,"column":6},"end":{"line":113,"column":9}},"name":"use"},"computed":false},"arguments":[{"type":"Literal","start":3612,"end":3618,"loc":{"start":{"line":113,"column":10},"end":{"line":113,"column":16}},"value":"/url","raw":"'/url'"},{"type":"CallExpression","start":3620,"end":3625,"loc":{"start":{"line":113,"column":18},"end":{"line":113,"column":23}},"callee":{"type":"Identifier","start":3620,"end":3623,"loc":{"start":{"line":113,"column":18},"end":{"line":113,"column":21}},"name":"url"},"arguments":[]}]}},{"type":"ExpressionStatement","start":3630,"end":3721,"loc":{"start":{"line":115,"column":2},"end":{"line":115,"column":93}},"expression":{"type":"CallExpression","start":3630,"end":3721,"loc":{"start":{"line":115,"column":2},"end":{"line":115,"column":93}},"callee":{"type":"MemberExpression","start":3630,"end":3637,"loc":{"start":{"line":115,"column":2},"end":{"line":115,"column":9}},"object":{"type":"Identifier","start":3630,"end":3633,"loc":{"start":{"line":115,"column":2},"end":{"line":115,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3634,"end":3637,"loc":{"start":{"line":115,"column":6},"end":{"line":115,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":3638,"end":3663,"loc":{"start":{"line":115,"column":10},"end":{"line":115,"column":35}},"value":"/:providerName/callback","raw":"'/:providerName/callback'"},{"type":"MemberExpression","start":3665,"end":3698,"loc":{"start":{"line":115,"column":37},"end":{"line":115,"column":70}},"object":{"type":"Identifier","start":3665,"end":3676,"loc":{"start":{"line":115,"column":37},"end":{"line":115,"column":48}},"name":"middlewares"},"property":{"type":"Identifier","start":3677,"end":3698,"loc":{"start":{"line":115,"column":49},"end":{"line":115,"column":70}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":3700,"end":3720,"loc":{"start":{"line":115,"column":72},"end":{"line":115,"column":92}},"object":{"type":"Identifier","start":3700,"end":3711,"loc":{"start":{"line":115,"column":72},"end":{"line":115,"column":83}},"name":"controllers"},"property":{"type":"Identifier","start":3712,"end":3720,"loc":{"start":{"line":115,"column":84},"end":{"line":115,"column":92}},"name":"callback"},"computed":false}]}},{"type":"ExpressionStatement","start":3724,"end":3813,"loc":{"start":{"line":116,"column":2},"end":{"line":116,"column":91}},"expression":{"type":"CallExpression","start":3724,"end":3813,"loc":{"start":{"line":116,"column":2},"end":{"line":116,"column":91}},"callee":{"type":"MemberExpression","start":3724,"end":3731,"loc":{"start":{"line":116,"column":2},"end":{"line":116,"column":9}},"object":{"type":"Identifier","start":3724,"end":3727,"loc":{"start":{"line":116,"column":2},"end":{"line":116,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3728,"end":3731,"loc":{"start":{"line":116,"column":6},"end":{"line":116,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":3732,"end":3756,"loc":{"start":{"line":116,"column":10},"end":{"line":116,"column":34}},"value":"/:providerName/connect","raw":"'/:providerName/connect'"},{"type":"MemberExpression","start":3758,"end":3791,"loc":{"start":{"line":116,"column":36},"end":{"line":116,"column":69}},"object":{"type":"Identifier","start":3758,"end":3769,"loc":{"start":{"line":116,"column":36},"end":{"line":116,"column":47}},"name":"middlewares"},"property":{"type":"Identifier","start":3770,"end":3791,"loc":{"start":{"line":116,"column":48},"end":{"line":116,"column":69}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":3793,"end":3812,"loc":{"start":{"line":116,"column":71},"end":{"line":116,"column":90}},"object":{"type":"Identifier","start":3793,"end":3804,"loc":{"start":{"line":116,"column":71},"end":{"line":116,"column":82}},"name":"controllers"},"property":{"type":"Identifier","start":3805,"end":3812,"loc":{"start":{"line":116,"column":83},"end":{"line":116,"column":90}},"name":"connect"},"computed":false}]}},{"type":"ExpressionStatement","start":3816,"end":3907,"loc":{"start":{"line":117,"column":2},"end":{"line":117,"column":93}},"expression":{"type":"CallExpression","start":3816,"end":3907,"loc":{"start":{"line":117,"column":2},"end":{"line":117,"column":93}},"callee":{"type":"MemberExpression","start":3816,"end":3823,"loc":{"start":{"line":117,"column":2},"end":{"line":117,"column":9}},"object":{"type":"Identifier","start":3816,"end":3819,"loc":{"start":{"line":117,"column":2},"end":{"line":117,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3820,"end":3823,"loc":{"start":{"line":117,"column":6},"end":{"line":117,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":3824,"end":3849,"loc":{"start":{"line":117,"column":10},"end":{"line":117,"column":35}},"value":"/:providerName/redirect","raw":"'/:providerName/redirect'"},{"type":"MemberExpression","start":3851,"end":3884,"loc":{"start":{"line":117,"column":37},"end":{"line":117,"column":70}},"object":{"type":"Identifier","start":3851,"end":3862,"loc":{"start":{"line":117,"column":37},"end":{"line":117,"column":48}},"name":"middlewares"},"property":{"type":"Identifier","start":3863,"end":3884,"loc":{"start":{"line":117,"column":49},"end":{"line":117,"column":70}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":3886,"end":3906,"loc":{"start":{"line":117,"column":72},"end":{"line":117,"column":92}},"object":{"type":"Identifier","start":3886,"end":3897,"loc":{"start":{"line":117,"column":72},"end":{"line":117,"column":83}},"name":"controllers"},"property":{"type":"Identifier","start":3898,"end":3906,"loc":{"start":{"line":117,"column":84},"end":{"line":117,"column":92}},"name":"redirect"},"computed":false}]}},{"type":"ExpressionStatement","start":3910,"end":4028,"loc":{"start":{"line":118,"column":2},"end":{"line":118,"column":120}},"expression":{"type":"CallExpression","start":3910,"end":4028,"loc":{"start":{"line":118,"column":2},"end":{"line":118,"column":120}},"callee":{"type":"MemberExpression","start":3910,"end":3917,"loc":{"start":{"line":118,"column":2},"end":{"line":118,"column":9}},"object":{"type":"Identifier","start":3910,"end":3913,"loc":{"start":{"line":118,"column":2},"end":{"line":118,"column":5}},"name":"app"},"property":{"type":"Identifier","start":3914,"end":3917,"loc":{"start":{"line":118,"column":6},"end":{"line":118,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":3918,"end":3941,"loc":{"start":{"line":118,"column":10},"end":{"line":118,"column":33}},"value":"/:providerName/logout","raw":"'/:providerName/logout'"},{"type":"MemberExpression","start":3943,"end":3976,"loc":{"start":{"line":118,"column":35},"end":{"line":118,"column":68}},"object":{"type":"Identifier","start":3943,"end":3954,"loc":{"start":{"line":118,"column":35},"end":{"line":118,"column":46}},"name":"middlewares"},"property":{"type":"Identifier","start":3955,"end":3976,"loc":{"start":{"line":118,"column":47},"end":{"line":118,"column":68}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":3978,"end":4007,"loc":{"start":{"line":118,"column":70},"end":{"line":118,"column":99}},"object":{"type":"Identifier","start":3978,"end":3989,"loc":{"start":{"line":118,"column":70},"end":{"line":118,"column":81}},"name":"middlewares"},"property":{"type":"Identifier","start":3990,"end":4007,"loc":{"start":{"line":118,"column":82},"end":{"line":118,"column":99}},"name":"gentleVerifyToken"},"computed":false},{"type":"MemberExpression","start":4009,"end":4027,"loc":{"start":{"line":118,"column":101},"end":{"line":118,"column":119}},"object":{"type":"Identifier","start":4009,"end":4020,"loc":{"start":{"line":118,"column":101},"end":{"line":118,"column":112}},"name":"controllers"},"property":{"type":"Identifier","start":4021,"end":4027,"loc":{"start":{"line":118,"column":113},"end":{"line":118,"column":119}},"name":"logout"},"computed":false}]}},{"type":"ExpressionStatement","start":4031,"end":4150,"loc":{"start":{"line":119,"column":2},"end":{"line":119,"column":121}},"expression":{"type":"CallExpression","start":4031,"end":4150,"loc":{"start":{"line":119,"column":2},"end":{"line":119,"column":121}},"callee":{"type":"MemberExpression","start":4031,"end":4038,"loc":{"start":{"line":119,"column":2},"end":{"line":119,"column":9}},"object":{"type":"Identifier","start":4031,"end":4034,"loc":{"start":{"line":119,"column":2},"end":{"line":119,"column":5}},"name":"app"},"property":{"type":"Identifier","start":4035,"end":4038,"loc":{"start":{"line":119,"column":6},"end":{"line":119,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":4039,"end":4066,"loc":{"start":{"line":119,"column":10},"end":{"line":119,"column":37}},"value":"/:providerName/send-token","raw":"'/:providerName/send-token'"},{"type":"MemberExpression","start":4068,"end":4101,"loc":{"start":{"line":119,"column":39},"end":{"line":119,"column":72}},"object":{"type":"Identifier","start":4068,"end":4079,"loc":{"start":{"line":119,"column":39},"end":{"line":119,"column":50}},"name":"middlewares"},"property":{"type":"Identifier","start":4080,"end":4101,"loc":{"start":{"line":119,"column":51},"end":{"line":119,"column":72}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":4103,"end":4126,"loc":{"start":{"line":119,"column":74},"end":{"line":119,"column":97}},"object":{"type":"Identifier","start":4103,"end":4114,"loc":{"start":{"line":119,"column":74},"end":{"line":119,"column":85}},"name":"middlewares"},"property":{"type":"Identifier","start":4115,"end":4126,"loc":{"start":{"line":119,"column":86},"end":{"line":119,"column":97}},"name":"verifyToken"},"computed":false},{"type":"MemberExpression","start":4128,"end":4149,"loc":{"start":{"line":119,"column":99},"end":{"line":119,"column":120}},"object":{"type":"Identifier","start":4128,"end":4139,"loc":{"start":{"line":119,"column":99},"end":{"line":119,"column":110}},"name":"controllers"},"property":{"type":"Identifier","start":4140,"end":4149,"loc":{"start":{"line":119,"column":111},"end":{"line":119,"column":120}},"name":"sendToken"},"computed":false}]}},{"type":"ExpressionStatement","start":4153,"end":4266,"loc":{"start":{"line":120,"column":2},"end":{"line":120,"column":115}},"expression":{"type":"CallExpression","start":4153,"end":4266,"loc":{"start":{"line":120,"column":2},"end":{"line":120,"column":115}},"callee":{"type":"MemberExpression","start":4153,"end":4160,"loc":{"start":{"line":120,"column":2},"end":{"line":120,"column":9}},"object":{"type":"Identifier","start":4153,"end":4156,"loc":{"start":{"line":120,"column":2},"end":{"line":120,"column":5}},"name":"app"},"property":{"type":"Identifier","start":4157,"end":4160,"loc":{"start":{"line":120,"column":6},"end":{"line":120,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":4161,"end":4187,"loc":{"start":{"line":120,"column":10},"end":{"line":120,"column":36}},"value":"/:providerName/list/:id?","raw":"'/:providerName/list/:id?'"},{"type":"MemberExpression","start":4189,"end":4222,"loc":{"start":{"line":120,"column":38},"end":{"line":120,"column":71}},"object":{"type":"Identifier","start":4189,"end":4200,"loc":{"start":{"line":120,"column":38},"end":{"line":120,"column":49}},"name":"middlewares"},"property":{"type":"Identifier","start":4201,"end":4222,"loc":{"start":{"line":120,"column":50},"end":{"line":120,"column":71}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":4224,"end":4247,"loc":{"start":{"line":120,"column":73},"end":{"line":120,"column":96}},"object":{"type":"Identifier","start":4224,"end":4235,"loc":{"start":{"line":120,"column":73},"end":{"line":120,"column":84}},"name":"middlewares"},"property":{"type":"Identifier","start":4236,"end":4247,"loc":{"start":{"line":120,"column":85},"end":{"line":120,"column":96}},"name":"verifyToken"},"computed":false},{"type":"MemberExpression","start":4249,"end":4265,"loc":{"start":{"line":120,"column":98},"end":{"line":120,"column":114}},"object":{"type":"Identifier","start":4249,"end":4260,"loc":{"start":{"line":120,"column":98},"end":{"line":120,"column":109}},"name":"controllers"},"property":{"type":"Identifier","start":4261,"end":4265,"loc":{"start":{"line":120,"column":110},"end":{"line":120,"column":114}},"name":"list"},"computed":false}]}},{"type":"ExpressionStatement","start":4269,"end":4380,"loc":{"start":{"line":121,"column":2},"end":{"line":121,"column":113}},"expression":{"type":"CallExpression","start":4269,"end":4380,"loc":{"start":{"line":121,"column":2},"end":{"line":121,"column":113}},"callee":{"type":"MemberExpression","start":4269,"end":4277,"loc":{"start":{"line":121,"column":2},"end":{"line":121,"column":10}},"object":{"type":"Identifier","start":4269,"end":4272,"loc":{"start":{"line":121,"column":2},"end":{"line":121,"column":5}},"name":"app"},"property":{"type":"Identifier","start":4273,"end":4277,"loc":{"start":{"line":121,"column":6},"end":{"line":121,"column":10}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":4278,"end":4302,"loc":{"start":{"line":121,"column":11},"end":{"line":121,"column":35}},"value":"/:providerName/get/:id","raw":"'/:providerName/get/:id'"},{"type":"MemberExpression","start":4304,"end":4337,"loc":{"start":{"line":121,"column":37},"end":{"line":121,"column":70}},"object":{"type":"Identifier","start":4304,"end":4315,"loc":{"start":{"line":121,"column":37},"end":{"line":121,"column":48}},"name":"middlewares"},"property":{"type":"Identifier","start":4316,"end":4337,"loc":{"start":{"line":121,"column":49},"end":{"line":121,"column":70}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":4339,"end":4362,"loc":{"start":{"line":121,"column":72},"end":{"line":121,"column":95}},"object":{"type":"Identifier","start":4339,"end":4350,"loc":{"start":{"line":121,"column":72},"end":{"line":121,"column":83}},"name":"middlewares"},"property":{"type":"Identifier","start":4351,"end":4362,"loc":{"start":{"line":121,"column":84},"end":{"line":121,"column":95}},"name":"verifyToken"},"computed":false},{"type":"MemberExpression","start":4364,"end":4379,"loc":{"start":{"line":121,"column":97},"end":{"line":121,"column":112}},"object":{"type":"Identifier","start":4364,"end":4375,"loc":{"start":{"line":121,"column":97},"end":{"line":121,"column":108}},"name":"controllers"},"property":{"type":"Identifier","start":4376,"end":4379,"loc":{"start":{"line":121,"column":109},"end":{"line":121,"column":112}},"name":"get"},"computed":false}]}},{"type":"ExpressionStatement","start":4383,"end":4534,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":153}},"expression":{"type":"CallExpression","start":4383,"end":4534,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":153}},"callee":{"type":"MemberExpression","start":4383,"end":4390,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":9}},"object":{"type":"Identifier","start":4383,"end":4386,"loc":{"start":{"line":122,"column":2},"end":{"line":122,"column":5}},"name":"app"},"property":{"type":"Identifier","start":4387,"end":4390,"loc":{"start":{"line":122,"column":6},"end":{"line":122,"column":9}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":4391,"end":4421,"loc":{"start":{"line":122,"column":10},"end":{"line":122,"column":40}},"value":"/:providerName/thumbnail/:id","raw":"'/:providerName/thumbnail/:id'"},{"type":"MemberExpression","start":4423,"end":4456,"loc":{"start":{"line":122,"column":42},"end":{"line":122,"column":75}},"object":{"type":"Identifier","start":4423,"end":4434,"loc":{"start":{"line":122,"column":42},"end":{"line":122,"column":53}},"name":"middlewares"},"property":{"type":"Identifier","start":4435,"end":4456,"loc":{"start":{"line":122,"column":54},"end":{"line":122,"column":75}},"name":"hasSessionAndProvider"},"computed":false},{"type":"MemberExpression","start":4458,"end":4485,"loc":{"start":{"line":122,"column":77},"end":{"line":122,"column":104}},"object":{"type":"Identifier","start":4458,"end":4469,"loc":{"start":{"line":122,"column":77},"end":{"line":122,"column":88}},"name":"middlewares"},"property":{"type":"Identifier","start":4470,"end":4485,"loc":{"start":{"line":122,"column":89},"end":{"line":122,"column":104}},"name":"cookieAuthToken"},"computed":false},{"type":"MemberExpression","start":4487,"end":4510,"loc":{"start":{"line":122,"column":106},"end":{"line":122,"column":129}},"object":{"type":"Identifier","start":4487,"end":4498,"loc":{"start":{"line":122,"column":106},"end":{"line":122,"column":117}},"name":"middlewares"},"property":{"type":"Identifier","start":4499,"end":4510,"loc":{"start":{"line":122,"column":118},"end":{"line":122,"column":129}},"name":"verifyToken"},"computed":false},{"type":"MemberExpression","start":4512,"end":4533,"loc":{"start":{"line":122,"column":131},"end":{"line":122,"column":152}},"object":{"type":"Identifier","start":4512,"end":4523,"loc":{"start":{"line":122,"column":131},"end":{"line":122,"column":142}},"name":"controllers"},"property":{"type":"Identifier","start":4524,"end":4533,"loc":{"start":{"line":122,"column":143},"end":{"line":122,"column":152}},"name":"thumbnail"},"computed":false}]}},{"type":"ExpressionStatement","start":4538,"end":4613,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":77}},"expression":{"type":"CallExpression","start":4538,"end":4613,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":77}},"callee":{"type":"MemberExpression","start":4538,"end":4547,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":11}},"object":{"type":"Identifier","start":4538,"end":4541,"loc":{"start":{"line":124,"column":2},"end":{"line":124,"column":5}},"name":"app"},"property":{"type":"Identifier","start":4542,"end":4547,"loc":{"start":{"line":124,"column":6},"end":{"line":124,"column":11}},"name":"param"},"computed":false},"arguments":[{"type":"Literal","start":4548,"end":4562,"loc":{"start":{"line":124,"column":12},"end":{"line":124,"column":26}},"value":"providerName","raw":"'providerName'"},{"type":"CallExpression","start":4564,"end":4612,"loc":{"start":{"line":124,"column":28},"end":{"line":124,"column":76}},"callee":{"type":"MemberExpression","start":4564,"end":4601,"loc":{"start":{"line":124,"column":28},"end":{"line":124,"column":65}},"object":{"type":"Identifier","start":4564,"end":4579,"loc":{"start":{"line":124,"column":28},"end":{"line":124,"column":43}},"name":"providerManager"},"property":{"type":"Identifier","start":4580,"end":4601,"loc":{"start":{"line":124,"column":44},"end":{"line":124,"column":65}},"name":"getProviderMiddleware"},"computed":false},"arguments":[{"type":"Identifier","start":4602,"end":4611,"loc":{"start":{"line":124,"column":66},"end":{"line":124,"column":75}},"name":"providers"}]}]}},{"type":"IfStatement","start":4617,"end":4696,"loc":{"start":{"line":126,"column":2},"end":{"line":128,"column":3}},"test":{"type":"BinaryExpression","start":4621,"end":4646,"loc":{"start":{"line":126,"column":6},"end":{"line":126,"column":31}},"left":{"type":"CallExpression","start":4621,"end":4635,"loc":{"start":{"line":126,"column":6},"end":{"line":126,"column":20}},"callee":{"type":"MemberExpression","start":4621,"end":4628,"loc":{"start":{"line":126,"column":6},"end":{"line":126,"column":13}},"object":{"type":"Identifier","start":4621,"end":4624,"loc":{"start":{"line":126,"column":6},"end":{"line":126,"column":9}},"name":"app"},"property":{"type":"Identifier","start":4625,"end":4628,"loc":{"start":{"line":126,"column":10},"end":{"line":126,"column":13}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":4629,"end":4634,"loc":{"start":{"line":126,"column":14},"end":{"line":126,"column":19}},"value":"env","raw":"'env'"}]},"operator":"!==","right":{"type":"Literal","start":4640,"end":4646,"loc":{"start":{"line":126,"column":25},"end":{"line":126,"column":31}},"value":"test","raw":"'test'"}},"consequent":{"type":"BlockStatement","start":4648,"end":4696,"loc":{"start":{"line":126,"column":33},"end":{"line":128,"column":3}},"body":[{"type":"ExpressionStatement","start":4654,"end":4692,"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":42}},"expression":{"type":"CallExpression","start":4654,"end":4692,"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":42}},"callee":{"type":"MemberExpression","start":4654,"end":4674,"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":24}},"object":{"type":"Identifier","start":4654,"end":4658,"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":8}},"name":"jobs"},"property":{"type":"Identifier","start":4659,"end":4674,"loc":{"start":{"line":127,"column":9},"end":{"line":127,"column":24}},"name":"startCleanUpJob"},"computed":false},"arguments":[{"type":"MemberExpression","start":4675,"end":4691,"loc":{"start":{"line":127,"column":25},"end":{"line":127,"column":41}},"object":{"type":"Identifier","start":4675,"end":4682,"loc":{"start":{"line":127,"column":25},"end":{"line":127,"column":32}},"name":"options"},"property":{"type":"Identifier","start":4683,"end":4691,"loc":{"start":{"line":127,"column":33},"end":{"line":127,"column":41}},"name":"filePath"},"computed":false}]}}]},"alternate":null},{"type":"ReturnStatement","start":4700,"end":4710,"loc":{"start":{"line":130,"column":2},"end":{"line":130,"column":12}},"argument":{"type":"Identifier","start":4707,"end":4710,"loc":{"start":{"line":130,"column":9},"end":{"line":130,"column":12}},"name":"app"}}]}}},"comments":[{"type":"Block","value":"*\n * Entry point into initializing the Companion app.\n *\n * @param {object} options\n ","start":1534,"end":1623,"loc":{"start":{"line":46,"column":0},"end":{"line":50,"column":3}}}]},{"type":"ExpressionStatement","start":4814,"end":6566,"loc":{"start":{"line":138,"column":0},"end":{"line":190,"column":1}},"expression":{"type":"AssignmentExpression","start":4814,"end":6566,"loc":{"start":{"line":138,"column":0},"end":{"line":190,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":4814,"end":4835,"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":21}},"object":{"type":"MemberExpression","start":4814,"end":4828,"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":14}},"object":{"type":"Identifier","start":4814,"end":4820,"loc":{"start":{"line":138,"column":0},"end":{"line":138,"column":6}},"name":"module"},"property":{"type":"Identifier","start":4821,"end":4828,"loc":{"start":{"line":138,"column":7},"end":{"line":138,"column":14}},"name":"exports"},"computed":false},"property":{"type":"Identifier","start":4829,"end":4835,"loc":{"start":{"line":138,"column":15},"end":{"line":138,"column":21}},"name":"socket"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":4838,"end":6566,"loc":{"start":{"line":138,"column":24},"end":{"line":190,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4839,"end":4845,"loc":{"start":{"line":138,"column":25},"end":{"line":138,"column":31}},"name":"server"}],"body":{"type":"BlockStatement","start":4850,"end":6566,"loc":{"start":{"line":138,"column":36},"end":{"line":190,"column":1}},"body":[{"type":"VariableDeclaration","start":4854,"end":4894,"loc":{"start":{"line":139,"column":2},"end":{"line":139,"column":42}},"declarations":[{"type":"VariableDeclarator","start":4860,"end":4894,"loc":{"start":{"line":139,"column":8},"end":{"line":139,"column":42}},"id":{"type":"Identifier","start":4860,"end":4863,"loc":{"start":{"line":139,"column":8},"end":{"line":139,"column":11}},"name":"wss"},"init":{"type":"NewExpression","start":4866,"end":4894,"loc":{"start":{"line":139,"column":14},"end":{"line":139,"column":42}},"callee":{"type":"Identifier","start":4870,"end":4882,"loc":{"start":{"line":139,"column":18},"end":{"line":139,"column":30}},"name":"SocketServer"},"arguments":[{"type":"ObjectExpression","start":4883,"end":4893,"loc":{"start":{"line":139,"column":31},"end":{"line":139,"column":41}},"properties":[{"type":"Property","start":4885,"end":4891,"loc":{"start":{"line":139,"column":33},"end":{"line":139,"column":39}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4885,"end":4891,"loc":{"start":{"line":139,"column":33},"end":{"line":139,"column":39}},"name":"server"},"kind":"init","value":{"type":"Identifier","start":4885,"end":4891,"loc":{"start":{"line":139,"column":33},"end":{"line":139,"column":39}},"name":"server"}}]}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4897,"end":4931,"loc":{"start":{"line":140,"column":2},"end":{"line":140,"column":36}},"declarations":[{"type":"VariableDeclarator","start":4903,"end":4931,"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":36}},"id":{"type":"Identifier","start":4903,"end":4914,"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":19}},"name":"redisClient"},"init":{"type":"CallExpression","start":4917,"end":4931,"loc":{"start":{"line":140,"column":22},"end":{"line":140,"column":36}},"callee":{"type":"MemberExpression","start":4917,"end":4929,"loc":{"start":{"line":140,"column":22},"end":{"line":140,"column":34}},"object":{"type":"Identifier","start":4917,"end":4922,"loc":{"start":{"line":140,"column":22},"end":{"line":140,"column":27}},"name":"redis"},"property":{"type":"Identifier","start":4923,"end":4929,"loc":{"start":{"line":140,"column":28},"end":{"line":140,"column":34}},"name":"client"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":5097,"end":6564,"loc":{"start":{"line":145,"column":2},"end":{"line":189,"column":4}},"expression":{"type":"CallExpression","start":5097,"end":6564,"loc":{"start":{"line":145,"column":2},"end":{"line":189,"column":4}},"callee":{"type":"MemberExpression","start":5097,"end":5103,"loc":{"start":{"line":145,"column":2},"end":{"line":145,"column":8}},"object":{"type":"Identifier","start":5097,"end":5100,"loc":{"start":{"line":145,"column":2},"end":{"line":145,"column":5}},"name":"wss"},"property":{"type":"Identifier","start":5101,"end":5103,"loc":{"start":{"line":145,"column":6},"end":{"line":145,"column":8}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":5104,"end":5116,"loc":{"start":{"line":145,"column":9},"end":{"line":145,"column":21}},"value":"connection","raw":"'connection'"},{"type":"ArrowFunctionExpression","start":5118,"end":6563,"loc":{"start":{"line":145,"column":23},"end":{"line":189,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5119,"end":5121,"loc":{"start":{"line":145,"column":24},"end":{"line":145,"column":26}},"name":"ws"},{"type":"Identifier","start":5123,"end":5126,"loc":{"start":{"line":145,"column":28},"end":{"line":145,"column":31}},"name":"req"}],"body":{"type":"BlockStatement","start":5131,"end":6563,"loc":{"start":{"line":145,"column":36},"end":{"line":189,"column":3}},"body":[{"type":"VariableDeclaration","start":5155,"end":5179,"loc":{"start":{"line":147,"column":4},"end":{"line":147,"column":28}},"declarations":[{"type":"VariableDeclarator","start":5161,"end":5179,"loc":{"start":{"line":147,"column":10},"end":{"line":147,"column":28}},"id":{"type":"Identifier","start":5161,"end":5169,"loc":{"start":{"line":147,"column":10},"end":{"line":147,"column":18}},"name":"fullPath"},"init":{"type":"MemberExpression","start":5172,"end":5179,"loc":{"start":{"line":147,"column":21},"end":{"line":147,"column":28}},"object":{"type":"Identifier","start":5172,"end":5175,"loc":{"start":{"line":147,"column":21},"end":{"line":147,"column":24}},"name":"req"},"property":{"type":"Identifier","start":5176,"end":5179,"loc":{"start":{"line":147,"column":25},"end":{"line":147,"column":28}},"name":"url"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore","start":5137,"end":5150,"loc":{"start":{"line":146,"column":4},"end":{"line":146,"column":17}}}]},{"type":"VariableDeclaration","start":5295,"end":5343,"loc":{"start":{"line":150,"column":4},"end":{"line":150,"column":52}},"declarations":[{"type":"VariableDeclarator","start":5301,"end":5343,"loc":{"start":{"line":150,"column":10},"end":{"line":150,"column":52}},"id":{"type":"Identifier","start":5301,"end":5306,"loc":{"start":{"line":150,"column":10},"end":{"line":150,"column":15}},"name":"token"},"init":{"type":"CallExpression","start":5309,"end":5343,"loc":{"start":{"line":150,"column":18},"end":{"line":150,"column":52}},"callee":{"type":"MemberExpression","start":5309,"end":5325,"loc":{"start":{"line":150,"column":18},"end":{"line":150,"column":34}},"object":{"type":"Identifier","start":5309,"end":5317,"loc":{"start":{"line":150,"column":18},"end":{"line":150,"column":26}},"name":"fullPath"},"property":{"type":"Identifier","start":5318,"end":5325,"loc":{"start":{"line":150,"column":27},"end":{"line":150,"column":34}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":5326,"end":5338,"loc":{"start":{"line":150,"column":35},"end":{"line":150,"column":47}},"value":{},"raw":"/^.*\\/api\\//","regex":{"pattern":"^.*\\/api\\/","flags":""}},{"type":"Literal","start":5340,"end":5342,"loc":{"start":{"line":150,"column":49},"end":{"line":150,"column":51}},"value":"","raw":"''"}]}}],"kind":"const","comments":[{"type":"Line","value":" the token identifies which ongoing upload's progress, the socket","start":5184,"end":5251,"loc":{"start":{"line":148,"column":4},"end":{"line":148,"column":71}}},{"type":"Line","value":" connection wishes to listen to.","start":5256,"end":5290,"loc":{"start":{"line":149,"column":4},"end":{"line":149,"column":38}}}]},{"type":"ExpressionStatement","start":5348,"end":5414,"loc":{"start":{"line":151,"column":4},"end":{"line":151,"column":70}},"expression":{"type":"CallExpression","start":5348,"end":5414,"loc":{"start":{"line":151,"column":4},"end":{"line":151,"column":70}},"callee":{"type":"MemberExpression","start":5348,"end":5359,"loc":{"start":{"line":151,"column":4},"end":{"line":151,"column":15}},"object":{"type":"Identifier","start":5348,"end":5354,"loc":{"start":{"line":151,"column":4},"end":{"line":151,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":5355,"end":5359,"loc":{"start":{"line":151,"column":11},"end":{"line":151,"column":15}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":5360,"end":5395,"loc":{"start":{"line":151,"column":16},"end":{"line":151,"column":51}},"expressions":[{"type":"Identifier","start":5388,"end":5393,"loc":{"start":{"line":151,"column":44},"end":{"line":151,"column":49}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":5361,"end":5386,"loc":{"start":{"line":151,"column":17},"end":{"line":151,"column":42}},"value":{"raw":"connection received from ","cooked":"connection received from "},"tail":false},{"type":"TemplateElement","start":5394,"end":5394,"loc":{"start":{"line":151,"column":50},"end":{"line":151,"column":50}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":5397,"end":5413,"loc":{"start":{"line":151,"column":53},"end":{"line":151,"column":69}},"value":"socket.connect","raw":"'socket.connect'"}]}},{"type":"FunctionDeclaration","start":5498,"end":5670,"loc":{"start":{"line":157,"column":4},"end":{"line":161,"column":5}},"id":{"type":"Identifier","start":5507,"end":5519,"loc":{"start":{"line":157,"column":13},"end":{"line":157,"column":25}},"name":"sendProgress"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5521,"end":5525,"loc":{"start":{"line":157,"column":27},"end":{"line":157,"column":31}},"name":"data"}],"body":{"type":"BlockStatement","start":5527,"end":5670,"loc":{"start":{"line":157,"column":33},"end":{"line":161,"column":5}},"body":[{"type":"ExpressionStatement","start":5535,"end":5664,"loc":{"start":{"line":158,"column":6},"end":{"line":160,"column":8}},"expression":{"type":"CallExpression","start":5535,"end":5664,"loc":{"start":{"line":158,"column":6},"end":{"line":160,"column":8}},"callee":{"type":"MemberExpression","start":5535,"end":5542,"loc":{"start":{"line":158,"column":6},"end":{"line":158,"column":13}},"object":{"type":"Identifier","start":5535,"end":5537,"loc":{"start":{"line":158,"column":6},"end":{"line":158,"column":8}},"name":"ws"},"property":{"type":"Identifier","start":5538,"end":5542,"loc":{"start":{"line":158,"column":9},"end":{"line":158,"column":13}},"name":"send"},"computed":false},"arguments":[{"type":"CallExpression","start":5543,"end":5562,"loc":{"start":{"line":158,"column":14},"end":{"line":158,"column":33}},"callee":{"type":"Identifier","start":5543,"end":5556,"loc":{"start":{"line":158,"column":14},"end":{"line":158,"column":27}},"name":"jsonStringify"},"arguments":[{"type":"Identifier","start":5557,"end":5561,"loc":{"start":{"line":158,"column":28},"end":{"line":158,"column":32}},"name":"data"}]},{"type":"ArrowFunctionExpression","start":5564,"end":5663,"loc":{"start":{"line":158,"column":35},"end":{"line":160,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5565,"end":5568,"loc":{"start":{"line":158,"column":36},"end":{"line":158,"column":39}},"name":"err"}],"body":{"type":"BlockStatement","start":5573,"end":5663,"loc":{"start":{"line":158,"column":44},"end":{"line":160,"column":7}},"body":[{"type":"IfStatement","start":5583,"end":5655,"loc":{"start":{"line":159,"column":8},"end":{"line":159,"column":80}},"test":{"type":"Identifier","start":5587,"end":5590,"loc":{"start":{"line":159,"column":12},"end":{"line":159,"column":15}},"name":"err"},"consequent":{"type":"ExpressionStatement","start":5592,"end":5655,"loc":{"start":{"line":159,"column":17},"end":{"line":159,"column":80}},"expression":{"type":"CallExpression","start":5592,"end":5655,"loc":{"start":{"line":159,"column":17},"end":{"line":159,"column":80}},"callee":{"type":"MemberExpression","start":5592,"end":5604,"loc":{"start":{"line":159,"column":17},"end":{"line":159,"column":29}},"object":{"type":"Identifier","start":5592,"end":5598,"loc":{"start":{"line":159,"column":17},"end":{"line":159,"column":23}},"name":"logger"},"property":{"type":"Identifier","start":5599,"end":5604,"loc":{"start":{"line":159,"column":24},"end":{"line":159,"column":29}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":5605,"end":5608,"loc":{"start":{"line":159,"column":30},"end":{"line":159,"column":33}},"name":"err"},{"type":"Literal","start":5610,"end":5633,"loc":{"start":{"line":159,"column":35},"end":{"line":159,"column":58}},"value":"socket.progress.error","raw":"'socket.progress.error'"},{"type":"CallExpression","start":5635,"end":5654,"loc":{"start":{"line":159,"column":60},"end":{"line":159,"column":79}},"callee":{"type":"Identifier","start":5635,"end":5647,"loc":{"start":{"line":159,"column":60},"end":{"line":159,"column":72}},"name":"shortenToken"},"arguments":[{"type":"Identifier","start":5648,"end":5653,"loc":{"start":{"line":159,"column":73},"end":{"line":159,"column":78}},"name":"token"}]}]}},"alternate":null}]}}]}}]},"comments":[{"type":"Block","value":"*\n     *\n     * @param {{action: string, payload: object}} data\n     ","start":5420,"end":5493,"loc":{"start":{"line":153,"column":4},"end":{"line":156,"column":7}}}]},{"type":"IfStatement","start":5819,"end":6135,"loc":{"start":{"line":165,"column":4},"end":{"line":173,"column":5}},"test":{"type":"Identifier","start":5823,"end":5834,"loc":{"start":{"line":165,"column":8},"end":{"line":165,"column":19}},"name":"redisClient"},"consequent":{"type":"BlockStatement","start":5836,"end":6135,"loc":{"start":{"line":165,"column":21},"end":{"line":173,"column":5}},"body":[{"type":"ExpressionStatement","start":5844,"end":6129,"loc":{"start":{"line":166,"column":6},"end":{"line":172,"column":8}},"expression":{"type":"CallExpression","start":5844,"end":6129,"loc":{"start":{"line":166,"column":6},"end":{"line":172,"column":8}},"callee":{"type":"MemberExpression","start":5844,"end":5859,"loc":{"start":{"line":166,"column":6},"end":{"line":166,"column":21}},"object":{"type":"Identifier","start":5844,"end":5855,"loc":{"start":{"line":166,"column":6},"end":{"line":166,"column":17}},"name":"redisClient"},"property":{"type":"Identifier","start":5856,"end":5859,"loc":{"start":{"line":166,"column":18},"end":{"line":166,"column":21}},"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":5860,"end":5888,"loc":{"start":{"line":166,"column":22},"end":{"line":166,"column":50}},"expressions":[{"type":"Identifier","start":5863,"end":5877,"loc":{"start":{"line":166,"column":25},"end":{"line":166,"column":39}},"name":"STORAGE_PREFIX"},{"type":"Identifier","start":5881,"end":5886,"loc":{"start":{"line":166,"column":43},"end":{"line":166,"column":48}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":5861,"end":5861,"loc":{"start":{"line":166,"column":23},"end":{"line":166,"column":23}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":5878,"end":5879,"loc":{"start":{"line":166,"column":40},"end":{"line":166,"column":41}},"value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","start":5887,"end":5887,"loc":{"start":{"line":166,"column":49},"end":{"line":166,"column":49}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"ArrowFunctionExpression","start":5890,"end":6128,"loc":{"start":{"line":166,"column":52},"end":{"line":172,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5891,"end":5894,"loc":{"start":{"line":166,"column":53},"end":{"line":166,"column":56}},"name":"err"},{"type":"Identifier","start":5896,"end":5900,"loc":{"start":{"line":166,"column":58},"end":{"line":166,"column":62}},"name":"data"}],"body":{"type":"BlockStatement","start":5905,"end":6128,"loc":{"start":{"line":166,"column":67},"end":{"line":172,"column":7}},"body":[{"type":"IfStatement","start":5915,"end":5984,"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":77}},"test":{"type":"Identifier","start":5919,"end":5922,"loc":{"start":{"line":167,"column":12},"end":{"line":167,"column":15}},"name":"err"},"consequent":{"type":"ExpressionStatement","start":5924,"end":5984,"loc":{"start":{"line":167,"column":17},"end":{"line":167,"column":77}},"expression":{"type":"CallExpression","start":5924,"end":5984,"loc":{"start":{"line":167,"column":17},"end":{"line":167,"column":77}},"callee":{"type":"MemberExpression","start":5924,"end":5936,"loc":{"start":{"line":167,"column":17},"end":{"line":167,"column":29}},"object":{"type":"Identifier","start":5924,"end":5930,"loc":{"start":{"line":167,"column":17},"end":{"line":167,"column":23}},"name":"logger"},"property":{"type":"Identifier","start":5931,"end":5936,"loc":{"start":{"line":167,"column":24},"end":{"line":167,"column":29}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":5937,"end":5940,"loc":{"start":{"line":167,"column":30},"end":{"line":167,"column":33}},"name":"err"},{"type":"Literal","start":5942,"end":5962,"loc":{"start":{"line":167,"column":35},"end":{"line":167,"column":55}},"value":"socket.redis.error","raw":"'socket.redis.error'"},{"type":"CallExpression","start":5964,"end":5983,"loc":{"start":{"line":167,"column":57},"end":{"line":167,"column":76}},"callee":{"type":"Identifier","start":5964,"end":5976,"loc":{"start":{"line":167,"column":57},"end":{"line":167,"column":69}},"name":"shortenToken"},"arguments":[{"type":"Identifier","start":5977,"end":5982,"loc":{"start":{"line":167,"column":70},"end":{"line":167,"column":75}},"name":"token"}]}]}},"alternate":null},{"type":"IfStatement","start":5993,"end":6120,"loc":{"start":{"line":168,"column":8},"end":{"line":171,"column":9}},"test":{"type":"Identifier","start":5997,"end":6001,"loc":{"start":{"line":168,"column":12},"end":{"line":168,"column":16}},"name":"data"},"consequent":{"type":"BlockStatement","start":6003,"end":6120,"loc":{"start":{"line":168,"column":18},"end":{"line":171,"column":9}},"body":[{"type":"VariableDeclaration","start":6015,"end":6058,"loc":{"start":{"line":169,"column":10},"end":{"line":169,"column":53}},"declarations":[{"type":"VariableDeclarator","start":6021,"end":6058,"loc":{"start":{"line":169,"column":16},"end":{"line":169,"column":53}},"id":{"type":"Identifier","start":6021,"end":6028,"loc":{"start":{"line":169,"column":16},"end":{"line":169,"column":23}},"name":"dataObj"},"init":{"type":"CallExpression","start":6031,"end":6058,"loc":{"start":{"line":169,"column":26},"end":{"line":169,"column":53}},"callee":{"type":"MemberExpression","start":6031,"end":6041,"loc":{"start":{"line":169,"column":26},"end":{"line":169,"column":36}},"object":{"type":"Identifier","start":6031,"end":6035,"loc":{"start":{"line":169,"column":26},"end":{"line":169,"column":30}},"name":"JSON"},"property":{"type":"Identifier","start":6036,"end":6041,"loc":{"start":{"line":169,"column":31},"end":{"line":169,"column":36}},"name":"parse"},"computed":false},"arguments":[{"type":"CallExpression","start":6042,"end":6057,"loc":{"start":{"line":169,"column":37},"end":{"line":169,"column":52}},"callee":{"type":"MemberExpression","start":6042,"end":6055,"loc":{"start":{"line":169,"column":37},"end":{"line":169,"column":50}},"object":{"type":"Identifier","start":6042,"end":6046,"loc":{"start":{"line":169,"column":37},"end":{"line":169,"column":41}},"name":"data"},"property":{"type":"Identifier","start":6047,"end":6055,"loc":{"start":{"line":169,"column":42},"end":{"line":169,"column":50}},"name":"toString"},"computed":false},"arguments":[]}]}}],"kind":"const"},{"type":"IfStatement","start":6069,"end":6110,"loc":{"start":{"line":170,"column":10},"end":{"line":170,"column":51}},"test":{"type":"MemberExpression","start":6073,"end":6087,"loc":{"start":{"line":170,"column":14},"end":{"line":170,"column":28}},"object":{"type":"Identifier","start":6073,"end":6080,"loc":{"start":{"line":170,"column":14},"end":{"line":170,"column":21}},"name":"dataObj"},"property":{"type":"Identifier","start":6081,"end":6087,"loc":{"start":{"line":170,"column":22},"end":{"line":170,"column":28}},"name":"action"},"computed":false},"consequent":{"type":"ExpressionStatement","start":6089,"end":6110,"loc":{"start":{"line":170,"column":30},"end":{"line":170,"column":51}},"expression":{"type":"CallExpression","start":6089,"end":6110,"loc":{"start":{"line":170,"column":30},"end":{"line":170,"column":51}},"callee":{"type":"Identifier","start":6089,"end":6101,"loc":{"start":{"line":170,"column":30},"end":{"line":170,"column":42}},"name":"sendProgress"},"arguments":[{"type":"Identifier","start":6102,"end":6109,"loc":{"start":{"line":170,"column":43},"end":{"line":170,"column":50}},"name":"dataObj"}]}},"alternate":null}]},"alternate":null}]}}]}}]},"alternate":null,"comments":[{"type":"Line","value":" if the redisClient is available, then we attempt to check the storage","start":5676,"end":5748,"loc":{"start":{"line":163,"column":4},"end":{"line":163,"column":76}}},{"type":"Line","value":" if we have any already stored progress data on the upload.","start":5753,"end":5814,"loc":{"start":{"line":164,"column":4},"end":{"line":164,"column":65}}}]},{"type":"ExpressionStatement","start":6141,"end":6178,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":41}},"expression":{"type":"CallExpression","start":6141,"end":6178,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":41}},"callee":{"type":"MemberExpression","start":6141,"end":6155,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":18}},"object":{"type":"CallExpression","start":6141,"end":6150,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":13}},"callee":{"type":"Identifier","start":6141,"end":6148,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":6151,"end":6155,"loc":{"start":{"line":175,"column":14},"end":{"line":175,"column":18}},"name":"emit"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":6156,"end":6177,"loc":{"start":{"line":175,"column":19},"end":{"line":175,"column":40}},"expressions":[{"type":"Identifier","start":6170,"end":6175,"loc":{"start":{"line":175,"column":33},"end":{"line":175,"column":38}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":6157,"end":6168,"loc":{"start":{"line":175,"column":20},"end":{"line":175,"column":31}},"value":{"raw":"connection:","cooked":"connection:"},"tail":false},{"type":"TemplateElement","start":6176,"end":6176,"loc":{"start":{"line":175,"column":39},"end":{"line":175,"column":39}},"value":{"raw":"","cooked":""},"tail":true}]}]}},{"type":"ExpressionStatement","start":6183,"end":6216,"loc":{"start":{"line":176,"column":4},"end":{"line":176,"column":37}},"expression":{"type":"CallExpression","start":6183,"end":6216,"loc":{"start":{"line":176,"column":4},"end":{"line":176,"column":37}},"callee":{"type":"MemberExpression","start":6183,"end":6195,"loc":{"start":{"line":176,"column":4},"end":{"line":176,"column":16}},"object":{"type":"CallExpression","start":6183,"end":6192,"loc":{"start":{"line":176,"column":4},"end":{"line":176,"column":13}},"callee":{"type":"Identifier","start":6183,"end":6190,"loc":{"start":{"line":176,"column":4},"end":{"line":176,"column":11}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":6193,"end":6195,"loc":{"start":{"line":176,"column":14},"end":{"line":176,"column":16}},"name":"on"},"computed":false},"arguments":[{"type":"Identifier","start":6196,"end":6201,"loc":{"start":{"line":176,"column":17},"end":{"line":176,"column":22}},"name":"token"},{"type":"Identifier","start":6203,"end":6215,"loc":{"start":{"line":176,"column":24},"end":{"line":176,"column":36}},"name":"sendProgress"}]}},{"type":"ExpressionStatement","start":6222,"end":6472,"loc":{"start":{"line":178,"column":4},"end":{"line":184,"column":6}},"expression":{"type":"CallExpression","start":6222,"end":6472,"loc":{"start":{"line":178,"column":4},"end":{"line":184,"column":6}},"callee":{"type":"MemberExpression","start":6222,"end":6227,"loc":{"start":{"line":178,"column":4},"end":{"line":178,"column":9}},"object":{"type":"Identifier","start":6222,"end":6224,"loc":{"start":{"line":178,"column":4},"end":{"line":178,"column":6}},"name":"ws"},"property":{"type":"Identifier","start":6225,"end":6227,"loc":{"start":{"line":178,"column":7},"end":{"line":178,"column":9}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":6228,"end":6237,"loc":{"start":{"line":178,"column":10},"end":{"line":178,"column":19}},"value":"message","raw":"'message'"},{"type":"ArrowFunctionExpression","start":6239,"end":6471,"loc":{"start":{"line":178,"column":21},"end":{"line":184,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6240,"end":6248,"loc":{"start":{"line":178,"column":22},"end":{"line":178,"column":30}},"name":"jsonData"}],"body":{"type":"BlockStatement","start":6253,"end":6471,"loc":{"start":{"line":178,"column":35},"end":{"line":184,"column":5}},"body":[{"type":"VariableDeclaration","start":6261,"end":6305,"loc":{"start":{"line":179,"column":6},"end":{"line":179,"column":50}},"declarations":[{"type":"VariableDeclarator","start":6267,"end":6305,"loc":{"start":{"line":179,"column":12},"end":{"line":179,"column":50}},"id":{"type":"Identifier","start":6267,"end":6271,"loc":{"start":{"line":179,"column":12},"end":{"line":179,"column":16}},"name":"data"},"init":{"type":"CallExpression","start":6274,"end":6305,"loc":{"start":{"line":179,"column":19},"end":{"line":179,"column":50}},"callee":{"type":"MemberExpression","start":6274,"end":6284,"loc":{"start":{"line":179,"column":19},"end":{"line":179,"column":29}},"object":{"type":"Identifier","start":6274,"end":6278,"loc":{"start":{"line":179,"column":19},"end":{"line":179,"column":23}},"name":"JSON"},"property":{"type":"Identifier","start":6279,"end":6284,"loc":{"start":{"line":179,"column":24},"end":{"line":179,"column":29}},"name":"parse"},"computed":false},"arguments":[{"type":"CallExpression","start":6285,"end":6304,"loc":{"start":{"line":179,"column":30},"end":{"line":179,"column":49}},"callee":{"type":"MemberExpression","start":6285,"end":6302,"loc":{"start":{"line":179,"column":30},"end":{"line":179,"column":47}},"object":{"type":"Identifier","start":6285,"end":6293,"loc":{"start":{"line":179,"column":30},"end":{"line":179,"column":38}},"name":"jsonData"},"property":{"type":"Identifier","start":6294,"end":6302,"loc":{"start":{"line":179,"column":39},"end":{"line":179,"column":47}},"name":"toString"},"computed":false},"arguments":[]}]}}],"kind":"const"},{"type":"IfStatement","start":6349,"end":6465,"loc":{"start":{"line":181,"column":6},"end":{"line":183,"column":7}},"test":{"type":"CallExpression","start":6353,"end":6404,"loc":{"start":{"line":181,"column":10},"end":{"line":181,"column":61}},"callee":{"type":"MemberExpression","start":6353,"end":6391,"loc":{"start":{"line":181,"column":10},"end":{"line":181,"column":48}},"object":{"type":"ArrayExpression","start":6353,"end":6382,"loc":{"start":{"line":181,"column":10},"end":{"line":181,"column":39}},"elements":[{"type":"Literal","start":6354,"end":6361,"loc":{"start":{"line":181,"column":11},"end":{"line":181,"column":18}},"value":"pause","raw":"'pause'"},{"type":"Literal","start":6363,"end":6371,"loc":{"start":{"line":181,"column":20},"end":{"line":181,"column":28}},"value":"resume","raw":"'resume'"},{"type":"Literal","start":6373,"end":6381,"loc":{"start":{"line":181,"column":30},"end":{"line":181,"column":38}},"value":"cancel","raw":"'cancel'"}]},"property":{"type":"Identifier","start":6383,"end":6391,"loc":{"start":{"line":181,"column":40},"end":{"line":181,"column":48}},"name":"includes"},"computed":false},"arguments":[{"type":"MemberExpression","start":6392,"end":6403,"loc":{"start":{"line":181,"column":49},"end":{"line":181,"column":60}},"object":{"type":"Identifier","start":6392,"end":6396,"loc":{"start":{"line":181,"column":49},"end":{"line":181,"column":53}},"name":"data"},"property":{"type":"Identifier","start":6397,"end":6403,"loc":{"start":{"line":181,"column":54},"end":{"line":181,"column":60}},"name":"action"},"computed":false}]},"consequent":{"type":"BlockStatement","start":6406,"end":6465,"loc":{"start":{"line":181,"column":63},"end":{"line":183,"column":7}},"body":[{"type":"ExpressionStatement","start":6416,"end":6457,"loc":{"start":{"line":182,"column":8},"end":{"line":182,"column":49}},"expression":{"type":"CallExpression","start":6416,"end":6457,"loc":{"start":{"line":182,"column":8},"end":{"line":182,"column":49}},"callee":{"type":"MemberExpression","start":6416,"end":6430,"loc":{"start":{"line":182,"column":8},"end":{"line":182,"column":22}},"object":{"type":"CallExpression","start":6416,"end":6425,"loc":{"start":{"line":182,"column":8},"end":{"line":182,"column":17}},"callee":{"type":"Identifier","start":6416,"end":6423,"loc":{"start":{"line":182,"column":8},"end":{"line":182,"column":15}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":6426,"end":6430,"loc":{"start":{"line":182,"column":18},"end":{"line":182,"column":22}},"name":"emit"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":6431,"end":6456,"loc":{"start":{"line":182,"column":23},"end":{"line":182,"column":48}},"expressions":[{"type":"MemberExpression","start":6434,"end":6445,"loc":{"start":{"line":182,"column":26},"end":{"line":182,"column":37}},"object":{"type":"Identifier","start":6434,"end":6438,"loc":{"start":{"line":182,"column":26},"end":{"line":182,"column":30}},"name":"data"},"property":{"type":"Identifier","start":6439,"end":6445,"loc":{"start":{"line":182,"column":31},"end":{"line":182,"column":37}},"name":"action"},"computed":false},{"type":"Identifier","start":6449,"end":6454,"loc":{"start":{"line":182,"column":41},"end":{"line":182,"column":46}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":6432,"end":6432,"loc":{"start":{"line":182,"column":24},"end":{"line":182,"column":24}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":6446,"end":6447,"loc":{"start":{"line":182,"column":38},"end":{"line":182,"column":39}},"value":{"raw":":","cooked":":"},"tail":false},{"type":"TemplateElement","start":6455,"end":6455,"loc":{"start":{"line":182,"column":47},"end":{"line":182,"column":47}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]},"alternate":null,"comments":[{"type":"Line","value":" whitelist triggered actions","start":6312,"end":6342,"loc":{"start":{"line":180,"column":6},"end":{"line":180,"column":36}}}]}]}}]}},{"type":"ExpressionStatement","start":6478,"end":6559,"loc":{"start":{"line":186,"column":4},"end":{"line":188,"column":6}},"expression":{"type":"CallExpression","start":6478,"end":6559,"loc":{"start":{"line":186,"column":4},"end":{"line":188,"column":6}},"callee":{"type":"MemberExpression","start":6478,"end":6483,"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":9}},"object":{"type":"Identifier","start":6478,"end":6480,"loc":{"start":{"line":186,"column":4},"end":{"line":186,"column":6}},"name":"ws"},"property":{"type":"Identifier","start":6481,"end":6483,"loc":{"start":{"line":186,"column":7},"end":{"line":186,"column":9}},"name":"on"},"computed":false},"arguments":[{"type":"Literal","start":6484,"end":6491,"loc":{"start":{"line":186,"column":10},"end":{"line":186,"column":17}},"value":"close","raw":"'close'"},{"type":"ArrowFunctionExpression","start":6493,"end":6558,"loc":{"start":{"line":186,"column":19},"end":{"line":188,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":6499,"end":6558,"loc":{"start":{"line":186,"column":25},"end":{"line":188,"column":5}},"body":[{"type":"ExpressionStatement","start":6507,"end":6552,"loc":{"start":{"line":187,"column":6},"end":{"line":187,"column":51}},"expression":{"type":"CallExpression","start":6507,"end":6552,"loc":{"start":{"line":187,"column":6},"end":{"line":187,"column":51}},"callee":{"type":"MemberExpression","start":6507,"end":6531,"loc":{"start":{"line":187,"column":6},"end":{"line":187,"column":30}},"object":{"type":"CallExpression","start":6507,"end":6516,"loc":{"start":{"line":187,"column":6},"end":{"line":187,"column":15}},"callee":{"type":"Identifier","start":6507,"end":6514,"loc":{"start":{"line":187,"column":6},"end":{"line":187,"column":13}},"name":"emitter"},"arguments":[]},"property":{"type":"Identifier","start":6517,"end":6531,"loc":{"start":{"line":187,"column":16},"end":{"line":187,"column":30}},"name":"removeListener"},"computed":false},"arguments":[{"type":"Identifier","start":6532,"end":6537,"loc":{"start":{"line":187,"column":31},"end":{"line":187,"column":36}},"name":"token"},{"type":"Identifier","start":6539,"end":6551,"loc":{"start":{"line":187,"column":38},"end":{"line":187,"column":50}},"name":"sendProgress"}]}}]}}]}}]}}]},"comments":[{"type":"Line","value":" A new connection is usually created when an upload begins,","start":4935,"end":4996,"loc":{"start":{"line":142,"column":2},"end":{"line":142,"column":63}}},{"type":"Line","value":" or when connection fails while an upload is on-going and,","start":4999,"end":5059,"loc":{"start":{"line":143,"column":2},"end":{"line":143,"column":62}}},{"type":"Line","value":" client attempts to reconnect.","start":5062,"end":5094,"loc":{"start":{"line":144,"column":2},"end":{"line":144,"column":34}}}]}]}}},"comments":[{"type":"Block","value":"*\n * the socket is used to send progress events during an upload\n *\n * @param {object} server\n ","start":4714,"end":4813,"loc":{"start":{"line":133,"column":0},"end":{"line":137,"column":3}}}]},{"type":"VariableDeclaration","start":6665,"end":7488,"loc":{"start":{"line":194,"column":0},"end":{"line":216,"column":2}},"declarations":[{"type":"VariableDeclarator","start":6671,"end":7488,"loc":{"start":{"line":194,"column":6},"end":{"line":216,"column":2}},"id":{"type":"Identifier","start":6671,"end":6698,"loc":{"start":{"line":194,"column":6},"end":{"line":194,"column":33}},"name":"interceptGrantErrorResponse"},"init":{"type":"CallExpression","start":6701,"end":7488,"loc":{"start":{"line":194,"column":36},"end":{"line":216,"column":2}},"callee":{"type":"Identifier","start":6701,"end":6712,"loc":{"start":{"line":194,"column":36},"end":{"line":194,"column":47}},"name":"interceptor"},"arguments":[{"type":"ArrowFunctionExpression","start":6713,"end":7487,"loc":{"start":{"line":194,"column":48},"end":{"line":216,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6714,"end":6717,"loc":{"start":{"line":194,"column":49},"end":{"line":194,"column":52}},"name":"req"},{"type":"Identifier","start":6719,"end":6722,"loc":{"start":{"line":194,"column":54},"end":{"line":194,"column":57}},"name":"res"}],"body":{"type":"BlockStatement","start":6727,"end":7487,"loc":{"start":{"line":194,"column":62},"end":{"line":216,"column":1}},"body":[{"type":"ReturnStatement","start":6731,"end":7485,"loc":{"start":{"line":195,"column":2},"end":{"line":215,"column":3}},"argument":{"type":"ObjectExpression","start":6738,"end":7485,"loc":{"start":{"line":195,"column":9},"end":{"line":215,"column":3}},"properties":[{"type":"Property","start":6744,"end":6868,"loc":{"start":{"line":196,"column":4},"end":{"line":199,"column":5}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6744,"end":6759,"loc":{"start":{"line":196,"column":4},"end":{"line":196,"column":19}},"name":"isInterceptable"},"value":{"type":"ArrowFunctionExpression","start":6761,"end":6868,"loc":{"start":{"line":196,"column":21},"end":{"line":199,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":6767,"end":6868,"loc":{"start":{"line":196,"column":27},"end":{"line":199,"column":5}},"body":[{"type":"ReturnStatement","start":6813,"end":6862,"loc":{"start":{"line":198,"column":6},"end":{"line":198,"column":55}},"argument":{"type":"CallExpression","start":6820,"end":6862,"loc":{"start":{"line":198,"column":13},"end":{"line":198,"column":55}},"callee":{"type":"MemberExpression","start":6820,"end":6852,"loc":{"start":{"line":198,"column":13},"end":{"line":198,"column":45}},"object":{"type":"Literal","start":6820,"end":6847,"loc":{"start":{"line":198,"column":13},"end":{"line":198,"column":40}},"value":{},"raw":"/^\\/connect\\/\\w+\\/callback/","regex":{"pattern":"^\\/connect\\/\\w+\\/callback","flags":""}},"property":{"type":"Identifier","start":6848,"end":6852,"loc":{"start":{"line":198,"column":41},"end":{"line":198,"column":45}},"name":"test"},"computed":false},"arguments":[{"type":"MemberExpression","start":6853,"end":6861,"loc":{"start":{"line":198,"column":46},"end":{"line":198,"column":54}},"object":{"type":"Identifier","start":6853,"end":6856,"loc":{"start":{"line":198,"column":46},"end":{"line":198,"column":49}},"name":"req"},"property":{"type":"Identifier","start":6857,"end":6861,"loc":{"start":{"line":198,"column":50},"end":{"line":198,"column":54}},"name":"path"},"computed":false}]},"comments":[{"type":"Line","value":" match grant.js' callback url","start":6775,"end":6806,"loc":{"start":{"line":197,"column":6},"end":{"line":197,"column":37}}}]}]}},"kind":"init"},{"type":"Property","start":6874,"end":7481,"loc":{"start":{"line":200,"column":4},"end":{"line":214,"column":5}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6874,"end":6883,"loc":{"start":{"line":200,"column":4},"end":{"line":200,"column":13}},"name":"intercept"},"value":{"type":"ArrowFunctionExpression","start":6885,"end":7481,"loc":{"start":{"line":200,"column":15},"end":{"line":214,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6886,"end":6890,"loc":{"start":{"line":200,"column":16},"end":{"line":200,"column":20}},"name":"body"},{"type":"Identifier","start":6892,"end":6896,"loc":{"start":{"line":200,"column":22},"end":{"line":200,"column":26}},"name":"send"}],"body":{"type":"BlockStatement","start":6901,"end":7481,"loc":{"start":{"line":200,"column":31},"end":{"line":214,"column":5}},"body":[{"type":"VariableDeclaration","start":6909,"end":6998,"loc":{"start":{"line":201,"column":6},"end":{"line":201,"column":95}},"declarations":[{"type":"VariableDeclarator","start":6915,"end":6998,"loc":{"start":{"line":201,"column":12},"end":{"line":201,"column":95}},"id":{"type":"Identifier","start":6915,"end":6927,"loc":{"start":{"line":201,"column":12},"end":{"line":201,"column":24}},"name":"unwantedBody"},"init":{"type":"Literal","start":6930,"end":6998,"loc":{"start":{"line":201,"column":27},"end":{"line":201,"column":95}},"value":"error=Grant%3A%20missing%20session%20or%20misconfigured%20provider","raw":"'error=Grant%3A%20missing%20session%20or%20misconfigured%20provider'"}}],"kind":"const"},{"type":"IfStatement","start":7005,"end":7475,"loc":{"start":{"line":202,"column":6},"end":{"line":213,"column":7}},"test":{"type":"BinaryExpression","start":7009,"end":7030,"loc":{"start":{"line":202,"column":10},"end":{"line":202,"column":31}},"left":{"type":"Identifier","start":7009,"end":7013,"loc":{"start":{"line":202,"column":10},"end":{"line":202,"column":14}},"name":"body"},"operator":"===","right":{"type":"Identifier","start":7018,"end":7030,"loc":{"start":{"line":202,"column":19},"end":{"line":202,"column":31}},"name":"unwantedBody"}},"consequent":{"type":"BlockStatement","start":7032,"end":7441,"loc":{"start":{"line":202,"column":33},"end":{"line":211,"column":7}},"body":[{"type":"ExpressionStatement","start":7042,"end":7125,"loc":{"start":{"line":203,"column":8},"end":{"line":203,"column":91}},"expression":{"type":"CallExpression","start":7042,"end":7125,"loc":{"start":{"line":203,"column":8},"end":{"line":203,"column":91}},"callee":{"type":"MemberExpression","start":7042,"end":7054,"loc":{"start":{"line":203,"column":8},"end":{"line":203,"column":20}},"object":{"type":"Identifier","start":7042,"end":7048,"loc":{"start":{"line":203,"column":8},"end":{"line":203,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":7049,"end":7054,"loc":{"start":{"line":203,"column":15},"end":{"line":203,"column":20}},"name":"error"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7055,"end":7095,"loc":{"start":{"line":203,"column":21},"end":{"line":203,"column":61}},"expressions":[{"type":"Identifier","start":7089,"end":7093,"loc":{"start":{"line":203,"column":55},"end":{"line":203,"column":59}},"name":"body"}],"quasis":[{"type":"TemplateElement","start":7056,"end":7087,"loc":{"start":{"line":203,"column":22},"end":{"line":203,"column":53}},"value":{"raw":"grant.js responded with error: ","cooked":"grant.js responded with error: "},"tail":false},{"type":"TemplateElement","start":7094,"end":7094,"loc":{"start":{"line":203,"column":60},"end":{"line":203,"column":60}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":7097,"end":7116,"loc":{"start":{"line":203,"column":63},"end":{"line":203,"column":82}},"value":"grant.oauth.error","raw":"'grant.oauth.error'"},{"type":"MemberExpression","start":7118,"end":7124,"loc":{"start":{"line":203,"column":84},"end":{"line":203,"column":90}},"object":{"type":"Identifier","start":7118,"end":7121,"loc":{"start":{"line":203,"column":84},"end":{"line":203,"column":87}},"name":"req"},"property":{"type":"Identifier","start":7122,"end":7124,"loc":{"start":{"line":203,"column":88},"end":{"line":203,"column":90}},"name":"id"},"computed":false}]}},{"type":"ExpressionStatement","start":7134,"end":7171,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":45}},"expression":{"type":"CallExpression","start":7134,"end":7171,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":45}},"callee":{"type":"MemberExpression","start":7134,"end":7141,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":15}},"object":{"type":"Identifier","start":7134,"end":7137,"loc":{"start":{"line":204,"column":8},"end":{"line":204,"column":11}},"name":"res"},"property":{"type":"Identifier","start":7138,"end":7141,"loc":{"start":{"line":204,"column":12},"end":{"line":204,"column":15}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":7142,"end":7156,"loc":{"start":{"line":204,"column":16},"end":{"line":204,"column":30}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":7158,"end":7170,"loc":{"start":{"line":204,"column":32},"end":{"line":204,"column":44}},"value":"text/plain","raw":"'text/plain'"}]}},{"type":"VariableDeclaration","start":7180,"end":7233,"loc":{"start":{"line":205,"column":8},"end":{"line":205,"column":61}},"declarations":[{"type":"VariableDeclarator","start":7186,"end":7233,"loc":{"start":{"line":205,"column":14},"end":{"line":205,"column":61}},"id":{"type":"Identifier","start":7186,"end":7193,"loc":{"start":{"line":205,"column":14},"end":{"line":205,"column":21}},"name":"reqHint"},"init":{"type":"ConditionalExpression","start":7196,"end":7233,"loc":{"start":{"line":205,"column":24},"end":{"line":205,"column":61}},"test":{"type":"MemberExpression","start":7196,"end":7202,"loc":{"start":{"line":205,"column":24},"end":{"line":205,"column":30}},"object":{"type":"Identifier","start":7196,"end":7199,"loc":{"start":{"line":205,"column":24},"end":{"line":205,"column":27}},"name":"req"},"property":{"type":"Identifier","start":7200,"end":7202,"loc":{"start":{"line":205,"column":28},"end":{"line":205,"column":30}},"name":"id"},"computed":false},"consequent":{"type":"TemplateLiteral","start":7205,"end":7228,"loc":{"start":{"line":205,"column":33},"end":{"line":205,"column":56}},"expressions":[{"type":"MemberExpression","start":7220,"end":7226,"loc":{"start":{"line":205,"column":48},"end":{"line":205,"column":54}},"object":{"type":"Identifier","start":7220,"end":7223,"loc":{"start":{"line":205,"column":48},"end":{"line":205,"column":51}},"name":"req"},"property":{"type":"Identifier","start":7224,"end":7226,"loc":{"start":{"line":205,"column":52},"end":{"line":205,"column":54}},"name":"id"},"computed":false}],"quasis":[{"type":"TemplateElement","start":7206,"end":7218,"loc":{"start":{"line":205,"column":34},"end":{"line":205,"column":46}},"value":{"raw":"Request ID: ","cooked":"Request ID: "},"tail":false},{"type":"TemplateElement","start":7227,"end":7227,"loc":{"start":{"line":205,"column":55},"end":{"line":205,"column":55}},"value":{"raw":"","cooked":""},"tail":true}]},"alternate":{"type":"Literal","start":7231,"end":7233,"loc":{"start":{"line":205,"column":59},"end":{"line":205,"column":61}},"value":"","raw":"''"}}}],"kind":"const"},{"type":"ExpressionStatement","start":7242,"end":7433,"loc":{"start":{"line":206,"column":8},"end":{"line":210,"column":21}},"expression":{"type":"CallExpression","start":7242,"end":7433,"loc":{"start":{"line":206,"column":8},"end":{"line":210,"column":21}},"callee":{"type":"Identifier","start":7242,"end":7246,"loc":{"start":{"line":206,"column":8},"end":{"line":206,"column":12}},"name":"send"},"arguments":[{"type":"CallExpression","start":7247,"end":7432,"loc":{"start":{"line":206,"column":13},"end":{"line":210,"column":20}},"callee":{"type":"MemberExpression","start":7247,"end":7426,"loc":{"start":{"line":206,"column":13},"end":{"line":210,"column":14}},"object":{"type":"ArrayExpression","start":7247,"end":7421,"loc":{"start":{"line":206,"column":13},"end":{"line":210,"column":9}},"elements":[{"type":"Literal","start":7259,"end":7314,"loc":{"start":{"line":207,"column":10},"end":{"line":207,"column":65}},"value":"Companion was unable to complete the OAuth process :(","raw":"'Companion was unable to complete the OAuth process :('"},{"type":"Literal","start":7326,"end":7392,"loc":{"start":{"line":208,"column":10},"end":{"line":208,"column":76}},"value":"Error: User session is missing or the Provider was misconfigured","raw":"'Error: User session is missing or the Provider was misconfigured'"},{"type":"Identifier","start":7404,"end":7411,"loc":{"start":{"line":209,"column":10},"end":{"line":209,"column":17}},"name":"reqHint"}]},"property":{"type":"Identifier","start":7422,"end":7426,"loc":{"start":{"line":210,"column":10},"end":{"line":210,"column":14}},"name":"join"},"computed":false},"arguments":[{"type":"Literal","start":7427,"end":7431,"loc":{"start":{"line":210,"column":15},"end":{"line":210,"column":19}},"value":"\n","raw":"'\\n'"}]}]}}]},"alternate":{"type":"BlockStatement","start":7447,"end":7475,"loc":{"start":{"line":211,"column":13},"end":{"line":213,"column":7}},"body":[{"type":"ExpressionStatement","start":7457,"end":7467,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":18}},"expression":{"type":"CallExpression","start":7457,"end":7467,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":18}},"callee":{"type":"Identifier","start":7457,"end":7461,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":12}},"name":"send"},"arguments":[{"type":"Identifier","start":7462,"end":7466,"loc":{"start":{"line":212,"column":13},"end":{"line":212,"column":17}},"name":"body"}]}}]}}]}},"kind":"init"}]}}]}}]}}],"kind":"const","comments":[{"type":"Line","value":" intercepts grantJS' default response error when something goes","start":6568,"end":6633,"loc":{"start":{"line":192,"column":0},"end":{"line":192,"column":65}}},{"type":"Line","value":" wrong during oauth process.","start":6634,"end":6664,"loc":{"start":{"line":193,"column":0},"end":{"line":193,"column":30}}}]},{"type":"VariableDeclaration","start":7528,"end":9983,"loc":{"start":{"line":222,"column":0},"end":{"line":278,"column":1}},"declarations":[{"type":"VariableDeclarator","start":7534,"end":9983,"loc":{"start":{"line":222,"column":6},"end":{"line":278,"column":1}},"id":{"type":"Identifier","start":7534,"end":7554,"loc":{"start":{"line":222,"column":6},"end":{"line":222,"column":26}},"name":"getOptionsMiddleware"},"init":{"type":"ArrowFunctionExpression","start":7557,"end":9983,"loc":{"start":{"line":222,"column":29},"end":{"line":278,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7558,"end":7565,"loc":{"start":{"line":222,"column":30},"end":{"line":222,"column":37}},"name":"options"}],"body":{"type":"BlockStatement","start":7570,"end":9983,"loc":{"start":{"line":222,"column":42},"end":{"line":278,"column":1}},"body":[{"type":"VariableDeclaration","start":7574,"end":7593,"loc":{"start":{"line":223,"column":2},"end":{"line":223,"column":21}},"declarations":[{"type":"VariableDeclarator","start":7578,"end":7593,"loc":{"start":{"line":223,"column":6},"end":{"line":223,"column":21}},"id":{"type":"Identifier","start":7578,"end":7586,"loc":{"start":{"line":223,"column":6},"end":{"line":223,"column":14}},"name":"s3Client"},"init":{"type":"Literal","start":7589,"end":7593,"loc":{"start":{"line":223,"column":17},"end":{"line":223,"column":21}},"value":null,"raw":"null"}}],"kind":"let"},{"type":"IfStatement","start":7596,"end":9354,"loc":{"start":{"line":224,"column":2},"end":{"line":256,"column":3}},"test":{"type":"MemberExpression","start":7600,"end":7626,"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":32}},"object":{"type":"MemberExpression","start":7600,"end":7623,"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":29}},"object":{"type":"Identifier","start":7600,"end":7607,"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":13}},"name":"options"},"property":{"type":"Identifier","start":7608,"end":7623,"loc":{"start":{"line":224,"column":14},"end":{"line":224,"column":29}},"name":"providerOptions"},"computed":false},"property":{"type":"Identifier","start":7624,"end":7626,"loc":{"start":{"line":224,"column":30},"end":{"line":224,"column":32}},"name":"s3"},"computed":false},"consequent":{"type":"BlockStatement","start":7628,"end":9354,"loc":{"start":{"line":224,"column":34},"end":{"line":256,"column":3}},"body":[{"type":"VariableDeclaration","start":7634,"end":7674,"loc":{"start":{"line":225,"column":4},"end":{"line":225,"column":44}},"declarations":[{"type":"VariableDeclarator","start":7640,"end":7674,"loc":{"start":{"line":225,"column":10},"end":{"line":225,"column":44}},"id":{"type":"Identifier","start":7640,"end":7642,"loc":{"start":{"line":225,"column":10},"end":{"line":225,"column":12}},"name":"S3"},"init":{"type":"CallExpression","start":7645,"end":7674,"loc":{"start":{"line":225,"column":15},"end":{"line":225,"column":44}},"callee":{"type":"Identifier","start":7645,"end":7652,"loc":{"start":{"line":225,"column":15},"end":{"line":225,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":7653,"end":7673,"loc":{"start":{"line":225,"column":23},"end":{"line":225,"column":43}},"value":"aws-sdk/clients/s3","raw":"'aws-sdk/clients/s3'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":7679,"end":7709,"loc":{"start":{"line":226,"column":4},"end":{"line":226,"column":34}},"declarations":[{"type":"VariableDeclarator","start":7685,"end":7709,"loc":{"start":{"line":226,"column":10},"end":{"line":226,"column":34}},"id":{"type":"Identifier","start":7685,"end":7688,"loc":{"start":{"line":226,"column":10},"end":{"line":226,"column":13}},"name":"AWS"},"init":{"type":"CallExpression","start":7691,"end":7709,"loc":{"start":{"line":226,"column":16},"end":{"line":226,"column":34}},"callee":{"type":"Identifier","start":7691,"end":7698,"loc":{"start":{"line":226,"column":16},"end":{"line":226,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":7699,"end":7708,"loc":{"start":{"line":226,"column":24},"end":{"line":226,"column":33}},"value":"aws-sdk","raw":"'aws-sdk'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":7714,"end":7766,"loc":{"start":{"line":227,"column":4},"end":{"line":227,"column":56}},"declarations":[{"type":"VariableDeclarator","start":7720,"end":7766,"loc":{"start":{"line":227,"column":10},"end":{"line":227,"column":56}},"id":{"type":"Identifier","start":7720,"end":7737,"loc":{"start":{"line":227,"column":10},"end":{"line":227,"column":27}},"name":"s3ProviderOptions"},"init":{"type":"MemberExpression","start":7740,"end":7766,"loc":{"start":{"line":227,"column":30},"end":{"line":227,"column":56}},"object":{"type":"MemberExpression","start":7740,"end":7763,"loc":{"start":{"line":227,"column":30},"end":{"line":227,"column":53}},"object":{"type":"Identifier","start":7740,"end":7747,"loc":{"start":{"line":227,"column":30},"end":{"line":227,"column":37}},"name":"options"},"property":{"type":"Identifier","start":7748,"end":7763,"loc":{"start":{"line":227,"column":38},"end":{"line":227,"column":53}},"name":"providerOptions"},"computed":false},"property":{"type":"Identifier","start":7764,"end":7766,"loc":{"start":{"line":227,"column":54},"end":{"line":227,"column":56}},"name":"s3"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":7772,"end":8145,"loc":{"start":{"line":229,"column":4},"end":{"line":231,"column":5}},"test":{"type":"LogicalExpression","start":7776,"end":7842,"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":74}},"left":{"type":"MemberExpression","start":7776,"end":7805,"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":37}},"object":{"type":"Identifier","start":7776,"end":7793,"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":25}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":7794,"end":7805,"loc":{"start":{"line":229,"column":26},"end":{"line":229,"column":37}},"name":"accessKeyId"},"computed":false},"operator":"||","right":{"type":"MemberExpression","start":7809,"end":7842,"loc":{"start":{"line":229,"column":41},"end":{"line":229,"column":74}},"object":{"type":"Identifier","start":7809,"end":7826,"loc":{"start":{"line":229,"column":41},"end":{"line":229,"column":58}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":7827,"end":7842,"loc":{"start":{"line":229,"column":59},"end":{"line":229,"column":74}},"name":"secretAccessKey"},"computed":false}},"consequent":{"type":"BlockStatement","start":7844,"end":8145,"loc":{"start":{"line":229,"column":76},"end":{"line":231,"column":5}},"body":[{"type":"ThrowStatement","start":7852,"end":8139,"loc":{"start":{"line":230,"column":6},"end":{"line":230,"column":293}},"argument":{"type":"NewExpression","start":7858,"end":8139,"loc":{"start":{"line":230,"column":12},"end":{"line":230,"column":293}},"callee":{"type":"Identifier","start":7862,"end":7867,"loc":{"start":{"line":230,"column":16},"end":{"line":230,"column":21}},"name":"Error"},"arguments":[{"type":"Literal","start":7868,"end":8138,"loc":{"start":{"line":230,"column":22},"end":{"line":230,"column":292}},"value":"Found `providerOptions.s3.accessKeyId` or `providerOptions.s3.secretAccessKey` configuration, but Companion requires `key` and `secret` option names instead. Please use the `key` property instead of `accessKeyId` and the `secret` property instead of `secretAccessKey`.","raw":"'Found `providerOptions.s3.accessKeyId` or `providerOptions.s3.secretAccessKey` configuration, but Companion requires `key` and `secret` option names instead. Please use the `key` property instead of `accessKeyId` and the `secret` property instead of `secretAccessKey`.'"}]}}]},"alternate":null},{"type":"VariableDeclaration","start":8151,"end":8210,"loc":{"start":{"line":233,"column":4},"end":{"line":233,"column":63}},"declarations":[{"type":"VariableDeclarator","start":8157,"end":8210,"loc":{"start":{"line":233,"column":10},"end":{"line":233,"column":63}},"id":{"type":"Identifier","start":8157,"end":8173,"loc":{"start":{"line":233,"column":10},"end":{"line":233,"column":26}},"name":"rawClientOptions"},"init":{"type":"MemberExpression","start":8176,"end":8210,"loc":{"start":{"line":233,"column":29},"end":{"line":233,"column":63}},"object":{"type":"Identifier","start":8176,"end":8193,"loc":{"start":{"line":233,"column":29},"end":{"line":233,"column":46}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":8194,"end":8210,"loc":{"start":{"line":233,"column":47},"end":{"line":233,"column":63}},"name":"awsClientOptions"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":8215,"end":8568,"loc":{"start":{"line":234,"column":4},"end":{"line":236,"column":5}},"test":{"type":"LogicalExpression","start":8219,"end":8305,"loc":{"start":{"line":234,"column":8},"end":{"line":234,"column":94}},"left":{"type":"Identifier","start":8219,"end":8235,"loc":{"start":{"line":234,"column":8},"end":{"line":234,"column":24}},"name":"rawClientOptions"},"operator":"&&","right":{"type":"LogicalExpression","start":8240,"end":8304,"loc":{"start":{"line":234,"column":29},"end":{"line":234,"column":93}},"left":{"type":"MemberExpression","start":8240,"end":8268,"loc":{"start":{"line":234,"column":29},"end":{"line":234,"column":57}},"object":{"type":"Identifier","start":8240,"end":8256,"loc":{"start":{"line":234,"column":29},"end":{"line":234,"column":45}},"name":"rawClientOptions"},"property":{"type":"Identifier","start":8257,"end":8268,"loc":{"start":{"line":234,"column":46},"end":{"line":234,"column":57}},"name":"accessKeyId"},"computed":false},"operator":"||","right":{"type":"MemberExpression","start":8272,"end":8304,"loc":{"start":{"line":234,"column":61},"end":{"line":234,"column":93}},"object":{"type":"Identifier","start":8272,"end":8288,"loc":{"start":{"line":234,"column":61},"end":{"line":234,"column":77}},"name":"rawClientOptions"},"property":{"type":"Identifier","start":8289,"end":8304,"loc":{"start":{"line":234,"column":78},"end":{"line":234,"column":93}},"name":"secretAccessKey"},"computed":false}}},"consequent":{"type":"BlockStatement","start":8307,"end":8568,"loc":{"start":{"line":234,"column":96},"end":{"line":236,"column":5}},"body":[{"type":"ThrowStatement","start":8315,"end":8562,"loc":{"start":{"line":235,"column":6},"end":{"line":235,"column":253}},"argument":{"type":"NewExpression","start":8321,"end":8562,"loc":{"start":{"line":235,"column":12},"end":{"line":235,"column":253}},"callee":{"type":"Identifier","start":8325,"end":8330,"loc":{"start":{"line":235,"column":16},"end":{"line":235,"column":21}},"name":"Error"},"arguments":[{"type":"Literal","start":8331,"end":8561,"loc":{"start":{"line":235,"column":22},"end":{"line":235,"column":252}},"value":"Found unsupported `providerOptions.s3.awsClientOptions.accessKeyId` or `providerOptions.s3.awsClientOptions.secretAccessKey` configuration. Please use the `providerOptions.s3.key` and `providerOptions.s3.secret` options instead.","raw":"'Found unsupported `providerOptions.s3.awsClientOptions.accessKeyId` or `providerOptions.s3.awsClientOptions.secretAccessKey` configuration. Please use the `providerOptions.s3.key` and `providerOptions.s3.secret` options instead.'"}]}}]},"alternate":null},{"type":"VariableDeclaration","start":8574,"end":8847,"loc":{"start":{"line":238,"column":4},"end":{"line":244,"column":24}},"declarations":[{"type":"VariableDeclarator","start":8580,"end":8847,"loc":{"start":{"line":238,"column":10},"end":{"line":244,"column":24}},"id":{"type":"Identifier","start":8580,"end":8595,"loc":{"start":{"line":238,"column":10},"end":{"line":238,"column":25}},"name":"s3ClientOptions"},"init":{"type":"CallExpression","start":8598,"end":8847,"loc":{"start":{"line":238,"column":28},"end":{"line":244,"column":24}},"callee":{"type":"MemberExpression","start":8598,"end":8611,"loc":{"start":{"line":238,"column":28},"end":{"line":238,"column":41}},"object":{"type":"Identifier","start":8598,"end":8604,"loc":{"start":{"line":238,"column":28},"end":{"line":238,"column":34}},"name":"Object"},"property":{"type":"Identifier","start":8605,"end":8611,"loc":{"start":{"line":238,"column":35},"end":{"line":238,"column":41}},"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":8612,"end":8828,"loc":{"start":{"line":238,"column":42},"end":{"line":244,"column":5}},"properties":[{"type":"Property","start":8620,"end":8642,"loc":{"start":{"line":239,"column":6},"end":{"line":239,"column":28}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8620,"end":8636,"loc":{"start":{"line":239,"column":6},"end":{"line":239,"column":22}},"name":"signatureVersion"},"value":{"type":"Literal","start":8638,"end":8642,"loc":{"start":{"line":239,"column":24},"end":{"line":239,"column":28}},"value":"v4","raw":"'v4'"},"kind":"init"},{"type":"Property","start":8650,"end":8686,"loc":{"start":{"line":240,"column":6},"end":{"line":240,"column":42}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8650,"end":8658,"loc":{"start":{"line":240,"column":6},"end":{"line":240,"column":14}},"name":"endpoint"},"value":{"type":"MemberExpression","start":8660,"end":8686,"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":42}},"object":{"type":"Identifier","start":8660,"end":8677,"loc":{"start":{"line":240,"column":16},"end":{"line":240,"column":33}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":8678,"end":8686,"loc":{"start":{"line":240,"column":34},"end":{"line":240,"column":42}},"name":"endpoint"},"computed":false},"kind":"init"},{"type":"Property","start":8694,"end":8726,"loc":{"start":{"line":241,"column":6},"end":{"line":241,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8694,"end":8700,"loc":{"start":{"line":241,"column":6},"end":{"line":241,"column":12}},"name":"region"},"value":{"type":"MemberExpression","start":8702,"end":8726,"loc":{"start":{"line":241,"column":14},"end":{"line":241,"column":38}},"object":{"type":"Identifier","start":8702,"end":8719,"loc":{"start":{"line":241,"column":14},"end":{"line":241,"column":31}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":8720,"end":8726,"loc":{"start":{"line":241,"column":32},"end":{"line":241,"column":38}},"name":"region"},"computed":false},"kind":"init"},{"type":"Property","start":8760,"end":8822,"loc":{"start":{"line":243,"column":6},"end":{"line":243,"column":68}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8760,"end":8781,"loc":{"start":{"line":243,"column":6},"end":{"line":243,"column":27}},"name":"useAccelerateEndpoint"},"value":{"type":"MemberExpression","start":8783,"end":8822,"loc":{"start":{"line":243,"column":29},"end":{"line":243,"column":68}},"object":{"type":"Identifier","start":8783,"end":8800,"loc":{"start":{"line":243,"column":29},"end":{"line":243,"column":46}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":8801,"end":8822,"loc":{"start":{"line":243,"column":47},"end":{"line":243,"column":68}},"name":"useAccelerateEndpoint"},"computed":false},"kind":"init","comments":[{"type":"Line","value":" backwards compat","start":8734,"end":8753,"loc":{"start":{"line":242,"column":6},"end":{"line":242,"column":25}}}]}]},{"type":"Identifier","start":8830,"end":8846,"loc":{"start":{"line":244,"column":7},"end":{"line":244,"column":23}},"name":"rawClientOptions"}]}}],"kind":"const"},{"type":"IfStatement","start":9055,"end":9311,"loc":{"start":{"line":249,"column":4},"end":{"line":254,"column":5}},"test":{"type":"LogicalExpression","start":9059,"end":9140,"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":89}},"left":{"type":"LogicalExpression","start":9059,"end":9108,"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":57}},"left":{"type":"MemberExpression","start":9059,"end":9080,"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":29}},"object":{"type":"Identifier","start":9059,"end":9076,"loc":{"start":{"line":249,"column":8},"end":{"line":249,"column":25}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":9077,"end":9080,"loc":{"start":{"line":249,"column":26},"end":{"line":249,"column":29}},"name":"key"},"computed":false},"operator":"&&","right":{"type":"MemberExpression","start":9084,"end":9108,"loc":{"start":{"line":249,"column":33},"end":{"line":249,"column":57}},"object":{"type":"Identifier","start":9084,"end":9101,"loc":{"start":{"line":249,"column":33},"end":{"line":249,"column":50}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":9102,"end":9108,"loc":{"start":{"line":249,"column":51},"end":{"line":249,"column":57}},"name":"secret"},"computed":false}},"operator":"&&","right":{"type":"UnaryExpression","start":9112,"end":9140,"loc":{"start":{"line":249,"column":61},"end":{"line":249,"column":89}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":9113,"end":9140,"loc":{"start":{"line":249,"column":62},"end":{"line":249,"column":89}},"object":{"type":"Identifier","start":9113,"end":9128,"loc":{"start":{"line":249,"column":62},"end":{"line":249,"column":77}},"name":"s3ClientOptions"},"property":{"type":"Identifier","start":9129,"end":9140,"loc":{"start":{"line":249,"column":78},"end":{"line":249,"column":89}},"name":"credentials"},"computed":false}}},"consequent":{"type":"BlockStatement","start":9142,"end":9311,"loc":{"start":{"line":249,"column":91},"end":{"line":254,"column":5}},"body":[{"type":"ExpressionStatement","start":9150,"end":9305,"loc":{"start":{"line":250,"column":6},"end":{"line":253,"column":39}},"expression":{"type":"AssignmentExpression","start":9150,"end":9305,"loc":{"start":{"line":250,"column":6},"end":{"line":253,"column":39}},"operator":"=","left":{"type":"MemberExpression","start":9150,"end":9177,"loc":{"start":{"line":250,"column":6},"end":{"line":250,"column":33}},"object":{"type":"Identifier","start":9150,"end":9165,"loc":{"start":{"line":250,"column":6},"end":{"line":250,"column":21}},"name":"s3ClientOptions"},"property":{"type":"Identifier","start":9166,"end":9177,"loc":{"start":{"line":250,"column":22},"end":{"line":250,"column":33}},"name":"credentials"},"computed":false},"right":{"type":"NewExpression","start":9180,"end":9305,"loc":{"start":{"line":250,"column":36},"end":{"line":253,"column":39}},"callee":{"type":"MemberExpression","start":9184,"end":9199,"loc":{"start":{"line":250,"column":40},"end":{"line":250,"column":55}},"object":{"type":"Identifier","start":9184,"end":9187,"loc":{"start":{"line":250,"column":40},"end":{"line":250,"column":43}},"name":"AWS"},"property":{"type":"Identifier","start":9188,"end":9199,"loc":{"start":{"line":250,"column":44},"end":{"line":250,"column":55}},"name":"Credentials"},"computed":false},"arguments":[{"type":"MemberExpression","start":9209,"end":9230,"loc":{"start":{"line":251,"column":8},"end":{"line":251,"column":29}},"object":{"type":"Identifier","start":9209,"end":9226,"loc":{"start":{"line":251,"column":8},"end":{"line":251,"column":25}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":9227,"end":9230,"loc":{"start":{"line":251,"column":26},"end":{"line":251,"column":29}},"name":"key"},"computed":false},{"type":"MemberExpression","start":9240,"end":9264,"loc":{"start":{"line":252,"column":8},"end":{"line":252,"column":32}},"object":{"type":"Identifier","start":9240,"end":9257,"loc":{"start":{"line":252,"column":8},"end":{"line":252,"column":25}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":9258,"end":9264,"loc":{"start":{"line":252,"column":26},"end":{"line":252,"column":32}},"name":"secret"},"computed":false},{"type":"MemberExpression","start":9274,"end":9304,"loc":{"start":{"line":253,"column":8},"end":{"line":253,"column":38}},"object":{"type":"Identifier","start":9274,"end":9291,"loc":{"start":{"line":253,"column":8},"end":{"line":253,"column":25}},"name":"s3ProviderOptions"},"property":{"type":"Identifier","start":9292,"end":9304,"loc":{"start":{"line":253,"column":26},"end":{"line":253,"column":38}},"name":"sessionToken"},"computed":false}]}}}]},"alternate":null,"comments":[{"type":"Line","value":" Use credentials to allow assumed roles to pass STS sessions in.","start":8853,"end":8919,"loc":{"start":{"line":246,"column":4},"end":{"line":246,"column":70}}},{"type":"Line","value":" If the user doesn't specify key and secret, the default credentials (process-env)","start":8924,"end":9008,"loc":{"start":{"line":247,"column":4},"end":{"line":247,"column":88}}},{"type":"Line","value":" will be used by S3 in calls below.","start":9013,"end":9050,"loc":{"start":{"line":248,"column":4},"end":{"line":248,"column":41}}}]},{"type":"ExpressionStatement","start":9316,"end":9350,"loc":{"start":{"line":255,"column":4},"end":{"line":255,"column":38}},"expression":{"type":"AssignmentExpression","start":9316,"end":9350,"loc":{"start":{"line":255,"column":4},"end":{"line":255,"column":38}},"operator":"=","left":{"type":"Identifier","start":9316,"end":9324,"loc":{"start":{"line":255,"column":4},"end":{"line":255,"column":12}},"name":"s3Client"},"right":{"type":"NewExpression","start":9327,"end":9350,"loc":{"start":{"line":255,"column":15},"end":{"line":255,"column":38}},"callee":{"type":"Identifier","start":9331,"end":9333,"loc":{"start":{"line":255,"column":19},"end":{"line":255,"column":21}},"name":"S3"},"arguments":[{"type":"Identifier","start":9334,"end":9349,"loc":{"start":{"line":255,"column":22},"end":{"line":255,"column":37}},"name":"s3ClientOptions"}]}}}]},"alternate":null},{"type":"VariableDeclaration","start":9448,"end":9960,"loc":{"start":{"line":263,"column":2},"end":{"line":275,"column":3}},"declarations":[{"type":"VariableDeclarator","start":9454,"end":9960,"loc":{"start":{"line":263,"column":8},"end":{"line":275,"column":3}},"id":{"type":"Identifier","start":9454,"end":9464,"loc":{"start":{"line":263,"column":8},"end":{"line":263,"column":18}},"name":"middleware"},"init":{"type":"ArrowFunctionExpression","start":9467,"end":9960,"loc":{"start":{"line":263,"column":21},"end":{"line":275,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":9468,"end":9471,"loc":{"start":{"line":263,"column":22},"end":{"line":263,"column":25}},"name":"req"},{"type":"Identifier","start":9473,"end":9476,"loc":{"start":{"line":263,"column":27},"end":{"line":263,"column":30}},"name":"res"},{"type":"Identifier","start":9478,"end":9482,"loc":{"start":{"line":263,"column":32},"end":{"line":263,"column":36}},"name":"next"}],"body":{"type":"BlockStatement","start":9487,"end":9960,"loc":{"start":{"line":263,"column":41},"end":{"line":275,"column":3}},"body":[{"type":"VariableDeclaration","start":9493,"end":9592,"loc":{"start":{"line":264,"column":4},"end":{"line":264,"column":103}},"declarations":[{"type":"VariableDeclarator","start":9499,"end":9592,"loc":{"start":{"line":264,"column":10},"end":{"line":264,"column":103}},"id":{"type":"Identifier","start":9499,"end":9515,"loc":{"start":{"line":264,"column":10},"end":{"line":264,"column":26}},"name":"versionFromQuery"},"init":{"type":"ConditionalExpression","start":9518,"end":9592,"loc":{"start":{"line":264,"column":29},"end":{"line":264,"column":103}},"test":{"type":"MemberExpression","start":9518,"end":9540,"loc":{"start":{"line":264,"column":29},"end":{"line":264,"column":51}},"object":{"type":"MemberExpression","start":9518,"end":9527,"loc":{"start":{"line":264,"column":29},"end":{"line":264,"column":38}},"object":{"type":"Identifier","start":9518,"end":9521,"loc":{"start":{"line":264,"column":29},"end":{"line":264,"column":32}},"name":"req"},"property":{"type":"Identifier","start":9522,"end":9527,"loc":{"start":{"line":264,"column":33},"end":{"line":264,"column":38}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":9528,"end":9540,"loc":{"start":{"line":264,"column":39},"end":{"line":264,"column":51}},"name":"uppyVersions"},"computed":false},"consequent":{"type":"CallExpression","start":9543,"end":9585,"loc":{"start":{"line":264,"column":54},"end":{"line":264,"column":96}},"callee":{"type":"Identifier","start":9543,"end":9561,"loc":{"start":{"line":264,"column":54},"end":{"line":264,"column":72}},"name":"decodeURIComponent"},"arguments":[{"type":"MemberExpression","start":9562,"end":9584,"loc":{"start":{"line":264,"column":73},"end":{"line":264,"column":95}},"object":{"type":"MemberExpression","start":9562,"end":9571,"loc":{"start":{"line":264,"column":73},"end":{"line":264,"column":82}},"object":{"type":"Identifier","start":9562,"end":9565,"loc":{"start":{"line":264,"column":73},"end":{"line":264,"column":76}},"name":"req"},"property":{"type":"Identifier","start":9566,"end":9571,"loc":{"start":{"line":264,"column":77},"end":{"line":264,"column":82}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":9572,"end":9584,"loc":{"start":{"line":264,"column":83},"end":{"line":264,"column":95}},"name":"uppyVersions"},"computed":false}]},"alternate":{"type":"Literal","start":9588,"end":9592,"loc":{"start":{"line":264,"column":99},"end":{"line":264,"column":103}},"value":null,"raw":"null"}}}],"kind":"const"},{"type":"ExpressionStatement","start":9597,"end":9846,"loc":{"start":{"line":265,"column":4},"end":{"line":271,"column":5}},"expression":{"type":"AssignmentExpression","start":9597,"end":9846,"loc":{"start":{"line":265,"column":4},"end":{"line":271,"column":5}},"operator":"=","left":{"type":"MemberExpression","start":9597,"end":9610,"loc":{"start":{"line":265,"column":4},"end":{"line":265,"column":17}},"object":{"type":"Identifier","start":9597,"end":9600,"loc":{"start":{"line":265,"column":4},"end":{"line":265,"column":7}},"name":"req"},"property":{"type":"Identifier","start":9601,"end":9610,"loc":{"start":{"line":265,"column":8},"end":{"line":265,"column":17}},"name":"companion"},"computed":false},"right":{"type":"ObjectExpression","start":9613,"end":9846,"loc":{"start":{"line":265,"column":20},"end":{"line":271,"column":5}},"properties":[{"type":"Property","start":9621,"end":9628,"loc":{"start":{"line":266,"column":6},"end":{"line":266,"column":13}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":9621,"end":9628,"loc":{"start":{"line":266,"column":6},"end":{"line":266,"column":13}},"name":"options"},"kind":"init","value":{"type":"Identifier","start":9621,"end":9628,"loc":{"start":{"line":266,"column":6},"end":{"line":266,"column":13}},"name":"options"}},{"type":"Property","start":9636,"end":9644,"loc":{"start":{"line":267,"column":6},"end":{"line":267,"column":14}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":9636,"end":9644,"loc":{"start":{"line":267,"column":6},"end":{"line":267,"column":14}},"name":"s3Client"},"kind":"init","value":{"type":"Identifier","start":9636,"end":9644,"loc":{"start":{"line":267,"column":6},"end":{"line":267,"column":14}},"name":"s3Client"}},{"type":"Property","start":9652,"end":9719,"loc":{"start":{"line":268,"column":6},"end":{"line":268,"column":73}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9652,"end":9661,"loc":{"start":{"line":268,"column":6},"end":{"line":268,"column":15}},"name":"authToken"},"value":{"type":"LogicalExpression","start":9663,"end":9719,"loc":{"start":{"line":268,"column":17},"end":{"line":268,"column":73}},"left":{"type":"CallExpression","start":9663,"end":9692,"loc":{"start":{"line":268,"column":17},"end":{"line":268,"column":46}},"callee":{"type":"MemberExpression","start":9663,"end":9673,"loc":{"start":{"line":268,"column":17},"end":{"line":268,"column":27}},"object":{"type":"Identifier","start":9663,"end":9666,"loc":{"start":{"line":268,"column":17},"end":{"line":268,"column":20}},"name":"req"},"property":{"type":"Identifier","start":9667,"end":9673,"loc":{"start":{"line":268,"column":21},"end":{"line":268,"column":27}},"name":"header"},"computed":false},"arguments":[{"type":"Literal","start":9674,"end":9691,"loc":{"start":{"line":268,"column":28},"end":{"line":268,"column":45}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"}]},"operator":"||","right":{"type":"MemberExpression","start":9696,"end":9719,"loc":{"start":{"line":268,"column":50},"end":{"line":268,"column":73}},"object":{"type":"MemberExpression","start":9696,"end":9705,"loc":{"start":{"line":268,"column":50},"end":{"line":268,"column":59}},"object":{"type":"Identifier","start":9696,"end":9699,"loc":{"start":{"line":268,"column":50},"end":{"line":268,"column":53}},"name":"req"},"property":{"type":"Identifier","start":9700,"end":9705,"loc":{"start":{"line":268,"column":54},"end":{"line":268,"column":59}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":9706,"end":9719,"loc":{"start":{"line":268,"column":60},"end":{"line":268,"column":73}},"name":"uppyAuthToken"},"computed":false}},"kind":"init"},{"type":"Property","start":9727,"end":9800,"loc":{"start":{"line":269,"column":6},"end":{"line":269,"column":79}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9727,"end":9740,"loc":{"start":{"line":269,"column":6},"end":{"line":269,"column":19}},"name":"clientVersion"},"value":{"type":"LogicalExpression","start":9742,"end":9800,"loc":{"start":{"line":269,"column":21},"end":{"line":269,"column":79}},"left":{"type":"LogicalExpression","start":9742,"end":9789,"loc":{"start":{"line":269,"column":21},"end":{"line":269,"column":68}},"left":{"type":"CallExpression","start":9742,"end":9769,"loc":{"start":{"line":269,"column":21},"end":{"line":269,"column":48}},"callee":{"type":"MemberExpression","start":9742,"end":9752,"loc":{"start":{"line":269,"column":21},"end":{"line":269,"column":31}},"object":{"type":"Identifier","start":9742,"end":9745,"loc":{"start":{"line":269,"column":21},"end":{"line":269,"column":24}},"name":"req"},"property":{"type":"Identifier","start":9746,"end":9752,"loc":{"start":{"line":269,"column":25},"end":{"line":269,"column":31}},"name":"header"},"computed":false},"arguments":[{"type":"Literal","start":9753,"end":9768,"loc":{"start":{"line":269,"column":32},"end":{"line":269,"column":47}},"value":"uppy-versions","raw":"'uppy-versions'"}]},"operator":"||","right":{"type":"Identifier","start":9773,"end":9789,"loc":{"start":{"line":269,"column":52},"end":{"line":269,"column":68}},"name":"versionFromQuery"}},"operator":"||","right":{"type":"Literal","start":9793,"end":9800,"loc":{"start":{"line":269,"column":72},"end":{"line":269,"column":79}},"value":"1.0.0","raw":"'1.0.0'"}},"kind":"init"},{"type":"Property","start":9808,"end":9840,"loc":{"start":{"line":270,"column":6},"end":{"line":270,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":9808,"end":9816,"loc":{"start":{"line":270,"column":6},"end":{"line":270,"column":14}},"name":"buildURL"},"value":{"type":"CallExpression","start":9818,"end":9840,"loc":{"start":{"line":270,"column":16},"end":{"line":270,"column":38}},"callee":{"type":"Identifier","start":9818,"end":9831,"loc":{"start":{"line":270,"column":16},"end":{"line":270,"column":29}},"name":"getURLBuilder"},"arguments":[{"type":"Identifier","start":9832,"end":9839,"loc":{"start":{"line":270,"column":30},"end":{"line":270,"column":37}},"name":"options"}]},"kind":"init"}]}}},{"type":"ExpressionStatement","start":9852,"end":9945,"loc":{"start":{"line":273,"column":4},"end":{"line":273,"column":97}},"expression":{"type":"CallExpression","start":9852,"end":9945,"loc":{"start":{"line":273,"column":4},"end":{"line":273,"column":97}},"callee":{"type":"MemberExpression","start":9852,"end":9863,"loc":{"start":{"line":273,"column":4},"end":{"line":273,"column":15}},"object":{"type":"Identifier","start":9852,"end":9858,"loc":{"start":{"line":273,"column":4},"end":{"line":273,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":9859,"end":9863,"loc":{"start":{"line":273,"column":11},"end":{"line":273,"column":15}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":9864,"end":9916,"loc":{"start":{"line":273,"column":16},"end":{"line":273,"column":68}},"expressions":[{"type":"MemberExpression","start":9887,"end":9914,"loc":{"start":{"line":273,"column":39},"end":{"line":273,"column":66}},"object":{"type":"MemberExpression","start":9887,"end":9900,"loc":{"start":{"line":273,"column":39},"end":{"line":273,"column":52}},"object":{"type":"Identifier","start":9887,"end":9890,"loc":{"start":{"line":273,"column":39},"end":{"line":273,"column":42}},"name":"req"},"property":{"type":"Identifier","start":9891,"end":9900,"loc":{"start":{"line":273,"column":43},"end":{"line":273,"column":52}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":9901,"end":9914,"loc":{"start":{"line":273,"column":53},"end":{"line":273,"column":66}},"name":"clientVersion"},"computed":false}],"quasis":[{"type":"TemplateElement","start":9865,"end":9885,"loc":{"start":{"line":273,"column":17},"end":{"line":273,"column":37}},"value":{"raw":"uppy client version ","cooked":"uppy client version "},"tail":false},{"type":"TemplateElement","start":9915,"end":9915,"loc":{"start":{"line":273,"column":67},"end":{"line":273,"column":67}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":9918,"end":9944,"loc":{"start":{"line":273,"column":70},"end":{"line":273,"column":96}},"value":"companion.client.version","raw":"'companion.client.version'"}]}},{"type":"ExpressionStatement","start":9950,"end":9956,"loc":{"start":{"line":274,"column":4},"end":{"line":274,"column":10}},"expression":{"type":"CallExpression","start":9950,"end":9956,"loc":{"start":{"line":274,"column":4},"end":{"line":274,"column":10}},"callee":{"type":"Identifier","start":9950,"end":9954,"loc":{"start":{"line":274,"column":4},"end":{"line":274,"column":8}},"name":"next"},"arguments":[]}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n   * @param {object} req\n   * @param {object} res\n   * @param {function} next\n   ","start":9358,"end":9445,"loc":{"start":{"line":258,"column":2},"end":{"line":262,"column":5}}}]},{"type":"ReturnStatement","start":9964,"end":9981,"loc":{"start":{"line":277,"column":2},"end":{"line":277,"column":19}},"argument":{"type":"Identifier","start":9971,"end":9981,"loc":{"start":{"line":277,"column":9},"end":{"line":277,"column":19}},"name":"middleware"}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n *\n * @param {object} options\n ","start":7490,"end":7527,"loc":{"start":{"line":218,"column":0},"end":{"line":221,"column":3}}}]},{"type":"VariableDeclaration","start":10138,"end":10715,"loc":{"start":{"line":285,"column":0},"end":{"line":303,"column":1}},"declarations":[{"type":"VariableDeclarator","start":10144,"end":10715,"loc":{"start":{"line":285,"column":6},"end":{"line":303,"column":1}},"id":{"type":"Identifier","start":10144,"end":10154,"loc":{"start":{"line":285,"column":6},"end":{"line":285,"column":16}},"name":"maskLogger"},"init":{"type":"ArrowFunctionExpression","start":10157,"end":10715,"loc":{"start":{"line":285,"column":19},"end":{"line":303,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":10158,"end":10174,"loc":{"start":{"line":285,"column":20},"end":{"line":285,"column":36}},"name":"companionOptions"}],"body":{"type":"BlockStatement","start":10179,"end":10715,"loc":{"start":{"line":285,"column":41},"end":{"line":303,"column":1}},"body":[{"type":"VariableDeclaration","start":10183,"end":10201,"loc":{"start":{"line":286,"column":2},"end":{"line":286,"column":20}},"declarations":[{"type":"VariableDeclarator","start":10189,"end":10201,"loc":{"start":{"line":286,"column":8},"end":{"line":286,"column":20}},"id":{"type":"Identifier","start":10189,"end":10196,"loc":{"start":{"line":286,"column":8},"end":{"line":286,"column":15}},"name":"secrets"},"init":{"type":"ArrayExpression","start":10199,"end":10201,"loc":{"start":{"line":286,"column":18},"end":{"line":286,"column":20}},"elements":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":10204,"end":10265,"loc":{"start":{"line":287,"column":2},"end":{"line":287,"column":63}},"declarations":[{"type":"VariableDeclarator","start":10210,"end":10265,"loc":{"start":{"line":287,"column":8},"end":{"line":287,"column":63}},"id":{"type":"ObjectPattern","start":10210,"end":10246,"loc":{"start":{"line":287,"column":8},"end":{"line":287,"column":44}},"properties":[{"type":"Property","start":10212,"end":10227,"loc":{"start":{"line":287,"column":10},"end":{"line":287,"column":25}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":10212,"end":10227,"loc":{"start":{"line":287,"column":10},"end":{"line":287,"column":25}},"name":"providerOptions"},"kind":"init","value":{"type":"Identifier","start":10212,"end":10227,"loc":{"start":{"line":287,"column":10},"end":{"line":287,"column":25}},"name":"providerOptions"}},{"type":"Property","start":10229,"end":10244,"loc":{"start":{"line":287,"column":27},"end":{"line":287,"column":42}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":10229,"end":10244,"loc":{"start":{"line":287,"column":27},"end":{"line":287,"column":42}},"name":"customProviders"},"kind":"init","value":{"type":"Identifier","start":10229,"end":10244,"loc":{"start":{"line":287,"column":27},"end":{"line":287,"column":42}},"name":"customProviders"}}]},"init":{"type":"Identifier","start":10249,"end":10265,"loc":{"start":{"line":287,"column":47},"end":{"line":287,"column":63}},"name":"companionOptions"}}],"kind":"const"},{"type":"ExpressionStatement","start":10268,"end":10428,"loc":{"start":{"line":288,"column":2},"end":{"line":292,"column":4}},"expression":{"type":"CallExpression","start":10268,"end":10428,"loc":{"start":{"line":288,"column":2},"end":{"line":292,"column":4}},"callee":{"type":"MemberExpression","start":10268,"end":10304,"loc":{"start":{"line":288,"column":2},"end":{"line":288,"column":38}},"object":{"type":"CallExpression","start":10268,"end":10296,"loc":{"start":{"line":288,"column":2},"end":{"line":288,"column":30}},"callee":{"type":"MemberExpression","start":10268,"end":10279,"loc":{"start":{"line":288,"column":2},"end":{"line":288,"column":13}},"object":{"type":"Identifier","start":10268,"end":10274,"loc":{"start":{"line":288,"column":2},"end":{"line":288,"column":8}},"name":"Object"},"property":{"type":"Identifier","start":10275,"end":10279,"loc":{"start":{"line":288,"column":9},"end":{"line":288,"column":13}},"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":10280,"end":10295,"loc":{"start":{"line":288,"column":14},"end":{"line":288,"column":29}},"name":"providerOptions"}]},"property":{"type":"Identifier","start":10297,"end":10304,"loc":{"start":{"line":288,"column":31},"end":{"line":288,"column":38}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":10305,"end":10427,"loc":{"start":{"line":288,"column":39},"end":{"line":292,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":10306,"end":10314,"loc":{"start":{"line":288,"column":40},"end":{"line":288,"column":48}},"name":"provider"}],"body":{"type":"BlockStatement","start":10319,"end":10427,"loc":{"start":{"line":288,"column":53},"end":{"line":292,"column":3}},"body":[{"type":"IfStatement","start":10325,"end":10423,"loc":{"start":{"line":289,"column":4},"end":{"line":291,"column":5}},"test":{"type":"MemberExpression","start":10329,"end":10361,"loc":{"start":{"line":289,"column":8},"end":{"line":289,"column":40}},"object":{"type":"MemberExpression","start":10329,"end":10354,"loc":{"start":{"line":289,"column":8},"end":{"line":289,"column":33}},"object":{"type":"Identifier","start":10329,"end":10344,"loc":{"start":{"line":289,"column":8},"end":{"line":289,"column":23}},"name":"providerOptions"},"property":{"type":"Identifier","start":10345,"end":10353,"loc":{"start":{"line":289,"column":24},"end":{"line":289,"column":32}},"name":"provider"},"computed":true},"property":{"type":"Identifier","start":10355,"end":10361,"loc":{"start":{"line":289,"column":34},"end":{"line":289,"column":40}},"name":"secret"},"computed":false},"consequent":{"type":"BlockStatement","start":10363,"end":10423,"loc":{"start":{"line":289,"column":42},"end":{"line":291,"column":5}},"body":[{"type":"ExpressionStatement","start":10371,"end":10417,"loc":{"start":{"line":290,"column":6},"end":{"line":290,"column":52}},"expression":{"type":"CallExpression","start":10371,"end":10417,"loc":{"start":{"line":290,"column":6},"end":{"line":290,"column":52}},"callee":{"type":"MemberExpression","start":10371,"end":10383,"loc":{"start":{"line":290,"column":6},"end":{"line":290,"column":18}},"object":{"type":"Identifier","start":10371,"end":10378,"loc":{"start":{"line":290,"column":6},"end":{"line":290,"column":13}},"name":"secrets"},"property":{"type":"Identifier","start":10379,"end":10383,"loc":{"start":{"line":290,"column":14},"end":{"line":290,"column":18}},"name":"push"},"computed":false},"arguments":[{"type":"MemberExpression","start":10384,"end":10416,"loc":{"start":{"line":290,"column":19},"end":{"line":290,"column":51}},"object":{"type":"MemberExpression","start":10384,"end":10409,"loc":{"start":{"line":290,"column":19},"end":{"line":290,"column":44}},"object":{"type":"Identifier","start":10384,"end":10399,"loc":{"start":{"line":290,"column":19},"end":{"line":290,"column":34}},"name":"providerOptions"},"property":{"type":"Identifier","start":10400,"end":10408,"loc":{"start":{"line":290,"column":35},"end":{"line":290,"column":43}},"name":"provider"},"computed":true},"property":{"type":"Identifier","start":10410,"end":10416,"loc":{"start":{"line":290,"column":45},"end":{"line":290,"column":51}},"name":"secret"},"computed":false}]}}]},"alternate":null}]}}]}},{"type":"IfStatement","start":10432,"end":10681,"loc":{"start":{"line":294,"column":2},"end":{"line":300,"column":3}},"test":{"type":"Identifier","start":10436,"end":10451,"loc":{"start":{"line":294,"column":6},"end":{"line":294,"column":21}},"name":"customProviders"},"consequent":{"type":"BlockStatement","start":10453,"end":10681,"loc":{"start":{"line":294,"column":23},"end":{"line":300,"column":3}},"body":[{"type":"ExpressionStatement","start":10459,"end":10677,"loc":{"start":{"line":295,"column":4},"end":{"line":299,"column":6}},"expression":{"type":"CallExpression","start":10459,"end":10677,"loc":{"start":{"line":295,"column":4},"end":{"line":299,"column":6}},"callee":{"type":"MemberExpression","start":10459,"end":10495,"loc":{"start":{"line":295,"column":4},"end":{"line":295,"column":40}},"object":{"type":"CallExpression","start":10459,"end":10487,"loc":{"start":{"line":295,"column":4},"end":{"line":295,"column":32}},"callee":{"type":"MemberExpression","start":10459,"end":10470,"loc":{"start":{"line":295,"column":4},"end":{"line":295,"column":15}},"object":{"type":"Identifier","start":10459,"end":10465,"loc":{"start":{"line":295,"column":4},"end":{"line":295,"column":10}},"name":"Object"},"property":{"type":"Identifier","start":10466,"end":10470,"loc":{"start":{"line":295,"column":11},"end":{"line":295,"column":15}},"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":10471,"end":10486,"loc":{"start":{"line":295,"column":16},"end":{"line":295,"column":31}},"name":"customProviders"}]},"property":{"type":"Identifier","start":10488,"end":10495,"loc":{"start":{"line":295,"column":33},"end":{"line":295,"column":40}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":10496,"end":10676,"loc":{"start":{"line":295,"column":41},"end":{"line":299,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":10497,"end":10505,"loc":{"start":{"line":295,"column":42},"end":{"line":295,"column":50}},"name":"provider"}],"body":{"type":"BlockStatement","start":10510,"end":10676,"loc":{"start":{"line":295,"column":55},"end":{"line":299,"column":5}},"body":[{"type":"IfStatement","start":10518,"end":10670,"loc":{"start":{"line":296,"column":6},"end":{"line":298,"column":7}},"test":{"type":"LogicalExpression","start":10522,"end":10597,"loc":{"start":{"line":296,"column":10},"end":{"line":296,"column":85}},"left":{"type":"MemberExpression","start":10522,"end":10554,"loc":{"start":{"line":296,"column":10},"end":{"line":296,"column":42}},"object":{"type":"MemberExpression","start":10522,"end":10547,"loc":{"start":{"line":296,"column":10},"end":{"line":296,"column":35}},"object":{"type":"Identifier","start":10522,"end":10537,"loc":{"start":{"line":296,"column":10},"end":{"line":296,"column":25}},"name":"customProviders"},"property":{"type":"Identifier","start":10538,"end":10546,"loc":{"start":{"line":296,"column":26},"end":{"line":296,"column":34}},"name":"provider"},"computed":true},"property":{"type":"Identifier","start":10548,"end":10554,"loc":{"start":{"line":296,"column":36},"end":{"line":296,"column":42}},"name":"config"},"computed":false},"operator":"&&","right":{"type":"MemberExpression","start":10558,"end":10597,"loc":{"start":{"line":296,"column":46},"end":{"line":296,"column":85}},"object":{"type":"MemberExpression","start":10558,"end":10590,"loc":{"start":{"line":296,"column":46},"end":{"line":296,"column":78}},"object":{"type":"MemberExpression","start":10558,"end":10583,"loc":{"start":{"line":296,"column":46},"end":{"line":296,"column":71}},"object":{"type":"Identifier","start":10558,"end":10573,"loc":{"start":{"line":296,"column":46},"end":{"line":296,"column":61}},"name":"customProviders"},"property":{"type":"Identifier","start":10574,"end":10582,"loc":{"start":{"line":296,"column":62},"end":{"line":296,"column":70}},"name":"provider"},"computed":true},"property":{"type":"Identifier","start":10584,"end":10590,"loc":{"start":{"line":296,"column":72},"end":{"line":296,"column":78}},"name":"config"},"computed":false},"property":{"type":"Identifier","start":10591,"end":10597,"loc":{"start":{"line":296,"column":79},"end":{"line":296,"column":85}},"name":"secret"},"computed":false}},"consequent":{"type":"BlockStatement","start":10599,"end":10670,"loc":{"start":{"line":296,"column":87},"end":{"line":298,"column":7}},"body":[{"type":"ExpressionStatement","start":10609,"end":10662,"loc":{"start":{"line":297,"column":8},"end":{"line":297,"column":61}},"expression":{"type":"CallExpression","start":10609,"end":10662,"loc":{"start":{"line":297,"column":8},"end":{"line":297,"column":61}},"callee":{"type":"MemberExpression","start":10609,"end":10621,"loc":{"start":{"line":297,"column":8},"end":{"line":297,"column":20}},"object":{"type":"Identifier","start":10609,"end":10616,"loc":{"start":{"line":297,"column":8},"end":{"line":297,"column":15}},"name":"secrets"},"property":{"type":"Identifier","start":10617,"end":10621,"loc":{"start":{"line":297,"column":16},"end":{"line":297,"column":20}},"name":"push"},"computed":false},"arguments":[{"type":"MemberExpression","start":10622,"end":10661,"loc":{"start":{"line":297,"column":21},"end":{"line":297,"column":60}},"object":{"type":"MemberExpression","start":10622,"end":10654,"loc":{"start":{"line":297,"column":21},"end":{"line":297,"column":53}},"object":{"type":"MemberExpression","start":10622,"end":10647,"loc":{"start":{"line":297,"column":21},"end":{"line":297,"column":46}},"object":{"type":"Identifier","start":10622,"end":10637,"loc":{"start":{"line":297,"column":21},"end":{"line":297,"column":36}},"name":"customProviders"},"property":{"type":"Identifier","start":10638,"end":10646,"loc":{"start":{"line":297,"column":37},"end":{"line":297,"column":45}},"name":"provider"},"computed":true},"property":{"type":"Identifier","start":10648,"end":10654,"loc":{"start":{"line":297,"column":47},"end":{"line":297,"column":53}},"name":"config"},"computed":false},"property":{"type":"Identifier","start":10655,"end":10661,"loc":{"start":{"line":297,"column":54},"end":{"line":297,"column":60}},"name":"secret"},"computed":false}]}}]},"alternate":null}]}}]}}]},"alternate":null},{"type":"ExpressionStatement","start":10685,"end":10713,"loc":{"start":{"line":302,"column":2},"end":{"line":302,"column":30}},"expression":{"type":"CallExpression","start":10685,"end":10713,"loc":{"start":{"line":302,"column":2},"end":{"line":302,"column":30}},"callee":{"type":"MemberExpression","start":10685,"end":10704,"loc":{"start":{"line":302,"column":2},"end":{"line":302,"column":21}},"object":{"type":"Identifier","start":10685,"end":10691,"loc":{"start":{"line":302,"column":2},"end":{"line":302,"column":8}},"name":"logger"},"property":{"type":"Identifier","start":10692,"end":10704,"loc":{"start":{"line":302,"column":9},"end":{"line":302,"column":21}},"name":"setMaskables"},"computed":false},"arguments":[{"type":"Identifier","start":10705,"end":10712,"loc":{"start":{"line":302,"column":22},"end":{"line":302,"column":29}},"name":"secrets"}]}}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n * Informs the logger about all provider secrets that should be masked\n * if they are found in a log message\n * @param {object} companionOptions\n ","start":9985,"end":10137,"loc":{"start":{"line":280,"column":0},"end":{"line":284,"column":3}}}]},{"type":"VariableDeclaration","start":10945,"end":11860,"loc":{"start":{"line":312,"column":0},"end":{"line":338,"column":1}},"declarations":[{"type":"VariableDeclarator","start":10951,"end":11860,"loc":{"start":{"line":312,"column":6},"end":{"line":338,"column":1}},"id":{"type":"Identifier","start":10951,"end":10965,"loc":{"start":{"line":312,"column":6},"end":{"line":312,"column":20}},"name":"validateConfig"},"init":{"type":"ArrowFunctionExpression","start":10968,"end":11860,"loc":{"start":{"line":312,"column":23},"end":{"line":338,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":10969,"end":10985,"loc":{"start":{"line":312,"column":24},"end":{"line":312,"column":40}},"name":"companionOptions"}],"body":{"type":"BlockStatement","start":10990,"end":11860,"loc":{"start":{"line":312,"column":45},"end":{"line":338,"column":1}},"body":[{"type":"VariableDeclaration","start":10994,"end":11056,"loc":{"start":{"line":313,"column":2},"end":{"line":313,"column":64}},"declarations":[{"type":"VariableDeclarator","start":11000,"end":11056,"loc":{"start":{"line":313,"column":8},"end":{"line":313,"column":64}},"id":{"type":"Identifier","start":11000,"end":11016,"loc":{"start":{"line":313,"column":8},"end":{"line":313,"column":24}},"name":"mandatoryOptions"},"init":{"type":"ArrayExpression","start":11019,"end":11056,"loc":{"start":{"line":313,"column":27},"end":{"line":313,"column":64}},"elements":[{"type":"Literal","start":11020,"end":11028,"loc":{"start":{"line":313,"column":28},"end":{"line":313,"column":36}},"value":"secret","raw":"'secret'"},{"type":"Literal","start":11030,"end":11040,"loc":{"start":{"line":313,"column":38},"end":{"line":313,"column":48}},"value":"filePath","raw":"'filePath'"},{"type":"Literal","start":11042,"end":11055,"loc":{"start":{"line":313,"column":50},"end":{"line":313,"column":63}},"value":"server.host","raw":"'server.host'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":11085,"end":11107,"loc":{"start":{"line":315,"column":2},"end":{"line":315,"column":24}},"declarations":[{"type":"VariableDeclarator","start":11091,"end":11107,"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":24}},"id":{"type":"Identifier","start":11091,"end":11102,"loc":{"start":{"line":315,"column":8},"end":{"line":315,"column":19}},"name":"unspecified"},"init":{"type":"ArrayExpression","start":11105,"end":11107,"loc":{"start":{"line":315,"column":22},"end":{"line":315,"column":24}},"elements":[]}}],"kind":"const","comments":[{"type":"Block","value":"* @type {string[]} ","start":11059,"end":11082,"loc":{"start":{"line":314,"column":2},"end":{"line":314,"column":25}}}]},{"type":"ExpressionStatement","start":11111,"end":11296,"loc":{"start":{"line":317,"column":2},"end":{"line":321,"column":4}},"expression":{"type":"CallExpression","start":11111,"end":11296,"loc":{"start":{"line":317,"column":2},"end":{"line":321,"column":4}},"callee":{"type":"MemberExpression","start":11111,"end":11135,"loc":{"start":{"line":317,"column":2},"end":{"line":317,"column":26}},"object":{"type":"Identifier","start":11111,"end":11127,"loc":{"start":{"line":317,"column":2},"end":{"line":317,"column":18}},"name":"mandatoryOptions"},"property":{"type":"Identifier","start":11128,"end":11135,"loc":{"start":{"line":317,"column":19},"end":{"line":317,"column":26}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":11136,"end":11295,"loc":{"start":{"line":317,"column":27},"end":{"line":321,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":11137,"end":11138,"loc":{"start":{"line":317,"column":28},"end":{"line":317,"column":29}},"name":"i"}],"body":{"type":"BlockStatement","start":11143,"end":11295,"loc":{"start":{"line":317,"column":34},"end":{"line":321,"column":3}},"body":[{"type":"VariableDeclaration","start":11149,"end":11247,"loc":{"start":{"line":318,"column":4},"end":{"line":318,"column":102}},"declarations":[{"type":"VariableDeclarator","start":11155,"end":11247,"loc":{"start":{"line":318,"column":10},"end":{"line":318,"column":102}},"id":{"type":"Identifier","start":11155,"end":11160,"loc":{"start":{"line":318,"column":10},"end":{"line":318,"column":15}},"name":"value"},"init":{"type":"CallExpression","start":11163,"end":11247,"loc":{"start":{"line":318,"column":18},"end":{"line":318,"column":102}},"callee":{"type":"MemberExpression","start":11163,"end":11182,"loc":{"start":{"line":318,"column":18},"end":{"line":318,"column":37}},"object":{"type":"CallExpression","start":11163,"end":11175,"loc":{"start":{"line":318,"column":18},"end":{"line":318,"column":30}},"callee":{"type":"MemberExpression","start":11163,"end":11170,"loc":{"start":{"line":318,"column":18},"end":{"line":318,"column":25}},"object":{"type":"Identifier","start":11163,"end":11164,"loc":{"start":{"line":318,"column":18},"end":{"line":318,"column":19}},"name":"i"},"property":{"type":"Identifier","start":11165,"end":11170,"loc":{"start":{"line":318,"column":20},"end":{"line":318,"column":25}},"name":"split"},"computed":false},"arguments":[{"type":"Literal","start":11171,"end":11174,"loc":{"start":{"line":318,"column":26},"end":{"line":318,"column":29}},"value":".","raw":"'.'"}]},"property":{"type":"Identifier","start":11176,"end":11182,"loc":{"start":{"line":318,"column":31},"end":{"line":318,"column":37}},"name":"reduce"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":11183,"end":11228,"loc":{"start":{"line":318,"column":38},"end":{"line":318,"column":83}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":11184,"end":11188,"loc":{"start":{"line":318,"column":39},"end":{"line":318,"column":43}},"name":"prev"},{"type":"Identifier","start":11190,"end":11194,"loc":{"start":{"line":318,"column":45},"end":{"line":318,"column":49}},"name":"curr"}],"body":{"type":"ConditionalExpression","start":11199,"end":11228,"loc":{"start":{"line":318,"column":54},"end":{"line":318,"column":83}},"test":{"type":"Identifier","start":11199,"end":11203,"loc":{"start":{"line":318,"column":54},"end":{"line":318,"column":58}},"name":"prev"},"consequent":{"type":"MemberExpression","start":11206,"end":11216,"loc":{"start":{"line":318,"column":61},"end":{"line":318,"column":71}},"object":{"type":"Identifier","start":11206,"end":11210,"loc":{"start":{"line":318,"column":61},"end":{"line":318,"column":65}},"name":"prev"},"property":{"type":"Identifier","start":11211,"end":11215,"loc":{"start":{"line":318,"column":66},"end":{"line":318,"column":70}},"name":"curr"},"computed":true},"alternate":{"type":"Identifier","start":11219,"end":11228,"loc":{"start":{"line":318,"column":74},"end":{"line":318,"column":83}},"name":"undefined"}}},{"type":"Identifier","start":11230,"end":11246,"loc":{"start":{"line":318,"column":85},"end":{"line":318,"column":101}},"name":"companionOptions"}]}}],"kind":"const"},{"type":"IfStatement","start":11253,"end":11291,"loc":{"start":{"line":320,"column":4},"end":{"line":320,"column":42}},"test":{"type":"UnaryExpression","start":11257,"end":11263,"loc":{"start":{"line":320,"column":8},"end":{"line":320,"column":14}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":11258,"end":11263,"loc":{"start":{"line":320,"column":9},"end":{"line":320,"column":14}},"name":"value"}},"consequent":{"type":"ExpressionStatement","start":11265,"end":11291,"loc":{"start":{"line":320,"column":16},"end":{"line":320,"column":42}},"expression":{"type":"CallExpression","start":11265,"end":11291,"loc":{"start":{"line":320,"column":16},"end":{"line":320,"column":42}},"callee":{"type":"MemberExpression","start":11265,"end":11281,"loc":{"start":{"line":320,"column":16},"end":{"line":320,"column":32}},"object":{"type":"Identifier","start":11265,"end":11276,"loc":{"start":{"line":320,"column":16},"end":{"line":320,"column":27}},"name":"unspecified"},"property":{"type":"Identifier","start":11277,"end":11281,"loc":{"start":{"line":320,"column":28},"end":{"line":320,"column":32}},"name":"push"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":11282,"end":11290,"loc":{"start":{"line":320,"column":33},"end":{"line":320,"column":41}},"expressions":[{"type":"Identifier","start":11286,"end":11287,"loc":{"start":{"line":320,"column":37},"end":{"line":320,"column":38}},"name":"i"}],"quasis":[{"type":"TemplateElement","start":11283,"end":11284,"loc":{"start":{"line":320,"column":34},"end":{"line":320,"column":35}},"value":{"raw":"\"","cooked":"\""},"tail":false},{"type":"TemplateElement","start":11288,"end":11289,"loc":{"start":{"line":320,"column":39},"end":{"line":320,"column":40}},"value":{"raw":"\"","cooked":"\""},"tail":true}]}]}},"alternate":null}]}}]}},{"type":"IfStatement","start":11351,"end":11531,"loc":{"start":{"line":324,"column":2},"end":{"line":327,"column":3}},"test":{"type":"MemberExpression","start":11355,"end":11373,"loc":{"start":{"line":324,"column":6},"end":{"line":324,"column":24}},"object":{"type":"Identifier","start":11355,"end":11366,"loc":{"start":{"line":324,"column":6},"end":{"line":324,"column":17}},"name":"unspecified"},"property":{"type":"Identifier","start":11367,"end":11373,"loc":{"start":{"line":324,"column":18},"end":{"line":324,"column":24}},"name":"length"},"computed":false},"consequent":{"type":"BlockStatement","start":11375,"end":11531,"loc":{"start":{"line":324,"column":26},"end":{"line":327,"column":3}},"body":[{"type":"VariableDeclaration","start":11381,"end":11459,"loc":{"start":{"line":325,"column":4},"end":{"line":325,"column":82}},"declarations":[{"type":"VariableDeclarator","start":11387,"end":11459,"loc":{"start":{"line":325,"column":10},"end":{"line":325,"column":82}},"id":{"type":"Identifier","start":11387,"end":11400,"loc":{"start":{"line":325,"column":10},"end":{"line":325,"column":23}},"name":"messagePrefix"},"init":{"type":"Literal","start":11403,"end":11459,"loc":{"start":{"line":325,"column":26},"end":{"line":325,"column":82}},"value":"Please specify the following options to use companion:","raw":"'Please specify the following options to use companion:'"}}],"kind":"const"},{"type":"ThrowStatement","start":11464,"end":11527,"loc":{"start":{"line":326,"column":4},"end":{"line":326,"column":67}},"argument":{"type":"NewExpression","start":11470,"end":11527,"loc":{"start":{"line":326,"column":10},"end":{"line":326,"column":67}},"callee":{"type":"Identifier","start":11474,"end":11479,"loc":{"start":{"line":326,"column":14},"end":{"line":326,"column":19}},"name":"Error"},"arguments":[{"type":"TemplateLiteral","start":11480,"end":11526,"loc":{"start":{"line":326,"column":20},"end":{"line":326,"column":66}},"expressions":[{"type":"Identifier","start":11483,"end":11496,"loc":{"start":{"line":326,"column":23},"end":{"line":326,"column":36}},"name":"messagePrefix"},{"type":"CallExpression","start":11501,"end":11524,"loc":{"start":{"line":326,"column":41},"end":{"line":326,"column":64}},"callee":{"type":"MemberExpression","start":11501,"end":11517,"loc":{"start":{"line":326,"column":41},"end":{"line":326,"column":57}},"object":{"type":"Identifier","start":11501,"end":11512,"loc":{"start":{"line":326,"column":41},"end":{"line":326,"column":52}},"name":"unspecified"},"property":{"type":"Identifier","start":11513,"end":11517,"loc":{"start":{"line":326,"column":53},"end":{"line":326,"column":57}},"name":"join"},"computed":false},"arguments":[{"type":"Literal","start":11518,"end":11523,"loc":{"start":{"line":326,"column":58},"end":{"line":326,"column":63}},"value":",\n","raw":"',\\n'"}]}],"quasis":[{"type":"TemplateElement","start":11481,"end":11481,"loc":{"start":{"line":326,"column":21},"end":{"line":326,"column":21}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":11497,"end":11499,"loc":{"start":{"line":326,"column":37},"end":{"line":326,"column":39}},"value":{"raw":"\\n","cooked":"\n"},"tail":false},{"type":"TemplateElement","start":11525,"end":11525,"loc":{"start":{"line":326,"column":65},"end":{"line":326,"column":65}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]},"alternate":null,"comments":[{"type":"Line","value":" vaidate that all required config is specified","start":11300,"end":11348,"loc":{"start":{"line":323,"column":2},"end":{"line":323,"column":50}}}]},{"type":"TryStatement","start":11596,"end":11858,"loc":{"start":{"line":330,"column":2},"end":{"line":337,"column":3}},"block":{"type":"BlockStatement","start":11600,"end":11692,"loc":{"start":{"line":330,"column":6},"end":{"line":333,"column":3}},"body":[{"type":"ExpressionStatement","start":11624,"end":11688,"loc":{"start":{"line":332,"column":4},"end":{"line":332,"column":68}},"expression":{"type":"CallExpression","start":11624,"end":11688,"loc":{"start":{"line":332,"column":4},"end":{"line":332,"column":68}},"callee":{"type":"MemberExpression","start":11624,"end":11637,"loc":{"start":{"line":332,"column":4},"end":{"line":332,"column":17}},"object":{"type":"Identifier","start":11624,"end":11626,"loc":{"start":{"line":332,"column":4},"end":{"line":332,"column":6}},"name":"fs"},"property":{"type":"Identifier","start":11627,"end":11637,"loc":{"start":{"line":332,"column":7},"end":{"line":332,"column":17}},"name":"accessSync"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":11638,"end":11668,"loc":{"start":{"line":332,"column":18},"end":{"line":332,"column":48}},"expressions":[{"type":"MemberExpression","start":11641,"end":11666,"loc":{"start":{"line":332,"column":21},"end":{"line":332,"column":46}},"object":{"type":"Identifier","start":11641,"end":11657,"loc":{"start":{"line":332,"column":21},"end":{"line":332,"column":37}},"name":"companionOptions"},"property":{"type":"Identifier","start":11658,"end":11666,"loc":{"start":{"line":332,"column":38},"end":{"line":332,"column":46}},"name":"filePath"},"computed":false}],"quasis":[{"type":"TemplateElement","start":11639,"end":11639,"loc":{"start":{"line":332,"column":19},"end":{"line":332,"column":19}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":11667,"end":11667,"loc":{"start":{"line":332,"column":47},"end":{"line":332,"column":47}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"BinaryExpression","start":11670,"end":11687,"loc":{"start":{"line":332,"column":50},"end":{"line":332,"column":67}},"left":{"type":"MemberExpression","start":11670,"end":11677,"loc":{"start":{"line":332,"column":50},"end":{"line":332,"column":57}},"object":{"type":"Identifier","start":11670,"end":11672,"loc":{"start":{"line":332,"column":50},"end":{"line":332,"column":52}},"name":"fs"},"property":{"type":"Identifier","start":11673,"end":11677,"loc":{"start":{"line":332,"column":53},"end":{"line":332,"column":57}},"name":"R_OK"},"computed":false},"operator":"|","right":{"type":"MemberExpression","start":11680,"end":11687,"loc":{"start":{"line":332,"column":60},"end":{"line":332,"column":67}},"object":{"type":"Identifier","start":11680,"end":11682,"loc":{"start":{"line":332,"column":60},"end":{"line":332,"column":62}},"name":"fs"},"property":{"type":"Identifier","start":11683,"end":11687,"loc":{"start":{"line":332,"column":63},"end":{"line":332,"column":67}},"name":"W_OK"},"computed":false}}]},"comments":[{"type":"Line","value":" @ts-ignore","start":11606,"end":11619,"loc":{"start":{"line":331,"column":4},"end":{"line":331,"column":17}}}]}]},"handler":{"type":"CatchClause","start":11693,"end":11858,"loc":{"start":{"line":333,"column":4},"end":{"line":337,"column":3}},"param":{"type":"Identifier","start":11700,"end":11703,"loc":{"start":{"line":333,"column":11},"end":{"line":333,"column":14}},"name":"err"},"body":{"type":"BlockStatement","start":11705,"end":11858,"loc":{"start":{"line":333,"column":16},"end":{"line":337,"column":3}},"body":[{"type":"ThrowStatement","start":11711,"end":11854,"loc":{"start":{"line":334,"column":4},"end":{"line":336,"column":5}},"argument":{"type":"NewExpression","start":11717,"end":11854,"loc":{"start":{"line":334,"column":10},"end":{"line":336,"column":5}},"callee":{"type":"Identifier","start":11721,"end":11726,"loc":{"start":{"line":334,"column":14},"end":{"line":334,"column":19}},"name":"Error"},"arguments":[{"type":"TemplateLiteral","start":11734,"end":11848,"loc":{"start":{"line":335,"column":6},"end":{"line":335,"column":120}},"expressions":[{"type":"MemberExpression","start":11751,"end":11776,"loc":{"start":{"line":335,"column":23},"end":{"line":335,"column":48}},"object":{"type":"Identifier","start":11751,"end":11767,"loc":{"start":{"line":335,"column":23},"end":{"line":335,"column":39}},"name":"companionOptions"},"property":{"type":"Identifier","start":11768,"end":11776,"loc":{"start":{"line":335,"column":40},"end":{"line":335,"column":48}},"name":"filePath"},"computed":false}],"quasis":[{"type":"TemplateElement","start":11735,"end":11749,"loc":{"start":{"line":335,"column":7},"end":{"line":335,"column":21}},"value":{"raw":"No access to \"","cooked":"No access to \""},"tail":false},{"type":"TemplateElement","start":11777,"end":11847,"loc":{"start":{"line":335,"column":49},"end":{"line":335,"column":119}},"value":{"raw":"\". Please ensure the directory exists and with read/write permissions.","cooked":"\". Please ensure the directory exists and with read/write permissions."},"tail":true}]}]}}]}},"finalizer":null,"comments":[{"type":"Line","value":" validate that specified filePath is writeable/readable.","start":11535,"end":11593,"loc":{"start":{"line":329,"column":2},"end":{"line":329,"column":60}}}]}]}}}],"kind":"const","comments":[{"type":"Block","value":"*\n * validates that the mandatory companion options are set.\n * If it is invalid, it will console an error of unset options and exits the process.\n * If it is valid, nothing happens.\n *\n * @param {object} companionOptions\n ","start":10717,"end":10944,"loc":{"start":{"line":305,"column":0},"end":{"line":311,"column":3}}}]}],"sourceType":"script"}