{"type":"Program","start":0,"end":592,"body":[{"type":"VariableDeclaration","start":0,"end":44,"declarations":[{"type":"VariableDeclarator","start":6,"end":44,"id":{"type":"ObjectPattern","start":6,"end":13,"properties":[{"type":"Property","start":8,"end":11,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":8,"end":11,"name":"app"},"kind":"init","value":{"type":"Identifier","start":8,"end":11,"name":"app"}}]},"init":{"type":"CallExpression","start":16,"end":44,"callee":{"type":"Identifier","start":16,"end":23,"name":"require"},"arguments":[{"type":"Literal","start":24,"end":43,"value":"../src/standalone","raw":"'../src/standalone'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":46,"end":80,"declarations":[{"type":"VariableDeclarator","start":52,"end":80,"id":{"type":"Identifier","start":52,"end":59,"name":"express"},"init":{"type":"CallExpression","start":62,"end":80,"callee":{"type":"Identifier","start":62,"end":69,"name":"require"},"arguments":[{"type":"Literal","start":70,"end":79,"value":"express","raw":"'express'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":81,"end":123,"declarations":[{"type":"VariableDeclarator","start":87,"end":123,"id":{"type":"Identifier","start":87,"end":94,"name":"session"},"init":{"type":"CallExpression","start":97,"end":123,"callee":{"type":"Identifier","start":97,"end":104,"name":"require"},"arguments":[{"type":"Literal","start":105,"end":122,"value":"express-session","raw":"'express-session'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":124,"end":152,"declarations":[{"type":"VariableDeclarator","start":130,"end":152,"id":{"type":"Identifier","start":130,"end":140,"name":"authServer"},"init":{"type":"CallExpression","start":143,"end":152,"callee":{"type":"Identifier","start":143,"end":150,"name":"express"},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":154,"end":237,"expression":{"type":"CallExpression","start":154,"end":237,"callee":{"type":"MemberExpression","start":154,"end":168,"object":{"type":"Identifier","start":154,"end":164,"name":"authServer"},"property":{"type":"Identifier","start":165,"end":168,"name":"use"},"computed":false},"arguments":[{"type":"CallExpression","start":169,"end":236,"callee":{"type":"Identifier","start":169,"end":176,"name":"session"},"arguments":[{"type":"ObjectExpression","start":177,"end":235,"properties":[{"type":"Property","start":179,"end":194,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":179,"end":185,"name":"secret"},"value":{"type":"Literal","start":187,"end":194,"value":"grant","raw":"'grant'"},"kind":"init"},{"type":"Property","start":196,"end":208,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":196,"end":202,"name":"resave"},"value":{"type":"Literal","start":204,"end":208,"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":210,"end":233,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":210,"end":227,"name":"saveUninitialized"},"value":{"type":"Literal","start":229,"end":233,"value":true,"raw":"true"},"kind":"init"}]}]}]}},{"type":"ExpressionStatement","start":238,"end":373,"expression":{"type":"CallExpression","start":238,"end":373,"callee":{"type":"MemberExpression","start":238,"end":252,"object":{"type":"Identifier","start":238,"end":248,"name":"authServer"},"property":{"type":"Identifier","start":249,"end":252,"name":"all"},"computed":false},"arguments":[{"type":"Literal","start":253,"end":265,"value":"*/callback","raw":"'*/callback'"},{"type":"ArrowFunctionExpression","start":267,"end":372,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":268,"end":271,"name":"req"},{"type":"Identifier","start":273,"end":276,"name":"res"},{"type":"Identifier","start":278,"end":282,"name":"next"}],"body":{"type":"BlockStatement","start":287,"end":372,"body":[{"type":"ExpressionStatement","start":291,"end":361,"expression":{"type":"AssignmentExpression","start":291,"end":361,"operator":"=","left":{"type":"MemberExpression","start":291,"end":308,"object":{"type":"MemberExpression","start":291,"end":302,"object":{"type":"Identifier","start":291,"end":294,"name":"req"},"property":{"type":"Identifier","start":295,"end":302,"name":"session"},"computed":false},"property":{"type":"Identifier","start":303,"end":308,"name":"grant"},"computed":false},"right":{"type":"ObjectExpression","start":311,"end":361,"properties":[{"type":"Property","start":317,"end":357,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":317,"end":325,"name":"response"},"value":{"type":"ObjectExpression","start":327,"end":357,"properties":[{"type":"Property","start":329,"end":355,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":329,"end":341,"name":"access_token"},"value":{"type":"Literal","start":343,"end":355,"value":"fake token","raw":"'fake token'"},"kind":"init"}]},"kind":"init"}]}}},{"type":"ExpressionStatement","start":364,"end":370,"expression":{"type":"CallExpression","start":364,"end":370,"callee":{"type":"Identifier","start":364,"end":368,"name":"next"},"arguments":[]}}]}}]}},{"type":"ExpressionStatement","start":374,"end":537,"expression":{"type":"CallExpression","start":374,"end":537,"callee":{"type":"MemberExpression","start":374,"end":388,"object":{"type":"Identifier","start":374,"end":384,"name":"authServer"},"property":{"type":"Identifier","start":385,"end":388,"name":"all"},"computed":false},"arguments":[{"type":"ArrayExpression","start":389,"end":419,"elements":[{"type":"Literal","start":390,"end":404,"value":"*/send-token","raw":"'*/send-token'"},{"type":"Literal","start":406,"end":418,"value":"*/redirect","raw":"'*/redirect'"}]},{"type":"ArrowFunctionExpression","start":421,"end":536,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":422,"end":425,"name":"req"},{"type":"Identifier","start":427,"end":430,"name":"res"},{"type":"Identifier","start":432,"end":436,"name":"next"}],"body":{"type":"BlockStatement","start":441,"end":536,"body":[{"type":"ExpressionStatement","start":445,"end":525,"expression":{"type":"AssignmentExpression","start":445,"end":525,"operator":"=","left":{"type":"MemberExpression","start":445,"end":462,"object":{"type":"MemberExpression","start":445,"end":456,"object":{"type":"Identifier","start":445,"end":448,"name":"req"},"property":{"type":"Identifier","start":449,"end":456,"name":"session"},"computed":false},"property":{"type":"Identifier","start":457,"end":462,"name":"grant"},"computed":false},"right":{"type":"ObjectExpression","start":465,"end":525,"properties":[{"type":"Property","start":467,"end":523,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":467,"end":474,"name":"dynamic"},"value":{"type":"ObjectExpression","start":476,"end":523,"properties":[{"type":"Property","start":478,"end":521,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":478,"end":483,"name":"state"},"value":{"type":"LogicalExpression","start":485,"end":521,"left":{"type":"MemberExpression","start":485,"end":500,"object":{"type":"MemberExpression","start":485,"end":494,"object":{"type":"Identifier","start":485,"end":488,"name":"req"},"property":{"type":"Identifier","start":489,"end":494,"name":"query"},"computed":false},"property":{"type":"Identifier","start":495,"end":500,"name":"state"},"computed":false},"operator":"||","right":{"type":"Literal","start":504,"end":521,"value":"non-empty-value","raw":"'non-empty-value'"}},"kind":"init"}]},"kind":"init"}]}}},{"type":"ExpressionStatement","start":528,"end":534,"expression":{"type":"CallExpression","start":528,"end":534,"callee":{"type":"Identifier","start":528,"end":532,"name":"next"},"arguments":[]}}]}}]}},{"type":"ExpressionStatement","start":539,"end":558,"expression":{"type":"CallExpression","start":539,"end":558,"callee":{"type":"MemberExpression","start":539,"end":553,"object":{"type":"Identifier","start":539,"end":549,"name":"authServer"},"property":{"type":"Identifier","start":550,"end":553,"name":"use"},"computed":false},"arguments":[{"type":"Identifier","start":554,"end":557,"name":"app"}]}},{"type":"ExpressionStatement","start":560,"end":591,"expression":{"type":"AssignmentExpression","start":560,"end":591,"operator":"=","left":{"type":"MemberExpression","start":560,"end":574,"object":{"type":"Identifier","start":560,"end":566,"name":"module"},"property":{"type":"Identifier","start":567,"end":574,"name":"exports"},"computed":false},"right":{"type":"ObjectExpression","start":577,"end":591,"properties":[{"type":"Property","start":579,"end":589,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":579,"end":589,"name":"authServer"},"kind":"init","value":{"type":"Identifier","start":579,"end":589,"name":"authServer"}}]}}}],"sourceType":"script"}