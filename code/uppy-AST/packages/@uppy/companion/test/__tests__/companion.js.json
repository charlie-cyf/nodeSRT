{"type":"Program","start":0,"end":9721,"loc":{"start":{"line":1,"column":0},"end":{"line":317,"column":0}},"body":[{"type":"ExpressionStatement","start":67,"end":93,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"expression":{"type":"CallExpression","start":67,"end":93,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}},"callee":{"type":"MemberExpression","start":67,"end":76,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":9}},"object":{"type":"Identifier","start":67,"end":71,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":4}},"name":"jest"},"property":{"type":"Identifier","start":72,"end":76,"loc":{"start":{"line":3,"column":5},"end":{"line":3,"column":9}},"name":"mock"},"computed":false},"arguments":[{"type":"Literal","start":77,"end":92,"loc":{"start":{"line":3,"column":10},"end":{"line":3,"column":25}},"value":"tus-js-client","raw":"'tus-js-client'"}]}},{"type":"ExpressionStatement","start":94,"end":113,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":19}},"expression":{"type":"CallExpression","start":94,"end":113,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":19}},"callee":{"type":"MemberExpression","start":94,"end":103,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":9}},"object":{"type":"Identifier","start":94,"end":98,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":4}},"name":"jest"},"property":{"type":"Identifier","start":99,"end":103,"loc":{"start":{"line":4,"column":5},"end":{"line":4,"column":9}},"name":"mock"},"computed":false},"arguments":[{"type":"Literal","start":104,"end":112,"loc":{"start":{"line":4,"column":10},"end":{"line":4,"column":18}},"value":"purest","raw":"'purest'"}]}},{"type":"ExpressionStatement","start":114,"end":878,"loc":{"start":{"line":5,"column":0},"end":{"line":29,"column":2}},"expression":{"type":"CallExpression","start":114,"end":878,"loc":{"start":{"line":5,"column":0},"end":{"line":29,"column":2}},"callee":{"type":"MemberExpression","start":114,"end":123,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":9}},"object":{"type":"Identifier","start":114,"end":118,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":4}},"name":"jest"},"property":{"type":"Identifier","start":119,"end":123,"loc":{"start":{"line":5,"column":5},"end":{"line":5,"column":9}},"name":"mock"},"computed":false},"arguments":[{"type":"Literal","start":124,"end":162,"loc":{"start":{"line":5,"column":10},"end":{"line":5,"column":48}},"value":"../../src/server/helpers/oauth-state","raw":"'../../src/server/helpers/oauth-state'"},{"type":"ArrowFunctionExpression","start":164,"end":877,"loc":{"start":{"line":5,"column":50},"end":{"line":29,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":170,"end":877,"loc":{"start":{"line":5,"column":56},"end":{"line":29,"column":1}},"body":[{"type":"ReturnStatement","start":174,"end":875,"loc":{"start":{"line":6,"column":2},"end":{"line":28,"column":3}},"argument":{"type":"ObjectExpression","start":181,"end":875,"loc":{"start":{"line":6,"column":9},"end":{"line":28,"column":3}},"properties":[{"type":"Property","start":187,"end":235,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":52}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":187,"end":200,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":17}},"name":"generateState"},"value":{"type":"ArrowFunctionExpression","start":202,"end":235,"loc":{"start":{"line":7,"column":19},"end":{"line":7,"column":52}},"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"Literal","start":208,"end":235,"loc":{"start":{"line":7,"column":25},"end":{"line":7,"column":52}},"value":"some-cool-nice-encrytpion","raw":"'some-cool-nice-encrytpion'"}},"kind":"init"},{"type":"Property","start":241,"end":286,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":49}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":241,"end":251,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":14}},"name":"addToState"},"value":{"type":"ArrowFunctionExpression","start":253,"end":286,"loc":{"start":{"line":8,"column":16},"end":{"line":8,"column":49}},"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"Literal","start":259,"end":286,"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":49}},"value":"some-cool-nice-encrytpion","raw":"'some-cool-nice-encrytpion'"}},"kind":"init"},{"type":"Property","start":292,"end":871,"loc":{"start":{"line":9,"column":4},"end":{"line":27,"column":5}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":292,"end":304,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":16}},"name":"getFromState"},"value":{"type":"ArrowFunctionExpression","start":306,"end":871,"loc":{"start":{"line":9,"column":18},"end":{"line":27,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":307,"end":312,"loc":{"start":{"line":9,"column":19},"end":{"line":9,"column":24}},"name":"state"},{"type":"Identifier","start":314,"end":317,"loc":{"start":{"line":9,"column":26},"end":{"line":9,"column":29}},"name":"key"}],"body":{"type":"BlockStatement","start":322,"end":871,"loc":{"start":{"line":9,"column":34},"end":{"line":27,"column":5}},"body":[{"type":"IfStatement","start":330,"end":427,"loc":{"start":{"line":10,"column":6},"end":{"line":12,"column":7}},"test":{"type":"BinaryExpression","start":334,"end":377,"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":53}},"left":{"type":"Identifier","start":334,"end":339,"loc":{"start":{"line":10,"column":10},"end":{"line":10,"column":15}},"name":"state"},"operator":"===","right":{"type":"Literal","start":344,"end":377,"loc":{"start":{"line":10,"column":20},"end":{"line":10,"column":53}},"value":"state-with-invalid-instance-url","raw":"'state-with-invalid-instance-url'"}},"consequent":{"type":"BlockStatement","start":379,"end":427,"loc":{"start":{"line":10,"column":55},"end":{"line":12,"column":7}},"body":[{"type":"ReturnStatement","start":389,"end":419,"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":38}},"argument":{"type":"Literal","start":396,"end":419,"loc":{"start":{"line":11,"column":15},"end":{"line":11,"column":38}},"value":"http://localhost:3452","raw":"'http://localhost:3452'"}}]},"alternate":null},{"type":"IfStatement","start":435,"end":559,"loc":{"start":{"line":14,"column":6},"end":{"line":16,"column":7}},"test":{"type":"LogicalExpression","start":439,"end":502,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":73}},"left":{"type":"BinaryExpression","start":439,"end":475,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":46}},"left":{"type":"Identifier","start":439,"end":444,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":15}},"name":"state"},"operator":"===","right":{"type":"Literal","start":449,"end":475,"loc":{"start":{"line":14,"column":20},"end":{"line":14,"column":46}},"value":"state-with-older-version","raw":"'state-with-older-version'"}},"operator":"&&","right":{"type":"BinaryExpression","start":479,"end":502,"loc":{"start":{"line":14,"column":50},"end":{"line":14,"column":73}},"left":{"type":"Identifier","start":479,"end":482,"loc":{"start":{"line":14,"column":50},"end":{"line":14,"column":53}},"name":"key"},"operator":"===","right":{"type":"Literal","start":487,"end":502,"loc":{"start":{"line":14,"column":58},"end":{"line":14,"column":73}},"value":"clientVersion","raw":"'clientVersion'"}}},"consequent":{"type":"BlockStatement","start":504,"end":559,"loc":{"start":{"line":14,"column":75},"end":{"line":16,"column":7}},"body":[{"type":"ReturnStatement","start":514,"end":551,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":45}},"argument":{"type":"Literal","start":521,"end":551,"loc":{"start":{"line":15,"column":15},"end":{"line":15,"column":45}},"value":"@uppy/companion-client=1.0.1","raw":"'@uppy/companion-client=1.0.1'"}}]},"alternate":null},{"type":"IfStatement","start":567,"end":691,"loc":{"start":{"line":18,"column":6},"end":{"line":20,"column":7}},"test":{"type":"LogicalExpression","start":571,"end":634,"loc":{"start":{"line":18,"column":10},"end":{"line":18,"column":73}},"left":{"type":"BinaryExpression","start":571,"end":607,"loc":{"start":{"line":18,"column":10},"end":{"line":18,"column":46}},"left":{"type":"Identifier","start":571,"end":576,"loc":{"start":{"line":18,"column":10},"end":{"line":18,"column":15}},"name":"state"},"operator":"===","right":{"type":"Literal","start":581,"end":607,"loc":{"start":{"line":18,"column":20},"end":{"line":18,"column":46}},"value":"state-with-newer-version","raw":"'state-with-newer-version'"}},"operator":"&&","right":{"type":"BinaryExpression","start":611,"end":634,"loc":{"start":{"line":18,"column":50},"end":{"line":18,"column":73}},"left":{"type":"Identifier","start":611,"end":614,"loc":{"start":{"line":18,"column":50},"end":{"line":18,"column":53}},"name":"key"},"operator":"===","right":{"type":"Literal","start":619,"end":634,"loc":{"start":{"line":18,"column":58},"end":{"line":18,"column":73}},"value":"clientVersion","raw":"'clientVersion'"}}},"consequent":{"type":"BlockStatement","start":636,"end":691,"loc":{"start":{"line":18,"column":75},"end":{"line":20,"column":7}},"body":[{"type":"ReturnStatement","start":646,"end":683,"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":45}},"argument":{"type":"Literal","start":653,"end":683,"loc":{"start":{"line":19,"column":15},"end":{"line":19,"column":45}},"value":"@uppy/companion-client=1.0.3","raw":"'@uppy/companion-client=1.0.3'"}}]},"alternate":null},{"type":"IfStatement","start":699,"end":827,"loc":{"start":{"line":22,"column":6},"end":{"line":24,"column":7}},"test":{"type":"LogicalExpression","start":703,"end":776,"loc":{"start":{"line":22,"column":10},"end":{"line":22,"column":83}},"left":{"type":"BinaryExpression","start":703,"end":749,"loc":{"start":{"line":22,"column":10},"end":{"line":22,"column":56}},"left":{"type":"Identifier","start":703,"end":708,"loc":{"start":{"line":22,"column":10},"end":{"line":22,"column":15}},"name":"state"},"operator":"===","right":{"type":"Literal","start":713,"end":749,"loc":{"start":{"line":22,"column":20},"end":{"line":22,"column":56}},"value":"state-with-newer-version-old-style","raw":"'state-with-newer-version-old-style'"}},"operator":"&&","right":{"type":"BinaryExpression","start":753,"end":776,"loc":{"start":{"line":22,"column":60},"end":{"line":22,"column":83}},"left":{"type":"Identifier","start":753,"end":756,"loc":{"start":{"line":22,"column":60},"end":{"line":22,"column":63}},"name":"key"},"operator":"===","right":{"type":"Literal","start":761,"end":776,"loc":{"start":{"line":22,"column":68},"end":{"line":22,"column":83}},"value":"clientVersion","raw":"'clientVersion'"}}},"consequent":{"type":"BlockStatement","start":778,"end":827,"loc":{"start":{"line":22,"column":85},"end":{"line":24,"column":7}},"body":[{"type":"ReturnStatement","start":788,"end":819,"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":39}},"argument":{"type":"Literal","start":795,"end":819,"loc":{"start":{"line":23,"column":15},"end":{"line":23,"column":39}},"value":"companion-client:1.0.2","raw":"'companion-client:1.0.2'"}}]},"alternate":null},{"type":"ReturnStatement","start":835,"end":865,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":36}},"argument":{"type":"Literal","start":842,"end":865,"loc":{"start":{"line":26,"column":13},"end":{"line":26,"column":36}},"value":"http://localhost:3020","raw":"'http://localhost:3020'"}}]}},"kind":"init"}]}}]}}]}},{"type":"VariableDeclaration","start":880,"end":916,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":36}},"declarations":[{"type":"VariableDeclarator","start":886,"end":916,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":36}},"id":{"type":"Identifier","start":886,"end":893,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":13}},"name":"request"},"init":{"type":"CallExpression","start":896,"end":916,"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":36}},"callee":{"type":"Identifier","start":896,"end":903,"loc":{"start":{"line":31,"column":16},"end":{"line":31,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":904,"end":915,"loc":{"start":{"line":31,"column":24},"end":{"line":31,"column":35}},"value":"supertest","raw":"'supertest'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":917,"end":977,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":60}},"declarations":[{"type":"VariableDeclarator","start":923,"end":977,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":60}},"id":{"type":"Identifier","start":923,"end":935,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":18}},"name":"tokenService"},"init":{"type":"CallExpression","start":938,"end":977,"loc":{"start":{"line":32,"column":21},"end":{"line":32,"column":60}},"callee":{"type":"Identifier","start":938,"end":945,"loc":{"start":{"line":32,"column":21},"end":{"line":32,"column":28}},"name":"require"},"arguments":[{"type":"Literal","start":946,"end":976,"loc":{"start":{"line":32,"column":29},"end":{"line":32,"column":59}},"value":"../../src/server/helpers/jwt","raw":"'../../src/server/helpers/jwt'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":978,"end":1025,"loc":{"start":{"line":33,"column":0},"end":{"line":33,"column":47}},"declarations":[{"type":"VariableDeclarator","start":984,"end":1025,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":47}},"id":{"type":"ObjectPattern","start":984,"end":998,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":20}},"properties":[{"type":"Property","start":986,"end":996,"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":18}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":986,"end":996,"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":18}},"name":"authServer"},"kind":"init","value":{"type":"Identifier","start":986,"end":996,"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":18}},"name":"authServer"}}]},"init":{"type":"CallExpression","start":1001,"end":1025,"loc":{"start":{"line":33,"column":23},"end":{"line":33,"column":47}},"callee":{"type":"Identifier","start":1001,"end":1008,"loc":{"start":{"line":33,"column":23},"end":{"line":33,"column":30}},"name":"require"},"arguments":[{"type":"Literal","start":1009,"end":1024,"loc":{"start":{"line":33,"column":31},"end":{"line":33,"column":46}},"value":"../mockserver","raw":"'../mockserver'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1026,"end":1095,"loc":{"start":{"line":34,"column":0},"end":{"line":37,"column":1}},"declarations":[{"type":"VariableDeclarator","start":1032,"end":1095,"loc":{"start":{"line":34,"column":6},"end":{"line":37,"column":1}},"id":{"type":"Identifier","start":1032,"end":1040,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":14}},"name":"authData"},"init":{"type":"ObjectExpression","start":1043,"end":1095,"loc":{"start":{"line":34,"column":17},"end":{"line":37,"column":1}},"properties":[{"type":"Property","start":1047,"end":1069,"loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1047,"end":1054,"loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":9}},"name":"dropbox"},"value":{"type":"Literal","start":1056,"end":1069,"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":24}},"value":"token value","raw":"'token value'"},"kind":"init"},{"type":"Property","start":1073,"end":1093,"loc":{"start":{"line":36,"column":2},"end":{"line":36,"column":22}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1073,"end":1078,"loc":{"start":{"line":36,"column":2},"end":{"line":36,"column":7}},"name":"drive"},"value":{"type":"Literal","start":1080,"end":1093,"loc":{"start":{"line":36,"column":9},"end":{"line":36,"column":22}},"value":"token value","raw":"'token value'"},"kind":"init"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1096,"end":1176,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":80}},"declarations":[{"type":"VariableDeclarator","start":1102,"end":1176,"loc":{"start":{"line":38,"column":6},"end":{"line":38,"column":80}},"id":{"type":"Identifier","start":1102,"end":1107,"loc":{"start":{"line":38,"column":6},"end":{"line":38,"column":11}},"name":"token"},"init":{"type":"CallExpression","start":1110,"end":1176,"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":80}},"callee":{"type":"MemberExpression","start":1110,"end":1136,"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":40}},"object":{"type":"Identifier","start":1110,"end":1122,"loc":{"start":{"line":38,"column":14},"end":{"line":38,"column":26}},"name":"tokenService"},"property":{"type":"Identifier","start":1123,"end":1136,"loc":{"start":{"line":38,"column":27},"end":{"line":38,"column":40}},"name":"generateToken"},"computed":false},"arguments":[{"type":"Identifier","start":1137,"end":1145,"loc":{"start":{"line":38,"column":41},"end":{"line":38,"column":49}},"name":"authData"},{"type":"MemberExpression","start":1147,"end":1175,"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":79}},"object":{"type":"MemberExpression","start":1147,"end":1158,"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":62}},"object":{"type":"Identifier","start":1147,"end":1154,"loc":{"start":{"line":38,"column":51},"end":{"line":38,"column":58}},"name":"process"},"property":{"type":"Identifier","start":1155,"end":1158,"loc":{"start":{"line":38,"column":59},"end":{"line":38,"column":62}},"name":"env"},"computed":false},"property":{"type":"Identifier","start":1159,"end":1175,"loc":{"start":{"line":38,"column":63},"end":{"line":38,"column":79}},"name":"COMPANION_SECRET"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1177,"end":1224,"loc":{"start":{"line":39,"column":0},"end":{"line":39,"column":47}},"declarations":[{"type":"VariableDeclarator","start":1183,"end":1224,"loc":{"start":{"line":39,"column":6},"end":{"line":39,"column":47}},"id":{"type":"Identifier","start":1183,"end":1194,"loc":{"start":{"line":39,"column":6},"end":{"line":39,"column":17}},"name":"OAUTH_STATE"},"init":{"type":"Literal","start":1197,"end":1224,"loc":{"start":{"line":39,"column":20},"end":{"line":39,"column":47}},"value":"some-cool-nice-encrytpion","raw":"'some-cool-nice-encrytpion'"}}],"kind":"const"},{"type":"ExpressionStatement","start":1226,"end":1510,"loc":{"start":{"line":41,"column":0},"end":{"line":49,"column":2}},"expression":{"type":"CallExpression","start":1226,"end":1510,"loc":{"start":{"line":41,"column":0},"end":{"line":49,"column":2}},"callee":{"type":"Identifier","start":1226,"end":1234,"loc":{"start":{"line":41,"column":0},"end":{"line":41,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":1235,"end":1252,"loc":{"start":{"line":41,"column":9},"end":{"line":41,"column":26}},"value":"set i-am header","raw":"'set i-am header'"},{"type":"ArrowFunctionExpression","start":1254,"end":1509,"loc":{"start":{"line":41,"column":28},"end":{"line":49,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1260,"end":1509,"loc":{"start":{"line":41,"column":34},"end":{"line":49,"column":1}},"body":[{"type":"ExpressionStatement","start":1264,"end":1507,"loc":{"start":{"line":42,"column":2},"end":{"line":48,"column":4}},"expression":{"type":"CallExpression","start":1264,"end":1507,"loc":{"start":{"line":42,"column":2},"end":{"line":48,"column":4}},"callee":{"type":"Identifier","start":1264,"end":1268,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":1269,"end":1298,"loc":{"start":{"line":42,"column":7},"end":{"line":42,"column":36}},"value":"set i-am header in response","raw":"'set i-am header in response'"},{"type":"ArrowFunctionExpression","start":1300,"end":1506,"loc":{"start":{"line":42,"column":38},"end":{"line":48,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1306,"end":1506,"loc":{"start":{"line":42,"column":44},"end":{"line":48,"column":3}},"body":[{"type":"ReturnStatement","start":1312,"end":1502,"loc":{"start":{"line":43,"column":4},"end":{"line":47,"column":78}},"argument":{"type":"CallExpression","start":1319,"end":1502,"loc":{"start":{"line":43,"column":11},"end":{"line":47,"column":78}},"callee":{"type":"MemberExpression","start":1319,"end":1435,"loc":{"start":{"line":43,"column":11},"end":{"line":47,"column":11}},"object":{"type":"CallExpression","start":1319,"end":1423,"loc":{"start":{"line":43,"column":11},"end":{"line":46,"column":18}},"callee":{"type":"MemberExpression","start":1319,"end":1418,"loc":{"start":{"line":43,"column":11},"end":{"line":46,"column":13}},"object":{"type":"CallExpression","start":1319,"end":1404,"loc":{"start":{"line":43,"column":11},"end":{"line":45,"column":36}},"callee":{"type":"MemberExpression","start":1319,"end":1378,"loc":{"start":{"line":43,"column":11},"end":{"line":45,"column":10}},"object":{"type":"CallExpression","start":1319,"end":1367,"loc":{"start":{"line":43,"column":11},"end":{"line":44,"column":28}},"callee":{"type":"MemberExpression","start":1319,"end":1349,"loc":{"start":{"line":43,"column":11},"end":{"line":44,"column":10}},"object":{"type":"CallExpression","start":1319,"end":1338,"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":30}},"callee":{"type":"Identifier","start":1319,"end":1326,"loc":{"start":{"line":43,"column":11},"end":{"line":43,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":1327,"end":1337,"loc":{"start":{"line":43,"column":19},"end":{"line":43,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":1346,"end":1349,"loc":{"start":{"line":44,"column":7},"end":{"line":44,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":1350,"end":1366,"loc":{"start":{"line":44,"column":11},"end":{"line":44,"column":27}},"value":"/dropbox/list/","raw":"'/dropbox/list/'"}]},"property":{"type":"Identifier","start":1375,"end":1378,"loc":{"start":{"line":45,"column":7},"end":{"line":45,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":1379,"end":1396,"loc":{"start":{"line":45,"column":11},"end":{"line":45,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":1398,"end":1403,"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":1412,"end":1418,"loc":{"start":{"line":46,"column":7},"end":{"line":46,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":1419,"end":1422,"loc":{"start":{"line":46,"column":14},"end":{"line":46,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":1431,"end":1435,"loc":{"start":{"line":47,"column":7},"end":{"line":47,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1436,"end":1501,"loc":{"start":{"line":47,"column":12},"end":{"line":47,"column":77}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1437,"end":1440,"loc":{"start":{"line":47,"column":13},"end":{"line":47,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":1445,"end":1501,"loc":{"start":{"line":47,"column":21},"end":{"line":47,"column":77}},"callee":{"type":"MemberExpression","start":1445,"end":1476,"loc":{"start":{"line":47,"column":21},"end":{"line":47,"column":52}},"object":{"type":"CallExpression","start":1445,"end":1471,"loc":{"start":{"line":47,"column":21},"end":{"line":47,"column":47}},"callee":{"type":"Identifier","start":1445,"end":1451,"loc":{"start":{"line":47,"column":21},"end":{"line":47,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":1452,"end":1470,"loc":{"start":{"line":47,"column":28},"end":{"line":47,"column":46}},"object":{"type":"MemberExpression","start":1452,"end":1462,"loc":{"start":{"line":47,"column":28},"end":{"line":47,"column":38}},"object":{"type":"Identifier","start":1452,"end":1455,"loc":{"start":{"line":47,"column":28},"end":{"line":47,"column":31}},"name":"res"},"property":{"type":"Identifier","start":1456,"end":1462,"loc":{"start":{"line":47,"column":32},"end":{"line":47,"column":38}},"name":"header"},"computed":false},"property":{"type":"Literal","start":1463,"end":1469,"loc":{"start":{"line":47,"column":39},"end":{"line":47,"column":45}},"value":"i-am","raw":"'i-am'"},"computed":true}]},"property":{"type":"Identifier","start":1472,"end":1476,"loc":{"start":{"line":47,"column":48},"end":{"line":47,"column":52}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":1477,"end":1500,"loc":{"start":{"line":47,"column":53},"end":{"line":47,"column":76}},"value":"http://localhost:3020","raw":"'http://localhost:3020'"}]}}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":1512,"end":2019,"loc":{"start":{"line":51,"column":0},"end":{"line":67,"column":2}},"expression":{"type":"CallExpression","start":1512,"end":2019,"loc":{"start":{"line":51,"column":0},"end":{"line":67,"column":2}},"callee":{"type":"Identifier","start":1512,"end":1520,"loc":{"start":{"line":51,"column":0},"end":{"line":51,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":1521,"end":1542,"loc":{"start":{"line":51,"column":9},"end":{"line":51,"column":30}},"value":"list provider files","raw":"'list provider files'"},{"type":"ArrowFunctionExpression","start":1544,"end":2018,"loc":{"start":{"line":51,"column":32},"end":{"line":67,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1550,"end":2018,"loc":{"start":{"line":51,"column":38},"end":{"line":67,"column":1}},"body":[{"type":"ExpressionStatement","start":1554,"end":1781,"loc":{"start":{"line":52,"column":2},"end":{"line":58,"column":4}},"expression":{"type":"CallExpression","start":1554,"end":1781,"loc":{"start":{"line":52,"column":2},"end":{"line":58,"column":4}},"callee":{"type":"Identifier","start":1554,"end":1558,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":1559,"end":1583,"loc":{"start":{"line":52,"column":7},"end":{"line":52,"column":31}},"value":"list files for dropbox","raw":"'list files for dropbox'"},{"type":"ArrowFunctionExpression","start":1585,"end":1780,"loc":{"start":{"line":52,"column":33},"end":{"line":58,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1591,"end":1780,"loc":{"start":{"line":52,"column":39},"end":{"line":58,"column":3}},"body":[{"type":"ReturnStatement","start":1597,"end":1776,"loc":{"start":{"line":53,"column":4},"end":{"line":57,"column":67}},"argument":{"type":"CallExpression","start":1604,"end":1776,"loc":{"start":{"line":53,"column":11},"end":{"line":57,"column":67}},"callee":{"type":"MemberExpression","start":1604,"end":1720,"loc":{"start":{"line":53,"column":11},"end":{"line":57,"column":11}},"object":{"type":"CallExpression","start":1604,"end":1708,"loc":{"start":{"line":53,"column":11},"end":{"line":56,"column":18}},"callee":{"type":"MemberExpression","start":1604,"end":1703,"loc":{"start":{"line":53,"column":11},"end":{"line":56,"column":13}},"object":{"type":"CallExpression","start":1604,"end":1689,"loc":{"start":{"line":53,"column":11},"end":{"line":55,"column":36}},"callee":{"type":"MemberExpression","start":1604,"end":1663,"loc":{"start":{"line":53,"column":11},"end":{"line":55,"column":10}},"object":{"type":"CallExpression","start":1604,"end":1652,"loc":{"start":{"line":53,"column":11},"end":{"line":54,"column":28}},"callee":{"type":"MemberExpression","start":1604,"end":1634,"loc":{"start":{"line":53,"column":11},"end":{"line":54,"column":10}},"object":{"type":"CallExpression","start":1604,"end":1623,"loc":{"start":{"line":53,"column":11},"end":{"line":53,"column":30}},"callee":{"type":"Identifier","start":1604,"end":1611,"loc":{"start":{"line":53,"column":11},"end":{"line":53,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":1612,"end":1622,"loc":{"start":{"line":53,"column":19},"end":{"line":53,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":1631,"end":1634,"loc":{"start":{"line":54,"column":7},"end":{"line":54,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":1635,"end":1651,"loc":{"start":{"line":54,"column":11},"end":{"line":54,"column":27}},"value":"/dropbox/list/","raw":"'/dropbox/list/'"}]},"property":{"type":"Identifier","start":1660,"end":1663,"loc":{"start":{"line":55,"column":7},"end":{"line":55,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":1664,"end":1681,"loc":{"start":{"line":55,"column":11},"end":{"line":55,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":1683,"end":1688,"loc":{"start":{"line":55,"column":30},"end":{"line":55,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":1697,"end":1703,"loc":{"start":{"line":56,"column":7},"end":{"line":56,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":1704,"end":1707,"loc":{"start":{"line":56,"column":14},"end":{"line":56,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":1716,"end":1720,"loc":{"start":{"line":57,"column":7},"end":{"line":57,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1721,"end":1775,"loc":{"start":{"line":57,"column":12},"end":{"line":57,"column":66}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1722,"end":1725,"loc":{"start":{"line":57,"column":13},"end":{"line":57,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":1730,"end":1775,"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":66}},"callee":{"type":"MemberExpression","start":1730,"end":1760,"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":51}},"object":{"type":"CallExpression","start":1730,"end":1755,"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":46}},"callee":{"type":"Identifier","start":1730,"end":1736,"loc":{"start":{"line":57,"column":21},"end":{"line":57,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":1737,"end":1754,"loc":{"start":{"line":57,"column":28},"end":{"line":57,"column":45}},"object":{"type":"MemberExpression","start":1737,"end":1745,"loc":{"start":{"line":57,"column":28},"end":{"line":57,"column":36}},"object":{"type":"Identifier","start":1737,"end":1740,"loc":{"start":{"line":57,"column":28},"end":{"line":57,"column":31}},"name":"res"},"property":{"type":"Identifier","start":1741,"end":1745,"loc":{"start":{"line":57,"column":32},"end":{"line":57,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":1746,"end":1754,"loc":{"start":{"line":57,"column":37},"end":{"line":57,"column":45}},"name":"username"},"computed":false}]},"property":{"type":"Identifier","start":1756,"end":1760,"loc":{"start":{"line":57,"column":47},"end":{"line":57,"column":51}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":1761,"end":1774,"loc":{"start":{"line":57,"column":52},"end":{"line":57,"column":65}},"value":"foo@bar.com","raw":"'foo@bar.com'"}]}}]}}]}}]}},{"type":"ExpressionStatement","start":1785,"end":2016,"loc":{"start":{"line":60,"column":2},"end":{"line":66,"column":4}},"expression":{"type":"CallExpression","start":1785,"end":2016,"loc":{"start":{"line":60,"column":2},"end":{"line":66,"column":4}},"callee":{"type":"Identifier","start":1785,"end":1789,"loc":{"start":{"line":60,"column":2},"end":{"line":60,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":1790,"end":1819,"loc":{"start":{"line":60,"column":7},"end":{"line":60,"column":36}},"value":"list files for google drive","raw":"'list files for google drive'"},{"type":"ArrowFunctionExpression","start":1821,"end":2015,"loc":{"start":{"line":60,"column":38},"end":{"line":66,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1827,"end":2015,"loc":{"start":{"line":60,"column":44},"end":{"line":66,"column":3}},"body":[{"type":"ReturnStatement","start":1833,"end":2011,"loc":{"start":{"line":61,"column":4},"end":{"line":65,"column":68}},"argument":{"type":"CallExpression","start":1840,"end":2011,"loc":{"start":{"line":61,"column":11},"end":{"line":65,"column":68}},"callee":{"type":"MemberExpression","start":1840,"end":1954,"loc":{"start":{"line":61,"column":11},"end":{"line":65,"column":11}},"object":{"type":"CallExpression","start":1840,"end":1942,"loc":{"start":{"line":61,"column":11},"end":{"line":64,"column":18}},"callee":{"type":"MemberExpression","start":1840,"end":1937,"loc":{"start":{"line":61,"column":11},"end":{"line":64,"column":13}},"object":{"type":"CallExpression","start":1840,"end":1923,"loc":{"start":{"line":61,"column":11},"end":{"line":63,"column":36}},"callee":{"type":"MemberExpression","start":1840,"end":1897,"loc":{"start":{"line":61,"column":11},"end":{"line":63,"column":10}},"object":{"type":"CallExpression","start":1840,"end":1886,"loc":{"start":{"line":61,"column":11},"end":{"line":62,"column":26}},"callee":{"type":"MemberExpression","start":1840,"end":1870,"loc":{"start":{"line":61,"column":11},"end":{"line":62,"column":10}},"object":{"type":"CallExpression","start":1840,"end":1859,"loc":{"start":{"line":61,"column":11},"end":{"line":61,"column":30}},"callee":{"type":"Identifier","start":1840,"end":1847,"loc":{"start":{"line":61,"column":11},"end":{"line":61,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":1848,"end":1858,"loc":{"start":{"line":61,"column":19},"end":{"line":61,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":1867,"end":1870,"loc":{"start":{"line":62,"column":7},"end":{"line":62,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":1871,"end":1885,"loc":{"start":{"line":62,"column":11},"end":{"line":62,"column":25}},"value":"/drive/list/","raw":"'/drive/list/'"}]},"property":{"type":"Identifier","start":1894,"end":1897,"loc":{"start":{"line":63,"column":7},"end":{"line":63,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":1898,"end":1915,"loc":{"start":{"line":63,"column":11},"end":{"line":63,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":1917,"end":1922,"loc":{"start":{"line":63,"column":30},"end":{"line":63,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":1931,"end":1937,"loc":{"start":{"line":64,"column":7},"end":{"line":64,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":1938,"end":1941,"loc":{"start":{"line":64,"column":14},"end":{"line":64,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":1950,"end":1954,"loc":{"start":{"line":65,"column":7},"end":{"line":65,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1955,"end":2010,"loc":{"start":{"line":65,"column":12},"end":{"line":65,"column":67}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":1956,"end":1959,"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":1964,"end":2010,"loc":{"start":{"line":65,"column":21},"end":{"line":65,"column":67}},"callee":{"type":"MemberExpression","start":1964,"end":1994,"loc":{"start":{"line":65,"column":21},"end":{"line":65,"column":51}},"object":{"type":"CallExpression","start":1964,"end":1989,"loc":{"start":{"line":65,"column":21},"end":{"line":65,"column":46}},"callee":{"type":"Identifier","start":1964,"end":1970,"loc":{"start":{"line":65,"column":21},"end":{"line":65,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":1971,"end":1988,"loc":{"start":{"line":65,"column":28},"end":{"line":65,"column":45}},"object":{"type":"MemberExpression","start":1971,"end":1979,"loc":{"start":{"line":65,"column":28},"end":{"line":65,"column":36}},"object":{"type":"Identifier","start":1971,"end":1974,"loc":{"start":{"line":65,"column":28},"end":{"line":65,"column":31}},"name":"res"},"property":{"type":"Identifier","start":1975,"end":1979,"loc":{"start":{"line":65,"column":32},"end":{"line":65,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":1980,"end":1988,"loc":{"start":{"line":65,"column":37},"end":{"line":65,"column":45}},"name":"username"},"computed":false}]},"property":{"type":"Identifier","start":1990,"end":1994,"loc":{"start":{"line":65,"column":47},"end":{"line":65,"column":51}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":1995,"end":2009,"loc":{"start":{"line":65,"column":52},"end":{"line":65,"column":66}},"value":"ife@bala.com","raw":"'ife@bala.com'"}]}}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":2021,"end":5388,"loc":{"start":{"line":69,"column":0},"end":{"line":178,"column":2}},"expression":{"type":"CallExpression","start":2021,"end":5388,"loc":{"start":{"line":69,"column":0},"end":{"line":178,"column":2}},"callee":{"type":"Identifier","start":2021,"end":2029,"loc":{"start":{"line":69,"column":0},"end":{"line":69,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":2030,"end":2052,"loc":{"start":{"line":69,"column":9},"end":{"line":69,"column":31}},"value":"validate upload data","raw":"'validate upload data'"},{"type":"ArrowFunctionExpression","start":2054,"end":5387,"loc":{"start":{"line":69,"column":33},"end":{"line":178,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2060,"end":5387,"loc":{"start":{"line":69,"column":39},"end":{"line":178,"column":1}},"body":[{"type":"ExpressionStatement","start":2064,"end":2485,"loc":{"start":{"line":70,"column":2},"end":{"line":81,"column":4}},"expression":{"type":"CallExpression","start":2064,"end":2485,"loc":{"start":{"line":70,"column":2},"end":{"line":81,"column":4}},"callee":{"type":"Identifier","start":2064,"end":2068,"loc":{"start":{"line":70,"column":2},"end":{"line":70,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":2069,"end":2108,"loc":{"start":{"line":70,"column":7},"end":{"line":70,"column":46}},"value":"invalid upload protocol gets rejected","raw":"'invalid upload protocol gets rejected'"},{"type":"ArrowFunctionExpression","start":2110,"end":2484,"loc":{"start":{"line":70,"column":48},"end":{"line":81,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2116,"end":2484,"loc":{"start":{"line":70,"column":54},"end":{"line":81,"column":3}},"body":[{"type":"ReturnStatement","start":2122,"end":2480,"loc":{"start":{"line":71,"column":4},"end":{"line":80,"column":85}},"argument":{"type":"CallExpression","start":2129,"end":2480,"loc":{"start":{"line":71,"column":11},"end":{"line":80,"column":85}},"callee":{"type":"MemberExpression","start":2129,"end":2406,"loc":{"start":{"line":71,"column":11},"end":{"line":80,"column":11}},"object":{"type":"CallExpression","start":2129,"end":2394,"loc":{"start":{"line":71,"column":11},"end":{"line":79,"column":18}},"callee":{"type":"MemberExpression","start":2129,"end":2389,"loc":{"start":{"line":71,"column":11},"end":{"line":79,"column":13}},"object":{"type":"CallExpression","start":2129,"end":2375,"loc":{"start":{"line":71,"column":11},"end":{"line":78,"column":8}},"callee":{"type":"MemberExpression","start":2129,"end":2280,"loc":{"start":{"line":71,"column":11},"end":{"line":75,"column":11}},"object":{"type":"CallExpression","start":2129,"end":2268,"loc":{"start":{"line":71,"column":11},"end":{"line":74,"column":46}},"callee":{"type":"MemberExpression","start":2129,"end":2232,"loc":{"start":{"line":71,"column":11},"end":{"line":74,"column":10}},"object":{"type":"CallExpression","start":2129,"end":2221,"loc":{"start":{"line":71,"column":11},"end":{"line":73,"column":36}},"callee":{"type":"MemberExpression","start":2129,"end":2195,"loc":{"start":{"line":71,"column":11},"end":{"line":73,"column":10}},"object":{"type":"CallExpression","start":2129,"end":2184,"loc":{"start":{"line":71,"column":11},"end":{"line":72,"column":35}},"callee":{"type":"MemberExpression","start":2129,"end":2160,"loc":{"start":{"line":71,"column":11},"end":{"line":72,"column":11}},"object":{"type":"CallExpression","start":2129,"end":2148,"loc":{"start":{"line":71,"column":11},"end":{"line":71,"column":30}},"callee":{"type":"Identifier","start":2129,"end":2136,"loc":{"start":{"line":71,"column":11},"end":{"line":71,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":2137,"end":2147,"loc":{"start":{"line":71,"column":19},"end":{"line":71,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":2156,"end":2160,"loc":{"start":{"line":72,"column":7},"end":{"line":72,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":2161,"end":2183,"loc":{"start":{"line":72,"column":12},"end":{"line":72,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":2192,"end":2195,"loc":{"start":{"line":73,"column":7},"end":{"line":73,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":2196,"end":2213,"loc":{"start":{"line":73,"column":11},"end":{"line":73,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":2215,"end":2220,"loc":{"start":{"line":73,"column":30},"end":{"line":73,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":2229,"end":2232,"loc":{"start":{"line":74,"column":7},"end":{"line":74,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":2233,"end":2247,"loc":{"start":{"line":74,"column":11},"end":{"line":74,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":2249,"end":2267,"loc":{"start":{"line":74,"column":27},"end":{"line":74,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":2276,"end":2280,"loc":{"start":{"line":75,"column":7},"end":{"line":75,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2281,"end":2374,"loc":{"start":{"line":75,"column":12},"end":{"line":78,"column":7}},"properties":[{"type":"Property","start":2291,"end":2334,"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2291,"end":2299,"loc":{"start":{"line":76,"column":8},"end":{"line":76,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":2301,"end":2334,"loc":{"start":{"line":76,"column":18},"end":{"line":76,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":2344,"end":2366,"loc":{"start":{"line":77,"column":8},"end":{"line":77,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2344,"end":2352,"loc":{"start":{"line":77,"column":8},"end":{"line":77,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":2354,"end":2366,"loc":{"start":{"line":77,"column":18},"end":{"line":77,"column":30}},"value":"tusInvalid","raw":"'tusInvalid'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":2383,"end":2389,"loc":{"start":{"line":79,"column":7},"end":{"line":79,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":2390,"end":2393,"loc":{"start":{"line":79,"column":14},"end":{"line":79,"column":17}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":2402,"end":2406,"loc":{"start":{"line":80,"column":7},"end":{"line":80,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2407,"end":2479,"loc":{"start":{"line":80,"column":12},"end":{"line":80,"column":84}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":2408,"end":2411,"loc":{"start":{"line":80,"column":13},"end":{"line":80,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":2416,"end":2479,"loc":{"start":{"line":80,"column":21},"end":{"line":80,"column":84}},"callee":{"type":"MemberExpression","start":2416,"end":2445,"loc":{"start":{"line":80,"column":21},"end":{"line":80,"column":50}},"object":{"type":"CallExpression","start":2416,"end":2440,"loc":{"start":{"line":80,"column":21},"end":{"line":80,"column":45}},"callee":{"type":"Identifier","start":2416,"end":2422,"loc":{"start":{"line":80,"column":21},"end":{"line":80,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":2423,"end":2439,"loc":{"start":{"line":80,"column":28},"end":{"line":80,"column":44}},"object":{"type":"MemberExpression","start":2423,"end":2431,"loc":{"start":{"line":80,"column":28},"end":{"line":80,"column":36}},"object":{"type":"Identifier","start":2423,"end":2426,"loc":{"start":{"line":80,"column":28},"end":{"line":80,"column":31}},"name":"res"},"property":{"type":"Identifier","start":2427,"end":2431,"loc":{"start":{"line":80,"column":32},"end":{"line":80,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":2432,"end":2439,"loc":{"start":{"line":80,"column":37},"end":{"line":80,"column":44}},"name":"message"},"computed":false}]},"property":{"type":"Identifier","start":2441,"end":2445,"loc":{"start":{"line":80,"column":46},"end":{"line":80,"column":50}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":2446,"end":2478,"loc":{"start":{"line":80,"column":51},"end":{"line":80,"column":83}},"value":"unsupported protocol specified","raw":"'unsupported protocol specified'"}]}}]}}]}}]}},{"type":"ExpressionStatement","start":2489,"end":2924,"loc":{"start":{"line":83,"column":2},"end":{"line":95,"column":4}},"expression":{"type":"CallExpression","start":2489,"end":2924,"loc":{"start":{"line":83,"column":2},"end":{"line":95,"column":4}},"callee":{"type":"Identifier","start":2489,"end":2493,"loc":{"start":{"line":83,"column":2},"end":{"line":83,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":2494,"end":2534,"loc":{"start":{"line":83,"column":7},"end":{"line":83,"column":47}},"value":"invalid upload fieldname gets rejected","raw":"'invalid upload fieldname gets rejected'"},{"type":"ArrowFunctionExpression","start":2536,"end":2923,"loc":{"start":{"line":83,"column":49},"end":{"line":95,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2542,"end":2923,"loc":{"start":{"line":83,"column":55},"end":{"line":95,"column":3}},"body":[{"type":"ReturnStatement","start":2548,"end":2919,"loc":{"start":{"line":84,"column":4},"end":{"line":94,"column":81}},"argument":{"type":"CallExpression","start":2555,"end":2919,"loc":{"start":{"line":84,"column":11},"end":{"line":94,"column":81}},"callee":{"type":"MemberExpression","start":2555,"end":2849,"loc":{"start":{"line":84,"column":11},"end":{"line":94,"column":11}},"object":{"type":"CallExpression","start":2555,"end":2837,"loc":{"start":{"line":84,"column":11},"end":{"line":93,"column":18}},"callee":{"type":"MemberExpression","start":2555,"end":2832,"loc":{"start":{"line":84,"column":11},"end":{"line":93,"column":13}},"object":{"type":"CallExpression","start":2555,"end":2818,"loc":{"start":{"line":84,"column":11},"end":{"line":92,"column":8}},"callee":{"type":"MemberExpression","start":2555,"end":2706,"loc":{"start":{"line":84,"column":11},"end":{"line":88,"column":11}},"object":{"type":"CallExpression","start":2555,"end":2694,"loc":{"start":{"line":84,"column":11},"end":{"line":87,"column":46}},"callee":{"type":"MemberExpression","start":2555,"end":2658,"loc":{"start":{"line":84,"column":11},"end":{"line":87,"column":10}},"object":{"type":"CallExpression","start":2555,"end":2647,"loc":{"start":{"line":84,"column":11},"end":{"line":86,"column":36}},"callee":{"type":"MemberExpression","start":2555,"end":2621,"loc":{"start":{"line":84,"column":11},"end":{"line":86,"column":10}},"object":{"type":"CallExpression","start":2555,"end":2610,"loc":{"start":{"line":84,"column":11},"end":{"line":85,"column":35}},"callee":{"type":"MemberExpression","start":2555,"end":2586,"loc":{"start":{"line":84,"column":11},"end":{"line":85,"column":11}},"object":{"type":"CallExpression","start":2555,"end":2574,"loc":{"start":{"line":84,"column":11},"end":{"line":84,"column":30}},"callee":{"type":"Identifier","start":2555,"end":2562,"loc":{"start":{"line":84,"column":11},"end":{"line":84,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":2563,"end":2573,"loc":{"start":{"line":84,"column":19},"end":{"line":84,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":2582,"end":2586,"loc":{"start":{"line":85,"column":7},"end":{"line":85,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":2587,"end":2609,"loc":{"start":{"line":85,"column":12},"end":{"line":85,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":2618,"end":2621,"loc":{"start":{"line":86,"column":7},"end":{"line":86,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":2622,"end":2639,"loc":{"start":{"line":86,"column":11},"end":{"line":86,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":2641,"end":2646,"loc":{"start":{"line":86,"column":30},"end":{"line":86,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":2655,"end":2658,"loc":{"start":{"line":87,"column":7},"end":{"line":87,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":2659,"end":2673,"loc":{"start":{"line":87,"column":11},"end":{"line":87,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":2675,"end":2693,"loc":{"start":{"line":87,"column":27},"end":{"line":87,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":2702,"end":2706,"loc":{"start":{"line":88,"column":7},"end":{"line":88,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2707,"end":2817,"loc":{"start":{"line":88,"column":12},"end":{"line":92,"column":7}},"properties":[{"type":"Property","start":2717,"end":2760,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2717,"end":2725,"loc":{"start":{"line":89,"column":8},"end":{"line":89,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":2727,"end":2760,"loc":{"start":{"line":89,"column":18},"end":{"line":89,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":2770,"end":2785,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2770,"end":2778,"loc":{"start":{"line":90,"column":8},"end":{"line":90,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":2780,"end":2785,"loc":{"start":{"line":90,"column":18},"end":{"line":90,"column":23}},"value":"tus","raw":"'tus'"},"kind":"init"},{"type":"Property","start":2795,"end":2809,"loc":{"start":{"line":91,"column":8},"end":{"line":91,"column":22}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2795,"end":2804,"loc":{"start":{"line":91,"column":8},"end":{"line":91,"column":17}},"name":"fieldname"},"value":{"type":"Literal","start":2806,"end":2809,"loc":{"start":{"line":91,"column":19},"end":{"line":91,"column":22}},"value":390,"raw":"390"},"kind":"init"}]}]},"property":{"type":"Identifier","start":2826,"end":2832,"loc":{"start":{"line":93,"column":7},"end":{"line":93,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":2833,"end":2836,"loc":{"start":{"line":93,"column":14},"end":{"line":93,"column":17}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":2845,"end":2849,"loc":{"start":{"line":94,"column":7},"end":{"line":94,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2850,"end":2918,"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":80}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":2851,"end":2854,"loc":{"start":{"line":94,"column":13},"end":{"line":94,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":2859,"end":2918,"loc":{"start":{"line":94,"column":21},"end":{"line":94,"column":80}},"callee":{"type":"MemberExpression","start":2859,"end":2888,"loc":{"start":{"line":94,"column":21},"end":{"line":94,"column":50}},"object":{"type":"CallExpression","start":2859,"end":2883,"loc":{"start":{"line":94,"column":21},"end":{"line":94,"column":45}},"callee":{"type":"Identifier","start":2859,"end":2865,"loc":{"start":{"line":94,"column":21},"end":{"line":94,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":2866,"end":2882,"loc":{"start":{"line":94,"column":28},"end":{"line":94,"column":44}},"object":{"type":"MemberExpression","start":2866,"end":2874,"loc":{"start":{"line":94,"column":28},"end":{"line":94,"column":36}},"object":{"type":"Identifier","start":2866,"end":2869,"loc":{"start":{"line":94,"column":28},"end":{"line":94,"column":31}},"name":"res"},"property":{"type":"Identifier","start":2870,"end":2874,"loc":{"start":{"line":94,"column":32},"end":{"line":94,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":2875,"end":2882,"loc":{"start":{"line":94,"column":37},"end":{"line":94,"column":44}},"name":"message"},"computed":false}]},"property":{"type":"Identifier","start":2884,"end":2888,"loc":{"start":{"line":94,"column":46},"end":{"line":94,"column":50}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":2889,"end":2917,"loc":{"start":{"line":94,"column":51},"end":{"line":94,"column":79}},"value":"fieldname must be a string","raw":"'fieldname must be a string'"}]}}]}}]}}]}},{"type":"ExpressionStatement","start":2928,"end":3391,"loc":{"start":{"line":97,"column":2},"end":{"line":109,"column":4}},"expression":{"type":"CallExpression","start":2928,"end":3391,"loc":{"start":{"line":97,"column":2},"end":{"line":109,"column":4}},"callee":{"type":"Identifier","start":2928,"end":2932,"loc":{"start":{"line":97,"column":2},"end":{"line":97,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":2933,"end":2972,"loc":{"start":{"line":97,"column":7},"end":{"line":97,"column":46}},"value":"invalid upload metadata gets rejected","raw":"'invalid upload metadata gets rejected'"},{"type":"ArrowFunctionExpression","start":2974,"end":3390,"loc":{"start":{"line":97,"column":48},"end":{"line":109,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2980,"end":3390,"loc":{"start":{"line":97,"column":54},"end":{"line":109,"column":3}},"body":[{"type":"ReturnStatement","start":2986,"end":3386,"loc":{"start":{"line":98,"column":4},"end":{"line":108,"column":81}},"argument":{"type":"CallExpression","start":2993,"end":3386,"loc":{"start":{"line":98,"column":11},"end":{"line":108,"column":81}},"callee":{"type":"MemberExpression","start":2993,"end":3316,"loc":{"start":{"line":98,"column":11},"end":{"line":108,"column":11}},"object":{"type":"CallExpression","start":2993,"end":3304,"loc":{"start":{"line":98,"column":11},"end":{"line":107,"column":18}},"callee":{"type":"MemberExpression","start":2993,"end":3299,"loc":{"start":{"line":98,"column":11},"end":{"line":107,"column":13}},"object":{"type":"CallExpression","start":2993,"end":3285,"loc":{"start":{"line":98,"column":11},"end":{"line":106,"column":8}},"callee":{"type":"MemberExpression","start":2993,"end":3144,"loc":{"start":{"line":98,"column":11},"end":{"line":102,"column":11}},"object":{"type":"CallExpression","start":2993,"end":3132,"loc":{"start":{"line":98,"column":11},"end":{"line":101,"column":46}},"callee":{"type":"MemberExpression","start":2993,"end":3096,"loc":{"start":{"line":98,"column":11},"end":{"line":101,"column":10}},"object":{"type":"CallExpression","start":2993,"end":3085,"loc":{"start":{"line":98,"column":11},"end":{"line":100,"column":36}},"callee":{"type":"MemberExpression","start":2993,"end":3059,"loc":{"start":{"line":98,"column":11},"end":{"line":100,"column":10}},"object":{"type":"CallExpression","start":2993,"end":3048,"loc":{"start":{"line":98,"column":11},"end":{"line":99,"column":35}},"callee":{"type":"MemberExpression","start":2993,"end":3024,"loc":{"start":{"line":98,"column":11},"end":{"line":99,"column":11}},"object":{"type":"CallExpression","start":2993,"end":3012,"loc":{"start":{"line":98,"column":11},"end":{"line":98,"column":30}},"callee":{"type":"Identifier","start":2993,"end":3000,"loc":{"start":{"line":98,"column":11},"end":{"line":98,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":3001,"end":3011,"loc":{"start":{"line":98,"column":19},"end":{"line":98,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":3020,"end":3024,"loc":{"start":{"line":99,"column":7},"end":{"line":99,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":3025,"end":3047,"loc":{"start":{"line":99,"column":12},"end":{"line":99,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":3056,"end":3059,"loc":{"start":{"line":100,"column":7},"end":{"line":100,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":3060,"end":3077,"loc":{"start":{"line":100,"column":11},"end":{"line":100,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":3079,"end":3084,"loc":{"start":{"line":100,"column":30},"end":{"line":100,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":3093,"end":3096,"loc":{"start":{"line":101,"column":7},"end":{"line":101,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":3097,"end":3111,"loc":{"start":{"line":101,"column":11},"end":{"line":101,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":3113,"end":3131,"loc":{"start":{"line":101,"column":27},"end":{"line":101,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":3140,"end":3144,"loc":{"start":{"line":102,"column":7},"end":{"line":102,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3145,"end":3284,"loc":{"start":{"line":102,"column":12},"end":{"line":106,"column":7}},"properties":[{"type":"Property","start":3155,"end":3198,"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3155,"end":3163,"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":3165,"end":3198,"loc":{"start":{"line":103,"column":18},"end":{"line":103,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":3208,"end":3223,"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3208,"end":3216,"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":3218,"end":3223,"loc":{"start":{"line":104,"column":18},"end":{"line":104,"column":23}},"value":"tus","raw":"'tus'"},"kind":"init"},{"type":"Property","start":3233,"end":3276,"loc":{"start":{"line":105,"column":8},"end":{"line":105,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3233,"end":3241,"loc":{"start":{"line":105,"column":8},"end":{"line":105,"column":16}},"name":"metadata"},"value":{"type":"Literal","start":3243,"end":3276,"loc":{"start":{"line":105,"column":18},"end":{"line":105,"column":51}},"value":"I am a string instead of object","raw":"'I am a string instead of object'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":3293,"end":3299,"loc":{"start":{"line":107,"column":7},"end":{"line":107,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":3300,"end":3303,"loc":{"start":{"line":107,"column":14},"end":{"line":107,"column":17}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":3312,"end":3316,"loc":{"start":{"line":108,"column":7},"end":{"line":108,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3317,"end":3385,"loc":{"start":{"line":108,"column":12},"end":{"line":108,"column":80}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3318,"end":3321,"loc":{"start":{"line":108,"column":13},"end":{"line":108,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":3326,"end":3385,"loc":{"start":{"line":108,"column":21},"end":{"line":108,"column":80}},"callee":{"type":"MemberExpression","start":3326,"end":3355,"loc":{"start":{"line":108,"column":21},"end":{"line":108,"column":50}},"object":{"type":"CallExpression","start":3326,"end":3350,"loc":{"start":{"line":108,"column":21},"end":{"line":108,"column":45}},"callee":{"type":"Identifier","start":3326,"end":3332,"loc":{"start":{"line":108,"column":21},"end":{"line":108,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":3333,"end":3349,"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":44}},"object":{"type":"MemberExpression","start":3333,"end":3341,"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":36}},"object":{"type":"Identifier","start":3333,"end":3336,"loc":{"start":{"line":108,"column":28},"end":{"line":108,"column":31}},"name":"res"},"property":{"type":"Identifier","start":3337,"end":3341,"loc":{"start":{"line":108,"column":32},"end":{"line":108,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3342,"end":3349,"loc":{"start":{"line":108,"column":37},"end":{"line":108,"column":44}},"name":"message"},"computed":false}]},"property":{"type":"Identifier","start":3351,"end":3355,"loc":{"start":{"line":108,"column":46},"end":{"line":108,"column":50}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":3356,"end":3384,"loc":{"start":{"line":108,"column":51},"end":{"line":108,"column":79}},"value":"metadata must be an object","raw":"'metadata must be an object'"}]}}]}}]}}]}},{"type":"ExpressionStatement","start":3395,"end":3854,"loc":{"start":{"line":111,"column":2},"end":{"line":123,"column":4}},"expression":{"type":"CallExpression","start":3395,"end":3854,"loc":{"start":{"line":111,"column":2},"end":{"line":123,"column":4}},"callee":{"type":"Identifier","start":3395,"end":3399,"loc":{"start":{"line":111,"column":2},"end":{"line":111,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":3400,"end":3437,"loc":{"start":{"line":111,"column":7},"end":{"line":111,"column":44}},"value":"invalid upload headers get rejected","raw":"'invalid upload headers get rejected'"},{"type":"ArrowFunctionExpression","start":3439,"end":3853,"loc":{"start":{"line":111,"column":46},"end":{"line":123,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3445,"end":3853,"loc":{"start":{"line":111,"column":52},"end":{"line":123,"column":3}},"body":[{"type":"ReturnStatement","start":3451,"end":3849,"loc":{"start":{"line":112,"column":4},"end":{"line":122,"column":80}},"argument":{"type":"CallExpression","start":3458,"end":3849,"loc":{"start":{"line":112,"column":11},"end":{"line":122,"column":80}},"callee":{"type":"MemberExpression","start":3458,"end":3780,"loc":{"start":{"line":112,"column":11},"end":{"line":122,"column":11}},"object":{"type":"CallExpression","start":3458,"end":3768,"loc":{"start":{"line":112,"column":11},"end":{"line":121,"column":18}},"callee":{"type":"MemberExpression","start":3458,"end":3763,"loc":{"start":{"line":112,"column":11},"end":{"line":121,"column":13}},"object":{"type":"CallExpression","start":3458,"end":3749,"loc":{"start":{"line":112,"column":11},"end":{"line":120,"column":8}},"callee":{"type":"MemberExpression","start":3458,"end":3609,"loc":{"start":{"line":112,"column":11},"end":{"line":116,"column":11}},"object":{"type":"CallExpression","start":3458,"end":3597,"loc":{"start":{"line":112,"column":11},"end":{"line":115,"column":46}},"callee":{"type":"MemberExpression","start":3458,"end":3561,"loc":{"start":{"line":112,"column":11},"end":{"line":115,"column":10}},"object":{"type":"CallExpression","start":3458,"end":3550,"loc":{"start":{"line":112,"column":11},"end":{"line":114,"column":36}},"callee":{"type":"MemberExpression","start":3458,"end":3524,"loc":{"start":{"line":112,"column":11},"end":{"line":114,"column":10}},"object":{"type":"CallExpression","start":3458,"end":3513,"loc":{"start":{"line":112,"column":11},"end":{"line":113,"column":35}},"callee":{"type":"MemberExpression","start":3458,"end":3489,"loc":{"start":{"line":112,"column":11},"end":{"line":113,"column":11}},"object":{"type":"CallExpression","start":3458,"end":3477,"loc":{"start":{"line":112,"column":11},"end":{"line":112,"column":30}},"callee":{"type":"Identifier","start":3458,"end":3465,"loc":{"start":{"line":112,"column":11},"end":{"line":112,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":3466,"end":3476,"loc":{"start":{"line":112,"column":19},"end":{"line":112,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":3485,"end":3489,"loc":{"start":{"line":113,"column":7},"end":{"line":113,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":3490,"end":3512,"loc":{"start":{"line":113,"column":12},"end":{"line":113,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":3521,"end":3524,"loc":{"start":{"line":114,"column":7},"end":{"line":114,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":3525,"end":3542,"loc":{"start":{"line":114,"column":11},"end":{"line":114,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":3544,"end":3549,"loc":{"start":{"line":114,"column":30},"end":{"line":114,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":3558,"end":3561,"loc":{"start":{"line":115,"column":7},"end":{"line":115,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":3562,"end":3576,"loc":{"start":{"line":115,"column":11},"end":{"line":115,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":3578,"end":3596,"loc":{"start":{"line":115,"column":27},"end":{"line":115,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":3605,"end":3609,"loc":{"start":{"line":116,"column":7},"end":{"line":116,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3610,"end":3748,"loc":{"start":{"line":116,"column":12},"end":{"line":120,"column":7}},"properties":[{"type":"Property","start":3620,"end":3663,"loc":{"start":{"line":117,"column":8},"end":{"line":117,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3620,"end":3628,"loc":{"start":{"line":117,"column":8},"end":{"line":117,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":3630,"end":3663,"loc":{"start":{"line":117,"column":18},"end":{"line":117,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":3673,"end":3688,"loc":{"start":{"line":118,"column":8},"end":{"line":118,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3673,"end":3681,"loc":{"start":{"line":118,"column":8},"end":{"line":118,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":3683,"end":3688,"loc":{"start":{"line":118,"column":18},"end":{"line":118,"column":23}},"value":"tus","raw":"'tus'"},"kind":"init"},{"type":"Property","start":3698,"end":3740,"loc":{"start":{"line":119,"column":8},"end":{"line":119,"column":50}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3698,"end":3705,"loc":{"start":{"line":119,"column":8},"end":{"line":119,"column":15}},"name":"headers"},"value":{"type":"Literal","start":3707,"end":3740,"loc":{"start":{"line":119,"column":17},"end":{"line":119,"column":50}},"value":"I am a string instead of object","raw":"'I am a string instead of object'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":3757,"end":3763,"loc":{"start":{"line":121,"column":7},"end":{"line":121,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":3764,"end":3767,"loc":{"start":{"line":121,"column":14},"end":{"line":121,"column":17}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":3776,"end":3780,"loc":{"start":{"line":122,"column":7},"end":{"line":122,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3781,"end":3848,"loc":{"start":{"line":122,"column":12},"end":{"line":122,"column":79}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":3782,"end":3785,"loc":{"start":{"line":122,"column":13},"end":{"line":122,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":3790,"end":3848,"loc":{"start":{"line":122,"column":21},"end":{"line":122,"column":79}},"callee":{"type":"MemberExpression","start":3790,"end":3819,"loc":{"start":{"line":122,"column":21},"end":{"line":122,"column":50}},"object":{"type":"CallExpression","start":3790,"end":3814,"loc":{"start":{"line":122,"column":21},"end":{"line":122,"column":45}},"callee":{"type":"Identifier","start":3790,"end":3796,"loc":{"start":{"line":122,"column":21},"end":{"line":122,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":3797,"end":3813,"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":44}},"object":{"type":"MemberExpression","start":3797,"end":3805,"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":36}},"object":{"type":"Identifier","start":3797,"end":3800,"loc":{"start":{"line":122,"column":28},"end":{"line":122,"column":31}},"name":"res"},"property":{"type":"Identifier","start":3801,"end":3805,"loc":{"start":{"line":122,"column":32},"end":{"line":122,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":3806,"end":3813,"loc":{"start":{"line":122,"column":37},"end":{"line":122,"column":44}},"name":"message"},"computed":false}]},"property":{"type":"Identifier","start":3815,"end":3819,"loc":{"start":{"line":122,"column":46},"end":{"line":122,"column":50}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":3820,"end":3847,"loc":{"start":{"line":122,"column":51},"end":{"line":122,"column":78}},"value":"headers must be an object","raw":"'headers must be an object'"}]}}]}}]}}]}},{"type":"ExpressionStatement","start":3858,"end":4308,"loc":{"start":{"line":125,"column":2},"end":{"line":137,"column":4}},"expression":{"type":"CallExpression","start":3858,"end":4308,"loc":{"start":{"line":125,"column":2},"end":{"line":137,"column":4}},"callee":{"type":"Identifier","start":3858,"end":3862,"loc":{"start":{"line":125,"column":2},"end":{"line":125,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":3863,"end":3905,"loc":{"start":{"line":125,"column":7},"end":{"line":125,"column":49}},"value":"invalid upload HTTP Method gets rejected","raw":"'invalid upload HTTP Method gets rejected'"},{"type":"ArrowFunctionExpression","start":3907,"end":4307,"loc":{"start":{"line":125,"column":51},"end":{"line":137,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3913,"end":4307,"loc":{"start":{"line":125,"column":57},"end":{"line":137,"column":3}},"body":[{"type":"ReturnStatement","start":3919,"end":4303,"loc":{"start":{"line":126,"column":4},"end":{"line":136,"column":88}},"argument":{"type":"CallExpression","start":3926,"end":4303,"loc":{"start":{"line":126,"column":11},"end":{"line":136,"column":88}},"callee":{"type":"MemberExpression","start":3926,"end":4226,"loc":{"start":{"line":126,"column":11},"end":{"line":136,"column":11}},"object":{"type":"CallExpression","start":3926,"end":4214,"loc":{"start":{"line":126,"column":11},"end":{"line":135,"column":18}},"callee":{"type":"MemberExpression","start":3926,"end":4209,"loc":{"start":{"line":126,"column":11},"end":{"line":135,"column":13}},"object":{"type":"CallExpression","start":3926,"end":4195,"loc":{"start":{"line":126,"column":11},"end":{"line":134,"column":8}},"callee":{"type":"MemberExpression","start":3926,"end":4077,"loc":{"start":{"line":126,"column":11},"end":{"line":130,"column":11}},"object":{"type":"CallExpression","start":3926,"end":4065,"loc":{"start":{"line":126,"column":11},"end":{"line":129,"column":46}},"callee":{"type":"MemberExpression","start":3926,"end":4029,"loc":{"start":{"line":126,"column":11},"end":{"line":129,"column":10}},"object":{"type":"CallExpression","start":3926,"end":4018,"loc":{"start":{"line":126,"column":11},"end":{"line":128,"column":36}},"callee":{"type":"MemberExpression","start":3926,"end":3992,"loc":{"start":{"line":126,"column":11},"end":{"line":128,"column":10}},"object":{"type":"CallExpression","start":3926,"end":3981,"loc":{"start":{"line":126,"column":11},"end":{"line":127,"column":35}},"callee":{"type":"MemberExpression","start":3926,"end":3957,"loc":{"start":{"line":126,"column":11},"end":{"line":127,"column":11}},"object":{"type":"CallExpression","start":3926,"end":3945,"loc":{"start":{"line":126,"column":11},"end":{"line":126,"column":30}},"callee":{"type":"Identifier","start":3926,"end":3933,"loc":{"start":{"line":126,"column":11},"end":{"line":126,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":3934,"end":3944,"loc":{"start":{"line":126,"column":19},"end":{"line":126,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":3953,"end":3957,"loc":{"start":{"line":127,"column":7},"end":{"line":127,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":3958,"end":3980,"loc":{"start":{"line":127,"column":12},"end":{"line":127,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":3989,"end":3992,"loc":{"start":{"line":128,"column":7},"end":{"line":128,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":3993,"end":4010,"loc":{"start":{"line":128,"column":11},"end":{"line":128,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":4012,"end":4017,"loc":{"start":{"line":128,"column":30},"end":{"line":128,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":4026,"end":4029,"loc":{"start":{"line":129,"column":7},"end":{"line":129,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":4030,"end":4044,"loc":{"start":{"line":129,"column":11},"end":{"line":129,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":4046,"end":4064,"loc":{"start":{"line":129,"column":27},"end":{"line":129,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":4073,"end":4077,"loc":{"start":{"line":130,"column":7},"end":{"line":130,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":4078,"end":4194,"loc":{"start":{"line":130,"column":12},"end":{"line":134,"column":7}},"properties":[{"type":"Property","start":4088,"end":4131,"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4088,"end":4096,"loc":{"start":{"line":131,"column":8},"end":{"line":131,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":4098,"end":4131,"loc":{"start":{"line":131,"column":18},"end":{"line":131,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":4141,"end":4156,"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4141,"end":4149,"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":4151,"end":4156,"loc":{"start":{"line":132,"column":18},"end":{"line":132,"column":23}},"value":"tus","raw":"'tus'"},"kind":"init"},{"type":"Property","start":4166,"end":4186,"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":28}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4166,"end":4176,"loc":{"start":{"line":133,"column":8},"end":{"line":133,"column":18}},"name":"httpMethod"},"value":{"type":"Literal","start":4178,"end":4186,"loc":{"start":{"line":133,"column":20},"end":{"line":133,"column":28}},"value":"DELETE","raw":"'DELETE'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":4203,"end":4209,"loc":{"start":{"line":135,"column":7},"end":{"line":135,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":4210,"end":4213,"loc":{"start":{"line":135,"column":14},"end":{"line":135,"column":17}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":4222,"end":4226,"loc":{"start":{"line":136,"column":7},"end":{"line":136,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":4227,"end":4302,"loc":{"start":{"line":136,"column":12},"end":{"line":136,"column":87}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":4228,"end":4231,"loc":{"start":{"line":136,"column":13},"end":{"line":136,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":4236,"end":4302,"loc":{"start":{"line":136,"column":21},"end":{"line":136,"column":87}},"callee":{"type":"MemberExpression","start":4236,"end":4265,"loc":{"start":{"line":136,"column":21},"end":{"line":136,"column":50}},"object":{"type":"CallExpression","start":4236,"end":4260,"loc":{"start":{"line":136,"column":21},"end":{"line":136,"column":45}},"callee":{"type":"Identifier","start":4236,"end":4242,"loc":{"start":{"line":136,"column":21},"end":{"line":136,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":4243,"end":4259,"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":44}},"object":{"type":"MemberExpression","start":4243,"end":4251,"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":36}},"object":{"type":"Identifier","start":4243,"end":4246,"loc":{"start":{"line":136,"column":28},"end":{"line":136,"column":31}},"name":"res"},"property":{"type":"Identifier","start":4247,"end":4251,"loc":{"start":{"line":136,"column":32},"end":{"line":136,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":4252,"end":4259,"loc":{"start":{"line":136,"column":37},"end":{"line":136,"column":44}},"name":"message"},"computed":false}]},"property":{"type":"Identifier","start":4261,"end":4265,"loc":{"start":{"line":136,"column":46},"end":{"line":136,"column":50}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":4266,"end":4301,"loc":{"start":{"line":136,"column":51},"end":{"line":136,"column":86}},"value":"unsupported HTTP METHOD specified","raw":"'unsupported HTTP METHOD specified'"}]}}]}}]}}]}},{"type":"ExpressionStatement","start":4312,"end":4838,"loc":{"start":{"line":139,"column":2},"end":{"line":157,"column":4}},"expression":{"type":"CallExpression","start":4312,"end":4838,"loc":{"start":{"line":139,"column":2},"end":{"line":157,"column":4}},"callee":{"type":"Identifier","start":4312,"end":4316,"loc":{"start":{"line":139,"column":2},"end":{"line":139,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":4317,"end":4353,"loc":{"start":{"line":139,"column":7},"end":{"line":139,"column":43}},"value":"valid upload data is allowed - tus","raw":"'valid upload data is allowed - tus'"},{"type":"ArrowFunctionExpression","start":4355,"end":4837,"loc":{"start":{"line":139,"column":45},"end":{"line":157,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4361,"end":4837,"loc":{"start":{"line":139,"column":51},"end":{"line":157,"column":3}},"body":[{"type":"ReturnStatement","start":4367,"end":4833,"loc":{"start":{"line":140,"column":4},"end":{"line":156,"column":18}},"argument":{"type":"CallExpression","start":4374,"end":4833,"loc":{"start":{"line":140,"column":11},"end":{"line":156,"column":18}},"callee":{"type":"MemberExpression","start":4374,"end":4828,"loc":{"start":{"line":140,"column":11},"end":{"line":156,"column":13}},"object":{"type":"CallExpression","start":4374,"end":4814,"loc":{"start":{"line":140,"column":11},"end":{"line":155,"column":8}},"callee":{"type":"MemberExpression","start":4374,"end":4525,"loc":{"start":{"line":140,"column":11},"end":{"line":144,"column":11}},"object":{"type":"CallExpression","start":4374,"end":4513,"loc":{"start":{"line":140,"column":11},"end":{"line":143,"column":46}},"callee":{"type":"MemberExpression","start":4374,"end":4477,"loc":{"start":{"line":140,"column":11},"end":{"line":143,"column":10}},"object":{"type":"CallExpression","start":4374,"end":4466,"loc":{"start":{"line":140,"column":11},"end":{"line":142,"column":36}},"callee":{"type":"MemberExpression","start":4374,"end":4440,"loc":{"start":{"line":140,"column":11},"end":{"line":142,"column":10}},"object":{"type":"CallExpression","start":4374,"end":4429,"loc":{"start":{"line":140,"column":11},"end":{"line":141,"column":35}},"callee":{"type":"MemberExpression","start":4374,"end":4405,"loc":{"start":{"line":140,"column":11},"end":{"line":141,"column":11}},"object":{"type":"CallExpression","start":4374,"end":4393,"loc":{"start":{"line":140,"column":11},"end":{"line":140,"column":30}},"callee":{"type":"Identifier","start":4374,"end":4381,"loc":{"start":{"line":140,"column":11},"end":{"line":140,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":4382,"end":4392,"loc":{"start":{"line":140,"column":19},"end":{"line":140,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":4401,"end":4405,"loc":{"start":{"line":141,"column":7},"end":{"line":141,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":4406,"end":4428,"loc":{"start":{"line":141,"column":12},"end":{"line":141,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":4437,"end":4440,"loc":{"start":{"line":142,"column":7},"end":{"line":142,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":4441,"end":4458,"loc":{"start":{"line":142,"column":11},"end":{"line":142,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":4460,"end":4465,"loc":{"start":{"line":142,"column":30},"end":{"line":142,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":4474,"end":4477,"loc":{"start":{"line":143,"column":7},"end":{"line":143,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":4478,"end":4492,"loc":{"start":{"line":143,"column":11},"end":{"line":143,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":4494,"end":4512,"loc":{"start":{"line":143,"column":27},"end":{"line":143,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":4521,"end":4525,"loc":{"start":{"line":144,"column":7},"end":{"line":144,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":4526,"end":4813,"loc":{"start":{"line":144,"column":12},"end":{"line":155,"column":7}},"properties":[{"type":"Property","start":4536,"end":4579,"loc":{"start":{"line":145,"column":8},"end":{"line":145,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4536,"end":4544,"loc":{"start":{"line":145,"column":8},"end":{"line":145,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":4546,"end":4579,"loc":{"start":{"line":145,"column":18},"end":{"line":145,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":4589,"end":4604,"loc":{"start":{"line":146,"column":8},"end":{"line":146,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4589,"end":4597,"loc":{"start":{"line":146,"column":8},"end":{"line":146,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":4599,"end":4604,"loc":{"start":{"line":146,"column":18},"end":{"line":146,"column":23}},"value":"tus","raw":"'tus'"},"kind":"init"},{"type":"Property","start":4614,"end":4632,"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":26}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4614,"end":4624,"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":18}},"name":"httpMethod"},"value":{"type":"Literal","start":4626,"end":4632,"loc":{"start":{"line":147,"column":20},"end":{"line":147,"column":26}},"value":"POST","raw":"'POST'"},"kind":"init"},{"type":"Property","start":4642,"end":4701,"loc":{"start":{"line":148,"column":8},"end":{"line":150,"column":9}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4642,"end":4649,"loc":{"start":{"line":148,"column":8},"end":{"line":148,"column":15}},"name":"headers"},"value":{"type":"ObjectExpression","start":4651,"end":4701,"loc":{"start":{"line":148,"column":17},"end":{"line":150,"column":9}},"properties":[{"type":"Property","start":4663,"end":4691,"loc":{"start":{"line":149,"column":10},"end":{"line":149,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4663,"end":4675,"loc":{"start":{"line":149,"column":10},"end":{"line":149,"column":22}},"name":"customheader"},"value":{"type":"Literal","start":4677,"end":4691,"loc":{"start":{"line":149,"column":24},"end":{"line":149,"column":38}},"value":"header value","raw":"'header value'"},"kind":"init"}]},"kind":"init"},{"type":"Property","start":4711,"end":4771,"loc":{"start":{"line":151,"column":8},"end":{"line":153,"column":9}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4711,"end":4719,"loc":{"start":{"line":151,"column":8},"end":{"line":151,"column":16}},"name":"metadata"},"value":{"type":"ObjectExpression","start":4721,"end":4771,"loc":{"start":{"line":151,"column":18},"end":{"line":153,"column":9}},"properties":[{"type":"Property","start":4733,"end":4761,"loc":{"start":{"line":152,"column":10},"end":{"line":152,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4733,"end":4743,"loc":{"start":{"line":152,"column":10},"end":{"line":152,"column":20}},"name":"mymetadata"},"value":{"type":"Literal","start":4745,"end":4761,"loc":{"start":{"line":152,"column":22},"end":{"line":152,"column":38}},"value":"matadata value","raw":"'matadata value'"},"kind":"init"}]},"kind":"init"},{"type":"Property","start":4781,"end":4805,"loc":{"start":{"line":154,"column":8},"end":{"line":154,"column":32}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4781,"end":4790,"loc":{"start":{"line":154,"column":8},"end":{"line":154,"column":17}},"name":"fieldname"},"value":{"type":"Literal","start":4792,"end":4805,"loc":{"start":{"line":154,"column":19},"end":{"line":154,"column":32}},"value":"uploadField","raw":"'uploadField'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":4822,"end":4828,"loc":{"start":{"line":156,"column":7},"end":{"line":156,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":4829,"end":4832,"loc":{"start":{"line":156,"column":14},"end":{"line":156,"column":17}},"value":200,"raw":"200"}]}}]}}]}},{"type":"ExpressionStatement","start":4842,"end":5385,"loc":{"start":{"line":159,"column":2},"end":{"line":177,"column":4}},"expression":{"type":"CallExpression","start":4842,"end":5385,"loc":{"start":{"line":159,"column":2},"end":{"line":177,"column":4}},"callee":{"type":"Identifier","start":4842,"end":4846,"loc":{"start":{"line":159,"column":2},"end":{"line":159,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":4847,"end":4892,"loc":{"start":{"line":159,"column":7},"end":{"line":159,"column":52}},"value":"valid upload data is allowed - s3-multipart","raw":"'valid upload data is allowed - s3-multipart'"},{"type":"ArrowFunctionExpression","start":4894,"end":5384,"loc":{"start":{"line":159,"column":54},"end":{"line":177,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4900,"end":5384,"loc":{"start":{"line":159,"column":60},"end":{"line":177,"column":3}},"body":[{"type":"ReturnStatement","start":4906,"end":5380,"loc":{"start":{"line":160,"column":4},"end":{"line":176,"column":18}},"argument":{"type":"CallExpression","start":4913,"end":5380,"loc":{"start":{"line":160,"column":11},"end":{"line":176,"column":18}},"callee":{"type":"MemberExpression","start":4913,"end":5375,"loc":{"start":{"line":160,"column":11},"end":{"line":176,"column":13}},"object":{"type":"CallExpression","start":4913,"end":5361,"loc":{"start":{"line":160,"column":11},"end":{"line":175,"column":8}},"callee":{"type":"MemberExpression","start":4913,"end":5064,"loc":{"start":{"line":160,"column":11},"end":{"line":164,"column":11}},"object":{"type":"CallExpression","start":4913,"end":5052,"loc":{"start":{"line":160,"column":11},"end":{"line":163,"column":46}},"callee":{"type":"MemberExpression","start":4913,"end":5016,"loc":{"start":{"line":160,"column":11},"end":{"line":163,"column":10}},"object":{"type":"CallExpression","start":4913,"end":5005,"loc":{"start":{"line":160,"column":11},"end":{"line":162,"column":36}},"callee":{"type":"MemberExpression","start":4913,"end":4979,"loc":{"start":{"line":160,"column":11},"end":{"line":162,"column":10}},"object":{"type":"CallExpression","start":4913,"end":4968,"loc":{"start":{"line":160,"column":11},"end":{"line":161,"column":35}},"callee":{"type":"MemberExpression","start":4913,"end":4944,"loc":{"start":{"line":160,"column":11},"end":{"line":161,"column":11}},"object":{"type":"CallExpression","start":4913,"end":4932,"loc":{"start":{"line":160,"column":11},"end":{"line":160,"column":30}},"callee":{"type":"Identifier","start":4913,"end":4920,"loc":{"start":{"line":160,"column":11},"end":{"line":160,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":4921,"end":4931,"loc":{"start":{"line":160,"column":19},"end":{"line":160,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":4940,"end":4944,"loc":{"start":{"line":161,"column":7},"end":{"line":161,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":4945,"end":4967,"loc":{"start":{"line":161,"column":12},"end":{"line":161,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":4976,"end":4979,"loc":{"start":{"line":162,"column":7},"end":{"line":162,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":4980,"end":4997,"loc":{"start":{"line":162,"column":11},"end":{"line":162,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":4999,"end":5004,"loc":{"start":{"line":162,"column":30},"end":{"line":162,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":5013,"end":5016,"loc":{"start":{"line":163,"column":7},"end":{"line":163,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":5017,"end":5031,"loc":{"start":{"line":163,"column":11},"end":{"line":163,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":5033,"end":5051,"loc":{"start":{"line":163,"column":27},"end":{"line":163,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":5060,"end":5064,"loc":{"start":{"line":164,"column":7},"end":{"line":164,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":5065,"end":5360,"loc":{"start":{"line":164,"column":12},"end":{"line":175,"column":7}},"properties":[{"type":"Property","start":5075,"end":5118,"loc":{"start":{"line":165,"column":8},"end":{"line":165,"column":51}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5075,"end":5083,"loc":{"start":{"line":165,"column":8},"end":{"line":165,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":5085,"end":5118,"loc":{"start":{"line":165,"column":18},"end":{"line":165,"column":51}},"value":"http://url.myendpoint.com/files","raw":"'http://url.myendpoint.com/files'"},"kind":"init"},{"type":"Property","start":5128,"end":5152,"loc":{"start":{"line":166,"column":8},"end":{"line":166,"column":32}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5128,"end":5136,"loc":{"start":{"line":166,"column":8},"end":{"line":166,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":5138,"end":5152,"loc":{"start":{"line":166,"column":18},"end":{"line":166,"column":32}},"value":"s3-multipart","raw":"'s3-multipart'"},"kind":"init"},{"type":"Property","start":5162,"end":5179,"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":25}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5162,"end":5172,"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":18}},"name":"httpMethod"},"value":{"type":"Literal","start":5174,"end":5179,"loc":{"start":{"line":167,"column":20},"end":{"line":167,"column":25}},"value":"PUT","raw":"'PUT'"},"kind":"init"},{"type":"Property","start":5189,"end":5248,"loc":{"start":{"line":168,"column":8},"end":{"line":170,"column":9}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5189,"end":5196,"loc":{"start":{"line":168,"column":8},"end":{"line":168,"column":15}},"name":"headers"},"value":{"type":"ObjectExpression","start":5198,"end":5248,"loc":{"start":{"line":168,"column":17},"end":{"line":170,"column":9}},"properties":[{"type":"Property","start":5210,"end":5238,"loc":{"start":{"line":169,"column":10},"end":{"line":169,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5210,"end":5222,"loc":{"start":{"line":169,"column":10},"end":{"line":169,"column":22}},"name":"customheader"},"value":{"type":"Literal","start":5224,"end":5238,"loc":{"start":{"line":169,"column":24},"end":{"line":169,"column":38}},"value":"header value","raw":"'header value'"},"kind":"init"}]},"kind":"init"},{"type":"Property","start":5258,"end":5318,"loc":{"start":{"line":171,"column":8},"end":{"line":173,"column":9}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5258,"end":5266,"loc":{"start":{"line":171,"column":8},"end":{"line":171,"column":16}},"name":"metadata"},"value":{"type":"ObjectExpression","start":5268,"end":5318,"loc":{"start":{"line":171,"column":18},"end":{"line":173,"column":9}},"properties":[{"type":"Property","start":5280,"end":5308,"loc":{"start":{"line":172,"column":10},"end":{"line":172,"column":38}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5280,"end":5290,"loc":{"start":{"line":172,"column":10},"end":{"line":172,"column":20}},"name":"mymetadata"},"value":{"type":"Literal","start":5292,"end":5308,"loc":{"start":{"line":172,"column":22},"end":{"line":172,"column":38}},"value":"matadata value","raw":"'matadata value'"},"kind":"init"}]},"kind":"init"},{"type":"Property","start":5328,"end":5352,"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":32}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5328,"end":5337,"loc":{"start":{"line":174,"column":8},"end":{"line":174,"column":17}},"name":"fieldname"},"value":{"type":"Literal","start":5339,"end":5352,"loc":{"start":{"line":174,"column":19},"end":{"line":174,"column":32}},"value":"uploadField","raw":"'uploadField'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":5369,"end":5375,"loc":{"start":{"line":176,"column":7},"end":{"line":176,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":5376,"end":5379,"loc":{"start":{"line":176,"column":14},"end":{"line":176,"column":17}},"value":200,"raw":"200"}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":5390,"end":5826,"loc":{"start":{"line":180,"column":0},"end":{"line":193,"column":2}},"expression":{"type":"CallExpression","start":5390,"end":5826,"loc":{"start":{"line":180,"column":0},"end":{"line":193,"column":2}},"callee":{"type":"Identifier","start":5390,"end":5398,"loc":{"start":{"line":180,"column":0},"end":{"line":180,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":5399,"end":5423,"loc":{"start":{"line":180,"column":9},"end":{"line":180,"column":33}},"value":"download provdier file","raw":"'download provdier file'"},{"type":"ArrowFunctionExpression","start":5425,"end":5825,"loc":{"start":{"line":180,"column":35},"end":{"line":193,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5431,"end":5825,"loc":{"start":{"line":180,"column":41},"end":{"line":193,"column":1}},"body":[{"type":"ExpressionStatement","start":5435,"end":5823,"loc":{"start":{"line":181,"column":2},"end":{"line":192,"column":4}},"expression":{"type":"CallExpression","start":5435,"end":5823,"loc":{"start":{"line":181,"column":2},"end":{"line":192,"column":4}},"callee":{"type":"Identifier","start":5435,"end":5439,"loc":{"start":{"line":181,"column":2},"end":{"line":181,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":5440,"end":5486,"loc":{"start":{"line":181,"column":7},"end":{"line":181,"column":53}},"value":"specified file gets downloaded from provider","raw":"'specified file gets downloaded from provider'"},{"type":"ArrowFunctionExpression","start":5488,"end":5822,"loc":{"start":{"line":181,"column":55},"end":{"line":192,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5494,"end":5822,"loc":{"start":{"line":181,"column":61},"end":{"line":192,"column":3}},"body":[{"type":"ReturnStatement","start":5500,"end":5818,"loc":{"start":{"line":182,"column":4},"end":{"line":191,"column":57}},"argument":{"type":"CallExpression","start":5507,"end":5818,"loc":{"start":{"line":182,"column":11},"end":{"line":191,"column":57}},"callee":{"type":"MemberExpression","start":5507,"end":5772,"loc":{"start":{"line":182,"column":11},"end":{"line":191,"column":11}},"object":{"type":"CallExpression","start":5507,"end":5760,"loc":{"start":{"line":182,"column":11},"end":{"line":190,"column":18}},"callee":{"type":"MemberExpression","start":5507,"end":5755,"loc":{"start":{"line":182,"column":11},"end":{"line":190,"column":13}},"object":{"type":"CallExpression","start":5507,"end":5741,"loc":{"start":{"line":182,"column":11},"end":{"line":189,"column":8}},"callee":{"type":"MemberExpression","start":5507,"end":5658,"loc":{"start":{"line":182,"column":11},"end":{"line":186,"column":11}},"object":{"type":"CallExpression","start":5507,"end":5646,"loc":{"start":{"line":182,"column":11},"end":{"line":185,"column":46}},"callee":{"type":"MemberExpression","start":5507,"end":5610,"loc":{"start":{"line":182,"column":11},"end":{"line":185,"column":10}},"object":{"type":"CallExpression","start":5507,"end":5599,"loc":{"start":{"line":182,"column":11},"end":{"line":184,"column":36}},"callee":{"type":"MemberExpression","start":5507,"end":5573,"loc":{"start":{"line":182,"column":11},"end":{"line":184,"column":10}},"object":{"type":"CallExpression","start":5507,"end":5562,"loc":{"start":{"line":182,"column":11},"end":{"line":183,"column":35}},"callee":{"type":"MemberExpression","start":5507,"end":5538,"loc":{"start":{"line":182,"column":11},"end":{"line":183,"column":11}},"object":{"type":"CallExpression","start":5507,"end":5526,"loc":{"start":{"line":182,"column":11},"end":{"line":182,"column":30}},"callee":{"type":"Identifier","start":5507,"end":5514,"loc":{"start":{"line":182,"column":11},"end":{"line":182,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":5515,"end":5525,"loc":{"start":{"line":182,"column":19},"end":{"line":182,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":5534,"end":5538,"loc":{"start":{"line":183,"column":7},"end":{"line":183,"column":11}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":5539,"end":5561,"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":34}},"value":"/drive/get/README.md","raw":"'/drive/get/README.md'"}]},"property":{"type":"Identifier","start":5570,"end":5573,"loc":{"start":{"line":184,"column":7},"end":{"line":184,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":5574,"end":5591,"loc":{"start":{"line":184,"column":11},"end":{"line":184,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":5593,"end":5598,"loc":{"start":{"line":184,"column":30},"end":{"line":184,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":5607,"end":5610,"loc":{"start":{"line":185,"column":7},"end":{"line":185,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":5611,"end":5625,"loc":{"start":{"line":185,"column":11},"end":{"line":185,"column":25}},"value":"Content-Type","raw":"'Content-Type'"},{"type":"Literal","start":5627,"end":5645,"loc":{"start":{"line":185,"column":27},"end":{"line":185,"column":45}},"value":"application/json","raw":"'application/json'"}]},"property":{"type":"Identifier","start":5654,"end":5658,"loc":{"start":{"line":186,"column":7},"end":{"line":186,"column":11}},"name":"send"},"computed":false},"arguments":[{"type":"ObjectExpression","start":5659,"end":5740,"loc":{"start":{"line":186,"column":12},"end":{"line":189,"column":7}},"properties":[{"type":"Property","start":5669,"end":5707,"loc":{"start":{"line":187,"column":8},"end":{"line":187,"column":46}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5669,"end":5677,"loc":{"start":{"line":187,"column":8},"end":{"line":187,"column":16}},"name":"endpoint"},"value":{"type":"Literal","start":5679,"end":5707,"loc":{"start":{"line":187,"column":18},"end":{"line":187,"column":46}},"value":"http://master.tus.io/files","raw":"'http://master.tus.io/files'"},"kind":"init"},{"type":"Property","start":5717,"end":5732,"loc":{"start":{"line":188,"column":8},"end":{"line":188,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5717,"end":5725,"loc":{"start":{"line":188,"column":8},"end":{"line":188,"column":16}},"name":"protocol"},"value":{"type":"Literal","start":5727,"end":5732,"loc":{"start":{"line":188,"column":18},"end":{"line":188,"column":23}},"value":"tus","raw":"'tus'"},"kind":"init"}]}]},"property":{"type":"Identifier","start":5749,"end":5755,"loc":{"start":{"line":190,"column":7},"end":{"line":190,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":5756,"end":5759,"loc":{"start":{"line":190,"column":14},"end":{"line":190,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":5768,"end":5772,"loc":{"start":{"line":191,"column":7},"end":{"line":191,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":5773,"end":5817,"loc":{"start":{"line":191,"column":12},"end":{"line":191,"column":56}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":5774,"end":5777,"loc":{"start":{"line":191,"column":13},"end":{"line":191,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":5782,"end":5817,"loc":{"start":{"line":191,"column":21},"end":{"line":191,"column":56}},"callee":{"type":"MemberExpression","start":5782,"end":5815,"loc":{"start":{"line":191,"column":21},"end":{"line":191,"column":54}},"object":{"type":"CallExpression","start":5782,"end":5804,"loc":{"start":{"line":191,"column":21},"end":{"line":191,"column":43}},"callee":{"type":"Identifier","start":5782,"end":5788,"loc":{"start":{"line":191,"column":21},"end":{"line":191,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":5789,"end":5803,"loc":{"start":{"line":191,"column":28},"end":{"line":191,"column":42}},"object":{"type":"MemberExpression","start":5789,"end":5797,"loc":{"start":{"line":191,"column":28},"end":{"line":191,"column":36}},"object":{"type":"Identifier","start":5789,"end":5792,"loc":{"start":{"line":191,"column":28},"end":{"line":191,"column":31}},"name":"res"},"property":{"type":"Identifier","start":5793,"end":5797,"loc":{"start":{"line":191,"column":32},"end":{"line":191,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":5798,"end":5803,"loc":{"start":{"line":191,"column":37},"end":{"line":191,"column":42}},"name":"token"},"computed":false}]},"property":{"type":"Identifier","start":5805,"end":5815,"loc":{"start":{"line":191,"column":44},"end":{"line":191,"column":54}},"name":"toBeTruthy"},"computed":false},"arguments":[]}}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":5828,"end":8477,"loc":{"start":{"line":195,"column":0},"end":{"line":280,"column":2}},"expression":{"type":"CallExpression","start":5828,"end":8477,"loc":{"start":{"line":195,"column":0},"end":{"line":280,"column":2}},"callee":{"type":"Identifier","start":5828,"end":5836,"loc":{"start":{"line":195,"column":0},"end":{"line":195,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":5837,"end":5858,"loc":{"start":{"line":195,"column":9},"end":{"line":195,"column":30}},"value":"test authentication","raw":"'test authentication'"},{"type":"ArrowFunctionExpression","start":5860,"end":8476,"loc":{"start":{"line":195,"column":32},"end":{"line":280,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5866,"end":8476,"loc":{"start":{"line":195,"column":38},"end":{"line":280,"column":1}},"body":[{"type":"ExpressionStatement","start":5870,"end":6159,"loc":{"start":{"line":196,"column":2},"end":{"line":203,"column":4}},"expression":{"type":"CallExpression","start":5870,"end":6159,"loc":{"start":{"line":196,"column":2},"end":{"line":203,"column":4}},"callee":{"type":"Identifier","start":5870,"end":5874,"loc":{"start":{"line":196,"column":2},"end":{"line":196,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":5875,"end":5928,"loc":{"start":{"line":196,"column":7},"end":{"line":196,"column":60}},"value":"authentication callback redirects to send-token url","raw":"'authentication callback redirects to send-token url'"},{"type":"ArrowFunctionExpression","start":5930,"end":6158,"loc":{"start":{"line":196,"column":62},"end":{"line":203,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5936,"end":6158,"loc":{"start":{"line":196,"column":68},"end":{"line":203,"column":3}},"body":[{"type":"ReturnStatement","start":5942,"end":6154,"loc":{"start":{"line":197,"column":4},"end":{"line":202,"column":8}},"argument":{"type":"CallExpression","start":5949,"end":6154,"loc":{"start":{"line":197,"column":11},"end":{"line":202,"column":8}},"callee":{"type":"MemberExpression","start":5949,"end":6031,"loc":{"start":{"line":197,"column":11},"end":{"line":200,"column":13}},"object":{"type":"CallExpression","start":5949,"end":6017,"loc":{"start":{"line":197,"column":11},"end":{"line":199,"column":18}},"callee":{"type":"MemberExpression","start":5949,"end":6012,"loc":{"start":{"line":197,"column":11},"end":{"line":199,"column":13}},"object":{"type":"CallExpression","start":5949,"end":5998,"loc":{"start":{"line":197,"column":11},"end":{"line":198,"column":29}},"callee":{"type":"MemberExpression","start":5949,"end":5979,"loc":{"start":{"line":197,"column":11},"end":{"line":198,"column":10}},"object":{"type":"CallExpression","start":5949,"end":5968,"loc":{"start":{"line":197,"column":11},"end":{"line":197,"column":30}},"callee":{"type":"Identifier","start":5949,"end":5956,"loc":{"start":{"line":197,"column":11},"end":{"line":197,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":5957,"end":5967,"loc":{"start":{"line":197,"column":19},"end":{"line":197,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":5976,"end":5979,"loc":{"start":{"line":198,"column":7},"end":{"line":198,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":5980,"end":5997,"loc":{"start":{"line":198,"column":11},"end":{"line":198,"column":28}},"value":"/drive/callback","raw":"'/drive/callback'"}]},"property":{"type":"Identifier","start":6006,"end":6012,"loc":{"start":{"line":199,"column":7},"end":{"line":199,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":6013,"end":6016,"loc":{"start":{"line":199,"column":14},"end":{"line":199,"column":17}},"value":302,"raw":"302"}]},"property":{"type":"Identifier","start":6025,"end":6031,"loc":{"start":{"line":200,"column":7},"end":{"line":200,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":6032,"end":6153,"loc":{"start":{"line":200,"column":14},"end":{"line":202,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6033,"end":6036,"loc":{"start":{"line":200,"column":15},"end":{"line":200,"column":18}},"name":"res"}],"body":{"type":"BlockStatement","start":6041,"end":6153,"loc":{"start":{"line":200,"column":23},"end":{"line":202,"column":7}},"body":[{"type":"ExpressionStatement","start":6051,"end":6145,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":102}},"expression":{"type":"CallExpression","start":6051,"end":6145,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":102}},"callee":{"type":"MemberExpression","start":6051,"end":6088,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":45}},"object":{"type":"CallExpression","start":6051,"end":6078,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":35}},"callee":{"type":"Identifier","start":6051,"end":6057,"loc":{"start":{"line":201,"column":8},"end":{"line":201,"column":14}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":6058,"end":6077,"loc":{"start":{"line":201,"column":15},"end":{"line":201,"column":34}},"object":{"type":"MemberExpression","start":6058,"end":6068,"loc":{"start":{"line":201,"column":15},"end":{"line":201,"column":25}},"object":{"type":"Identifier","start":6058,"end":6061,"loc":{"start":{"line":201,"column":15},"end":{"line":201,"column":18}},"name":"res"},"property":{"type":"Identifier","start":6062,"end":6068,"loc":{"start":{"line":201,"column":19},"end":{"line":201,"column":25}},"name":"header"},"computed":false},"property":{"type":"Identifier","start":6069,"end":6077,"loc":{"start":{"line":201,"column":26},"end":{"line":201,"column":34}},"name":"location"},"computed":false}]},"property":{"type":"Identifier","start":6079,"end":6088,"loc":{"start":{"line":201,"column":36},"end":{"line":201,"column":45}},"name":"toContain"},"computed":false},"arguments":[{"type":"Literal","start":6089,"end":6144,"loc":{"start":{"line":201,"column":46},"end":{"line":201,"column":101}},"value":"http://localhost:3020/drive/send-token?uppyAuthToken=","raw":"'http://localhost:3020/drive/send-token?uppyAuthToken='"}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":6163,"end":6951,"loc":{"start":{"line":205,"column":2},"end":{"line":227,"column":4}},"expression":{"type":"CallExpression","start":6163,"end":6951,"loc":{"start":{"line":205,"column":2},"end":{"line":227,"column":4}},"callee":{"type":"Identifier","start":6163,"end":6167,"loc":{"start":{"line":205,"column":2},"end":{"line":205,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":6168,"end":6209,"loc":{"start":{"line":205,"column":7},"end":{"line":205,"column":48}},"value":"the token gets sent via cookie and html","raw":"'the token gets sent via cookie and html'"},{"type":"ArrowFunctionExpression","start":6211,"end":6950,"loc":{"start":{"line":205,"column":50},"end":{"line":227,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":6217,"end":6950,"loc":{"start":{"line":205,"column":56},"end":{"line":227,"column":3}},"body":[{"type":"ReturnStatement","start":6299,"end":6946,"loc":{"start":{"line":207,"column":4},"end":{"line":226,"column":8}},"argument":{"type":"CallExpression","start":6306,"end":6946,"loc":{"start":{"line":207,"column":11},"end":{"line":226,"column":8}},"callee":{"type":"MemberExpression","start":6306,"end":6446,"loc":{"start":{"line":207,"column":11},"end":{"line":210,"column":13}},"object":{"type":"CallExpression","start":6306,"end":6432,"loc":{"start":{"line":207,"column":11},"end":{"line":209,"column":18}},"callee":{"type":"MemberExpression","start":6306,"end":6427,"loc":{"start":{"line":207,"column":11},"end":{"line":209,"column":13}},"object":{"type":"CallExpression","start":6306,"end":6413,"loc":{"start":{"line":207,"column":11},"end":{"line":208,"column":87}},"callee":{"type":"MemberExpression","start":6306,"end":6336,"loc":{"start":{"line":207,"column":11},"end":{"line":208,"column":10}},"object":{"type":"CallExpression","start":6306,"end":6325,"loc":{"start":{"line":207,"column":11},"end":{"line":207,"column":30}},"callee":{"type":"Identifier","start":6306,"end":6313,"loc":{"start":{"line":207,"column":11},"end":{"line":207,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":6314,"end":6324,"loc":{"start":{"line":207,"column":19},"end":{"line":207,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":6333,"end":6336,"loc":{"start":{"line":208,"column":7},"end":{"line":208,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":6337,"end":6412,"loc":{"start":{"line":208,"column":11},"end":{"line":208,"column":86}},"expressions":[{"type":"Identifier","start":6374,"end":6379,"loc":{"start":{"line":208,"column":48},"end":{"line":208,"column":53}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":6338,"end":6372,"loc":{"start":{"line":208,"column":12},"end":{"line":208,"column":46}},"value":{"raw":"/dropbox/send-token?uppyAuthToken=","cooked":"/dropbox/send-token?uppyAuthToken="},"tail":false},{"type":"TemplateElement","start":6380,"end":6411,"loc":{"start":{"line":208,"column":54},"end":{"line":208,"column":85}},"value":{"raw":"&state=state-with-newer-version","cooked":"&state=state-with-newer-version"},"tail":true}]}]},"property":{"type":"Identifier","start":6421,"end":6427,"loc":{"start":{"line":209,"column":7},"end":{"line":209,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":6428,"end":6431,"loc":{"start":{"line":209,"column":14},"end":{"line":209,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":6440,"end":6446,"loc":{"start":{"line":210,"column":7},"end":{"line":210,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":6447,"end":6945,"loc":{"start":{"line":210,"column":14},"end":{"line":226,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6448,"end":6451,"loc":{"start":{"line":210,"column":15},"end":{"line":210,"column":18}},"name":"res"}],"body":{"type":"BlockStatement","start":6456,"end":6945,"loc":{"start":{"line":210,"column":23},"end":{"line":226,"column":7}},"body":[{"type":"VariableDeclaration","start":6466,"end":6561,"loc":{"start":{"line":211,"column":8},"end":{"line":211,"column":103}},"declarations":[{"type":"VariableDeclarator","start":6472,"end":6561,"loc":{"start":{"line":211,"column":14},"end":{"line":211,"column":103}},"id":{"type":"Identifier","start":6472,"end":6481,"loc":{"start":{"line":211,"column":14},"end":{"line":211,"column":23}},"name":"authToken"},"init":{"type":"MemberExpression","start":6484,"end":6561,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":103}},"object":{"type":"CallExpression","start":6484,"end":6558,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":100}},"callee":{"type":"MemberExpression","start":6484,"end":6531,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":73}},"object":{"type":"MemberExpression","start":6484,"end":6525,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":67}},"object":{"type":"CallExpression","start":6484,"end":6522,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":64}},"callee":{"type":"MemberExpression","start":6484,"end":6517,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":59}},"object":{"type":"MemberExpression","start":6484,"end":6511,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":53}},"object":{"type":"MemberExpression","start":6484,"end":6508,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":50}},"object":{"type":"MemberExpression","start":6484,"end":6494,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":36}},"object":{"type":"Identifier","start":6484,"end":6487,"loc":{"start":{"line":211,"column":26},"end":{"line":211,"column":29}},"name":"res"},"property":{"type":"Identifier","start":6488,"end":6494,"loc":{"start":{"line":211,"column":30},"end":{"line":211,"column":36}},"name":"header"},"computed":false},"property":{"type":"Literal","start":6495,"end":6507,"loc":{"start":{"line":211,"column":37},"end":{"line":211,"column":49}},"value":"set-cookie","raw":"'set-cookie'"},"computed":true},"property":{"type":"Literal","start":6509,"end":6510,"loc":{"start":{"line":211,"column":51},"end":{"line":211,"column":52}},"value":0,"raw":"0"},"computed":true},"property":{"type":"Identifier","start":6512,"end":6517,"loc":{"start":{"line":211,"column":54},"end":{"line":211,"column":59}},"name":"split"},"computed":false},"arguments":[{"type":"Literal","start":6518,"end":6521,"loc":{"start":{"line":211,"column":60},"end":{"line":211,"column":63}},"value":";","raw":"';'"}]},"property":{"type":"Literal","start":6523,"end":6524,"loc":{"start":{"line":211,"column":65},"end":{"line":211,"column":66}},"value":0,"raw":"0"},"computed":true},"property":{"type":"Identifier","start":6526,"end":6531,"loc":{"start":{"line":211,"column":68},"end":{"line":211,"column":73}},"name":"split"},"computed":false},"arguments":[{"type":"Literal","start":6532,"end":6557,"loc":{"start":{"line":211,"column":74},"end":{"line":211,"column":99}},"value":"uppyAuthToken--dropbox=","raw":"'uppyAuthToken--dropbox='"}]},"property":{"type":"Literal","start":6559,"end":6560,"loc":{"start":{"line":211,"column":101},"end":{"line":211,"column":102}},"value":1,"raw":"1"},"computed":true}}],"kind":"const"},{"type":"ExpressionStatement","start":6570,"end":6602,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":40}},"expression":{"type":"CallExpression","start":6570,"end":6602,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":40}},"callee":{"type":"MemberExpression","start":6570,"end":6595,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":33}},"object":{"type":"CallExpression","start":6570,"end":6587,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":25}},"callee":{"type":"Identifier","start":6570,"end":6576,"loc":{"start":{"line":212,"column":8},"end":{"line":212,"column":14}},"name":"expect"},"arguments":[{"type":"Identifier","start":6577,"end":6586,"loc":{"start":{"line":212,"column":15},"end":{"line":212,"column":24}},"name":"authToken"}]},"property":{"type":"Identifier","start":6588,"end":6595,"loc":{"start":{"line":212,"column":26},"end":{"line":212,"column":33}},"name":"toEqual"},"computed":false},"arguments":[{"type":"Identifier","start":6596,"end":6601,"loc":{"start":{"line":212,"column":34},"end":{"line":212,"column":39}},"name":"token"}]}},{"type":"VariableDeclaration","start":6611,"end":6901,"loc":{"start":{"line":213,"column":8},"end":{"line":224,"column":12}},"declarations":[{"type":"VariableDeclarator","start":6617,"end":6901,"loc":{"start":{"line":213,"column":14},"end":{"line":224,"column":12}},"id":{"type":"Identifier","start":6617,"end":6621,"loc":{"start":{"line":213,"column":14},"end":{"line":213,"column":18}},"name":"body"},"init":{"type":"TemplateLiteral","start":6624,"end":6901,"loc":{"start":{"line":213,"column":21},"end":{"line":224,"column":12}},"expressions":[{"type":"Identifier","start":6780,"end":6785,"loc":{"start":{"line":219,"column":62},"end":{"line":219,"column":67}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":6625,"end":6778,"loc":{"start":{"line":213,"column":22},"end":{"line":219,"column":60}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \""},"tail":false},{"type":"TemplateElement","start":6786,"end":6900,"loc":{"start":{"line":219,"column":68},"end":{"line":224,"column":11}},"value":{"raw":"\"}), \"http://localhost:3020\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\"}), \"http://localhost:3020\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}],"kind":"const"},{"type":"ExpressionStatement","start":6910,"end":6937,"loc":{"start":{"line":225,"column":8},"end":{"line":225,"column":35}},"expression":{"type":"CallExpression","start":6910,"end":6937,"loc":{"start":{"line":225,"column":8},"end":{"line":225,"column":35}},"callee":{"type":"MemberExpression","start":6910,"end":6931,"loc":{"start":{"line":225,"column":8},"end":{"line":225,"column":29}},"object":{"type":"CallExpression","start":6910,"end":6926,"loc":{"start":{"line":225,"column":8},"end":{"line":225,"column":24}},"callee":{"type":"Identifier","start":6910,"end":6916,"loc":{"start":{"line":225,"column":8},"end":{"line":225,"column":14}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":6917,"end":6925,"loc":{"start":{"line":225,"column":15},"end":{"line":225,"column":23}},"object":{"type":"Identifier","start":6917,"end":6920,"loc":{"start":{"line":225,"column":15},"end":{"line":225,"column":18}},"name":"res"},"property":{"type":"Identifier","start":6921,"end":6925,"loc":{"start":{"line":225,"column":19},"end":{"line":225,"column":23}},"name":"text"},"computed":false}]},"property":{"type":"Identifier","start":6927,"end":6931,"loc":{"start":{"line":225,"column":25},"end":{"line":225,"column":29}},"name":"toBe"},"computed":false},"arguments":[{"type":"Identifier","start":6932,"end":6936,"loc":{"start":{"line":225,"column":30},"end":{"line":225,"column":34}},"name":"body"}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":6955,"end":7590,"loc":{"start":{"line":229,"column":2},"end":{"line":249,"column":4}},"expression":{"type":"CallExpression","start":6955,"end":7590,"loc":{"start":{"line":229,"column":2},"end":{"line":249,"column":4}},"callee":{"type":"Identifier","start":6955,"end":6959,"loc":{"start":{"line":229,"column":2},"end":{"line":229,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":6960,"end":7011,"loc":{"start":{"line":229,"column":7},"end":{"line":229,"column":58}},"value":"the token gets to older clients without stringify","raw":"'the token gets to older clients without stringify'"},{"type":"ArrowFunctionExpression","start":7013,"end":7589,"loc":{"start":{"line":229,"column":60},"end":{"line":249,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":7019,"end":7589,"loc":{"start":{"line":229,"column":66},"end":{"line":249,"column":3}},"body":[{"type":"ReturnStatement","start":7101,"end":7585,"loc":{"start":{"line":231,"column":4},"end":{"line":248,"column":8}},"argument":{"type":"CallExpression","start":7108,"end":7585,"loc":{"start":{"line":231,"column":11},"end":{"line":248,"column":8}},"callee":{"type":"MemberExpression","start":7108,"end":7246,"loc":{"start":{"line":231,"column":11},"end":{"line":234,"column":13}},"object":{"type":"CallExpression","start":7108,"end":7232,"loc":{"start":{"line":231,"column":11},"end":{"line":233,"column":18}},"callee":{"type":"MemberExpression","start":7108,"end":7227,"loc":{"start":{"line":231,"column":11},"end":{"line":233,"column":13}},"object":{"type":"CallExpression","start":7108,"end":7213,"loc":{"start":{"line":231,"column":11},"end":{"line":232,"column":85}},"callee":{"type":"MemberExpression","start":7108,"end":7138,"loc":{"start":{"line":231,"column":11},"end":{"line":232,"column":10}},"object":{"type":"CallExpression","start":7108,"end":7127,"loc":{"start":{"line":231,"column":11},"end":{"line":231,"column":30}},"callee":{"type":"Identifier","start":7108,"end":7115,"loc":{"start":{"line":231,"column":11},"end":{"line":231,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":7116,"end":7126,"loc":{"start":{"line":231,"column":19},"end":{"line":231,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":7135,"end":7138,"loc":{"start":{"line":232,"column":7},"end":{"line":232,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7139,"end":7212,"loc":{"start":{"line":232,"column":11},"end":{"line":232,"column":84}},"expressions":[{"type":"Identifier","start":7174,"end":7179,"loc":{"start":{"line":232,"column":46},"end":{"line":232,"column":51}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":7140,"end":7172,"loc":{"start":{"line":232,"column":12},"end":{"line":232,"column":44}},"value":{"raw":"/drive/send-token?uppyAuthToken=","cooked":"/drive/send-token?uppyAuthToken="},"tail":false},{"type":"TemplateElement","start":7180,"end":7211,"loc":{"start":{"line":232,"column":52},"end":{"line":232,"column":83}},"value":{"raw":"&state=state-with-older-version","cooked":"&state=state-with-older-version"},"tail":true}]}]},"property":{"type":"Identifier","start":7221,"end":7227,"loc":{"start":{"line":233,"column":7},"end":{"line":233,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":7228,"end":7231,"loc":{"start":{"line":233,"column":14},"end":{"line":233,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":7240,"end":7246,"loc":{"start":{"line":234,"column":7},"end":{"line":234,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":7247,"end":7584,"loc":{"start":{"line":234,"column":14},"end":{"line":248,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7248,"end":7251,"loc":{"start":{"line":234,"column":15},"end":{"line":234,"column":18}},"name":"res"}],"body":{"type":"BlockStatement","start":7256,"end":7584,"loc":{"start":{"line":234,"column":23},"end":{"line":248,"column":7}},"body":[{"type":"VariableDeclaration","start":7266,"end":7540,"loc":{"start":{"line":235,"column":8},"end":{"line":246,"column":12}},"declarations":[{"type":"VariableDeclarator","start":7272,"end":7540,"loc":{"start":{"line":235,"column":14},"end":{"line":246,"column":12}},"id":{"type":"Identifier","start":7272,"end":7276,"loc":{"start":{"line":235,"column":14},"end":{"line":235,"column":18}},"name":"body"},"init":{"type":"TemplateLiteral","start":7279,"end":7540,"loc":{"start":{"line":235,"column":21},"end":{"line":246,"column":12}},"expressions":[{"type":"Identifier","start":7420,"end":7425,"loc":{"start":{"line":241,"column":47},"end":{"line":241,"column":52}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":7280,"end":7418,"loc":{"start":{"line":235,"column":22},"end":{"line":241,"column":45}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage({token: \""},"tail":false},{"type":"TemplateElement","start":7426,"end":7539,"loc":{"start":{"line":241,"column":53},"end":{"line":246,"column":11}},"value":{"raw":"\"}, \"http://localhost:3020\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\"}, \"http://localhost:3020\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}],"kind":"const"},{"type":"ExpressionStatement","start":7549,"end":7576,"loc":{"start":{"line":247,"column":8},"end":{"line":247,"column":35}},"expression":{"type":"CallExpression","start":7549,"end":7576,"loc":{"start":{"line":247,"column":8},"end":{"line":247,"column":35}},"callee":{"type":"MemberExpression","start":7549,"end":7570,"loc":{"start":{"line":247,"column":8},"end":{"line":247,"column":29}},"object":{"type":"CallExpression","start":7549,"end":7565,"loc":{"start":{"line":247,"column":8},"end":{"line":247,"column":24}},"callee":{"type":"Identifier","start":7549,"end":7555,"loc":{"start":{"line":247,"column":8},"end":{"line":247,"column":14}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":7556,"end":7564,"loc":{"start":{"line":247,"column":15},"end":{"line":247,"column":23}},"object":{"type":"Identifier","start":7556,"end":7559,"loc":{"start":{"line":247,"column":15},"end":{"line":247,"column":18}},"name":"res"},"property":{"type":"Identifier","start":7560,"end":7564,"loc":{"start":{"line":247,"column":19},"end":{"line":247,"column":23}},"name":"text"},"computed":false}]},"property":{"type":"Identifier","start":7566,"end":7570,"loc":{"start":{"line":247,"column":25},"end":{"line":247,"column":29}},"name":"toBe"},"computed":false},"arguments":[{"type":"Identifier","start":7571,"end":7575,"loc":{"start":{"line":247,"column":30},"end":{"line":247,"column":34}},"name":"body"}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":7594,"end":8265,"loc":{"start":{"line":251,"column":2},"end":{"line":271,"column":4}},"expression":{"type":"CallExpression","start":7594,"end":8265,"loc":{"start":{"line":251,"column":2},"end":{"line":271,"column":4}},"callee":{"type":"Identifier","start":7594,"end":7598,"loc":{"start":{"line":251,"column":2},"end":{"line":251,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":7599,"end":7660,"loc":{"start":{"line":251,"column":7},"end":{"line":251,"column":68}},"value":"the token gets sent to newer clients with old version style","raw":"'the token gets sent to newer clients with old version style'"},{"type":"ArrowFunctionExpression","start":7662,"end":8264,"loc":{"start":{"line":251,"column":70},"end":{"line":271,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":7668,"end":8264,"loc":{"start":{"line":251,"column":76},"end":{"line":271,"column":3}},"body":[{"type":"ReturnStatement","start":7750,"end":8260,"loc":{"start":{"line":253,"column":4},"end":{"line":270,"column":8}},"argument":{"type":"CallExpression","start":7757,"end":8260,"loc":{"start":{"line":253,"column":11},"end":{"line":270,"column":8}},"callee":{"type":"MemberExpression","start":7757,"end":7905,"loc":{"start":{"line":253,"column":11},"end":{"line":256,"column":13}},"object":{"type":"CallExpression","start":7757,"end":7891,"loc":{"start":{"line":253,"column":11},"end":{"line":255,"column":18}},"callee":{"type":"MemberExpression","start":7757,"end":7886,"loc":{"start":{"line":253,"column":11},"end":{"line":255,"column":13}},"object":{"type":"CallExpression","start":7757,"end":7872,"loc":{"start":{"line":253,"column":11},"end":{"line":254,"column":95}},"callee":{"type":"MemberExpression","start":7757,"end":7787,"loc":{"start":{"line":253,"column":11},"end":{"line":254,"column":10}},"object":{"type":"CallExpression","start":7757,"end":7776,"loc":{"start":{"line":253,"column":11},"end":{"line":253,"column":30}},"callee":{"type":"Identifier","start":7757,"end":7764,"loc":{"start":{"line":253,"column":11},"end":{"line":253,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":7765,"end":7775,"loc":{"start":{"line":253,"column":19},"end":{"line":253,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":7784,"end":7787,"loc":{"start":{"line":254,"column":7},"end":{"line":254,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":7788,"end":7871,"loc":{"start":{"line":254,"column":11},"end":{"line":254,"column":94}},"expressions":[{"type":"Identifier","start":7823,"end":7828,"loc":{"start":{"line":254,"column":46},"end":{"line":254,"column":51}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":7789,"end":7821,"loc":{"start":{"line":254,"column":12},"end":{"line":254,"column":44}},"value":{"raw":"/drive/send-token?uppyAuthToken=","cooked":"/drive/send-token?uppyAuthToken="},"tail":false},{"type":"TemplateElement","start":7829,"end":7870,"loc":{"start":{"line":254,"column":52},"end":{"line":254,"column":93}},"value":{"raw":"&state=state-with-newer-version-old-style","cooked":"&state=state-with-newer-version-old-style"},"tail":true}]}]},"property":{"type":"Identifier","start":7880,"end":7886,"loc":{"start":{"line":255,"column":7},"end":{"line":255,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":7887,"end":7890,"loc":{"start":{"line":255,"column":14},"end":{"line":255,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":7899,"end":7905,"loc":{"start":{"line":256,"column":7},"end":{"line":256,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":7906,"end":8259,"loc":{"start":{"line":256,"column":14},"end":{"line":270,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7907,"end":7910,"loc":{"start":{"line":256,"column":15},"end":{"line":256,"column":18}},"name":"res"}],"body":{"type":"BlockStatement","start":7915,"end":8259,"loc":{"start":{"line":256,"column":23},"end":{"line":270,"column":7}},"body":[{"type":"VariableDeclaration","start":7925,"end":8215,"loc":{"start":{"line":257,"column":8},"end":{"line":268,"column":12}},"declarations":[{"type":"VariableDeclarator","start":7931,"end":8215,"loc":{"start":{"line":257,"column":14},"end":{"line":268,"column":12}},"id":{"type":"Identifier","start":7931,"end":7935,"loc":{"start":{"line":257,"column":14},"end":{"line":257,"column":18}},"name":"body"},"init":{"type":"TemplateLiteral","start":7938,"end":8215,"loc":{"start":{"line":257,"column":21},"end":{"line":268,"column":12}},"expressions":[{"type":"Identifier","start":8094,"end":8099,"loc":{"start":{"line":263,"column":62},"end":{"line":263,"column":67}},"name":"token"}],"quasis":[{"type":"TemplateElement","start":7939,"end":8092,"loc":{"start":{"line":257,"column":22},"end":{"line":263,"column":60}},"value":{"raw":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \"","cooked":"\n    <!DOCTYPE html>\n    <html>\n    <head>\n        <meta charset=\"utf-8\" />\n        <script>\n          window.opener.postMessage(JSON.stringify({token: \""},"tail":false},{"type":"TemplateElement","start":8100,"end":8214,"loc":{"start":{"line":263,"column":68},"end":{"line":268,"column":11}},"value":{"raw":"\"}), \"http://localhost:3020\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>","cooked":"\"}), \"http://localhost:3020\")\n          window.close()\n        </script>\n    </head>\n    <body></body>\n    </html>"},"tail":true}]}}],"kind":"const"},{"type":"ExpressionStatement","start":8224,"end":8251,"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":35}},"expression":{"type":"CallExpression","start":8224,"end":8251,"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":35}},"callee":{"type":"MemberExpression","start":8224,"end":8245,"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":29}},"object":{"type":"CallExpression","start":8224,"end":8240,"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":24}},"callee":{"type":"Identifier","start":8224,"end":8230,"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":14}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":8231,"end":8239,"loc":{"start":{"line":269,"column":15},"end":{"line":269,"column":23}},"object":{"type":"Identifier","start":8231,"end":8234,"loc":{"start":{"line":269,"column":15},"end":{"line":269,"column":18}},"name":"res"},"property":{"type":"Identifier","start":8235,"end":8239,"loc":{"start":{"line":269,"column":19},"end":{"line":269,"column":23}},"name":"text"},"computed":false}]},"property":{"type":"Identifier","start":8241,"end":8245,"loc":{"start":{"line":269,"column":25},"end":{"line":269,"column":29}},"name":"toBe"},"computed":false},"arguments":[{"type":"Identifier","start":8246,"end":8250,"loc":{"start":{"line":269,"column":30},"end":{"line":269,"column":34}},"name":"body"}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":8269,"end":8474,"loc":{"start":{"line":273,"column":2},"end":{"line":279,"column":4}},"expression":{"type":"CallExpression","start":8269,"end":8474,"loc":{"start":{"line":273,"column":2},"end":{"line":279,"column":4}},"callee":{"type":"Identifier","start":8269,"end":8273,"loc":{"start":{"line":273,"column":2},"end":{"line":273,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":8274,"end":8291,"loc":{"start":{"line":273,"column":7},"end":{"line":273,"column":24}},"value":"logout provider","raw":"'logout provider'"},{"type":"ArrowFunctionExpression","start":8293,"end":8473,"loc":{"start":{"line":273,"column":26},"end":{"line":279,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8299,"end":8473,"loc":{"start":{"line":273,"column":32},"end":{"line":279,"column":3}},"body":[{"type":"ReturnStatement","start":8305,"end":8469,"loc":{"start":{"line":274,"column":4},"end":{"line":278,"column":52}},"argument":{"type":"CallExpression","start":8312,"end":8469,"loc":{"start":{"line":274,"column":11},"end":{"line":278,"column":52}},"callee":{"type":"MemberExpression","start":8312,"end":8428,"loc":{"start":{"line":274,"column":11},"end":{"line":278,"column":11}},"object":{"type":"CallExpression","start":8312,"end":8416,"loc":{"start":{"line":274,"column":11},"end":{"line":277,"column":18}},"callee":{"type":"MemberExpression","start":8312,"end":8411,"loc":{"start":{"line":274,"column":11},"end":{"line":277,"column":13}},"object":{"type":"CallExpression","start":8312,"end":8397,"loc":{"start":{"line":274,"column":11},"end":{"line":276,"column":36}},"callee":{"type":"MemberExpression","start":8312,"end":8371,"loc":{"start":{"line":274,"column":11},"end":{"line":276,"column":10}},"object":{"type":"CallExpression","start":8312,"end":8360,"loc":{"start":{"line":274,"column":11},"end":{"line":275,"column":28}},"callee":{"type":"MemberExpression","start":8312,"end":8342,"loc":{"start":{"line":274,"column":11},"end":{"line":275,"column":10}},"object":{"type":"CallExpression","start":8312,"end":8331,"loc":{"start":{"line":274,"column":11},"end":{"line":274,"column":30}},"callee":{"type":"Identifier","start":8312,"end":8319,"loc":{"start":{"line":274,"column":11},"end":{"line":274,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":8320,"end":8330,"loc":{"start":{"line":274,"column":19},"end":{"line":274,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":8339,"end":8342,"loc":{"start":{"line":275,"column":7},"end":{"line":275,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":8343,"end":8359,"loc":{"start":{"line":275,"column":11},"end":{"line":275,"column":27}},"value":"/drive/logout/","raw":"'/drive/logout/'"}]},"property":{"type":"Identifier","start":8368,"end":8371,"loc":{"start":{"line":276,"column":7},"end":{"line":276,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":8372,"end":8389,"loc":{"start":{"line":276,"column":11},"end":{"line":276,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":8391,"end":8396,"loc":{"start":{"line":276,"column":30},"end":{"line":276,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":8405,"end":8411,"loc":{"start":{"line":277,"column":7},"end":{"line":277,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":8412,"end":8415,"loc":{"start":{"line":277,"column":14},"end":{"line":277,"column":17}},"value":200,"raw":"200"}]},"property":{"type":"Identifier","start":8424,"end":8428,"loc":{"start":{"line":278,"column":7},"end":{"line":278,"column":11}},"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":8429,"end":8468,"loc":{"start":{"line":278,"column":12},"end":{"line":278,"column":51}},"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":8430,"end":8433,"loc":{"start":{"line":278,"column":13},"end":{"line":278,"column":16}},"name":"res"}],"body":{"type":"CallExpression","start":8438,"end":8468,"loc":{"start":{"line":278,"column":21},"end":{"line":278,"column":51}},"callee":{"type":"MemberExpression","start":8438,"end":8462,"loc":{"start":{"line":278,"column":21},"end":{"line":278,"column":45}},"object":{"type":"CallExpression","start":8438,"end":8457,"loc":{"start":{"line":278,"column":21},"end":{"line":278,"column":40}},"callee":{"type":"Identifier","start":8438,"end":8444,"loc":{"start":{"line":278,"column":21},"end":{"line":278,"column":27}},"name":"expect"},"arguments":[{"type":"MemberExpression","start":8445,"end":8456,"loc":{"start":{"line":278,"column":28},"end":{"line":278,"column":39}},"object":{"type":"MemberExpression","start":8445,"end":8453,"loc":{"start":{"line":278,"column":28},"end":{"line":278,"column":36}},"object":{"type":"Identifier","start":8445,"end":8448,"loc":{"start":{"line":278,"column":28},"end":{"line":278,"column":31}},"name":"res"},"property":{"type":"Identifier","start":8449,"end":8453,"loc":{"start":{"line":278,"column":32},"end":{"line":278,"column":36}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":8454,"end":8456,"loc":{"start":{"line":278,"column":37},"end":{"line":278,"column":39}},"name":"ok"},"computed":false}]},"property":{"type":"Identifier","start":8458,"end":8462,"loc":{"start":{"line":278,"column":41},"end":{"line":278,"column":45}},"name":"toBe"},"computed":false},"arguments":[{"type":"Literal","start":8463,"end":8467,"loc":{"start":{"line":278,"column":46},"end":{"line":278,"column":50}},"value":true,"raw":"true"}]}}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":8479,"end":9073,"loc":{"start":{"line":282,"column":0},"end":{"line":298,"column":2}},"expression":{"type":"CallExpression","start":8479,"end":9073,"loc":{"start":{"line":282,"column":0},"end":{"line":298,"column":2}},"callee":{"type":"Identifier","start":8479,"end":8487,"loc":{"start":{"line":282,"column":0},"end":{"line":282,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":8488,"end":8509,"loc":{"start":{"line":282,"column":9},"end":{"line":282,"column":30}},"value":"connect to provider","raw":"'connect to provider'"},{"type":"ArrowFunctionExpression","start":8511,"end":9072,"loc":{"start":{"line":282,"column":32},"end":{"line":298,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8517,"end":9072,"loc":{"start":{"line":282,"column":38},"end":{"line":298,"column":1}},"body":[{"type":"ExpressionStatement","start":8521,"end":8796,"loc":{"start":{"line":283,"column":2},"end":{"line":289,"column":4}},"expression":{"type":"CallExpression","start":8521,"end":8796,"loc":{"start":{"line":283,"column":2},"end":{"line":289,"column":4}},"callee":{"type":"Identifier","start":8521,"end":8525,"loc":{"start":{"line":283,"column":2},"end":{"line":283,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":8526,"end":8568,"loc":{"start":{"line":283,"column":7},"end":{"line":283,"column":49}},"value":"connect to dropbox via grant.js endpoint","raw":"'connect to dropbox via grant.js endpoint'"},{"type":"ArrowFunctionExpression","start":8570,"end":8795,"loc":{"start":{"line":283,"column":51},"end":{"line":289,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8576,"end":8795,"loc":{"start":{"line":283,"column":57},"end":{"line":289,"column":3}},"body":[{"type":"ReturnStatement","start":8582,"end":8791,"loc":{"start":{"line":284,"column":4},"end":{"line":288,"column":87}},"argument":{"type":"CallExpression","start":8589,"end":8791,"loc":{"start":{"line":284,"column":11},"end":{"line":288,"column":87}},"callee":{"type":"MemberExpression","start":8589,"end":8717,"loc":{"start":{"line":284,"column":11},"end":{"line":288,"column":13}},"object":{"type":"CallExpression","start":8589,"end":8703,"loc":{"start":{"line":284,"column":11},"end":{"line":287,"column":18}},"callee":{"type":"MemberExpression","start":8589,"end":8698,"loc":{"start":{"line":284,"column":11},"end":{"line":287,"column":13}},"object":{"type":"CallExpression","start":8589,"end":8684,"loc":{"start":{"line":284,"column":11},"end":{"line":286,"column":36}},"callee":{"type":"MemberExpression","start":8589,"end":8658,"loc":{"start":{"line":284,"column":11},"end":{"line":286,"column":10}},"object":{"type":"CallExpression","start":8589,"end":8647,"loc":{"start":{"line":284,"column":11},"end":{"line":285,"column":38}},"callee":{"type":"MemberExpression","start":8589,"end":8619,"loc":{"start":{"line":284,"column":11},"end":{"line":285,"column":10}},"object":{"type":"CallExpression","start":8589,"end":8608,"loc":{"start":{"line":284,"column":11},"end":{"line":284,"column":30}},"callee":{"type":"Identifier","start":8589,"end":8596,"loc":{"start":{"line":284,"column":11},"end":{"line":284,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":8597,"end":8607,"loc":{"start":{"line":284,"column":19},"end":{"line":284,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":8616,"end":8619,"loc":{"start":{"line":285,"column":7},"end":{"line":285,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":8620,"end":8646,"loc":{"start":{"line":285,"column":11},"end":{"line":285,"column":37}},"value":"/dropbox/connect?foo=bar","raw":"'/dropbox/connect?foo=bar'"}]},"property":{"type":"Identifier","start":8655,"end":8658,"loc":{"start":{"line":286,"column":7},"end":{"line":286,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":8659,"end":8676,"loc":{"start":{"line":286,"column":11},"end":{"line":286,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":8678,"end":8683,"loc":{"start":{"line":286,"column":30},"end":{"line":286,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":8692,"end":8698,"loc":{"start":{"line":287,"column":7},"end":{"line":287,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":8699,"end":8702,"loc":{"start":{"line":287,"column":14},"end":{"line":287,"column":17}},"value":302,"raw":"302"}]},"property":{"type":"Identifier","start":8711,"end":8717,"loc":{"start":{"line":288,"column":7},"end":{"line":288,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":8718,"end":8728,"loc":{"start":{"line":288,"column":14},"end":{"line":288,"column":24}},"value":"Location","raw":"'Location'"},{"type":"TemplateLiteral","start":8730,"end":8790,"loc":{"start":{"line":288,"column":26},"end":{"line":288,"column":86}},"expressions":[{"type":"Identifier","start":8777,"end":8788,"loc":{"start":{"line":288,"column":73},"end":{"line":288,"column":84}},"name":"OAUTH_STATE"}],"quasis":[{"type":"TemplateElement","start":8731,"end":8775,"loc":{"start":{"line":288,"column":27},"end":{"line":288,"column":71}},"value":{"raw":"http://localhost:3020/connect/dropbox?state=","cooked":"http://localhost:3020/connect/dropbox?state="},"tail":false},{"type":"TemplateElement","start":8789,"end":8789,"loc":{"start":{"line":288,"column":85},"end":{"line":288,"column":85}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]}}]}},{"type":"ExpressionStatement","start":8800,"end":9070,"loc":{"start":{"line":291,"column":2},"end":{"line":297,"column":4}},"expression":{"type":"CallExpression","start":8800,"end":9070,"loc":{"start":{"line":291,"column":2},"end":{"line":297,"column":4}},"callee":{"type":"Identifier","start":8800,"end":8804,"loc":{"start":{"line":291,"column":2},"end":{"line":291,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":8805,"end":8845,"loc":{"start":{"line":291,"column":7},"end":{"line":291,"column":47}},"value":"connect to drive via grant.js endpoint","raw":"'connect to drive via grant.js endpoint'"},{"type":"ArrowFunctionExpression","start":8847,"end":9069,"loc":{"start":{"line":291,"column":49},"end":{"line":297,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":8853,"end":9069,"loc":{"start":{"line":291,"column":55},"end":{"line":297,"column":3}},"body":[{"type":"ReturnStatement","start":8859,"end":9065,"loc":{"start":{"line":292,"column":4},"end":{"line":296,"column":86}},"argument":{"type":"CallExpression","start":8866,"end":9065,"loc":{"start":{"line":292,"column":11},"end":{"line":296,"column":86}},"callee":{"type":"MemberExpression","start":8866,"end":8992,"loc":{"start":{"line":292,"column":11},"end":{"line":296,"column":13}},"object":{"type":"CallExpression","start":8866,"end":8978,"loc":{"start":{"line":292,"column":11},"end":{"line":295,"column":18}},"callee":{"type":"MemberExpression","start":8866,"end":8973,"loc":{"start":{"line":292,"column":11},"end":{"line":295,"column":13}},"object":{"type":"CallExpression","start":8866,"end":8959,"loc":{"start":{"line":292,"column":11},"end":{"line":294,"column":36}},"callee":{"type":"MemberExpression","start":8866,"end":8933,"loc":{"start":{"line":292,"column":11},"end":{"line":294,"column":10}},"object":{"type":"CallExpression","start":8866,"end":8922,"loc":{"start":{"line":292,"column":11},"end":{"line":293,"column":36}},"callee":{"type":"MemberExpression","start":8866,"end":8896,"loc":{"start":{"line":292,"column":11},"end":{"line":293,"column":10}},"object":{"type":"CallExpression","start":8866,"end":8885,"loc":{"start":{"line":292,"column":11},"end":{"line":292,"column":30}},"callee":{"type":"Identifier","start":8866,"end":8873,"loc":{"start":{"line":292,"column":11},"end":{"line":292,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":8874,"end":8884,"loc":{"start":{"line":292,"column":19},"end":{"line":292,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":8893,"end":8896,"loc":{"start":{"line":293,"column":7},"end":{"line":293,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":8897,"end":8921,"loc":{"start":{"line":293,"column":11},"end":{"line":293,"column":35}},"value":"/drive/connect?foo=bar","raw":"'/drive/connect?foo=bar'"}]},"property":{"type":"Identifier","start":8930,"end":8933,"loc":{"start":{"line":294,"column":7},"end":{"line":294,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":8934,"end":8951,"loc":{"start":{"line":294,"column":11},"end":{"line":294,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":8953,"end":8958,"loc":{"start":{"line":294,"column":30},"end":{"line":294,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":8967,"end":8973,"loc":{"start":{"line":295,"column":7},"end":{"line":295,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":8974,"end":8977,"loc":{"start":{"line":295,"column":14},"end":{"line":295,"column":17}},"value":302,"raw":"302"}]},"property":{"type":"Identifier","start":8986,"end":8992,"loc":{"start":{"line":296,"column":7},"end":{"line":296,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":8993,"end":9003,"loc":{"start":{"line":296,"column":14},"end":{"line":296,"column":24}},"value":"Location","raw":"'Location'"},{"type":"TemplateLiteral","start":9005,"end":9064,"loc":{"start":{"line":296,"column":26},"end":{"line":296,"column":85}},"expressions":[{"type":"Identifier","start":9051,"end":9062,"loc":{"start":{"line":296,"column":72},"end":{"line":296,"column":83}},"name":"OAUTH_STATE"}],"quasis":[{"type":"TemplateElement","start":9006,"end":9049,"loc":{"start":{"line":296,"column":27},"end":{"line":296,"column":70}},"value":{"raw":"http://localhost:3020/connect/google?state=","cooked":"http://localhost:3020/connect/google?state="},"tail":false},{"type":"TemplateElement","start":9063,"end":9063,"loc":{"start":{"line":296,"column":84},"end":{"line":296,"column":84}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]}}]}}]}}]}},{"type":"ExpressionStatement","start":9075,"end":9720,"loc":{"start":{"line":300,"column":0},"end":{"line":316,"column":2}},"expression":{"type":"CallExpression","start":9075,"end":9720,"loc":{"start":{"line":300,"column":0},"end":{"line":316,"column":2}},"callee":{"type":"Identifier","start":9075,"end":9083,"loc":{"start":{"line":300,"column":0},"end":{"line":300,"column":8}},"name":"describe"},"arguments":[{"type":"Literal","start":9084,"end":9107,"loc":{"start":{"line":300,"column":9},"end":{"line":300,"column":32}},"value":"handle oauth redirect","raw":"'handle oauth redirect'"},{"type":"ArrowFunctionExpression","start":9109,"end":9719,"loc":{"start":{"line":300,"column":34},"end":{"line":316,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9115,"end":9719,"loc":{"start":{"line":300,"column":40},"end":{"line":316,"column":1}},"body":[{"type":"ExpressionStatement","start":9119,"end":9410,"loc":{"start":{"line":301,"column":2},"end":{"line":307,"column":4}},"expression":{"type":"CallExpression","start":9119,"end":9410,"loc":{"start":{"line":301,"column":2},"end":{"line":307,"column":4}},"callee":{"type":"Identifier","start":9119,"end":9123,"loc":{"start":{"line":301,"column":2},"end":{"line":301,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":9124,"end":9159,"loc":{"start":{"line":301,"column":7},"end":{"line":301,"column":42}},"value":"redirect to a valid uppy instance","raw":"'redirect to a valid uppy instance'"},{"type":"ArrowFunctionExpression","start":9161,"end":9409,"loc":{"start":{"line":301,"column":44},"end":{"line":307,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9167,"end":9409,"loc":{"start":{"line":301,"column":50},"end":{"line":307,"column":3}},"body":[{"type":"ReturnStatement","start":9173,"end":9405,"loc":{"start":{"line":302,"column":4},"end":{"line":306,"column":96}},"argument":{"type":"CallExpression","start":9180,"end":9405,"loc":{"start":{"line":302,"column":11},"end":{"line":306,"column":96}},"callee":{"type":"MemberExpression","start":9180,"end":9322,"loc":{"start":{"line":302,"column":11},"end":{"line":306,"column":13}},"object":{"type":"CallExpression","start":9180,"end":9308,"loc":{"start":{"line":302,"column":11},"end":{"line":305,"column":18}},"callee":{"type":"MemberExpression","start":9180,"end":9303,"loc":{"start":{"line":302,"column":11},"end":{"line":305,"column":13}},"object":{"type":"CallExpression","start":9180,"end":9289,"loc":{"start":{"line":302,"column":11},"end":{"line":304,"column":36}},"callee":{"type":"MemberExpression","start":9180,"end":9263,"loc":{"start":{"line":302,"column":11},"end":{"line":304,"column":10}},"object":{"type":"CallExpression","start":9180,"end":9252,"loc":{"start":{"line":302,"column":11},"end":{"line":303,"column":52}},"callee":{"type":"MemberExpression","start":9180,"end":9210,"loc":{"start":{"line":302,"column":11},"end":{"line":303,"column":10}},"object":{"type":"CallExpression","start":9180,"end":9199,"loc":{"start":{"line":302,"column":11},"end":{"line":302,"column":30}},"callee":{"type":"Identifier","start":9180,"end":9187,"loc":{"start":{"line":302,"column":11},"end":{"line":302,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":9188,"end":9198,"loc":{"start":{"line":302,"column":19},"end":{"line":302,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":9207,"end":9210,"loc":{"start":{"line":303,"column":7},"end":{"line":303,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":9211,"end":9251,"loc":{"start":{"line":303,"column":11},"end":{"line":303,"column":51}},"expressions":[{"type":"Identifier","start":9238,"end":9249,"loc":{"start":{"line":303,"column":38},"end":{"line":303,"column":49}},"name":"OAUTH_STATE"}],"quasis":[{"type":"TemplateElement","start":9212,"end":9236,"loc":{"start":{"line":303,"column":12},"end":{"line":303,"column":36}},"value":{"raw":"/dropbox/redirect?state=","cooked":"/dropbox/redirect?state="},"tail":false},{"type":"TemplateElement","start":9250,"end":9250,"loc":{"start":{"line":303,"column":50},"end":{"line":303,"column":50}},"value":{"raw":"","cooked":""},"tail":true}]}]},"property":{"type":"Identifier","start":9260,"end":9263,"loc":{"start":{"line":304,"column":7},"end":{"line":304,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":9264,"end":9281,"loc":{"start":{"line":304,"column":11},"end":{"line":304,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":9283,"end":9288,"loc":{"start":{"line":304,"column":30},"end":{"line":304,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":9297,"end":9303,"loc":{"start":{"line":305,"column":7},"end":{"line":305,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":9304,"end":9307,"loc":{"start":{"line":305,"column":14},"end":{"line":305,"column":17}},"value":302,"raw":"302"}]},"property":{"type":"Identifier","start":9316,"end":9322,"loc":{"start":{"line":306,"column":7},"end":{"line":306,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":9323,"end":9333,"loc":{"start":{"line":306,"column":14},"end":{"line":306,"column":24}},"value":"Location","raw":"'Location'"},{"type":"TemplateLiteral","start":9335,"end":9404,"loc":{"start":{"line":306,"column":26},"end":{"line":306,"column":95}},"expressions":[{"type":"Identifier","start":9391,"end":9402,"loc":{"start":{"line":306,"column":82},"end":{"line":306,"column":93}},"name":"OAUTH_STATE"}],"quasis":[{"type":"TemplateElement","start":9336,"end":9389,"loc":{"start":{"line":306,"column":27},"end":{"line":306,"column":80}},"value":{"raw":"http://localhost:3020/connect/dropbox/callback?state=","cooked":"http://localhost:3020/connect/dropbox/callback?state="},"tail":false},{"type":"TemplateElement","start":9403,"end":9403,"loc":{"start":{"line":306,"column":94},"end":{"line":306,"column":94}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]}}]}},{"type":"ExpressionStatement","start":9414,"end":9717,"loc":{"start":{"line":309,"column":2},"end":{"line":315,"column":4}},"expression":{"type":"CallExpression","start":9414,"end":9717,"loc":{"start":{"line":309,"column":2},"end":{"line":315,"column":4}},"callee":{"type":"Identifier","start":9414,"end":9418,"loc":{"start":{"line":309,"column":2},"end":{"line":309,"column":6}},"name":"test"},"arguments":[{"type":"Literal","start":9419,"end":9462,"loc":{"start":{"line":309,"column":7},"end":{"line":309,"column":50}},"value":"do not redirect to invalid uppy instances","raw":"'do not redirect to invalid uppy instances'"},{"type":"ArrowFunctionExpression","start":9464,"end":9716,"loc":{"start":{"line":309,"column":52},"end":{"line":315,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":9470,"end":9716,"loc":{"start":{"line":309,"column":58},"end":{"line":315,"column":3}},"body":[{"type":"VariableDeclaration","start":9476,"end":9523,"loc":{"start":{"line":310,"column":4},"end":{"line":310,"column":51}},"declarations":[{"type":"VariableDeclarator","start":9482,"end":9523,"loc":{"start":{"line":310,"column":10},"end":{"line":310,"column":51}},"id":{"type":"Identifier","start":9482,"end":9487,"loc":{"start":{"line":310,"column":10},"end":{"line":310,"column":15}},"name":"state"},"init":{"type":"Literal","start":9490,"end":9523,"loc":{"start":{"line":310,"column":18},"end":{"line":310,"column":51}},"value":"state-with-invalid-instance-url","raw":"'state-with-invalid-instance-url'"}}],"kind":"const"},{"type":"ReturnStatement","start":9583,"end":9712,"loc":{"start":{"line":311,"column":4},"end":{"line":314,"column":18}},"argument":{"type":"CallExpression","start":9590,"end":9712,"loc":{"start":{"line":311,"column":11},"end":{"line":314,"column":18}},"callee":{"type":"MemberExpression","start":9590,"end":9707,"loc":{"start":{"line":311,"column":11},"end":{"line":314,"column":13}},"object":{"type":"CallExpression","start":9590,"end":9693,"loc":{"start":{"line":311,"column":11},"end":{"line":313,"column":36}},"callee":{"type":"MemberExpression","start":9590,"end":9667,"loc":{"start":{"line":311,"column":11},"end":{"line":313,"column":10}},"object":{"type":"CallExpression","start":9590,"end":9656,"loc":{"start":{"line":311,"column":11},"end":{"line":312,"column":46}},"callee":{"type":"MemberExpression","start":9590,"end":9620,"loc":{"start":{"line":311,"column":11},"end":{"line":312,"column":10}},"object":{"type":"CallExpression","start":9590,"end":9609,"loc":{"start":{"line":311,"column":11},"end":{"line":311,"column":30}},"callee":{"type":"Identifier","start":9590,"end":9597,"loc":{"start":{"line":311,"column":11},"end":{"line":311,"column":18}},"name":"request"},"arguments":[{"type":"Identifier","start":9598,"end":9608,"loc":{"start":{"line":311,"column":19},"end":{"line":311,"column":29}},"name":"authServer"}]},"property":{"type":"Identifier","start":9617,"end":9620,"loc":{"start":{"line":312,"column":7},"end":{"line":312,"column":10}},"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":9621,"end":9655,"loc":{"start":{"line":312,"column":11},"end":{"line":312,"column":45}},"expressions":[{"type":"Identifier","start":9648,"end":9653,"loc":{"start":{"line":312,"column":38},"end":{"line":312,"column":43}},"name":"state"}],"quasis":[{"type":"TemplateElement","start":9622,"end":9646,"loc":{"start":{"line":312,"column":12},"end":{"line":312,"column":36}},"value":{"raw":"/dropbox/redirect?state=","cooked":"/dropbox/redirect?state="},"tail":false},{"type":"TemplateElement","start":9654,"end":9654,"loc":{"start":{"line":312,"column":44},"end":{"line":312,"column":44}},"value":{"raw":"","cooked":""},"tail":true}]}]},"property":{"type":"Identifier","start":9664,"end":9667,"loc":{"start":{"line":313,"column":7},"end":{"line":313,"column":10}},"name":"set"},"computed":false},"arguments":[{"type":"Literal","start":9668,"end":9685,"loc":{"start":{"line":313,"column":11},"end":{"line":313,"column":28}},"value":"uppy-auth-token","raw":"'uppy-auth-token'"},{"type":"Identifier","start":9687,"end":9692,"loc":{"start":{"line":313,"column":30},"end":{"line":313,"column":35}},"name":"token"}]},"property":{"type":"Identifier","start":9701,"end":9707,"loc":{"start":{"line":314,"column":7},"end":{"line":314,"column":13}},"name":"expect"},"computed":false},"arguments":[{"type":"Literal","start":9708,"end":9711,"loc":{"start":{"line":314,"column":14},"end":{"line":314,"column":17}},"value":400,"raw":"400"}]}}]}}]}}]}}]}}],"sourceType":"module"}