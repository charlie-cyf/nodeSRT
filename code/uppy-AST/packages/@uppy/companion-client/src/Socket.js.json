{"type":"Program","start":0,"end":1626,"body":[{"type":"VariableDeclaration","start":0,"end":39,"declarations":[{"type":"VariableDeclarator","start":6,"end":39,"id":{"type":"Identifier","start":6,"end":8,"name":"ee"},"init":{"type":"CallExpression","start":11,"end":39,"callee":{"type":"Identifier","start":11,"end":18,"name":"require"},"arguments":[{"type":"Literal","start":19,"end":38,"value":"namespace-emitter","raw":"'namespace-emitter'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":41,"end":1625,"expression":{"type":"AssignmentExpression","start":41,"end":1625,"operator":"=","left":{"type":"MemberExpression","start":41,"end":55,"object":{"type":"Identifier","start":41,"end":47,"name":"module"},"property":{"type":"Identifier","start":48,"end":55,"name":"exports"},"computed":false},"right":{"type":"ClassExpression","start":58,"end":1625,"id":{"type":"Identifier","start":64,"end":74,"name":"UppySocket"},"superClass":null,"body":{"type":"ClassBody","start":75,"end":1625,"body":[{"type":"MethodDefinition","start":79,"end":505,"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":79,"end":90,"name":"constructor"},"value":{"type":"FunctionExpression","start":91,"end":505,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":92,"end":96,"name":"opts"}],"body":{"type":"BlockStatement","start":98,"end":505,"body":[{"type":"ExpressionStatement","start":104,"end":120,"expression":{"type":"AssignmentExpression","start":104,"end":120,"operator":"=","left":{"type":"MemberExpression","start":104,"end":113,"object":{"type":"ThisExpression","start":104,"end":108},"property":{"type":"Identifier","start":109,"end":113,"name":"opts"},"computed":false},"right":{"type":"Identifier","start":116,"end":120,"name":"opts"}}},{"type":"ExpressionStatement","start":125,"end":142,"expression":{"type":"AssignmentExpression","start":125,"end":142,"operator":"=","left":{"type":"MemberExpression","start":125,"end":137,"object":{"type":"ThisExpression","start":125,"end":129},"property":{"type":"Identifier","start":130,"end":137,"name":"_queued"},"computed":false},"right":{"type":"ArrayExpression","start":140,"end":142,"elements":[]}}},{"type":"ExpressionStatement","start":147,"end":166,"expression":{"type":"AssignmentExpression","start":147,"end":166,"operator":"=","left":{"type":"MemberExpression","start":147,"end":158,"object":{"type":"ThisExpression","start":147,"end":151},"property":{"type":"Identifier","start":152,"end":158,"name":"isOpen"},"computed":false},"right":{"type":"Literal","start":161,"end":166,"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":171,"end":190,"expression":{"type":"AssignmentExpression","start":171,"end":190,"operator":"=","left":{"type":"MemberExpression","start":171,"end":183,"object":{"type":"ThisExpression","start":171,"end":175},"property":{"type":"Identifier","start":176,"end":183,"name":"emitter"},"computed":false},"right":{"type":"CallExpression","start":186,"end":190,"callee":{"type":"Identifier","start":186,"end":188,"name":"ee"},"arguments":[]}}},{"type":"ExpressionStatement","start":196,"end":248,"expression":{"type":"AssignmentExpression","start":196,"end":248,"operator":"=","left":{"type":"MemberExpression","start":196,"end":215,"object":{"type":"ThisExpression","start":196,"end":200},"property":{"type":"Identifier","start":201,"end":215,"name":"_handleMessage"},"computed":false},"right":{"type":"CallExpression","start":218,"end":248,"callee":{"type":"MemberExpression","start":218,"end":242,"object":{"type":"MemberExpression","start":218,"end":237,"object":{"type":"ThisExpression","start":218,"end":222},"property":{"type":"Identifier","start":223,"end":237,"name":"_handleMessage"},"computed":false},"property":{"type":"Identifier","start":238,"end":242,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":243,"end":247}]}}},{"type":"ExpressionStatement","start":254,"end":288,"expression":{"type":"AssignmentExpression","start":254,"end":288,"operator":"=","left":{"type":"MemberExpression","start":254,"end":264,"object":{"type":"ThisExpression","start":254,"end":258},"property":{"type":"Identifier","start":259,"end":264,"name":"close"},"computed":false},"right":{"type":"CallExpression","start":267,"end":288,"callee":{"type":"MemberExpression","start":267,"end":282,"object":{"type":"MemberExpression","start":267,"end":277,"object":{"type":"ThisExpression","start":267,"end":271},"property":{"type":"Identifier","start":272,"end":277,"name":"close"},"computed":false},"property":{"type":"Identifier","start":278,"end":282,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":283,"end":287}]}}},{"type":"ExpressionStatement","start":293,"end":325,"expression":{"type":"AssignmentExpression","start":293,"end":325,"operator":"=","left":{"type":"MemberExpression","start":293,"end":302,"object":{"type":"ThisExpression","start":293,"end":297},"property":{"type":"Identifier","start":298,"end":302,"name":"emit"},"computed":false},"right":{"type":"CallExpression","start":305,"end":325,"callee":{"type":"MemberExpression","start":305,"end":319,"object":{"type":"MemberExpression","start":305,"end":314,"object":{"type":"ThisExpression","start":305,"end":309},"property":{"type":"Identifier","start":310,"end":314,"name":"emit"},"computed":false},"property":{"type":"Identifier","start":315,"end":319,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":320,"end":324}]}}},{"type":"ExpressionStatement","start":330,"end":358,"expression":{"type":"AssignmentExpression","start":330,"end":358,"operator":"=","left":{"type":"MemberExpression","start":330,"end":337,"object":{"type":"ThisExpression","start":330,"end":334},"property":{"type":"Identifier","start":335,"end":337,"name":"on"},"computed":false},"right":{"type":"CallExpression","start":340,"end":358,"callee":{"type":"MemberExpression","start":340,"end":352,"object":{"type":"MemberExpression","start":340,"end":347,"object":{"type":"ThisExpression","start":340,"end":344},"property":{"type":"Identifier","start":345,"end":347,"name":"on"},"computed":false},"property":{"type":"Identifier","start":348,"end":352,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":353,"end":357}]}}},{"type":"ExpressionStatement","start":363,"end":395,"expression":{"type":"AssignmentExpression","start":363,"end":395,"operator":"=","left":{"type":"MemberExpression","start":363,"end":372,"object":{"type":"ThisExpression","start":363,"end":367},"property":{"type":"Identifier","start":368,"end":372,"name":"once"},"computed":false},"right":{"type":"CallExpression","start":375,"end":395,"callee":{"type":"MemberExpression","start":375,"end":389,"object":{"type":"MemberExpression","start":375,"end":384,"object":{"type":"ThisExpression","start":375,"end":379},"property":{"type":"Identifier","start":380,"end":384,"name":"once"},"computed":false},"property":{"type":"Identifier","start":385,"end":389,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":390,"end":394}]}}},{"type":"ExpressionStatement","start":400,"end":432,"expression":{"type":"AssignmentExpression","start":400,"end":432,"operator":"=","left":{"type":"MemberExpression","start":400,"end":409,"object":{"type":"ThisExpression","start":400,"end":404},"property":{"type":"Identifier","start":405,"end":409,"name":"send"},"computed":false},"right":{"type":"CallExpression","start":412,"end":432,"callee":{"type":"MemberExpression","start":412,"end":426,"object":{"type":"MemberExpression","start":412,"end":421,"object":{"type":"ThisExpression","start":412,"end":416},"property":{"type":"Identifier","start":417,"end":421,"name":"send"},"computed":false},"property":{"type":"Identifier","start":422,"end":426,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":427,"end":431}]}}},{"type":"IfStatement","start":438,"end":501,"test":{"type":"LogicalExpression","start":442,"end":474,"left":{"type":"UnaryExpression","start":442,"end":447,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":443,"end":447,"name":"opts"}},"operator":"||","right":{"type":"BinaryExpression","start":451,"end":474,"left":{"type":"MemberExpression","start":451,"end":464,"object":{"type":"Identifier","start":451,"end":455,"name":"opts"},"property":{"type":"Identifier","start":456,"end":464,"name":"autoOpen"},"computed":false},"operator":"!==","right":{"type":"Literal","start":469,"end":474,"value":false,"raw":"false"}}},"consequent":{"type":"BlockStatement","start":476,"end":501,"body":[{"type":"ExpressionStatement","start":484,"end":495,"expression":{"type":"CallExpression","start":484,"end":495,"callee":{"type":"MemberExpression","start":484,"end":493,"object":{"type":"ThisExpression","start":484,"end":488},"property":{"type":"Identifier","start":489,"end":493,"name":"open"},"computed":false},"arguments":[]}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":509,"end":949,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":509,"end":513,"name":"open"},"value":{"type":"FunctionExpression","start":514,"end":949,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":517,"end":949,"body":[{"type":"ExpressionStatement","start":523,"end":568,"expression":{"type":"AssignmentExpression","start":523,"end":568,"operator":"=","left":{"type":"MemberExpression","start":523,"end":534,"object":{"type":"ThisExpression","start":523,"end":527},"property":{"type":"Identifier","start":528,"end":534,"name":"socket"},"computed":false},"right":{"type":"NewExpression","start":537,"end":568,"callee":{"type":"Identifier","start":541,"end":550,"name":"WebSocket"},"arguments":[{"type":"MemberExpression","start":551,"end":567,"object":{"type":"MemberExpression","start":551,"end":560,"object":{"type":"ThisExpression","start":551,"end":555},"property":{"type":"Identifier","start":556,"end":560,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":561,"end":567,"name":"target"},"computed":false}]}}},{"type":"ExpressionStatement","start":574,"end":828,"expression":{"type":"AssignmentExpression","start":574,"end":828,"operator":"=","left":{"type":"MemberExpression","start":574,"end":592,"object":{"type":"MemberExpression","start":574,"end":585,"object":{"type":"ThisExpression","start":574,"end":578},"property":{"type":"Identifier","start":579,"end":585,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":586,"end":592,"name":"onopen"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":595,"end":828,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":596,"end":597,"name":"e"}],"body":{"type":"BlockStatement","start":602,"end":828,"body":[{"type":"ExpressionStatement","start":610,"end":628,"expression":{"type":"AssignmentExpression","start":610,"end":628,"operator":"=","left":{"type":"MemberExpression","start":610,"end":621,"object":{"type":"ThisExpression","start":610,"end":614},"property":{"type":"Identifier","start":615,"end":621,"name":"isOpen"},"computed":false},"right":{"type":"Literal","start":624,"end":628,"value":true,"raw":"true"}}},{"type":"WhileStatement","start":636,"end":822,"test":{"type":"LogicalExpression","start":643,"end":681,"left":{"type":"BinaryExpression","start":643,"end":666,"left":{"type":"MemberExpression","start":643,"end":662,"object":{"type":"MemberExpression","start":643,"end":655,"object":{"type":"ThisExpression","start":643,"end":647},"property":{"type":"Identifier","start":648,"end":655,"name":"_queued"},"computed":false},"property":{"type":"Identifier","start":656,"end":662,"name":"length"},"computed":false},"operator":">","right":{"type":"Literal","start":665,"end":666,"value":0,"raw":"0"}},"operator":"&&","right":{"type":"MemberExpression","start":670,"end":681,"object":{"type":"ThisExpression","start":670,"end":674},"property":{"type":"Identifier","start":675,"end":681,"name":"isOpen"},"computed":false}},"body":{"type":"BlockStatement","start":683,"end":822,"body":[{"type":"VariableDeclaration","start":693,"end":722,"declarations":[{"type":"VariableDeclarator","start":699,"end":722,"id":{"type":"Identifier","start":699,"end":704,"name":"first"},"init":{"type":"MemberExpression","start":707,"end":722,"object":{"type":"MemberExpression","start":707,"end":719,"object":{"type":"ThisExpression","start":707,"end":711},"property":{"type":"Identifier","start":712,"end":719,"name":"_queued"},"computed":false},"property":{"type":"Literal","start":720,"end":721,"value":0,"raw":"0"},"computed":true}}],"kind":"const"},{"type":"ExpressionStatement","start":731,"end":769,"expression":{"type":"CallExpression","start":731,"end":769,"callee":{"type":"MemberExpression","start":731,"end":740,"object":{"type":"ThisExpression","start":731,"end":735},"property":{"type":"Identifier","start":736,"end":740,"name":"send"},"computed":false},"arguments":[{"type":"MemberExpression","start":741,"end":753,"object":{"type":"Identifier","start":741,"end":746,"name":"first"},"property":{"type":"Identifier","start":747,"end":753,"name":"action"},"computed":false},{"type":"MemberExpression","start":755,"end":768,"object":{"type":"Identifier","start":755,"end":760,"name":"first"},"property":{"type":"Identifier","start":761,"end":768,"name":"payload"},"computed":false}]}},{"type":"ExpressionStatement","start":778,"end":814,"expression":{"type":"AssignmentExpression","start":778,"end":814,"operator":"=","left":{"type":"MemberExpression","start":778,"end":790,"object":{"type":"ThisExpression","start":778,"end":782},"property":{"type":"Identifier","start":783,"end":790,"name":"_queued"},"computed":false},"right":{"type":"CallExpression","start":793,"end":814,"callee":{"type":"MemberExpression","start":793,"end":811,"object":{"type":"MemberExpression","start":793,"end":805,"object":{"type":"ThisExpression","start":793,"end":797},"property":{"type":"Identifier","start":798,"end":805,"name":"_queued"},"computed":false},"property":{"type":"Identifier","start":806,"end":811,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":812,"end":813,"value":1,"raw":"1"}]}}}]}}]}}}},{"type":"ExpressionStatement","start":834,"end":896,"expression":{"type":"AssignmentExpression","start":834,"end":896,"operator":"=","left":{"type":"MemberExpression","start":834,"end":853,"object":{"type":"MemberExpression","start":834,"end":845,"object":{"type":"ThisExpression","start":834,"end":838},"property":{"type":"Identifier","start":839,"end":845,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":846,"end":853,"name":"onclose"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":856,"end":896,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":857,"end":858,"name":"e"}],"body":{"type":"BlockStatement","start":863,"end":896,"body":[{"type":"ExpressionStatement","start":871,"end":890,"expression":{"type":"AssignmentExpression","start":871,"end":890,"operator":"=","left":{"type":"MemberExpression","start":871,"end":882,"object":{"type":"ThisExpression","start":871,"end":875},"property":{"type":"Identifier","start":876,"end":882,"name":"isOpen"},"computed":false},"right":{"type":"Literal","start":885,"end":890,"value":false,"raw":"false"}}}]}}}},{"type":"ExpressionStatement","start":902,"end":945,"expression":{"type":"AssignmentExpression","start":902,"end":945,"operator":"=","left":{"type":"MemberExpression","start":902,"end":923,"object":{"type":"MemberExpression","start":902,"end":913,"object":{"type":"ThisExpression","start":902,"end":906},"property":{"type":"Identifier","start":907,"end":913,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":914,"end":923,"name":"onmessage"},"computed":false},"right":{"type":"MemberExpression","start":926,"end":945,"object":{"type":"ThisExpression","start":926,"end":930},"property":{"type":"Identifier","start":931,"end":945,"name":"_handleMessage"},"computed":false}}}]}}},{"type":"MethodDefinition","start":953,"end":1022,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":953,"end":958,"name":"close"},"value":{"type":"FunctionExpression","start":959,"end":1022,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":962,"end":1022,"body":[{"type":"IfStatement","start":968,"end":1018,"test":{"type":"MemberExpression","start":972,"end":983,"object":{"type":"ThisExpression","start":972,"end":976},"property":{"type":"Identifier","start":977,"end":983,"name":"socket"},"computed":false},"consequent":{"type":"BlockStatement","start":985,"end":1018,"body":[{"type":"ExpressionStatement","start":993,"end":1012,"expression":{"type":"CallExpression","start":993,"end":1012,"callee":{"type":"MemberExpression","start":993,"end":1010,"object":{"type":"MemberExpression","start":993,"end":1004,"object":{"type":"ThisExpression","start":993,"end":997},"property":{"type":"Identifier","start":998,"end":1004,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":1005,"end":1010,"name":"close"},"computed":false},"arguments":[]}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":1026,"end":1237,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1026,"end":1030,"name":"send"},"value":{"type":"FunctionExpression","start":1031,"end":1237,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1032,"end":1038,"name":"action"},{"type":"Identifier","start":1040,"end":1047,"name":"payload"}],"body":{"type":"BlockStatement","start":1049,"end":1237,"body":[{"type":"IfStatement","start":1075,"end":1158,"test":{"type":"UnaryExpression","start":1079,"end":1091,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1080,"end":1091,"object":{"type":"ThisExpression","start":1080,"end":1084},"property":{"type":"Identifier","start":1085,"end":1091,"name":"isOpen"},"computed":false}},"consequent":{"type":"BlockStatement","start":1093,"end":1158,"body":[{"type":"ExpressionStatement","start":1101,"end":1139,"expression":{"type":"CallExpression","start":1101,"end":1139,"callee":{"type":"MemberExpression","start":1101,"end":1118,"object":{"type":"MemberExpression","start":1101,"end":1113,"object":{"type":"ThisExpression","start":1101,"end":1105},"property":{"type":"Identifier","start":1106,"end":1113,"name":"_queued"},"computed":false},"property":{"type":"Identifier","start":1114,"end":1118,"name":"push"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1119,"end":1138,"properties":[{"type":"Property","start":1121,"end":1127,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1121,"end":1127,"name":"action"},"kind":"init","value":{"type":"Identifier","start":1121,"end":1127,"name":"action"}},{"type":"Property","start":1129,"end":1136,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1129,"end":1136,"name":"payload"},"kind":"init","value":{"type":"Identifier","start":1129,"end":1136,"name":"payload"}}]}]}},{"type":"ReturnStatement","start":1146,"end":1152,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":1164,"end":1233,"expression":{"type":"CallExpression","start":1164,"end":1233,"callee":{"type":"MemberExpression","start":1164,"end":1180,"object":{"type":"MemberExpression","start":1164,"end":1175,"object":{"type":"ThisExpression","start":1164,"end":1168},"property":{"type":"Identifier","start":1169,"end":1175,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":1176,"end":1180,"name":"send"},"computed":false},"arguments":[{"type":"CallExpression","start":1181,"end":1232,"callee":{"type":"MemberExpression","start":1181,"end":1195,"object":{"type":"Identifier","start":1181,"end":1185,"name":"JSON"},"property":{"type":"Identifier","start":1186,"end":1195,"name":"stringify"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1196,"end":1231,"properties":[{"type":"Property","start":1204,"end":1210,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1204,"end":1210,"name":"action"},"kind":"init","value":{"type":"Identifier","start":1204,"end":1210,"name":"action"}},{"type":"Property","start":1218,"end":1225,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1218,"end":1225,"name":"payload"},"kind":"init","value":{"type":"Identifier","start":1218,"end":1225,"name":"payload"}}]}]}]}}]}}},{"type":"MethodDefinition","start":1241,"end":1304,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1241,"end":1243,"name":"on"},"value":{"type":"FunctionExpression","start":1244,"end":1304,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1245,"end":1251,"name":"action"},{"type":"Identifier","start":1253,"end":1260,"name":"handler"}],"body":{"type":"BlockStatement","start":1262,"end":1304,"body":[{"type":"ExpressionStatement","start":1268,"end":1300,"expression":{"type":"CallExpression","start":1268,"end":1300,"callee":{"type":"MemberExpression","start":1268,"end":1283,"object":{"type":"MemberExpression","start":1268,"end":1280,"object":{"type":"ThisExpression","start":1268,"end":1272},"property":{"type":"Identifier","start":1273,"end":1280,"name":"emitter"},"computed":false},"property":{"type":"Identifier","start":1281,"end":1283,"name":"on"},"computed":false},"arguments":[{"type":"Identifier","start":1284,"end":1290,"name":"action"},{"type":"Identifier","start":1292,"end":1299,"name":"handler"}]}}]}}},{"type":"MethodDefinition","start":1308,"end":1375,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1308,"end":1312,"name":"emit"},"value":{"type":"FunctionExpression","start":1313,"end":1375,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1314,"end":1320,"name":"action"},{"type":"Identifier","start":1322,"end":1329,"name":"payload"}],"body":{"type":"BlockStatement","start":1331,"end":1375,"body":[{"type":"ExpressionStatement","start":1337,"end":1371,"expression":{"type":"CallExpression","start":1337,"end":1371,"callee":{"type":"MemberExpression","start":1337,"end":1354,"object":{"type":"MemberExpression","start":1337,"end":1349,"object":{"type":"ThisExpression","start":1337,"end":1341},"property":{"type":"Identifier","start":1342,"end":1349,"name":"emitter"},"computed":false},"property":{"type":"Identifier","start":1350,"end":1354,"name":"emit"},"computed":false},"arguments":[{"type":"Identifier","start":1355,"end":1361,"name":"action"},{"type":"Identifier","start":1363,"end":1370,"name":"payload"}]}}]}}},{"type":"MethodDefinition","start":1379,"end":1446,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1379,"end":1383,"name":"once"},"value":{"type":"FunctionExpression","start":1384,"end":1446,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1385,"end":1391,"name":"action"},{"type":"Identifier","start":1393,"end":1400,"name":"handler"}],"body":{"type":"BlockStatement","start":1402,"end":1446,"body":[{"type":"ExpressionStatement","start":1408,"end":1442,"expression":{"type":"CallExpression","start":1408,"end":1442,"callee":{"type":"MemberExpression","start":1408,"end":1425,"object":{"type":"MemberExpression","start":1408,"end":1420,"object":{"type":"ThisExpression","start":1408,"end":1412},"property":{"type":"Identifier","start":1413,"end":1420,"name":"emitter"},"computed":false},"property":{"type":"Identifier","start":1421,"end":1425,"name":"once"},"computed":false},"arguments":[{"type":"Identifier","start":1426,"end":1432,"name":"action"},{"type":"Identifier","start":1434,"end":1441,"name":"handler"}]}}]}}},{"type":"MethodDefinition","start":1450,"end":1623,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1450,"end":1464,"name":"_handleMessage"},"value":{"type":"FunctionExpression","start":1465,"end":1623,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1466,"end":1467,"name":"e"}],"body":{"type":"BlockStatement","start":1469,"end":1623,"body":[{"type":"TryStatement","start":1475,"end":1619,"block":{"type":"BlockStatement","start":1479,"end":1576,"body":[{"type":"VariableDeclaration","start":1487,"end":1521,"declarations":[{"type":"VariableDeclarator","start":1493,"end":1521,"id":{"type":"Identifier","start":1493,"end":1500,"name":"message"},"init":{"type":"CallExpression","start":1503,"end":1521,"callee":{"type":"MemberExpression","start":1503,"end":1513,"object":{"type":"Identifier","start":1503,"end":1507,"name":"JSON"},"property":{"type":"Identifier","start":1508,"end":1513,"name":"parse"},"computed":false},"arguments":[{"type":"MemberExpression","start":1514,"end":1520,"object":{"type":"Identifier","start":1514,"end":1515,"name":"e"},"property":{"type":"Identifier","start":1516,"end":1520,"name":"data"},"computed":false}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1528,"end":1570,"expression":{"type":"CallExpression","start":1528,"end":1570,"callee":{"type":"MemberExpression","start":1528,"end":1537,"object":{"type":"ThisExpression","start":1528,"end":1532},"property":{"type":"Identifier","start":1533,"end":1537,"name":"emit"},"computed":false},"arguments":[{"type":"MemberExpression","start":1538,"end":1552,"object":{"type":"Identifier","start":1538,"end":1545,"name":"message"},"property":{"type":"Identifier","start":1546,"end":1552,"name":"action"},"computed":false},{"type":"MemberExpression","start":1554,"end":1569,"object":{"type":"Identifier","start":1554,"end":1561,"name":"message"},"property":{"type":"Identifier","start":1562,"end":1569,"name":"payload"},"computed":false}]}}]},"handler":{"type":"CatchClause","start":1577,"end":1619,"param":{"type":"Identifier","start":1584,"end":1587,"name":"err"},"body":{"type":"BlockStatement","start":1589,"end":1619,"body":[{"type":"ExpressionStatement","start":1597,"end":1613,"expression":{"type":"CallExpression","start":1597,"end":1613,"callee":{"type":"MemberExpression","start":1597,"end":1608,"object":{"type":"Identifier","start":1597,"end":1604,"name":"console"},"property":{"type":"Identifier","start":1605,"end":1608,"name":"log"},"computed":false},"arguments":[{"type":"Identifier","start":1609,"end":1612,"name":"err"}]}}]}},"finalizer":null}]}}}]}}}}],"sourceType":"script"}