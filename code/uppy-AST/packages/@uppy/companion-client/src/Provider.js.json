{"type":"Program","start":0,"end":3364,"body":[{"type":"ExpressionStatement","start":0,"end":12,"expression":{"type":"Literal","start":0,"end":12,"value":"use strict","raw":"'use strict'"},"directive":"use strict"},{"type":"VariableDeclaration","start":14,"end":62,"declarations":[{"type":"VariableDeclarator","start":20,"end":62,"id":{"type":"Identifier","start":20,"end":33,"name":"RequestClient"},"init":{"type":"CallExpression","start":36,"end":62,"callee":{"type":"Identifier","start":36,"end":43,"name":"require"},"arguments":[{"type":"Literal","start":44,"end":61,"value":"./RequestClient","raw":"'./RequestClient'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":63,"end":109,"declarations":[{"type":"VariableDeclarator","start":69,"end":109,"id":{"type":"Identifier","start":69,"end":81,"name":"tokenStorage"},"init":{"type":"CallExpression","start":84,"end":109,"callee":{"type":"Identifier","start":84,"end":91,"name":"require"},"arguments":[{"type":"Literal","start":92,"end":108,"value":"./tokenStorage","raw":"'./tokenStorage'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":111,"end":223,"declarations":[{"type":"VariableDeclarator","start":117,"end":223,"id":{"type":"Identifier","start":117,"end":125,"name":"_getName"},"init":{"type":"ArrowFunctionExpression","start":128,"end":223,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":129,"end":131,"name":"id"}],"body":{"type":"BlockStatement","start":136,"end":223,"body":[{"type":"ReturnStatement","start":140,"end":221,"argument":{"type":"CallExpression","start":147,"end":221,"callee":{"type":"MemberExpression","start":147,"end":216,"object":{"type":"CallExpression","start":147,"end":211,"callee":{"type":"MemberExpression","start":147,"end":164,"object":{"type":"CallExpression","start":147,"end":160,"callee":{"type":"MemberExpression","start":147,"end":155,"object":{"type":"Identifier","start":147,"end":149,"name":"id"},"property":{"type":"Identifier","start":150,"end":155,"name":"split"},"computed":false},"arguments":[{"type":"Literal","start":156,"end":159,"value":"-","raw":"'-'"}]},"property":{"type":"Identifier","start":161,"end":164,"name":"map"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":165,"end":210,"id":null,"expression":true,"generator":false,"async":false,"params":[{"type":"Identifier","start":166,"end":167,"name":"s"}],"body":{"type":"BinaryExpression","start":172,"end":210,"left":{"type":"CallExpression","start":172,"end":197,"callee":{"type":"MemberExpression","start":172,"end":195,"object":{"type":"CallExpression","start":172,"end":183,"callee":{"type":"MemberExpression","start":172,"end":180,"object":{"type":"Identifier","start":172,"end":173,"name":"s"},"property":{"type":"Identifier","start":174,"end":180,"name":"charAt"},"computed":false},"arguments":[{"type":"Literal","start":181,"end":182,"value":0,"raw":"0"}]},"property":{"type":"Identifier","start":184,"end":195,"name":"toUpperCase"},"computed":false},"arguments":[]},"operator":"+","right":{"type":"CallExpression","start":200,"end":210,"callee":{"type":"MemberExpression","start":200,"end":207,"object":{"type":"Identifier","start":200,"end":201,"name":"s"},"property":{"type":"Identifier","start":202,"end":207,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":208,"end":209,"value":1,"raw":"1"}]}}}]},"property":{"type":"Identifier","start":212,"end":216,"name":"join"},"computed":false},"arguments":[{"type":"Literal","start":217,"end":220,"value":" ","raw":"' '"}]}}]}}}],"kind":"const"},{"type":"ExpressionStatement","start":225,"end":3363,"expression":{"type":"AssignmentExpression","start":225,"end":3363,"operator":"=","left":{"type":"MemberExpression","start":225,"end":239,"object":{"type":"Identifier","start":225,"end":231,"name":"module"},"property":{"type":"Identifier","start":232,"end":239,"name":"exports"},"computed":false},"right":{"type":"ClassExpression","start":242,"end":3363,"id":{"type":"Identifier","start":248,"end":256,"name":"Provider"},"superClass":{"type":"Identifier","start":265,"end":278,"name":"RequestClient"},"body":{"type":"ClassBody","start":279,"end":3363,"body":[{"type":"MethodDefinition","start":283,"end":607,"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":283,"end":294,"name":"constructor"},"value":{"type":"FunctionExpression","start":295,"end":607,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":296,"end":300,"name":"uppy"},{"type":"Identifier","start":302,"end":306,"name":"opts"}],"body":{"type":"BlockStatement","start":308,"end":607,"body":[{"type":"ExpressionStatement","start":314,"end":331,"expression":{"type":"CallExpression","start":314,"end":331,"callee":{"type":"Super","start":314,"end":319},"arguments":[{"type":"Identifier","start":320,"end":324,"name":"uppy"},{"type":"Identifier","start":326,"end":330,"name":"opts"}]}},{"type":"ExpressionStatement","start":336,"end":365,"expression":{"type":"AssignmentExpression","start":336,"end":365,"operator":"=","left":{"type":"MemberExpression","start":336,"end":349,"object":{"type":"ThisExpression","start":336,"end":340},"property":{"type":"Identifier","start":341,"end":349,"name":"provider"},"computed":false},"right":{"type":"MemberExpression","start":352,"end":365,"object":{"type":"Identifier","start":352,"end":356,"name":"opts"},"property":{"type":"Identifier","start":357,"end":365,"name":"provider"},"computed":false}}},{"type":"ExpressionStatement","start":370,"end":393,"expression":{"type":"AssignmentExpression","start":370,"end":393,"operator":"=","left":{"type":"MemberExpression","start":370,"end":377,"object":{"type":"ThisExpression","start":370,"end":374},"property":{"type":"Identifier","start":375,"end":377,"name":"id"},"computed":false},"right":{"type":"MemberExpression","start":380,"end":393,"object":{"type":"ThisExpression","start":380,"end":384},"property":{"type":"Identifier","start":385,"end":393,"name":"provider"},"computed":false}}},{"type":"ExpressionStatement","start":398,"end":452,"expression":{"type":"AssignmentExpression","start":398,"end":452,"operator":"=","left":{"type":"MemberExpression","start":398,"end":415,"object":{"type":"ThisExpression","start":398,"end":402},"property":{"type":"Identifier","start":403,"end":415,"name":"authProvider"},"computed":false},"right":{"type":"LogicalExpression","start":418,"end":452,"left":{"type":"MemberExpression","start":418,"end":435,"object":{"type":"Identifier","start":418,"end":422,"name":"opts"},"property":{"type":"Identifier","start":423,"end":435,"name":"authProvider"},"computed":false},"operator":"||","right":{"type":"MemberExpression","start":439,"end":452,"object":{"type":"ThisExpression","start":439,"end":443},"property":{"type":"Identifier","start":444,"end":452,"name":"provider"},"computed":false}}}},{"type":"ExpressionStatement","start":457,"end":504,"expression":{"type":"AssignmentExpression","start":457,"end":504,"operator":"=","left":{"type":"MemberExpression","start":457,"end":466,"object":{"type":"ThisExpression","start":457,"end":461},"property":{"type":"Identifier","start":462,"end":466,"name":"name"},"computed":false},"right":{"type":"LogicalExpression","start":469,"end":504,"left":{"type":"MemberExpression","start":469,"end":483,"object":{"type":"MemberExpression","start":469,"end":478,"object":{"type":"ThisExpression","start":469,"end":473},"property":{"type":"Identifier","start":474,"end":478,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":479,"end":483,"name":"name"},"computed":false},"operator":"||","right":{"type":"CallExpression","start":487,"end":504,"callee":{"type":"Identifier","start":487,"end":495,"name":"_getName"},"arguments":[{"type":"MemberExpression","start":496,"end":503,"object":{"type":"ThisExpression","start":496,"end":500},"property":{"type":"Identifier","start":501,"end":503,"name":"id"},"computed":false}]}}}},{"type":"ExpressionStatement","start":509,"end":543,"expression":{"type":"AssignmentExpression","start":509,"end":543,"operator":"=","left":{"type":"MemberExpression","start":509,"end":522,"object":{"type":"ThisExpression","start":509,"end":513},"property":{"type":"Identifier","start":514,"end":522,"name":"pluginId"},"computed":false},"right":{"type":"MemberExpression","start":525,"end":543,"object":{"type":"MemberExpression","start":525,"end":534,"object":{"type":"ThisExpression","start":525,"end":529},"property":{"type":"Identifier","start":530,"end":534,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":535,"end":543,"name":"pluginId"},"computed":false}}},{"type":"ExpressionStatement","start":548,"end":603,"expression":{"type":"AssignmentExpression","start":548,"end":603,"operator":"=","left":{"type":"MemberExpression","start":548,"end":561,"object":{"type":"ThisExpression","start":548,"end":552},"property":{"type":"Identifier","start":553,"end":561,"name":"tokenKey"},"computed":false},"right":{"type":"TemplateLiteral","start":564,"end":603,"expressions":[{"type":"MemberExpression","start":577,"end":590,"object":{"type":"ThisExpression","start":577,"end":581},"property":{"type":"Identifier","start":582,"end":590,"name":"pluginId"},"computed":false}],"quasis":[{"type":"TemplateElement","start":565,"end":575,"value":{"raw":"companion-","cooked":"companion-"},"tail":false},{"type":"TemplateElement","start":591,"end":602,"value":{"raw":"-auth-token","cooked":"-auth-token"},"tail":true}]}}}]}}},{"type":"MethodDefinition","start":611,"end":878,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":611,"end":618,"name":"headers"},"value":{"type":"FunctionExpression","start":619,"end":878,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":622,"end":878,"body":[{"type":"ReturnStatement","start":628,"end":874,"argument":{"type":"NewExpression","start":635,"end":874,"callee":{"type":"Identifier","start":639,"end":646,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":647,"end":873,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":648,"end":655,"name":"resolve"},{"type":"Identifier","start":657,"end":663,"name":"reject"}],"body":{"type":"BlockStatement","start":668,"end":873,"body":[{"type":"ExpressionStatement","start":676,"end":867,"expression":{"type":"CallExpression","start":676,"end":867,"callee":{"type":"MemberExpression","start":676,"end":859,"object":{"type":"CallExpression","start":676,"end":853,"callee":{"type":"MemberExpression","start":676,"end":696,"object":{"type":"CallExpression","start":676,"end":691,"callee":{"type":"MemberExpression","start":676,"end":689,"object":{"type":"Super","start":676,"end":681},"property":{"type":"Identifier","start":682,"end":689,"name":"headers"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":692,"end":696,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":697,"end":852,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":698,"end":705,"name":"headers"}],"body":{"type":"BlockStatement","start":710,"end":852,"body":[{"type":"ExpressionStatement","start":720,"end":844,"expression":{"type":"CallExpression","start":720,"end":844,"callee":{"type":"MemberExpression","start":720,"end":744,"object":{"type":"CallExpression","start":720,"end":739,"callee":{"type":"MemberExpression","start":720,"end":737,"object":{"type":"ThisExpression","start":720,"end":724},"property":{"type":"Identifier","start":725,"end":737,"name":"getAuthToken"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":740,"end":744,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":745,"end":843,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":746,"end":751,"name":"token"}],"body":{"type":"BlockStatement","start":756,"end":843,"body":[{"type":"ExpressionStatement","start":768,"end":833,"expression":{"type":"CallExpression","start":768,"end":833,"callee":{"type":"Identifier","start":768,"end":775,"name":"resolve"},"arguments":[{"type":"CallExpression","start":776,"end":832,"callee":{"type":"MemberExpression","start":776,"end":789,"object":{"type":"Identifier","start":776,"end":782,"name":"Object"},"property":{"type":"Identifier","start":783,"end":789,"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":790,"end":792,"properties":[]},{"type":"Identifier","start":794,"end":801,"name":"headers"},{"type":"ObjectExpression","start":803,"end":831,"properties":[{"type":"Property","start":805,"end":829,"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":805,"end":822,"value":"uppy-auth-token","raw":"'uppy-auth-token'"},"value":{"type":"Identifier","start":824,"end":829,"name":"token"},"kind":"init"}]}]}]}}]}}]}}]}}]},"property":{"type":"Identifier","start":854,"end":859,"name":"catch"},"computed":false},"arguments":[{"type":"Identifier","start":860,"end":866,"name":"reject"}]}}]}}]}}]}}},{"type":"MethodDefinition","start":882,"end":1244,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":882,"end":899,"name":"onReceiveResponse"},"value":{"type":"FunctionExpression","start":900,"end":1244,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":901,"end":909,"name":"response"}],"body":{"type":"BlockStatement","start":911,"end":1244,"body":[{"type":"ExpressionStatement","start":917,"end":961,"expression":{"type":"AssignmentExpression","start":917,"end":961,"operator":"=","left":{"type":"Identifier","start":917,"end":925,"name":"response"},"right":{"type":"CallExpression","start":928,"end":961,"callee":{"type":"MemberExpression","start":928,"end":951,"object":{"type":"Super","start":928,"end":933},"property":{"type":"Identifier","start":934,"end":951,"name":"onReceiveResponse"},"computed":false},"arguments":[{"type":"Identifier","start":952,"end":960,"name":"response"}]}}},{"type":"VariableDeclaration","start":966,"end":1015,"declarations":[{"type":"VariableDeclarator","start":972,"end":1015,"id":{"type":"Identifier","start":972,"end":978,"name":"plugin"},"init":{"type":"CallExpression","start":981,"end":1015,"callee":{"type":"MemberExpression","start":981,"end":1000,"object":{"type":"MemberExpression","start":981,"end":990,"object":{"type":"ThisExpression","start":981,"end":985},"property":{"type":"Identifier","start":986,"end":990,"name":"uppy"},"computed":false},"property":{"type":"Identifier","start":991,"end":1000,"name":"getPlugin"},"computed":false},"arguments":[{"type":"MemberExpression","start":1001,"end":1014,"object":{"type":"ThisExpression","start":1001,"end":1005},"property":{"type":"Identifier","start":1006,"end":1014,"name":"pluginId"},"computed":false}]}}],"kind":"const"},{"type":"VariableDeclaration","start":1020,"end":1082,"declarations":[{"type":"VariableDeclarator","start":1026,"end":1082,"id":{"type":"Identifier","start":1026,"end":1042,"name":"oldAuthenticated"},"init":{"type":"MemberExpression","start":1045,"end":1082,"object":{"type":"CallExpression","start":1045,"end":1068,"callee":{"type":"MemberExpression","start":1045,"end":1066,"object":{"type":"Identifier","start":1045,"end":1051,"name":"plugin"},"property":{"type":"Identifier","start":1052,"end":1066,"name":"getPluginState"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":1069,"end":1082,"name":"authenticated"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":1087,"end":1175,"declarations":[{"type":"VariableDeclarator","start":1093,"end":1175,"id":{"type":"Identifier","start":1093,"end":1106,"name":"authenticated"},"init":{"type":"ConditionalExpression","start":1109,"end":1175,"test":{"type":"Identifier","start":1109,"end":1125,"name":"oldAuthenticated"},"consequent":{"type":"BinaryExpression","start":1128,"end":1151,"left":{"type":"MemberExpression","start":1128,"end":1143,"object":{"type":"Identifier","start":1128,"end":1136,"name":"response"},"property":{"type":"Identifier","start":1137,"end":1143,"name":"status"},"computed":false},"operator":"!==","right":{"type":"Literal","start":1148,"end":1151,"value":401,"raw":"401"}},"alternate":{"type":"BinaryExpression","start":1154,"end":1175,"left":{"type":"MemberExpression","start":1154,"end":1169,"object":{"type":"Identifier","start":1154,"end":1162,"name":"response"},"property":{"type":"Identifier","start":1163,"end":1169,"name":"status"},"computed":false},"operator":"<","right":{"type":"Literal","start":1172,"end":1175,"value":400,"raw":"400"}}}}],"kind":"const"},{"type":"ExpressionStatement","start":1180,"end":1220,"expression":{"type":"CallExpression","start":1180,"end":1220,"callee":{"type":"MemberExpression","start":1180,"end":1201,"object":{"type":"Identifier","start":1180,"end":1186,"name":"plugin"},"property":{"type":"Identifier","start":1187,"end":1201,"name":"setPluginState"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1202,"end":1219,"properties":[{"type":"Property","start":1204,"end":1217,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1204,"end":1217,"name":"authenticated"},"kind":"init","value":{"type":"Identifier","start":1204,"end":1217,"name":"authenticated"}}]}]}},{"type":"ReturnStatement","start":1225,"end":1240,"argument":{"type":"Identifier","start":1232,"end":1240,"name":"response"}}]}}},{"type":"MethodDefinition","start":1326,"end":1436,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1326,"end":1338,"name":"setAuthToken"},"value":{"type":"FunctionExpression","start":1339,"end":1436,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1340,"end":1345,"name":"token"}],"body":{"type":"BlockStatement","start":1347,"end":1436,"body":[{"type":"ReturnStatement","start":1353,"end":1432,"argument":{"type":"CallExpression","start":1360,"end":1432,"callee":{"type":"MemberExpression","start":1360,"end":1410,"object":{"type":"MemberExpression","start":1360,"end":1402,"object":{"type":"CallExpression","start":1360,"end":1394,"callee":{"type":"MemberExpression","start":1360,"end":1379,"object":{"type":"MemberExpression","start":1360,"end":1369,"object":{"type":"ThisExpression","start":1360,"end":1364},"property":{"type":"Identifier","start":1365,"end":1369,"name":"uppy"},"computed":false},"property":{"type":"Identifier","start":1370,"end":1379,"name":"getPlugin"},"computed":false},"arguments":[{"type":"MemberExpression","start":1380,"end":1393,"object":{"type":"ThisExpression","start":1380,"end":1384},"property":{"type":"Identifier","start":1385,"end":1393,"name":"pluginId"},"computed":false}]},"property":{"type":"Identifier","start":1395,"end":1402,"name":"storage"},"computed":false},"property":{"type":"Identifier","start":1403,"end":1410,"name":"setItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":1411,"end":1424,"object":{"type":"ThisExpression","start":1411,"end":1415},"property":{"type":"Identifier","start":1416,"end":1424,"name":"tokenKey"},"computed":false},{"type":"Identifier","start":1426,"end":1431,"name":"token"}]}}]}}},{"type":"MethodDefinition","start":1440,"end":1538,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1440,"end":1452,"name":"getAuthToken"},"value":{"type":"FunctionExpression","start":1453,"end":1538,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1456,"end":1538,"body":[{"type":"ReturnStatement","start":1462,"end":1534,"argument":{"type":"CallExpression","start":1469,"end":1534,"callee":{"type":"MemberExpression","start":1469,"end":1519,"object":{"type":"MemberExpression","start":1469,"end":1511,"object":{"type":"CallExpression","start":1469,"end":1503,"callee":{"type":"MemberExpression","start":1469,"end":1488,"object":{"type":"MemberExpression","start":1469,"end":1478,"object":{"type":"ThisExpression","start":1469,"end":1473},"property":{"type":"Identifier","start":1474,"end":1478,"name":"uppy"},"computed":false},"property":{"type":"Identifier","start":1479,"end":1488,"name":"getPlugin"},"computed":false},"arguments":[{"type":"MemberExpression","start":1489,"end":1502,"object":{"type":"ThisExpression","start":1489,"end":1493},"property":{"type":"Identifier","start":1494,"end":1502,"name":"pluginId"},"computed":false}]},"property":{"type":"Identifier","start":1504,"end":1511,"name":"storage"},"computed":false},"property":{"type":"Identifier","start":1512,"end":1519,"name":"getItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":1520,"end":1533,"object":{"type":"ThisExpression","start":1520,"end":1524},"property":{"type":"Identifier","start":1525,"end":1533,"name":"tokenKey"},"computed":false}]}}]}}},{"type":"MethodDefinition","start":1542,"end":1607,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1542,"end":1549,"name":"authUrl"},"value":{"type":"FunctionExpression","start":1550,"end":1607,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1553,"end":1607,"body":[{"type":"ReturnStatement","start":1559,"end":1603,"argument":{"type":"TemplateLiteral","start":1566,"end":1603,"expressions":[{"type":"MemberExpression","start":1569,"end":1582,"object":{"type":"ThisExpression","start":1569,"end":1573},"property":{"type":"Identifier","start":1574,"end":1582,"name":"hostname"},"computed":false},{"type":"MemberExpression","start":1586,"end":1593,"object":{"type":"ThisExpression","start":1586,"end":1590},"property":{"type":"Identifier","start":1591,"end":1593,"name":"id"},"computed":false}],"quasis":[{"type":"TemplateElement","start":1567,"end":1567,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":1583,"end":1584,"value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","start":1594,"end":1602,"value":{"raw":"/connect","cooked":"/connect"},"tail":true}]}}]}}},{"type":"MethodDefinition","start":1611,"end":1680,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1611,"end":1618,"name":"fileUrl"},"value":{"type":"FunctionExpression","start":1619,"end":1680,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1620,"end":1622,"name":"id"}],"body":{"type":"BlockStatement","start":1624,"end":1680,"body":[{"type":"ReturnStatement","start":1630,"end":1676,"argument":{"type":"TemplateLiteral","start":1637,"end":1676,"expressions":[{"type":"MemberExpression","start":1640,"end":1653,"object":{"type":"ThisExpression","start":1640,"end":1644},"property":{"type":"Identifier","start":1645,"end":1653,"name":"hostname"},"computed":false},{"type":"MemberExpression","start":1657,"end":1664,"object":{"type":"ThisExpression","start":1657,"end":1661},"property":{"type":"Identifier","start":1662,"end":1664,"name":"id"},"computed":false},{"type":"Identifier","start":1672,"end":1674,"name":"id"}],"quasis":[{"type":"TemplateElement","start":1638,"end":1638,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":1654,"end":1655,"value":{"raw":"/","cooked":"/"},"tail":false},{"type":"TemplateElement","start":1665,"end":1670,"value":{"raw":"/get/","cooked":"/get/"},"tail":false},{"type":"TemplateElement","start":1675,"end":1675,"value":{"raw":"","cooked":""},"tail":true}]}}]}}},{"type":"MethodDefinition","start":1684,"end":1764,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1684,"end":1688,"name":"list"},"value":{"type":"FunctionExpression","start":1689,"end":1764,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1690,"end":1699,"name":"directory"}],"body":{"type":"BlockStatement","start":1701,"end":1764,"body":[{"type":"ReturnStatement","start":1707,"end":1760,"argument":{"type":"CallExpression","start":1714,"end":1760,"callee":{"type":"MemberExpression","start":1714,"end":1722,"object":{"type":"ThisExpression","start":1714,"end":1718},"property":{"type":"Identifier","start":1719,"end":1722,"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1723,"end":1759,"expressions":[{"type":"MemberExpression","start":1726,"end":1733,"object":{"type":"ThisExpression","start":1726,"end":1730},"property":{"type":"Identifier","start":1731,"end":1733,"name":"id"},"computed":false},{"type":"LogicalExpression","start":1742,"end":1757,"left":{"type":"Identifier","start":1742,"end":1751,"name":"directory"},"operator":"||","right":{"type":"Literal","start":1755,"end":1757,"value":"","raw":"''"}}],"quasis":[{"type":"TemplateElement","start":1724,"end":1724,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":1734,"end":1740,"value":{"raw":"/list/","cooked":"/list/"},"tail":false},{"type":"TemplateElement","start":1758,"end":1758,"value":{"raw":"","cooked":""},"tail":true}]}]}}]}}},{"type":"MethodDefinition","start":1768,"end":2066,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1768,"end":1774,"name":"logout"},"value":{"type":"FunctionExpression","start":1775,"end":2066,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1778,"end":2066,"body":[{"type":"ReturnStatement","start":1784,"end":2062,"argument":{"type":"NewExpression","start":1791,"end":2062,"callee":{"type":"Identifier","start":1795,"end":1802,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":1803,"end":2061,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1804,"end":1811,"name":"resolve"},{"type":"Identifier","start":1813,"end":1819,"name":"reject"}],"body":{"type":"BlockStatement","start":1824,"end":2061,"body":[{"type":"ExpressionStatement","start":1832,"end":2055,"expression":{"type":"CallExpression","start":1832,"end":2055,"callee":{"type":"MemberExpression","start":1832,"end":2047,"object":{"type":"CallExpression","start":1832,"end":2041,"callee":{"type":"MemberExpression","start":1832,"end":1875,"object":{"type":"CallExpression","start":1832,"end":1861,"callee":{"type":"MemberExpression","start":1832,"end":1840,"object":{"type":"ThisExpression","start":1832,"end":1836},"property":{"type":"Identifier","start":1837,"end":1840,"name":"get"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1841,"end":1860,"expressions":[{"type":"MemberExpression","start":1844,"end":1851,"object":{"type":"ThisExpression","start":1844,"end":1848},"property":{"type":"Identifier","start":1849,"end":1851,"name":"id"},"computed":false}],"quasis":[{"type":"TemplateElement","start":1842,"end":1842,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":1852,"end":1859,"value":{"raw":"/logout","cooked":"/logout"},"tail":true}]}]},"property":{"type":"Identifier","start":1871,"end":1875,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1876,"end":2040,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1877,"end":1880,"name":"res"}],"body":{"type":"BlockStatement","start":1885,"end":2040,"body":[{"type":"ExpressionStatement","start":1897,"end":2030,"expression":{"type":"CallExpression","start":1897,"end":2030,"callee":{"type":"MemberExpression","start":1897,"end":2022,"object":{"type":"CallExpression","start":1897,"end":2003,"callee":{"type":"MemberExpression","start":1897,"end":1983,"object":{"type":"CallExpression","start":1897,"end":1965,"callee":{"type":"MemberExpression","start":1897,"end":1950,"object":{"type":"MemberExpression","start":1897,"end":1939,"object":{"type":"CallExpression","start":1897,"end":1931,"callee":{"type":"MemberExpression","start":1897,"end":1916,"object":{"type":"MemberExpression","start":1897,"end":1906,"object":{"type":"ThisExpression","start":1897,"end":1901},"property":{"type":"Identifier","start":1902,"end":1906,"name":"uppy"},"computed":false},"property":{"type":"Identifier","start":1907,"end":1916,"name":"getPlugin"},"computed":false},"arguments":[{"type":"MemberExpression","start":1917,"end":1930,"object":{"type":"ThisExpression","start":1917,"end":1921},"property":{"type":"Identifier","start":1922,"end":1930,"name":"pluginId"},"computed":false}]},"property":{"type":"Identifier","start":1932,"end":1939,"name":"storage"},"computed":false},"property":{"type":"Identifier","start":1940,"end":1950,"name":"removeItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":1951,"end":1964,"object":{"type":"ThisExpression","start":1951,"end":1955},"property":{"type":"Identifier","start":1956,"end":1964,"name":"tokenKey"},"computed":false}]},"property":{"type":"Identifier","start":1979,"end":1983,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1984,"end":2002,"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":1990,"end":2002,"callee":{"type":"Identifier","start":1990,"end":1997,"name":"resolve"},"arguments":[{"type":"Identifier","start":1998,"end":2001,"name":"res"}]}}]},"property":{"type":"Identifier","start":2017,"end":2022,"name":"catch"},"computed":false},"arguments":[{"type":"Identifier","start":2023,"end":2029,"name":"reject"}]}}]}}]},"property":{"type":"Identifier","start":2042,"end":2047,"name":"catch"},"computed":false},"arguments":[{"type":"Identifier","start":2048,"end":2054,"name":"reject"}]}}]}}]}}]}}},{"type":"MethodDefinition","start":2070,"end":3361,"kind":"method","static":true,"computed":false,"key":{"type":"Identifier","start":2077,"end":2087,"name":"initPlugin"},"value":{"type":"FunctionExpression","start":2088,"end":3361,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2089,"end":2095,"name":"plugin"},{"type":"Identifier","start":2097,"end":2101,"name":"opts"},{"type":"Identifier","start":2103,"end":2114,"name":"defaultOpts"}],"body":{"type":"BlockStatement","start":2116,"end":3361,"body":[{"type":"ExpressionStatement","start":2122,"end":2146,"expression":{"type":"AssignmentExpression","start":2122,"end":2146,"operator":"=","left":{"type":"MemberExpression","start":2122,"end":2133,"object":{"type":"Identifier","start":2122,"end":2128,"name":"plugin"},"property":{"type":"Identifier","start":2129,"end":2133,"name":"type"},"computed":false},"right":{"type":"Literal","start":2136,"end":2146,"value":"acquirer","raw":"'acquirer'"}}},{"type":"ExpressionStatement","start":2151,"end":2168,"expression":{"type":"AssignmentExpression","start":2151,"end":2168,"operator":"=","left":{"type":"MemberExpression","start":2151,"end":2163,"object":{"type":"Identifier","start":2151,"end":2157,"name":"plugin"},"property":{"type":"Identifier","start":2158,"end":2163,"name":"files"},"computed":false},"right":{"type":"ArrayExpression","start":2166,"end":2168,"elements":[]}}},{"type":"IfStatement","start":2173,"end":2254,"test":{"type":"Identifier","start":2177,"end":2188,"name":"defaultOpts"},"consequent":{"type":"BlockStatement","start":2190,"end":2254,"body":[{"type":"ExpressionStatement","start":2198,"end":2248,"expression":{"type":"AssignmentExpression","start":2198,"end":2248,"operator":"=","left":{"type":"MemberExpression","start":2198,"end":2209,"object":{"type":"Identifier","start":2198,"end":2204,"name":"plugin"},"property":{"type":"Identifier","start":2205,"end":2209,"name":"opts"},"computed":false},"right":{"type":"CallExpression","start":2212,"end":2248,"callee":{"type":"MemberExpression","start":2212,"end":2225,"object":{"type":"Identifier","start":2212,"end":2218,"name":"Object"},"property":{"type":"Identifier","start":2219,"end":2225,"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2226,"end":2228,"properties":[]},{"type":"Identifier","start":2230,"end":2241,"name":"defaultOpts"},{"type":"Identifier","start":2243,"end":2247,"name":"opts"}]}}}]},"alternate":null},{"type":"IfStatement","start":2260,"end":2592,"test":{"type":"LogicalExpression","start":2264,"end":2300,"left":{"type":"MemberExpression","start":2264,"end":2278,"object":{"type":"Identifier","start":2264,"end":2268,"name":"opts"},"property":{"type":"Identifier","start":2269,"end":2278,"name":"serverUrl"},"computed":false},"operator":"||","right":{"type":"MemberExpression","start":2282,"end":2300,"object":{"type":"Identifier","start":2282,"end":2286,"name":"opts"},"property":{"type":"Identifier","start":2287,"end":2300,"name":"serverPattern"},"computed":false}},"consequent":{"type":"BlockStatement","start":2302,"end":2592,"body":[{"type":"ThrowStatement","start":2310,"end":2586,"argument":{"type":"NewExpression","start":2316,"end":2586,"callee":{"type":"Identifier","start":2320,"end":2325,"name":"Error"},"arguments":[{"type":"Literal","start":2326,"end":2585,"value":"`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`","raw":"'`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`'"}]}}]},"alternate":null},{"type":"IfStatement","start":2598,"end":3299,"test":{"type":"MemberExpression","start":2602,"end":2628,"object":{"type":"Identifier","start":2602,"end":2606,"name":"opts"},"property":{"type":"Identifier","start":2607,"end":2628,"name":"companionAllowedHosts"},"computed":false},"consequent":{"type":"BlockStatement","start":2630,"end":3007,"body":[{"type":"VariableDeclaration","start":2638,"end":2680,"declarations":[{"type":"VariableDeclarator","start":2644,"end":2680,"id":{"type":"Identifier","start":2644,"end":2651,"name":"pattern"},"init":{"type":"MemberExpression","start":2654,"end":2680,"object":{"type":"Identifier","start":2654,"end":2658,"name":"opts"},"property":{"type":"Identifier","start":2659,"end":2680,"name":"companionAllowedHosts"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":2733,"end":2951,"test":{"type":"LogicalExpression","start":2737,"end":2823,"left":{"type":"LogicalExpression","start":2737,"end":2791,"left":{"type":"BinaryExpression","start":2737,"end":2764,"left":{"type":"UnaryExpression","start":2737,"end":2751,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":2744,"end":2751,"name":"pattern"}},"operator":"!==","right":{"type":"Literal","start":2756,"end":2764,"value":"string","raw":"'string'"}},"operator":"&&","right":{"type":"UnaryExpression","start":2768,"end":2791,"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":2769,"end":2791,"callee":{"type":"MemberExpression","start":2769,"end":2782,"object":{"type":"Identifier","start":2769,"end":2774,"name":"Array"},"property":{"type":"Identifier","start":2775,"end":2782,"name":"isArray"},"computed":false},"arguments":[{"type":"Identifier","start":2783,"end":2790,"name":"pattern"}]}}},"operator":"&&","right":{"type":"UnaryExpression","start":2795,"end":2823,"operator":"!","prefix":true,"argument":{"type":"BinaryExpression","start":2797,"end":2822,"left":{"type":"Identifier","start":2797,"end":2804,"name":"pattern"},"operator":"instanceof","right":{"type":"Identifier","start":2816,"end":2822,"name":"RegExp"}}}},"consequent":{"type":"BlockStatement","start":2825,"end":2951,"body":[{"type":"ThrowStatement","start":2835,"end":2943,"argument":{"type":"NewExpression","start":2841,"end":2943,"callee":{"type":"Identifier","start":2845,"end":2854,"name":"TypeError"},"arguments":[{"type":"TemplateLiteral","start":2855,"end":2942,"expressions":[{"type":"MemberExpression","start":2858,"end":2867,"object":{"type":"Identifier","start":2858,"end":2864,"name":"plugin"},"property":{"type":"Identifier","start":2865,"end":2867,"name":"id"},"computed":false}],"quasis":[{"type":"TemplateElement","start":2856,"end":2856,"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2868,"end":2941,"value":{"raw":": the option \"companionAllowedHosts\" must be one of string, Array, RegExp","cooked":": the option \"companionAllowedHosts\" must be one of string, Array, RegExp"},"tail":true}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":2958,"end":3001,"expression":{"type":"AssignmentExpression","start":2958,"end":3001,"operator":"=","left":{"type":"MemberExpression","start":2958,"end":2991,"object":{"type":"MemberExpression","start":2958,"end":2969,"object":{"type":"Identifier","start":2958,"end":2964,"name":"plugin"},"property":{"type":"Identifier","start":2965,"end":2969,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":2970,"end":2991,"name":"companionAllowedHosts"},"computed":false},"right":{"type":"Identifier","start":2994,"end":3001,"name":"pattern"}}}]},"alternate":{"type":"BlockStatement","start":3013,"end":3299,"body":[{"type":"IfStatement","start":3059,"end":3293,"test":{"type":"CallExpression","start":3063,"end":3109,"callee":{"type":"MemberExpression","start":3063,"end":3090,"object":{"type":"Literal","start":3063,"end":3085,"value":{},"raw":"/^(?!https?:\\/\\/).*$/i","regex":{"pattern":"^(?!https?:\\/\\/).*$","flags":"i"}},"property":{"type":"Identifier","start":3086,"end":3090,"name":"test"},"computed":false},"arguments":[{"type":"MemberExpression","start":3091,"end":3108,"object":{"type":"Identifier","start":3091,"end":3095,"name":"opts"},"property":{"type":"Identifier","start":3096,"end":3108,"name":"companionUrl"},"computed":false}]},"consequent":{"type":"BlockStatement","start":3111,"end":3216,"body":[{"type":"ExpressionStatement","start":3121,"end":3208,"expression":{"type":"AssignmentExpression","start":3121,"end":3208,"operator":"=","left":{"type":"MemberExpression","start":3121,"end":3154,"object":{"type":"MemberExpression","start":3121,"end":3132,"object":{"type":"Identifier","start":3121,"end":3127,"name":"plugin"},"property":{"type":"Identifier","start":3128,"end":3132,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":3133,"end":3154,"name":"companionAllowedHosts"},"computed":false},"right":{"type":"TemplateLiteral","start":3157,"end":3208,"expressions":[{"type":"CallExpression","start":3168,"end":3206,"callee":{"type":"MemberExpression","start":3168,"end":3193,"object":{"type":"MemberExpression","start":3168,"end":3185,"object":{"type":"Identifier","start":3168,"end":3172,"name":"opts"},"property":{"type":"Identifier","start":3173,"end":3185,"name":"companionUrl"},"computed":false},"property":{"type":"Identifier","start":3186,"end":3193,"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3194,"end":3201,"value":{},"raw":"/^\\/\\//","regex":{"pattern":"^\\/\\/","flags":""}},{"type":"Literal","start":3203,"end":3205,"value":"","raw":"''"}]}],"quasis":[{"type":"TemplateElement","start":3158,"end":3166,"value":{"raw":"https://","cooked":"https://"},"tail":false},{"type":"TemplateElement","start":3207,"end":3207,"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":{"type":"BlockStatement","start":3222,"end":3293,"body":[{"type":"ExpressionStatement","start":3232,"end":3285,"expression":{"type":"AssignmentExpression","start":3232,"end":3285,"operator":"=","left":{"type":"MemberExpression","start":3232,"end":3265,"object":{"type":"MemberExpression","start":3232,"end":3243,"object":{"type":"Identifier","start":3232,"end":3238,"name":"plugin"},"property":{"type":"Identifier","start":3239,"end":3243,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":3244,"end":3265,"name":"companionAllowedHosts"},"computed":false},"right":{"type":"MemberExpression","start":3268,"end":3285,"object":{"type":"Identifier","start":3268,"end":3272,"name":"opts"},"property":{"type":"Identifier","start":3273,"end":3285,"name":"companionUrl"},"computed":false}}}]}}]}},{"type":"ExpressionStatement","start":3305,"end":3357,"expression":{"type":"AssignmentExpression","start":3305,"end":3357,"operator":"=","left":{"type":"MemberExpression","start":3305,"end":3319,"object":{"type":"Identifier","start":3305,"end":3311,"name":"plugin"},"property":{"type":"Identifier","start":3312,"end":3319,"name":"storage"},"computed":false},"right":{"type":"LogicalExpression","start":3322,"end":3357,"left":{"type":"MemberExpression","start":3322,"end":3341,"object":{"type":"MemberExpression","start":3322,"end":3333,"object":{"type":"Identifier","start":3322,"end":3328,"name":"plugin"},"property":{"type":"Identifier","start":3329,"end":3333,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":3334,"end":3341,"name":"storage"},"computed":false},"operator":"||","right":{"type":"Identifier","start":3345,"end":3357,"name":"tokenStorage"}}}}]}}}]}}}}],"sourceType":"script"}