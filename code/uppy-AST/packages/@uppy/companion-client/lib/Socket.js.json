{"type":"Program","start":0,"end":1997,"body":[{"type":"VariableDeclaration","start":0,"end":38,"declarations":[{"type":"VariableDeclarator","start":4,"end":37,"id":{"type":"Identifier","start":4,"end":6,"name":"ee"},"init":{"type":"CallExpression","start":9,"end":37,"callee":{"type":"Identifier","start":9,"end":16,"name":"require"},"arguments":[{"type":"Literal","start":17,"end":36,"value":"namespace-emitter","raw":"'namespace-emitter'"}]}}],"kind":"var"},{"type":"ExpressionStatement","start":40,"end":1997,"expression":{"type":"AssignmentExpression","start":40,"end":1996,"operator":"=","left":{"type":"MemberExpression","start":40,"end":54,"object":{"type":"Identifier","start":40,"end":46,"name":"module"},"property":{"type":"Identifier","start":47,"end":54,"name":"exports"},"computed":false},"right":{"type":"CallExpression","start":70,"end":1996,"callee":{"type":"FunctionExpression","start":70,"end":1994,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":82,"end":1994,"body":[{"type":"FunctionDeclaration","start":86,"end":528,"id":{"type":"Identifier","start":95,"end":105,"name":"UppySocket"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":106,"end":110,"name":"opts"}],"body":{"type":"BlockStatement","start":112,"end":528,"body":[{"type":"ExpressionStatement","start":118,"end":135,"expression":{"type":"AssignmentExpression","start":118,"end":134,"operator":"=","left":{"type":"MemberExpression","start":118,"end":127,"object":{"type":"ThisExpression","start":118,"end":122},"property":{"type":"Identifier","start":123,"end":127,"name":"opts"},"computed":false},"right":{"type":"Identifier","start":130,"end":134,"name":"opts"}}},{"type":"ExpressionStatement","start":140,"end":158,"expression":{"type":"AssignmentExpression","start":140,"end":157,"operator":"=","left":{"type":"MemberExpression","start":140,"end":152,"object":{"type":"ThisExpression","start":140,"end":144},"property":{"type":"Identifier","start":145,"end":152,"name":"_queued"},"computed":false},"right":{"type":"ArrayExpression","start":155,"end":157,"elements":[]}}},{"type":"ExpressionStatement","start":163,"end":183,"expression":{"type":"AssignmentExpression","start":163,"end":182,"operator":"=","left":{"type":"MemberExpression","start":163,"end":174,"object":{"type":"ThisExpression","start":163,"end":167},"property":{"type":"Identifier","start":168,"end":174,"name":"isOpen"},"computed":false},"right":{"type":"Literal","start":177,"end":182,"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":188,"end":208,"expression":{"type":"AssignmentExpression","start":188,"end":207,"operator":"=","left":{"type":"MemberExpression","start":188,"end":200,"object":{"type":"ThisExpression","start":188,"end":192},"property":{"type":"Identifier","start":193,"end":200,"name":"emitter"},"computed":false},"right":{"type":"CallExpression","start":203,"end":207,"callee":{"type":"Identifier","start":203,"end":205,"name":"ee"},"arguments":[]}}},{"type":"ExpressionStatement","start":213,"end":266,"expression":{"type":"AssignmentExpression","start":213,"end":265,"operator":"=","left":{"type":"MemberExpression","start":213,"end":232,"object":{"type":"ThisExpression","start":213,"end":217},"property":{"type":"Identifier","start":218,"end":232,"name":"_handleMessage"},"computed":false},"right":{"type":"CallExpression","start":235,"end":265,"callee":{"type":"MemberExpression","start":235,"end":259,"object":{"type":"MemberExpression","start":235,"end":254,"object":{"type":"ThisExpression","start":235,"end":239},"property":{"type":"Identifier","start":240,"end":254,"name":"_handleMessage"},"computed":false},"property":{"type":"Identifier","start":255,"end":259,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":260,"end":264}]}}},{"type":"ExpressionStatement","start":271,"end":306,"expression":{"type":"AssignmentExpression","start":271,"end":305,"operator":"=","left":{"type":"MemberExpression","start":271,"end":281,"object":{"type":"ThisExpression","start":271,"end":275},"property":{"type":"Identifier","start":276,"end":281,"name":"close"},"computed":false},"right":{"type":"CallExpression","start":284,"end":305,"callee":{"type":"MemberExpression","start":284,"end":299,"object":{"type":"MemberExpression","start":284,"end":294,"object":{"type":"ThisExpression","start":284,"end":288},"property":{"type":"Identifier","start":289,"end":294,"name":"close"},"computed":false},"property":{"type":"Identifier","start":295,"end":299,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":300,"end":304}]}}},{"type":"ExpressionStatement","start":311,"end":344,"expression":{"type":"AssignmentExpression","start":311,"end":343,"operator":"=","left":{"type":"MemberExpression","start":311,"end":320,"object":{"type":"ThisExpression","start":311,"end":315},"property":{"type":"Identifier","start":316,"end":320,"name":"emit"},"computed":false},"right":{"type":"CallExpression","start":323,"end":343,"callee":{"type":"MemberExpression","start":323,"end":337,"object":{"type":"MemberExpression","start":323,"end":332,"object":{"type":"ThisExpression","start":323,"end":327},"property":{"type":"Identifier","start":328,"end":332,"name":"emit"},"computed":false},"property":{"type":"Identifier","start":333,"end":337,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":338,"end":342}]}}},{"type":"ExpressionStatement","start":349,"end":378,"expression":{"type":"AssignmentExpression","start":349,"end":377,"operator":"=","left":{"type":"MemberExpression","start":349,"end":356,"object":{"type":"ThisExpression","start":349,"end":353},"property":{"type":"Identifier","start":354,"end":356,"name":"on"},"computed":false},"right":{"type":"CallExpression","start":359,"end":377,"callee":{"type":"MemberExpression","start":359,"end":371,"object":{"type":"MemberExpression","start":359,"end":366,"object":{"type":"ThisExpression","start":359,"end":363},"property":{"type":"Identifier","start":364,"end":366,"name":"on"},"computed":false},"property":{"type":"Identifier","start":367,"end":371,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":372,"end":376}]}}},{"type":"ExpressionStatement","start":383,"end":416,"expression":{"type":"AssignmentExpression","start":383,"end":415,"operator":"=","left":{"type":"MemberExpression","start":383,"end":392,"object":{"type":"ThisExpression","start":383,"end":387},"property":{"type":"Identifier","start":388,"end":392,"name":"once"},"computed":false},"right":{"type":"CallExpression","start":395,"end":415,"callee":{"type":"MemberExpression","start":395,"end":409,"object":{"type":"MemberExpression","start":395,"end":404,"object":{"type":"ThisExpression","start":395,"end":399},"property":{"type":"Identifier","start":400,"end":404,"name":"once"},"computed":false},"property":{"type":"Identifier","start":405,"end":409,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":410,"end":414}]}}},{"type":"ExpressionStatement","start":421,"end":454,"expression":{"type":"AssignmentExpression","start":421,"end":453,"operator":"=","left":{"type":"MemberExpression","start":421,"end":430,"object":{"type":"ThisExpression","start":421,"end":425},"property":{"type":"Identifier","start":426,"end":430,"name":"send"},"computed":false},"right":{"type":"CallExpression","start":433,"end":453,"callee":{"type":"MemberExpression","start":433,"end":447,"object":{"type":"MemberExpression","start":433,"end":442,"object":{"type":"ThisExpression","start":433,"end":437},"property":{"type":"Identifier","start":438,"end":442,"name":"send"},"computed":false},"property":{"type":"Identifier","start":443,"end":447,"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":448,"end":452}]}}},{"type":"IfStatement","start":460,"end":524,"test":{"type":"LogicalExpression","start":464,"end":496,"left":{"type":"UnaryExpression","start":464,"end":469,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":465,"end":469,"name":"opts"}},"operator":"||","right":{"type":"BinaryExpression","start":473,"end":496,"left":{"type":"MemberExpression","start":473,"end":486,"object":{"type":"Identifier","start":473,"end":477,"name":"opts"},"property":{"type":"Identifier","start":478,"end":486,"name":"autoOpen"},"computed":false},"operator":"!==","right":{"type":"Literal","start":491,"end":496,"value":false,"raw":"false"}}},"consequent":{"type":"BlockStatement","start":498,"end":524,"body":[{"type":"ExpressionStatement","start":506,"end":518,"expression":{"type":"CallExpression","start":506,"end":517,"callee":{"type":"MemberExpression","start":506,"end":515,"object":{"type":"ThisExpression","start":506,"end":510},"property":{"type":"Identifier","start":511,"end":515,"name":"open"},"computed":false},"arguments":[]}}]},"alternate":null}]}},{"type":"VariableDeclaration","start":532,"end":566,"declarations":[{"type":"VariableDeclarator","start":536,"end":565,"id":{"type":"Identifier","start":536,"end":542,"name":"_proto"},"init":{"type":"MemberExpression","start":545,"end":565,"object":{"type":"Identifier","start":545,"end":555,"name":"UppySocket"},"property":{"type":"Identifier","start":556,"end":565,"name":"prototype"},"computed":false}}],"kind":"var"},{"type":"ExpressionStatement","start":570,"end":1085,"expression":{"type":"AssignmentExpression","start":570,"end":1084,"operator":"=","left":{"type":"MemberExpression","start":570,"end":581,"object":{"type":"Identifier","start":570,"end":576,"name":"_proto"},"property":{"type":"Identifier","start":577,"end":581,"name":"open"},"computed":false},"right":{"type":"FunctionExpression","start":584,"end":1084,"id":{"type":"Identifier","start":593,"end":597,"name":"open"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":600,"end":1084,"body":[{"type":"VariableDeclaration","start":606,"end":623,"declarations":[{"type":"VariableDeclarator","start":610,"end":622,"id":{"type":"Identifier","start":610,"end":615,"name":"_this"},"init":{"type":"ThisExpression","start":618,"end":622}}],"kind":"var"},{"type":"ExpressionStatement","start":629,"end":675,"expression":{"type":"AssignmentExpression","start":629,"end":674,"operator":"=","left":{"type":"MemberExpression","start":629,"end":640,"object":{"type":"ThisExpression","start":629,"end":633},"property":{"type":"Identifier","start":634,"end":640,"name":"socket"},"computed":false},"right":{"type":"NewExpression","start":643,"end":674,"callee":{"type":"Identifier","start":647,"end":656,"name":"WebSocket"},"arguments":[{"type":"MemberExpression","start":657,"end":673,"object":{"type":"MemberExpression","start":657,"end":666,"object":{"type":"ThisExpression","start":657,"end":661},"property":{"type":"Identifier","start":662,"end":666,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":667,"end":673,"name":"target"},"computed":false}]}}},{"type":"ExpressionStatement","start":681,"end":953,"expression":{"type":"AssignmentExpression","start":681,"end":952,"operator":"=","left":{"type":"MemberExpression","start":681,"end":699,"object":{"type":"MemberExpression","start":681,"end":692,"object":{"type":"ThisExpression","start":681,"end":685},"property":{"type":"Identifier","start":686,"end":692,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":693,"end":699,"name":"onopen"},"computed":false},"right":{"type":"FunctionExpression","start":702,"end":952,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":712,"end":713,"name":"e"}],"body":{"type":"BlockStatement","start":715,"end":952,"body":[{"type":"ExpressionStatement","start":723,"end":743,"expression":{"type":"AssignmentExpression","start":723,"end":742,"operator":"=","left":{"type":"MemberExpression","start":723,"end":735,"object":{"type":"Identifier","start":723,"end":728,"name":"_this"},"property":{"type":"Identifier","start":729,"end":735,"name":"isOpen"},"computed":false},"right":{"type":"Literal","start":738,"end":742,"value":true,"raw":"true"}}},{"type":"WhileStatement","start":751,"end":946,"test":{"type":"LogicalExpression","start":758,"end":798,"left":{"type":"BinaryExpression","start":758,"end":782,"left":{"type":"MemberExpression","start":758,"end":778,"object":{"type":"MemberExpression","start":758,"end":771,"object":{"type":"Identifier","start":758,"end":763,"name":"_this"},"property":{"type":"Identifier","start":764,"end":771,"name":"_queued"},"computed":false},"property":{"type":"Identifier","start":772,"end":778,"name":"length"},"computed":false},"operator":">","right":{"type":"Literal","start":781,"end":782,"value":0,"raw":"0"}},"operator":"&&","right":{"type":"MemberExpression","start":786,"end":798,"object":{"type":"Identifier","start":786,"end":791,"name":"_this"},"property":{"type":"Identifier","start":792,"end":798,"name":"isOpen"},"computed":false}},"body":{"type":"BlockStatement","start":800,"end":946,"body":[{"type":"VariableDeclaration","start":810,"end":839,"declarations":[{"type":"VariableDeclarator","start":814,"end":838,"id":{"type":"Identifier","start":814,"end":819,"name":"first"},"init":{"type":"MemberExpression","start":822,"end":838,"object":{"type":"MemberExpression","start":822,"end":835,"object":{"type":"Identifier","start":822,"end":827,"name":"_this"},"property":{"type":"Identifier","start":828,"end":835,"name":"_queued"},"computed":false},"property":{"type":"Literal","start":836,"end":837,"value":0,"raw":"0"},"computed":true}}],"kind":"var"},{"type":"ExpressionStatement","start":849,"end":889,"expression":{"type":"CallExpression","start":849,"end":888,"callee":{"type":"MemberExpression","start":849,"end":859,"object":{"type":"Identifier","start":849,"end":854,"name":"_this"},"property":{"type":"Identifier","start":855,"end":859,"name":"send"},"computed":false},"arguments":[{"type":"MemberExpression","start":860,"end":872,"object":{"type":"Identifier","start":860,"end":865,"name":"first"},"property":{"type":"Identifier","start":866,"end":872,"name":"action"},"computed":false},{"type":"MemberExpression","start":874,"end":887,"object":{"type":"Identifier","start":874,"end":879,"name":"first"},"property":{"type":"Identifier","start":880,"end":887,"name":"payload"},"computed":false}]}},{"type":"ExpressionStatement","start":899,"end":938,"expression":{"type":"AssignmentExpression","start":899,"end":937,"operator":"=","left":{"type":"MemberExpression","start":899,"end":912,"object":{"type":"Identifier","start":899,"end":904,"name":"_this"},"property":{"type":"Identifier","start":905,"end":912,"name":"_queued"},"computed":false},"right":{"type":"CallExpression","start":915,"end":937,"callee":{"type":"MemberExpression","start":915,"end":934,"object":{"type":"MemberExpression","start":915,"end":928,"object":{"type":"Identifier","start":915,"end":920,"name":"_this"},"property":{"type":"Identifier","start":921,"end":928,"name":"_queued"},"computed":false},"property":{"type":"Identifier","start":929,"end":934,"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":935,"end":936,"value":1,"raw":"1"}]}}}]}}]}}}},{"type":"ExpressionStatement","start":959,"end":1030,"expression":{"type":"AssignmentExpression","start":959,"end":1029,"operator":"=","left":{"type":"MemberExpression","start":959,"end":978,"object":{"type":"MemberExpression","start":959,"end":970,"object":{"type":"ThisExpression","start":959,"end":963},"property":{"type":"Identifier","start":964,"end":970,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":971,"end":978,"name":"onclose"},"computed":false},"right":{"type":"FunctionExpression","start":981,"end":1029,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":991,"end":992,"name":"e"}],"body":{"type":"BlockStatement","start":994,"end":1029,"body":[{"type":"ExpressionStatement","start":1002,"end":1023,"expression":{"type":"AssignmentExpression","start":1002,"end":1022,"operator":"=","left":{"type":"MemberExpression","start":1002,"end":1014,"object":{"type":"Identifier","start":1002,"end":1007,"name":"_this"},"property":{"type":"Identifier","start":1008,"end":1014,"name":"isOpen"},"computed":false},"right":{"type":"Literal","start":1017,"end":1022,"value":false,"raw":"false"}}}]}}}},{"type":"ExpressionStatement","start":1036,"end":1080,"expression":{"type":"AssignmentExpression","start":1036,"end":1079,"operator":"=","left":{"type":"MemberExpression","start":1036,"end":1057,"object":{"type":"MemberExpression","start":1036,"end":1047,"object":{"type":"ThisExpression","start":1036,"end":1040},"property":{"type":"Identifier","start":1041,"end":1047,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":1048,"end":1057,"name":"onmessage"},"computed":false},"right":{"type":"MemberExpression","start":1060,"end":1079,"object":{"type":"ThisExpression","start":1060,"end":1064},"property":{"type":"Identifier","start":1065,"end":1079,"name":"_handleMessage"},"computed":false}}}]}}}},{"type":"ExpressionStatement","start":1089,"end":1183,"expression":{"type":"AssignmentExpression","start":1089,"end":1182,"operator":"=","left":{"type":"MemberExpression","start":1089,"end":1101,"object":{"type":"Identifier","start":1089,"end":1095,"name":"_proto"},"property":{"type":"Identifier","start":1096,"end":1101,"name":"close"},"computed":false},"right":{"type":"FunctionExpression","start":1104,"end":1182,"id":{"type":"Identifier","start":1113,"end":1118,"name":"close"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1121,"end":1182,"body":[{"type":"IfStatement","start":1127,"end":1178,"test":{"type":"MemberExpression","start":1131,"end":1142,"object":{"type":"ThisExpression","start":1131,"end":1135},"property":{"type":"Identifier","start":1136,"end":1142,"name":"socket"},"computed":false},"consequent":{"type":"BlockStatement","start":1144,"end":1178,"body":[{"type":"ExpressionStatement","start":1152,"end":1172,"expression":{"type":"CallExpression","start":1152,"end":1171,"callee":{"type":"MemberExpression","start":1152,"end":1169,"object":{"type":"MemberExpression","start":1152,"end":1163,"object":{"type":"ThisExpression","start":1152,"end":1156},"property":{"type":"Identifier","start":1157,"end":1163,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":1164,"end":1169,"name":"close"},"computed":false},"arguments":[]}}]},"alternate":null}]}}}},{"type":"ExpressionStatement","start":1187,"end":1480,"expression":{"type":"AssignmentExpression","start":1187,"end":1479,"operator":"=","left":{"type":"MemberExpression","start":1187,"end":1198,"object":{"type":"Identifier","start":1187,"end":1193,"name":"_proto"},"property":{"type":"Identifier","start":1194,"end":1198,"name":"send"},"computed":false},"right":{"type":"FunctionExpression","start":1201,"end":1479,"id":{"type":"Identifier","start":1210,"end":1214,"name":"send"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1215,"end":1221,"name":"action"},{"type":"Identifier","start":1223,"end":1230,"name":"payload"}],"body":{"type":"BlockStatement","start":1232,"end":1479,"body":[{"type":"IfStatement","start":1257,"end":1382,"test":{"type":"UnaryExpression","start":1261,"end":1273,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1262,"end":1273,"object":{"type":"ThisExpression","start":1262,"end":1266},"property":{"type":"Identifier","start":1267,"end":1273,"name":"isOpen"},"computed":false}},"consequent":{"type":"BlockStatement","start":1275,"end":1382,"body":[{"type":"ExpressionStatement","start":1283,"end":1361,"expression":{"type":"CallExpression","start":1283,"end":1360,"callee":{"type":"MemberExpression","start":1283,"end":1300,"object":{"type":"MemberExpression","start":1283,"end":1295,"object":{"type":"ThisExpression","start":1283,"end":1287},"property":{"type":"Identifier","start":1288,"end":1295,"name":"_queued"},"computed":false},"property":{"type":"Identifier","start":1296,"end":1300,"name":"push"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1301,"end":1359,"properties":[{"type":"Property","start":1311,"end":1325,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1311,"end":1317,"name":"action"},"value":{"type":"Identifier","start":1319,"end":1325,"name":"action"},"kind":"init"},{"type":"Property","start":1335,"end":1351,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1335,"end":1342,"name":"payload"},"value":{"type":"Identifier","start":1344,"end":1351,"name":"payload"},"kind":"init"}]}]}},{"type":"ReturnStatement","start":1369,"end":1376,"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":1388,"end":1475,"expression":{"type":"CallExpression","start":1388,"end":1474,"callee":{"type":"MemberExpression","start":1388,"end":1404,"object":{"type":"MemberExpression","start":1388,"end":1399,"object":{"type":"ThisExpression","start":1388,"end":1392},"property":{"type":"Identifier","start":1393,"end":1399,"name":"socket"},"computed":false},"property":{"type":"Identifier","start":1400,"end":1404,"name":"send"},"computed":false},"arguments":[{"type":"CallExpression","start":1405,"end":1473,"callee":{"type":"MemberExpression","start":1405,"end":1419,"object":{"type":"Identifier","start":1405,"end":1409,"name":"JSON"},"property":{"type":"Identifier","start":1410,"end":1419,"name":"stringify"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1420,"end":1472,"properties":[{"type":"Property","start":1428,"end":1442,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1428,"end":1434,"name":"action"},"value":{"type":"Identifier","start":1436,"end":1442,"name":"action"},"kind":"init"},{"type":"Property","start":1450,"end":1466,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1450,"end":1457,"name":"payload"},"value":{"type":"Identifier","start":1459,"end":1466,"name":"payload"},"kind":"init"}]}]}]}}]}}}},{"type":"ExpressionStatement","start":1484,"end":1569,"expression":{"type":"AssignmentExpression","start":1484,"end":1568,"operator":"=","left":{"type":"MemberExpression","start":1484,"end":1493,"object":{"type":"Identifier","start":1484,"end":1490,"name":"_proto"},"property":{"type":"Identifier","start":1491,"end":1493,"name":"on"},"computed":false},"right":{"type":"FunctionExpression","start":1496,"end":1568,"id":{"type":"Identifier","start":1505,"end":1507,"name":"on"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1508,"end":1514,"name":"action"},{"type":"Identifier","start":1516,"end":1523,"name":"handler"}],"body":{"type":"BlockStatement","start":1525,"end":1568,"body":[{"type":"ExpressionStatement","start":1531,"end":1564,"expression":{"type":"CallExpression","start":1531,"end":1563,"callee":{"type":"MemberExpression","start":1531,"end":1546,"object":{"type":"MemberExpression","start":1531,"end":1543,"object":{"type":"ThisExpression","start":1531,"end":1535},"property":{"type":"Identifier","start":1536,"end":1543,"name":"emitter"},"computed":false},"property":{"type":"Identifier","start":1544,"end":1546,"name":"on"},"computed":false},"arguments":[{"type":"Identifier","start":1547,"end":1553,"name":"action"},{"type":"Identifier","start":1555,"end":1562,"name":"handler"}]}}]}}}},{"type":"ExpressionStatement","start":1573,"end":1664,"expression":{"type":"AssignmentExpression","start":1573,"end":1663,"operator":"=","left":{"type":"MemberExpression","start":1573,"end":1584,"object":{"type":"Identifier","start":1573,"end":1579,"name":"_proto"},"property":{"type":"Identifier","start":1580,"end":1584,"name":"emit"},"computed":false},"right":{"type":"FunctionExpression","start":1587,"end":1663,"id":{"type":"Identifier","start":1596,"end":1600,"name":"emit"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1601,"end":1607,"name":"action"},{"type":"Identifier","start":1609,"end":1616,"name":"payload"}],"body":{"type":"BlockStatement","start":1618,"end":1663,"body":[{"type":"ExpressionStatement","start":1624,"end":1659,"expression":{"type":"CallExpression","start":1624,"end":1658,"callee":{"type":"MemberExpression","start":1624,"end":1641,"object":{"type":"MemberExpression","start":1624,"end":1636,"object":{"type":"ThisExpression","start":1624,"end":1628},"property":{"type":"Identifier","start":1629,"end":1636,"name":"emitter"},"computed":false},"property":{"type":"Identifier","start":1637,"end":1641,"name":"emit"},"computed":false},"arguments":[{"type":"Identifier","start":1642,"end":1648,"name":"action"},{"type":"Identifier","start":1650,"end":1657,"name":"payload"}]}}]}}}},{"type":"ExpressionStatement","start":1668,"end":1759,"expression":{"type":"AssignmentExpression","start":1668,"end":1758,"operator":"=","left":{"type":"MemberExpression","start":1668,"end":1679,"object":{"type":"Identifier","start":1668,"end":1674,"name":"_proto"},"property":{"type":"Identifier","start":1675,"end":1679,"name":"once"},"computed":false},"right":{"type":"FunctionExpression","start":1682,"end":1758,"id":{"type":"Identifier","start":1691,"end":1695,"name":"once"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1696,"end":1702,"name":"action"},{"type":"Identifier","start":1704,"end":1711,"name":"handler"}],"body":{"type":"BlockStatement","start":1713,"end":1758,"body":[{"type":"ExpressionStatement","start":1719,"end":1754,"expression":{"type":"CallExpression","start":1719,"end":1753,"callee":{"type":"MemberExpression","start":1719,"end":1736,"object":{"type":"MemberExpression","start":1719,"end":1731,"object":{"type":"ThisExpression","start":1719,"end":1723},"property":{"type":"Identifier","start":1724,"end":1731,"name":"emitter"},"computed":false},"property":{"type":"Identifier","start":1732,"end":1736,"name":"once"},"computed":false},"arguments":[{"type":"Identifier","start":1737,"end":1743,"name":"action"},{"type":"Identifier","start":1745,"end":1752,"name":"handler"}]}}]}}}},{"type":"ExpressionStatement","start":1763,"end":1970,"expression":{"type":"AssignmentExpression","start":1763,"end":1969,"operator":"=","left":{"type":"MemberExpression","start":1763,"end":1784,"object":{"type":"Identifier","start":1763,"end":1769,"name":"_proto"},"property":{"type":"Identifier","start":1770,"end":1784,"name":"_handleMessage"},"computed":false},"right":{"type":"FunctionExpression","start":1787,"end":1969,"id":{"type":"Identifier","start":1796,"end":1810,"name":"_handleMessage"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1811,"end":1812,"name":"e"}],"body":{"type":"BlockStatement","start":1814,"end":1969,"body":[{"type":"TryStatement","start":1820,"end":1965,"block":{"type":"BlockStatement","start":1824,"end":1921,"body":[{"type":"VariableDeclaration","start":1832,"end":1865,"declarations":[{"type":"VariableDeclarator","start":1836,"end":1864,"id":{"type":"Identifier","start":1836,"end":1843,"name":"message"},"init":{"type":"CallExpression","start":1846,"end":1864,"callee":{"type":"MemberExpression","start":1846,"end":1856,"object":{"type":"Identifier","start":1846,"end":1850,"name":"JSON"},"property":{"type":"Identifier","start":1851,"end":1856,"name":"parse"},"computed":false},"arguments":[{"type":"MemberExpression","start":1857,"end":1863,"object":{"type":"Identifier","start":1857,"end":1858,"name":"e"},"property":{"type":"Identifier","start":1859,"end":1863,"name":"data"},"computed":false}]}}],"kind":"var"},{"type":"ExpressionStatement","start":1872,"end":1915,"expression":{"type":"CallExpression","start":1872,"end":1914,"callee":{"type":"MemberExpression","start":1872,"end":1881,"object":{"type":"ThisExpression","start":1872,"end":1876},"property":{"type":"Identifier","start":1877,"end":1881,"name":"emit"},"computed":false},"arguments":[{"type":"MemberExpression","start":1882,"end":1896,"object":{"type":"Identifier","start":1882,"end":1889,"name":"message"},"property":{"type":"Identifier","start":1890,"end":1896,"name":"action"},"computed":false},{"type":"MemberExpression","start":1898,"end":1913,"object":{"type":"Identifier","start":1898,"end":1905,"name":"message"},"property":{"type":"Identifier","start":1906,"end":1913,"name":"payload"},"computed":false}]}}]},"handler":{"type":"CatchClause","start":1922,"end":1965,"param":{"type":"Identifier","start":1929,"end":1932,"name":"err"},"body":{"type":"BlockStatement","start":1934,"end":1965,"body":[{"type":"ExpressionStatement","start":1942,"end":1959,"expression":{"type":"CallExpression","start":1942,"end":1958,"callee":{"type":"MemberExpression","start":1942,"end":1953,"object":{"type":"Identifier","start":1942,"end":1949,"name":"console"},"property":{"type":"Identifier","start":1950,"end":1953,"name":"log"},"computed":false},"arguments":[{"type":"Identifier","start":1954,"end":1957,"name":"err"}]}}]}},"finalizer":null}]}}}},{"type":"ReturnStatement","start":1974,"end":1992,"argument":{"type":"Identifier","start":1981,"end":1991,"name":"UppySocket"}}]}},"arguments":[]}}}],"sourceType":"script"}