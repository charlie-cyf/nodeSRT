{"type":"Program","start":0,"end":2681,"loc":{"start":{"line":1,"column":0},"end":{"line":44,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":43,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":43}},"declarations":[{"type":"VariableDeclarator","start":6,"end":43,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":43}},"id":{"type":"Identifier","start":6,"end":14,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":14}},"name":"debounce"},"init":{"type":"CallExpression","start":17,"end":43,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":43}},"callee":{"type":"Identifier","start":17,"end":24,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":24}},"name":"require"},"arguments":[{"type":"Literal","start":25,"end":42,"loc":{"start":{"line":1,"column":25},"end":{"line":1,"column":42}},"value":"lodash.debounce","raw":"'lodash.debounce'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":44,"end":116,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":72}},"declarations":[{"type":"VariableDeclarator","start":50,"end":116,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":72}},"id":{"type":"Identifier","start":50,"end":68,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":24}},"name":"FOCUSABLE_ELEMENTS"},"init":{"type":"CallExpression","start":71,"end":116,"loc":{"start":{"line":2,"column":27},"end":{"line":2,"column":72}},"callee":{"type":"Identifier","start":71,"end":78,"loc":{"start":{"line":2,"column":27},"end":{"line":2,"column":34}},"name":"require"},"arguments":[{"type":"Literal","start":79,"end":115,"loc":{"start":{"line":2,"column":35},"end":{"line":2,"column":71}},"value":"@uppy/utils/lib/FOCUSABLE_ELEMENTS","raw":"'@uppy/utils/lib/FOCUSABLE_ELEMENTS'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":117,"end":175,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":58}},"declarations":[{"type":"VariableDeclarator","start":123,"end":175,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":58}},"id":{"type":"Identifier","start":123,"end":141,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":24}},"name":"getActiveOverlayEl"},"init":{"type":"CallExpression","start":144,"end":175,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":58}},"callee":{"type":"Identifier","start":144,"end":151,"loc":{"start":{"line":3,"column":27},"end":{"line":3,"column":34}},"name":"require"},"arguments":[{"type":"Literal","start":152,"end":174,"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":57}},"value":"./getActiveOverlayEl","raw":"'./getActiveOverlayEl'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":750,"end":2680,"loc":{"start":{"line":11,"column":0},"end":{"line":43,"column":1}},"expression":{"type":"AssignmentExpression","start":750,"end":2680,"loc":{"start":{"line":11,"column":0},"end":{"line":43,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":750,"end":764,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":14}},"object":{"type":"Identifier","start":750,"end":756,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":6}},"name":"module"},"property":{"type":"Identifier","start":757,"end":764,"loc":{"start":{"line":11,"column":7},"end":{"line":11,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":767,"end":2680,"loc":{"start":{"line":11,"column":17},"end":{"line":43,"column":1}},"id":{"type":"Identifier","start":776,"end":792,"loc":{"start":{"line":11,"column":26},"end":{"line":11,"column":42}},"name":"createSuperFocus"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":796,"end":2680,"loc":{"start":{"line":11,"column":46},"end":{"line":43,"column":1}},"body":[{"type":"VariableDeclaration","start":800,"end":842,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":44}},"declarations":[{"type":"VariableDeclarator","start":804,"end":842,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":44}},"id":{"type":"Identifier","start":804,"end":834,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":36}},"name":"lastFocusWasOnSuperFocusableEl"},"init":{"type":"Literal","start":837,"end":842,"loc":{"start":{"line":12,"column":39},"end":{"line":12,"column":44}},"value":false,"raw":"false"}}],"kind":"let"},{"type":"VariableDeclaration","start":846,"end":2123,"loc":{"start":{"line":14,"column":2},"end":{"line":35,"column":3}},"declarations":[{"type":"VariableDeclarator","start":852,"end":2123,"loc":{"start":{"line":14,"column":8},"end":{"line":35,"column":3}},"id":{"type":"Identifier","start":852,"end":862,"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":18}},"name":"superFocus"},"init":{"type":"ArrowFunctionExpression","start":865,"end":2123,"loc":{"start":{"line":14,"column":21},"end":{"line":35,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":866,"end":877,"loc":{"start":{"line":14,"column":22},"end":{"line":14,"column":33}},"name":"dashboardEl"},{"type":"Identifier","start":879,"end":896,"loc":{"start":{"line":14,"column":35},"end":{"line":14,"column":52}},"name":"activeOverlayType"}],"body":{"type":"BlockStatement","start":901,"end":2123,"loc":{"start":{"line":14,"column":57},"end":{"line":35,"column":3}},"body":[{"type":"VariableDeclaration","start":907,"end":975,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":72}},"declarations":[{"type":"VariableDeclarator","start":913,"end":975,"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":72}},"id":{"type":"Identifier","start":913,"end":922,"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":19}},"name":"overlayEl"},"init":{"type":"CallExpression","start":925,"end":975,"loc":{"start":{"line":15,"column":22},"end":{"line":15,"column":72}},"callee":{"type":"Identifier","start":925,"end":943,"loc":{"start":{"line":15,"column":22},"end":{"line":15,"column":40}},"name":"getActiveOverlayEl"},"arguments":[{"type":"Identifier","start":944,"end":955,"loc":{"start":{"line":15,"column":41},"end":{"line":15,"column":52}},"name":"dashboardEl"},{"type":"Identifier","start":957,"end":974,"loc":{"start":{"line":15,"column":54},"end":{"line":15,"column":71}},"name":"activeOverlayType"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":981,"end":1048,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":71}},"declarations":[{"type":"VariableDeclarator","start":987,"end":1048,"loc":{"start":{"line":17,"column":10},"end":{"line":17,"column":71}},"id":{"type":"Identifier","start":987,"end":1003,"loc":{"start":{"line":17,"column":10},"end":{"line":17,"column":26}},"name":"isFocusInOverlay"},"init":{"type":"CallExpression","start":1006,"end":1048,"loc":{"start":{"line":17,"column":29},"end":{"line":17,"column":71}},"callee":{"type":"MemberExpression","start":1006,"end":1024,"loc":{"start":{"line":17,"column":29},"end":{"line":17,"column":47}},"object":{"type":"Identifier","start":1006,"end":1015,"loc":{"start":{"line":17,"column":29},"end":{"line":17,"column":38}},"name":"overlayEl"},"property":{"type":"Identifier","start":1016,"end":1024,"loc":{"start":{"line":17,"column":39},"end":{"line":17,"column":47}},"name":"contains"},"computed":false},"arguments":[{"type":"MemberExpression","start":1025,"end":1047,"loc":{"start":{"line":17,"column":48},"end":{"line":17,"column":70}},"object":{"type":"Identifier","start":1025,"end":1033,"loc":{"start":{"line":17,"column":48},"end":{"line":17,"column":56}},"name":"document"},"property":{"type":"Identifier","start":1034,"end":1047,"loc":{"start":{"line":17,"column":57},"end":{"line":17,"column":70}},"name":"activeElement"},"computed":false}]}}],"kind":"const"},{"type":"IfStatement","start":1305,"end":1367,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":66}},"test":{"type":"LogicalExpression","start":1309,"end":1359,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":58}},"left":{"type":"Identifier","start":1309,"end":1325,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":24}},"name":"isFocusInOverlay"},"operator":"&&","right":{"type":"Identifier","start":1329,"end":1359,"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":58}},"name":"lastFocusWasOnSuperFocusableEl"}},"consequent":{"type":"ReturnStatement","start":1361,"end":1367,"loc":{"start":{"line":20,"column":60},"end":{"line":20,"column":66}},"argument":null},"alternate":null,"comments":[{"type":"Line","value":" If focus is already in the topmost overlay, AND on last update we focused on the superfocusable element - then leave focus up to the user.","start":1053,"end":1194,"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":145}}},{"type":"Line","value":" [Practical check] without this line, typing in the search input in googledrive overlay won't work.","start":1199,"end":1300,"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":105}}}]},{"type":"VariableDeclaration","start":1373,"end":1452,"loc":{"start":{"line":22,"column":4},"end":{"line":22,"column":83}},"declarations":[{"type":"VariableDeclarator","start":1379,"end":1452,"loc":{"start":{"line":22,"column":10},"end":{"line":22,"column":83}},"id":{"type":"Identifier","start":1379,"end":1395,"loc":{"start":{"line":22,"column":10},"end":{"line":22,"column":26}},"name":"superFocusableEl"},"init":{"type":"CallExpression","start":1398,"end":1452,"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":83}},"callee":{"type":"MemberExpression","start":1398,"end":1421,"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":52}},"object":{"type":"Identifier","start":1398,"end":1407,"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":38}},"name":"overlayEl"},"property":{"type":"Identifier","start":1408,"end":1421,"loc":{"start":{"line":22,"column":39},"end":{"line":22,"column":52}},"name":"querySelector"},"computed":false},"arguments":[{"type":"Literal","start":1422,"end":1451,"loc":{"start":{"line":22,"column":53},"end":{"line":22,"column":82}},"value":"[data-uppy-super-focusable]","raw":"'[data-uppy-super-focusable]'"}]}}],"kind":"const"},{"type":"IfStatement","start":1757,"end":1806,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":53}},"test":{"type":"LogicalExpression","start":1761,"end":1798,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":45}},"left":{"type":"Identifier","start":1761,"end":1777,"loc":{"start":{"line":25,"column":8},"end":{"line":25,"column":24}},"name":"isFocusInOverlay"},"operator":"&&","right":{"type":"UnaryExpression","start":1781,"end":1798,"loc":{"start":{"line":25,"column":28},"end":{"line":25,"column":45}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1782,"end":1798,"loc":{"start":{"line":25,"column":29},"end":{"line":25,"column":45}},"name":"superFocusableEl"}}},"consequent":{"type":"ReturnStatement","start":1800,"end":1806,"loc":{"start":{"line":25,"column":47},"end":{"line":25,"column":53}},"argument":null},"alternate":null,"comments":[{"type":"Line","value":" If we are already in the topmost overlay, AND there are no super focusable elements yet, - leave focus up to the user.","start":1457,"end":1578,"loc":{"start":{"line":23,"column":4},"end":{"line":23,"column":125}}},{"type":"Line","value":" [Practical check] without this line, if you are in an empty folder in google drive, and something's uploading in the bg, - focus will be jumping to Done all the time.","start":1583,"end":1752,"loc":{"start":{"line":24,"column":4},"end":{"line":24,"column":173}}}]},{"type":"IfStatement","start":1812,"end":2119,"loc":{"start":{"line":27,"column":4},"end":{"line":34,"column":5}},"test":{"type":"Identifier","start":1816,"end":1832,"loc":{"start":{"line":27,"column":8},"end":{"line":27,"column":24}},"name":"superFocusableEl"},"consequent":{"type":"BlockStatement","start":1834,"end":1939,"loc":{"start":{"line":27,"column":26},"end":{"line":30,"column":5}},"body":[{"type":"ExpressionStatement","start":1842,"end":1889,"loc":{"start":{"line":28,"column":6},"end":{"line":28,"column":53}},"expression":{"type":"CallExpression","start":1842,"end":1889,"loc":{"start":{"line":28,"column":6},"end":{"line":28,"column":53}},"callee":{"type":"MemberExpression","start":1842,"end":1864,"loc":{"start":{"line":28,"column":6},"end":{"line":28,"column":28}},"object":{"type":"Identifier","start":1842,"end":1858,"loc":{"start":{"line":28,"column":6},"end":{"line":28,"column":22}},"name":"superFocusableEl"},"property":{"type":"Identifier","start":1859,"end":1864,"loc":{"start":{"line":28,"column":23},"end":{"line":28,"column":28}},"name":"focus"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1865,"end":1888,"loc":{"start":{"line":28,"column":29},"end":{"line":28,"column":52}},"properties":[{"type":"Property","start":1867,"end":1886,"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":50}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1867,"end":1880,"loc":{"start":{"line":28,"column":31},"end":{"line":28,"column":44}},"name":"preventScroll"},"value":{"type":"Literal","start":1882,"end":1886,"loc":{"start":{"line":28,"column":46},"end":{"line":28,"column":50}},"value":true,"raw":"true"},"kind":"init"}]}]}},{"type":"ExpressionStatement","start":1896,"end":1933,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":43}},"expression":{"type":"AssignmentExpression","start":1896,"end":1933,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":43}},"operator":"=","left":{"type":"Identifier","start":1896,"end":1926,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":36}},"name":"lastFocusWasOnSuperFocusableEl"},"right":{"type":"Literal","start":1929,"end":1933,"loc":{"start":{"line":29,"column":39},"end":{"line":29,"column":43}},"value":true,"raw":"true"}}}]},"alternate":{"type":"BlockStatement","start":1945,"end":2119,"loc":{"start":{"line":30,"column":11},"end":{"line":34,"column":5}},"body":[{"type":"VariableDeclaration","start":1953,"end":2012,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":65}},"declarations":[{"type":"VariableDeclarator","start":1959,"end":2012,"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":65}},"id":{"type":"Identifier","start":1959,"end":1966,"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":19}},"name":"firstEl"},"init":{"type":"CallExpression","start":1969,"end":2012,"loc":{"start":{"line":31,"column":22},"end":{"line":31,"column":65}},"callee":{"type":"MemberExpression","start":1969,"end":1992,"loc":{"start":{"line":31,"column":22},"end":{"line":31,"column":45}},"object":{"type":"Identifier","start":1969,"end":1978,"loc":{"start":{"line":31,"column":22},"end":{"line":31,"column":31}},"name":"overlayEl"},"property":{"type":"Identifier","start":1979,"end":1992,"loc":{"start":{"line":31,"column":32},"end":{"line":31,"column":45}},"name":"querySelector"},"computed":false},"arguments":[{"type":"Identifier","start":1993,"end":2011,"loc":{"start":{"line":31,"column":46},"end":{"line":31,"column":64}},"name":"FOCUSABLE_ELEMENTS"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":2019,"end":2068,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":55}},"expression":{"type":"LogicalExpression","start":2019,"end":2068,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":55}},"left":{"type":"Identifier","start":2019,"end":2026,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":13}},"name":"firstEl"},"operator":"&&","right":{"type":"CallExpression","start":2030,"end":2068,"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":55}},"callee":{"type":"MemberExpression","start":2030,"end":2043,"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":30}},"object":{"type":"Identifier","start":2030,"end":2037,"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":24}},"name":"firstEl"},"property":{"type":"Identifier","start":2038,"end":2043,"loc":{"start":{"line":32,"column":25},"end":{"line":32,"column":30}},"name":"focus"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2044,"end":2067,"loc":{"start":{"line":32,"column":31},"end":{"line":32,"column":54}},"properties":[{"type":"Property","start":2046,"end":2065,"loc":{"start":{"line":32,"column":33},"end":{"line":32,"column":52}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2046,"end":2059,"loc":{"start":{"line":32,"column":33},"end":{"line":32,"column":46}},"name":"preventScroll"},"value":{"type":"Literal","start":2061,"end":2065,"loc":{"start":{"line":32,"column":48},"end":{"line":32,"column":52}},"value":true,"raw":"true"},"kind":"init"}]}]}}},{"type":"ExpressionStatement","start":2075,"end":2113,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":44}},"expression":{"type":"AssignmentExpression","start":2075,"end":2113,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":44}},"operator":"=","left":{"type":"Identifier","start":2075,"end":2105,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":36}},"name":"lastFocusWasOnSuperFocusableEl"},"right":{"type":"Literal","start":2108,"end":2113,"loc":{"start":{"line":33,"column":39},"end":{"line":33,"column":44}},"value":false,"raw":"false"}}}]}}]}}}],"kind":"const"},{"type":"ReturnStatement","start":2646,"end":2678,"loc":{"start":{"line":42,"column":2},"end":{"line":42,"column":34}},"argument":{"type":"CallExpression","start":2653,"end":2678,"loc":{"start":{"line":42,"column":9},"end":{"line":42,"column":34}},"callee":{"type":"Identifier","start":2653,"end":2661,"loc":{"start":{"line":42,"column":9},"end":{"line":42,"column":17}},"name":"debounce"},"arguments":[{"type":"Identifier","start":2662,"end":2672,"loc":{"start":{"line":42,"column":18},"end":{"line":42,"column":28}},"name":"superFocus"},{"type":"Literal","start":2674,"end":2677,"loc":{"start":{"line":42,"column":30},"end":{"line":42,"column":33}},"value":260,"raw":"260"}]},"comments":[{"type":"Line","value":" ___Why do we need to debounce?","start":2127,"end":2160,"loc":{"start":{"line":37,"column":2},"end":{"line":37,"column":35}}},{"type":"Line","value":"    1. To deal with animations: overlay changes via animations, which results in the DOM updating AFTER plugin.update() already executed.","start":2163,"end":2302,"loc":{"start":{"line":38,"column":2},"end":{"line":38,"column":141}}},{"type":"Line","value":"    [Practical check] without debounce, if we open the Url overlay, and click 'Done', Dashboard won't get focused again.","start":2305,"end":2427,"loc":{"start":{"line":39,"column":2},"end":{"line":39,"column":124}}},{"type":"Line","value":"    [Practical check] if we delay 250ms instead of 260ms - IE11 won't get focused in same situation.","start":2430,"end":2532,"loc":{"start":{"line":40,"column":2},"end":{"line":40,"column":104}}},{"type":"Line","value":"    2. Performance: there can be many state update()s in a second, and this function is called every time.","start":2535,"end":2643,"loc":{"start":{"line":41,"column":2},"end":{"line":41,"column":110}}}]}]}}},"comments":[{"type":"Block","value":"\n  Focuses on some element in the currently topmost overlay.\n\n  1. If there are some [data-uppy-super-focusable] elements rendered already - focuses on the first superfocusable element, and leaves focus up to the control of a user (until currently focused element disappears from the screen [which can happen when overlay changes, or, e.g., when we click on a folder in googledrive]).\n  2. If there are no [data-uppy-super-focusable] elements yet (or ever) - focuses on the first focusable element, but switches focus if superfocusable elements appear on next render.\n","start":177,"end":749,"loc":{"start":{"line":5,"column":0},"end":{"line":10,"column":2}}}]}],"sourceType":"script"}