{"type":"Program","start":0,"end":3010,"loc":{"start":{"line":1,"column":0},"end":{"line":63,"column":2}},"body":[{"type":"VariableDeclaration","start":0,"end":49,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":49}},"declarations":[{"type":"VariableDeclarator","start":4,"end":48,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":48}},"id":{"type":"Identifier","start":4,"end":11,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":11}},"name":"toArray"},"init":{"type":"CallExpression","start":14,"end":48,"loc":{"start":{"line":1,"column":14},"end":{"line":1,"column":48}},"callee":{"type":"Identifier","start":14,"end":21,"loc":{"start":{"line":1,"column":14},"end":{"line":1,"column":21}},"name":"require"},"arguments":[{"type":"Literal","start":22,"end":47,"loc":{"start":{"line":1,"column":22},"end":{"line":1,"column":47}},"value":"@uppy/utils/lib/toArray","raw":"'@uppy/utils/lib/toArray'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":51,"end":108,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":57}},"declarations":[{"type":"VariableDeclarator","start":55,"end":107,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":56}},"id":{"type":"Identifier","start":55,"end":73,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":22}},"name":"getActiveOverlayEl"},"init":{"type":"CallExpression","start":76,"end":107,"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":56}},"callee":{"type":"Identifier","start":76,"end":83,"loc":{"start":{"line":3,"column":25},"end":{"line":3,"column":32}},"name":"require"},"arguments":[{"type":"Literal","start":84,"end":106,"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":55}},"value":"./getActiveOverlayEl","raw":"'./getActiveOverlayEl'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":110,"end":182,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":72}},"declarations":[{"type":"VariableDeclarator","start":114,"end":181,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":71}},"id":{"type":"Identifier","start":114,"end":132,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":22}},"name":"FOCUSABLE_ELEMENTS"},"init":{"type":"CallExpression","start":135,"end":181,"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":71}},"callee":{"type":"Identifier","start":135,"end":142,"loc":{"start":{"line":5,"column":25},"end":{"line":5,"column":32}},"name":"require"},"arguments":[{"type":"Literal","start":143,"end":180,"loc":{"start":{"line":5,"column":33},"end":{"line":5,"column":70}},"value":"@uppy/utils/lib//FOCUSABLE_ELEMENTS","raw":"'@uppy/utils/lib//FOCUSABLE_ELEMENTS'"}]}}],"kind":"var"},{"type":"FunctionDeclaration","start":184,"end":315,"loc":{"start":{"line":7,"column":0},"end":{"line":14,"column":1}},"id":{"type":"Identifier","start":193,"end":209,"loc":{"start":{"line":7,"column":9},"end":{"line":7,"column":25}},"name":"focusOnFirstNode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":210,"end":215,"loc":{"start":{"line":7,"column":26},"end":{"line":7,"column":31}},"name":"event"},{"type":"Identifier","start":217,"end":222,"loc":{"start":{"line":7,"column":33},"end":{"line":7,"column":38}},"name":"nodes"}],"body":{"type":"BlockStatement","start":224,"end":315,"loc":{"start":{"line":7,"column":40},"end":{"line":14,"column":1}},"body":[{"type":"VariableDeclaration","start":228,"end":248,"loc":{"start":{"line":8,"column":2},"end":{"line":8,"column":22}},"declarations":[{"type":"VariableDeclarator","start":232,"end":247,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":21}},"id":{"type":"Identifier","start":232,"end":236,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":10}},"name":"node"},"init":{"type":"MemberExpression","start":239,"end":247,"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":21}},"object":{"type":"Identifier","start":239,"end":244,"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":18}},"name":"nodes"},"property":{"type":"Literal","start":245,"end":246,"loc":{"start":{"line":8,"column":19},"end":{"line":8,"column":20}},"value":0,"raw":"0"},"computed":true}}],"kind":"var"},{"type":"IfStatement","start":252,"end":313,"loc":{"start":{"line":10,"column":2},"end":{"line":13,"column":3}},"test":{"type":"Identifier","start":256,"end":260,"loc":{"start":{"line":10,"column":6},"end":{"line":10,"column":10}},"name":"node"},"consequent":{"type":"BlockStatement","start":262,"end":313,"loc":{"start":{"line":10,"column":12},"end":{"line":13,"column":3}},"body":[{"type":"ExpressionStatement","start":268,"end":281,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"expression":{"type":"CallExpression","start":268,"end":280,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":16}},"callee":{"type":"MemberExpression","start":268,"end":278,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":14}},"object":{"type":"Identifier","start":268,"end":272,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":8}},"name":"node"},"property":{"type":"Identifier","start":273,"end":278,"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":14}},"name":"focus"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":286,"end":309,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":27}},"expression":{"type":"CallExpression","start":286,"end":308,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":26}},"callee":{"type":"MemberExpression","start":286,"end":306,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":24}},"object":{"type":"Identifier","start":286,"end":291,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":9}},"name":"event"},"property":{"type":"Identifier","start":292,"end":306,"loc":{"start":{"line":12,"column":10},"end":{"line":12,"column":24}},"name":"preventDefault"},"computed":false},"arguments":[]}}]},"alternate":null}]}},{"type":"FunctionDeclaration","start":317,"end":462,"loc":{"start":{"line":16,"column":0},"end":{"line":23,"column":1}},"id":{"type":"Identifier","start":326,"end":341,"loc":{"start":{"line":16,"column":9},"end":{"line":16,"column":24}},"name":"focusOnLastNode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":342,"end":347,"loc":{"start":{"line":16,"column":25},"end":{"line":16,"column":30}},"name":"event"},{"type":"Identifier","start":349,"end":354,"loc":{"start":{"line":16,"column":32},"end":{"line":16,"column":37}},"name":"nodes"}],"body":{"type":"BlockStatement","start":356,"end":462,"loc":{"start":{"line":16,"column":39},"end":{"line":23,"column":1}},"body":[{"type":"VariableDeclaration","start":360,"end":395,"loc":{"start":{"line":17,"column":2},"end":{"line":17,"column":37}},"declarations":[{"type":"VariableDeclarator","start":364,"end":394,"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":36}},"id":{"type":"Identifier","start":364,"end":368,"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":10}},"name":"node"},"init":{"type":"MemberExpression","start":371,"end":394,"loc":{"start":{"line":17,"column":13},"end":{"line":17,"column":36}},"object":{"type":"Identifier","start":371,"end":376,"loc":{"start":{"line":17,"column":13},"end":{"line":17,"column":18}},"name":"nodes"},"property":{"type":"BinaryExpression","start":377,"end":393,"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":35}},"left":{"type":"MemberExpression","start":377,"end":389,"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":31}},"object":{"type":"Identifier","start":377,"end":382,"loc":{"start":{"line":17,"column":19},"end":{"line":17,"column":24}},"name":"nodes"},"property":{"type":"Identifier","start":383,"end":389,"loc":{"start":{"line":17,"column":25},"end":{"line":17,"column":31}},"name":"length"},"computed":false},"operator":"-","right":{"type":"Literal","start":392,"end":393,"loc":{"start":{"line":17,"column":34},"end":{"line":17,"column":35}},"value":1,"raw":"1"}},"computed":true}}],"kind":"var"},{"type":"IfStatement","start":399,"end":460,"loc":{"start":{"line":19,"column":2},"end":{"line":22,"column":3}},"test":{"type":"Identifier","start":403,"end":407,"loc":{"start":{"line":19,"column":6},"end":{"line":19,"column":10}},"name":"node"},"consequent":{"type":"BlockStatement","start":409,"end":460,"loc":{"start":{"line":19,"column":12},"end":{"line":22,"column":3}},"body":[{"type":"ExpressionStatement","start":415,"end":428,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":17}},"expression":{"type":"CallExpression","start":415,"end":427,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":16}},"callee":{"type":"MemberExpression","start":415,"end":425,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":14}},"object":{"type":"Identifier","start":415,"end":419,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":8}},"name":"node"},"property":{"type":"Identifier","start":420,"end":425,"loc":{"start":{"line":20,"column":9},"end":{"line":20,"column":14}},"name":"focus"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":433,"end":456,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":27}},"expression":{"type":"CallExpression","start":433,"end":455,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":26}},"callee":{"type":"MemberExpression","start":433,"end":453,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":24}},"object":{"type":"Identifier","start":433,"end":438,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":9}},"name":"event"},"property":{"type":"Identifier","start":439,"end":453,"loc":{"start":{"line":21,"column":10},"end":{"line":21,"column":24}},"name":"preventDefault"},"computed":false},"arguments":[]}}]},"alternate":null}]},"comments":[{"type":"Line","value":" ___Why not just use (focusedItemIndex === -1)?","start":463,"end":512,"loc":{"start":{"line":23,"column":2},"end":{"line":23,"column":51}}}]},{"type":"FunctionDeclaration","start":906,"end":1011,"loc":{"start":{"line":28,"column":0},"end":{"line":30,"column":1}},"id":{"type":"Identifier","start":915,"end":931,"loc":{"start":{"line":28,"column":9},"end":{"line":28,"column":25}},"name":"isFocusInOverlay"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":932,"end":947,"loc":{"start":{"line":28,"column":26},"end":{"line":28,"column":41}},"name":"activeOverlayEl"}],"body":{"type":"BlockStatement","start":949,"end":1011,"loc":{"start":{"line":28,"column":43},"end":{"line":30,"column":1}},"body":[{"type":"ReturnStatement","start":953,"end":1009,"loc":{"start":{"line":29,"column":2},"end":{"line":29,"column":58}},"argument":{"type":"CallExpression","start":960,"end":1008,"loc":{"start":{"line":29,"column":9},"end":{"line":29,"column":57}},"callee":{"type":"MemberExpression","start":960,"end":984,"loc":{"start":{"line":29,"column":9},"end":{"line":29,"column":33}},"object":{"type":"Identifier","start":960,"end":975,"loc":{"start":{"line":29,"column":9},"end":{"line":29,"column":24}},"name":"activeOverlayEl"},"property":{"type":"Identifier","start":976,"end":984,"loc":{"start":{"line":29,"column":25},"end":{"line":29,"column":33}},"name":"contains"},"computed":false},"arguments":[{"type":"MemberExpression","start":985,"end":1007,"loc":{"start":{"line":29,"column":34},"end":{"line":29,"column":56}},"object":{"type":"Identifier","start":985,"end":993,"loc":{"start":{"line":29,"column":34},"end":{"line":29,"column":42}},"name":"document"},"property":{"type":"Identifier","start":994,"end":1007,"loc":{"start":{"line":29,"column":43},"end":{"line":29,"column":56}},"name":"activeElement"},"computed":false}]}}]},"comments":[{"type":"Line","value":"    Firefox thinks <ul> is focusable, but we don't have <ul>s in our FOCUSABLE_ELEMENTS. Which means that if we tab into the <ul>, code will think that we are not in the active overlay, and we should focusOnFirstNode() of the currently active overlay!","start":513,"end":766,"loc":{"start":{"line":24,"column":0},"end":{"line":24,"column":253}}},{"type":"Line","value":"    [Practical check] if we use (focusedItemIndex === -1), instagram provider in firefox will never get focus on its pics in the <ul>.","start":767,"end":903,"loc":{"start":{"line":25,"column":0},"end":{"line":25,"column":136}}}]},{"type":"FunctionDeclaration","start":1013,"end":2042,"loc":{"start":{"line":32,"column":0},"end":{"line":45,"column":1}},"id":{"type":"Identifier","start":1022,"end":1031,"loc":{"start":{"line":32,"column":9},"end":{"line":32,"column":18}},"name":"trapFocus"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1032,"end":1037,"loc":{"start":{"line":32,"column":19},"end":{"line":32,"column":24}},"name":"event"},{"type":"Identifier","start":1039,"end":1056,"loc":{"start":{"line":32,"column":26},"end":{"line":32,"column":43}},"name":"activeOverlayType"},{"type":"Identifier","start":1058,"end":1069,"loc":{"start":{"line":32,"column":45},"end":{"line":32,"column":56}},"name":"dashboardEl"}],"body":{"type":"BlockStatement","start":1071,"end":2042,"loc":{"start":{"line":32,"column":58},"end":{"line":45,"column":1}},"body":[{"type":"VariableDeclaration","start":1075,"end":1148,"loc":{"start":{"line":33,"column":2},"end":{"line":33,"column":75}},"declarations":[{"type":"VariableDeclarator","start":1079,"end":1147,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":74}},"id":{"type":"Identifier","start":1079,"end":1094,"loc":{"start":{"line":33,"column":6},"end":{"line":33,"column":21}},"name":"activeOverlayEl"},"init":{"type":"CallExpression","start":1097,"end":1147,"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":74}},"callee":{"type":"Identifier","start":1097,"end":1115,"loc":{"start":{"line":33,"column":24},"end":{"line":33,"column":42}},"name":"getActiveOverlayEl"},"arguments":[{"type":"Identifier","start":1116,"end":1127,"loc":{"start":{"line":33,"column":43},"end":{"line":33,"column":54}},"name":"dashboardEl"},{"type":"Identifier","start":1129,"end":1146,"loc":{"start":{"line":33,"column":56},"end":{"line":33,"column":73}},"name":"activeOverlayType"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":1151,"end":1234,"loc":{"start":{"line":34,"column":2},"end":{"line":34,"column":85}},"declarations":[{"type":"VariableDeclarator","start":1155,"end":1233,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":84}},"id":{"type":"Identifier","start":1155,"end":1169,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":20}},"name":"focusableNodes"},"init":{"type":"CallExpression","start":1172,"end":1233,"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":84}},"callee":{"type":"Identifier","start":1172,"end":1179,"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":30}},"name":"toArray"},"arguments":[{"type":"CallExpression","start":1180,"end":1232,"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":83}},"callee":{"type":"MemberExpression","start":1180,"end":1212,"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":63}},"object":{"type":"Identifier","start":1180,"end":1195,"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":46}},"name":"activeOverlayEl"},"property":{"type":"Identifier","start":1196,"end":1212,"loc":{"start":{"line":34,"column":47},"end":{"line":34,"column":63}},"name":"querySelectorAll"},"computed":false},"arguments":[{"type":"Identifier","start":1213,"end":1231,"loc":{"start":{"line":34,"column":64},"end":{"line":34,"column":82}},"name":"FOCUSABLE_ELEMENTS"}]}]}}],"kind":"var"},{"type":"VariableDeclaration","start":1237,"end":1307,"loc":{"start":{"line":35,"column":2},"end":{"line":35,"column":72}},"declarations":[{"type":"VariableDeclarator","start":1241,"end":1306,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":71}},"id":{"type":"Identifier","start":1241,"end":1257,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":22}},"name":"focusedItemIndex"},"init":{"type":"CallExpression","start":1260,"end":1306,"loc":{"start":{"line":35,"column":25},"end":{"line":35,"column":71}},"callee":{"type":"MemberExpression","start":1260,"end":1282,"loc":{"start":{"line":35,"column":25},"end":{"line":35,"column":47}},"object":{"type":"Identifier","start":1260,"end":1274,"loc":{"start":{"line":35,"column":25},"end":{"line":35,"column":39}},"name":"focusableNodes"},"property":{"type":"Identifier","start":1275,"end":1282,"loc":{"start":{"line":35,"column":40},"end":{"line":35,"column":47}},"name":"indexOf"},"computed":false},"arguments":[{"type":"MemberExpression","start":1283,"end":1305,"loc":{"start":{"line":35,"column":48},"end":{"line":35,"column":70}},"object":{"type":"Identifier","start":1283,"end":1291,"loc":{"start":{"line":35,"column":48},"end":{"line":35,"column":56}},"name":"document"},"property":{"type":"Identifier","start":1292,"end":1305,"loc":{"start":{"line":35,"column":57},"end":{"line":35,"column":70}},"name":"activeElement"},"computed":false}]}}],"kind":"var","comments":[{"type":"Line","value":" If we pressed tab, and focus is not yet within the current overlay - focus on the first element within the current overlay.","start":1308,"end":1434,"loc":{"start":{"line":35,"column":73},"end":{"line":35,"column":199}}}]},{"type":"IfStatement","start":1585,"end":2040,"loc":{"start":{"line":38,"column":2},"end":{"line":44,"column":3}},"test":{"type":"UnaryExpression","start":1589,"end":1623,"loc":{"start":{"line":38,"column":6},"end":{"line":38,"column":40}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1590,"end":1623,"loc":{"start":{"line":38,"column":7},"end":{"line":38,"column":40}},"callee":{"type":"Identifier","start":1590,"end":1606,"loc":{"start":{"line":38,"column":7},"end":{"line":38,"column":23}},"name":"isFocusInOverlay"},"arguments":[{"type":"Identifier","start":1607,"end":1622,"loc":{"start":{"line":38,"column":24},"end":{"line":38,"column":39}},"name":"activeOverlayEl"}]}},"consequent":{"type":"BlockStatement","start":1625,"end":1747,"loc":{"start":{"line":38,"column":42},"end":{"line":40,"column":3}},"body":[{"type":"ExpressionStatement","start":1631,"end":1671,"loc":{"start":{"line":39,"column":4},"end":{"line":39,"column":44}},"expression":{"type":"CallExpression","start":1631,"end":1670,"loc":{"start":{"line":39,"column":4},"end":{"line":39,"column":43}},"callee":{"type":"Identifier","start":1631,"end":1647,"loc":{"start":{"line":39,"column":4},"end":{"line":39,"column":20}},"name":"focusOnFirstNode"},"arguments":[{"type":"Identifier","start":1648,"end":1653,"loc":{"start":{"line":39,"column":21},"end":{"line":39,"column":26}},"name":"event"},{"type":"Identifier","start":1655,"end":1669,"loc":{"start":{"line":39,"column":28},"end":{"line":39,"column":42}},"name":"focusableNodes"}]},"comments":[{"type":"Line","value":" If we pressed shift + tab, and we're on the first element of a modal","start":1672,"end":1743,"loc":{"start":{"line":39,"column":45},"end":{"line":39,"column":116}}}]}]},"alternate":{"type":"IfStatement","start":1753,"end":2040,"loc":{"start":{"line":40,"column":9},"end":{"line":44,"column":3}},"test":{"type":"LogicalExpression","start":1757,"end":1797,"loc":{"start":{"line":40,"column":13},"end":{"line":40,"column":53}},"left":{"type":"MemberExpression","start":1757,"end":1771,"loc":{"start":{"line":40,"column":13},"end":{"line":40,"column":27}},"object":{"type":"Identifier","start":1757,"end":1762,"loc":{"start":{"line":40,"column":13},"end":{"line":40,"column":18}},"name":"event"},"property":{"type":"Identifier","start":1763,"end":1771,"loc":{"start":{"line":40,"column":19},"end":{"line":40,"column":27}},"name":"shiftKey"},"computed":false},"operator":"&&","right":{"type":"BinaryExpression","start":1775,"end":1797,"loc":{"start":{"line":40,"column":31},"end":{"line":40,"column":53}},"left":{"type":"Identifier","start":1775,"end":1791,"loc":{"start":{"line":40,"column":31},"end":{"line":40,"column":47}},"name":"focusedItemIndex"},"operator":"===","right":{"type":"Literal","start":1796,"end":1797,"loc":{"start":{"line":40,"column":52},"end":{"line":40,"column":53}},"value":0,"raw":"0"}}},"consequent":{"type":"BlockStatement","start":1799,"end":1913,"loc":{"start":{"line":40,"column":55},"end":{"line":42,"column":3}},"body":[{"type":"ExpressionStatement","start":1805,"end":1844,"loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":43}},"expression":{"type":"CallExpression","start":1805,"end":1843,"loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":42}},"callee":{"type":"Identifier","start":1805,"end":1820,"loc":{"start":{"line":41,"column":4},"end":{"line":41,"column":19}},"name":"focusOnLastNode"},"arguments":[{"type":"Identifier","start":1821,"end":1826,"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":25}},"name":"event"},{"type":"Identifier","start":1828,"end":1842,"loc":{"start":{"line":41,"column":27},"end":{"line":41,"column":41}},"name":"focusableNodes"}]},"comments":[{"type":"Line","value":" If we pressed tab, and we're on the last element of the modal","start":1845,"end":1909,"loc":{"start":{"line":41,"column":44},"end":{"line":41,"column":108}}}]}]},"alternate":{"type":"IfStatement","start":1919,"end":2040,"loc":{"start":{"line":42,"column":9},"end":{"line":44,"column":3}},"test":{"type":"LogicalExpression","start":1923,"end":1988,"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":78}},"left":{"type":"UnaryExpression","start":1923,"end":1938,"loc":{"start":{"line":42,"column":13},"end":{"line":42,"column":28}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1924,"end":1938,"loc":{"start":{"line":42,"column":14},"end":{"line":42,"column":28}},"object":{"type":"Identifier","start":1924,"end":1929,"loc":{"start":{"line":42,"column":14},"end":{"line":42,"column":19}},"name":"event"},"property":{"type":"Identifier","start":1930,"end":1938,"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":28}},"name":"shiftKey"},"computed":false}},"operator":"&&","right":{"type":"BinaryExpression","start":1942,"end":1988,"loc":{"start":{"line":42,"column":32},"end":{"line":42,"column":78}},"left":{"type":"Identifier","start":1942,"end":1958,"loc":{"start":{"line":42,"column":32},"end":{"line":42,"column":48}},"name":"focusedItemIndex"},"operator":"===","right":{"type":"BinaryExpression","start":1963,"end":1988,"loc":{"start":{"line":42,"column":53},"end":{"line":42,"column":78}},"left":{"type":"MemberExpression","start":1963,"end":1984,"loc":{"start":{"line":42,"column":53},"end":{"line":42,"column":74}},"object":{"type":"Identifier","start":1963,"end":1977,"loc":{"start":{"line":42,"column":53},"end":{"line":42,"column":67}},"name":"focusableNodes"},"property":{"type":"Identifier","start":1978,"end":1984,"loc":{"start":{"line":42,"column":68},"end":{"line":42,"column":74}},"name":"length"},"computed":false},"operator":"-","right":{"type":"Literal","start":1987,"end":1988,"loc":{"start":{"line":42,"column":77},"end":{"line":42,"column":78}},"value":1,"raw":"1"}}}},"consequent":{"type":"BlockStatement","start":1990,"end":2040,"loc":{"start":{"line":42,"column":80},"end":{"line":44,"column":3}},"body":[{"type":"ExpressionStatement","start":1996,"end":2036,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":44}},"expression":{"type":"CallExpression","start":1996,"end":2035,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":43}},"callee":{"type":"Identifier","start":1996,"end":2012,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":20}},"name":"focusOnFirstNode"},"arguments":[{"type":"Identifier","start":2013,"end":2018,"loc":{"start":{"line":43,"column":21},"end":{"line":43,"column":26}},"name":"event"},{"type":"Identifier","start":2020,"end":2034,"loc":{"start":{"line":43,"column":28},"end":{"line":43,"column":42}},"name":"focusableNodes"}]}}]},"alternate":null}},"comments":[{"type":"Line","value":" This is a safety measure (for when user returns from another tab e.g.), most plugins will try to focus on some important element as it loads.","start":1437,"end":1581,"loc":{"start":{"line":36,"column":2},"end":{"line":36,"column":146}}}]}]}},{"type":"ExpressionStatement","start":2044,"end":3010,"loc":{"start":{"line":47,"column":0},"end":{"line":63,"column":2}},"expression":{"type":"AssignmentExpression","start":2044,"end":3009,"loc":{"start":{"line":47,"column":0},"end":{"line":63,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":2044,"end":2058,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":14}},"object":{"type":"Identifier","start":2044,"end":2050,"loc":{"start":{"line":47,"column":0},"end":{"line":47,"column":6}},"name":"module"},"property":{"type":"Identifier","start":2051,"end":2058,"loc":{"start":{"line":47,"column":7},"end":{"line":47,"column":14}},"name":"exports"},"computed":false},"right":{"type":"ObjectExpression","start":2061,"end":3009,"loc":{"start":{"line":47,"column":17},"end":{"line":63,"column":1}},"properties":[{"type":"Property","start":2199,"end":2325,"loc":{"start":{"line":49,"column":2},"end":{"line":51,"column":3}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2199,"end":2207,"loc":{"start":{"line":49,"column":2},"end":{"line":49,"column":10}},"name":"forModal"},"value":{"type":"FunctionExpression","start":2209,"end":2325,"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":3}},"id":{"type":"Identifier","start":2218,"end":2226,"loc":{"start":{"line":49,"column":21},"end":{"line":49,"column":29}},"name":"forModal"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2227,"end":2232,"loc":{"start":{"line":49,"column":30},"end":{"line":49,"column":35}},"name":"event"},{"type":"Identifier","start":2234,"end":2251,"loc":{"start":{"line":49,"column":37},"end":{"line":49,"column":54}},"name":"activeOverlayType"},{"type":"Identifier","start":2253,"end":2264,"loc":{"start":{"line":49,"column":56},"end":{"line":49,"column":67}},"name":"dashboardEl"}],"body":{"type":"BlockStatement","start":2266,"end":2325,"loc":{"start":{"line":49,"column":69},"end":{"line":51,"column":3}},"body":[{"type":"ExpressionStatement","start":2272,"end":2321,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":53}},"expression":{"type":"CallExpression","start":2272,"end":2320,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":52}},"callee":{"type":"Identifier","start":2272,"end":2281,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":13}},"name":"trapFocus"},"arguments":[{"type":"Identifier","start":2282,"end":2287,"loc":{"start":{"line":50,"column":14},"end":{"line":50,"column":19}},"name":"event"},{"type":"Identifier","start":2289,"end":2306,"loc":{"start":{"line":50,"column":21},"end":{"line":50,"column":38}},"name":"activeOverlayType"},{"type":"Identifier","start":2308,"end":2319,"loc":{"start":{"line":50,"column":40},"end":{"line":50,"column":51}},"name":"dashboardEl"}]}}]}},"kind":"init","comments":[{"type":"Line","value":" Traps focus inside of the currently open overlay (e.g. Dashboard, or e.g. Instagram), never lets focus disappear from the modal.","start":2065,"end":2196,"loc":{"start":{"line":48,"column":2},"end":{"line":48,"column":133}}}]},{"type":"Property","start":2437,"end":3007,"loc":{"start":{"line":53,"column":2},"end":{"line":62,"column":3}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2437,"end":2446,"loc":{"start":{"line":53,"column":2},"end":{"line":53,"column":11}},"name":"forInline"},"value":{"type":"FunctionExpression","start":2448,"end":3007,"loc":{"start":{"line":53,"column":13},"end":{"line":62,"column":3}},"id":{"type":"Identifier","start":2457,"end":2466,"loc":{"start":{"line":53,"column":22},"end":{"line":53,"column":31}},"name":"forInline"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2467,"end":2472,"loc":{"start":{"line":53,"column":32},"end":{"line":53,"column":37}},"name":"event"},{"type":"Identifier","start":2474,"end":2491,"loc":{"start":{"line":53,"column":39},"end":{"line":53,"column":56}},"name":"activeOverlayType"},{"type":"Identifier","start":2493,"end":2504,"loc":{"start":{"line":53,"column":58},"end":{"line":53,"column":69}},"name":"dashboardEl"}],"body":{"type":"BlockStatement","start":2506,"end":3007,"loc":{"start":{"line":53,"column":71},"end":{"line":62,"column":3}},"body":[{"type":"IfStatement","start":2600,"end":3003,"loc":{"start":{"line":55,"column":4},"end":{"line":61,"column":5}},"test":{"type":"BinaryExpression","start":2604,"end":2630,"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":34}},"left":{"type":"Identifier","start":2604,"end":2621,"loc":{"start":{"line":55,"column":8},"end":{"line":55,"column":25}},"name":"activeOverlayType"},"operator":"===","right":{"type":"Literal","start":2626,"end":2630,"loc":{"start":{"line":55,"column":30},"end":{"line":55,"column":34}},"value":null,"raw":"null"}},"consequent":{"type":"BlockStatement","start":2632,"end":2799,"loc":{"start":{"line":55,"column":36},"end":{"line":57,"column":5}},"body":[],"comments":[{"type":"Line","value":" Do nothing and let the browser handle it, user can tab away from Uppy to other elements on the page","start":2633,"end":2735,"loc":{"start":{"line":55,"column":37},"end":{"line":55,"column":139}}},{"type":"Line","value":" ___When there is some overlay with 'Done' button","start":2742,"end":2793,"loc":{"start":{"line":56,"column":6},"end":{"line":56,"column":57}}}]},"alternate":{"type":"BlockStatement","start":2805,"end":3003,"loc":{"start":{"line":57,"column":11},"end":{"line":61,"column":5}},"body":[{"type":"ExpressionStatement","start":2948,"end":2997,"loc":{"start":{"line":60,"column":6},"end":{"line":60,"column":55}},"expression":{"type":"CallExpression","start":2948,"end":2996,"loc":{"start":{"line":60,"column":6},"end":{"line":60,"column":54}},"callee":{"type":"Identifier","start":2948,"end":2957,"loc":{"start":{"line":60,"column":6},"end":{"line":60,"column":15}},"name":"trapFocus"},"arguments":[{"type":"Identifier","start":2958,"end":2963,"loc":{"start":{"line":60,"column":16},"end":{"line":60,"column":21}},"name":"event"},{"type":"Identifier","start":2965,"end":2982,"loc":{"start":{"line":60,"column":23},"end":{"line":60,"column":40}},"name":"activeOverlayType"},{"type":"Identifier","start":2984,"end":2995,"loc":{"start":{"line":60,"column":42},"end":{"line":60,"column":53}},"name":"dashboardEl"}]},"comments":[{"type":"Line","value":" Trap the focus inside this overlay!","start":2813,"end":2851,"loc":{"start":{"line":58,"column":6},"end":{"line":58,"column":44}}},{"type":"Line","value":" User can close the overlay (click 'Done') if they want to travel away from Uppy.","start":2858,"end":2941,"loc":{"start":{"line":59,"column":6},"end":{"line":59,"column":89}}}]}]},"comments":[{"type":"Line","value":" ___When we're in the bare 'Drop files here, paste, browse or import from' screen","start":2512,"end":2595,"loc":{"start":{"line":54,"column":4},"end":{"line":54,"column":87}}}]}]}},"kind":"init","comments":[{"type":"Line","value":" Traps focus inside of the currently open overlay, unless overlay is null - then let the user tab away.","start":2329,"end":2434,"loc":{"start":{"line":52,"column":2},"end":{"line":52,"column":107}}}]}]}}}],"sourceType":"script"}