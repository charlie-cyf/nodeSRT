{"type":"Program","start":0,"end":1813,"loc":{"start":{"line":1,"column":0},"end":{"line":86,"column":0}},"body":[{"type":"FunctionDeclaration","start":60,"end":319,"loc":{"start":{"line":4,"column":0},"end":{"line":13,"column":1}},"id":{"type":"Identifier","start":69,"end":86,"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":26}},"name":"findUppyInstances"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":90,"end":319,"loc":{"start":{"line":4,"column":30},"end":{"line":13,"column":1}},"body":[{"type":"VariableDeclaration","start":94,"end":114,"loc":{"start":{"line":5,"column":2},"end":{"line":5,"column":22}},"declarations":[{"type":"VariableDeclarator","start":100,"end":114,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":22}},"id":{"type":"Identifier","start":100,"end":109,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":17}},"name":"instances"},"init":{"type":"ArrayExpression","start":112,"end":114,"loc":{"start":{"line":5,"column":20},"end":{"line":5,"column":22}},"elements":[]}}],"kind":"const"},{"type":"ForStatement","start":117,"end":298,"loc":{"start":{"line":6,"column":2},"end":{"line":11,"column":3}},"init":{"type":"VariableDeclaration","start":122,"end":131,"loc":{"start":{"line":6,"column":7},"end":{"line":6,"column":16}},"declarations":[{"type":"VariableDeclarator","start":126,"end":131,"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},"id":{"type":"Identifier","start":126,"end":127,"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":12}},"name":"i"},"init":{"type":"Literal","start":130,"end":131,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":16}},"value":0,"raw":"0"}}],"kind":"let"},"test":{"type":"BinaryExpression","start":133,"end":156,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":41}},"left":{"type":"Identifier","start":133,"end":134,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":19}},"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":137,"end":156,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":41}},"object":{"type":"Identifier","start":137,"end":149,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":34}},"name":"localStorage"},"property":{"type":"Identifier","start":150,"end":156,"loc":{"start":{"line":6,"column":35},"end":{"line":6,"column":41}},"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":158,"end":161,"loc":{"start":{"line":6,"column":43},"end":{"line":6,"column":46}},"operator":"++","prefix":false,"argument":{"type":"Identifier","start":158,"end":159,"loc":{"start":{"line":6,"column":43},"end":{"line":6,"column":44}},"name":"i"}},"body":{"type":"BlockStatement","start":163,"end":298,"loc":{"start":{"line":6,"column":48},"end":{"line":11,"column":3}},"body":[{"type":"VariableDeclaration","start":169,"end":200,"loc":{"start":{"line":7,"column":4},"end":{"line":7,"column":35}},"declarations":[{"type":"VariableDeclarator","start":175,"end":200,"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":35}},"id":{"type":"Identifier","start":175,"end":178,"loc":{"start":{"line":7,"column":10},"end":{"line":7,"column":13}},"name":"key"},"init":{"type":"CallExpression","start":181,"end":200,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":35}},"callee":{"type":"MemberExpression","start":181,"end":197,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":32}},"object":{"type":"Identifier","start":181,"end":193,"loc":{"start":{"line":7,"column":16},"end":{"line":7,"column":28}},"name":"localStorage"},"property":{"type":"Identifier","start":194,"end":197,"loc":{"start":{"line":7,"column":29},"end":{"line":7,"column":32}},"name":"key"},"computed":false},"arguments":[{"type":"Identifier","start":198,"end":199,"loc":{"start":{"line":7,"column":33},"end":{"line":7,"column":34}},"name":"i"}]}}],"kind":"const"},{"type":"IfStatement","start":205,"end":294,"loc":{"start":{"line":8,"column":4},"end":{"line":10,"column":5}},"test":{"type":"CallExpression","start":209,"end":232,"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"callee":{"type":"MemberExpression","start":209,"end":227,"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":26}},"object":{"type":"Literal","start":209,"end":222,"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":21}},"value":{},"raw":"/^uppyState:/","regex":{"pattern":"^uppyState:","flags":""}},"property":{"type":"Identifier","start":223,"end":227,"loc":{"start":{"line":8,"column":22},"end":{"line":8,"column":26}},"name":"test"},"computed":false},"arguments":[{"type":"Identifier","start":228,"end":231,"loc":{"start":{"line":8,"column":27},"end":{"line":8,"column":30}},"name":"key"}]},"consequent":{"type":"BlockStatement","start":234,"end":294,"loc":{"start":{"line":8,"column":33},"end":{"line":10,"column":5}},"body":[{"type":"ExpressionStatement","start":242,"end":288,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":52}},"expression":{"type":"CallExpression","start":242,"end":288,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":52}},"callee":{"type":"MemberExpression","start":242,"end":256,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":20}},"object":{"type":"Identifier","start":242,"end":251,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":15}},"name":"instances"},"property":{"type":"Identifier","start":252,"end":256,"loc":{"start":{"line":9,"column":16},"end":{"line":9,"column":20}},"name":"push"},"computed":false},"arguments":[{"type":"CallExpression","start":257,"end":287,"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":51}},"callee":{"type":"MemberExpression","start":257,"end":266,"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":30}},"object":{"type":"Identifier","start":257,"end":260,"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":24}},"name":"key"},"property":{"type":"Identifier","start":261,"end":266,"loc":{"start":{"line":9,"column":25},"end":{"line":9,"column":30}},"name":"slice"},"computed":false},"arguments":[{"type":"MemberExpression","start":267,"end":286,"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":50}},"object":{"type":"Literal","start":267,"end":279,"loc":{"start":{"line":9,"column":31},"end":{"line":9,"column":43}},"value":"uppyState:","raw":"'uppyState:'"},"property":{"type":"Identifier","start":280,"end":286,"loc":{"start":{"line":9,"column":44},"end":{"line":9,"column":50}},"name":"length"},"computed":false}]}]}}]},"alternate":null}]}},{"type":"ReturnStatement","start":301,"end":317,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":18}},"argument":{"type":"Identifier","start":308,"end":317,"loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":18}},"name":"instances"}}]}},{"type":"FunctionDeclaration","start":384,"end":486,"loc":{"start":{"line":18,"column":0},"end":{"line":24,"column":1}},"id":{"type":"Identifier","start":393,"end":403,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":19}},"name":"maybeParse"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":405,"end":408,"loc":{"start":{"line":18,"column":21},"end":{"line":18,"column":24}},"name":"str"}],"body":{"type":"BlockStatement","start":410,"end":486,"loc":{"start":{"line":18,"column":26},"end":{"line":24,"column":1}},"body":[{"type":"TryStatement","start":414,"end":484,"loc":{"start":{"line":19,"column":2},"end":{"line":23,"column":3}},"block":{"type":"BlockStatement","start":418,"end":450,"loc":{"start":{"line":19,"column":6},"end":{"line":21,"column":3}},"body":[{"type":"ReturnStatement","start":424,"end":446,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":26}},"argument":{"type":"CallExpression","start":431,"end":446,"loc":{"start":{"line":20,"column":11},"end":{"line":20,"column":26}},"callee":{"type":"MemberExpression","start":431,"end":441,"loc":{"start":{"line":20,"column":11},"end":{"line":20,"column":21}},"object":{"type":"Identifier","start":431,"end":435,"loc":{"start":{"line":20,"column":11},"end":{"line":20,"column":15}},"name":"JSON"},"property":{"type":"Identifier","start":436,"end":441,"loc":{"start":{"line":20,"column":16},"end":{"line":20,"column":21}},"name":"parse"},"computed":false},"arguments":[{"type":"Identifier","start":442,"end":445,"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":25}},"name":"str"}]}}]},"handler":{"type":"CatchClause","start":451,"end":484,"loc":{"start":{"line":21,"column":4},"end":{"line":23,"column":3}},"param":{"type":"Identifier","start":458,"end":461,"loc":{"start":{"line":21,"column":11},"end":{"line":21,"column":14}},"name":"err"},"body":{"type":"BlockStatement","start":463,"end":484,"loc":{"start":{"line":21,"column":16},"end":{"line":23,"column":3}},"body":[{"type":"ReturnStatement","start":469,"end":480,"loc":{"start":{"line":22,"column":4},"end":{"line":22,"column":15}},"argument":{"type":"Literal","start":476,"end":480,"loc":{"start":{"line":22,"column":11},"end":{"line":22,"column":15}},"value":null,"raw":"null"}}]}},"finalizer":null}]},"comments":[{"type":"Block","value":"*\n * Try to JSON-parse a string, return null on failure.\n ","start":321,"end":383,"loc":{"start":{"line":15,"column":0},"end":{"line":17,"column":3}}}]},{"type":"VariableDeclaration","start":488,"end":509,"loc":{"start":{"line":26,"column":0},"end":{"line":26,"column":21}},"declarations":[{"type":"VariableDeclarator","start":492,"end":509,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":21}},"id":{"type":"Identifier","start":492,"end":501,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":13}},"name":"cleanedUp"},"init":{"type":"Literal","start":504,"end":509,"loc":{"start":{"line":26,"column":16},"end":{"line":26,"column":21}},"value":false,"raw":"false"}}],"kind":"let"},{"type":"ExpressionStatement","start":510,"end":1812,"loc":{"start":{"line":27,"column":0},"end":{"line":85,"column":1}},"expression":{"type":"AssignmentExpression","start":510,"end":1812,"loc":{"start":{"line":27,"column":0},"end":{"line":85,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":510,"end":524,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":14}},"object":{"type":"Identifier","start":510,"end":516,"loc":{"start":{"line":27,"column":0},"end":{"line":27,"column":6}},"name":"module"},"property":{"type":"Identifier","start":517,"end":524,"loc":{"start":{"line":27,"column":7},"end":{"line":27,"column":14}},"name":"exports"},"computed":false},"right":{"type":"ClassExpression","start":527,"end":1812,"loc":{"start":{"line":27,"column":17},"end":{"line":85,"column":1}},"id":{"type":"Identifier","start":533,"end":546,"loc":{"start":{"line":27,"column":23},"end":{"line":27,"column":36}},"name":"MetaDataStore"},"superClass":null,"body":{"type":"ClassBody","start":547,"end":1812,"loc":{"start":{"line":27,"column":37},"end":{"line":85,"column":1}},"body":[{"type":"MethodDefinition","start":551,"end":795,"loc":{"start":{"line":28,"column":2},"end":{"line":38,"column":3}},"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":551,"end":562,"loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":13}},"name":"constructor"},"value":{"type":"FunctionExpression","start":563,"end":795,"loc":{"start":{"line":28,"column":14},"end":{"line":38,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":564,"end":568,"loc":{"start":{"line":28,"column":15},"end":{"line":28,"column":19}},"name":"opts"}],"body":{"type":"BlockStatement","start":570,"end":795,"loc":{"start":{"line":28,"column":21},"end":{"line":38,"column":3}},"body":[{"type":"ExpressionStatement","start":576,"end":663,"loc":{"start":{"line":29,"column":4},"end":{"line":31,"column":12}},"expression":{"type":"AssignmentExpression","start":576,"end":663,"loc":{"start":{"line":29,"column":4},"end":{"line":31,"column":12}},"operator":"=","left":{"type":"MemberExpression","start":576,"end":585,"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":13}},"object":{"type":"ThisExpression","start":576,"end":580,"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":8}}},"property":{"type":"Identifier","start":581,"end":585,"loc":{"start":{"line":29,"column":9},"end":{"line":29,"column":13}},"name":"opts"},"computed":false},"right":{"type":"CallExpression","start":588,"end":663,"loc":{"start":{"line":29,"column":16},"end":{"line":31,"column":12}},"callee":{"type":"MemberExpression","start":588,"end":601,"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":29}},"object":{"type":"Identifier","start":588,"end":594,"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":22}},"name":"Object"},"property":{"type":"Identifier","start":595,"end":601,"loc":{"start":{"line":29,"column":23},"end":{"line":29,"column":29}},"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":602,"end":656,"loc":{"start":{"line":29,"column":30},"end":{"line":31,"column":5}},"properties":[{"type":"Property","start":610,"end":638,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":34}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":610,"end":617,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":13}},"name":"expires"},"value":{"type":"BinaryExpression","start":619,"end":638,"loc":{"start":{"line":30,"column":15},"end":{"line":30,"column":34}},"left":{"type":"BinaryExpression","start":619,"end":631,"loc":{"start":{"line":30,"column":15},"end":{"line":30,"column":27}},"left":{"type":"BinaryExpression","start":619,"end":626,"loc":{"start":{"line":30,"column":15},"end":{"line":30,"column":22}},"left":{"type":"Literal","start":619,"end":621,"loc":{"start":{"line":30,"column":15},"end":{"line":30,"column":17}},"value":24,"raw":"24"},"operator":"*","right":{"type":"Literal","start":624,"end":626,"loc":{"start":{"line":30,"column":20},"end":{"line":30,"column":22}},"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":629,"end":631,"loc":{"start":{"line":30,"column":25},"end":{"line":30,"column":27}},"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":634,"end":638,"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":34}},"value":1000,"raw":"1000"}},"kind":"init","comments":[{"type":"Line","value":" 24 hours","start":639,"end":650,"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":46}}}]}]},{"type":"Identifier","start":658,"end":662,"loc":{"start":{"line":31,"column":7},"end":{"line":31,"column":11}},"name":"opts"}]}}},{"type":"ExpressionStatement","start":668,"end":709,"loc":{"start":{"line":32,"column":4},"end":{"line":32,"column":45}},"expression":{"type":"AssignmentExpression","start":668,"end":709,"loc":{"start":{"line":32,"column":4},"end":{"line":32,"column":45}},"operator":"=","left":{"type":"MemberExpression","start":668,"end":677,"loc":{"start":{"line":32,"column":4},"end":{"line":32,"column":13}},"object":{"type":"ThisExpression","start":668,"end":672,"loc":{"start":{"line":32,"column":4},"end":{"line":32,"column":8}}},"property":{"type":"Identifier","start":673,"end":677,"loc":{"start":{"line":32,"column":9},"end":{"line":32,"column":13}},"name":"name"},"computed":false},"right":{"type":"TemplateLiteral","start":680,"end":709,"loc":{"start":{"line":32,"column":16},"end":{"line":32,"column":45}},"expressions":[{"type":"MemberExpression","start":693,"end":707,"loc":{"start":{"line":32,"column":29},"end":{"line":32,"column":43}},"object":{"type":"Identifier","start":693,"end":697,"loc":{"start":{"line":32,"column":29},"end":{"line":32,"column":33}},"name":"opts"},"property":{"type":"Identifier","start":698,"end":707,"loc":{"start":{"line":32,"column":34},"end":{"line":32,"column":43}},"name":"storeName"},"computed":false}],"quasis":[{"type":"TemplateElement","start":681,"end":691,"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":27}},"value":{"raw":"uppyState:","cooked":"uppyState:"},"tail":false},{"type":"TemplateElement","start":708,"end":708,"loc":{"start":{"line":32,"column":44},"end":{"line":32,"column":44}},"value":{"raw":"","cooked":""},"tail":true}]}}},{"type":"IfStatement","start":715,"end":791,"loc":{"start":{"line":34,"column":4},"end":{"line":37,"column":5}},"test":{"type":"UnaryExpression","start":719,"end":729,"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":18}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":720,"end":729,"loc":{"start":{"line":34,"column":9},"end":{"line":34,"column":18}},"name":"cleanedUp"}},"consequent":{"type":"BlockStatement","start":731,"end":791,"loc":{"start":{"line":34,"column":20},"end":{"line":37,"column":5}},"body":[{"type":"ExpressionStatement","start":739,"end":755,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":22}},"expression":{"type":"AssignmentExpression","start":739,"end":755,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":22}},"operator":"=","left":{"type":"Identifier","start":739,"end":748,"loc":{"start":{"line":35,"column":6},"end":{"line":35,"column":15}},"name":"cleanedUp"},"right":{"type":"Literal","start":751,"end":755,"loc":{"start":{"line":35,"column":18},"end":{"line":35,"column":22}},"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":762,"end":785,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":29}},"expression":{"type":"CallExpression","start":762,"end":785,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":29}},"callee":{"type":"MemberExpression","start":762,"end":783,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":27}},"object":{"type":"Identifier","start":762,"end":775,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":19}},"name":"MetaDataStore"},"property":{"type":"Identifier","start":776,"end":783,"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":27}},"name":"cleanup"},"computed":false},"arguments":[]}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":816,"end":1180,"loc":{"start":{"line":43,"column":2},"end":{"line":57,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":816,"end":820,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":6}},"name":"load"},"value":{"type":"FunctionExpression","start":821,"end":1180,"loc":{"start":{"line":43,"column":7},"end":{"line":57,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":824,"end":1180,"loc":{"start":{"line":43,"column":10},"end":{"line":57,"column":3}},"body":[{"type":"VariableDeclaration","start":830,"end":880,"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":54}},"declarations":[{"type":"VariableDeclarator","start":836,"end":880,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":54}},"id":{"type":"Identifier","start":836,"end":846,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":20}},"name":"savedState"},"init":{"type":"CallExpression","start":849,"end":880,"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":54}},"callee":{"type":"MemberExpression","start":849,"end":869,"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":43}},"object":{"type":"Identifier","start":849,"end":861,"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":35}},"name":"localStorage"},"property":{"type":"Identifier","start":862,"end":869,"loc":{"start":{"line":44,"column":36},"end":{"line":44,"column":43}},"name":"getItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":870,"end":879,"loc":{"start":{"line":44,"column":44},"end":{"line":44,"column":53}},"object":{"type":"ThisExpression","start":870,"end":874,"loc":{"start":{"line":44,"column":44},"end":{"line":44,"column":48}}},"property":{"type":"Identifier","start":875,"end":879,"loc":{"start":{"line":44,"column":49},"end":{"line":44,"column":53}},"name":"name"},"computed":false}]}}],"kind":"const"},{"type":"IfStatement","start":885,"end":913,"loc":{"start":{"line":45,"column":4},"end":{"line":45,"column":32}},"test":{"type":"UnaryExpression","start":889,"end":900,"loc":{"start":{"line":45,"column":8},"end":{"line":45,"column":19}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":890,"end":900,"loc":{"start":{"line":45,"column":9},"end":{"line":45,"column":19}},"name":"savedState"}},"consequent":{"type":"ReturnStatement","start":902,"end":913,"loc":{"start":{"line":45,"column":21},"end":{"line":45,"column":32}},"argument":{"type":"Literal","start":909,"end":913,"loc":{"start":{"line":45,"column":28},"end":{"line":45,"column":32}},"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":918,"end":953,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":39}},"declarations":[{"type":"VariableDeclarator","start":924,"end":953,"loc":{"start":{"line":46,"column":10},"end":{"line":46,"column":39}},"id":{"type":"Identifier","start":924,"end":928,"loc":{"start":{"line":46,"column":10},"end":{"line":46,"column":14}},"name":"data"},"init":{"type":"CallExpression","start":931,"end":953,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":39}},"callee":{"type":"Identifier","start":931,"end":941,"loc":{"start":{"line":46,"column":17},"end":{"line":46,"column":27}},"name":"maybeParse"},"arguments":[{"type":"Identifier","start":942,"end":952,"loc":{"start":{"line":46,"column":28},"end":{"line":46,"column":38}},"name":"savedState"}]}}],"kind":"const"},{"type":"IfStatement","start":958,"end":980,"loc":{"start":{"line":47,"column":4},"end":{"line":47,"column":26}},"test":{"type":"UnaryExpression","start":962,"end":967,"loc":{"start":{"line":47,"column":8},"end":{"line":47,"column":13}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":963,"end":967,"loc":{"start":{"line":47,"column":9},"end":{"line":47,"column":13}},"name":"data"}},"consequent":{"type":"ReturnStatement","start":969,"end":980,"loc":{"start":{"line":47,"column":15},"end":{"line":47,"column":26}},"argument":{"type":"Literal","start":976,"end":980,"loc":{"start":{"line":47,"column":22},"end":{"line":47,"column":26}},"value":null,"raw":"null"}},"alternate":null},{"type":"IfStatement","start":1083,"end":1150,"loc":{"start":{"line":51,"column":4},"end":{"line":54,"column":5}},"test":{"type":"UnaryExpression","start":1087,"end":1101,"loc":{"start":{"line":51,"column":8},"end":{"line":51,"column":22}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1088,"end":1101,"loc":{"start":{"line":51,"column":9},"end":{"line":51,"column":22}},"object":{"type":"Identifier","start":1088,"end":1092,"loc":{"start":{"line":51,"column":9},"end":{"line":51,"column":13}},"name":"data"},"property":{"type":"Identifier","start":1093,"end":1101,"loc":{"start":{"line":51,"column":14},"end":{"line":51,"column":22}},"name":"metadata"},"computed":false}},"consequent":{"type":"BlockStatement","start":1103,"end":1150,"loc":{"start":{"line":51,"column":24},"end":{"line":54,"column":5}},"body":[{"type":"ExpressionStatement","start":1111,"end":1126,"loc":{"start":{"line":52,"column":6},"end":{"line":52,"column":21}},"expression":{"type":"CallExpression","start":1111,"end":1126,"loc":{"start":{"line":52,"column":6},"end":{"line":52,"column":21}},"callee":{"type":"MemberExpression","start":1111,"end":1120,"loc":{"start":{"line":52,"column":6},"end":{"line":52,"column":15}},"object":{"type":"ThisExpression","start":1111,"end":1115,"loc":{"start":{"line":52,"column":6},"end":{"line":52,"column":10}}},"property":{"type":"Identifier","start":1116,"end":1120,"loc":{"start":{"line":52,"column":11},"end":{"line":52,"column":15}},"name":"save"},"computed":false},"arguments":[{"type":"Identifier","start":1121,"end":1125,"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":20}},"name":"data"}]}},{"type":"ReturnStatement","start":1133,"end":1144,"loc":{"start":{"line":53,"column":6},"end":{"line":53,"column":17}},"argument":{"type":"Identifier","start":1140,"end":1144,"loc":{"start":{"line":53,"column":13},"end":{"line":53,"column":17}},"name":"data"}}]},"alternate":null,"comments":[{"type":"Line","value":" Upgrade pre-0.20.0 uppyState: it used to be just a flat object,","start":986,"end":1052,"loc":{"start":{"line":49,"column":4},"end":{"line":49,"column":70}}},{"type":"Line","value":" without `expires`.","start":1057,"end":1078,"loc":{"start":{"line":50,"column":4},"end":{"line":50,"column":25}}}]},{"type":"ReturnStatement","start":1156,"end":1176,"loc":{"start":{"line":56,"column":4},"end":{"line":56,"column":24}},"argument":{"type":"MemberExpression","start":1163,"end":1176,"loc":{"start":{"line":56,"column":11},"end":{"line":56,"column":24}},"object":{"type":"Identifier","start":1163,"end":1167,"loc":{"start":{"line":56,"column":11},"end":{"line":56,"column":15}},"name":"data"},"property":{"type":"Identifier","start":1168,"end":1176,"loc":{"start":{"line":56,"column":16},"end":{"line":56,"column":24}},"name":"metadata"},"computed":false}}],"comments":[{"type":"Block","value":"*\n   *\n   ","start":799,"end":813,"loc":{"start":{"line":40,"column":2},"end":{"line":42,"column":5}}}]}}},{"type":"MethodDefinition","start":1184,"end":1371,"loc":{"start":{"line":59,"column":2},"end":{"line":66,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1184,"end":1188,"loc":{"start":{"line":59,"column":2},"end":{"line":59,"column":6}},"name":"save"},"value":{"type":"FunctionExpression","start":1189,"end":1371,"loc":{"start":{"line":59,"column":7},"end":{"line":66,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1190,"end":1198,"loc":{"start":{"line":59,"column":8},"end":{"line":59,"column":16}},"name":"metadata"}],"body":{"type":"BlockStatement","start":1200,"end":1371,"loc":{"start":{"line":59,"column":18},"end":{"line":66,"column":3}},"body":[{"type":"VariableDeclaration","start":1206,"end":1252,"loc":{"start":{"line":60,"column":4},"end":{"line":60,"column":50}},"declarations":[{"type":"VariableDeclarator","start":1212,"end":1252,"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":50}},"id":{"type":"Identifier","start":1212,"end":1219,"loc":{"start":{"line":60,"column":10},"end":{"line":60,"column":17}},"name":"expires"},"init":{"type":"BinaryExpression","start":1222,"end":1252,"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":50}},"left":{"type":"CallExpression","start":1222,"end":1232,"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":30}},"callee":{"type":"MemberExpression","start":1222,"end":1230,"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":28}},"object":{"type":"Identifier","start":1222,"end":1226,"loc":{"start":{"line":60,"column":20},"end":{"line":60,"column":24}},"name":"Date"},"property":{"type":"Identifier","start":1227,"end":1230,"loc":{"start":{"line":60,"column":25},"end":{"line":60,"column":28}},"name":"now"},"computed":false},"arguments":[]},"operator":"+","right":{"type":"MemberExpression","start":1235,"end":1252,"loc":{"start":{"line":60,"column":33},"end":{"line":60,"column":50}},"object":{"type":"MemberExpression","start":1235,"end":1244,"loc":{"start":{"line":60,"column":33},"end":{"line":60,"column":42}},"object":{"type":"ThisExpression","start":1235,"end":1239,"loc":{"start":{"line":60,"column":33},"end":{"line":60,"column":37}}},"property":{"type":"Identifier","start":1240,"end":1244,"loc":{"start":{"line":60,"column":38},"end":{"line":60,"column":42}},"name":"opts"},"computed":false},"property":{"type":"Identifier","start":1245,"end":1252,"loc":{"start":{"line":60,"column":43},"end":{"line":60,"column":50}},"name":"expires"},"computed":false}}}],"kind":"const"},{"type":"VariableDeclaration","start":1257,"end":1324,"loc":{"start":{"line":61,"column":4},"end":{"line":64,"column":6}},"declarations":[{"type":"VariableDeclarator","start":1263,"end":1324,"loc":{"start":{"line":61,"column":10},"end":{"line":64,"column":6}},"id":{"type":"Identifier","start":1263,"end":1268,"loc":{"start":{"line":61,"column":10},"end":{"line":61,"column":15}},"name":"state"},"init":{"type":"CallExpression","start":1271,"end":1324,"loc":{"start":{"line":61,"column":18},"end":{"line":64,"column":6}},"callee":{"type":"MemberExpression","start":1271,"end":1285,"loc":{"start":{"line":61,"column":18},"end":{"line":61,"column":32}},"object":{"type":"Identifier","start":1271,"end":1275,"loc":{"start":{"line":61,"column":18},"end":{"line":61,"column":22}},"name":"JSON"},"property":{"type":"Identifier","start":1276,"end":1285,"loc":{"start":{"line":61,"column":23},"end":{"line":61,"column":32}},"name":"stringify"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1286,"end":1323,"loc":{"start":{"line":61,"column":33},"end":{"line":64,"column":5}},"properties":[{"type":"Property","start":1294,"end":1302,"loc":{"start":{"line":62,"column":6},"end":{"line":62,"column":14}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1294,"end":1302,"loc":{"start":{"line":62,"column":6},"end":{"line":62,"column":14}},"name":"metadata"},"kind":"init","value":{"type":"Identifier","start":1294,"end":1302,"loc":{"start":{"line":62,"column":6},"end":{"line":62,"column":14}},"name":"metadata"}},{"type":"Property","start":1310,"end":1317,"loc":{"start":{"line":63,"column":6},"end":{"line":63,"column":13}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1310,"end":1317,"loc":{"start":{"line":63,"column":6},"end":{"line":63,"column":13}},"name":"expires"},"kind":"init","value":{"type":"Identifier","start":1310,"end":1317,"loc":{"start":{"line":63,"column":6},"end":{"line":63,"column":13}},"name":"expires"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1329,"end":1367,"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":42}},"expression":{"type":"CallExpression","start":1329,"end":1367,"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":42}},"callee":{"type":"MemberExpression","start":1329,"end":1349,"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":24}},"object":{"type":"Identifier","start":1329,"end":1341,"loc":{"start":{"line":65,"column":4},"end":{"line":65,"column":16}},"name":"localStorage"},"property":{"type":"Identifier","start":1342,"end":1349,"loc":{"start":{"line":65,"column":17},"end":{"line":65,"column":24}},"name":"setItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":1350,"end":1359,"loc":{"start":{"line":65,"column":25},"end":{"line":65,"column":34}},"object":{"type":"ThisExpression","start":1350,"end":1354,"loc":{"start":{"line":65,"column":25},"end":{"line":65,"column":29}}},"property":{"type":"Identifier","start":1355,"end":1359,"loc":{"start":{"line":65,"column":30},"end":{"line":65,"column":34}},"name":"name"},"computed":false},{"type":"Identifier","start":1361,"end":1366,"loc":{"start":{"line":65,"column":36},"end":{"line":65,"column":41}},"name":"state"}]}}]}}},{"type":"MethodDefinition","start":1418,"end":1810,"loc":{"start":{"line":71,"column":2},"end":{"line":84,"column":3}},"kind":"method","static":true,"computed":false,"key":{"type":"Identifier","start":1425,"end":1432,"loc":{"start":{"line":71,"column":9},"end":{"line":71,"column":16}},"name":"cleanup"},"value":{"type":"FunctionExpression","start":1433,"end":1810,"loc":{"start":{"line":71,"column":17},"end":{"line":84,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1436,"end":1810,"loc":{"start":{"line":71,"column":20},"end":{"line":84,"column":3}},"body":[{"type":"VariableDeclaration","start":1442,"end":1481,"loc":{"start":{"line":72,"column":4},"end":{"line":72,"column":43}},"declarations":[{"type":"VariableDeclarator","start":1448,"end":1481,"loc":{"start":{"line":72,"column":10},"end":{"line":72,"column":43}},"id":{"type":"Identifier","start":1448,"end":1459,"loc":{"start":{"line":72,"column":10},"end":{"line":72,"column":21}},"name":"instanceIDs"},"init":{"type":"CallExpression","start":1462,"end":1481,"loc":{"start":{"line":72,"column":24},"end":{"line":72,"column":43}},"callee":{"type":"Identifier","start":1462,"end":1479,"loc":{"start":{"line":72,"column":24},"end":{"line":72,"column":41}},"name":"findUppyInstances"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":1486,"end":1508,"loc":{"start":{"line":73,"column":4},"end":{"line":73,"column":26}},"declarations":[{"type":"VariableDeclarator","start":1492,"end":1508,"loc":{"start":{"line":73,"column":10},"end":{"line":73,"column":26}},"id":{"type":"Identifier","start":1492,"end":1495,"loc":{"start":{"line":73,"column":10},"end":{"line":73,"column":13}},"name":"now"},"init":{"type":"CallExpression","start":1498,"end":1508,"loc":{"start":{"line":73,"column":16},"end":{"line":73,"column":26}},"callee":{"type":"MemberExpression","start":1498,"end":1506,"loc":{"start":{"line":73,"column":16},"end":{"line":73,"column":24}},"object":{"type":"Identifier","start":1498,"end":1502,"loc":{"start":{"line":73,"column":16},"end":{"line":73,"column":20}},"name":"Date"},"property":{"type":"Identifier","start":1503,"end":1506,"loc":{"start":{"line":73,"column":21},"end":{"line":73,"column":24}},"name":"now"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":1513,"end":1806,"loc":{"start":{"line":74,"column":4},"end":{"line":83,"column":6}},"expression":{"type":"CallExpression","start":1513,"end":1806,"loc":{"start":{"line":74,"column":4},"end":{"line":83,"column":6}},"callee":{"type":"MemberExpression","start":1513,"end":1532,"loc":{"start":{"line":74,"column":4},"end":{"line":74,"column":23}},"object":{"type":"Identifier","start":1513,"end":1524,"loc":{"start":{"line":74,"column":4},"end":{"line":74,"column":15}},"name":"instanceIDs"},"property":{"type":"Identifier","start":1525,"end":1532,"loc":{"start":{"line":74,"column":16},"end":{"line":74,"column":23}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1533,"end":1805,"loc":{"start":{"line":74,"column":24},"end":{"line":83,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1534,"end":1536,"loc":{"start":{"line":74,"column":25},"end":{"line":74,"column":27}},"name":"id"}],"body":{"type":"BlockStatement","start":1541,"end":1805,"loc":{"start":{"line":74,"column":32},"end":{"line":83,"column":5}},"body":[{"type":"VariableDeclaration","start":1549,"end":1601,"loc":{"start":{"line":75,"column":6},"end":{"line":75,"column":58}},"declarations":[{"type":"VariableDeclarator","start":1555,"end":1601,"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":58}},"id":{"type":"Identifier","start":1555,"end":1559,"loc":{"start":{"line":75,"column":12},"end":{"line":75,"column":16}},"name":"data"},"init":{"type":"CallExpression","start":1562,"end":1601,"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":58}},"callee":{"type":"MemberExpression","start":1562,"end":1582,"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":39}},"object":{"type":"Identifier","start":1562,"end":1574,"loc":{"start":{"line":75,"column":19},"end":{"line":75,"column":31}},"name":"localStorage"},"property":{"type":"Identifier","start":1575,"end":1582,"loc":{"start":{"line":75,"column":32},"end":{"line":75,"column":39}},"name":"getItem"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1583,"end":1600,"loc":{"start":{"line":75,"column":40},"end":{"line":75,"column":57}},"expressions":[{"type":"Identifier","start":1596,"end":1598,"loc":{"start":{"line":75,"column":53},"end":{"line":75,"column":55}},"name":"id"}],"quasis":[{"type":"TemplateElement","start":1584,"end":1594,"loc":{"start":{"line":75,"column":41},"end":{"line":75,"column":51}},"value":{"raw":"uppyState:","cooked":"uppyState:"},"tail":false},{"type":"TemplateElement","start":1599,"end":1599,"loc":{"start":{"line":75,"column":56},"end":{"line":75,"column":56}},"value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"IfStatement","start":1608,"end":1630,"loc":{"start":{"line":76,"column":6},"end":{"line":76,"column":28}},"test":{"type":"UnaryExpression","start":1612,"end":1617,"loc":{"start":{"line":76,"column":10},"end":{"line":76,"column":15}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1613,"end":1617,"loc":{"start":{"line":76,"column":11},"end":{"line":76,"column":15}},"name":"data"}},"consequent":{"type":"ReturnStatement","start":1619,"end":1630,"loc":{"start":{"line":76,"column":17},"end":{"line":76,"column":28}},"argument":{"type":"Literal","start":1626,"end":1630,"loc":{"start":{"line":76,"column":24},"end":{"line":76,"column":28}},"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":1637,"end":1665,"loc":{"start":{"line":77,"column":6},"end":{"line":77,"column":34}},"declarations":[{"type":"VariableDeclarator","start":1643,"end":1665,"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":34}},"id":{"type":"Identifier","start":1643,"end":1646,"loc":{"start":{"line":77,"column":12},"end":{"line":77,"column":15}},"name":"obj"},"init":{"type":"CallExpression","start":1649,"end":1665,"loc":{"start":{"line":77,"column":18},"end":{"line":77,"column":34}},"callee":{"type":"Identifier","start":1649,"end":1659,"loc":{"start":{"line":77,"column":18},"end":{"line":77,"column":28}},"name":"maybeParse"},"arguments":[{"type":"Identifier","start":1660,"end":1664,"loc":{"start":{"line":77,"column":29},"end":{"line":77,"column":33}},"name":"data"}]}}],"kind":"const"},{"type":"IfStatement","start":1672,"end":1693,"loc":{"start":{"line":78,"column":6},"end":{"line":78,"column":27}},"test":{"type":"UnaryExpression","start":1676,"end":1680,"loc":{"start":{"line":78,"column":10},"end":{"line":78,"column":14}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1677,"end":1680,"loc":{"start":{"line":78,"column":11},"end":{"line":78,"column":14}},"name":"obj"}},"consequent":{"type":"ReturnStatement","start":1682,"end":1693,"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":27}},"argument":{"type":"Literal","start":1689,"end":1693,"loc":{"start":{"line":78,"column":23},"end":{"line":78,"column":27}},"value":null,"raw":"null"}},"alternate":null},{"type":"IfStatement","start":1701,"end":1799,"loc":{"start":{"line":80,"column":6},"end":{"line":82,"column":7}},"test":{"type":"LogicalExpression","start":1705,"end":1737,"loc":{"start":{"line":80,"column":10},"end":{"line":80,"column":42}},"left":{"type":"MemberExpression","start":1705,"end":1716,"loc":{"start":{"line":80,"column":10},"end":{"line":80,"column":21}},"object":{"type":"Identifier","start":1705,"end":1708,"loc":{"start":{"line":80,"column":10},"end":{"line":80,"column":13}},"name":"obj"},"property":{"type":"Identifier","start":1709,"end":1716,"loc":{"start":{"line":80,"column":14},"end":{"line":80,"column":21}},"name":"expires"},"computed":false},"operator":"&&","right":{"type":"BinaryExpression","start":1720,"end":1737,"loc":{"start":{"line":80,"column":25},"end":{"line":80,"column":42}},"left":{"type":"MemberExpression","start":1720,"end":1731,"loc":{"start":{"line":80,"column":25},"end":{"line":80,"column":36}},"object":{"type":"Identifier","start":1720,"end":1723,"loc":{"start":{"line":80,"column":25},"end":{"line":80,"column":28}},"name":"obj"},"property":{"type":"Identifier","start":1724,"end":1731,"loc":{"start":{"line":80,"column":29},"end":{"line":80,"column":36}},"name":"expires"},"computed":false},"operator":"<","right":{"type":"Identifier","start":1734,"end":1737,"loc":{"start":{"line":80,"column":39},"end":{"line":80,"column":42}},"name":"now"}}},"consequent":{"type":"BlockStatement","start":1739,"end":1799,"loc":{"start":{"line":80,"column":44},"end":{"line":82,"column":7}},"body":[{"type":"ExpressionStatement","start":1749,"end":1791,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":50}},"expression":{"type":"CallExpression","start":1749,"end":1791,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":50}},"callee":{"type":"MemberExpression","start":1749,"end":1772,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":31}},"object":{"type":"Identifier","start":1749,"end":1761,"loc":{"start":{"line":81,"column":8},"end":{"line":81,"column":20}},"name":"localStorage"},"property":{"type":"Identifier","start":1762,"end":1772,"loc":{"start":{"line":81,"column":21},"end":{"line":81,"column":31}},"name":"removeItem"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1773,"end":1790,"loc":{"start":{"line":81,"column":32},"end":{"line":81,"column":49}},"expressions":[{"type":"Identifier","start":1786,"end":1788,"loc":{"start":{"line":81,"column":45},"end":{"line":81,"column":47}},"name":"id"}],"quasis":[{"type":"TemplateElement","start":1774,"end":1784,"loc":{"start":{"line":81,"column":33},"end":{"line":81,"column":43}},"value":{"raw":"uppyState:","cooked":"uppyState:"},"tail":false},{"type":"TemplateElement","start":1789,"end":1789,"loc":{"start":{"line":81,"column":48},"end":{"line":81,"column":48}},"value":{"raw":"","cooked":""},"tail":true}]}]}}]},"alternate":null}]}}]}}],"comments":[{"type":"Block","value":"*\n   * Remove all expired state.\n   ","start":1375,"end":1415,"loc":{"start":{"line":68,"column":2},"end":{"line":70,"column":5}}}]}}}]}}}}],"sourceType":"script","comments":[{"type":"Block","value":"*\n * Get uppy instance IDs for which state is stored.\n ","start":0,"end":59,"loc":{"start":{"line":1,"column":0},"end":{"line":3,"column":3}}}]}