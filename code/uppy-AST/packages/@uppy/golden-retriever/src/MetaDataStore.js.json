{"type":"Program","start":0,"end":1813,"body":[{"type":"FunctionDeclaration","start":60,"end":319,"id":{"type":"Identifier","start":69,"end":86,"name":"findUppyInstances"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":90,"end":319,"body":[{"type":"VariableDeclaration","start":94,"end":114,"declarations":[{"type":"VariableDeclarator","start":100,"end":114,"id":{"type":"Identifier","start":100,"end":109,"name":"instances"},"init":{"type":"ArrayExpression","start":112,"end":114,"elements":[]}}],"kind":"const"},{"type":"ForStatement","start":117,"end":298,"init":{"type":"VariableDeclaration","start":122,"end":131,"declarations":[{"type":"VariableDeclarator","start":126,"end":131,"id":{"type":"Identifier","start":126,"end":127,"name":"i"},"init":{"type":"Literal","start":130,"end":131,"value":0,"raw":"0"}}],"kind":"let"},"test":{"type":"BinaryExpression","start":133,"end":156,"left":{"type":"Identifier","start":133,"end":134,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":137,"end":156,"object":{"type":"Identifier","start":137,"end":149,"name":"localStorage"},"property":{"type":"Identifier","start":150,"end":156,"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":158,"end":161,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":158,"end":159,"name":"i"}},"body":{"type":"BlockStatement","start":163,"end":298,"body":[{"type":"VariableDeclaration","start":169,"end":200,"declarations":[{"type":"VariableDeclarator","start":175,"end":200,"id":{"type":"Identifier","start":175,"end":178,"name":"key"},"init":{"type":"CallExpression","start":181,"end":200,"callee":{"type":"MemberExpression","start":181,"end":197,"object":{"type":"Identifier","start":181,"end":193,"name":"localStorage"},"property":{"type":"Identifier","start":194,"end":197,"name":"key"},"computed":false},"arguments":[{"type":"Identifier","start":198,"end":199,"name":"i"}]}}],"kind":"const"},{"type":"IfStatement","start":205,"end":294,"test":{"type":"CallExpression","start":209,"end":232,"callee":{"type":"MemberExpression","start":209,"end":227,"object":{"type":"Literal","start":209,"end":222,"value":{},"raw":"/^uppyState:/","regex":{"pattern":"^uppyState:","flags":""}},"property":{"type":"Identifier","start":223,"end":227,"name":"test"},"computed":false},"arguments":[{"type":"Identifier","start":228,"end":231,"name":"key"}]},"consequent":{"type":"BlockStatement","start":234,"end":294,"body":[{"type":"ExpressionStatement","start":242,"end":288,"expression":{"type":"CallExpression","start":242,"end":288,"callee":{"type":"MemberExpression","start":242,"end":256,"object":{"type":"Identifier","start":242,"end":251,"name":"instances"},"property":{"type":"Identifier","start":252,"end":256,"name":"push"},"computed":false},"arguments":[{"type":"CallExpression","start":257,"end":287,"callee":{"type":"MemberExpression","start":257,"end":266,"object":{"type":"Identifier","start":257,"end":260,"name":"key"},"property":{"type":"Identifier","start":261,"end":266,"name":"slice"},"computed":false},"arguments":[{"type":"MemberExpression","start":267,"end":286,"object":{"type":"Literal","start":267,"end":279,"value":"uppyState:","raw":"'uppyState:'"},"property":{"type":"Identifier","start":280,"end":286,"name":"length"},"computed":false}]}]}}]},"alternate":null}]}},{"type":"ReturnStatement","start":301,"end":317,"argument":{"type":"Identifier","start":308,"end":317,"name":"instances"}}]}},{"type":"FunctionDeclaration","start":384,"end":486,"id":{"type":"Identifier","start":393,"end":403,"name":"maybeParse"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":405,"end":408,"name":"str"}],"body":{"type":"BlockStatement","start":410,"end":486,"body":[{"type":"TryStatement","start":414,"end":484,"block":{"type":"BlockStatement","start":418,"end":450,"body":[{"type":"ReturnStatement","start":424,"end":446,"argument":{"type":"CallExpression","start":431,"end":446,"callee":{"type":"MemberExpression","start":431,"end":441,"object":{"type":"Identifier","start":431,"end":435,"name":"JSON"},"property":{"type":"Identifier","start":436,"end":441,"name":"parse"},"computed":false},"arguments":[{"type":"Identifier","start":442,"end":445,"name":"str"}]}}]},"handler":{"type":"CatchClause","start":451,"end":484,"param":{"type":"Identifier","start":458,"end":461,"name":"err"},"body":{"type":"BlockStatement","start":463,"end":484,"body":[{"type":"ReturnStatement","start":469,"end":480,"argument":{"type":"Literal","start":476,"end":480,"value":null,"raw":"null"}}]}},"finalizer":null}]}},{"type":"VariableDeclaration","start":488,"end":509,"declarations":[{"type":"VariableDeclarator","start":492,"end":509,"id":{"type":"Identifier","start":492,"end":501,"name":"cleanedUp"},"init":{"type":"Literal","start":504,"end":509,"value":false,"raw":"false"}}],"kind":"let"},{"type":"ExpressionStatement","start":510,"end":1812,"expression":{"type":"AssignmentExpression","start":510,"end":1812,"operator":"=","left":{"type":"MemberExpression","start":510,"end":524,"object":{"type":"Identifier","start":510,"end":516,"name":"module"},"property":{"type":"Identifier","start":517,"end":524,"name":"exports"},"computed":false},"right":{"type":"ClassExpression","start":527,"end":1812,"id":{"type":"Identifier","start":533,"end":546,"name":"MetaDataStore"},"superClass":null,"body":{"type":"ClassBody","start":547,"end":1812,"body":[{"type":"MethodDefinition","start":551,"end":795,"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":551,"end":562,"name":"constructor"},"value":{"type":"FunctionExpression","start":563,"end":795,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":564,"end":568,"name":"opts"}],"body":{"type":"BlockStatement","start":570,"end":795,"body":[{"type":"ExpressionStatement","start":576,"end":663,"expression":{"type":"AssignmentExpression","start":576,"end":663,"operator":"=","left":{"type":"MemberExpression","start":576,"end":585,"object":{"type":"ThisExpression","start":576,"end":580},"property":{"type":"Identifier","start":581,"end":585,"name":"opts"},"computed":false},"right":{"type":"CallExpression","start":588,"end":663,"callee":{"type":"MemberExpression","start":588,"end":601,"object":{"type":"Identifier","start":588,"end":594,"name":"Object"},"property":{"type":"Identifier","start":595,"end":601,"name":"assign"},"computed":false},"arguments":[{"type":"ObjectExpression","start":602,"end":656,"properties":[{"type":"Property","start":610,"end":638,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":610,"end":617,"name":"expires"},"value":{"type":"BinaryExpression","start":619,"end":638,"left":{"type":"BinaryExpression","start":619,"end":631,"left":{"type":"BinaryExpression","start":619,"end":626,"left":{"type":"Literal","start":619,"end":621,"value":24,"raw":"24"},"operator":"*","right":{"type":"Literal","start":624,"end":626,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":629,"end":631,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":634,"end":638,"value":1000,"raw":"1000"}},"kind":"init"}]},{"type":"Identifier","start":658,"end":662,"name":"opts"}]}}},{"type":"ExpressionStatement","start":668,"end":709,"expression":{"type":"AssignmentExpression","start":668,"end":709,"operator":"=","left":{"type":"MemberExpression","start":668,"end":677,"object":{"type":"ThisExpression","start":668,"end":672},"property":{"type":"Identifier","start":673,"end":677,"name":"name"},"computed":false},"right":{"type":"TemplateLiteral","start":680,"end":709,"expressions":[{"type":"MemberExpression","start":693,"end":707,"object":{"type":"Identifier","start":693,"end":697,"name":"opts"},"property":{"type":"Identifier","start":698,"end":707,"name":"storeName"},"computed":false}],"quasis":[{"type":"TemplateElement","start":681,"end":691,"value":{"raw":"uppyState:","cooked":"uppyState:"},"tail":false},{"type":"TemplateElement","start":708,"end":708,"value":{"raw":"","cooked":""},"tail":true}]}}},{"type":"IfStatement","start":715,"end":791,"test":{"type":"UnaryExpression","start":719,"end":729,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":720,"end":729,"name":"cleanedUp"}},"consequent":{"type":"BlockStatement","start":731,"end":791,"body":[{"type":"ExpressionStatement","start":739,"end":755,"expression":{"type":"AssignmentExpression","start":739,"end":755,"operator":"=","left":{"type":"Identifier","start":739,"end":748,"name":"cleanedUp"},"right":{"type":"Literal","start":751,"end":755,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":762,"end":785,"expression":{"type":"CallExpression","start":762,"end":785,"callee":{"type":"MemberExpression","start":762,"end":783,"object":{"type":"Identifier","start":762,"end":775,"name":"MetaDataStore"},"property":{"type":"Identifier","start":776,"end":783,"name":"cleanup"},"computed":false},"arguments":[]}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":816,"end":1180,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":816,"end":820,"name":"load"},"value":{"type":"FunctionExpression","start":821,"end":1180,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":824,"end":1180,"body":[{"type":"VariableDeclaration","start":830,"end":880,"declarations":[{"type":"VariableDeclarator","start":836,"end":880,"id":{"type":"Identifier","start":836,"end":846,"name":"savedState"},"init":{"type":"CallExpression","start":849,"end":880,"callee":{"type":"MemberExpression","start":849,"end":869,"object":{"type":"Identifier","start":849,"end":861,"name":"localStorage"},"property":{"type":"Identifier","start":862,"end":869,"name":"getItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":870,"end":879,"object":{"type":"ThisExpression","start":870,"end":874},"property":{"type":"Identifier","start":875,"end":879,"name":"name"},"computed":false}]}}],"kind":"const"},{"type":"IfStatement","start":885,"end":913,"test":{"type":"UnaryExpression","start":889,"end":900,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":890,"end":900,"name":"savedState"}},"consequent":{"type":"ReturnStatement","start":902,"end":913,"argument":{"type":"Literal","start":909,"end":913,"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":918,"end":953,"declarations":[{"type":"VariableDeclarator","start":924,"end":953,"id":{"type":"Identifier","start":924,"end":928,"name":"data"},"init":{"type":"CallExpression","start":931,"end":953,"callee":{"type":"Identifier","start":931,"end":941,"name":"maybeParse"},"arguments":[{"type":"Identifier","start":942,"end":952,"name":"savedState"}]}}],"kind":"const"},{"type":"IfStatement","start":958,"end":980,"test":{"type":"UnaryExpression","start":962,"end":967,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":963,"end":967,"name":"data"}},"consequent":{"type":"ReturnStatement","start":969,"end":980,"argument":{"type":"Literal","start":976,"end":980,"value":null,"raw":"null"}},"alternate":null},{"type":"IfStatement","start":1083,"end":1150,"test":{"type":"UnaryExpression","start":1087,"end":1101,"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":1088,"end":1101,"object":{"type":"Identifier","start":1088,"end":1092,"name":"data"},"property":{"type":"Identifier","start":1093,"end":1101,"name":"metadata"},"computed":false}},"consequent":{"type":"BlockStatement","start":1103,"end":1150,"body":[{"type":"ExpressionStatement","start":1111,"end":1126,"expression":{"type":"CallExpression","start":1111,"end":1126,"callee":{"type":"MemberExpression","start":1111,"end":1120,"object":{"type":"ThisExpression","start":1111,"end":1115},"property":{"type":"Identifier","start":1116,"end":1120,"name":"save"},"computed":false},"arguments":[{"type":"Identifier","start":1121,"end":1125,"name":"data"}]}},{"type":"ReturnStatement","start":1133,"end":1144,"argument":{"type":"Identifier","start":1140,"end":1144,"name":"data"}}]},"alternate":null},{"type":"ReturnStatement","start":1156,"end":1176,"argument":{"type":"MemberExpression","start":1163,"end":1176,"object":{"type":"Identifier","start":1163,"end":1167,"name":"data"},"property":{"type":"Identifier","start":1168,"end":1176,"name":"metadata"},"computed":false}}]}}},{"type":"MethodDefinition","start":1184,"end":1371,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1184,"end":1188,"name":"save"},"value":{"type":"FunctionExpression","start":1189,"end":1371,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1190,"end":1198,"name":"metadata"}],"body":{"type":"BlockStatement","start":1200,"end":1371,"body":[{"type":"VariableDeclaration","start":1206,"end":1252,"declarations":[{"type":"VariableDeclarator","start":1212,"end":1252,"id":{"type":"Identifier","start":1212,"end":1219,"name":"expires"},"init":{"type":"BinaryExpression","start":1222,"end":1252,"left":{"type":"CallExpression","start":1222,"end":1232,"callee":{"type":"MemberExpression","start":1222,"end":1230,"object":{"type":"Identifier","start":1222,"end":1226,"name":"Date"},"property":{"type":"Identifier","start":1227,"end":1230,"name":"now"},"computed":false},"arguments":[]},"operator":"+","right":{"type":"MemberExpression","start":1235,"end":1252,"object":{"type":"MemberExpression","start":1235,"end":1244,"object":{"type":"ThisExpression","start":1235,"end":1239},"property":{"type":"Identifier","start":1240,"end":1244,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":1245,"end":1252,"name":"expires"},"computed":false}}}],"kind":"const"},{"type":"VariableDeclaration","start":1257,"end":1324,"declarations":[{"type":"VariableDeclarator","start":1263,"end":1324,"id":{"type":"Identifier","start":1263,"end":1268,"name":"state"},"init":{"type":"CallExpression","start":1271,"end":1324,"callee":{"type":"MemberExpression","start":1271,"end":1285,"object":{"type":"Identifier","start":1271,"end":1275,"name":"JSON"},"property":{"type":"Identifier","start":1276,"end":1285,"name":"stringify"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1286,"end":1323,"properties":[{"type":"Property","start":1294,"end":1302,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1294,"end":1302,"name":"metadata"},"kind":"init","value":{"type":"Identifier","start":1294,"end":1302,"name":"metadata"}},{"type":"Property","start":1310,"end":1317,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1310,"end":1317,"name":"expires"},"kind":"init","value":{"type":"Identifier","start":1310,"end":1317,"name":"expires"}}]}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1329,"end":1367,"expression":{"type":"CallExpression","start":1329,"end":1367,"callee":{"type":"MemberExpression","start":1329,"end":1349,"object":{"type":"Identifier","start":1329,"end":1341,"name":"localStorage"},"property":{"type":"Identifier","start":1342,"end":1349,"name":"setItem"},"computed":false},"arguments":[{"type":"MemberExpression","start":1350,"end":1359,"object":{"type":"ThisExpression","start":1350,"end":1354},"property":{"type":"Identifier","start":1355,"end":1359,"name":"name"},"computed":false},{"type":"Identifier","start":1361,"end":1366,"name":"state"}]}}]}}},{"type":"MethodDefinition","start":1418,"end":1810,"kind":"method","static":true,"computed":false,"key":{"type":"Identifier","start":1425,"end":1432,"name":"cleanup"},"value":{"type":"FunctionExpression","start":1433,"end":1810,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1436,"end":1810,"body":[{"type":"VariableDeclaration","start":1442,"end":1481,"declarations":[{"type":"VariableDeclarator","start":1448,"end":1481,"id":{"type":"Identifier","start":1448,"end":1459,"name":"instanceIDs"},"init":{"type":"CallExpression","start":1462,"end":1481,"callee":{"type":"Identifier","start":1462,"end":1479,"name":"findUppyInstances"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":1486,"end":1508,"declarations":[{"type":"VariableDeclarator","start":1492,"end":1508,"id":{"type":"Identifier","start":1492,"end":1495,"name":"now"},"init":{"type":"CallExpression","start":1498,"end":1508,"callee":{"type":"MemberExpression","start":1498,"end":1506,"object":{"type":"Identifier","start":1498,"end":1502,"name":"Date"},"property":{"type":"Identifier","start":1503,"end":1506,"name":"now"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"ExpressionStatement","start":1513,"end":1806,"expression":{"type":"CallExpression","start":1513,"end":1806,"callee":{"type":"MemberExpression","start":1513,"end":1532,"object":{"type":"Identifier","start":1513,"end":1524,"name":"instanceIDs"},"property":{"type":"Identifier","start":1525,"end":1532,"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1533,"end":1805,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1534,"end":1536,"name":"id"}],"body":{"type":"BlockStatement","start":1541,"end":1805,"body":[{"type":"VariableDeclaration","start":1549,"end":1601,"declarations":[{"type":"VariableDeclarator","start":1555,"end":1601,"id":{"type":"Identifier","start":1555,"end":1559,"name":"data"},"init":{"type":"CallExpression","start":1562,"end":1601,"callee":{"type":"MemberExpression","start":1562,"end":1582,"object":{"type":"Identifier","start":1562,"end":1574,"name":"localStorage"},"property":{"type":"Identifier","start":1575,"end":1582,"name":"getItem"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1583,"end":1600,"expressions":[{"type":"Identifier","start":1596,"end":1598,"name":"id"}],"quasis":[{"type":"TemplateElement","start":1584,"end":1594,"value":{"raw":"uppyState:","cooked":"uppyState:"},"tail":false},{"type":"TemplateElement","start":1599,"end":1599,"value":{"raw":"","cooked":""},"tail":true}]}]}}],"kind":"const"},{"type":"IfStatement","start":1608,"end":1630,"test":{"type":"UnaryExpression","start":1612,"end":1617,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1613,"end":1617,"name":"data"}},"consequent":{"type":"ReturnStatement","start":1619,"end":1630,"argument":{"type":"Literal","start":1626,"end":1630,"value":null,"raw":"null"}},"alternate":null},{"type":"VariableDeclaration","start":1637,"end":1665,"declarations":[{"type":"VariableDeclarator","start":1643,"end":1665,"id":{"type":"Identifier","start":1643,"end":1646,"name":"obj"},"init":{"type":"CallExpression","start":1649,"end":1665,"callee":{"type":"Identifier","start":1649,"end":1659,"name":"maybeParse"},"arguments":[{"type":"Identifier","start":1660,"end":1664,"name":"data"}]}}],"kind":"const"},{"type":"IfStatement","start":1672,"end":1693,"test":{"type":"UnaryExpression","start":1676,"end":1680,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1677,"end":1680,"name":"obj"}},"consequent":{"type":"ReturnStatement","start":1682,"end":1693,"argument":{"type":"Literal","start":1689,"end":1693,"value":null,"raw":"null"}},"alternate":null},{"type":"IfStatement","start":1701,"end":1799,"test":{"type":"LogicalExpression","start":1705,"end":1737,"left":{"type":"MemberExpression","start":1705,"end":1716,"object":{"type":"Identifier","start":1705,"end":1708,"name":"obj"},"property":{"type":"Identifier","start":1709,"end":1716,"name":"expires"},"computed":false},"operator":"&&","right":{"type":"BinaryExpression","start":1720,"end":1737,"left":{"type":"MemberExpression","start":1720,"end":1731,"object":{"type":"Identifier","start":1720,"end":1723,"name":"obj"},"property":{"type":"Identifier","start":1724,"end":1731,"name":"expires"},"computed":false},"operator":"<","right":{"type":"Identifier","start":1734,"end":1737,"name":"now"}}},"consequent":{"type":"BlockStatement","start":1739,"end":1799,"body":[{"type":"ExpressionStatement","start":1749,"end":1791,"expression":{"type":"CallExpression","start":1749,"end":1791,"callee":{"type":"MemberExpression","start":1749,"end":1772,"object":{"type":"Identifier","start":1749,"end":1761,"name":"localStorage"},"property":{"type":"Identifier","start":1762,"end":1772,"name":"removeItem"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1773,"end":1790,"expressions":[{"type":"Identifier","start":1786,"end":1788,"name":"id"}],"quasis":[{"type":"TemplateElement","start":1774,"end":1784,"value":{"raw":"uppyState:","cooked":"uppyState:"},"tail":false},{"type":"TemplateElement","start":1789,"end":1789,"value":{"raw":"","cooked":""},"tail":true}]}]}}]},"alternate":null}]}}]}}]}}}]}}}}],"sourceType":"script"}