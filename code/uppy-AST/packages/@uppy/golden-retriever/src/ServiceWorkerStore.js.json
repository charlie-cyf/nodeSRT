{"type":"Program","start":0,"end":1912,"body":[{"type":"VariableDeclaration","start":21,"end":105,"declarations":[{"type":"VariableDeclarator","start":27,"end":105,"id":{"type":"Identifier","start":27,"end":38,"name":"isSupported"},"init":{"type":"LogicalExpression","start":41,"end":105,"left":{"type":"BinaryExpression","start":41,"end":73,"left":{"type":"UnaryExpression","start":41,"end":57,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":48,"end":57,"name":"navigator"}},"operator":"!==","right":{"type":"Literal","start":62,"end":73,"value":"undefined","raw":"'undefined'"}},"operator":"&&","right":{"type":"BinaryExpression","start":77,"end":105,"left":{"type":"Literal","start":77,"end":92,"value":"serviceWorker","raw":"'serviceWorker'"},"operator":"in","right":{"type":"Identifier","start":96,"end":105,"name":"navigator"}}}}],"kind":"const"},{"type":"FunctionDeclaration","start":107,"end":504,"id":{"type":"Identifier","start":116,"end":136,"name":"waitForServiceWorker"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":140,"end":504,"body":[{"type":"ReturnStatement","start":144,"end":502,"argument":{"type":"NewExpression","start":151,"end":502,"callee":{"type":"Identifier","start":155,"end":162,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":163,"end":501,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":164,"end":171,"name":"resolve"},{"type":"Identifier","start":173,"end":179,"name":"reject"}],"body":{"type":"BlockStatement","start":184,"end":501,"body":[{"type":"IfStatement","start":190,"end":497,"test":{"type":"UnaryExpression","start":194,"end":206,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":195,"end":206,"name":"isSupported"}},"consequent":{"type":"BlockStatement","start":208,"end":254,"body":[{"type":"ExpressionStatement","start":216,"end":248,"expression":{"type":"CallExpression","start":216,"end":248,"callee":{"type":"Identifier","start":216,"end":222,"name":"reject"},"arguments":[{"type":"NewExpression","start":223,"end":247,"callee":{"type":"Identifier","start":227,"end":232,"name":"Error"},"arguments":[{"type":"Literal","start":233,"end":246,"value":"Unsupported","raw":"'Unsupported'"}]}]}}]},"alternate":{"type":"IfStatement","start":260,"end":497,"test":{"type":"MemberExpression","start":264,"end":298,"object":{"type":"MemberExpression","start":264,"end":287,"object":{"type":"Identifier","start":264,"end":273,"name":"navigator"},"property":{"type":"Identifier","start":274,"end":287,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":288,"end":298,"name":"controller"},"computed":false},"consequent":{"type":"BlockStatement","start":300,"end":382,"body":[{"type":"ExpressionStatement","start":367,"end":376,"expression":{"type":"CallExpression","start":367,"end":376,"callee":{"type":"Identifier","start":367,"end":374,"name":"resolve"},"arguments":[]}}]},"alternate":{"type":"BlockStatement","start":388,"end":497,"body":[{"type":"ExpressionStatement","start":396,"end":491,"expression":{"type":"CallExpression","start":396,"end":491,"callee":{"type":"MemberExpression","start":396,"end":436,"object":{"type":"MemberExpression","start":396,"end":419,"object":{"type":"Identifier","start":396,"end":405,"name":"navigator"},"property":{"type":"Identifier","start":406,"end":419,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":420,"end":436,"name":"addEventListener"},"computed":false},"arguments":[{"type":"Literal","start":437,"end":455,"value":"controllerchange","raw":"'controllerchange'"},{"type":"ArrowFunctionExpression","start":457,"end":490,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":463,"end":490,"body":[{"type":"ExpressionStatement","start":473,"end":482,"expression":{"type":"CallExpression","start":473,"end":482,"callee":{"type":"Identifier","start":473,"end":480,"name":"resolve"},"arguments":[]}}]}}]}}]}}}]}}]}}]}},{"type":"ClassDeclaration","start":506,"end":1828,"id":{"type":"Identifier","start":512,"end":530,"name":"ServiceWorkerStore"},"superClass":null,"body":{"type":"ClassBody","start":531,"end":1828,"body":[{"type":"MethodDefinition","start":535,"end":630,"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":535,"end":546,"name":"constructor"},"value":{"type":"FunctionExpression","start":547,"end":630,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":548,"end":552,"name":"opts"}],"body":{"type":"BlockStatement","start":554,"end":630,"body":[{"type":"ExpressionStatement","start":560,"end":595,"expression":{"type":"AssignmentExpression","start":560,"end":595,"operator":"=","left":{"type":"MemberExpression","start":560,"end":570,"object":{"type":"ThisExpression","start":560,"end":564},"property":{"type":"Identifier","start":565,"end":570,"name":"ready"},"computed":false},"right":{"type":"CallExpression","start":573,"end":595,"callee":{"type":"Identifier","start":573,"end":593,"name":"waitForServiceWorker"},"arguments":[]}}},{"type":"ExpressionStatement","start":600,"end":626,"expression":{"type":"AssignmentExpression","start":600,"end":626,"operator":"=","left":{"type":"MemberExpression","start":600,"end":609,"object":{"type":"ThisExpression","start":600,"end":604},"property":{"type":"Identifier","start":605,"end":609,"name":"name"},"computed":false},"right":{"type":"MemberExpression","start":612,"end":626,"object":{"type":"Identifier","start":612,"end":616,"name":"opts"},"property":{"type":"Identifier","start":617,"end":626,"name":"storeName"},"computed":false}}}]}}},{"type":"MethodDefinition","start":634,"end":1410,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":634,"end":638,"name":"list"},"value":{"type":"FunctionExpression","start":639,"end":1410,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":642,"end":1410,"body":[{"type":"VariableDeclaration","start":648,"end":664,"declarations":[{"type":"VariableDeclarator","start":654,"end":664,"id":{"type":"Identifier","start":654,"end":659,"name":"defer"},"init":{"type":"ObjectExpression","start":662,"end":664,"properties":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":669,"end":784,"declarations":[{"type":"VariableDeclarator","start":675,"end":784,"id":{"type":"Identifier","start":675,"end":682,"name":"promise"},"init":{"type":"NewExpression","start":685,"end":784,"callee":{"type":"Identifier","start":689,"end":696,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":697,"end":783,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":698,"end":705,"name":"resolve"},{"type":"Identifier","start":707,"end":713,"name":"reject"}],"body":{"type":"BlockStatement","start":718,"end":783,"body":[{"type":"ExpressionStatement","start":726,"end":749,"expression":{"type":"AssignmentExpression","start":726,"end":749,"operator":"=","left":{"type":"MemberExpression","start":726,"end":739,"object":{"type":"Identifier","start":726,"end":731,"name":"defer"},"property":{"type":"Identifier","start":732,"end":739,"name":"resolve"},"computed":false},"right":{"type":"Identifier","start":742,"end":749,"name":"resolve"}}},{"type":"ExpressionStatement","start":756,"end":777,"expression":{"type":"AssignmentExpression","start":756,"end":777,"operator":"=","left":{"type":"MemberExpression","start":756,"end":768,"object":{"type":"Identifier","start":756,"end":761,"name":"defer"},"property":{"type":"Identifier","start":762,"end":768,"name":"reject"},"computed":false},"right":{"type":"Identifier","start":771,"end":777,"name":"reject"}}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","start":790,"end":845,"expression":{"type":"CallExpression","start":790,"end":845,"callee":{"type":"MemberExpression","start":790,"end":801,"object":{"type":"Identifier","start":790,"end":797,"name":"console"},"property":{"type":"Identifier","start":798,"end":801,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":802,"end":844,"value":"Loading stored blobs from Service Worker","raw":"'Loading stored blobs from Service Worker'"}]}},{"type":"VariableDeclaration","start":850,"end":1159,"declarations":[{"type":"VariableDeclarator","start":856,"end":1159,"id":{"type":"Identifier","start":856,"end":865,"name":"onMessage"},"init":{"type":"ArrowFunctionExpression","start":868,"end":1159,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":869,"end":874,"name":"event"}],"body":{"type":"BlockStatement","start":879,"end":1159,"body":[{"type":"IfStatement","start":887,"end":947,"test":{"type":"BinaryExpression","start":891,"end":921,"left":{"type":"MemberExpression","start":891,"end":907,"object":{"type":"MemberExpression","start":891,"end":901,"object":{"type":"Identifier","start":891,"end":896,"name":"event"},"property":{"type":"Identifier","start":897,"end":901,"name":"data"},"computed":false},"property":{"type":"Identifier","start":902,"end":907,"name":"store"},"computed":false},"operator":"!==","right":{"type":"MemberExpression","start":912,"end":921,"object":{"type":"ThisExpression","start":912,"end":916},"property":{"type":"Identifier","start":917,"end":921,"name":"name"},"computed":false}},"consequent":{"type":"BlockStatement","start":923,"end":947,"body":[{"type":"ReturnStatement","start":933,"end":939,"argument":null}]},"alternate":null},{"type":"SwitchStatement","start":954,"end":1153,"discriminant":{"type":"MemberExpression","start":962,"end":977,"object":{"type":"MemberExpression","start":962,"end":972,"object":{"type":"Identifier","start":962,"end":967,"name":"event"},"property":{"type":"Identifier","start":968,"end":972,"name":"data"},"computed":false},"property":{"type":"Identifier","start":973,"end":977,"name":"type"},"computed":false},"cases":[{"type":"SwitchCase","start":989,"end":1145,"consequent":[{"type":"ExpressionStatement","start":1022,"end":1053,"expression":{"type":"CallExpression","start":1022,"end":1053,"callee":{"type":"MemberExpression","start":1022,"end":1035,"object":{"type":"Identifier","start":1022,"end":1027,"name":"defer"},"property":{"type":"Identifier","start":1028,"end":1035,"name":"resolve"},"computed":false},"arguments":[{"type":"MemberExpression","start":1036,"end":1052,"object":{"type":"MemberExpression","start":1036,"end":1046,"object":{"type":"Identifier","start":1036,"end":1041,"name":"event"},"property":{"type":"Identifier","start":1042,"end":1046,"name":"data"},"computed":false},"property":{"type":"Identifier","start":1047,"end":1052,"name":"files"},"computed":false}]}},{"type":"ExpressionStatement","start":1064,"end":1129,"expression":{"type":"CallExpression","start":1064,"end":1129,"callee":{"type":"MemberExpression","start":1064,"end":1107,"object":{"type":"MemberExpression","start":1064,"end":1087,"object":{"type":"Identifier","start":1064,"end":1073,"name":"navigator"},"property":{"type":"Identifier","start":1074,"end":1087,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":1088,"end":1107,"name":"removeEventListener"},"computed":false},"arguments":[{"type":"Literal","start":1108,"end":1117,"value":"message","raw":"'message'"},{"type":"Identifier","start":1119,"end":1128,"name":"onMessage"}]}},{"type":"BreakStatement","start":1140,"end":1145,"label":null}],"test":{"type":"Literal","start":994,"end":1010,"value":"uppy/ALL_FILES","raw":"'uppy/ALL_FILES'"}}]}]}}}],"kind":"const"},{"type":"ExpressionStatement","start":1165,"end":1386,"expression":{"type":"CallExpression","start":1165,"end":1386,"callee":{"type":"MemberExpression","start":1165,"end":1180,"object":{"type":"MemberExpression","start":1165,"end":1175,"object":{"type":"ThisExpression","start":1165,"end":1169},"property":{"type":"Identifier","start":1170,"end":1175,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":1176,"end":1180,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1181,"end":1385,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1187,"end":1385,"body":[{"type":"ExpressionStatement","start":1195,"end":1257,"expression":{"type":"CallExpression","start":1195,"end":1257,"callee":{"type":"MemberExpression","start":1195,"end":1235,"object":{"type":"MemberExpression","start":1195,"end":1218,"object":{"type":"Identifier","start":1195,"end":1204,"name":"navigator"},"property":{"type":"Identifier","start":1205,"end":1218,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":1219,"end":1235,"name":"addEventListener"},"computed":false},"arguments":[{"type":"Literal","start":1236,"end":1245,"value":"message","raw":"'message'"},{"type":"Identifier","start":1247,"end":1256,"name":"onMessage"}]}},{"type":"ExpressionStatement","start":1265,"end":1379,"expression":{"type":"CallExpression","start":1265,"end":1379,"callee":{"type":"MemberExpression","start":1265,"end":1311,"object":{"type":"MemberExpression","start":1265,"end":1299,"object":{"type":"MemberExpression","start":1265,"end":1288,"object":{"type":"Identifier","start":1265,"end":1274,"name":"navigator"},"property":{"type":"Identifier","start":1275,"end":1288,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":1289,"end":1299,"name":"controller"},"computed":false},"property":{"type":"Identifier","start":1300,"end":1311,"name":"postMessage"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1312,"end":1378,"properties":[{"type":"Property","start":1322,"end":1344,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1322,"end":1326,"name":"type"},"value":{"type":"Literal","start":1328,"end":1344,"value":"uppy/GET_FILES","raw":"'uppy/GET_FILES'"},"kind":"init"},{"type":"Property","start":1354,"end":1370,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1354,"end":1359,"name":"store"},"value":{"type":"MemberExpression","start":1361,"end":1370,"object":{"type":"ThisExpression","start":1361,"end":1365},"property":{"type":"Identifier","start":1366,"end":1370,"name":"name"},"computed":false},"kind":"init"}]}]}}]}}]}},{"type":"ReturnStatement","start":1392,"end":1406,"argument":{"type":"Identifier","start":1399,"end":1406,"name":"promise"}}]}}},{"type":"MethodDefinition","start":1414,"end":1612,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1414,"end":1417,"name":"put"},"value":{"type":"FunctionExpression","start":1418,"end":1612,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1419,"end":1423,"name":"file"}],"body":{"type":"BlockStatement","start":1425,"end":1612,"body":[{"type":"ReturnStatement","start":1431,"end":1608,"argument":{"type":"CallExpression","start":1438,"end":1608,"callee":{"type":"MemberExpression","start":1438,"end":1453,"object":{"type":"MemberExpression","start":1438,"end":1448,"object":{"type":"ThisExpression","start":1438,"end":1442},"property":{"type":"Identifier","start":1443,"end":1448,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":1449,"end":1453,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1454,"end":1607,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1460,"end":1607,"body":[{"type":"ExpressionStatement","start":1468,"end":1601,"expression":{"type":"CallExpression","start":1468,"end":1601,"callee":{"type":"MemberExpression","start":1468,"end":1514,"object":{"type":"MemberExpression","start":1468,"end":1502,"object":{"type":"MemberExpression","start":1468,"end":1491,"object":{"type":"Identifier","start":1468,"end":1477,"name":"navigator"},"property":{"type":"Identifier","start":1478,"end":1491,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":1492,"end":1502,"name":"controller"},"computed":false},"property":{"type":"Identifier","start":1503,"end":1514,"name":"postMessage"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1515,"end":1600,"properties":[{"type":"Property","start":1525,"end":1546,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1525,"end":1529,"name":"type"},"value":{"type":"Literal","start":1531,"end":1546,"value":"uppy/ADD_FILE","raw":"'uppy/ADD_FILE'"},"kind":"init"},{"type":"Property","start":1556,"end":1572,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1556,"end":1561,"name":"store"},"value":{"type":"MemberExpression","start":1563,"end":1572,"object":{"type":"ThisExpression","start":1563,"end":1567},"property":{"type":"Identifier","start":1568,"end":1572,"name":"name"},"computed":false},"kind":"init"},{"type":"Property","start":1582,"end":1592,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1582,"end":1586,"name":"file"},"value":{"type":"Identifier","start":1588,"end":1592,"name":"file"},"kind":"init"}]}]}}]}}]}}]}}},{"type":"MethodDefinition","start":1616,"end":1826,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1616,"end":1622,"name":"delete"},"value":{"type":"FunctionExpression","start":1623,"end":1826,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1624,"end":1630,"name":"fileID"}],"body":{"type":"BlockStatement","start":1632,"end":1826,"body":[{"type":"ReturnStatement","start":1638,"end":1822,"argument":{"type":"CallExpression","start":1645,"end":1822,"callee":{"type":"MemberExpression","start":1645,"end":1660,"object":{"type":"MemberExpression","start":1645,"end":1655,"object":{"type":"ThisExpression","start":1645,"end":1649},"property":{"type":"Identifier","start":1650,"end":1655,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":1656,"end":1660,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1661,"end":1821,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1667,"end":1821,"body":[{"type":"ExpressionStatement","start":1675,"end":1815,"expression":{"type":"CallExpression","start":1675,"end":1815,"callee":{"type":"MemberExpression","start":1675,"end":1721,"object":{"type":"MemberExpression","start":1675,"end":1709,"object":{"type":"MemberExpression","start":1675,"end":1698,"object":{"type":"Identifier","start":1675,"end":1684,"name":"navigator"},"property":{"type":"Identifier","start":1685,"end":1698,"name":"serviceWorker"},"computed":false},"property":{"type":"Identifier","start":1699,"end":1709,"name":"controller"},"computed":false},"property":{"type":"Identifier","start":1710,"end":1721,"name":"postMessage"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1722,"end":1814,"properties":[{"type":"Property","start":1732,"end":1756,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1732,"end":1736,"name":"type"},"value":{"type":"Literal","start":1738,"end":1756,"value":"uppy/REMOVE_FILE","raw":"'uppy/REMOVE_FILE'"},"kind":"init"},{"type":"Property","start":1766,"end":1782,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1766,"end":1771,"name":"store"},"value":{"type":"MemberExpression","start":1773,"end":1782,"object":{"type":"ThisExpression","start":1773,"end":1777},"property":{"type":"Identifier","start":1778,"end":1782,"name":"name"},"computed":false},"kind":"init"},{"type":"Property","start":1792,"end":1806,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1792,"end":1798,"name":"fileID"},"value":{"type":"Identifier","start":1800,"end":1806,"name":"fileID"},"kind":"init"}]}]}}]}}]}}]}}}]}},{"type":"ExpressionStatement","start":1830,"end":1874,"expression":{"type":"AssignmentExpression","start":1830,"end":1874,"operator":"=","left":{"type":"MemberExpression","start":1830,"end":1860,"object":{"type":"Identifier","start":1830,"end":1848,"name":"ServiceWorkerStore"},"property":{"type":"Identifier","start":1849,"end":1860,"name":"isSupported"},"computed":false},"right":{"type":"Identifier","start":1863,"end":1874,"name":"isSupported"}}},{"type":"ExpressionStatement","start":1876,"end":1911,"expression":{"type":"AssignmentExpression","start":1876,"end":1911,"operator":"=","left":{"type":"MemberExpression","start":1876,"end":1890,"object":{"type":"Identifier","start":1876,"end":1882,"name":"module"},"property":{"type":"Identifier","start":1883,"end":1890,"name":"exports"},"computed":false},"right":{"type":"Identifier","start":1893,"end":1911,"name":"ServiceWorkerStore"}}}],"sourceType":"script"}