{"type":"Program","start":0,"end":7546,"body":[{"type":"FunctionDeclaration","start":0,"end":317,"id":{"type":"Identifier","start":9,"end":17,"name":"_extends"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":20,"end":317,"body":[{"type":"ExpressionStatement","start":22,"end":275,"expression":{"type":"AssignmentExpression","start":22,"end":274,"operator":"=","left":{"type":"Identifier","start":22,"end":30,"name":"_extends"},"right":{"type":"LogicalExpression","start":33,"end":274,"left":{"type":"MemberExpression","start":33,"end":46,"object":{"type":"Identifier","start":33,"end":39,"name":"Object"},"property":{"type":"Identifier","start":40,"end":46,"name":"assign"},"computed":false},"operator":"||","right":{"type":"FunctionExpression","start":50,"end":274,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":60,"end":66,"name":"target"}],"body":{"type":"BlockStatement","start":68,"end":274,"body":[{"type":"ForStatement","start":70,"end":257,"init":{"type":"VariableDeclaration","start":75,"end":84,"declarations":[{"type":"VariableDeclarator","start":79,"end":84,"id":{"type":"Identifier","start":79,"end":80,"name":"i"},"init":{"type":"Literal","start":83,"end":84,"value":1,"raw":"1"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":86,"end":106,"left":{"type":"Identifier","start":86,"end":87,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":90,"end":106,"object":{"type":"Identifier","start":90,"end":99,"name":"arguments"},"property":{"type":"Identifier","start":100,"end":106,"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":108,"end":111,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":108,"end":109,"name":"i"}},"body":{"type":"BlockStatement","start":113,"end":257,"body":[{"type":"VariableDeclaration","start":115,"end":141,"declarations":[{"type":"VariableDeclarator","start":119,"end":140,"id":{"type":"Identifier","start":119,"end":125,"name":"source"},"init":{"type":"MemberExpression","start":128,"end":140,"object":{"type":"Identifier","start":128,"end":137,"name":"arguments"},"property":{"type":"Identifier","start":138,"end":139,"name":"i"},"computed":true}}],"kind":"var"},{"type":"ForInStatement","start":142,"end":255,"left":{"type":"VariableDeclaration","start":147,"end":154,"declarations":[{"type":"VariableDeclarator","start":151,"end":154,"id":{"type":"Identifier","start":151,"end":154,"name":"key"},"init":null}],"kind":"var"},"right":{"type":"Identifier","start":158,"end":164,"name":"source"},"body":{"type":"BlockStatement","start":166,"end":255,"body":[{"type":"IfStatement","start":168,"end":253,"test":{"type":"CallExpression","start":172,"end":221,"callee":{"type":"MemberExpression","start":172,"end":208,"object":{"type":"MemberExpression","start":172,"end":203,"object":{"type":"MemberExpression","start":172,"end":188,"object":{"type":"Identifier","start":172,"end":178,"name":"Object"},"property":{"type":"Identifier","start":179,"end":188,"name":"prototype"},"computed":false},"property":{"type":"Identifier","start":189,"end":203,"name":"hasOwnProperty"},"computed":false},"property":{"type":"Identifier","start":204,"end":208,"name":"call"},"computed":false},"arguments":[{"type":"Identifier","start":209,"end":215,"name":"source"},{"type":"Identifier","start":217,"end":220,"name":"key"}]},"consequent":{"type":"BlockStatement","start":223,"end":253,"body":[{"type":"ExpressionStatement","start":225,"end":251,"expression":{"type":"AssignmentExpression","start":225,"end":250,"operator":"=","left":{"type":"MemberExpression","start":225,"end":236,"object":{"type":"Identifier","start":225,"end":231,"name":"target"},"property":{"type":"Identifier","start":232,"end":235,"name":"key"},"computed":true},"right":{"type":"MemberExpression","start":239,"end":250,"object":{"type":"Identifier","start":239,"end":245,"name":"source"},"property":{"type":"Identifier","start":246,"end":249,"name":"key"},"computed":true}}}]},"alternate":null}]}}]}},{"type":"ReturnStatement","start":258,"end":272,"argument":{"type":"Identifier","start":265,"end":271,"name":"target"}}]}}}}},{"type":"ReturnStatement","start":276,"end":315,"argument":{"type":"CallExpression","start":283,"end":314,"callee":{"type":"MemberExpression","start":283,"end":297,"object":{"type":"Identifier","start":283,"end":291,"name":"_extends"},"property":{"type":"Identifier","start":292,"end":297,"name":"apply"},"computed":false},"arguments":[{"type":"ThisExpression","start":298,"end":302},{"type":"Identifier","start":304,"end":313,"name":"arguments"}]}}]}},{"type":"VariableDeclaration","start":319,"end":378,"declarations":[{"type":"VariableDeclarator","start":323,"end":377,"id":{"type":"Identifier","start":323,"end":336,"name":"prettierBytes"},"init":{"type":"CallExpression","start":339,"end":377,"callee":{"type":"Identifier","start":339,"end":346,"name":"require"},"arguments":[{"type":"Literal","start":347,"end":376,"value":"@transloadit/prettier-bytes","raw":"'@transloadit/prettier-bytes'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":380,"end":540,"declarations":[{"type":"VariableDeclarator","start":384,"end":539,"id":{"type":"Identifier","start":384,"end":393,"name":"indexedDB"},"init":{"type":"LogicalExpression","start":396,"end":539,"left":{"type":"BinaryExpression","start":396,"end":425,"left":{"type":"UnaryExpression","start":396,"end":409,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":403,"end":409,"name":"window"}},"operator":"!==","right":{"type":"Literal","start":414,"end":425,"value":"undefined","raw":"'undefined'"}},"operator":"&&","right":{"type":"LogicalExpression","start":430,"end":538,"left":{"type":"LogicalExpression","start":430,"end":516,"left":{"type":"LogicalExpression","start":430,"end":495,"left":{"type":"LogicalExpression","start":430,"end":472,"left":{"type":"MemberExpression","start":430,"end":446,"object":{"type":"Identifier","start":430,"end":436,"name":"window"},"property":{"type":"Identifier","start":437,"end":446,"name":"indexedDB"},"computed":false},"operator":"||","right":{"type":"MemberExpression","start":450,"end":472,"object":{"type":"Identifier","start":450,"end":456,"name":"window"},"property":{"type":"Identifier","start":457,"end":472,"name":"webkitIndexedDB"},"computed":false}},"operator":"||","right":{"type":"MemberExpression","start":476,"end":495,"object":{"type":"Identifier","start":476,"end":482,"name":"window"},"property":{"type":"Identifier","start":483,"end":495,"name":"mozIndexedDB"},"computed":false}},"operator":"||","right":{"type":"MemberExpression","start":499,"end":516,"object":{"type":"Identifier","start":499,"end":505,"name":"window"},"property":{"type":"Identifier","start":506,"end":516,"name":"OIndexedDB"},"computed":false}},"operator":"||","right":{"type":"MemberExpression","start":520,"end":538,"object":{"type":"Identifier","start":520,"end":526,"name":"window"},"property":{"type":"Identifier","start":527,"end":538,"name":"msIndexedDB"},"computed":false}}}}],"kind":"var"},{"type":"VariableDeclaration","start":541,"end":571,"declarations":[{"type":"VariableDeclarator","start":545,"end":570,"id":{"type":"Identifier","start":545,"end":556,"name":"isSupported"},"init":{"type":"UnaryExpression","start":559,"end":570,"operator":"!","prefix":true,"argument":{"type":"UnaryExpression","start":560,"end":570,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":561,"end":570,"name":"indexedDB"}}}}],"kind":"var"},{"type":"VariableDeclaration","start":572,"end":599,"declarations":[{"type":"VariableDeclarator","start":576,"end":598,"id":{"type":"Identifier","start":576,"end":583,"name":"DB_NAME"},"init":{"type":"Literal","start":586,"end":598,"value":"uppy-blobs","raw":"'uppy-blobs'"}}],"kind":"var"},{"type":"VariableDeclaration","start":600,"end":625,"declarations":[{"type":"VariableDeclarator","start":604,"end":624,"id":{"type":"Identifier","start":604,"end":614,"name":"STORE_NAME"},"init":{"type":"Literal","start":617,"end":624,"value":"files","raw":"'files'"}}],"kind":"var"},{"type":"VariableDeclaration","start":673,"end":714,"declarations":[{"type":"VariableDeclarator","start":677,"end":713,"id":{"type":"Identifier","start":677,"end":691,"name":"DEFAULT_EXPIRY"},"init":{"type":"BinaryExpression","start":694,"end":713,"left":{"type":"BinaryExpression","start":694,"end":706,"left":{"type":"BinaryExpression","start":694,"end":701,"left":{"type":"Literal","start":694,"end":696,"value":24,"raw":"24"},"operator":"*","right":{"type":"Literal","start":699,"end":701,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":704,"end":706,"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":709,"end":713,"value":1000,"raw":"1000"}}}],"kind":"var"},{"type":"VariableDeclaration","start":728,"end":747,"declarations":[{"type":"VariableDeclarator","start":732,"end":746,"id":{"type":"Identifier","start":732,"end":742,"name":"DB_VERSION"},"init":{"type":"Literal","start":745,"end":746,"value":3,"raw":"3"}}],"kind":"var"},{"type":"FunctionDeclaration","start":806,"end":1110,"id":{"type":"Identifier","start":815,"end":832,"name":"migrateExpiration"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":833,"end":838,"name":"store"}],"body":{"type":"BlockStatement","start":840,"end":1110,"body":[{"type":"VariableDeclaration","start":844,"end":877,"declarations":[{"type":"VariableDeclarator","start":848,"end":876,"id":{"type":"Identifier","start":848,"end":855,"name":"request"},"init":{"type":"CallExpression","start":858,"end":876,"callee":{"type":"MemberExpression","start":858,"end":874,"object":{"type":"Identifier","start":858,"end":863,"name":"store"},"property":{"type":"Identifier","start":864,"end":874,"name":"openCursor"},"computed":false},"arguments":[]}}],"kind":"var"},{"type":"ExpressionStatement","start":881,"end":1108,"expression":{"type":"AssignmentExpression","start":881,"end":1107,"operator":"=","left":{"type":"MemberExpression","start":881,"end":898,"object":{"type":"Identifier","start":881,"end":888,"name":"request"},"property":{"type":"Identifier","start":889,"end":898,"name":"onsuccess"},"computed":false},"right":{"type":"FunctionExpression","start":901,"end":1107,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":911,"end":916,"name":"event"}],"body":{"type":"BlockStatement","start":918,"end":1107,"body":[{"type":"VariableDeclaration","start":924,"end":957,"declarations":[{"type":"VariableDeclarator","start":928,"end":956,"id":{"type":"Identifier","start":928,"end":934,"name":"cursor"},"init":{"type":"MemberExpression","start":937,"end":956,"object":{"type":"MemberExpression","start":937,"end":949,"object":{"type":"Identifier","start":937,"end":942,"name":"event"},"property":{"type":"Identifier","start":943,"end":949,"name":"target"},"computed":false},"property":{"type":"Identifier","start":950,"end":956,"name":"result"},"computed":false}}],"kind":"var"},{"type":"IfStatement","start":963,"end":997,"test":{"type":"UnaryExpression","start":967,"end":974,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":968,"end":974,"name":"cursor"}},"consequent":{"type":"BlockStatement","start":976,"end":997,"body":[{"type":"ReturnStatement","start":984,"end":991,"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":1003,"end":1028,"declarations":[{"type":"VariableDeclarator","start":1007,"end":1027,"id":{"type":"Identifier","start":1007,"end":1012,"name":"entry"},"init":{"type":"MemberExpression","start":1015,"end":1027,"object":{"type":"Identifier","start":1015,"end":1021,"name":"cursor"},"property":{"type":"Identifier","start":1022,"end":1027,"name":"value"},"computed":false}}],"kind":"var"},{"type":"ExpressionStatement","start":1033,"end":1077,"expression":{"type":"AssignmentExpression","start":1033,"end":1076,"operator":"=","left":{"type":"MemberExpression","start":1033,"end":1046,"object":{"type":"Identifier","start":1033,"end":1038,"name":"entry"},"property":{"type":"Identifier","start":1039,"end":1046,"name":"expires"},"computed":false},"right":{"type":"BinaryExpression","start":1049,"end":1076,"left":{"type":"CallExpression","start":1049,"end":1059,"callee":{"type":"MemberExpression","start":1049,"end":1057,"object":{"type":"Identifier","start":1049,"end":1053,"name":"Date"},"property":{"type":"Identifier","start":1054,"end":1057,"name":"now"},"computed":false},"arguments":[]},"operator":"+","right":{"type":"Identifier","start":1062,"end":1076,"name":"DEFAULT_EXPIRY"}}}},{"type":"ExpressionStatement","start":1082,"end":1103,"expression":{"type":"CallExpression","start":1082,"end":1102,"callee":{"type":"MemberExpression","start":1082,"end":1095,"object":{"type":"Identifier","start":1082,"end":1088,"name":"cursor"},"property":{"type":"Identifier","start":1089,"end":1095,"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":1096,"end":1101,"name":"entry"}]}}]}}}}]}},{"type":"FunctionDeclaration","start":1112,"end":2132,"id":{"type":"Identifier","start":1121,"end":1128,"name":"connect"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1129,"end":1135,"name":"dbName"}],"body":{"type":"BlockStatement","start":1137,"end":2132,"body":[{"type":"VariableDeclaration","start":1141,"end":1190,"declarations":[{"type":"VariableDeclarator","start":1145,"end":1189,"id":{"type":"Identifier","start":1145,"end":1152,"name":"request"},"init":{"type":"CallExpression","start":1155,"end":1189,"callee":{"type":"MemberExpression","start":1155,"end":1169,"object":{"type":"Identifier","start":1155,"end":1164,"name":"indexedDB"},"property":{"type":"Identifier","start":1165,"end":1169,"name":"open"},"computed":false},"arguments":[{"type":"Identifier","start":1170,"end":1176,"name":"dbName"},{"type":"Identifier","start":1178,"end":1188,"name":"DB_VERSION"}]}}],"kind":"var"},{"type":"ReturnStatement","start":1193,"end":2130,"argument":{"type":"NewExpression","start":1200,"end":2129,"callee":{"type":"Identifier","start":1204,"end":1211,"name":"Promise"},"arguments":[{"type":"FunctionExpression","start":1212,"end":2128,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1222,"end":1229,"name":"resolve"},{"type":"Identifier","start":1231,"end":1237,"name":"reject"}],"body":{"type":"BlockStatement","start":1239,"end":2128,"body":[{"type":"ExpressionStatement","start":1245,"end":2006,"expression":{"type":"AssignmentExpression","start":1245,"end":2005,"operator":"=","left":{"type":"MemberExpression","start":1245,"end":1268,"object":{"type":"Identifier","start":1245,"end":1252,"name":"request"},"property":{"type":"Identifier","start":1253,"end":1268,"name":"onupgradeneeded"},"computed":false},"right":{"type":"FunctionExpression","start":1271,"end":2005,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1281,"end":1286,"name":"event"}],"body":{"type":"BlockStatement","start":1288,"end":2005,"body":[{"type":"VariableDeclaration","start":1296,"end":1325,"declarations":[{"type":"VariableDeclarator","start":1300,"end":1324,"id":{"type":"Identifier","start":1300,"end":1302,"name":"db"},"init":{"type":"MemberExpression","start":1305,"end":1324,"object":{"type":"MemberExpression","start":1305,"end":1317,"object":{"type":"Identifier","start":1305,"end":1310,"name":"event"},"property":{"type":"Identifier","start":1311,"end":1317,"name":"target"},"computed":false},"property":{"type":"Identifier","start":1318,"end":1324,"name":"result"},"computed":false}}],"kind":"var"},{"type":"VariableDeclaration","start":1332,"end":1382,"declarations":[{"type":"VariableDeclarator","start":1336,"end":1381,"id":{"type":"Identifier","start":1336,"end":1347,"name":"transaction"},"init":{"type":"MemberExpression","start":1350,"end":1381,"object":{"type":"MemberExpression","start":1350,"end":1369,"object":{"type":"Identifier","start":1350,"end":1355,"name":"event"},"property":{"type":"Identifier","start":1356,"end":1369,"name":"currentTarget"},"computed":false},"property":{"type":"Identifier","start":1370,"end":1381,"name":"transaction"},"computed":false}}],"kind":"var"},{"type":"IfStatement","start":1390,"end":1675,"test":{"type":"BinaryExpression","start":1394,"end":1414,"left":{"type":"MemberExpression","start":1394,"end":1410,"object":{"type":"Identifier","start":1394,"end":1399,"name":"event"},"property":{"type":"Identifier","start":1400,"end":1410,"name":"oldVersion"},"computed":false},"operator":"<","right":{"type":"Literal","start":1413,"end":1414,"value":2,"raw":"2"}},"consequent":{"type":"BlockStatement","start":1416,"end":1675,"body":[{"type":"VariableDeclaration","start":1503,"end":1585,"declarations":[{"type":"VariableDeclarator","start":1507,"end":1584,"id":{"type":"Identifier","start":1507,"end":1512,"name":"store"},"init":{"type":"CallExpression","start":1515,"end":1584,"callee":{"type":"MemberExpression","start":1515,"end":1535,"object":{"type":"Identifier","start":1515,"end":1517,"name":"db"},"property":{"type":"Identifier","start":1518,"end":1535,"name":"createObjectStore"},"computed":false},"arguments":[{"type":"Identifier","start":1536,"end":1546,"name":"STORE_NAME"},{"type":"ObjectExpression","start":1548,"end":1583,"properties":[{"type":"Property","start":1560,"end":1573,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1560,"end":1567,"name":"keyPath"},"value":{"type":"Literal","start":1569,"end":1573,"value":"id","raw":"'id'"},"kind":"init"}]}]}}],"kind":"var"},{"type":"ExpressionStatement","start":1594,"end":1667,"expression":{"type":"CallExpression","start":1594,"end":1666,"callee":{"type":"MemberExpression","start":1594,"end":1611,"object":{"type":"Identifier","start":1594,"end":1599,"name":"store"},"property":{"type":"Identifier","start":1600,"end":1611,"name":"createIndex"},"computed":false},"arguments":[{"type":"Literal","start":1612,"end":1619,"value":"store","raw":"'store'"},{"type":"Literal","start":1621,"end":1628,"value":"store","raw":"'store'"},{"type":"ObjectExpression","start":1630,"end":1665,"properties":[{"type":"Property","start":1642,"end":1655,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1642,"end":1648,"name":"unique"},"value":{"type":"Literal","start":1650,"end":1655,"value":false,"raw":"false"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":1683,"end":1923,"test":{"type":"BinaryExpression","start":1687,"end":1707,"left":{"type":"MemberExpression","start":1687,"end":1703,"object":{"type":"Identifier","start":1687,"end":1692,"name":"event"},"property":{"type":"Identifier","start":1693,"end":1703,"name":"oldVersion"},"computed":false},"operator":"<","right":{"type":"Literal","start":1706,"end":1707,"value":3,"raw":"3"}},"consequent":{"type":"BlockStatement","start":1709,"end":1923,"body":[{"type":"VariableDeclaration","start":1742,"end":1791,"declarations":[{"type":"VariableDeclarator","start":1746,"end":1790,"id":{"type":"Identifier","start":1746,"end":1752,"name":"_store"},"init":{"type":"CallExpression","start":1755,"end":1790,"callee":{"type":"MemberExpression","start":1755,"end":1778,"object":{"type":"Identifier","start":1755,"end":1766,"name":"transaction"},"property":{"type":"Identifier","start":1767,"end":1778,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":1779,"end":1789,"name":"STORE_NAME"}]}}],"kind":"var"},{"type":"ExpressionStatement","start":1801,"end":1879,"expression":{"type":"CallExpression","start":1801,"end":1878,"callee":{"type":"MemberExpression","start":1801,"end":1819,"object":{"type":"Identifier","start":1801,"end":1807,"name":"_store"},"property":{"type":"Identifier","start":1808,"end":1819,"name":"createIndex"},"computed":false},"arguments":[{"type":"Literal","start":1820,"end":1829,"value":"expires","raw":"'expires'"},{"type":"Literal","start":1831,"end":1840,"value":"expires","raw":"'expires'"},{"type":"ObjectExpression","start":1842,"end":1877,"properties":[{"type":"Property","start":1854,"end":1867,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1854,"end":1860,"name":"unique"},"value":{"type":"Literal","start":1862,"end":1867,"value":false,"raw":"false"},"kind":"init"}]}]}},{"type":"ExpressionStatement","start":1889,"end":1915,"expression":{"type":"CallExpression","start":1889,"end":1914,"callee":{"type":"Identifier","start":1889,"end":1906,"name":"migrateExpiration"},"arguments":[{"type":"Identifier","start":1907,"end":1913,"name":"_store"}]}}]},"alternate":null},{"type":"ExpressionStatement","start":1931,"end":1999,"expression":{"type":"AssignmentExpression","start":1931,"end":1998,"operator":"=","left":{"type":"MemberExpression","start":1931,"end":1953,"object":{"type":"Identifier","start":1931,"end":1942,"name":"transaction"},"property":{"type":"Identifier","start":1943,"end":1953,"name":"oncomplete"},"computed":false},"right":{"type":"FunctionExpression","start":1956,"end":1998,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1968,"end":1998,"body":[{"type":"ExpressionStatement","start":1978,"end":1990,"expression":{"type":"CallExpression","start":1978,"end":1989,"callee":{"type":"Identifier","start":1978,"end":1985,"name":"resolve"},"arguments":[{"type":"Identifier","start":1986,"end":1988,"name":"db"}]}}]}}}}]}}}},{"type":"ExpressionStatement","start":2012,"end":2093,"expression":{"type":"AssignmentExpression","start":2012,"end":2092,"operator":"=","left":{"type":"MemberExpression","start":2012,"end":2029,"object":{"type":"Identifier","start":2012,"end":2019,"name":"request"},"property":{"type":"Identifier","start":2020,"end":2029,"name":"onsuccess"},"computed":false},"right":{"type":"FunctionExpression","start":2032,"end":2092,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2042,"end":2047,"name":"event"}],"body":{"type":"BlockStatement","start":2049,"end":2092,"body":[{"type":"ExpressionStatement","start":2057,"end":2086,"expression":{"type":"CallExpression","start":2057,"end":2085,"callee":{"type":"Identifier","start":2057,"end":2064,"name":"resolve"},"arguments":[{"type":"MemberExpression","start":2065,"end":2084,"object":{"type":"MemberExpression","start":2065,"end":2077,"object":{"type":"Identifier","start":2065,"end":2070,"name":"event"},"property":{"type":"Identifier","start":2071,"end":2077,"name":"target"},"computed":false},"property":{"type":"Identifier","start":2078,"end":2084,"name":"result"},"computed":false}]}}]}}}},{"type":"ExpressionStatement","start":2099,"end":2124,"expression":{"type":"AssignmentExpression","start":2099,"end":2123,"operator":"=","left":{"type":"MemberExpression","start":2099,"end":2114,"object":{"type":"Identifier","start":2099,"end":2106,"name":"request"},"property":{"type":"Identifier","start":2107,"end":2114,"name":"onerror"},"computed":false},"right":{"type":"Identifier","start":2117,"end":2123,"name":"reject"}}}]}}]}}]}},{"type":"FunctionDeclaration","start":2134,"end":2343,"id":{"type":"Identifier","start":2143,"end":2157,"name":"waitForRequest"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2158,"end":2165,"name":"request"}],"body":{"type":"BlockStatement","start":2167,"end":2343,"body":[{"type":"ReturnStatement","start":2171,"end":2341,"argument":{"type":"NewExpression","start":2178,"end":2340,"callee":{"type":"Identifier","start":2182,"end":2189,"name":"Promise"},"arguments":[{"type":"FunctionExpression","start":2190,"end":2339,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2200,"end":2207,"name":"resolve"},{"type":"Identifier","start":2209,"end":2215,"name":"reject"}],"body":{"type":"BlockStatement","start":2217,"end":2339,"body":[{"type":"ExpressionStatement","start":2223,"end":2304,"expression":{"type":"AssignmentExpression","start":2223,"end":2303,"operator":"=","left":{"type":"MemberExpression","start":2223,"end":2240,"object":{"type":"Identifier","start":2223,"end":2230,"name":"request"},"property":{"type":"Identifier","start":2231,"end":2240,"name":"onsuccess"},"computed":false},"right":{"type":"FunctionExpression","start":2243,"end":2303,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2253,"end":2258,"name":"event"}],"body":{"type":"BlockStatement","start":2260,"end":2303,"body":[{"type":"ExpressionStatement","start":2268,"end":2297,"expression":{"type":"CallExpression","start":2268,"end":2296,"callee":{"type":"Identifier","start":2268,"end":2275,"name":"resolve"},"arguments":[{"type":"MemberExpression","start":2276,"end":2295,"object":{"type":"MemberExpression","start":2276,"end":2288,"object":{"type":"Identifier","start":2276,"end":2281,"name":"event"},"property":{"type":"Identifier","start":2282,"end":2288,"name":"target"},"computed":false},"property":{"type":"Identifier","start":2289,"end":2295,"name":"result"},"computed":false}]}}]}}}},{"type":"ExpressionStatement","start":2310,"end":2335,"expression":{"type":"AssignmentExpression","start":2310,"end":2334,"operator":"=","left":{"type":"MemberExpression","start":2310,"end":2325,"object":{"type":"Identifier","start":2310,"end":2317,"name":"request"},"property":{"type":"Identifier","start":2318,"end":2325,"name":"onerror"},"computed":false},"right":{"type":"Identifier","start":2328,"end":2334,"name":"reject"}}}]}}]}}]}},{"type":"VariableDeclaration","start":2345,"end":2367,"declarations":[{"type":"VariableDeclarator","start":2349,"end":2366,"id":{"type":"Identifier","start":2349,"end":2358,"name":"cleanedUp"},"init":{"type":"Literal","start":2361,"end":2366,"value":false,"raw":"false"}}],"kind":"var"},{"type":"VariableDeclaration","start":2369,"end":7470,"declarations":[{"type":"VariableDeclarator","start":2373,"end":7469,"id":{"type":"Identifier","start":2373,"end":2387,"name":"IndexedDBStore"},"init":{"type":"CallExpression","start":2403,"end":7469,"callee":{"type":"FunctionExpression","start":2403,"end":7467,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2415,"end":7467,"body":[{"type":"FunctionDeclaration","start":2419,"end":3053,"id":{"type":"Identifier","start":2428,"end":2442,"name":"IndexedDBStore"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2443,"end":2447,"name":"opts"}],"body":{"type":"BlockStatement","start":2449,"end":3053,"body":[{"type":"VariableDeclaration","start":2455,"end":2472,"declarations":[{"type":"VariableDeclarator","start":2459,"end":2471,"id":{"type":"Identifier","start":2459,"end":2464,"name":"_this"},"init":{"type":"ThisExpression","start":2467,"end":2471}}],"kind":"var"},{"type":"ExpressionStatement","start":2478,"end":2715,"expression":{"type":"AssignmentExpression","start":2478,"end":2714,"operator":"=","left":{"type":"MemberExpression","start":2478,"end":2487,"object":{"type":"ThisExpression","start":2478,"end":2482},"property":{"type":"Identifier","start":2483,"end":2487,"name":"opts"},"computed":false},"right":{"type":"CallExpression","start":2490,"end":2714,"callee":{"type":"Identifier","start":2490,"end":2498,"name":"_extends"},"arguments":[{"type":"ObjectExpression","start":2499,"end":2707,"properties":[{"type":"Property","start":2507,"end":2522,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2507,"end":2513,"name":"dbName"},"value":{"type":"Identifier","start":2515,"end":2522,"name":"DB_NAME"},"kind":"init"},{"type":"Property","start":2530,"end":2550,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2530,"end":2539,"name":"storeName"},"value":{"type":"Literal","start":2541,"end":2550,"value":"default","raw":"'default'"},"kind":"init"},{"type":"Property","start":2558,"end":2581,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2558,"end":2565,"name":"expires"},"value":{"type":"Identifier","start":2567,"end":2581,"name":"DEFAULT_EXPIRY"},"kind":"init"},{"type":"Property","start":2607,"end":2636,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2607,"end":2618,"name":"maxFileSize"},"value":{"type":"BinaryExpression","start":2620,"end":2636,"left":{"type":"BinaryExpression","start":2620,"end":2629,"left":{"type":"Literal","start":2620,"end":2622,"value":10,"raw":"10"},"operator":"*","right":{"type":"Literal","start":2625,"end":2629,"value":1024,"raw":"1024"}},"operator":"*","right":{"type":"Literal","start":2632,"end":2636,"value":1024,"raw":"1024"}},"kind":"init"},{"type":"Property","start":2659,"end":2690,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2659,"end":2671,"name":"maxTotalSize"},"value":{"type":"BinaryExpression","start":2673,"end":2690,"left":{"type":"BinaryExpression","start":2673,"end":2683,"left":{"type":"Literal","start":2673,"end":2676,"value":300,"raw":"300"},"operator":"*","right":{"type":"Literal","start":2679,"end":2683,"value":1024,"raw":"1024"}},"operator":"*","right":{"type":"Literal","start":2686,"end":2690,"value":1024,"raw":"1024"}},"kind":"init"}]},{"type":"Identifier","start":2709,"end":2713,"name":"opts"}]}}},{"type":"ExpressionStatement","start":2720,"end":2752,"expression":{"type":"AssignmentExpression","start":2720,"end":2751,"operator":"=","left":{"type":"MemberExpression","start":2720,"end":2729,"object":{"type":"ThisExpression","start":2720,"end":2724},"property":{"type":"Identifier","start":2725,"end":2729,"name":"name"},"computed":false},"right":{"type":"MemberExpression","start":2732,"end":2751,"object":{"type":"MemberExpression","start":2732,"end":2741,"object":{"type":"ThisExpression","start":2732,"end":2736},"property":{"type":"Identifier","start":2737,"end":2741,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":2742,"end":2751,"name":"storeName"},"computed":false}}},{"type":"VariableDeclaration","start":2758,"end":2858,"declarations":[{"type":"VariableDeclarator","start":2762,"end":2857,"id":{"type":"Identifier","start":2762,"end":2778,"name":"createConnection"},"init":{"type":"FunctionExpression","start":2781,"end":2857,"id":{"type":"Identifier","start":2790,"end":2806,"name":"createConnection"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2809,"end":2857,"body":[{"type":"ReturnStatement","start":2817,"end":2851,"argument":{"type":"CallExpression","start":2824,"end":2850,"callee":{"type":"Identifier","start":2824,"end":2831,"name":"connect"},"arguments":[{"type":"MemberExpression","start":2832,"end":2849,"object":{"type":"MemberExpression","start":2832,"end":2842,"object":{"type":"Identifier","start":2832,"end":2837,"name":"_this"},"property":{"type":"Identifier","start":2838,"end":2842,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":2843,"end":2849,"name":"dbName"},"computed":false}]}}]}}}],"kind":"var"},{"type":"IfStatement","start":2864,"end":3049,"test":{"type":"UnaryExpression","start":2868,"end":2878,"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2869,"end":2878,"name":"cleanedUp"}},"consequent":{"type":"BlockStatement","start":2880,"end":2997,"body":[{"type":"ExpressionStatement","start":2888,"end":2905,"expression":{"type":"AssignmentExpression","start":2888,"end":2904,"operator":"=","left":{"type":"Identifier","start":2888,"end":2897,"name":"cleanedUp"},"right":{"type":"Literal","start":2900,"end":2904,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":2912,"end":2991,"expression":{"type":"AssignmentExpression","start":2912,"end":2990,"operator":"=","left":{"type":"MemberExpression","start":2912,"end":2922,"object":{"type":"ThisExpression","start":2912,"end":2916},"property":{"type":"Identifier","start":2917,"end":2922,"name":"ready"},"computed":false},"right":{"type":"CallExpression","start":2925,"end":2990,"callee":{"type":"MemberExpression","start":2925,"end":2954,"object":{"type":"CallExpression","start":2925,"end":2949,"callee":{"type":"MemberExpression","start":2925,"end":2947,"object":{"type":"Identifier","start":2925,"end":2939,"name":"IndexedDBStore"},"property":{"type":"Identifier","start":2940,"end":2947,"name":"cleanup"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":2950,"end":2954,"name":"then"},"computed":false},"arguments":[{"type":"Identifier","start":2955,"end":2971,"name":"createConnection"},{"type":"Identifier","start":2973,"end":2989,"name":"createConnection"}]}}}]},"alternate":{"type":"BlockStatement","start":3003,"end":3049,"body":[{"type":"ExpressionStatement","start":3011,"end":3043,"expression":{"type":"AssignmentExpression","start":3011,"end":3042,"operator":"=","left":{"type":"MemberExpression","start":3011,"end":3021,"object":{"type":"ThisExpression","start":3011,"end":3015},"property":{"type":"Identifier","start":3016,"end":3021,"name":"ready"},"computed":false},"right":{"type":"CallExpression","start":3024,"end":3042,"callee":{"type":"Identifier","start":3024,"end":3040,"name":"createConnection"},"arguments":[]}}}]}}]}},{"type":"VariableDeclaration","start":3057,"end":3095,"declarations":[{"type":"VariableDeclarator","start":3061,"end":3094,"id":{"type":"Identifier","start":3061,"end":3067,"name":"_proto"},"init":{"type":"MemberExpression","start":3070,"end":3094,"object":{"type":"Identifier","start":3070,"end":3084,"name":"IndexedDBStore"},"property":{"type":"Identifier","start":3085,"end":3094,"name":"prototype"},"computed":false}}],"kind":"var"},{"type":"ExpressionStatement","start":3099,"end":3240,"expression":{"type":"AssignmentExpression","start":3099,"end":3175,"operator":"=","left":{"type":"MemberExpression","start":3099,"end":3109,"object":{"type":"Identifier","start":3099,"end":3105,"name":"_proto"},"property":{"type":"Identifier","start":3106,"end":3109,"name":"key"},"computed":false},"right":{"type":"FunctionExpression","start":3112,"end":3175,"id":{"type":"Identifier","start":3121,"end":3124,"name":"key"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3125,"end":3131,"name":"fileID"}],"body":{"type":"BlockStatement","start":3133,"end":3175,"body":[{"type":"ReturnStatement","start":3139,"end":3171,"argument":{"type":"BinaryExpression","start":3146,"end":3170,"left":{"type":"BinaryExpression","start":3146,"end":3161,"left":{"type":"MemberExpression","start":3146,"end":3155,"object":{"type":"ThisExpression","start":3146,"end":3150},"property":{"type":"Identifier","start":3151,"end":3155,"name":"name"},"computed":false},"operator":"+","right":{"type":"Literal","start":3158,"end":3161,"value":"!","raw":"\"!\""}},"operator":"+","right":{"type":"Identifier","start":3164,"end":3170,"name":"fileID"}}}]}}}},{"type":"ExpressionStatement","start":3244,"end":3812,"expression":{"type":"AssignmentExpression","start":3244,"end":3757,"operator":"=","left":{"type":"MemberExpression","start":3244,"end":3255,"object":{"type":"Identifier","start":3244,"end":3250,"name":"_proto"},"property":{"type":"Identifier","start":3251,"end":3255,"name":"list"},"computed":false},"right":{"type":"FunctionExpression","start":3258,"end":3757,"id":{"type":"Identifier","start":3267,"end":3271,"name":"list"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3274,"end":3757,"body":[{"type":"VariableDeclaration","start":3280,"end":3298,"declarations":[{"type":"VariableDeclarator","start":3284,"end":3297,"id":{"type":"Identifier","start":3284,"end":3290,"name":"_this2"},"init":{"type":"ThisExpression","start":3293,"end":3297}}],"kind":"var"},{"type":"ReturnStatement","start":3304,"end":3753,"argument":{"type":"CallExpression","start":3311,"end":3752,"callee":{"type":"MemberExpression","start":3311,"end":3593,"object":{"type":"CallExpression","start":3311,"end":3588,"callee":{"type":"MemberExpression","start":3311,"end":3326,"object":{"type":"MemberExpression","start":3311,"end":3321,"object":{"type":"ThisExpression","start":3311,"end":3315},"property":{"type":"Identifier","start":3316,"end":3321,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":3322,"end":3326,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":3327,"end":3587,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3337,"end":3339,"name":"db"}],"body":{"type":"BlockStatement","start":3341,"end":3587,"body":[{"type":"VariableDeclaration","start":3349,"end":3408,"declarations":[{"type":"VariableDeclarator","start":3353,"end":3407,"id":{"type":"Identifier","start":3353,"end":3364,"name":"transaction"},"init":{"type":"CallExpression","start":3367,"end":3407,"callee":{"type":"MemberExpression","start":3367,"end":3381,"object":{"type":"Identifier","start":3367,"end":3369,"name":"db"},"property":{"type":"Identifier","start":3370,"end":3381,"name":"transaction"},"computed":false},"arguments":[{"type":"ArrayExpression","start":3382,"end":3394,"elements":[{"type":"Identifier","start":3383,"end":3393,"name":"STORE_NAME"}]},{"type":"Literal","start":3396,"end":3406,"value":"readonly","raw":"'readonly'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":3415,"end":3463,"declarations":[{"type":"VariableDeclarator","start":3419,"end":3462,"id":{"type":"Identifier","start":3419,"end":3424,"name":"store"},"init":{"type":"CallExpression","start":3427,"end":3462,"callee":{"type":"MemberExpression","start":3427,"end":3450,"object":{"type":"Identifier","start":3427,"end":3438,"name":"transaction"},"property":{"type":"Identifier","start":3439,"end":3450,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":3451,"end":3461,"name":"STORE_NAME"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":3470,"end":3543,"declarations":[{"type":"VariableDeclarator","start":3474,"end":3542,"id":{"type":"Identifier","start":3474,"end":3481,"name":"request"},"init":{"type":"CallExpression","start":3484,"end":3542,"callee":{"type":"MemberExpression","start":3484,"end":3511,"object":{"type":"CallExpression","start":3484,"end":3504,"callee":{"type":"MemberExpression","start":3484,"end":3495,"object":{"type":"Identifier","start":3484,"end":3489,"name":"store"},"property":{"type":"Identifier","start":3490,"end":3495,"name":"index"},"computed":false},"arguments":[{"type":"Literal","start":3496,"end":3503,"value":"store","raw":"'store'"}]},"property":{"type":"Identifier","start":3505,"end":3511,"name":"getAll"},"computed":false},"arguments":[{"type":"CallExpression","start":3512,"end":3541,"callee":{"type":"MemberExpression","start":3512,"end":3528,"object":{"type":"Identifier","start":3512,"end":3523,"name":"IDBKeyRange"},"property":{"type":"Identifier","start":3524,"end":3528,"name":"only"},"computed":false},"arguments":[{"type":"MemberExpression","start":3529,"end":3540,"object":{"type":"Identifier","start":3529,"end":3535,"name":"_this2"},"property":{"type":"Identifier","start":3536,"end":3540,"name":"name"},"computed":false}]}]}}],"kind":"var"},{"type":"ReturnStatement","start":3550,"end":3581,"argument":{"type":"CallExpression","start":3557,"end":3580,"callee":{"type":"Identifier","start":3557,"end":3571,"name":"waitForRequest"},"arguments":[{"type":"Identifier","start":3572,"end":3579,"name":"request"}]}}]}}]},"property":{"type":"Identifier","start":3589,"end":3593,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":3594,"end":3751,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3604,"end":3609,"name":"files"}],"body":{"type":"BlockStatement","start":3611,"end":3751,"body":[{"type":"VariableDeclaration","start":3619,"end":3635,"declarations":[{"type":"VariableDeclarator","start":3623,"end":3634,"id":{"type":"Identifier","start":3623,"end":3629,"name":"result"},"init":{"type":"ObjectExpression","start":3632,"end":3634,"properties":[]}}],"kind":"var"},{"type":"ExpressionStatement","start":3642,"end":3724,"expression":{"type":"CallExpression","start":3642,"end":3723,"callee":{"type":"MemberExpression","start":3642,"end":3655,"object":{"type":"Identifier","start":3642,"end":3647,"name":"files"},"property":{"type":"Identifier","start":3648,"end":3655,"name":"forEach"},"computed":false},"arguments":[{"type":"FunctionExpression","start":3656,"end":3722,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3666,"end":3670,"name":"file"}],"body":{"type":"BlockStatement","start":3672,"end":3722,"body":[{"type":"ExpressionStatement","start":3682,"end":3714,"expression":{"type":"AssignmentExpression","start":3682,"end":3713,"operator":"=","left":{"type":"MemberExpression","start":3682,"end":3701,"object":{"type":"Identifier","start":3682,"end":3688,"name":"result"},"property":{"type":"MemberExpression","start":3689,"end":3700,"object":{"type":"Identifier","start":3689,"end":3693,"name":"file"},"property":{"type":"Identifier","start":3694,"end":3700,"name":"fileID"},"computed":false},"computed":true},"right":{"type":"MemberExpression","start":3704,"end":3713,"object":{"type":"Identifier","start":3704,"end":3708,"name":"file"},"property":{"type":"Identifier","start":3709,"end":3713,"name":"data"},"computed":false}}}]}}]}},{"type":"ReturnStatement","start":3731,"end":3745,"argument":{"type":"Identifier","start":3738,"end":3744,"name":"result"}}]}}]}}]}}}},{"type":"ExpressionStatement","start":3816,"end":4314,"expression":{"type":"AssignmentExpression","start":3816,"end":4234,"operator":"=","left":{"type":"MemberExpression","start":3816,"end":3826,"object":{"type":"Identifier","start":3816,"end":3822,"name":"_proto"},"property":{"type":"Identifier","start":3823,"end":3826,"name":"get"},"computed":false},"right":{"type":"FunctionExpression","start":3829,"end":4234,"id":{"type":"Identifier","start":3838,"end":3841,"name":"get"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3842,"end":3848,"name":"fileID"}],"body":{"type":"BlockStatement","start":3850,"end":4234,"body":[{"type":"VariableDeclaration","start":3856,"end":3874,"declarations":[{"type":"VariableDeclarator","start":3860,"end":3873,"id":{"type":"Identifier","start":3860,"end":3866,"name":"_this3"},"init":{"type":"ThisExpression","start":3869,"end":3873}}],"kind":"var"},{"type":"ReturnStatement","start":3880,"end":4230,"argument":{"type":"CallExpression","start":3887,"end":4229,"callee":{"type":"MemberExpression","start":3887,"end":4115,"object":{"type":"CallExpression","start":3887,"end":4110,"callee":{"type":"MemberExpression","start":3887,"end":3902,"object":{"type":"MemberExpression","start":3887,"end":3897,"object":{"type":"ThisExpression","start":3887,"end":3891},"property":{"type":"Identifier","start":3892,"end":3897,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":3898,"end":3902,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":3903,"end":4109,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3913,"end":3915,"name":"db"}],"body":{"type":"BlockStatement","start":3917,"end":4109,"body":[{"type":"VariableDeclaration","start":3925,"end":3984,"declarations":[{"type":"VariableDeclarator","start":3929,"end":3983,"id":{"type":"Identifier","start":3929,"end":3940,"name":"transaction"},"init":{"type":"CallExpression","start":3943,"end":3983,"callee":{"type":"MemberExpression","start":3943,"end":3957,"object":{"type":"Identifier","start":3943,"end":3945,"name":"db"},"property":{"type":"Identifier","start":3946,"end":3957,"name":"transaction"},"computed":false},"arguments":[{"type":"ArrayExpression","start":3958,"end":3970,"elements":[{"type":"Identifier","start":3959,"end":3969,"name":"STORE_NAME"}]},{"type":"Literal","start":3972,"end":3982,"value":"readonly","raw":"'readonly'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":3991,"end":4065,"declarations":[{"type":"VariableDeclarator","start":3995,"end":4064,"id":{"type":"Identifier","start":3995,"end":4002,"name":"request"},"init":{"type":"CallExpression","start":4005,"end":4064,"callee":{"type":"MemberExpression","start":4005,"end":4044,"object":{"type":"CallExpression","start":4005,"end":4040,"callee":{"type":"MemberExpression","start":4005,"end":4028,"object":{"type":"Identifier","start":4005,"end":4016,"name":"transaction"},"property":{"type":"Identifier","start":4017,"end":4028,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":4029,"end":4039,"name":"STORE_NAME"}]},"property":{"type":"Identifier","start":4041,"end":4044,"name":"get"},"computed":false},"arguments":[{"type":"CallExpression","start":4045,"end":4063,"callee":{"type":"MemberExpression","start":4045,"end":4055,"object":{"type":"Identifier","start":4045,"end":4051,"name":"_this3"},"property":{"type":"Identifier","start":4052,"end":4055,"name":"key"},"computed":false},"arguments":[{"type":"Identifier","start":4056,"end":4062,"name":"fileID"}]}]}}],"kind":"var"},{"type":"ReturnStatement","start":4072,"end":4103,"argument":{"type":"CallExpression","start":4079,"end":4102,"callee":{"type":"Identifier","start":4079,"end":4093,"name":"waitForRequest"},"arguments":[{"type":"Identifier","start":4094,"end":4101,"name":"request"}]}}]}}]},"property":{"type":"Identifier","start":4111,"end":4115,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":4116,"end":4228,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4126,"end":4132,"name":"result"}],"body":{"type":"BlockStatement","start":4134,"end":4228,"body":[{"type":"ReturnStatement","start":4142,"end":4222,"argument":{"type":"ObjectExpression","start":4149,"end":4221,"properties":[{"type":"Property","start":4159,"end":4181,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4159,"end":4161,"name":"id"},"value":{"type":"MemberExpression","start":4163,"end":4181,"object":{"type":"MemberExpression","start":4163,"end":4174,"object":{"type":"Identifier","start":4163,"end":4169,"name":"result"},"property":{"type":"Identifier","start":4170,"end":4174,"name":"data"},"computed":false},"property":{"type":"Identifier","start":4175,"end":4181,"name":"fileID"},"computed":false},"kind":"init"},{"type":"Property","start":4191,"end":4213,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4191,"end":4195,"name":"data"},"value":{"type":"MemberExpression","start":4197,"end":4213,"object":{"type":"MemberExpression","start":4197,"end":4208,"object":{"type":"Identifier","start":4197,"end":4203,"name":"result"},"property":{"type":"Identifier","start":4204,"end":4208,"name":"data"},"computed":false},"property":{"type":"Identifier","start":4209,"end":4213,"name":"data"},"computed":false},"kind":"init"}]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":4318,"end":5154,"expression":{"type":"AssignmentExpression","start":4318,"end":5107,"operator":"=","left":{"type":"MemberExpression","start":4318,"end":4332,"object":{"type":"Identifier","start":4318,"end":4324,"name":"_proto"},"property":{"type":"Identifier","start":4325,"end":4332,"name":"getSize"},"computed":false},"right":{"type":"FunctionExpression","start":4335,"end":5107,"id":{"type":"Identifier","start":4344,"end":4351,"name":"getSize"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4354,"end":5107,"body":[{"type":"VariableDeclaration","start":4360,"end":4378,"declarations":[{"type":"VariableDeclarator","start":4364,"end":4377,"id":{"type":"Identifier","start":4364,"end":4370,"name":"_this4"},"init":{"type":"ThisExpression","start":4373,"end":4377}}],"kind":"var"},{"type":"ReturnStatement","start":4384,"end":5103,"argument":{"type":"CallExpression","start":4391,"end":5102,"callee":{"type":"MemberExpression","start":4391,"end":4406,"object":{"type":"MemberExpression","start":4391,"end":4401,"object":{"type":"ThisExpression","start":4391,"end":4395},"property":{"type":"Identifier","start":4396,"end":4401,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":4402,"end":4406,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":4407,"end":5101,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4417,"end":4419,"name":"db"}],"body":{"type":"BlockStatement","start":4421,"end":5101,"body":[{"type":"VariableDeclaration","start":4429,"end":4488,"declarations":[{"type":"VariableDeclarator","start":4433,"end":4487,"id":{"type":"Identifier","start":4433,"end":4444,"name":"transaction"},"init":{"type":"CallExpression","start":4447,"end":4487,"callee":{"type":"MemberExpression","start":4447,"end":4461,"object":{"type":"Identifier","start":4447,"end":4449,"name":"db"},"property":{"type":"Identifier","start":4450,"end":4461,"name":"transaction"},"computed":false},"arguments":[{"type":"ArrayExpression","start":4462,"end":4474,"elements":[{"type":"Identifier","start":4463,"end":4473,"name":"STORE_NAME"}]},{"type":"Literal","start":4476,"end":4486,"value":"readonly","raw":"'readonly'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":4495,"end":4543,"declarations":[{"type":"VariableDeclarator","start":4499,"end":4542,"id":{"type":"Identifier","start":4499,"end":4504,"name":"store"},"init":{"type":"CallExpression","start":4507,"end":4542,"callee":{"type":"MemberExpression","start":4507,"end":4530,"object":{"type":"Identifier","start":4507,"end":4518,"name":"transaction"},"property":{"type":"Identifier","start":4519,"end":4530,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":4531,"end":4541,"name":"STORE_NAME"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":4550,"end":4627,"declarations":[{"type":"VariableDeclarator","start":4554,"end":4626,"id":{"type":"Identifier","start":4554,"end":4561,"name":"request"},"init":{"type":"CallExpression","start":4564,"end":4626,"callee":{"type":"MemberExpression","start":4564,"end":4595,"object":{"type":"CallExpression","start":4564,"end":4584,"callee":{"type":"MemberExpression","start":4564,"end":4575,"object":{"type":"Identifier","start":4564,"end":4569,"name":"store"},"property":{"type":"Identifier","start":4570,"end":4575,"name":"index"},"computed":false},"arguments":[{"type":"Literal","start":4576,"end":4583,"value":"store","raw":"'store'"}]},"property":{"type":"Identifier","start":4585,"end":4595,"name":"openCursor"},"computed":false},"arguments":[{"type":"CallExpression","start":4596,"end":4625,"callee":{"type":"MemberExpression","start":4596,"end":4612,"object":{"type":"Identifier","start":4596,"end":4607,"name":"IDBKeyRange"},"property":{"type":"Identifier","start":4608,"end":4612,"name":"only"},"computed":false},"arguments":[{"type":"MemberExpression","start":4613,"end":4624,"object":{"type":"Identifier","start":4613,"end":4619,"name":"_this4"},"property":{"type":"Identifier","start":4620,"end":4624,"name":"name"},"computed":false}]}]}}],"kind":"var"},{"type":"ReturnStatement","start":4634,"end":5095,"argument":{"type":"NewExpression","start":4641,"end":5094,"callee":{"type":"Identifier","start":4645,"end":4652,"name":"Promise"},"arguments":[{"type":"FunctionExpression","start":4653,"end":5093,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4663,"end":4670,"name":"resolve"},{"type":"Identifier","start":4672,"end":4678,"name":"reject"}],"body":{"type":"BlockStatement","start":4680,"end":5093,"body":[{"type":"VariableDeclaration","start":4690,"end":4703,"declarations":[{"type":"VariableDeclarator","start":4694,"end":4702,"id":{"type":"Identifier","start":4694,"end":4698,"name":"size"},"init":{"type":"Literal","start":4701,"end":4702,"value":0,"raw":"0"}}],"kind":"var"},{"type":"ExpressionStatement","start":4713,"end":4964,"expression":{"type":"AssignmentExpression","start":4713,"end":4963,"operator":"=","left":{"type":"MemberExpression","start":4713,"end":4730,"object":{"type":"Identifier","start":4713,"end":4720,"name":"request"},"property":{"type":"Identifier","start":4721,"end":4730,"name":"onsuccess"},"computed":false},"right":{"type":"FunctionExpression","start":4733,"end":4963,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4743,"end":4748,"name":"event"}],"body":{"type":"BlockStatement","start":4750,"end":4963,"body":[{"type":"VariableDeclaration","start":4762,"end":4795,"declarations":[{"type":"VariableDeclarator","start":4766,"end":4794,"id":{"type":"Identifier","start":4766,"end":4772,"name":"cursor"},"init":{"type":"MemberExpression","start":4775,"end":4794,"object":{"type":"MemberExpression","start":4775,"end":4787,"object":{"type":"Identifier","start":4775,"end":4780,"name":"event"},"property":{"type":"Identifier","start":4781,"end":4787,"name":"target"},"computed":false},"property":{"type":"Identifier","start":4788,"end":4794,"name":"result"},"computed":false}}],"kind":"var"},{"type":"IfStatement","start":4807,"end":4953,"test":{"type":"Identifier","start":4811,"end":4817,"name":"cursor"},"consequent":{"type":"BlockStatement","start":4819,"end":4907,"body":[{"type":"ExpressionStatement","start":4833,"end":4864,"expression":{"type":"AssignmentExpression","start":4833,"end":4863,"operator":"+=","left":{"type":"Identifier","start":4833,"end":4837,"name":"size"},"right":{"type":"MemberExpression","start":4841,"end":4863,"object":{"type":"MemberExpression","start":4841,"end":4858,"object":{"type":"MemberExpression","start":4841,"end":4853,"object":{"type":"Identifier","start":4841,"end":4847,"name":"cursor"},"property":{"type":"Identifier","start":4848,"end":4853,"name":"value"},"computed":false},"property":{"type":"Identifier","start":4854,"end":4858,"name":"data"},"computed":false},"property":{"type":"Identifier","start":4859,"end":4863,"name":"size"},"computed":false}}},{"type":"ExpressionStatement","start":4877,"end":4895,"expression":{"type":"CallExpression","start":4877,"end":4894,"callee":{"type":"MemberExpression","start":4877,"end":4892,"object":{"type":"Identifier","start":4877,"end":4883,"name":"cursor"},"property":{"type":"Identifier","start":4884,"end":4892,"name":"continue"},"computed":false},"arguments":[]}}]},"alternate":{"type":"BlockStatement","start":4913,"end":4953,"body":[{"type":"ExpressionStatement","start":4927,"end":4941,"expression":{"type":"CallExpression","start":4927,"end":4940,"callee":{"type":"Identifier","start":4927,"end":4934,"name":"resolve"},"arguments":[{"type":"Identifier","start":4935,"end":4939,"name":"size"}]}}]}}]}}}},{"type":"ExpressionStatement","start":4974,"end":5085,"expression":{"type":"AssignmentExpression","start":4974,"end":5084,"operator":"=","left":{"type":"MemberExpression","start":4974,"end":4989,"object":{"type":"Identifier","start":4974,"end":4981,"name":"request"},"property":{"type":"Identifier","start":4982,"end":4989,"name":"onerror"},"computed":false},"right":{"type":"FunctionExpression","start":4992,"end":5084,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":5004,"end":5084,"body":[{"type":"ExpressionStatement","start":5016,"end":5074,"expression":{"type":"CallExpression","start":5016,"end":5073,"callee":{"type":"Identifier","start":5016,"end":5022,"name":"reject"},"arguments":[{"type":"NewExpression","start":5023,"end":5072,"callee":{"type":"Identifier","start":5027,"end":5032,"name":"Error"},"arguments":[{"type":"Literal","start":5033,"end":5071,"value":"Could not retrieve stored blobs size","raw":"'Could not retrieve stored blobs size'"}]}]}}]}}}}]}}]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":5158,"end":5964,"expression":{"type":"AssignmentExpression","start":5158,"end":5908,"operator":"=","left":{"type":"MemberExpression","start":5158,"end":5168,"object":{"type":"Identifier","start":5158,"end":5164,"name":"_proto"},"property":{"type":"Identifier","start":5165,"end":5168,"name":"put"},"computed":false},"right":{"type":"FunctionExpression","start":5171,"end":5908,"id":{"type":"Identifier","start":5180,"end":5183,"name":"put"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5184,"end":5188,"name":"file"}],"body":{"type":"BlockStatement","start":5190,"end":5908,"body":[{"type":"VariableDeclaration","start":5196,"end":5214,"declarations":[{"type":"VariableDeclarator","start":5200,"end":5213,"id":{"type":"Identifier","start":5200,"end":5206,"name":"_this5"},"init":{"type":"ThisExpression","start":5209,"end":5213}}],"kind":"var"},{"type":"IfStatement","start":5220,"end":5340,"test":{"type":"BinaryExpression","start":5224,"end":5262,"left":{"type":"MemberExpression","start":5224,"end":5238,"object":{"type":"MemberExpression","start":5224,"end":5233,"object":{"type":"Identifier","start":5224,"end":5228,"name":"file"},"property":{"type":"Identifier","start":5229,"end":5233,"name":"data"},"computed":false},"property":{"type":"Identifier","start":5234,"end":5238,"name":"size"},"computed":false},"operator":">","right":{"type":"MemberExpression","start":5241,"end":5262,"object":{"type":"MemberExpression","start":5241,"end":5250,"object":{"type":"ThisExpression","start":5241,"end":5245},"property":{"type":"Identifier","start":5246,"end":5250,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":5251,"end":5262,"name":"maxFileSize"},"computed":false}},"consequent":{"type":"BlockStatement","start":5264,"end":5340,"body":[{"type":"ReturnStatement","start":5272,"end":5334,"argument":{"type":"CallExpression","start":5279,"end":5333,"callee":{"type":"MemberExpression","start":5279,"end":5293,"object":{"type":"Identifier","start":5279,"end":5286,"name":"Promise"},"property":{"type":"Identifier","start":5287,"end":5293,"name":"reject"},"computed":false},"arguments":[{"type":"NewExpression","start":5294,"end":5332,"callee":{"type":"Identifier","start":5298,"end":5303,"name":"Error"},"arguments":[{"type":"Literal","start":5304,"end":5331,"value":"File is too big to store.","raw":"'File is too big to store.'"}]}]}}]},"alternate":null},{"type":"ReturnStatement","start":5346,"end":5904,"argument":{"type":"CallExpression","start":5353,"end":5903,"callee":{"type":"MemberExpression","start":5353,"end":5542,"object":{"type":"CallExpression","start":5353,"end":5537,"callee":{"type":"MemberExpression","start":5353,"end":5372,"object":{"type":"CallExpression","start":5353,"end":5367,"callee":{"type":"MemberExpression","start":5353,"end":5365,"object":{"type":"ThisExpression","start":5353,"end":5357},"property":{"type":"Identifier","start":5358,"end":5365,"name":"getSize"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":5368,"end":5372,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":5373,"end":5536,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5383,"end":5387,"name":"size"}],"body":{"type":"BlockStatement","start":5389,"end":5536,"body":[{"type":"IfStatement","start":5397,"end":5502,"test":{"type":"BinaryExpression","start":5401,"end":5432,"left":{"type":"Identifier","start":5401,"end":5405,"name":"size"},"operator":">","right":{"type":"MemberExpression","start":5408,"end":5432,"object":{"type":"MemberExpression","start":5408,"end":5419,"object":{"type":"Identifier","start":5408,"end":5414,"name":"_this5"},"property":{"type":"Identifier","start":5415,"end":5419,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":5420,"end":5432,"name":"maxTotalSize"},"computed":false}},"consequent":{"type":"BlockStatement","start":5434,"end":5502,"body":[{"type":"ReturnStatement","start":5444,"end":5494,"argument":{"type":"CallExpression","start":5451,"end":5493,"callee":{"type":"MemberExpression","start":5451,"end":5465,"object":{"type":"Identifier","start":5451,"end":5458,"name":"Promise"},"property":{"type":"Identifier","start":5459,"end":5465,"name":"reject"},"computed":false},"arguments":[{"type":"NewExpression","start":5466,"end":5492,"callee":{"type":"Identifier","start":5470,"end":5475,"name":"Error"},"arguments":[{"type":"Literal","start":5476,"end":5491,"value":"No space left","raw":"'No space left'"}]}]}}]},"alternate":null},{"type":"ReturnStatement","start":5510,"end":5530,"argument":{"type":"MemberExpression","start":5517,"end":5529,"object":{"type":"Identifier","start":5517,"end":5523,"name":"_this5"},"property":{"type":"Identifier","start":5524,"end":5529,"name":"ready"},"computed":false}}]}}]},"property":{"type":"Identifier","start":5538,"end":5542,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":5543,"end":5902,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5553,"end":5555,"name":"db"}],"body":{"type":"BlockStatement","start":5557,"end":5902,"body":[{"type":"VariableDeclaration","start":5565,"end":5625,"declarations":[{"type":"VariableDeclarator","start":5569,"end":5624,"id":{"type":"Identifier","start":5569,"end":5580,"name":"transaction"},"init":{"type":"CallExpression","start":5583,"end":5624,"callee":{"type":"MemberExpression","start":5583,"end":5597,"object":{"type":"Identifier","start":5583,"end":5585,"name":"db"},"property":{"type":"Identifier","start":5586,"end":5597,"name":"transaction"},"computed":false},"arguments":[{"type":"ArrayExpression","start":5598,"end":5610,"elements":[{"type":"Identifier","start":5599,"end":5609,"name":"STORE_NAME"}]},{"type":"Literal","start":5612,"end":5623,"value":"readwrite","raw":"'readwrite'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":5632,"end":5858,"declarations":[{"type":"VariableDeclarator","start":5636,"end":5857,"id":{"type":"Identifier","start":5636,"end":5643,"name":"request"},"init":{"type":"CallExpression","start":5646,"end":5857,"callee":{"type":"MemberExpression","start":5646,"end":5685,"object":{"type":"CallExpression","start":5646,"end":5681,"callee":{"type":"MemberExpression","start":5646,"end":5669,"object":{"type":"Identifier","start":5646,"end":5657,"name":"transaction"},"property":{"type":"Identifier","start":5658,"end":5669,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":5670,"end":5680,"name":"STORE_NAME"}]},"property":{"type":"Identifier","start":5682,"end":5685,"name":"add"},"computed":false},"arguments":[{"type":"ObjectExpression","start":5686,"end":5856,"properties":[{"type":"Property","start":5696,"end":5719,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5696,"end":5698,"name":"id"},"value":{"type":"CallExpression","start":5700,"end":5719,"callee":{"type":"MemberExpression","start":5700,"end":5710,"object":{"type":"Identifier","start":5700,"end":5706,"name":"_this5"},"property":{"type":"Identifier","start":5707,"end":5710,"name":"key"},"computed":false},"arguments":[{"type":"MemberExpression","start":5711,"end":5718,"object":{"type":"Identifier","start":5711,"end":5715,"name":"file"},"property":{"type":"Identifier","start":5716,"end":5718,"name":"id"},"computed":false}]},"kind":"init"},{"type":"Property","start":5729,"end":5744,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5729,"end":5735,"name":"fileID"},"value":{"type":"MemberExpression","start":5737,"end":5744,"object":{"type":"Identifier","start":5737,"end":5741,"name":"file"},"property":{"type":"Identifier","start":5742,"end":5744,"name":"id"},"computed":false},"kind":"init"},{"type":"Property","start":5754,"end":5772,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5754,"end":5759,"name":"store"},"value":{"type":"MemberExpression","start":5761,"end":5772,"object":{"type":"Identifier","start":5761,"end":5767,"name":"_this5"},"property":{"type":"Identifier","start":5768,"end":5772,"name":"name"},"computed":false},"kind":"init"},{"type":"Property","start":5782,"end":5823,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5782,"end":5789,"name":"expires"},"value":{"type":"BinaryExpression","start":5791,"end":5823,"left":{"type":"CallExpression","start":5791,"end":5801,"callee":{"type":"MemberExpression","start":5791,"end":5799,"object":{"type":"Identifier","start":5791,"end":5795,"name":"Date"},"property":{"type":"Identifier","start":5796,"end":5799,"name":"now"},"computed":false},"arguments":[]},"operator":"+","right":{"type":"MemberExpression","start":5804,"end":5823,"object":{"type":"MemberExpression","start":5804,"end":5815,"object":{"type":"Identifier","start":5804,"end":5810,"name":"_this5"},"property":{"type":"Identifier","start":5811,"end":5815,"name":"opts"},"computed":false},"property":{"type":"Identifier","start":5816,"end":5823,"name":"expires"},"computed":false}},"kind":"init"},{"type":"Property","start":5833,"end":5848,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5833,"end":5837,"name":"data"},"value":{"type":"MemberExpression","start":5839,"end":5848,"object":{"type":"Identifier","start":5839,"end":5843,"name":"file"},"property":{"type":"Identifier","start":5844,"end":5848,"name":"data"},"computed":false},"kind":"init"}]}]}}],"kind":"var"},{"type":"ReturnStatement","start":5865,"end":5896,"argument":{"type":"CallExpression","start":5872,"end":5895,"callee":{"type":"Identifier","start":5872,"end":5886,"name":"waitForRequest"},"arguments":[{"type":"Identifier","start":5887,"end":5894,"name":"request"}]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":5968,"end":6464,"expression":{"type":"AssignmentExpression","start":5968,"end":6278,"operator":"=","left":{"type":"MemberExpression","start":5968,"end":5981,"object":{"type":"Identifier","start":5968,"end":5974,"name":"_proto"},"property":{"type":"Identifier","start":5975,"end":5981,"name":"delete"},"computed":false},"right":{"type":"FunctionExpression","start":5984,"end":6278,"id":{"type":"Identifier","start":5993,"end":6000,"name":"_delete"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6001,"end":6007,"name":"fileID"}],"body":{"type":"BlockStatement","start":6009,"end":6278,"body":[{"type":"VariableDeclaration","start":6015,"end":6033,"declarations":[{"type":"VariableDeclarator","start":6019,"end":6032,"id":{"type":"Identifier","start":6019,"end":6025,"name":"_this6"},"init":{"type":"ThisExpression","start":6028,"end":6032}}],"kind":"var"},{"type":"ReturnStatement","start":6039,"end":6274,"argument":{"type":"CallExpression","start":6046,"end":6273,"callee":{"type":"MemberExpression","start":6046,"end":6061,"object":{"type":"MemberExpression","start":6046,"end":6056,"object":{"type":"ThisExpression","start":6046,"end":6050},"property":{"type":"Identifier","start":6051,"end":6056,"name":"ready"},"computed":false},"property":{"type":"Identifier","start":6057,"end":6061,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":6062,"end":6272,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6072,"end":6074,"name":"db"}],"body":{"type":"BlockStatement","start":6076,"end":6272,"body":[{"type":"VariableDeclaration","start":6084,"end":6144,"declarations":[{"type":"VariableDeclarator","start":6088,"end":6143,"id":{"type":"Identifier","start":6088,"end":6099,"name":"transaction"},"init":{"type":"CallExpression","start":6102,"end":6143,"callee":{"type":"MemberExpression","start":6102,"end":6116,"object":{"type":"Identifier","start":6102,"end":6104,"name":"db"},"property":{"type":"Identifier","start":6105,"end":6116,"name":"transaction"},"computed":false},"arguments":[{"type":"ArrayExpression","start":6117,"end":6129,"elements":[{"type":"Identifier","start":6118,"end":6128,"name":"STORE_NAME"}]},{"type":"Literal","start":6131,"end":6142,"value":"readwrite","raw":"'readwrite'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":6151,"end":6228,"declarations":[{"type":"VariableDeclarator","start":6155,"end":6227,"id":{"type":"Identifier","start":6155,"end":6162,"name":"request"},"init":{"type":"CallExpression","start":6165,"end":6227,"callee":{"type":"MemberExpression","start":6165,"end":6207,"object":{"type":"CallExpression","start":6165,"end":6200,"callee":{"type":"MemberExpression","start":6165,"end":6188,"object":{"type":"Identifier","start":6165,"end":6176,"name":"transaction"},"property":{"type":"Identifier","start":6177,"end":6188,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":6189,"end":6199,"name":"STORE_NAME"}]},"property":{"type":"Identifier","start":6201,"end":6207,"name":"delete"},"computed":false},"arguments":[{"type":"CallExpression","start":6208,"end":6226,"callee":{"type":"MemberExpression","start":6208,"end":6218,"object":{"type":"Identifier","start":6208,"end":6214,"name":"_this6"},"property":{"type":"Identifier","start":6215,"end":6218,"name":"key"},"computed":false},"arguments":[{"type":"Identifier","start":6219,"end":6225,"name":"fileID"}]}]}}],"kind":"var"},{"type":"ReturnStatement","start":6235,"end":6266,"argument":{"type":"CallExpression","start":6242,"end":6265,"callee":{"type":"Identifier","start":6242,"end":6256,"name":"waitForRequest"},"arguments":[{"type":"Identifier","start":6257,"end":6264,"name":"request"}]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":6468,"end":7439,"expression":{"type":"AssignmentExpression","start":6468,"end":7438,"operator":"=","left":{"type":"MemberExpression","start":6468,"end":6490,"object":{"type":"Identifier","start":6468,"end":6482,"name":"IndexedDBStore"},"property":{"type":"Identifier","start":6483,"end":6490,"name":"cleanup"},"computed":false},"right":{"type":"FunctionExpression","start":6493,"end":7438,"id":{"type":"Identifier","start":6502,"end":6509,"name":"cleanup"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":6512,"end":7438,"body":[{"type":"ReturnStatement","start":6518,"end":7434,"argument":{"type":"CallExpression","start":6525,"end":7433,"callee":{"type":"MemberExpression","start":6525,"end":7392,"object":{"type":"CallExpression","start":6525,"end":7387,"callee":{"type":"MemberExpression","start":6525,"end":6546,"object":{"type":"CallExpression","start":6525,"end":6541,"callee":{"type":"Identifier","start":6525,"end":6532,"name":"connect"},"arguments":[{"type":"Identifier","start":6533,"end":6540,"name":"DB_NAME"}]},"property":{"type":"Identifier","start":6542,"end":6546,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":6547,"end":7386,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6557,"end":6559,"name":"db"}],"body":{"type":"BlockStatement","start":6561,"end":7386,"body":[{"type":"VariableDeclaration","start":6569,"end":6629,"declarations":[{"type":"VariableDeclarator","start":6573,"end":6628,"id":{"type":"Identifier","start":6573,"end":6584,"name":"transaction"},"init":{"type":"CallExpression","start":6587,"end":6628,"callee":{"type":"MemberExpression","start":6587,"end":6601,"object":{"type":"Identifier","start":6587,"end":6589,"name":"db"},"property":{"type":"Identifier","start":6590,"end":6601,"name":"transaction"},"computed":false},"arguments":[{"type":"ArrayExpression","start":6602,"end":6614,"elements":[{"type":"Identifier","start":6603,"end":6613,"name":"STORE_NAME"}]},{"type":"Literal","start":6616,"end":6627,"value":"readwrite","raw":"'readwrite'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":6636,"end":6684,"declarations":[{"type":"VariableDeclarator","start":6640,"end":6683,"id":{"type":"Identifier","start":6640,"end":6645,"name":"store"},"init":{"type":"CallExpression","start":6648,"end":6683,"callee":{"type":"MemberExpression","start":6648,"end":6671,"object":{"type":"Identifier","start":6648,"end":6659,"name":"transaction"},"property":{"type":"Identifier","start":6660,"end":6671,"name":"objectStore"},"computed":false},"arguments":[{"type":"Identifier","start":6672,"end":6682,"name":"STORE_NAME"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":6691,"end":6775,"declarations":[{"type":"VariableDeclarator","start":6695,"end":6774,"id":{"type":"Identifier","start":6695,"end":6702,"name":"request"},"init":{"type":"CallExpression","start":6705,"end":6774,"callee":{"type":"MemberExpression","start":6705,"end":6738,"object":{"type":"CallExpression","start":6705,"end":6727,"callee":{"type":"MemberExpression","start":6705,"end":6716,"object":{"type":"Identifier","start":6705,"end":6710,"name":"store"},"property":{"type":"Identifier","start":6711,"end":6716,"name":"index"},"computed":false},"arguments":[{"type":"Literal","start":6717,"end":6726,"value":"expires","raw":"'expires'"}]},"property":{"type":"Identifier","start":6728,"end":6738,"name":"openCursor"},"computed":false},"arguments":[{"type":"CallExpression","start":6739,"end":6773,"callee":{"type":"MemberExpression","start":6739,"end":6761,"object":{"type":"Identifier","start":6739,"end":6750,"name":"IDBKeyRange"},"property":{"type":"Identifier","start":6751,"end":6761,"name":"upperBound"},"computed":false},"arguments":[{"type":"CallExpression","start":6762,"end":6772,"callee":{"type":"MemberExpression","start":6762,"end":6770,"object":{"type":"Identifier","start":6762,"end":6766,"name":"Date"},"property":{"type":"Identifier","start":6767,"end":6770,"name":"now"},"computed":false},"arguments":[]}]}]}}],"kind":"var"},{"type":"ReturnStatement","start":6782,"end":7380,"argument":{"type":"NewExpression","start":6789,"end":7379,"callee":{"type":"Identifier","start":6793,"end":6800,"name":"Promise"},"arguments":[{"type":"FunctionExpression","start":6801,"end":7378,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6811,"end":6818,"name":"resolve"},{"type":"Identifier","start":6820,"end":6826,"name":"reject"}],"body":{"type":"BlockStatement","start":6828,"end":7378,"body":[{"type":"ExpressionStatement","start":6838,"end":7335,"expression":{"type":"AssignmentExpression","start":6838,"end":7334,"operator":"=","left":{"type":"MemberExpression","start":6838,"end":6855,"object":{"type":"Identifier","start":6838,"end":6845,"name":"request"},"property":{"type":"Identifier","start":6846,"end":6855,"name":"onsuccess"},"computed":false},"right":{"type":"FunctionExpression","start":6858,"end":7334,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6868,"end":6873,"name":"event"}],"body":{"type":"BlockStatement","start":6875,"end":7334,"body":[{"type":"VariableDeclaration","start":6887,"end":6920,"declarations":[{"type":"VariableDeclarator","start":6891,"end":6919,"id":{"type":"Identifier","start":6891,"end":6897,"name":"cursor"},"init":{"type":"MemberExpression","start":6900,"end":6919,"object":{"type":"MemberExpression","start":6900,"end":6912,"object":{"type":"Identifier","start":6900,"end":6905,"name":"event"},"property":{"type":"Identifier","start":6906,"end":6912,"name":"target"},"computed":false},"property":{"type":"Identifier","start":6913,"end":6919,"name":"result"},"computed":false}}],"kind":"var"},{"type":"IfStatement","start":6932,"end":7324,"test":{"type":"Identifier","start":6936,"end":6942,"name":"cursor"},"consequent":{"type":"BlockStatement","start":6944,"end":7280,"body":[{"type":"VariableDeclaration","start":6958,"end":6983,"declarations":[{"type":"VariableDeclarator","start":6962,"end":6982,"id":{"type":"Identifier","start":6962,"end":6967,"name":"entry"},"init":{"type":"MemberExpression","start":6970,"end":6982,"object":{"type":"Identifier","start":6970,"end":6976,"name":"cursor"},"property":{"type":"Identifier","start":6977,"end":6982,"name":"value"},"computed":false}}],"kind":"var"},{"type":"ExpressionStatement","start":6996,"end":7142,"expression":{"type":"CallExpression","start":6996,"end":7141,"callee":{"type":"MemberExpression","start":6996,"end":7007,"object":{"type":"Identifier","start":6996,"end":7003,"name":"console"},"property":{"type":"Identifier","start":7004,"end":7007,"name":"log"},"computed":false},"arguments":[{"type":"Literal","start":7008,"end":7042,"value":"[IndexedDBStore] Deleting record","raw":"'[IndexedDBStore] Deleting record'"},{"type":"MemberExpression","start":7044,"end":7056,"object":{"type":"Identifier","start":7044,"end":7049,"name":"entry"},"property":{"type":"Identifier","start":7050,"end":7056,"name":"fileID"},"computed":false},{"type":"Literal","start":7058,"end":7067,"value":"of size","raw":"'of size'"},{"type":"CallExpression","start":7069,"end":7099,"callee":{"type":"Identifier","start":7069,"end":7082,"name":"prettierBytes"},"arguments":[{"type":"MemberExpression","start":7083,"end":7098,"object":{"type":"MemberExpression","start":7083,"end":7093,"object":{"type":"Identifier","start":7083,"end":7088,"name":"entry"},"property":{"type":"Identifier","start":7089,"end":7093,"name":"data"},"computed":false},"property":{"type":"Identifier","start":7094,"end":7098,"name":"size"},"computed":false}]},{"type":"Literal","start":7101,"end":7115,"value":"- expired on","raw":"'- expired on'"},{"type":"NewExpression","start":7117,"end":7140,"callee":{"type":"Identifier","start":7121,"end":7125,"name":"Date"},"arguments":[{"type":"MemberExpression","start":7126,"end":7139,"object":{"type":"Identifier","start":7126,"end":7131,"name":"entry"},"property":{"type":"Identifier","start":7132,"end":7139,"name":"expires"},"computed":false}]}]}},{"type":"ExpressionStatement","start":7155,"end":7171,"expression":{"type":"CallExpression","start":7155,"end":7170,"callee":{"type":"MemberExpression","start":7155,"end":7168,"object":{"type":"Identifier","start":7155,"end":7161,"name":"cursor"},"property":{"type":"Identifier","start":7162,"end":7168,"name":"delete"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":7250,"end":7268,"expression":{"type":"CallExpression","start":7250,"end":7267,"callee":{"type":"MemberExpression","start":7250,"end":7265,"object":{"type":"Identifier","start":7250,"end":7256,"name":"cursor"},"property":{"type":"Identifier","start":7257,"end":7265,"name":"continue"},"computed":false},"arguments":[]}}]},"alternate":{"type":"BlockStatement","start":7286,"end":7324,"body":[{"type":"ExpressionStatement","start":7300,"end":7312,"expression":{"type":"CallExpression","start":7300,"end":7311,"callee":{"type":"Identifier","start":7300,"end":7307,"name":"resolve"},"arguments":[{"type":"Identifier","start":7308,"end":7310,"name":"db"}]}}]}}]}}}},{"type":"ExpressionStatement","start":7345,"end":7370,"expression":{"type":"AssignmentExpression","start":7345,"end":7369,"operator":"=","left":{"type":"MemberExpression","start":7345,"end":7360,"object":{"type":"Identifier","start":7345,"end":7352,"name":"request"},"property":{"type":"Identifier","start":7353,"end":7360,"name":"onerror"},"computed":false},"right":{"type":"Identifier","start":7363,"end":7369,"name":"reject"}}}]}}]}}]}}]},"property":{"type":"Identifier","start":7388,"end":7392,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":7393,"end":7432,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7403,"end":7405,"name":"db"}],"body":{"type":"BlockStatement","start":7407,"end":7432,"body":[{"type":"ExpressionStatement","start":7415,"end":7426,"expression":{"type":"CallExpression","start":7415,"end":7425,"callee":{"type":"MemberExpression","start":7415,"end":7423,"object":{"type":"Identifier","start":7415,"end":7417,"name":"db"},"property":{"type":"Identifier","start":7418,"end":7423,"name":"close"},"computed":false},"arguments":[]}}]}}]}}]}}}},{"type":"ReturnStatement","start":7443,"end":7465,"argument":{"type":"Identifier","start":7450,"end":7464,"name":"IndexedDBStore"}}]}},"arguments":[]}}],"kind":"var"},{"type":"ExpressionStatement","start":7472,"end":7513,"expression":{"type":"AssignmentExpression","start":7472,"end":7512,"operator":"=","left":{"type":"MemberExpression","start":7472,"end":7498,"object":{"type":"Identifier","start":7472,"end":7486,"name":"IndexedDBStore"},"property":{"type":"Identifier","start":7487,"end":7498,"name":"isSupported"},"computed":false},"right":{"type":"Identifier","start":7501,"end":7512,"name":"isSupported"}}},{"type":"ExpressionStatement","start":7514,"end":7546,"expression":{"type":"AssignmentExpression","start":7514,"end":7545,"operator":"=","left":{"type":"MemberExpression","start":7514,"end":7528,"object":{"type":"Identifier","start":7514,"end":7520,"name":"module"},"property":{"type":"Identifier","start":7521,"end":7528,"name":"exports"},"computed":false},"right":{"type":"Identifier","start":7531,"end":7545,"name":"IndexedDBStore"}}}],"sourceType":"script"}