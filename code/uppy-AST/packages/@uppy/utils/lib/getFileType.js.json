{"type":"Program","start":0,"end":687,"loc":{"start":{"line":1,"column":0},"end":{"line":19,"column":2}},"body":[{"type":"VariableDeclaration","start":0,"end":67,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":67}},"declarations":[{"type":"VariableDeclarator","start":4,"end":66,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":66}},"id":{"type":"Identifier","start":4,"end":27,"loc":{"start":{"line":1,"column":4},"end":{"line":1,"column":27}},"name":"getFileNameAndExtension"},"init":{"type":"CallExpression","start":30,"end":66,"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":66}},"callee":{"type":"Identifier","start":30,"end":37,"loc":{"start":{"line":1,"column":30},"end":{"line":1,"column":37}},"name":"require"},"arguments":[{"type":"Literal","start":38,"end":65,"loc":{"start":{"line":1,"column":38},"end":{"line":1,"column":65}},"value":"./getFileNameAndExtension","raw":"'./getFileNameAndExtension'"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":69,"end":108,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":39}},"declarations":[{"type":"VariableDeclarator","start":73,"end":107,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":38}},"id":{"type":"Identifier","start":73,"end":82,"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":13}},"name":"mimeTypes"},"init":{"type":"CallExpression","start":85,"end":107,"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":38}},"callee":{"type":"Identifier","start":85,"end":92,"loc":{"start":{"line":3,"column":16},"end":{"line":3,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":93,"end":106,"loc":{"start":{"line":3,"column":24},"end":{"line":3,"column":37}},"value":"./mimeTypes","raw":"'./mimeTypes'"}]}}],"kind":"var"},{"type":"ExpressionStatement","start":110,"end":687,"loc":{"start":{"line":5,"column":0},"end":{"line":19,"column":2}},"expression":{"type":"AssignmentExpression","start":110,"end":686,"loc":{"start":{"line":5,"column":0},"end":{"line":19,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":110,"end":124,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":14}},"object":{"type":"Identifier","start":110,"end":116,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":6}},"name":"module"},"property":{"type":"Identifier","start":117,"end":124,"loc":{"start":{"line":5,"column":7},"end":{"line":5,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":127,"end":686,"loc":{"start":{"line":5,"column":17},"end":{"line":19,"column":1}},"id":{"type":"Identifier","start":136,"end":147,"loc":{"start":{"line":5,"column":26},"end":{"line":5,"column":37}},"name":"getFileType"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":148,"end":152,"loc":{"start":{"line":5,"column":38},"end":{"line":5,"column":42}},"name":"file"}],"body":{"type":"BlockStatement","start":154,"end":686,"loc":{"start":{"line":5,"column":44},"end":{"line":19,"column":1}},"body":[{"type":"VariableDeclaration","start":158,"end":242,"loc":{"start":{"line":6,"column":2},"end":{"line":6,"column":86}},"declarations":[{"type":"VariableDeclarator","start":162,"end":241,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":85}},"id":{"type":"Identifier","start":162,"end":175,"loc":{"start":{"line":6,"column":6},"end":{"line":6,"column":19}},"name":"fileExtension"},"init":{"type":"ConditionalExpression","start":178,"end":241,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":85}},"test":{"type":"MemberExpression","start":178,"end":187,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":31}},"object":{"type":"Identifier","start":178,"end":182,"loc":{"start":{"line":6,"column":22},"end":{"line":6,"column":26}},"name":"file"},"property":{"type":"Identifier","start":183,"end":187,"loc":{"start":{"line":6,"column":27},"end":{"line":6,"column":31}},"name":"name"},"computed":false},"consequent":{"type":"MemberExpression","start":190,"end":234,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":78}},"object":{"type":"CallExpression","start":190,"end":224,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":68}},"callee":{"type":"Identifier","start":190,"end":213,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":57}},"name":"getFileNameAndExtension"},"arguments":[{"type":"MemberExpression","start":214,"end":223,"loc":{"start":{"line":6,"column":58},"end":{"line":6,"column":67}},"object":{"type":"Identifier","start":214,"end":218,"loc":{"start":{"line":6,"column":58},"end":{"line":6,"column":62}},"name":"file"},"property":{"type":"Identifier","start":219,"end":223,"loc":{"start":{"line":6,"column":63},"end":{"line":6,"column":67}},"name":"name"},"computed":false}]},"property":{"type":"Identifier","start":225,"end":234,"loc":{"start":{"line":6,"column":69},"end":{"line":6,"column":78}},"name":"extension"},"computed":false},"alternate":{"type":"Literal","start":237,"end":241,"loc":{"start":{"line":6,"column":81},"end":{"line":6,"column":85}},"value":null,"raw":"null"}}}],"kind":"var"},{"type":"ExpressionStatement","start":245,"end":312,"loc":{"start":{"line":7,"column":2},"end":{"line":7,"column":69}},"expression":{"type":"AssignmentExpression","start":245,"end":311,"loc":{"start":{"line":7,"column":2},"end":{"line":7,"column":68}},"operator":"=","left":{"type":"Identifier","start":245,"end":258,"loc":{"start":{"line":7,"column":2},"end":{"line":7,"column":15}},"name":"fileExtension"},"right":{"type":"ConditionalExpression","start":261,"end":311,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":68}},"test":{"type":"Identifier","start":261,"end":274,"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":31}},"name":"fileExtension"},"consequent":{"type":"CallExpression","start":277,"end":304,"loc":{"start":{"line":7,"column":34},"end":{"line":7,"column":61}},"callee":{"type":"MemberExpression","start":277,"end":302,"loc":{"start":{"line":7,"column":34},"end":{"line":7,"column":59}},"object":{"type":"Identifier","start":277,"end":290,"loc":{"start":{"line":7,"column":34},"end":{"line":7,"column":47}},"name":"fileExtension"},"property":{"type":"Identifier","start":291,"end":302,"loc":{"start":{"line":7,"column":48},"end":{"line":7,"column":59}},"name":"toLowerCase"},"computed":false},"arguments":[]},"alternate":{"type":"Literal","start":307,"end":311,"loc":{"start":{"line":7,"column":64},"end":{"line":7,"column":68}},"value":null,"raw":"null"}}}},{"type":"IfStatement","start":316,"end":684,"loc":{"start":{"line":9,"column":2},"end":{"line":18,"column":3}},"test":{"type":"MemberExpression","start":320,"end":329,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":15}},"object":{"type":"Identifier","start":320,"end":324,"loc":{"start":{"line":9,"column":6},"end":{"line":9,"column":10}},"name":"file"},"property":{"type":"Identifier","start":325,"end":329,"loc":{"start":{"line":9,"column":11},"end":{"line":9,"column":15}},"name":"type"},"computed":false},"consequent":{"type":"BlockStatement","start":331,"end":422,"loc":{"start":{"line":9,"column":17},"end":{"line":12,"column":3}},"body":[{"type":"ReturnStatement","start":401,"end":418,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":21}},"argument":{"type":"MemberExpression","start":408,"end":417,"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":20}},"object":{"type":"Identifier","start":408,"end":412,"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":15}},"name":"file"},"property":{"type":"Identifier","start":413,"end":417,"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":20}},"name":"type"},"computed":false},"comments":[{"type":"Line","value":" if mime type is set in the file object already, use that","start":337,"end":396,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":63}}}]}]},"alternate":{"type":"IfStatement","start":428,"end":684,"loc":{"start":{"line":12,"column":9},"end":{"line":18,"column":3}},"test":{"type":"LogicalExpression","start":432,"end":473,"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":54}},"left":{"type":"Identifier","start":432,"end":445,"loc":{"start":{"line":12,"column":13},"end":{"line":12,"column":26}},"name":"fileExtension"},"operator":"&&","right":{"type":"MemberExpression","start":449,"end":473,"loc":{"start":{"line":12,"column":30},"end":{"line":12,"column":54}},"object":{"type":"Identifier","start":449,"end":458,"loc":{"start":{"line":12,"column":30},"end":{"line":12,"column":39}},"name":"mimeTypes"},"property":{"type":"Identifier","start":459,"end":472,"loc":{"start":{"line":12,"column":40},"end":{"line":12,"column":53}},"name":"fileExtension"},"computed":true}},"consequent":{"type":"BlockStatement","start":475,"end":573,"loc":{"start":{"line":12,"column":56},"end":{"line":15,"column":3}},"body":[{"type":"ReturnStatement","start":537,"end":569,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":36}},"argument":{"type":"MemberExpression","start":544,"end":568,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":35}},"object":{"type":"Identifier","start":544,"end":553,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":20}},"name":"mimeTypes"},"property":{"type":"Identifier","start":554,"end":567,"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":34}},"name":"fileExtension"},"computed":true},"comments":[{"type":"Line","value":" else, see if we can map extension to a mime type","start":481,"end":532,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":55}}}]}]},"alternate":{"type":"BlockStatement","start":579,"end":684,"loc":{"start":{"line":15,"column":9},"end":{"line":18,"column":3}},"body":[{"type":"ReturnStatement","start":646,"end":680,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":38}},"argument":{"type":"Literal","start":653,"end":679,"loc":{"start":{"line":17,"column":11},"end":{"line":17,"column":37}},"value":"application/octet-stream","raw":"'application/octet-stream'"},"comments":[{"type":"Line","value":" if all fails, fall back to a generic byte stream type","start":585,"end":641,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":60}}}]}]}}}]}}}}],"sourceType":"script"}