{"type":"Program","start":0,"end":4462,"body":[{"type":"FunctionDeclaration","start":64,"end":204,"id":{"type":"Identifier","start":73,"end":82,"name":"findIndex"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":83,"end":88,"name":"array"},{"type":"Identifier","start":90,"end":99,"name":"predicate"}],"body":{"type":"BlockStatement","start":101,"end":204,"body":[{"type":"ForStatement","start":105,"end":188,"init":{"type":"VariableDeclaration","start":110,"end":119,"declarations":[{"type":"VariableDeclarator","start":114,"end":119,"id":{"type":"Identifier","start":114,"end":115,"name":"i"},"init":{"type":"Literal","start":118,"end":119,"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":121,"end":137,"left":{"type":"Identifier","start":121,"end":122,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":125,"end":137,"object":{"type":"Identifier","start":125,"end":130,"name":"array"},"property":{"type":"Identifier","start":131,"end":137,"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":139,"end":142,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":139,"end":140,"name":"i"}},"body":{"type":"BlockStatement","start":144,"end":188,"body":[{"type":"IfStatement","start":150,"end":184,"test":{"type":"CallExpression","start":154,"end":173,"callee":{"type":"Identifier","start":154,"end":163,"name":"predicate"},"arguments":[{"type":"MemberExpression","start":164,"end":172,"object":{"type":"Identifier","start":164,"end":169,"name":"array"},"property":{"type":"Identifier","start":170,"end":171,"name":"i"},"computed":true}]},"consequent":{"type":"ReturnStatement","start":175,"end":184,"argument":{"type":"Identifier","start":182,"end":183,"name":"i"}},"alternate":null}]}},{"type":"ReturnStatement","start":192,"end":202,"argument":{"type":"UnaryExpression","start":199,"end":201,"operator":"-","prefix":true,"argument":{"type":"Literal","start":200,"end":201,"value":1,"raw":"1"}}}]}},{"type":"FunctionDeclaration","start":206,"end":271,"id":{"type":"Identifier","start":215,"end":232,"name":"createCancelError"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":235,"end":271,"body":[{"type":"ReturnStatement","start":239,"end":269,"argument":{"type":"NewExpression","start":246,"end":268,"callee":{"type":"Identifier","start":250,"end":255,"name":"Error"},"arguments":[{"type":"Literal","start":256,"end":267,"value":"Cancelled","raw":"'Cancelled'"}]}}]}},{"type":"ExpressionStatement","start":273,"end":4462,"expression":{"type":"AssignmentExpression","start":273,"end":4461,"operator":"=","left":{"type":"MemberExpression","start":273,"end":287,"object":{"type":"Identifier","start":273,"end":279,"name":"module"},"property":{"type":"Identifier","start":280,"end":287,"name":"exports"},"computed":false},"right":{"type":"CallExpression","start":303,"end":4461,"callee":{"type":"FunctionExpression","start":303,"end":4459,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":315,"end":4459,"body":[{"type":"FunctionDeclaration","start":319,"end":543,"id":{"type":"Identifier","start":328,"end":344,"name":"RateLimitedQueue"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":345,"end":350,"name":"limit"}],"body":{"type":"BlockStatement","start":352,"end":543,"body":[{"type":"IfStatement","start":358,"end":479,"test":{"type":"LogicalExpression","start":362,"end":402,"left":{"type":"BinaryExpression","start":362,"end":387,"left":{"type":"UnaryExpression","start":362,"end":374,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":369,"end":374,"name":"limit"}},"operator":"!==","right":{"type":"Literal","start":379,"end":387,"value":"number","raw":"'number'"}},"operator":"||","right":{"type":"BinaryExpression","start":391,"end":402,"left":{"type":"Identifier","start":391,"end":396,"name":"limit"},"operator":"===","right":{"type":"Literal","start":401,"end":402,"value":0,"raw":"0"}}},"consequent":{"type":"BlockStatement","start":404,"end":440,"body":[{"type":"ExpressionStatement","start":412,"end":434,"expression":{"type":"AssignmentExpression","start":412,"end":433,"operator":"=","left":{"type":"MemberExpression","start":412,"end":422,"object":{"type":"ThisExpression","start":412,"end":416},"property":{"type":"Identifier","start":417,"end":422,"name":"limit"},"computed":false},"right":{"type":"Identifier","start":425,"end":433,"name":"Infinity"}}}]},"alternate":{"type":"BlockStatement","start":446,"end":479,"body":[{"type":"ExpressionStatement","start":454,"end":473,"expression":{"type":"AssignmentExpression","start":454,"end":472,"operator":"=","left":{"type":"MemberExpression","start":454,"end":464,"object":{"type":"ThisExpression","start":454,"end":458},"property":{"type":"Identifier","start":459,"end":464,"name":"limit"},"computed":false},"right":{"type":"Identifier","start":467,"end":472,"name":"limit"}}}]}},{"type":"ExpressionStatement","start":485,"end":509,"expression":{"type":"AssignmentExpression","start":485,"end":508,"operator":"=","left":{"type":"MemberExpression","start":485,"end":504,"object":{"type":"ThisExpression","start":485,"end":489},"property":{"type":"Identifier","start":490,"end":504,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":507,"end":508,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":514,"end":539,"expression":{"type":"AssignmentExpression","start":514,"end":538,"operator":"=","left":{"type":"MemberExpression","start":514,"end":533,"object":{"type":"ThisExpression","start":514,"end":518},"property":{"type":"Identifier","start":519,"end":533,"name":"queuedHandlers"},"computed":false},"right":{"type":"ArrayExpression","start":536,"end":538,"elements":[]}}}]}},{"type":"VariableDeclaration","start":547,"end":587,"declarations":[{"type":"VariableDeclarator","start":551,"end":586,"id":{"type":"Identifier","start":551,"end":557,"name":"_proto"},"init":{"type":"MemberExpression","start":560,"end":586,"object":{"type":"Identifier","start":560,"end":576,"name":"RateLimitedQueue"},"property":{"type":"Identifier","start":577,"end":586,"name":"prototype"},"computed":false}}],"kind":"var"},{"type":"ExpressionStatement","start":591,"end":1192,"expression":{"type":"AssignmentExpression","start":591,"end":1191,"operator":"=","left":{"type":"MemberExpression","start":591,"end":603,"object":{"type":"Identifier","start":591,"end":597,"name":"_proto"},"property":{"type":"Identifier","start":598,"end":603,"name":"_call"},"computed":false},"right":{"type":"FunctionExpression","start":606,"end":1191,"id":{"type":"Identifier","start":615,"end":620,"name":"_call"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":621,"end":623,"name":"fn"}],"body":{"type":"BlockStatement","start":625,"end":1191,"body":[{"type":"VariableDeclaration","start":631,"end":648,"declarations":[{"type":"VariableDeclarator","start":635,"end":647,"id":{"type":"Identifier","start":635,"end":640,"name":"_this"},"init":{"type":"ThisExpression","start":643,"end":647}}],"kind":"var"},{"type":"ExpressionStatement","start":654,"end":679,"expression":{"type":"AssignmentExpression","start":654,"end":678,"operator":"+=","left":{"type":"MemberExpression","start":654,"end":673,"object":{"type":"ThisExpression","start":654,"end":658},"property":{"type":"Identifier","start":659,"end":673,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":677,"end":678,"value":1,"raw":"1"}}},{"type":"VariableDeclaration","start":684,"end":702,"declarations":[{"type":"VariableDeclarator","start":688,"end":701,"id":{"type":"Identifier","start":688,"end":693,"name":"_done"},"init":{"type":"Literal","start":696,"end":701,"value":false,"raw":"false"}}],"kind":"var"},{"type":"VariableDeclaration","start":707,"end":724,"declarations":[{"type":"VariableDeclarator","start":711,"end":723,"id":{"type":"Identifier","start":711,"end":723,"name":"cancelActive"},"init":null}],"kind":"var"},{"type":"TryStatement","start":730,"end":837,"block":{"type":"BlockStatement","start":734,"end":768,"body":[{"type":"ExpressionStatement","start":742,"end":762,"expression":{"type":"AssignmentExpression","start":742,"end":761,"operator":"=","left":{"type":"Identifier","start":742,"end":754,"name":"cancelActive"},"right":{"type":"CallExpression","start":757,"end":761,"callee":{"type":"Identifier","start":757,"end":759,"name":"fn"},"arguments":[]}}}]},"handler":{"type":"CatchClause","start":769,"end":837,"param":{"type":"Identifier","start":776,"end":779,"name":"err"},"body":{"type":"BlockStatement","start":781,"end":837,"body":[{"type":"ExpressionStatement","start":789,"end":814,"expression":{"type":"AssignmentExpression","start":789,"end":813,"operator":"-=","left":{"type":"MemberExpression","start":789,"end":808,"object":{"type":"ThisExpression","start":789,"end":793},"property":{"type":"Identifier","start":794,"end":808,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":812,"end":813,"value":1,"raw":"1"}}},{"type":"ThrowStatement","start":821,"end":831,"argument":{"type":"Identifier","start":827,"end":830,"name":"err"}}]}},"finalizer":null},{"type":"ReturnStatement","start":843,"end":1187,"argument":{"type":"ObjectExpression","start":850,"end":1186,"properties":[{"type":"Property","start":858,"end":1028,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":858,"end":863,"name":"abort"},"value":{"type":"FunctionExpression","start":865,"end":1028,"id":{"type":"Identifier","start":874,"end":879,"name":"abort"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":882,"end":1028,"body":[{"type":"IfStatement","start":892,"end":910,"test":{"type":"Identifier","start":896,"end":901,"name":"_done"},"consequent":{"type":"ReturnStatement","start":903,"end":910,"argument":null},"alternate":null},{"type":"ExpressionStatement","start":919,"end":932,"expression":{"type":"AssignmentExpression","start":919,"end":931,"operator":"=","left":{"type":"Identifier","start":919,"end":924,"name":"_done"},"right":{"type":"Literal","start":927,"end":931,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":941,"end":967,"expression":{"type":"AssignmentExpression","start":941,"end":966,"operator":"-=","left":{"type":"MemberExpression","start":941,"end":961,"object":{"type":"Identifier","start":941,"end":946,"name":"_this"},"property":{"type":"Identifier","start":947,"end":961,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":965,"end":966,"value":1,"raw":"1"}}},{"type":"ExpressionStatement","start":976,"end":991,"expression":{"type":"CallExpression","start":976,"end":990,"callee":{"type":"Identifier","start":976,"end":988,"name":"cancelActive"},"arguments":[]}},{"type":"ExpressionStatement","start":1001,"end":1020,"expression":{"type":"CallExpression","start":1001,"end":1019,"callee":{"type":"MemberExpression","start":1001,"end":1017,"object":{"type":"Identifier","start":1001,"end":1006,"name":"_this"},"property":{"type":"Identifier","start":1007,"end":1017,"name":"_queueNext"},"computed":false},"arguments":[]}}]}},"kind":"init"},{"type":"Property","start":1036,"end":1180,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1036,"end":1040,"name":"done"},"value":{"type":"FunctionExpression","start":1042,"end":1180,"id":{"type":"Identifier","start":1051,"end":1055,"name":"done"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1058,"end":1180,"body":[{"type":"IfStatement","start":1068,"end":1086,"test":{"type":"Identifier","start":1072,"end":1077,"name":"_done"},"consequent":{"type":"ReturnStatement","start":1079,"end":1086,"argument":null},"alternate":null},{"type":"ExpressionStatement","start":1095,"end":1108,"expression":{"type":"AssignmentExpression","start":1095,"end":1107,"operator":"=","left":{"type":"Identifier","start":1095,"end":1100,"name":"_done"},"right":{"type":"Literal","start":1103,"end":1107,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":1117,"end":1143,"expression":{"type":"AssignmentExpression","start":1117,"end":1142,"operator":"-=","left":{"type":"MemberExpression","start":1117,"end":1137,"object":{"type":"Identifier","start":1117,"end":1122,"name":"_this"},"property":{"type":"Identifier","start":1123,"end":1137,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":1141,"end":1142,"value":1,"raw":"1"}}},{"type":"ExpressionStatement","start":1153,"end":1172,"expression":{"type":"CallExpression","start":1153,"end":1171,"callee":{"type":"MemberExpression","start":1153,"end":1169,"object":{"type":"Identifier","start":1153,"end":1158,"name":"_this"},"property":{"type":"Identifier","start":1159,"end":1169,"name":"_queueNext"},"computed":false},"arguments":[]}}]}},"kind":"init"}]}}]}}}},{"type":"ExpressionStatement","start":1196,"end":1553,"expression":{"type":"AssignmentExpression","start":1196,"end":1552,"operator":"=","left":{"type":"MemberExpression","start":1196,"end":1213,"object":{"type":"Identifier","start":1196,"end":1202,"name":"_proto"},"property":{"type":"Identifier","start":1203,"end":1213,"name":"_queueNext"},"computed":false},"right":{"type":"FunctionExpression","start":1216,"end":1552,"id":{"type":"Identifier","start":1225,"end":1235,"name":"_queueNext"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1238,"end":1552,"body":[{"type":"VariableDeclaration","start":1244,"end":1262,"declarations":[{"type":"VariableDeclarator","start":1248,"end":1261,"id":{"type":"Identifier","start":1248,"end":1254,"name":"_this2"},"init":{"type":"ThisExpression","start":1257,"end":1261}}],"kind":"var"},{"type":"ExpressionStatement","start":1482,"end":1548,"expression":{"type":"CallExpression","start":1482,"end":1547,"callee":{"type":"MemberExpression","start":1482,"end":1504,"object":{"type":"CallExpression","start":1482,"end":1499,"callee":{"type":"MemberExpression","start":1482,"end":1497,"object":{"type":"Identifier","start":1482,"end":1489,"name":"Promise"},"property":{"type":"Identifier","start":1490,"end":1497,"name":"resolve"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":1500,"end":1504,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":1505,"end":1546,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1517,"end":1546,"body":[{"type":"ExpressionStatement","start":1525,"end":1540,"expression":{"type":"CallExpression","start":1525,"end":1539,"callee":{"type":"MemberExpression","start":1525,"end":1537,"object":{"type":"Identifier","start":1525,"end":1531,"name":"_this2"},"property":{"type":"Identifier","start":1532,"end":1537,"name":"_next"},"computed":false},"arguments":[]}}]}}]}}]}}}},{"type":"ExpressionStatement","start":1557,"end":2058,"expression":{"type":"AssignmentExpression","start":1557,"end":2057,"operator":"=","left":{"type":"MemberExpression","start":1557,"end":1569,"object":{"type":"Identifier","start":1557,"end":1563,"name":"_proto"},"property":{"type":"Identifier","start":1564,"end":1569,"name":"_next"},"computed":false},"right":{"type":"FunctionExpression","start":1572,"end":2057,"id":{"type":"Identifier","start":1581,"end":1586,"name":"_next"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1589,"end":2057,"body":[{"type":"IfStatement","start":1595,"end":1655,"test":{"type":"BinaryExpression","start":1599,"end":1632,"left":{"type":"MemberExpression","start":1599,"end":1618,"object":{"type":"ThisExpression","start":1599,"end":1603},"property":{"type":"Identifier","start":1604,"end":1618,"name":"activeRequests"},"computed":false},"operator":">=","right":{"type":"MemberExpression","start":1622,"end":1632,"object":{"type":"ThisExpression","start":1622,"end":1626},"property":{"type":"Identifier","start":1627,"end":1632,"name":"limit"},"computed":false}},"consequent":{"type":"BlockStatement","start":1634,"end":1655,"body":[{"type":"ReturnStatement","start":1642,"end":1649,"argument":null}]},"alternate":null},{"type":"IfStatement","start":1661,"end":1720,"test":{"type":"BinaryExpression","start":1665,"end":1697,"left":{"type":"MemberExpression","start":1665,"end":1691,"object":{"type":"MemberExpression","start":1665,"end":1684,"object":{"type":"ThisExpression","start":1665,"end":1669},"property":{"type":"Identifier","start":1670,"end":1684,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":1685,"end":1691,"name":"length"},"computed":false},"operator":"===","right":{"type":"Literal","start":1696,"end":1697,"value":0,"raw":"0"}},"consequent":{"type":"BlockStatement","start":1699,"end":1720,"body":[{"type":"ReturnStatement","start":1707,"end":1714,"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":1911,"end":1950,"declarations":[{"type":"VariableDeclarator","start":1915,"end":1949,"id":{"type":"Identifier","start":1915,"end":1919,"name":"next"},"init":{"type":"CallExpression","start":1922,"end":1949,"callee":{"type":"MemberExpression","start":1922,"end":1947,"object":{"type":"MemberExpression","start":1922,"end":1941,"object":{"type":"ThisExpression","start":1922,"end":1926},"property":{"type":"Identifier","start":1927,"end":1941,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":1942,"end":1947,"name":"shift"},"computed":false},"arguments":[]}}],"kind":"var"},{"type":"VariableDeclaration","start":1956,"end":1990,"declarations":[{"type":"VariableDeclarator","start":1960,"end":1989,"id":{"type":"Identifier","start":1960,"end":1967,"name":"handler"},"init":{"type":"CallExpression","start":1970,"end":1989,"callee":{"type":"MemberExpression","start":1970,"end":1980,"object":{"type":"ThisExpression","start":1970,"end":1974},"property":{"type":"Identifier","start":1975,"end":1980,"name":"_call"},"computed":false},"arguments":[{"type":"MemberExpression","start":1981,"end":1988,"object":{"type":"Identifier","start":1981,"end":1985,"name":"next"},"property":{"type":"Identifier","start":1986,"end":1988,"name":"fn"},"computed":false}]}}],"kind":"var"},{"type":"ExpressionStatement","start":1996,"end":2023,"expression":{"type":"AssignmentExpression","start":1996,"end":2022,"operator":"=","left":{"type":"MemberExpression","start":1996,"end":2006,"object":{"type":"Identifier","start":1996,"end":2000,"name":"next"},"property":{"type":"Identifier","start":2001,"end":2006,"name":"abort"},"computed":false},"right":{"type":"MemberExpression","start":2009,"end":2022,"object":{"type":"Identifier","start":2009,"end":2016,"name":"handler"},"property":{"type":"Identifier","start":2017,"end":2022,"name":"abort"},"computed":false}}},{"type":"ExpressionStatement","start":2028,"end":2053,"expression":{"type":"AssignmentExpression","start":2028,"end":2052,"operator":"=","left":{"type":"MemberExpression","start":2028,"end":2037,"object":{"type":"Identifier","start":2028,"end":2032,"name":"next"},"property":{"type":"Identifier","start":2033,"end":2037,"name":"done"},"computed":false},"right":{"type":"MemberExpression","start":2040,"end":2052,"object":{"type":"Identifier","start":2040,"end":2047,"name":"handler"},"property":{"type":"Identifier","start":2048,"end":2052,"name":"done"},"computed":false}}}]}}}},{"type":"ExpressionStatement","start":2062,"end":2755,"expression":{"type":"AssignmentExpression","start":2062,"end":2754,"operator":"=","left":{"type":"MemberExpression","start":2062,"end":2075,"object":{"type":"Identifier","start":2062,"end":2068,"name":"_proto"},"property":{"type":"Identifier","start":2069,"end":2075,"name":"_queue"},"computed":false},"right":{"type":"FunctionExpression","start":2078,"end":2754,"id":{"type":"Identifier","start":2087,"end":2093,"name":"_queue"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2094,"end":2096,"name":"fn"},{"type":"Identifier","start":2098,"end":2105,"name":"options"}],"body":{"type":"BlockStatement","start":2107,"end":2754,"body":[{"type":"VariableDeclaration","start":2113,"end":2131,"declarations":[{"type":"VariableDeclarator","start":2117,"end":2130,"id":{"type":"Identifier","start":2117,"end":2123,"name":"_this3"},"init":{"type":"ThisExpression","start":2126,"end":2130}}],"kind":"var"},{"type":"IfStatement","start":2137,"end":2188,"test":{"type":"BinaryExpression","start":2141,"end":2159,"left":{"type":"Identifier","start":2141,"end":2148,"name":"options"},"operator":"===","right":{"type":"UnaryExpression","start":2153,"end":2159,"operator":"void","prefix":true,"argument":{"type":"Literal","start":2158,"end":2159,"value":0,"raw":"0"}}},"consequent":{"type":"BlockStatement","start":2161,"end":2188,"body":[{"type":"ExpressionStatement","start":2169,"end":2182,"expression":{"type":"AssignmentExpression","start":2169,"end":2181,"operator":"=","left":{"type":"Identifier","start":2169,"end":2176,"name":"options"},"right":{"type":"ObjectExpression","start":2179,"end":2181,"properties":[]}}}]},"alternate":null},{"type":"VariableDeclaration","start":2194,"end":2469,"declarations":[{"type":"VariableDeclarator","start":2198,"end":2468,"id":{"type":"Identifier","start":2198,"end":2205,"name":"handler"},"init":{"type":"ObjectExpression","start":2208,"end":2468,"properties":[{"type":"Property","start":2216,"end":2222,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2216,"end":2218,"name":"fn"},"value":{"type":"Identifier","start":2220,"end":2222,"name":"fn"},"kind":"init"},{"type":"Property","start":2230,"end":2261,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2230,"end":2238,"name":"priority"},"value":{"type":"LogicalExpression","start":2240,"end":2261,"left":{"type":"MemberExpression","start":2240,"end":2256,"object":{"type":"Identifier","start":2240,"end":2247,"name":"options"},"property":{"type":"Identifier","start":2248,"end":2256,"name":"priority"},"computed":false},"operator":"||","right":{"type":"Literal","start":2260,"end":2261,"value":0,"raw":"0"}},"kind":"init"},{"type":"Property","start":2269,"end":2336,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2269,"end":2274,"name":"abort"},"value":{"type":"FunctionExpression","start":2276,"end":2336,"id":{"type":"Identifier","start":2285,"end":2290,"name":"abort"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2293,"end":2336,"body":[{"type":"ExpressionStatement","start":2303,"end":2328,"expression":{"type":"CallExpression","start":2303,"end":2327,"callee":{"type":"MemberExpression","start":2303,"end":2318,"object":{"type":"Identifier","start":2303,"end":2309,"name":"_this3"},"property":{"type":"Identifier","start":2310,"end":2318,"name":"_dequeue"},"computed":false},"arguments":[{"type":"Identifier","start":2319,"end":2326,"name":"handler"}]}}]}},"kind":"init"},{"type":"Property","start":2344,"end":2462,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2344,"end":2348,"name":"done"},"value":{"type":"FunctionExpression","start":2350,"end":2462,"id":{"type":"Identifier","start":2359,"end":2363,"name":"done"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2366,"end":2462,"body":[{"type":"ThrowStatement","start":2376,"end":2454,"argument":{"type":"NewExpression","start":2382,"end":2453,"callee":{"type":"Identifier","start":2386,"end":2391,"name":"Error"},"arguments":[{"type":"Literal","start":2392,"end":2452,"value":"Cannot mark a queued request as done: this indicates a bug","raw":"'Cannot mark a queued request as done: this indicates a bug'"}]}}]}},"kind":"init"}]}}],"kind":"var"},{"type":"VariableDeclaration","start":2474,"end":2591,"declarations":[{"type":"VariableDeclarator","start":2478,"end":2590,"id":{"type":"Identifier","start":2478,"end":2483,"name":"index"},"init":{"type":"CallExpression","start":2486,"end":2590,"callee":{"type":"Identifier","start":2486,"end":2495,"name":"findIndex"},"arguments":[{"type":"MemberExpression","start":2496,"end":2515,"object":{"type":"ThisExpression","start":2496,"end":2500},"property":{"type":"Identifier","start":2501,"end":2515,"name":"queuedHandlers"},"computed":false},{"type":"FunctionExpression","start":2517,"end":2589,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2527,"end":2532,"name":"other"}],"body":{"type":"BlockStatement","start":2534,"end":2589,"body":[{"type":"ReturnStatement","start":2542,"end":2583,"argument":{"type":"BinaryExpression","start":2549,"end":2582,"left":{"type":"MemberExpression","start":2549,"end":2565,"object":{"type":"Identifier","start":2549,"end":2556,"name":"handler"},"property":{"type":"Identifier","start":2557,"end":2565,"name":"priority"},"computed":false},"operator":">","right":{"type":"MemberExpression","start":2568,"end":2582,"object":{"type":"Identifier","start":2568,"end":2573,"name":"other"},"property":{"type":"Identifier","start":2574,"end":2582,"name":"priority"},"computed":false}}}]}}]}}],"kind":"var"},{"type":"IfStatement","start":2597,"end":2729,"test":{"type":"BinaryExpression","start":2601,"end":2613,"left":{"type":"Identifier","start":2601,"end":2606,"name":"index"},"operator":"===","right":{"type":"UnaryExpression","start":2611,"end":2613,"operator":"-","prefix":true,"argument":{"type":"Literal","start":2612,"end":2613,"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":2615,"end":2663,"body":[{"type":"ExpressionStatement","start":2623,"end":2657,"expression":{"type":"CallExpression","start":2623,"end":2656,"callee":{"type":"MemberExpression","start":2623,"end":2647,"object":{"type":"MemberExpression","start":2623,"end":2642,"object":{"type":"ThisExpression","start":2623,"end":2627},"property":{"type":"Identifier","start":2628,"end":2642,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2643,"end":2647,"name":"push"},"computed":false},"arguments":[{"type":"Identifier","start":2648,"end":2655,"name":"handler"}]}}]},"alternate":{"type":"BlockStatement","start":2669,"end":2729,"body":[{"type":"ExpressionStatement","start":2677,"end":2723,"expression":{"type":"CallExpression","start":2677,"end":2722,"callee":{"type":"MemberExpression","start":2677,"end":2703,"object":{"type":"MemberExpression","start":2677,"end":2696,"object":{"type":"ThisExpression","start":2677,"end":2681},"property":{"type":"Identifier","start":2682,"end":2696,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2697,"end":2703,"name":"splice"},"computed":false},"arguments":[{"type":"Identifier","start":2704,"end":2709,"name":"index"},{"type":"Literal","start":2711,"end":2712,"value":0,"raw":"0"},{"type":"Identifier","start":2714,"end":2721,"name":"handler"}]}}]}},{"type":"ReturnStatement","start":2735,"end":2750,"argument":{"type":"Identifier","start":2742,"end":2749,"name":"handler"}}]}}}},{"type":"ExpressionStatement","start":2759,"end":2939,"expression":{"type":"AssignmentExpression","start":2759,"end":2938,"operator":"=","left":{"type":"MemberExpression","start":2759,"end":2774,"object":{"type":"Identifier","start":2759,"end":2765,"name":"_proto"},"property":{"type":"Identifier","start":2766,"end":2774,"name":"_dequeue"},"computed":false},"right":{"type":"FunctionExpression","start":2777,"end":2938,"id":{"type":"Identifier","start":2786,"end":2794,"name":"_dequeue"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2795,"end":2802,"name":"handler"}],"body":{"type":"BlockStatement","start":2804,"end":2938,"body":[{"type":"VariableDeclaration","start":2810,"end":2859,"declarations":[{"type":"VariableDeclarator","start":2814,"end":2858,"id":{"type":"Identifier","start":2814,"end":2819,"name":"index"},"init":{"type":"CallExpression","start":2822,"end":2858,"callee":{"type":"MemberExpression","start":2822,"end":2849,"object":{"type":"MemberExpression","start":2822,"end":2841,"object":{"type":"ThisExpression","start":2822,"end":2826},"property":{"type":"Identifier","start":2827,"end":2841,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2842,"end":2849,"name":"indexOf"},"computed":false},"arguments":[{"type":"Identifier","start":2850,"end":2857,"name":"handler"}]}}],"kind":"var"},{"type":"IfStatement","start":2865,"end":2934,"test":{"type":"BinaryExpression","start":2869,"end":2881,"left":{"type":"Identifier","start":2869,"end":2874,"name":"index"},"operator":"!==","right":{"type":"UnaryExpression","start":2879,"end":2881,"operator":"-","prefix":true,"argument":{"type":"Literal","start":2880,"end":2881,"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":2883,"end":2934,"body":[{"type":"ExpressionStatement","start":2891,"end":2928,"expression":{"type":"CallExpression","start":2891,"end":2927,"callee":{"type":"MemberExpression","start":2891,"end":2917,"object":{"type":"MemberExpression","start":2891,"end":2910,"object":{"type":"ThisExpression","start":2891,"end":2895},"property":{"type":"Identifier","start":2896,"end":2910,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2911,"end":2917,"name":"splice"},"computed":false},"arguments":[{"type":"Identifier","start":2918,"end":2923,"name":"index"},{"type":"Literal","start":2925,"end":2926,"value":1,"raw":"1"}]}}]},"alternate":null}]}}}},{"type":"ExpressionStatement","start":2943,"end":3115,"expression":{"type":"AssignmentExpression","start":2943,"end":3114,"operator":"=","left":{"type":"MemberExpression","start":2943,"end":2953,"object":{"type":"Identifier","start":2943,"end":2949,"name":"_proto"},"property":{"type":"Identifier","start":2950,"end":2953,"name":"run"},"computed":false},"right":{"type":"FunctionExpression","start":2956,"end":3114,"id":{"type":"Identifier","start":2965,"end":2968,"name":"run"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2969,"end":2971,"name":"fn"},{"type":"Identifier","start":2973,"end":2985,"name":"queueOptions"}],"body":{"type":"BlockStatement","start":2987,"end":3114,"body":[{"type":"IfStatement","start":2993,"end":3067,"test":{"type":"BinaryExpression","start":2997,"end":3029,"left":{"type":"MemberExpression","start":2997,"end":3016,"object":{"type":"ThisExpression","start":2997,"end":3001},"property":{"type":"Identifier","start":3002,"end":3016,"name":"activeRequests"},"computed":false},"operator":"<","right":{"type":"MemberExpression","start":3019,"end":3029,"object":{"type":"ThisExpression","start":3019,"end":3023},"property":{"type":"Identifier","start":3024,"end":3029,"name":"limit"},"computed":false}},"consequent":{"type":"BlockStatement","start":3031,"end":3067,"body":[{"type":"ReturnStatement","start":3039,"end":3061,"argument":{"type":"CallExpression","start":3046,"end":3060,"callee":{"type":"MemberExpression","start":3046,"end":3056,"object":{"type":"ThisExpression","start":3046,"end":3050},"property":{"type":"Identifier","start":3051,"end":3056,"name":"_call"},"computed":false},"arguments":[{"type":"Identifier","start":3057,"end":3059,"name":"fn"}]}}]},"alternate":null},{"type":"ReturnStatement","start":3073,"end":3110,"argument":{"type":"CallExpression","start":3080,"end":3109,"callee":{"type":"MemberExpression","start":3080,"end":3091,"object":{"type":"ThisExpression","start":3080,"end":3084},"property":{"type":"Identifier","start":3085,"end":3091,"name":"_queue"},"computed":false},"arguments":[{"type":"Identifier","start":3092,"end":3094,"name":"fn"},{"type":"Identifier","start":3096,"end":3108,"name":"queueOptions"}]}}]}}}},{"type":"ExpressionStatement","start":3119,"end":4429,"expression":{"type":"AssignmentExpression","start":3119,"end":4428,"operator":"=","left":{"type":"MemberExpression","start":3119,"end":3145,"object":{"type":"Identifier","start":3119,"end":3125,"name":"_proto"},"property":{"type":"Identifier","start":3126,"end":3145,"name":"wrapPromiseFunction"},"computed":false},"right":{"type":"FunctionExpression","start":3148,"end":4428,"id":{"type":"Identifier","start":3157,"end":3176,"name":"wrapPromiseFunction"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3177,"end":3179,"name":"fn"},{"type":"Identifier","start":3181,"end":3193,"name":"queueOptions"}],"body":{"type":"BlockStatement","start":3195,"end":4428,"body":[{"type":"VariableDeclaration","start":3201,"end":3219,"declarations":[{"type":"VariableDeclarator","start":3205,"end":3218,"id":{"type":"Identifier","start":3205,"end":3211,"name":"_this4"},"init":{"type":"ThisExpression","start":3214,"end":3218}}],"kind":"var"},{"type":"ReturnStatement","start":3225,"end":4424,"argument":{"type":"FunctionExpression","start":3232,"end":4423,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3244,"end":4423,"body":[{"type":"ForStatement","start":3252,"end":3388,"init":{"type":"VariableDeclaration","start":3257,"end":3318,"declarations":[{"type":"VariableDeclarator","start":3261,"end":3284,"id":{"type":"Identifier","start":3261,"end":3265,"name":"_len"},"init":{"type":"MemberExpression","start":3268,"end":3284,"object":{"type":"Identifier","start":3268,"end":3277,"name":"arguments"},"property":{"type":"Identifier","start":3278,"end":3284,"name":"length"},"computed":false}},{"type":"VariableDeclarator","start":3286,"end":3308,"id":{"type":"Identifier","start":3286,"end":3290,"name":"args"},"init":{"type":"NewExpression","start":3293,"end":3308,"callee":{"type":"Identifier","start":3297,"end":3302,"name":"Array"},"arguments":[{"type":"Identifier","start":3303,"end":3307,"name":"_len"}]}},{"type":"VariableDeclarator","start":3310,"end":3318,"id":{"type":"Identifier","start":3310,"end":3314,"name":"_key"},"init":{"type":"Literal","start":3317,"end":3318,"value":0,"raw":"0"}}],"kind":"var"},"test":{"type":"BinaryExpression","start":3320,"end":3331,"left":{"type":"Identifier","start":3320,"end":3324,"name":"_key"},"operator":"<","right":{"type":"Identifier","start":3327,"end":3331,"name":"_len"}},"update":{"type":"UpdateExpression","start":3333,"end":3339,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":3333,"end":3337,"name":"_key"}},"body":{"type":"BlockStatement","start":3341,"end":3388,"body":[{"type":"ExpressionStatement","start":3351,"end":3380,"expression":{"type":"AssignmentExpression","start":3351,"end":3379,"operator":"=","left":{"type":"MemberExpression","start":3351,"end":3361,"object":{"type":"Identifier","start":3351,"end":3355,"name":"args"},"property":{"type":"Identifier","start":3356,"end":3360,"name":"_key"},"computed":true},"right":{"type":"MemberExpression","start":3364,"end":3379,"object":{"type":"Identifier","start":3364,"end":3373,"name":"arguments"},"property":{"type":"Identifier","start":3374,"end":3378,"name":"_key"},"computed":true}}}]}},{"type":"VariableDeclaration","start":3396,"end":3414,"declarations":[{"type":"VariableDeclarator","start":3400,"end":3413,"id":{"type":"Identifier","start":3400,"end":3413,"name":"queuedRequest"},"init":null}],"kind":"var"},{"type":"VariableDeclaration","start":3421,"end":4307,"declarations":[{"type":"VariableDeclarator","start":3425,"end":4306,"id":{"type":"Identifier","start":3425,"end":3437,"name":"outerPromise"},"init":{"type":"NewExpression","start":3440,"end":4306,"callee":{"type":"Identifier","start":3444,"end":3451,"name":"Promise"},"arguments":[{"type":"FunctionExpression","start":3452,"end":4305,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3462,"end":3469,"name":"resolve"},{"type":"Identifier","start":3471,"end":3477,"name":"reject"}],"body":{"type":"BlockStatement","start":3479,"end":4305,"body":[{"type":"ExpressionStatement","start":3489,"end":4297,"expression":{"type":"AssignmentExpression","start":3489,"end":4296,"operator":"=","left":{"type":"Identifier","start":3489,"end":3502,"name":"queuedRequest"},"right":{"type":"CallExpression","start":3505,"end":4296,"callee":{"type":"MemberExpression","start":3505,"end":3515,"object":{"type":"Identifier","start":3505,"end":3511,"name":"_this4"},"property":{"type":"Identifier","start":3512,"end":3515,"name":"run"},"computed":false},"arguments":[{"type":"FunctionExpression","start":3516,"end":4281,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3528,"end":4281,"body":[{"type":"VariableDeclaration","start":3540,"end":3556,"declarations":[{"type":"VariableDeclarator","start":3544,"end":3555,"id":{"type":"Identifier","start":3544,"end":3555,"name":"cancelError"},"init":null}],"kind":"var"},{"type":"VariableDeclaration","start":3567,"end":3584,"declarations":[{"type":"VariableDeclarator","start":3571,"end":3583,"id":{"type":"Identifier","start":3571,"end":3583,"name":"innerPromise"},"init":null}],"kind":"var"},{"type":"TryStatement","start":3596,"end":3755,"block":{"type":"BlockStatement","start":3600,"end":3681,"body":[{"type":"ExpressionStatement","start":3614,"end":3669,"expression":{"type":"AssignmentExpression","start":3614,"end":3668,"operator":"=","left":{"type":"Identifier","start":3614,"end":3626,"name":"innerPromise"},"right":{"type":"CallExpression","start":3629,"end":3668,"callee":{"type":"MemberExpression","start":3629,"end":3644,"object":{"type":"Identifier","start":3629,"end":3636,"name":"Promise"},"property":{"type":"Identifier","start":3637,"end":3644,"name":"resolve"},"computed":false},"arguments":[{"type":"CallExpression","start":3645,"end":3667,"callee":{"type":"MemberExpression","start":3645,"end":3653,"object":{"type":"Identifier","start":3645,"end":3647,"name":"fn"},"property":{"type":"Identifier","start":3648,"end":3653,"name":"apply"},"computed":false},"arguments":[{"type":"UnaryExpression","start":3654,"end":3660,"operator":"void","prefix":true,"argument":{"type":"Literal","start":3659,"end":3660,"value":0,"raw":"0"}},{"type":"Identifier","start":3662,"end":3666,"name":"args"}]}]}}}]},"handler":{"type":"CatchClause","start":3682,"end":3755,"param":{"type":"Identifier","start":3689,"end":3692,"name":"err"},"body":{"type":"BlockStatement","start":3694,"end":3755,"body":[{"type":"ExpressionStatement","start":3708,"end":3743,"expression":{"type":"AssignmentExpression","start":3708,"end":3742,"operator":"=","left":{"type":"Identifier","start":3708,"end":3720,"name":"innerPromise"},"right":{"type":"CallExpression","start":3723,"end":3742,"callee":{"type":"MemberExpression","start":3723,"end":3737,"object":{"type":"Identifier","start":3723,"end":3730,"name":"Promise"},"property":{"type":"Identifier","start":3731,"end":3737,"name":"reject"},"computed":false},"arguments":[{"type":"Identifier","start":3738,"end":3741,"name":"err"}]}}}]}},"finalizer":null},{"type":"ExpressionStatement","start":3767,"end":4180,"expression":{"type":"CallExpression","start":3767,"end":4179,"callee":{"type":"MemberExpression","start":3767,"end":3784,"object":{"type":"Identifier","start":3767,"end":3779,"name":"innerPromise"},"property":{"type":"Identifier","start":3780,"end":3784,"name":"then"},"computed":false},"arguments":[{"type":"FunctionExpression","start":3785,"end":3984,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3795,"end":3801,"name":"result"}],"body":{"type":"BlockStatement","start":3803,"end":3984,"body":[{"type":"IfStatement","start":3817,"end":3972,"test":{"type":"Identifier","start":3821,"end":3832,"name":"cancelError"},"consequent":{"type":"BlockStatement","start":3834,"end":3884,"body":[{"type":"ExpressionStatement","start":3850,"end":3870,"expression":{"type":"CallExpression","start":3850,"end":3869,"callee":{"type":"Identifier","start":3850,"end":3856,"name":"reject"},"arguments":[{"type":"Identifier","start":3857,"end":3868,"name":"cancelError"}]}}]},"alternate":{"type":"BlockStatement","start":3890,"end":3972,"body":[{"type":"ExpressionStatement","start":3906,"end":3927,"expression":{"type":"CallExpression","start":3906,"end":3926,"callee":{"type":"MemberExpression","start":3906,"end":3924,"object":{"type":"Identifier","start":3906,"end":3919,"name":"queuedRequest"},"property":{"type":"Identifier","start":3920,"end":3924,"name":"done"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":3942,"end":3958,"expression":{"type":"CallExpression","start":3942,"end":3957,"callee":{"type":"Identifier","start":3942,"end":3949,"name":"resolve"},"arguments":[{"type":"Identifier","start":3950,"end":3956,"name":"result"}]}}]}}]}},{"type":"FunctionExpression","start":3986,"end":4178,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3996,"end":3999,"name":"err"}],"body":{"type":"BlockStatement","start":4001,"end":4178,"body":[{"type":"IfStatement","start":4015,"end":4166,"test":{"type":"Identifier","start":4019,"end":4030,"name":"cancelError"},"consequent":{"type":"BlockStatement","start":4032,"end":4082,"body":[{"type":"ExpressionStatement","start":4048,"end":4068,"expression":{"type":"CallExpression","start":4048,"end":4067,"callee":{"type":"Identifier","start":4048,"end":4054,"name":"reject"},"arguments":[{"type":"Identifier","start":4055,"end":4066,"name":"cancelError"}]}}]},"alternate":{"type":"BlockStatement","start":4088,"end":4166,"body":[{"type":"ExpressionStatement","start":4104,"end":4125,"expression":{"type":"CallExpression","start":4104,"end":4124,"callee":{"type":"MemberExpression","start":4104,"end":4122,"object":{"type":"Identifier","start":4104,"end":4117,"name":"queuedRequest"},"property":{"type":"Identifier","start":4118,"end":4122,"name":"done"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":4140,"end":4152,"expression":{"type":"CallExpression","start":4140,"end":4151,"callee":{"type":"Identifier","start":4140,"end":4146,"name":"reject"},"arguments":[{"type":"Identifier","start":4147,"end":4150,"name":"err"}]}}]}}]}}]}},{"type":"ReturnStatement","start":4191,"end":4271,"argument":{"type":"FunctionExpression","start":4198,"end":4270,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4210,"end":4270,"body":[{"type":"ExpressionStatement","start":4224,"end":4258,"expression":{"type":"AssignmentExpression","start":4224,"end":4257,"operator":"=","left":{"type":"Identifier","start":4224,"end":4235,"name":"cancelError"},"right":{"type":"CallExpression","start":4238,"end":4257,"callee":{"type":"Identifier","start":4238,"end":4255,"name":"createCancelError"},"arguments":[]}}}]}}}]}},{"type":"Identifier","start":4283,"end":4295,"name":"queueOptions"}]}}}]}}]}}],"kind":"var"},{"type":"ExpressionStatement","start":4315,"end":4389,"expression":{"type":"AssignmentExpression","start":4315,"end":4388,"operator":"=","left":{"type":"MemberExpression","start":4315,"end":4333,"object":{"type":"Identifier","start":4315,"end":4327,"name":"outerPromise"},"property":{"type":"Identifier","start":4328,"end":4333,"name":"abort"},"computed":false},"right":{"type":"FunctionExpression","start":4336,"end":4388,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4348,"end":4388,"body":[{"type":"ExpressionStatement","start":4358,"end":4380,"expression":{"type":"CallExpression","start":4358,"end":4379,"callee":{"type":"MemberExpression","start":4358,"end":4377,"object":{"type":"Identifier","start":4358,"end":4371,"name":"queuedRequest"},"property":{"type":"Identifier","start":4372,"end":4377,"name":"abort"},"computed":false},"arguments":[]}}]}}}},{"type":"ReturnStatement","start":4397,"end":4417,"argument":{"type":"Identifier","start":4404,"end":4416,"name":"outerPromise"}}]}}}]}}}},{"type":"ReturnStatement","start":4433,"end":4457,"argument":{"type":"Identifier","start":4440,"end":4456,"name":"RateLimitedQueue"}}]}},"arguments":[]}}}],"sourceType":"script"}