{"type":"Program","start":0,"end":684,"loc":{"start":{"line":1,"column":0},"end":{"line":19,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":68,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":68}},"declarations":[{"type":"VariableDeclarator","start":6,"end":68,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":68}},"id":{"type":"Identifier","start":6,"end":29,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":29}},"name":"getFileNameAndExtension"},"init":{"type":"CallExpression","start":32,"end":68,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":68}},"callee":{"type":"Identifier","start":32,"end":39,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":39}},"name":"require"},"arguments":[{"type":"Literal","start":40,"end":67,"loc":{"start":{"line":1,"column":40},"end":{"line":1,"column":67}},"value":"./getFileNameAndExtension","raw":"'./getFileNameAndExtension'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":69,"end":109,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":40}},"declarations":[{"type":"VariableDeclarator","start":75,"end":109,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":40}},"id":{"type":"Identifier","start":75,"end":84,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":15}},"name":"mimeTypes"},"init":{"type":"CallExpression","start":87,"end":109,"loc":{"start":{"line":2,"column":18},"end":{"line":2,"column":40}},"callee":{"type":"Identifier","start":87,"end":94,"loc":{"start":{"line":2,"column":18},"end":{"line":2,"column":25}},"name":"require"},"arguments":[{"type":"Literal","start":95,"end":108,"loc":{"start":{"line":2,"column":26},"end":{"line":2,"column":39}},"value":"./mimeTypes","raw":"'./mimeTypes'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":111,"end":683,"loc":{"start":{"line":4,"column":0},"end":{"line":18,"column":1}},"expression":{"type":"AssignmentExpression","start":111,"end":683,"loc":{"start":{"line":4,"column":0},"end":{"line":18,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":111,"end":125,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":14}},"object":{"type":"Identifier","start":111,"end":117,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":6}},"name":"module"},"property":{"type":"Identifier","start":118,"end":125,"loc":{"start":{"line":4,"column":7},"end":{"line":4,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":128,"end":683,"loc":{"start":{"line":4,"column":17},"end":{"line":18,"column":1}},"id":{"type":"Identifier","start":137,"end":148,"loc":{"start":{"line":4,"column":26},"end":{"line":4,"column":37}},"name":"getFileType"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":150,"end":154,"loc":{"start":{"line":4,"column":39},"end":{"line":4,"column":43}},"name":"file"}],"body":{"type":"BlockStatement","start":156,"end":683,"loc":{"start":{"line":4,"column":45},"end":{"line":18,"column":1}},"body":[{"type":"VariableDeclaration","start":160,"end":243,"loc":{"start":{"line":5,"column":2},"end":{"line":5,"column":85}},"declarations":[{"type":"VariableDeclarator","start":164,"end":243,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":85}},"id":{"type":"Identifier","start":164,"end":177,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":19}},"name":"fileExtension"},"init":{"type":"ConditionalExpression","start":180,"end":243,"loc":{"start":{"line":5,"column":22},"end":{"line":5,"column":85}},"test":{"type":"MemberExpression","start":180,"end":189,"loc":{"start":{"line":5,"column":22},"end":{"line":5,"column":31}},"object":{"type":"Identifier","start":180,"end":184,"loc":{"start":{"line":5,"column":22},"end":{"line":5,"column":26}},"name":"file"},"property":{"type":"Identifier","start":185,"end":189,"loc":{"start":{"line":5,"column":27},"end":{"line":5,"column":31}},"name":"name"},"computed":false},"consequent":{"type":"MemberExpression","start":192,"end":236,"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":78}},"object":{"type":"CallExpression","start":192,"end":226,"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":68}},"callee":{"type":"Identifier","start":192,"end":215,"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":57}},"name":"getFileNameAndExtension"},"arguments":[{"type":"MemberExpression","start":216,"end":225,"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":67}},"object":{"type":"Identifier","start":216,"end":220,"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":62}},"name":"file"},"property":{"type":"Identifier","start":221,"end":225,"loc":{"start":{"line":5,"column":63},"end":{"line":5,"column":67}},"name":"name"},"computed":false}]},"property":{"type":"Identifier","start":227,"end":236,"loc":{"start":{"line":5,"column":69},"end":{"line":5,"column":78}},"name":"extension"},"computed":false},"alternate":{"type":"Literal","start":239,"end":243,"loc":{"start":{"line":5,"column":81},"end":{"line":5,"column":85}},"value":null,"raw":"null"}}}],"kind":"let"},{"type":"ExpressionStatement","start":246,"end":312,"loc":{"start":{"line":6,"column":2},"end":{"line":6,"column":68}},"expression":{"type":"AssignmentExpression","start":246,"end":312,"loc":{"start":{"line":6,"column":2},"end":{"line":6,"column":68}},"operator":"=","left":{"type":"Identifier","start":246,"end":259,"loc":{"start":{"line":6,"column":2},"end":{"line":6,"column":15}},"name":"fileExtension"},"right":{"type":"ConditionalExpression","start":262,"end":312,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":68}},"test":{"type":"Identifier","start":262,"end":275,"loc":{"start":{"line":6,"column":18},"end":{"line":6,"column":31}},"name":"fileExtension"},"consequent":{"type":"CallExpression","start":278,"end":305,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":61}},"callee":{"type":"MemberExpression","start":278,"end":303,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":59}},"object":{"type":"Identifier","start":278,"end":291,"loc":{"start":{"line":6,"column":34},"end":{"line":6,"column":47}},"name":"fileExtension"},"property":{"type":"Identifier","start":292,"end":303,"loc":{"start":{"line":6,"column":48},"end":{"line":6,"column":59}},"name":"toLowerCase"},"computed":false},"arguments":[]},"alternate":{"type":"Literal","start":308,"end":312,"loc":{"start":{"line":6,"column":64},"end":{"line":6,"column":68}},"value":null,"raw":"null"}}}},{"type":"IfStatement","start":316,"end":681,"loc":{"start":{"line":8,"column":2},"end":{"line":17,"column":3}},"test":{"type":"MemberExpression","start":320,"end":329,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":15}},"object":{"type":"Identifier","start":320,"end":324,"loc":{"start":{"line":8,"column":6},"end":{"line":8,"column":10}},"name":"file"},"property":{"type":"Identifier","start":325,"end":329,"loc":{"start":{"line":8,"column":11},"end":{"line":8,"column":15}},"name":"type"},"computed":false},"consequent":{"type":"BlockStatement","start":331,"end":421,"loc":{"start":{"line":8,"column":17},"end":{"line":11,"column":3}},"body":[{"type":"ReturnStatement","start":401,"end":417,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":20}},"argument":{"type":"MemberExpression","start":408,"end":417,"loc":{"start":{"line":10,"column":11},"end":{"line":10,"column":20}},"object":{"type":"Identifier","start":408,"end":412,"loc":{"start":{"line":10,"column":11},"end":{"line":10,"column":15}},"name":"file"},"property":{"type":"Identifier","start":413,"end":417,"loc":{"start":{"line":10,"column":16},"end":{"line":10,"column":20}},"name":"type"},"computed":false},"comments":[{"type":"Line","value":" if mime type is set in the file object already, use that","start":337,"end":396,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":63}}}]}]},"alternate":{"type":"IfStatement","start":427,"end":681,"loc":{"start":{"line":11,"column":9},"end":{"line":17,"column":3}},"test":{"type":"LogicalExpression","start":431,"end":472,"loc":{"start":{"line":11,"column":13},"end":{"line":11,"column":54}},"left":{"type":"Identifier","start":431,"end":444,"loc":{"start":{"line":11,"column":13},"end":{"line":11,"column":26}},"name":"fileExtension"},"operator":"&&","right":{"type":"MemberExpression","start":448,"end":472,"loc":{"start":{"line":11,"column":30},"end":{"line":11,"column":54}},"object":{"type":"Identifier","start":448,"end":457,"loc":{"start":{"line":11,"column":30},"end":{"line":11,"column":39}},"name":"mimeTypes"},"property":{"type":"Identifier","start":458,"end":471,"loc":{"start":{"line":11,"column":40},"end":{"line":11,"column":53}},"name":"fileExtension"},"computed":true}},"consequent":{"type":"BlockStatement","start":474,"end":571,"loc":{"start":{"line":11,"column":56},"end":{"line":14,"column":3}},"body":[{"type":"ReturnStatement","start":536,"end":567,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":35}},"argument":{"type":"MemberExpression","start":543,"end":567,"loc":{"start":{"line":13,"column":11},"end":{"line":13,"column":35}},"object":{"type":"Identifier","start":543,"end":552,"loc":{"start":{"line":13,"column":11},"end":{"line":13,"column":20}},"name":"mimeTypes"},"property":{"type":"Identifier","start":553,"end":566,"loc":{"start":{"line":13,"column":21},"end":{"line":13,"column":34}},"name":"fileExtension"},"computed":true},"comments":[{"type":"Line","value":" else, see if we can map extension to a mime type","start":480,"end":531,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":55}}}]}]},"alternate":{"type":"BlockStatement","start":577,"end":681,"loc":{"start":{"line":14,"column":9},"end":{"line":17,"column":3}},"body":[{"type":"ReturnStatement","start":644,"end":677,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":37}},"argument":{"type":"Literal","start":651,"end":677,"loc":{"start":{"line":16,"column":11},"end":{"line":16,"column":37}},"value":"application/octet-stream","raw":"'application/octet-stream'"},"comments":[{"type":"Line","value":" if all fails, fall back to a generic byte stream type","start":583,"end":639,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":60}}}]}]}}}]}}}}],"sourceType":"script"}