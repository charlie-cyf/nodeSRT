{"type":"Program","start":0,"end":1159,"loc":{"start":{"line":1,"column":0},"end":{"line":30,"column":0}},"body":[{"type":"ExpressionStatement","start":320,"end":1158,"loc":{"start":{"line":9,"column":0},"end":{"line":29,"column":1}},"expression":{"type":"AssignmentExpression","start":320,"end":1158,"loc":{"start":{"line":9,"column":0},"end":{"line":29,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":320,"end":334,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":14}},"object":{"type":"Identifier","start":320,"end":326,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":6}},"name":"module"},"property":{"type":"Identifier","start":327,"end":334,"loc":{"start":{"line":9,"column":7},"end":{"line":9,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":337,"end":1158,"loc":{"start":{"line":9,"column":17},"end":{"line":29,"column":1}},"id":{"type":"Identifier","start":346,"end":381,"loc":{"start":{"line":9,"column":26},"end":{"line":9,"column":61}},"name":"getFilesAndDirectoriesFromDirectory"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":383,"end":398,"loc":{"start":{"line":9,"column":63},"end":{"line":9,"column":78}},"name":"directoryReader"},{"type":"Identifier","start":400,"end":410,"loc":{"start":{"line":9,"column":80},"end":{"line":9,"column":90}},"name":"oldEntries"},{"type":"Identifier","start":412,"end":424,"loc":{"start":{"line":9,"column":92},"end":{"line":9,"column":104}},"name":"logDropError"},{"type":"ObjectPattern","start":426,"end":439,"loc":{"start":{"line":9,"column":106},"end":{"line":9,"column":119}},"properties":[{"type":"Property","start":428,"end":437,"loc":{"start":{"line":9,"column":108},"end":{"line":9,"column":117}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":428,"end":437,"loc":{"start":{"line":9,"column":108},"end":{"line":9,"column":117}},"name":"onSuccess"},"kind":"init","value":{"type":"Identifier","start":428,"end":437,"loc":{"start":{"line":9,"column":108},"end":{"line":9,"column":117}},"name":"onSuccess"}}]}],"body":{"type":"BlockStatement","start":441,"end":1158,"loc":{"start":{"line":9,"column":121},"end":{"line":29,"column":1}},"body":[{"type":"ExpressionStatement","start":445,"end":1156,"loc":{"start":{"line":10,"column":2},"end":{"line":28,"column":3}},"expression":{"type":"CallExpression","start":445,"end":1156,"loc":{"start":{"line":10,"column":2},"end":{"line":28,"column":3}},"callee":{"type":"MemberExpression","start":445,"end":472,"loc":{"start":{"line":10,"column":2},"end":{"line":10,"column":29}},"object":{"type":"Identifier","start":445,"end":460,"loc":{"start":{"line":10,"column":2},"end":{"line":10,"column":17}},"name":"directoryReader"},"property":{"type":"Identifier","start":461,"end":472,"loc":{"start":{"line":10,"column":18},"end":{"line":10,"column":29}},"name":"readEntries"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":478,"end":977,"loc":{"start":{"line":11,"column":4},"end":{"line":22,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":479,"end":486,"loc":{"start":{"line":11,"column":5},"end":{"line":11,"column":12}},"name":"entries"}],"body":{"type":"BlockStatement","start":491,"end":977,"loc":{"start":{"line":11,"column":17},"end":{"line":22,"column":5}},"body":[{"type":"VariableDeclaration","start":499,"end":545,"loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":52}},"declarations":[{"type":"VariableDeclarator","start":505,"end":545,"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":52}},"id":{"type":"Identifier","start":505,"end":515,"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":22}},"name":"newEntries"},"init":{"type":"ArrayExpression","start":518,"end":545,"loc":{"start":{"line":12,"column":25},"end":{"line":12,"column":52}},"elements":[{"type":"SpreadElement","start":519,"end":532,"loc":{"start":{"line":12,"column":26},"end":{"line":12,"column":39}},"argument":{"type":"Identifier","start":522,"end":532,"loc":{"start":{"line":12,"column":29},"end":{"line":12,"column":39}},"name":"oldEntries"}},{"type":"SpreadElement","start":534,"end":544,"loc":{"start":{"line":12,"column":41},"end":{"line":12,"column":51}},"argument":{"type":"Identifier","start":537,"end":544,"loc":{"start":{"line":12,"column":44},"end":{"line":12,"column":51}},"name":"entries"}}]}}],"kind":"const"},{"type":"IfStatement","start":702,"end":971,"loc":{"start":{"line":14,"column":6},"end":{"line":21,"column":7}},"test":{"type":"MemberExpression","start":706,"end":720,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":24}},"object":{"type":"Identifier","start":706,"end":713,"loc":{"start":{"line":14,"column":10},"end":{"line":14,"column":17}},"name":"entries"},"property":{"type":"Identifier","start":714,"end":720,"loc":{"start":{"line":14,"column":18},"end":{"line":14,"column":24}},"name":"length"},"computed":false},"consequent":{"type":"BlockStatement","start":722,"end":926,"loc":{"start":{"line":14,"column":26},"end":{"line":19,"column":7}},"body":[{"type":"ExpressionStatement","start":732,"end":868,"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":13}},"expression":{"type":"CallExpression","start":732,"end":868,"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":13}},"callee":{"type":"Identifier","start":732,"end":742,"loc":{"start":{"line":15,"column":8},"end":{"line":15,"column":18}},"name":"setTimeout"},"arguments":[{"type":"ArrowFunctionExpression","start":743,"end":864,"loc":{"start":{"line":15,"column":19},"end":{"line":17,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":749,"end":864,"loc":{"start":{"line":15,"column":25},"end":{"line":17,"column":9}},"body":[{"type":"ExpressionStatement","start":761,"end":854,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":103}},"expression":{"type":"CallExpression","start":761,"end":854,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":103}},"callee":{"type":"Identifier","start":761,"end":796,"loc":{"start":{"line":16,"column":10},"end":{"line":16,"column":45}},"name":"getFilesAndDirectoriesFromDirectory"},"arguments":[{"type":"Identifier","start":797,"end":812,"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":61}},"name":"directoryReader"},{"type":"Identifier","start":814,"end":824,"loc":{"start":{"line":16,"column":63},"end":{"line":16,"column":73}},"name":"newEntries"},{"type":"Identifier","start":826,"end":838,"loc":{"start":{"line":16,"column":75},"end":{"line":16,"column":87}},"name":"logDropError"},{"type":"ObjectExpression","start":840,"end":853,"loc":{"start":{"line":16,"column":89},"end":{"line":16,"column":102}},"properties":[{"type":"Property","start":842,"end":851,"loc":{"start":{"line":16,"column":91},"end":{"line":16,"column":100}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":842,"end":851,"loc":{"start":{"line":16,"column":91},"end":{"line":16,"column":100}},"name":"onSuccess"},"kind":"init","value":{"type":"Identifier","start":842,"end":851,"loc":{"start":{"line":16,"column":91},"end":{"line":16,"column":100}},"name":"onSuccess"}}]}]}}]}},{"type":"Literal","start":866,"end":867,"loc":{"start":{"line":17,"column":11},"end":{"line":17,"column":12}},"value":0,"raw":"0"}]}}],"trailingComments":[{"type":"Line","value":" Done iterating this particular directory","start":875,"end":918,"loc":{"start":{"line":18,"column":6},"end":{"line":18,"column":49}}}]},"alternate":{"type":"BlockStatement","start":932,"end":971,"loc":{"start":{"line":19,"column":13},"end":{"line":21,"column":7}},"body":[{"type":"ExpressionStatement","start":942,"end":963,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"expression":{"type":"CallExpression","start":942,"end":963,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"callee":{"type":"Identifier","start":942,"end":951,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":17}},"name":"onSuccess"},"arguments":[{"type":"Identifier","start":952,"end":962,"loc":{"start":{"line":20,"column":18},"end":{"line":20,"column":28}},"name":"newEntries"}]}}]},"comments":[{"type":"Line","value":" According to the FileSystem API spec, getFilesAndDirectoriesFromDirectory() must be called until it calls the onSuccess with an empty array.","start":552,"end":695,"loc":{"start":{"line":13,"column":6},"end":{"line":13,"column":149}}}]}]}},{"type":"ArrowFunctionExpression","start":1080,"end":1152,"loc":{"start":{"line":24,"column":4},"end":{"line":27,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1081,"end":1086,"loc":{"start":{"line":24,"column":5},"end":{"line":24,"column":10}},"name":"error"}],"body":{"type":"BlockStatement","start":1091,"end":1152,"loc":{"start":{"line":24,"column":15},"end":{"line":27,"column":5}},"body":[{"type":"ExpressionStatement","start":1099,"end":1118,"loc":{"start":{"line":25,"column":6},"end":{"line":25,"column":25}},"expression":{"type":"CallExpression","start":1099,"end":1118,"loc":{"start":{"line":25,"column":6},"end":{"line":25,"column":25}},"callee":{"type":"Identifier","start":1099,"end":1111,"loc":{"start":{"line":25,"column":6},"end":{"line":25,"column":18}},"name":"logDropError"},"arguments":[{"type":"Identifier","start":1112,"end":1117,"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":24}},"name":"error"}]},"comments":[{"type":"Line","value":" Make sure we resolve on error anyway, it's fine if only one directory couldn't be parsed!","start":983,"end":1075,"loc":{"start":{"line":23,"column":4},"end":{"line":23,"column":96}}}]},{"type":"ExpressionStatement","start":1125,"end":1146,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":27}},"expression":{"type":"CallExpression","start":1125,"end":1146,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":27}},"callee":{"type":"Identifier","start":1125,"end":1134,"loc":{"start":{"line":26,"column":6},"end":{"line":26,"column":15}},"name":"onSuccess"},"arguments":[{"type":"Identifier","start":1135,"end":1145,"loc":{"start":{"line":26,"column":16},"end":{"line":26,"column":26}},"name":"oldEntries"}]}}]}}]}}]}}}}],"sourceType":"script","comments":[{"type":"Block","value":"*\n * Recursive function, calls the original callback() when the directory is entirely parsed.\n *\n * @param {FileSystemDirectoryReader} directoryReader\n * @param {Array} oldEntries\n * @param {Function} logDropError\n * @param {Function} callback - called with ([ all files and directories in that directoryReader ])\n ","start":0,"end":319,"loc":{"start":{"line":1,"column":0},"end":{"line":8,"column":3}}}]}