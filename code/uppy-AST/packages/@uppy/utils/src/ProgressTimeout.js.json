{"type":"Program","start":0,"end":1094,"loc":{"start":{"line":1,"column":0},"end":{"line":38,"column":0}},"body":[{"type":"ClassDeclaration","start":305,"end":1059,"loc":{"start":{"line":7,"column":0},"end":{"line":35,"column":1}},"id":{"type":"Identifier","start":311,"end":326,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":21}},"name":"ProgressTimeout"},"superClass":null,"body":{"type":"ClassBody","start":327,"end":1059,"loc":{"start":{"line":7,"column":22},"end":{"line":35,"column":1}},"body":[{"type":"MethodDefinition","start":331,"end":544,"loc":{"start":{"line":8,"column":2},"end":{"line":14,"column":3}},"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":331,"end":342,"loc":{"start":{"line":8,"column":2},"end":{"line":8,"column":13}},"name":"constructor"},"value":{"type":"FunctionExpression","start":343,"end":544,"loc":{"start":{"line":8,"column":14},"end":{"line":14,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":344,"end":351,"loc":{"start":{"line":8,"column":15},"end":{"line":8,"column":22}},"name":"timeout"},{"type":"Identifier","start":353,"end":367,"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":38}},"name":"timeoutHandler"}],"body":{"type":"BlockStatement","start":369,"end":544,"loc":{"start":{"line":8,"column":40},"end":{"line":14,"column":3}},"body":[{"type":"ExpressionStatement","start":375,"end":398,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":27}},"expression":{"type":"AssignmentExpression","start":375,"end":398,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":27}},"operator":"=","left":{"type":"MemberExpression","start":375,"end":388,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":17}},"object":{"type":"ThisExpression","start":375,"end":379,"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":8}}},"property":{"type":"Identifier","start":380,"end":388,"loc":{"start":{"line":9,"column":9},"end":{"line":9,"column":17}},"name":"_timeout"},"computed":false},"right":{"type":"Identifier","start":391,"end":398,"loc":{"start":{"line":9,"column":20},"end":{"line":9,"column":27}},"name":"timeout"}}},{"type":"ExpressionStatement","start":403,"end":436,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":37}},"expression":{"type":"AssignmentExpression","start":403,"end":436,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":37}},"operator":"=","left":{"type":"MemberExpression","start":403,"end":419,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":20}},"object":{"type":"ThisExpression","start":403,"end":407,"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":8}}},"property":{"type":"Identifier","start":408,"end":419,"loc":{"start":{"line":10,"column":9},"end":{"line":10,"column":20}},"name":"_onTimedOut"},"computed":false},"right":{"type":"Identifier","start":422,"end":436,"loc":{"start":{"line":10,"column":23},"end":{"line":10,"column":37}},"name":"timeoutHandler"}}},{"type":"ExpressionStatement","start":441,"end":461,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":24}},"expression":{"type":"AssignmentExpression","start":441,"end":461,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":24}},"operator":"=","left":{"type":"MemberExpression","start":441,"end":453,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":16}},"object":{"type":"ThisExpression","start":441,"end":445,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":8}}},"property":{"type":"Identifier","start":446,"end":453,"loc":{"start":{"line":11,"column":9},"end":{"line":11,"column":16}},"name":"_isDone"},"computed":false},"right":{"type":"Literal","start":456,"end":461,"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":24}},"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":466,"end":489,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":27}},"expression":{"type":"AssignmentExpression","start":466,"end":489,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":27}},"operator":"=","left":{"type":"MemberExpression","start":466,"end":482,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":20}},"object":{"type":"ThisExpression","start":466,"end":470,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":8}}},"property":{"type":"Identifier","start":471,"end":482,"loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":20}},"name":"_aliveTimer"},"computed":false},"right":{"type":"Literal","start":485,"end":489,"loc":{"start":{"line":12,"column":23},"end":{"line":12,"column":27}},"value":null,"raw":"null"}}},{"type":"ExpressionStatement","start":494,"end":540,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":50}},"expression":{"type":"AssignmentExpression","start":494,"end":540,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":50}},"operator":"=","left":{"type":"MemberExpression","start":494,"end":510,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":20}},"object":{"type":"ThisExpression","start":494,"end":498,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":8}}},"property":{"type":"Identifier","start":499,"end":510,"loc":{"start":{"line":13,"column":9},"end":{"line":13,"column":20}},"name":"_onTimedOut"},"computed":false},"right":{"type":"CallExpression","start":513,"end":540,"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":50}},"callee":{"type":"MemberExpression","start":513,"end":534,"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":44}},"object":{"type":"MemberExpression","start":513,"end":529,"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":39}},"object":{"type":"ThisExpression","start":513,"end":517,"loc":{"start":{"line":13,"column":23},"end":{"line":13,"column":27}}},"property":{"type":"Identifier","start":518,"end":529,"loc":{"start":{"line":13,"column":28},"end":{"line":13,"column":39}},"name":"_onTimedOut"},"computed":false},"property":{"type":"Identifier","start":530,"end":534,"loc":{"start":{"line":13,"column":40},"end":{"line":13,"column":44}},"name":"bind"},"computed":false},"arguments":[{"type":"ThisExpression","start":535,"end":539,"loc":{"start":{"line":13,"column":45},"end":{"line":13,"column":49}}}]}}}]}}},{"type":"MethodDefinition","start":548,"end":915,"loc":{"start":{"line":16,"column":2},"end":{"line":26,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":548,"end":556,"loc":{"start":{"line":16,"column":2},"end":{"line":16,"column":10}},"name":"progress"},"value":{"type":"FunctionExpression","start":557,"end":915,"loc":{"start":{"line":16,"column":11},"end":{"line":26,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":560,"end":915,"loc":{"start":{"line":16,"column":14},"end":{"line":26,"column":3}},"body":[{"type":"IfStatement","start":723,"end":747,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":28}},"test":{"type":"MemberExpression","start":727,"end":739,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":20}},"object":{"type":"ThisExpression","start":727,"end":731,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":12}}},"property":{"type":"Identifier","start":732,"end":739,"loc":{"start":{"line":20,"column":13},"end":{"line":20,"column":20}},"name":"_isDone"},"computed":false},"consequent":{"type":"ReturnStatement","start":741,"end":747,"loc":{"start":{"line":20,"column":22},"end":{"line":20,"column":28}},"argument":null},"alternate":null,"comments":[{"type":"Line","value":" Some browsers fire another progress event when the upload is","start":566,"end":629,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":67}}},{"type":"Line","value":" cancelled, so we have to ignore progress after the timer was","start":634,"end":697,"loc":{"start":{"line":18,"column":4},"end":{"line":18,"column":67}}},{"type":"Line","value":" told to stop.","start":702,"end":718,"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":20}}}]},{"type":"IfStatement","start":753,"end":911,"loc":{"start":{"line":22,"column":4},"end":{"line":25,"column":5}},"test":{"type":"BinaryExpression","start":757,"end":774,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":25}},"left":{"type":"MemberExpression","start":757,"end":770,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":21}},"object":{"type":"ThisExpression","start":757,"end":761,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":12}}},"property":{"type":"Identifier","start":762,"end":770,"loc":{"start":{"line":22,"column":13},"end":{"line":22,"column":21}},"name":"_timeout"},"computed":false},"operator":">","right":{"type":"Literal","start":773,"end":774,"loc":{"start":{"line":22,"column":24},"end":{"line":22,"column":25}},"value":0,"raw":"0"}},"consequent":{"type":"BlockStatement","start":776,"end":911,"loc":{"start":{"line":22,"column":27},"end":{"line":25,"column":5}},"body":[{"type":"IfStatement","start":784,"end":836,"loc":{"start":{"line":23,"column":6},"end":{"line":23,"column":58}},"test":{"type":"MemberExpression","start":788,"end":804,"loc":{"start":{"line":23,"column":10},"end":{"line":23,"column":26}},"object":{"type":"ThisExpression","start":788,"end":792,"loc":{"start":{"line":23,"column":10},"end":{"line":23,"column":14}}},"property":{"type":"Identifier","start":793,"end":804,"loc":{"start":{"line":23,"column":15},"end":{"line":23,"column":26}},"name":"_aliveTimer"},"computed":false},"consequent":{"type":"ExpressionStatement","start":806,"end":836,"loc":{"start":{"line":23,"column":28},"end":{"line":23,"column":58}},"expression":{"type":"CallExpression","start":806,"end":836,"loc":{"start":{"line":23,"column":28},"end":{"line":23,"column":58}},"callee":{"type":"Identifier","start":806,"end":818,"loc":{"start":{"line":23,"column":28},"end":{"line":23,"column":40}},"name":"clearTimeout"},"arguments":[{"type":"MemberExpression","start":819,"end":835,"loc":{"start":{"line":23,"column":41},"end":{"line":23,"column":57}},"object":{"type":"ThisExpression","start":819,"end":823,"loc":{"start":{"line":23,"column":41},"end":{"line":23,"column":45}}},"property":{"type":"Identifier","start":824,"end":835,"loc":{"start":{"line":23,"column":46},"end":{"line":23,"column":57}},"name":"_aliveTimer"},"computed":false}]}},"alternate":null},{"type":"ExpressionStatement","start":843,"end":905,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":68}},"expression":{"type":"AssignmentExpression","start":843,"end":905,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":68}},"operator":"=","left":{"type":"MemberExpression","start":843,"end":859,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":22}},"object":{"type":"ThisExpression","start":843,"end":847,"loc":{"start":{"line":24,"column":6},"end":{"line":24,"column":10}}},"property":{"type":"Identifier","start":848,"end":859,"loc":{"start":{"line":24,"column":11},"end":{"line":24,"column":22}},"name":"_aliveTimer"},"computed":false},"right":{"type":"CallExpression","start":862,"end":905,"loc":{"start":{"line":24,"column":25},"end":{"line":24,"column":68}},"callee":{"type":"Identifier","start":862,"end":872,"loc":{"start":{"line":24,"column":25},"end":{"line":24,"column":35}},"name":"setTimeout"},"arguments":[{"type":"MemberExpression","start":873,"end":889,"loc":{"start":{"line":24,"column":36},"end":{"line":24,"column":52}},"object":{"type":"ThisExpression","start":873,"end":877,"loc":{"start":{"line":24,"column":36},"end":{"line":24,"column":40}}},"property":{"type":"Identifier","start":878,"end":889,"loc":{"start":{"line":24,"column":41},"end":{"line":24,"column":52}},"name":"_onTimedOut"},"computed":false},{"type":"MemberExpression","start":891,"end":904,"loc":{"start":{"line":24,"column":54},"end":{"line":24,"column":67}},"object":{"type":"ThisExpression","start":891,"end":895,"loc":{"start":{"line":24,"column":54},"end":{"line":24,"column":58}}},"property":{"type":"Identifier","start":896,"end":904,"loc":{"start":{"line":24,"column":59},"end":{"line":24,"column":67}},"name":"_timeout"},"computed":false}]}}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":919,"end":1057,"loc":{"start":{"line":28,"column":2},"end":{"line":34,"column":3}},"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":919,"end":923,"loc":{"start":{"line":28,"column":2},"end":{"line":28,"column":6}},"name":"done"},"value":{"type":"FunctionExpression","start":924,"end":1057,"loc":{"start":{"line":28,"column":7},"end":{"line":34,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":927,"end":1057,"loc":{"start":{"line":28,"column":10},"end":{"line":34,"column":3}},"body":[{"type":"IfStatement","start":933,"end":1029,"loc":{"start":{"line":29,"column":4},"end":{"line":32,"column":5}},"test":{"type":"MemberExpression","start":937,"end":953,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":24}},"object":{"type":"ThisExpression","start":937,"end":941,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":12}}},"property":{"type":"Identifier","start":942,"end":953,"loc":{"start":{"line":29,"column":13},"end":{"line":29,"column":24}},"name":"_aliveTimer"},"computed":false},"consequent":{"type":"BlockStatement","start":955,"end":1029,"loc":{"start":{"line":29,"column":26},"end":{"line":32,"column":5}},"body":[{"type":"ExpressionStatement","start":963,"end":993,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":36}},"expression":{"type":"CallExpression","start":963,"end":993,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":36}},"callee":{"type":"Identifier","start":963,"end":975,"loc":{"start":{"line":30,"column":6},"end":{"line":30,"column":18}},"name":"clearTimeout"},"arguments":[{"type":"MemberExpression","start":976,"end":992,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":35}},"object":{"type":"ThisExpression","start":976,"end":980,"loc":{"start":{"line":30,"column":19},"end":{"line":30,"column":23}}},"property":{"type":"Identifier","start":981,"end":992,"loc":{"start":{"line":30,"column":24},"end":{"line":30,"column":35}},"name":"_aliveTimer"},"computed":false}]}},{"type":"ExpressionStatement","start":1000,"end":1023,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":29}},"expression":{"type":"AssignmentExpression","start":1000,"end":1023,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":29}},"operator":"=","left":{"type":"MemberExpression","start":1000,"end":1016,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":22}},"object":{"type":"ThisExpression","start":1000,"end":1004,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":10}}},"property":{"type":"Identifier","start":1005,"end":1016,"loc":{"start":{"line":31,"column":11},"end":{"line":31,"column":22}},"name":"_aliveTimer"},"computed":false},"right":{"type":"Literal","start":1019,"end":1023,"loc":{"start":{"line":31,"column":25},"end":{"line":31,"column":29}},"value":null,"raw":"null"}}}]},"alternate":null},{"type":"ExpressionStatement","start":1034,"end":1053,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":23}},"expression":{"type":"AssignmentExpression","start":1034,"end":1053,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":23}},"operator":"=","left":{"type":"MemberExpression","start":1034,"end":1046,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":16}},"object":{"type":"ThisExpression","start":1034,"end":1038,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":8}}},"property":{"type":"Identifier","start":1039,"end":1046,"loc":{"start":{"line":33,"column":9},"end":{"line":33,"column":16}},"name":"_isDone"},"computed":false},"right":{"type":"Literal","start":1049,"end":1053,"loc":{"start":{"line":33,"column":19},"end":{"line":33,"column":23}},"value":true,"raw":"true"}}}]}}}]}},{"type":"ExpressionStatement","start":1061,"end":1093,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":32}},"expression":{"type":"AssignmentExpression","start":1061,"end":1093,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":32}},"operator":"=","left":{"type":"MemberExpression","start":1061,"end":1075,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":14}},"object":{"type":"Identifier","start":1061,"end":1067,"loc":{"start":{"line":37,"column":0},"end":{"line":37,"column":6}},"name":"module"},"property":{"type":"Identifier","start":1068,"end":1075,"loc":{"start":{"line":37,"column":7},"end":{"line":37,"column":14}},"name":"exports"},"computed":false},"right":{"type":"Identifier","start":1078,"end":1093,"loc":{"start":{"line":37,"column":17},"end":{"line":37,"column":32}},"name":"ProgressTimeout"}}}],"sourceType":"script","comments":[{"type":"Block","value":"*\n * Helper to abort upload requests if there has not been any progress for `timeout` ms.\n * Create an instance using `timer = new ProgressTimeout(10000, onTimeout)`\n * Call `timer.progress()` to signal that there has been progress of any kind.\n * Call `timer.done()` when the upload has completed.\n ","start":0,"end":304,"loc":{"start":{"line":1,"column":0},"end":{"line":6,"column":3}}}]}