{"type":"Program","start":0,"end":3721,"body":[{"type":"FunctionDeclaration","start":64,"end":202,"id":{"type":"Identifier","start":73,"end":82,"name":"findIndex"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":84,"end":89,"name":"array"},{"type":"Identifier","start":91,"end":100,"name":"predicate"}],"body":{"type":"BlockStatement","start":102,"end":202,"body":[{"type":"ForStatement","start":106,"end":188,"init":{"type":"VariableDeclaration","start":111,"end":120,"declarations":[{"type":"VariableDeclarator","start":115,"end":120,"id":{"type":"Identifier","start":115,"end":116,"name":"i"},"init":{"type":"Literal","start":119,"end":120,"value":0,"raw":"0"}}],"kind":"let"},"test":{"type":"BinaryExpression","start":122,"end":138,"left":{"type":"Identifier","start":122,"end":123,"name":"i"},"operator":"<","right":{"type":"MemberExpression","start":126,"end":138,"object":{"type":"Identifier","start":126,"end":131,"name":"array"},"property":{"type":"Identifier","start":132,"end":138,"name":"length"},"computed":false}},"update":{"type":"UpdateExpression","start":140,"end":143,"operator":"++","prefix":false,"argument":{"type":"Identifier","start":140,"end":141,"name":"i"}},"body":{"type":"BlockStatement","start":145,"end":188,"body":[{"type":"IfStatement","start":151,"end":184,"test":{"type":"CallExpression","start":155,"end":174,"callee":{"type":"Identifier","start":155,"end":164,"name":"predicate"},"arguments":[{"type":"MemberExpression","start":165,"end":173,"object":{"type":"Identifier","start":165,"end":170,"name":"array"},"property":{"type":"Identifier","start":171,"end":172,"name":"i"},"computed":true}]},"consequent":{"type":"ReturnStatement","start":176,"end":184,"argument":{"type":"Identifier","start":183,"end":184,"name":"i"}},"alternate":null}]}},{"type":"ReturnStatement","start":191,"end":200,"argument":{"type":"UnaryExpression","start":198,"end":200,"operator":"-","prefix":true,"argument":{"type":"Literal","start":199,"end":200,"value":1,"raw":"1"}}}]}},{"type":"FunctionDeclaration","start":204,"end":269,"id":{"type":"Identifier","start":213,"end":230,"name":"createCancelError"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":234,"end":269,"body":[{"type":"ReturnStatement","start":238,"end":267,"argument":{"type":"NewExpression","start":245,"end":267,"callee":{"type":"Identifier","start":249,"end":254,"name":"Error"},"arguments":[{"type":"Literal","start":255,"end":266,"value":"Cancelled","raw":"'Cancelled'"}]}}]}},{"type":"ExpressionStatement","start":271,"end":3720,"expression":{"type":"AssignmentExpression","start":271,"end":3720,"operator":"=","left":{"type":"MemberExpression","start":271,"end":285,"object":{"type":"Identifier","start":271,"end":277,"name":"module"},"property":{"type":"Identifier","start":278,"end":285,"name":"exports"},"computed":false},"right":{"type":"ClassExpression","start":288,"end":3720,"id":{"type":"Identifier","start":294,"end":310,"name":"RateLimitedQueue"},"superClass":null,"body":{"type":"ClassBody","start":311,"end":3720,"body":[{"type":"MethodDefinition","start":315,"end":522,"kind":"constructor","static":false,"computed":false,"key":{"type":"Identifier","start":315,"end":326,"name":"constructor"},"value":{"type":"FunctionExpression","start":327,"end":522,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":328,"end":333,"name":"limit"}],"body":{"type":"BlockStatement","start":335,"end":522,"body":[{"type":"IfStatement","start":341,"end":460,"test":{"type":"LogicalExpression","start":345,"end":385,"left":{"type":"BinaryExpression","start":345,"end":370,"left":{"type":"UnaryExpression","start":345,"end":357,"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":352,"end":357,"name":"limit"}},"operator":"!==","right":{"type":"Literal","start":362,"end":370,"value":"number","raw":"'number'"}},"operator":"||","right":{"type":"BinaryExpression","start":374,"end":385,"left":{"type":"Identifier","start":374,"end":379,"name":"limit"},"operator":"===","right":{"type":"Literal","start":384,"end":385,"value":0,"raw":"0"}}},"consequent":{"type":"BlockStatement","start":387,"end":422,"body":[{"type":"ExpressionStatement","start":395,"end":416,"expression":{"type":"AssignmentExpression","start":395,"end":416,"operator":"=","left":{"type":"MemberExpression","start":395,"end":405,"object":{"type":"ThisExpression","start":395,"end":399},"property":{"type":"Identifier","start":400,"end":405,"name":"limit"},"computed":false},"right":{"type":"Identifier","start":408,"end":416,"name":"Infinity"}}}]},"alternate":{"type":"BlockStatement","start":428,"end":460,"body":[{"type":"ExpressionStatement","start":436,"end":454,"expression":{"type":"AssignmentExpression","start":436,"end":454,"operator":"=","left":{"type":"MemberExpression","start":436,"end":446,"object":{"type":"ThisExpression","start":436,"end":440},"property":{"type":"Identifier","start":441,"end":446,"name":"limit"},"computed":false},"right":{"type":"Identifier","start":449,"end":454,"name":"limit"}}}]}},{"type":"ExpressionStatement","start":466,"end":489,"expression":{"type":"AssignmentExpression","start":466,"end":489,"operator":"=","left":{"type":"MemberExpression","start":466,"end":485,"object":{"type":"ThisExpression","start":466,"end":470},"property":{"type":"Identifier","start":471,"end":485,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":488,"end":489,"value":0,"raw":"0"}}},{"type":"ExpressionStatement","start":494,"end":518,"expression":{"type":"AssignmentExpression","start":494,"end":518,"operator":"=","left":{"type":"MemberExpression","start":494,"end":513,"object":{"type":"ThisExpression","start":494,"end":498},"property":{"type":"Identifier","start":499,"end":513,"name":"queuedHandlers"},"computed":false},"right":{"type":"ArrayExpression","start":516,"end":518,"elements":[]}}}]}}},{"type":"MethodDefinition","start":526,"end":1034,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":526,"end":531,"name":"_call"},"value":{"type":"FunctionExpression","start":532,"end":1034,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":533,"end":535,"name":"fn"}],"body":{"type":"BlockStatement","start":537,"end":1034,"body":[{"type":"ExpressionStatement","start":543,"end":567,"expression":{"type":"AssignmentExpression","start":543,"end":567,"operator":"+=","left":{"type":"MemberExpression","start":543,"end":562,"object":{"type":"ThisExpression","start":543,"end":547},"property":{"type":"Identifier","start":548,"end":562,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":566,"end":567,"value":1,"raw":"1"}}},{"type":"VariableDeclaration","start":573,"end":589,"declarations":[{"type":"VariableDeclarator","start":577,"end":589,"id":{"type":"Identifier","start":577,"end":581,"name":"done"},"init":{"type":"Literal","start":584,"end":589,"value":false,"raw":"false"}}],"kind":"let"},{"type":"VariableDeclaration","start":595,"end":611,"declarations":[{"type":"VariableDeclarator","start":599,"end":611,"id":{"type":"Identifier","start":599,"end":611,"name":"cancelActive"},"init":null}],"kind":"let"},{"type":"TryStatement","start":616,"end":720,"block":{"type":"BlockStatement","start":620,"end":653,"body":[{"type":"ExpressionStatement","start":628,"end":647,"expression":{"type":"AssignmentExpression","start":628,"end":647,"operator":"=","left":{"type":"Identifier","start":628,"end":640,"name":"cancelActive"},"right":{"type":"CallExpression","start":643,"end":647,"callee":{"type":"Identifier","start":643,"end":645,"name":"fn"},"arguments":[]}}}]},"handler":{"type":"CatchClause","start":654,"end":720,"param":{"type":"Identifier","start":661,"end":664,"name":"err"},"body":{"type":"BlockStatement","start":666,"end":720,"body":[{"type":"ExpressionStatement","start":674,"end":698,"expression":{"type":"AssignmentExpression","start":674,"end":698,"operator":"-=","left":{"type":"MemberExpression","start":674,"end":693,"object":{"type":"ThisExpression","start":674,"end":678},"property":{"type":"Identifier","start":679,"end":693,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":697,"end":698,"value":1,"raw":"1"}}},{"type":"ThrowStatement","start":705,"end":714,"argument":{"type":"Identifier","start":711,"end":714,"name":"err"}}]}},"finalizer":null},{"type":"ReturnStatement","start":726,"end":1030,"argument":{"type":"ObjectExpression","start":733,"end":1030,"properties":[{"type":"Property","start":741,"end":890,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":741,"end":746,"name":"abort"},"value":{"type":"ArrowFunctionExpression","start":748,"end":890,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":754,"end":890,"body":[{"type":"IfStatement","start":764,"end":780,"test":{"type":"Identifier","start":768,"end":772,"name":"done"},"consequent":{"type":"ReturnStatement","start":774,"end":780,"argument":null},"alternate":null},{"type":"ExpressionStatement","start":789,"end":800,"expression":{"type":"AssignmentExpression","start":789,"end":800,"operator":"=","left":{"type":"Identifier","start":789,"end":793,"name":"done"},"right":{"type":"Literal","start":796,"end":800,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":809,"end":833,"expression":{"type":"AssignmentExpression","start":809,"end":833,"operator":"-=","left":{"type":"MemberExpression","start":809,"end":828,"object":{"type":"ThisExpression","start":809,"end":813},"property":{"type":"Identifier","start":814,"end":828,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":832,"end":833,"value":1,"raw":"1"}}},{"type":"ExpressionStatement","start":842,"end":856,"expression":{"type":"CallExpression","start":842,"end":856,"callee":{"type":"Identifier","start":842,"end":854,"name":"cancelActive"},"arguments":[]}},{"type":"ExpressionStatement","start":865,"end":882,"expression":{"type":"CallExpression","start":865,"end":882,"callee":{"type":"MemberExpression","start":865,"end":880,"object":{"type":"ThisExpression","start":865,"end":869},"property":{"type":"Identifier","start":870,"end":880,"name":"_queueNext"},"computed":false},"arguments":[]}}]}},"kind":"init"},{"type":"Property","start":899,"end":1024,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":899,"end":903,"name":"done"},"value":{"type":"ArrowFunctionExpression","start":905,"end":1024,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":911,"end":1024,"body":[{"type":"IfStatement","start":921,"end":937,"test":{"type":"Identifier","start":925,"end":929,"name":"done"},"consequent":{"type":"ReturnStatement","start":931,"end":937,"argument":null},"alternate":null},{"type":"ExpressionStatement","start":946,"end":957,"expression":{"type":"AssignmentExpression","start":946,"end":957,"operator":"=","left":{"type":"Identifier","start":946,"end":950,"name":"done"},"right":{"type":"Literal","start":953,"end":957,"value":true,"raw":"true"}}},{"type":"ExpressionStatement","start":966,"end":990,"expression":{"type":"AssignmentExpression","start":966,"end":990,"operator":"-=","left":{"type":"MemberExpression","start":966,"end":985,"object":{"type":"ThisExpression","start":966,"end":970},"property":{"type":"Identifier","start":971,"end":985,"name":"activeRequests"},"computed":false},"right":{"type":"Literal","start":989,"end":990,"value":1,"raw":"1"}}},{"type":"ExpressionStatement","start":999,"end":1016,"expression":{"type":"CallExpression","start":999,"end":1016,"callee":{"type":"MemberExpression","start":999,"end":1014,"object":{"type":"ThisExpression","start":999,"end":1003},"property":{"type":"Identifier","start":1004,"end":1014,"name":"_queueNext"},"computed":false},"arguments":[]}}]}},"kind":"init"}]}}]}}},{"type":"MethodDefinition","start":1038,"end":1332,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1038,"end":1048,"name":"_queueNext"},"value":{"type":"FunctionExpression","start":1049,"end":1332,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1052,"end":1332,"body":[{"type":"ExpressionStatement","start":1272,"end":1328,"expression":{"type":"CallExpression","start":1272,"end":1328,"callee":{"type":"MemberExpression","start":1272,"end":1294,"object":{"type":"CallExpression","start":1272,"end":1289,"callee":{"type":"MemberExpression","start":1272,"end":1287,"object":{"type":"Identifier","start":1272,"end":1279,"name":"Promise"},"property":{"type":"Identifier","start":1280,"end":1287,"name":"resolve"},"computed":false},"arguments":[]},"property":{"type":"Identifier","start":1290,"end":1294,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1295,"end":1327,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1301,"end":1327,"body":[{"type":"ExpressionStatement","start":1309,"end":1321,"expression":{"type":"CallExpression","start":1309,"end":1321,"callee":{"type":"MemberExpression","start":1309,"end":1319,"object":{"type":"ThisExpression","start":1309,"end":1313},"property":{"type":"Identifier","start":1314,"end":1319,"name":"_next"},"computed":false},"arguments":[]}}]}}]}}]}}},{"type":"MethodDefinition","start":1336,"end":1811,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1336,"end":1341,"name":"_next"},"value":{"type":"FunctionExpression","start":1342,"end":1811,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1345,"end":1811,"body":[{"type":"IfStatement","start":1351,"end":1410,"test":{"type":"BinaryExpression","start":1355,"end":1388,"left":{"type":"MemberExpression","start":1355,"end":1374,"object":{"type":"ThisExpression","start":1355,"end":1359},"property":{"type":"Identifier","start":1360,"end":1374,"name":"activeRequests"},"computed":false},"operator":">=","right":{"type":"MemberExpression","start":1378,"end":1388,"object":{"type":"ThisExpression","start":1378,"end":1382},"property":{"type":"Identifier","start":1383,"end":1388,"name":"limit"},"computed":false}},"consequent":{"type":"BlockStatement","start":1390,"end":1410,"body":[{"type":"ReturnStatement","start":1398,"end":1404,"argument":null}]},"alternate":null},{"type":"IfStatement","start":1415,"end":1473,"test":{"type":"BinaryExpression","start":1419,"end":1451,"left":{"type":"MemberExpression","start":1419,"end":1445,"object":{"type":"MemberExpression","start":1419,"end":1438,"object":{"type":"ThisExpression","start":1419,"end":1423},"property":{"type":"Identifier","start":1424,"end":1438,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":1439,"end":1445,"name":"length"},"computed":false},"operator":"===","right":{"type":"Literal","start":1450,"end":1451,"value":0,"raw":"0"}},"consequent":{"type":"BlockStatement","start":1453,"end":1473,"body":[{"type":"ReturnStatement","start":1461,"end":1467,"argument":null}]},"alternate":null},{"type":"VariableDeclaration","start":1667,"end":1707,"declarations":[{"type":"VariableDeclarator","start":1673,"end":1707,"id":{"type":"Identifier","start":1673,"end":1677,"name":"next"},"init":{"type":"CallExpression","start":1680,"end":1707,"callee":{"type":"MemberExpression","start":1680,"end":1705,"object":{"type":"MemberExpression","start":1680,"end":1699,"object":{"type":"ThisExpression","start":1680,"end":1684},"property":{"type":"Identifier","start":1685,"end":1699,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":1700,"end":1705,"name":"shift"},"computed":false},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":1712,"end":1747,"declarations":[{"type":"VariableDeclarator","start":1718,"end":1747,"id":{"type":"Identifier","start":1718,"end":1725,"name":"handler"},"init":{"type":"CallExpression","start":1728,"end":1747,"callee":{"type":"MemberExpression","start":1728,"end":1738,"object":{"type":"ThisExpression","start":1728,"end":1732},"property":{"type":"Identifier","start":1733,"end":1738,"name":"_call"},"computed":false},"arguments":[{"type":"MemberExpression","start":1739,"end":1746,"object":{"type":"Identifier","start":1739,"end":1743,"name":"next"},"property":{"type":"Identifier","start":1744,"end":1746,"name":"fn"},"computed":false}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1752,"end":1778,"expression":{"type":"AssignmentExpression","start":1752,"end":1778,"operator":"=","left":{"type":"MemberExpression","start":1752,"end":1762,"object":{"type":"Identifier","start":1752,"end":1756,"name":"next"},"property":{"type":"Identifier","start":1757,"end":1762,"name":"abort"},"computed":false},"right":{"type":"MemberExpression","start":1765,"end":1778,"object":{"type":"Identifier","start":1765,"end":1772,"name":"handler"},"property":{"type":"Identifier","start":1773,"end":1778,"name":"abort"},"computed":false}}},{"type":"ExpressionStatement","start":1783,"end":1807,"expression":{"type":"AssignmentExpression","start":1783,"end":1807,"operator":"=","left":{"type":"MemberExpression","start":1783,"end":1792,"object":{"type":"Identifier","start":1783,"end":1787,"name":"next"},"property":{"type":"Identifier","start":1788,"end":1792,"name":"done"},"computed":false},"right":{"type":"MemberExpression","start":1795,"end":1807,"object":{"type":"Identifier","start":1795,"end":1802,"name":"handler"},"property":{"type":"Identifier","start":1803,"end":1807,"name":"done"},"computed":false}}}]}}},{"type":"MethodDefinition","start":1815,"end":2369,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":1815,"end":1821,"name":"_queue"},"value":{"type":"FunctionExpression","start":1822,"end":2369,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1823,"end":1825,"name":"fn"},{"type":"AssignmentPattern","start":1827,"end":1839,"left":{"type":"Identifier","start":1827,"end":1834,"name":"options"},"right":{"type":"ObjectExpression","start":1837,"end":1839,"properties":[]}}],"body":{"type":"BlockStatement","start":1841,"end":2369,"body":[{"type":"VariableDeclaration","start":1847,"end":2094,"declarations":[{"type":"VariableDeclarator","start":1853,"end":2094,"id":{"type":"Identifier","start":1853,"end":1860,"name":"handler"},"init":{"type":"ObjectExpression","start":1863,"end":2094,"properties":[{"type":"Property","start":1871,"end":1873,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1871,"end":1873,"name":"fn"},"kind":"init","value":{"type":"Identifier","start":1871,"end":1873,"name":"fn"}},{"type":"Property","start":1881,"end":1912,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1881,"end":1889,"name":"priority"},"value":{"type":"LogicalExpression","start":1891,"end":1912,"left":{"type":"MemberExpression","start":1891,"end":1907,"object":{"type":"Identifier","start":1891,"end":1898,"name":"options"},"property":{"type":"Identifier","start":1899,"end":1907,"name":"priority"},"computed":false},"operator":"||","right":{"type":"Literal","start":1911,"end":1912,"value":0,"raw":"0"}},"kind":"init"},{"type":"Property","start":1920,"end":1973,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1920,"end":1925,"name":"abort"},"value":{"type":"ArrowFunctionExpression","start":1927,"end":1973,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1933,"end":1973,"body":[{"type":"ExpressionStatement","start":1943,"end":1965,"expression":{"type":"CallExpression","start":1943,"end":1965,"callee":{"type":"MemberExpression","start":1943,"end":1956,"object":{"type":"ThisExpression","start":1943,"end":1947},"property":{"type":"Identifier","start":1948,"end":1956,"name":"_dequeue"},"computed":false},"arguments":[{"type":"Identifier","start":1957,"end":1964,"name":"handler"}]}}]}},"kind":"init"},{"type":"Property","start":1981,"end":2088,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1981,"end":1985,"name":"done"},"value":{"type":"ArrowFunctionExpression","start":1987,"end":2088,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":1993,"end":2088,"body":[{"type":"ThrowStatement","start":2003,"end":2080,"argument":{"type":"NewExpression","start":2009,"end":2080,"callee":{"type":"Identifier","start":2013,"end":2018,"name":"Error"},"arguments":[{"type":"Literal","start":2019,"end":2079,"value":"Cannot mark a queued request as done: this indicates a bug","raw":"'Cannot mark a queued request as done: this indicates a bug'"}]}}]}},"kind":"init"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":2100,"end":2211,"declarations":[{"type":"VariableDeclarator","start":2106,"end":2211,"id":{"type":"Identifier","start":2106,"end":2111,"name":"index"},"init":{"type":"CallExpression","start":2114,"end":2211,"callee":{"type":"Identifier","start":2114,"end":2123,"name":"findIndex"},"arguments":[{"type":"MemberExpression","start":2124,"end":2143,"object":{"type":"ThisExpression","start":2124,"end":2128},"property":{"type":"Identifier","start":2129,"end":2143,"name":"queuedHandlers"},"computed":false},{"type":"ArrowFunctionExpression","start":2145,"end":2210,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2146,"end":2151,"name":"other"}],"body":{"type":"BlockStatement","start":2156,"end":2210,"body":[{"type":"ReturnStatement","start":2164,"end":2204,"argument":{"type":"BinaryExpression","start":2171,"end":2204,"left":{"type":"MemberExpression","start":2171,"end":2187,"object":{"type":"Identifier","start":2171,"end":2178,"name":"handler"},"property":{"type":"Identifier","start":2179,"end":2187,"name":"priority"},"computed":false},"operator":">","right":{"type":"MemberExpression","start":2190,"end":2204,"object":{"type":"Identifier","start":2190,"end":2195,"name":"other"},"property":{"type":"Identifier","start":2196,"end":2204,"name":"priority"},"computed":false}}}]}}]}}],"kind":"const"},{"type":"IfStatement","start":2216,"end":2346,"test":{"type":"BinaryExpression","start":2220,"end":2232,"left":{"type":"Identifier","start":2220,"end":2225,"name":"index"},"operator":"===","right":{"type":"UnaryExpression","start":2230,"end":2232,"operator":"-","prefix":true,"argument":{"type":"Literal","start":2231,"end":2232,"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":2234,"end":2281,"body":[{"type":"ExpressionStatement","start":2242,"end":2275,"expression":{"type":"CallExpression","start":2242,"end":2275,"callee":{"type":"MemberExpression","start":2242,"end":2266,"object":{"type":"MemberExpression","start":2242,"end":2261,"object":{"type":"ThisExpression","start":2242,"end":2246},"property":{"type":"Identifier","start":2247,"end":2261,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2262,"end":2266,"name":"push"},"computed":false},"arguments":[{"type":"Identifier","start":2267,"end":2274,"name":"handler"}]}}]},"alternate":{"type":"BlockStatement","start":2287,"end":2346,"body":[{"type":"ExpressionStatement","start":2295,"end":2340,"expression":{"type":"CallExpression","start":2295,"end":2340,"callee":{"type":"MemberExpression","start":2295,"end":2321,"object":{"type":"MemberExpression","start":2295,"end":2314,"object":{"type":"ThisExpression","start":2295,"end":2299},"property":{"type":"Identifier","start":2300,"end":2314,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2315,"end":2321,"name":"splice"},"computed":false},"arguments":[{"type":"Identifier","start":2322,"end":2327,"name":"index"},{"type":"Literal","start":2329,"end":2330,"value":0,"raw":"0"},{"type":"Identifier","start":2332,"end":2339,"name":"handler"}]}}]}},{"type":"ReturnStatement","start":2351,"end":2365,"argument":{"type":"Identifier","start":2358,"end":2365,"name":"handler"}}]}}},{"type":"MethodDefinition","start":2373,"end":2525,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":2373,"end":2381,"name":"_dequeue"},"value":{"type":"FunctionExpression","start":2382,"end":2525,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2383,"end":2390,"name":"handler"}],"body":{"type":"BlockStatement","start":2392,"end":2525,"body":[{"type":"VariableDeclaration","start":2398,"end":2448,"declarations":[{"type":"VariableDeclarator","start":2404,"end":2448,"id":{"type":"Identifier","start":2404,"end":2409,"name":"index"},"init":{"type":"CallExpression","start":2412,"end":2448,"callee":{"type":"MemberExpression","start":2412,"end":2439,"object":{"type":"MemberExpression","start":2412,"end":2431,"object":{"type":"ThisExpression","start":2412,"end":2416},"property":{"type":"Identifier","start":2417,"end":2431,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2432,"end":2439,"name":"indexOf"},"computed":false},"arguments":[{"type":"Identifier","start":2440,"end":2447,"name":"handler"}]}}],"kind":"const"},{"type":"IfStatement","start":2453,"end":2521,"test":{"type":"BinaryExpression","start":2457,"end":2469,"left":{"type":"Identifier","start":2457,"end":2462,"name":"index"},"operator":"!==","right":{"type":"UnaryExpression","start":2467,"end":2469,"operator":"-","prefix":true,"argument":{"type":"Literal","start":2468,"end":2469,"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":2471,"end":2521,"body":[{"type":"ExpressionStatement","start":2479,"end":2515,"expression":{"type":"CallExpression","start":2479,"end":2515,"callee":{"type":"MemberExpression","start":2479,"end":2505,"object":{"type":"MemberExpression","start":2479,"end":2498,"object":{"type":"ThisExpression","start":2479,"end":2483},"property":{"type":"Identifier","start":2484,"end":2498,"name":"queuedHandlers"},"computed":false},"property":{"type":"Identifier","start":2499,"end":2505,"name":"splice"},"computed":false},"arguments":[{"type":"Identifier","start":2506,"end":2511,"name":"index"},{"type":"Literal","start":2513,"end":2514,"value":1,"raw":"1"}]}}]},"alternate":null}]}}},{"type":"MethodDefinition","start":2529,"end":2676,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":2529,"end":2532,"name":"run"},"value":{"type":"FunctionExpression","start":2533,"end":2676,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2534,"end":2536,"name":"fn"},{"type":"Identifier","start":2538,"end":2550,"name":"queueOptions"}],"body":{"type":"BlockStatement","start":2552,"end":2676,"body":[{"type":"IfStatement","start":2558,"end":2631,"test":{"type":"BinaryExpression","start":2562,"end":2594,"left":{"type":"MemberExpression","start":2562,"end":2581,"object":{"type":"ThisExpression","start":2562,"end":2566},"property":{"type":"Identifier","start":2567,"end":2581,"name":"activeRequests"},"computed":false},"operator":"<","right":{"type":"MemberExpression","start":2584,"end":2594,"object":{"type":"ThisExpression","start":2584,"end":2588},"property":{"type":"Identifier","start":2589,"end":2594,"name":"limit"},"computed":false}},"consequent":{"type":"BlockStatement","start":2596,"end":2631,"body":[{"type":"ReturnStatement","start":2604,"end":2625,"argument":{"type":"CallExpression","start":2611,"end":2625,"callee":{"type":"MemberExpression","start":2611,"end":2621,"object":{"type":"ThisExpression","start":2611,"end":2615},"property":{"type":"Identifier","start":2616,"end":2621,"name":"_call"},"computed":false},"arguments":[{"type":"Identifier","start":2622,"end":2624,"name":"fn"}]}}]},"alternate":null},{"type":"ReturnStatement","start":2636,"end":2672,"argument":{"type":"CallExpression","start":2643,"end":2672,"callee":{"type":"MemberExpression","start":2643,"end":2654,"object":{"type":"ThisExpression","start":2643,"end":2647},"property":{"type":"Identifier","start":2648,"end":2654,"name":"_queue"},"computed":false},"arguments":[{"type":"Identifier","start":2655,"end":2657,"name":"fn"},{"type":"Identifier","start":2659,"end":2671,"name":"queueOptions"}]}}]}}},{"type":"MethodDefinition","start":2680,"end":3718,"kind":"method","static":false,"computed":false,"key":{"type":"Identifier","start":2680,"end":2699,"name":"wrapPromiseFunction"},"value":{"type":"FunctionExpression","start":2700,"end":3718,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2701,"end":2703,"name":"fn"},{"type":"Identifier","start":2705,"end":2717,"name":"queueOptions"}],"body":{"type":"BlockStatement","start":2719,"end":3718,"body":[{"type":"ReturnStatement","start":2725,"end":3714,"argument":{"type":"ArrowFunctionExpression","start":2732,"end":3714,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"RestElement","start":2733,"end":2740,"argument":{"type":"Identifier","start":2736,"end":2740,"name":"args"}}],"body":{"type":"BlockStatement","start":2745,"end":3714,"body":[{"type":"VariableDeclaration","start":2753,"end":2770,"declarations":[{"type":"VariableDeclarator","start":2757,"end":2770,"id":{"type":"Identifier","start":2757,"end":2770,"name":"queuedRequest"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","start":2777,"end":3607,"declarations":[{"type":"VariableDeclarator","start":2783,"end":3607,"id":{"type":"Identifier","start":2783,"end":2795,"name":"outerPromise"},"init":{"type":"NewExpression","start":2798,"end":3607,"callee":{"type":"Identifier","start":2802,"end":2809,"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":2810,"end":3606,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2811,"end":2818,"name":"resolve"},{"type":"Identifier","start":2820,"end":2826,"name":"reject"}],"body":{"type":"BlockStatement","start":2831,"end":3606,"body":[{"type":"ExpressionStatement","start":2841,"end":3598,"expression":{"type":"AssignmentExpression","start":2841,"end":3598,"operator":"=","left":{"type":"Identifier","start":2841,"end":2854,"name":"queuedRequest"},"right":{"type":"CallExpression","start":2857,"end":3598,"callee":{"type":"MemberExpression","start":2857,"end":2865,"object":{"type":"ThisExpression","start":2857,"end":2861},"property":{"type":"Identifier","start":2862,"end":2865,"name":"run"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":2866,"end":3583,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":2872,"end":3583,"body":[{"type":"VariableDeclaration","start":2884,"end":2899,"declarations":[{"type":"VariableDeclarator","start":2888,"end":2899,"id":{"type":"Identifier","start":2888,"end":2899,"name":"cancelError"},"init":null}],"kind":"let"},{"type":"VariableDeclaration","start":2910,"end":2926,"declarations":[{"type":"VariableDeclarator","start":2914,"end":2926,"id":{"type":"Identifier","start":2914,"end":2926,"name":"innerPromise"},"init":null}],"kind":"let"},{"type":"TryStatement","start":2937,"end":3083,"block":{"type":"BlockStatement","start":2941,"end":3010,"body":[{"type":"ExpressionStatement","start":2955,"end":2998,"expression":{"type":"AssignmentExpression","start":2955,"end":2998,"operator":"=","left":{"type":"Identifier","start":2955,"end":2967,"name":"innerPromise"},"right":{"type":"CallExpression","start":2970,"end":2998,"callee":{"type":"MemberExpression","start":2970,"end":2985,"object":{"type":"Identifier","start":2970,"end":2977,"name":"Promise"},"property":{"type":"Identifier","start":2978,"end":2985,"name":"resolve"},"computed":false},"arguments":[{"type":"CallExpression","start":2986,"end":2997,"callee":{"type":"Identifier","start":2986,"end":2988,"name":"fn"},"arguments":[{"type":"SpreadElement","start":2989,"end":2996,"argument":{"type":"Identifier","start":2992,"end":2996,"name":"args"}}]}]}}}]},"handler":{"type":"CatchClause","start":3011,"end":3083,"param":{"type":"Identifier","start":3018,"end":3021,"name":"err"},"body":{"type":"BlockStatement","start":3023,"end":3083,"body":[{"type":"ExpressionStatement","start":3037,"end":3071,"expression":{"type":"AssignmentExpression","start":3037,"end":3071,"operator":"=","left":{"type":"Identifier","start":3037,"end":3049,"name":"innerPromise"},"right":{"type":"CallExpression","start":3052,"end":3071,"callee":{"type":"MemberExpression","start":3052,"end":3066,"object":{"type":"Identifier","start":3052,"end":3059,"name":"Promise"},"property":{"type":"Identifier","start":3060,"end":3066,"name":"reject"},"computed":false},"arguments":[{"type":"Identifier","start":3067,"end":3070,"name":"err"}]}}}]}},"finalizer":null},{"type":"ExpressionStatement","start":3095,"end":3489,"expression":{"type":"CallExpression","start":3095,"end":3489,"callee":{"type":"MemberExpression","start":3095,"end":3112,"object":{"type":"Identifier","start":3095,"end":3107,"name":"innerPromise"},"property":{"type":"Identifier","start":3108,"end":3112,"name":"then"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":3113,"end":3303,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3114,"end":3120,"name":"result"}],"body":{"type":"BlockStatement","start":3125,"end":3303,"body":[{"type":"IfStatement","start":3139,"end":3291,"test":{"type":"Identifier","start":3143,"end":3154,"name":"cancelError"},"consequent":{"type":"BlockStatement","start":3156,"end":3205,"body":[{"type":"ExpressionStatement","start":3172,"end":3191,"expression":{"type":"CallExpression","start":3172,"end":3191,"callee":{"type":"Identifier","start":3172,"end":3178,"name":"reject"},"arguments":[{"type":"Identifier","start":3179,"end":3190,"name":"cancelError"}]}}]},"alternate":{"type":"BlockStatement","start":3211,"end":3291,"body":[{"type":"ExpressionStatement","start":3227,"end":3247,"expression":{"type":"CallExpression","start":3227,"end":3247,"callee":{"type":"MemberExpression","start":3227,"end":3245,"object":{"type":"Identifier","start":3227,"end":3240,"name":"queuedRequest"},"property":{"type":"Identifier","start":3241,"end":3245,"name":"done"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":3262,"end":3277,"expression":{"type":"CallExpression","start":3262,"end":3277,"callee":{"type":"Identifier","start":3262,"end":3269,"name":"resolve"},"arguments":[{"type":"Identifier","start":3270,"end":3276,"name":"result"}]}}]}}]}},{"type":"ArrowFunctionExpression","start":3305,"end":3488,"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3306,"end":3309,"name":"err"}],"body":{"type":"BlockStatement","start":3314,"end":3488,"body":[{"type":"IfStatement","start":3328,"end":3476,"test":{"type":"Identifier","start":3332,"end":3343,"name":"cancelError"},"consequent":{"type":"BlockStatement","start":3345,"end":3394,"body":[{"type":"ExpressionStatement","start":3361,"end":3380,"expression":{"type":"CallExpression","start":3361,"end":3380,"callee":{"type":"Identifier","start":3361,"end":3367,"name":"reject"},"arguments":[{"type":"Identifier","start":3368,"end":3379,"name":"cancelError"}]}}]},"alternate":{"type":"BlockStatement","start":3400,"end":3476,"body":[{"type":"ExpressionStatement","start":3416,"end":3436,"expression":{"type":"CallExpression","start":3416,"end":3436,"callee":{"type":"MemberExpression","start":3416,"end":3434,"object":{"type":"Identifier","start":3416,"end":3429,"name":"queuedRequest"},"property":{"type":"Identifier","start":3430,"end":3434,"name":"done"},"computed":false},"arguments":[]}},{"type":"ExpressionStatement","start":3451,"end":3462,"expression":{"type":"CallExpression","start":3451,"end":3462,"callee":{"type":"Identifier","start":3451,"end":3457,"name":"reject"},"arguments":[{"type":"Identifier","start":3458,"end":3461,"name":"err"}]}}]}}]}}]}},{"type":"ReturnStatement","start":3501,"end":3573,"argument":{"type":"ArrowFunctionExpression","start":3508,"end":3573,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3514,"end":3573,"body":[{"type":"ExpressionStatement","start":3528,"end":3561,"expression":{"type":"AssignmentExpression","start":3528,"end":3561,"operator":"=","left":{"type":"Identifier","start":3528,"end":3539,"name":"cancelError"},"right":{"type":"CallExpression","start":3542,"end":3561,"callee":{"type":"Identifier","start":3542,"end":3559,"name":"createCancelError"},"arguments":[]}}}]}}}]}},{"type":"Identifier","start":3585,"end":3597,"name":"queueOptions"}]}}}]}}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3615,"end":3681,"expression":{"type":"AssignmentExpression","start":3615,"end":3681,"operator":"=","left":{"type":"MemberExpression","start":3615,"end":3633,"object":{"type":"Identifier","start":3615,"end":3627,"name":"outerPromise"},"property":{"type":"Identifier","start":3628,"end":3633,"name":"abort"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":3636,"end":3681,"id":null,"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3642,"end":3681,"body":[{"type":"ExpressionStatement","start":3652,"end":3673,"expression":{"type":"CallExpression","start":3652,"end":3673,"callee":{"type":"MemberExpression","start":3652,"end":3671,"object":{"type":"Identifier","start":3652,"end":3665,"name":"queuedRequest"},"property":{"type":"Identifier","start":3666,"end":3671,"name":"abort"},"computed":false},"arguments":[]}}]}}}},{"type":"ReturnStatement","start":3689,"end":3708,"argument":{"type":"Identifier","start":3696,"end":3708,"name":"outerPromise"}}]}}}]}}}]}}}}],"sourceType":"script"}