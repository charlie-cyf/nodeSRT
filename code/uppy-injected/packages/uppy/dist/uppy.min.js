!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Uppy=e()}}(function(){var define,module,exports,createModuleFactory=function(e){var t;return function(n){return t||e(t={exports:{},parent:n},t.exports),t.exports}},_$lib_86=createModuleFactory(function(e,t){var n=_$browser_92("socket.io-client");e.exports=t=i;var r=t.managers={};function i(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,o=_$url_90(e),s=o.source,a=o.id,u=o.path,l=r[a]&&u in r[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||l?(n("ignoring socket cache for %s",s),i=_$manager_87(s,t)):(r[a]||(n("new io instance for %s",s),r[a]=_$manager_87(s,t)),i=r[a]),o.query&&!t.query&&(t.query=o.query),i.socket(o.path,t)}t.protocol=_$socketIoParser_96.protocol,t.connect=i,t.Manager=_$manager_87,t.Socket=_$socket_89}),_$empty_34=createModuleFactory(function(e,t){}),_$buffer_35=createModuleFactory(function(e,t){(function(e){"use strict";t.Buffer=e,t.INSPECT_MAX_BYTES=50;var n=2147483647;function r(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return r.__proto__=e.prototype,r}function e(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return i(e,t,n)}function i(t,n,i){if("string"==typeof t)return function(t,n){if("string"==typeof n&&""!==n||(n="utf8"),!e.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=0|l(t,n),o=r(i),s=o.write(t,n);return s!==i&&(o=o.slice(0,s)),o}(t,n);if(ArrayBuffer.isView(t))return a(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(P(t,ArrayBuffer)||t&&P(t.buffer,ArrayBuffer))return function(t,n,r){if(n<0||t.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return(i=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r)).__proto__=e.prototype,i}(t,n,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=t.valueOf&&t.valueOf();if(null!=o&&o!==t)return e.from(o,n,i);var s=function(t){if(e.isBuffer(t)){var n=0|u(t.length),i=r(n);return 0===i.length?i:(t.copy(i,0,0,n),i)}return void 0!==t.length?"number"!=typeof t.length||D(t.length)?r(0):a(t):"Buffer"===t.type&&Array.isArray(t.data)?a(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return o(e),r(e<0?0:0|u(e))}function a(e){for(var t=e.length<0?0:0|u(e.length),n=r(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function u(e){if(e>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function l(t,n){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||P(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return A(t).length;default:if(o)return i?-1:U(t).length;n=(""+n).toLowerCase(),o=!0}}function c(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(t,n,r,i,o){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),D(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof n&&(n=e.from(n,i)),e.isBuffer(n))return 0===n.length?-1:d(t,n,r,i,o);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,n,r):Uint8Array.prototype.lastIndexOf.call(t,n,r):d(t,[n],r,i,o);throw new TypeError("val must be string, number or Buffer")}function d(e,t,n,r,i){var o,s=1,a=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=n;o<a;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var p=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){p=!1;break}if(p)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(D(a))return s;e[n+s]=a}return s}function f(e,t,n,r){return k(U(t,e.length-n),e,n,r)}function h(e,t,n,r){return k(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function m(e,t,n,r){return h(e,t,n,r)}function y(e,t,n,r){return k(A(t),e,n,r)}function g(e,t,n,r){return k(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function b(e,t,n){return 0===t&&n===e.length?_$base64Js_32.fromByteArray(e):_$base64Js_32.fromByteArray(e.slice(t,n))}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,l=e[i],c=null,p=l>239?4:l>223?3:l>191?2:1;if(i+p<=n)switch(p){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(u=(15&l)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=p}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}e.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(e,t,n){return i(e,t,n)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(e,t,n){return function(e,t,n){return o(e),e<=0?r(e):void 0!==t?"string"==typeof n?r(e).fill(t,n):r(e).fill(t):r(e)}(e,t,n)},e.allocUnsafe=function(e){return s(e)},e.allocUnsafeSlow=function(e){return s(e)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,n){if(P(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),P(n,Uint8Array)&&(n=e.from(n,n.offset,n.byteLength)),!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;for(var r=t.length,i=n.length,o=0,s=Math.min(r,i);o<s;++o)if(t[o]!==n[o]){r=t[o],i=n[o];break}return r<i?-1:i<r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var i=e.allocUnsafe(n),o=0;for(r=0;r<t.length;++r){var s=t[r];if(P(s,Uint8Array)&&(s=e.from(s)),!e.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,o),o+=s.length}return i},e.byteLength=l,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},e.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},e.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},e.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return v(this,t,n);case"ascii":return N(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},e.prototype.compare=function(t,n,r,i,o){if(P(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(i>>>=0),a=(r>>>=0)-(n>>>=0),u=Math.min(s,a),l=this.slice(i,o),c=t.slice(n,r),p=0;p<u;++p)if(l[p]!==c[p]){s=l[p],a=c[p];break}return s<a?-1:a<s?1:0},e.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},e.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},e.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},e.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return f(this,e,t,n);case"ascii":return h(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return y(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function N(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=t;s<n;++s)o+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return o}function w(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function $(t,n,r,i,o,s){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>o||n<s)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,4),_$ieee754_67.write(e,t,n,r,23,4),n+4}function E(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,8),_$ieee754_67.write(e,t,n,r,52,8),n+8}e.prototype.slice=function(t,n){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t);var i=this.subarray(t,n);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},e.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},e.prototype.readUInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return e>>>=0,t||R(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},e.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},e.prototype.readInt8=function(e,t){return e>>>=0,t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){e>>>=0,t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return e>>>=0,t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return e>>>=0,t||R(e,4,this.length),_$ieee754_67.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return e>>>=0,t||R(e,4,this.length),_$ieee754_67.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return e>>>=0,t||R(e,8,this.length),_$ieee754_67.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return e>>>=0,t||R(e,8,this.length),_$ieee754_67.read(this,e,!1,52,8)},e.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||$(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},e.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||$(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},e.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,1,255,0),this[t]=255&e,t+1},e.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},e.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);$(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);$(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},e.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},e.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},e.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},e.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},e.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||$(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},e.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return E(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return E(this,e,t,!1,n)},e.prototype.copy=function(t,n,r,i){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=t.length&&(n=t.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-n<i-r&&(i=t.length-n+r);var o=i-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===t&&r<n&&n<i)for(var s=o-1;s>=0;--s)t[s+n]=this[s+r];else Uint8Array.prototype.set.call(t,this.subarray(r,i),n);return o},e.prototype.fill=function(t,n,r,i){if("string"==typeof t){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var s;if(n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=n;s<r;++s)this[s]=t;else{var a=e.isBuffer(t)?t:e.from(t,i),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-n;++s)this[s+n]=a[s%u]}return this};var I=/[^+/0-9A-Za-z-_]/g;function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function A(e){return _$base64Js_32.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function P(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function D(e){return e!=e}}).call(this,_$buffer_35({}).Buffer)}),_$cookies_22=createModuleFactory(function(e,t){"use strict";e.exports=_$utils_28.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var s=[];s.push(e+"="+encodeURIComponent(t)),_$utils_28.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),_$utils_28.isString(r)&&s.push("path="+r),_$utils_28.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}),_$bind_19=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},_$isBuffer_29=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},toString=Object.prototype.toString;function isArray(e){return"[object Array]"===toString.call(e)}function isObject(e){return null!==e&&"object"==typeof e}function isFunction(e){return"[object Function]"===toString.call(e)}function forEach(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),isArray(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var _$utils_28={isArray:isArray,isArrayBuffer:function(e){return"[object ArrayBuffer]"===toString.call(e)},isBuffer:_$isBuffer_29,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:isObject,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===toString.call(e)},isFile:function(e){return"[object File]"===toString.call(e)},isBlob:function(e){return"[object Blob]"===toString.call(e)},isStream:function(e){return isObject(e)&&isFunction(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:forEach,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,i=arguments.length;r<i;r++)forEach(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,i=arguments.length;r<i;r++)forEach(arguments[r],n);return t},extend:function(e,t,n){return forEach(t,function(t,r){e[r]=n&&"function"==typeof t?_$bind_19(t,n):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function encode(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var _$buildURL_20=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(_$utils_28.isURLSearchParams(t))r=t.toString();else{var i=[];_$utils_28.forEach(t,function(e,t){null!=e&&(_$utils_28.isArray(e)?t+="[]":e=[e],_$utils_28.forEach(e,function(e){_$utils_28.isDate(e)?e=e.toISOString():_$utils_28.isObject(e)&&(e=JSON.stringify(e)),i.push(encode(t)+"="+encode(e))}))}),r=i.join("&")}if(r){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e},_$InterceptorManager_11={};function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},InterceptorManager.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},InterceptorManager.prototype.forEach=function(e){_$utils_28.forEach(this.handlers,function(t){null!==t&&e(t)})},_$InterceptorManager_11=InterceptorManager;var _$transformData_17=function(e,t,n){return _$utils_28.forEach(n,function(n){e=n(e,t)}),e},_$isCancel_9=function(e){return!(!e||!e.__CANCEL__)},_$normalizeHeaderName_25=function(e,t){_$utils_28.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})},_$enhanceError_14=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},_$createError_12=function(e,t,n,r,i){var o=new Error(e);return _$enhanceError_14(o,t,n,r,i)},_$settle_16=function(e,t,n){var r=n.config.validateStatus;!r||r(n.status)?e(n):t(_$createError_12("Request failed with status code "+n.status,n.config,null,n.request,n))},ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],_$parseHeaders_26=function(e){var t,n,r,i={};return e?(_$utils_28.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=_$utils_28.trim(e.substr(0,r)).toLowerCase(),n=_$utils_28.trim(e.substr(r+1)),t){if(i[t]&&ignoreDuplicateOf.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}}),i):i},_$isURLSameOrigin_24=_$utils_28.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=_$utils_28.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},_$xhr_5=function(e){return new Promise(function(t,n){var r=e.data,i=e.headers;_$utils_28.isFormData(r)&&delete i["Content-Type"];var o=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password||"";i.Authorization="Basic "+btoa(s+":"+a)}if(o.open(e.method.toUpperCase(),_$buildURL_20(e.url,e.params,e.paramsSerializer),!0),o.timeout=e.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in o?_$parseHeaders_26(o.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:r,config:e,request:o};_$settle_16(t,n,i),o=null}},o.onabort=function(){o&&(n(_$createError_12("Request aborted",e,"ECONNABORTED",o)),o=null)},o.onerror=function(){n(_$createError_12("Network Error",e,null,o)),o=null},o.ontimeout=function(){n(_$createError_12("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",o)),o=null},_$utils_28.isStandardBrowserEnv()){var u=_$cookies_22({}),l=(e.withCredentials||_$isURLSameOrigin_24(e.url))&&e.xsrfCookieName?u.read(e.xsrfCookieName):void 0;l&&(i[e.xsrfHeaderName]=l)}if("setRequestHeader"in o&&_$utils_28.forEach(i,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete i[t]:o.setRequestHeader(t,e)}),e.withCredentials&&(o.withCredentials=!0),e.responseType)try{o.responseType=e.responseType}catch(c){if("json"!==e.responseType)throw c}"function"==typeof e.onDownloadProgress&&o.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){o&&(o.abort(),n(e),o=null)}),void 0===r&&(r=null),o.send(r)})},_$browser_81={},cachedSetTimeout,cachedClearTimeout,process=_$browser_81={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,function(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var _$defaults_18={};(function(e){"use strict";var t={"Content-Type":"application/x-www-form-urlencoded"};function n(e,t){!_$utils_28.isUndefined(e)&&_$utils_28.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var r,i={adapter:(void 0!==e&&"[object process]"===Object.prototype.toString.call(e)?r=_$xhr_5:"undefined"!=typeof XMLHttpRequest&&(r=_$xhr_5),r),transformRequest:[function(e,t){return _$normalizeHeaderName_25(t,"Accept"),_$normalizeHeaderName_25(t,"Content-Type"),_$utils_28.isFormData(e)||_$utils_28.isArrayBuffer(e)||_$utils_28.isBuffer(e)||_$utils_28.isStream(e)||_$utils_28.isFile(e)||_$utils_28.isBlob(e)?e:_$utils_28.isArrayBufferView(e)?e.buffer:_$utils_28.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):_$utils_28.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};_$utils_28.forEach(["delete","get","head"],function(e){i.headers[e]={}}),_$utils_28.forEach(["post","put","patch"],function(e){i.headers[e]=_$utils_28.merge(t)}),_$defaults_18=i}).call(this,_$browser_81);var _$isAbsoluteURL_23=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},_$combineURLs_21=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e};function throwIfCancellationRequested(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var _$dispatchRequest_13=function(e){return throwIfCancellationRequested(e),e.baseURL&&!_$isAbsoluteURL_23(e.url)&&(e.url=_$combineURLs_21(e.baseURL,e.url)),e.headers=e.headers||{},e.data=_$transformData_17(e.data,e.headers,e.transformRequest),e.headers=_$utils_28.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),_$utils_28.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||_$defaults_18.adapter)(e).then(function(t){return throwIfCancellationRequested(e),t.data=_$transformData_17(t.data,t.headers,e.transformResponse),t},function(t){return _$isCancel_9(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=_$transformData_17(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})},_$mergeConfig_15=function(e,t){t=t||{};var n={};return _$utils_28.forEach(["url","method","params","data"],function(e){void 0!==t[e]&&(n[e]=t[e])}),_$utils_28.forEach(["headers","auth","proxy"],function(r){_$utils_28.isObject(t[r])?n[r]=_$utils_28.deepMerge(e[r],t[r]):void 0!==t[r]?n[r]=t[r]:_$utils_28.isObject(e[r])?n[r]=_$utils_28.deepMerge(e[r]):void 0!==e[r]&&(n[r]=e[r])}),_$utils_28.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}),n},_$Axios_10={};function Axios(e){this.defaults=e,this.interceptors={request:new _$InterceptorManager_11,response:new _$InterceptorManager_11}}Axios.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=_$mergeConfig_15(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[_$dispatchRequest_13,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},Axios.prototype.getUri=function(e){return e=_$mergeConfig_15(this.defaults,e),_$buildURL_20(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},_$utils_28.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(t,n){return this.request(_$utils_28.merge(n||{},{method:e,url:t}))}}),_$utils_28.forEach(["post","put","patch"],function(e){Axios.prototype[e]=function(t,n,r){return this.request(_$utils_28.merge(r||{},{method:e,url:t,data:n}))}}),_$Axios_10=Axios;var _$Cancel_7={};function Cancel(e){this.message=e}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,_$Cancel_7=Cancel;var _$CancelToken_8={};function CancelToken(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new _$Cancel_7(e),t(n.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var e;return{token:new CancelToken(function(t){e=t}),cancel:e}},_$CancelToken_8=CancelToken;var _$spread_27=function(e){return function(t){return e.apply(null,t)}},_$axios_6={};function createInstance(e){var t=new _$Axios_10(e),n=_$bind_19(_$Axios_10.prototype.request,t);return _$utils_28.extend(n,_$Axios_10.prototype,t),_$utils_28.extend(n,t),n}var axios=createInstance(_$defaults_18);axios.Axios=_$Axios_10,axios.create=function(e){return createInstance(_$mergeConfig_15(axios.defaults,e))},axios.Cancel=_$Cancel_7,axios.CancelToken=_$CancelToken_8,axios.isCancel=_$isCancel_9,axios.all=function(e){return Promise.all(e)},axios.spread=_$spread_27,_$axios_6=axios,_$axios_6.default=axios;var _$axios_4=_$axios_6,_$SRTlib_1=class e{static startLogger(t,n){e.started||(e.started=!0,e.basePath=t,e.message="",e.endPontUrl=n,e.logFile=t.split("/").pop()+".log")}static send(t){e.endPontUrl&&e.basePath?e.message=e.message+t:console.warn("received message when SRTlib logger not started!")}static async endLogger(){if(e.started||console.warn("endlogger when SRTlib is not started!"),e.started=!1,0!==e.message.length){const t=e.message;e.message="",await _$axios_4.post(e.endPontUrl,{fileName:e.logFile,msg:t}).then(e=>{e.status<400||new Error("fail to send to log server!")}).catch(e=>{new Error("fail to send to log server!",e)})}}},_$es6Promise_61={exports:{}};(function(e,t){!function(e,t){"object"==typeof _$es6Promise_61.exports?_$es6Promise_61.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){"use strict";function n(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,o=void 0,s=void 0,a=function(e,t){f[i]=e,f[i+1]=t,2===(i+=2)&&(s?s(h):v())},u="undefined"!=typeof window?window:void 0,l=u||{},c=l.MutationObserver||l.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function _(){var e=setTimeout;return function(){return e(h,1)}}var f=new Array(1e3);function h(){for(var e=0;e<i;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;i=0}var m,y,g,b,v=void 0;function T(e,t){var n=this,r=new this.constructor(C);void 0===r[S]&&x(r);var i=n._state;if(i){var o=arguments[i-1];a(function(){return P(i,r,o,n._result)})}else A(n,r,e,t);return r}function N(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(C);return O(t,e),t}p?v=function(){return e.nextTick(h)}:c?(y=0,g=new c(h),b=document.createTextNode(""),g.observe(b,{characterData:!0}),v=function(){b.data=y=++y%2}):d?((m=new MessageChannel).port1.onmessage=h,v=function(){return m.port2.postMessage(0)}):v=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(o=e.runOnLoop||e.runOnContext)?function(){o(h)}:_()}catch(t){return _()}}():_();var S=Math.random().toString(36).substring(2);function C(){}var w=void 0,R=1,$=2;function F(e,t,r){t.constructor===e.constructor&&r===T&&t.constructor.resolve===N?function(e,t){t._state===R?I(e,t._result):t._state===$?U(e,t._result):A(t,void 0,function(t){return O(e,t)},function(t){return U(e,t)})}(e,t):void 0===r?I(e,t):n(r)?function(e,t,n){a(function(e){var r=!1,i=function(n,i,o,s){try{n.call(i,function(n){r||(r=!0,t!==n?O(e,n):I(e,n))},function(t){r||(r=!0,U(e,t))})}catch(a){return a}}(n,t,0,0,e._label);!r&&i&&(r=!0,U(e,i))},e)}(e,t,r):I(e,t)}function O(e,t){if(e===t)U(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=t),null===r||"object"!==i&&"function"!==i)I(e,t);else{var n=void 0;try{n=t.then}catch(error){return void U(e,error)}F(e,t,n)}var r,i}function E(e){e._onerror&&e._onerror(e._result),k(e)}function I(e,t){e._state===w&&(e._result=t,e._state=R,0!==e._subscribers.length&&a(k,e))}function U(e,t){e._state===w&&(e._state=$,e._result=t,a(E,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+R]=n,i[o+$]=r,0===o&&e._state&&a(k,e)}function k(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?P(n,r,i,o):i(o);e._subscribers.length=0}}function P(e,t,r,i){var o=n(r),s=void 0,a=void 0,u=!0;if(o){try{s=r(i)}catch(l){u=!1,a=l}if(t===s)return void U(t,new TypeError("A promises callback cannot return that same promise."))}else s=i;t._state!==w||(o&&u?O(t,s):!1===u?U(t,a):e===R?I(t,s):e===$&&U(t,s))}var D=0;function x(e){e[S]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var B=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(C),this.promise[S]||x(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):U(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===N){var i=void 0,o=void 0,s=!1;try{i=e.then}catch(u){s=!0,o=u}if(i===T&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===M){var a=new n(C);s?U(a,o):F(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===w&&(this._remaining--,e===$?U(r,n):this._result[t]=n),0===this._remaining&&I(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(R,t,e)},function(e){return n._settledAt($,t,e)})},e}(),M=function(){function e(t){this[S]=D++,this._result=this._state=void 0,this._subscribers=[],C!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){O(e,t)},function(t){U(e,t)})}catch(n){U(e,n)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return n(e)?this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})}):this.then(e,e)},e}();return M.prototype.then=T,M.all=function(e){return new B(this,e).promise},M.race=function(e){var t=this;return r(e)?new t(function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},M.resolve=N,M.reject=function(e){var t=new this(C);return U(t,e),t},M._setScheduler=function(e){s=e},M._setAsap=function(e){a=e},M._asap=a,M.polyfill=function(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(i){}if("[object Promise]"===r&&!n.cast)return}e.Promise=M},M.Promise=M,M})}).call(this,_$browser_81,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$es6Promise_61=_$es6Promise_61.exports;var _$auto_60=_$es6Promise_61.polyfill(),_$fetchUmd_116={exports:{}},__global_116,factory;__global_116=this,factory=function(e){"use strict";var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader,n=l(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){var n;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:t.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:t.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():t.arrayBuffer&&t.blob&&(n=e)&&DataView.prototype.isPrototypeOf(n)?(this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||r(e))?this._bodyArrayBuffer=p(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e,t,n,r=u(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=l(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(e,t){e=i(e),t=o(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},a.prototype.delete=function(e){delete this.map[i(e)]},a.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},a.prototype.set=function(e,t){this.map[i(e)]=o(t)},a.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),s(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),s(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),s(e)},t.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function f(e,t){var n,r,i=(t=t||{}).body;if(e instanceof f){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),_.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}f.prototype.clone=function(){return new f(this,{body:this._bodyInit})},d.call(f.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];m.redirect=function(e,t){if(-1===y.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.DOMException=self.DOMException;try{new e.DOMException}catch(err){e.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function g(n,r){return new Promise(function(i,o){var s=new f(n,r);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}u.onload=function(){var e,t,n={status:u.status,statusText:u.statusText,headers:(e=u.getAllResponseHeaders()||"",t=new a,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in u?u.responseURL:n.headers.get("X-Request-URL");var r="response"in u?u.response:u.responseText;i(new m(r,n))},u.onerror=function(){o(new TypeError("Network request failed"))},u.ontimeout=function(){o(new TypeError("Network request failed"))},u.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},u.open(s.method,s.url,!0),"include"===s.credentials?u.withCredentials=!0:"omit"===s.credentials&&(u.withCredentials=!1),"responseType"in u&&t.blob&&(u.responseType="blob"),s.headers.forEach(function(e,t){u.setRequestHeader(t,e)}),s.signal&&(s.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&s.signal.removeEventListener("abort",l)}),u.send(void 0===s._bodyInit?null:s._bodyInit)})}g.polyfill=!0,self.fetch||(self.fetch=g,self.Headers=a,self.Request=f,self.Response=m),e.Headers=a,e.Request=f,e.Response=m,e.fetch=g,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof _$fetchUmd_116.exports?factory(_$fetchUmd_116.exports):"function"==typeof define&&define.amd?define(["exports"],factory):factory(__global_116.WHATWGFetch={}),_$fetchUmd_116=_$fetchUmd_116.exports;var _$hasProperty_264={};(function(e){_$hasProperty_264=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.has","fileName":"'+e+'","paramsNumber":2},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.has"},'),Object.prototype.hasOwnProperty.call(t,n)}}).call(this,"/node_modules/@uppy/utils/lib/hasProperty.js");var _$Translator_245={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}_$Translator_245=function(){function n(t){var n=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Translator"}},'),this.locale={strings:{},pluralize:function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.locale.pluralize","fileName":"'+e+'","paramsNumber":1},'),1===t?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.locale.pluralize"},'),0):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.locale.pluralize"},'),1)}},Array.isArray(t)?t.forEach(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),n._apply(t)}):this._apply(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var r=n.prototype;return r._apply=function(n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_apply","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Translator"}},'),n&&n.strings){var r=this.locale;this.locale=t({},r,{strings:t({},r.strings,n.strings)}),this.locale.pluralize=n.pluralize||r.pluralize,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_apply"},')}else _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_apply"},')},r.interpolate=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"interpolate","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Translator"}},');var r=String.prototype,i=r.split,o=r.replace,s=/\$/g,a=[t];for(var u in n)if("_"!==u&&_$hasProperty_264(n,u)){var l=n[u];"string"==typeof l&&(l=o.call(n[u],s,"$$$$")),a=c(a,new RegExp("%\\{"+u+"\\}","g"),l)}return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"interpolate"},'),a;function c(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"insertReplacement","fileName":"'+e+'","paramsNumber":3},');var o=[];return t.forEach(function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),"string"!=typeof t)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),o.push(t);i.call(t,n).forEach(function(t,n,i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":3},'),""!==t&&o.push(t),n<i.length-1&&o.push(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"insertReplacement"},'),o}},r.translate=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"translate","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Translator"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"translate"},'),this.translateArray(t,n).join("")},r.translateArray=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"translateArray","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Translator"}},');var r=this.locale.strings[t];if("object"==typeof r){if(n&&void 0!==n.smart_count){var i=this.locale.pluralize(n.smart_count);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"translateArray"},'),this.interpolate(r[i],n)}throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"translateArray"},'),new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"translateArray"},'),this.interpolate(r,n)},n}()}).call(this,"/node_modules/@uppy/utils/lib/Translator.js");var _$namespaceEmitter_76=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,i,o,s,a){var u=function(e){for(var n=t[e]?t[e]:[],r=e.indexOf(":"),i=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],o=Object.keys(t),s=0,a=o.length;s<a;s++){var u=o[s];if("*"===u&&(n=n.concat(t[u])),2===i.length&&i[0]===u){n=n.concat(t[u]);break}}return n}(e);u.length&&function(e,t,n){for(var r=0,i=t.length;r<i&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,u,[n,r,i,o,s,a])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,function r(){n.apply(this,arguments),e.off(t,r)})},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],i=0,o=r?r.length:0;i<o;i++)r[i]!==t&&n.push(r[i]);n.length?this._fns[e]=n:delete this._fns[e]},e},_$pad_43=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},env="object"==typeof window?window:self,globalCount=Object.keys(env).length,clientId=_$pad_43(((navigator.mimeTypes?navigator.mimeTypes.length:0)+navigator.userAgent.length).toString(36)+globalCount.toString(36),4),_$fingerprintBrowser_41=function(){return clientId},getRandomValue,crypto="undefined"!=typeof window&&(window.crypto||window.msCrypto)||"undefined"!=typeof self&&self.crypto;if(crypto){var lim=Math.pow(2,32)-1;getRandomValue=function(){return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0]/lim)}}else getRandomValue=Math.random;var _$getRandomValue_42=getRandomValue,_$cuid_40={},c=0,blockSize=4,base=36,discreteValues=Math.pow(base,blockSize);function randomBlock(){return _$pad_43((_$getRandomValue_42()*discreteValues<<0).toString(base),blockSize)}function safeCounter(){return c=c<discreteValues?c:0,++c-1}function cuid(){return"c"+(new Date).getTime().toString(base)+_$pad_43(safeCounter().toString(base),blockSize)+_$fingerprintBrowser_41()+(randomBlock()+randomBlock())}cuid.slug=function(){var e=(new Date).getTime().toString(36),t=safeCounter().toString(36).slice(-4),n=_$fingerprintBrowser_41().slice(0,1)+_$fingerprintBrowser_41().slice(-1),r=randomBlock().slice(-2);return e.slice(-2)+t+n+r},cuid.isCuid=function(e){return"string"==typeof e&&!!e.startsWith("c")},cuid.isSlug=function(e){if("string"!=typeof e)return!1;var t=e.length;return t>=7&&t<=10},cuid.fingerprint=_$fingerprintBrowser_41,_$cuid_40=cuid;var _$lodashThrottle_72={};(function(e){var t="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,c="object"==typeof self&&self&&self.Object===Object&&self,p=l||c||Function("return this")(),d=Object.prototype.toString,_=Math.max,f=Math.min,h=function(){return p.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==r}(e))return n;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var l=s.test(e);return l||a.test(e)?u(e.slice(2),l?2:8):o.test(e)?n:+e}_$lodashThrottle_72=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(t);return m(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),function(e,n,r){var i,o,s,a,u,l,c=0,p=!1,d=!1,g=!0;if("function"!=typeof e)throw new TypeError(t);function b(t){var n=i,r=o;return i=o=void 0,c=t,a=e.apply(r,n)}function v(e){var t=e-l;return void 0===l||t>=n||t<0||d&&e-c>=s}function T(){var e=h();if(v(e))return N(e);u=setTimeout(T,function(e){var t=n-(e-l);return d?f(t,s-(e-c)):t}(e))}function N(e){return u=void 0,g&&i?b(e):(i=o=void 0,a)}function S(){var e=h(),t=v(e);if(i=arguments,o=this,l=e,t){if(void 0===u)return function(e){return c=e,u=setTimeout(T,n),p?b(e):a}(l);if(d)return u=setTimeout(T,n),b(l)}return void 0===u&&(u=setTimeout(T,n)),a}return n=y(n)||0,m(r)&&(p=!!r.leading,s=(d="maxWait"in r)?_(y(r.maxWait)||0,n):s,g="trailing"in r?!!r.trailing:g),S.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},S.flush=function(){return void 0===u?a:N(h())},S}(e,n,{leading:i,maxWait:n,trailing:o})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$prettierBytes_136=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i},_$wildcard_117={};function WildcardMatcher(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}WildcardMatcher.prototype.match=function(e){var t,n,r=!0,i=this.parts,o=i.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<o;t++)"*"!==i[t]&&(r=t<n.length&&i[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var s in r={},e)this.match(s)&&(r[s]=e[s]);return r},_$wildcard_117=function(e,t,n){var r=new WildcardMatcher(e,n||/[\/\.]/);return void 0!==t?r.match(t):r};var reMimePartSplit=/[\/\+\.]/,_$mimeMatch_75=function(e,t){function n(t){var n=_$wildcard_117(t,e,reMimePartSplit);return n&&n.length>=2}return t?n(t.split(";")[0]):n},_$package_220={version:"1.2.1"},_$lib_219={};function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var DefaultStore=function(){function e(){this.state={},this.callbacks=[]}var t=e.prototype;return t.getState=function(){return this.state},t.setState=function(e){var t=_extends({},this.state),n=_extends({},this.state,e);this.state=n,this._publish(t,n,e)},t.subscribe=function(e){var t=this;return this.callbacks.push(e),function(){t.callbacks.splice(t.callbacks.indexOf(e),1)}},t._publish=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.callbacks.forEach(function(e){e.apply(void 0,t)})},e}();DefaultStore.VERSION=_$package_220.version,_$lib_219=function(){return new DefaultStore};var _$getFileNameAndExtension_258={};(function(e){_$getFileNameAndExtension_258=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getFileNameAndExtension","fileName":"'+e+'","paramsNumber":1},');var n=t.lastIndexOf(".");return-1===n||n===t.length-1?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFileNameAndExtension"},'),{name:t,extension:void 0}):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFileNameAndExtension"},'),{name:t.slice(0,n),extension:t.slice(n+1)})}}).call(this,"/node_modules/@uppy/utils/lib/getFileNameAndExtension.js");var _$mimeTypes_270={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf"},_$getFileType_259={};(function(e){_$getFileType_259=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getFileType","fileName":"'+e+'","paramsNumber":1},');var n=t.name?_$getFileNameAndExtension_258(t.name).extension:null;return n=n?n.toLowerCase():null,t.type?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFileType"},'),t.type):n&&_$mimeTypes_270[n]?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFileType"},'),_$mimeTypes_270[n]):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFileType"},'),"application/octet-stream")}}).call(this,"/node_modules/@uppy/utils/lib/getFileType.js");var _$generateFileID_251={};(function(e){function t(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"encodeFilename","fileName":"'+e+'","paramsNumber":1},');var n="";return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"encodeFilename"},'),t.replace(/[^A-Z0-9]/gi,function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),n+="-"+function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"encodeCharacter","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"encodeCharacter"},'),t.charCodeAt(0).toString(32)}(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),"/"})+n}_$generateFileID_251=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.generateFileID","fileName":"'+e+'","paramsNumber":1},');var r="uppy";return"string"==typeof n.name&&(r+="-"+t(n.name.toLowerCase())),void 0!==n.type&&(r+="-"+n.type),n.meta&&"string"==typeof n.meta.relativePath&&(r+="-"+t(n.meta.relativePath.toLowerCase())),void 0!==n.data.size&&(r+="-"+n.data.size),void 0!==n.data.lastModified&&(r+="-"+n.data.lastModified),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.generateFileID"},'),r}}).call(this,"/node_modules/@uppy/utils/lib/generateFileID.js");var _$supportsUploadProgress_135={};(function(e){_$supportsUploadProgress_135=function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.supportsUploadProgress","fileName":"'+e+'","paramsNumber":1},'),null==t&&(t="undefined"!=typeof navigator?navigator.userAgent:null),!t)return!0;var n=/Edge\/(\d+\.\d+)/.exec(t);if(!n)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.supportsUploadProgress"},'),!0;var r=n[1].split("."),i=r[0],o=r[1];return i=parseInt(i,10),o=parseInt(o,10),i<15||15===i&&o<15063?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.supportsUploadProgress"},'),!0):i>18||18===i&&o>=18218?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.supportsUploadProgress"},'),!0):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.supportsUploadProgress"},'),!1)}}).call(this,"/packages/@uppy/core/lib/supportsUploadProgress.js");var _$getTimeStamp_263={};(function(e){function t(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"pad","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"pad"},'),2!==t.length?0+t:t}_$getTimeStamp_263=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getTimeStamp","fileName":"'+e+'","paramsNumber":0},');var n=new Date,r=t(n.getHours().toString()),i=t(n.getMinutes().toString()),o=t(n.getSeconds().toString());return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getTimeStamp"},'),r+":"+i+":"+o}}).call(this,"/node_modules/@uppy/utils/lib/getTimeStamp.js");var _$loggers_134={};(function(e){_$loggers_134={justErrorsLogger:{debug:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')},warn:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')},error:function(){var t;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},');for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=console).error.apply(t,["[Uppy] ["+_$getTimeStamp_263()+"]"].concat(r))}},debugLogger:{debug:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},');for(var t=console.debug||console.log,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.call.apply(t,[console,"[Uppy] ["+_$getTimeStamp_263()+"]"].concat(r)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')},warn:function(){var t;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},');for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=console).warn.apply(t,["[Uppy] ["+_$getTimeStamp_263()+"]"].concat(r))},error:function(){var t;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},');for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=console).error.apply(t,["[Uppy] ["+_$getTimeStamp_263()+"]"].concat(r))}}}}).call(this,"/packages/@uppy/core/lib/loggers.js");var _$preact_80={exports:{}};!function(){"use strict";function e(){}function t(t,n){var r,i,o,s,a=N;for(s=arguments.length;s-- >2;)T.push(arguments[s]);for(n&&null!=n.children&&(T.length||T.push(n.children),delete n.children);T.length;)if((i=T.pop())&&void 0!==i.pop)for(s=i.length;s--;)T.push(i[s]);else"boolean"==typeof i&&(i=null),(o="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(o=!1)),o&&r?a[a.length-1]+=i:a===N?a=[i]:a.push(i),r=o;var u=new e;return u.nodeName=t,u.children=a,u.attributes=null==n?void 0:n,u.key=null==n?void 0:n.key,void 0!==v.vnode&&v.vnode(u),u}function n(e,t){for(var n in t)e[n]=t[n];return e}function r(e){!e.__d&&(e.__d=!0)&&1==w.push(e)&&(v.debounceRendering||S)(i)}function i(){var e,t=w;for(w=[];e=t.pop();)e.__d&&y(e)}function o(e,t){return e.__n===t||e.nodeName.toLowerCase()===t.toLowerCase()}function s(e){var t=n({},e.attributes);t.children=e.children;var r=e.nodeName.defaultProps;if(void 0!==r)for(var i in r)void 0===t[i]&&(t[i]=r[i]);return t}function a(e){var t=e.parentNode;t&&t.removeChild(e)}function u(e,t,n,r,i){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||i)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===C.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var s=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,l,s):e.removeEventListener(t,l,s),(e.__l||(e.__l={}))[t]=r}else if("list"!==t&&"type"!==t&&!i&&t in e)!function(e,t,n){try{e[t]=n}catch(r){}}(e,t,null==r?"":r),null!=r&&!1!==r||e.removeAttribute(t);else{var a=i&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?a?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(a?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function l(e){return this.__l[e.type](v.event&&v.event(e)||e)}function c(){for(var e;e=R.pop();)v.afterMount&&v.afterMount(e),e.componentDidMount&&e.componentDidMount()}function p(e,t,n,r,i,l){$++||(F=null!=i&&void 0!==i.ownerSVGElement,O=null!=e&&!("__preactattr_"in e));var p=function e(t,n,r,i,l){var c=t,p=F;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||l)?t.nodeValue!=n&&(t.nodeValue=n):(c=document.createTextNode(n),t&&(t.parentNode&&t.parentNode.replaceChild(c,t),d(t,!0))),c.__preactattr_=!0,c;var _,h,y=n.nodeName;if("function"==typeof y)return function(e,t,n,r){for(var i=e&&e._component,o=i,a=e,u=i&&e._componentConstructor===t.nodeName,l=u,c=s(t);i&&!l&&(i=i.__u);)l=i.constructor===t.nodeName;return i&&l&&(!r||i._component)?(m(i,c,3,n,r),e=i.base):(o&&!u&&(g(o),e=a=null),i=f(t.nodeName,c,n),e&&!i.__b&&(i.__b=e,a=null),m(i,c,1,n,r),e=i.base,a&&e!==a&&(a._component=null,d(a,!1))),e}(t,n,r,i);if(F="svg"===y||"foreignObject"!==y&&F,y=String(y),(!t||!o(t,y))&&(_=y,(h=F?document.createElementNS("http://www.w3.org/2000/svg",_):document.createElement(_)).__n=_,c=h,t)){for(;t.firstChild;)c.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(c,t),d(t,!0)}var b=c.firstChild,v=c.__preactattr_,T=n.children;if(null==v){v=c.__preactattr_={};for(var N=c.attributes,S=N.length;S--;)v[N[S].name]=N[S].value}return!O&&T&&1===T.length&&"string"==typeof T[0]&&null!=b&&void 0!==b.splitText&&null==b.nextSibling?b.nodeValue!=T[0]&&(b.nodeValue=T[0]):(T&&T.length||null!=b)&&function(t,n,r,i,s){var u,l,c,p,_,f,h,m,y=t.childNodes,g=[],b={},v=0,T=0,N=y.length,S=0,C=n?n.length:0;if(0!==N)for(var w=0;w<N;w++){var R=y[w],$=R.__preactattr_,F=C&&$?R._component?R._component.__k:$.key:null;null!=F?(v++,b[F]=R):($||(void 0!==R.splitText?!s||R.nodeValue.trim():s))&&(g[S++]=R)}if(0!==C)for(var w=0;w<C;w++){p=n[w],_=null;var F=p.key;if(null!=F)v&&void 0!==b[F]&&(_=b[F],b[F]=void 0,v--);else if(!_&&T<S)for(u=T;u<S;u++)if(void 0!==g[u]&&(f=l=g[u],m=s,"string"==typeof(h=p)||"number"==typeof h?void 0!==f.splitText:"string"==typeof h.nodeName?!f._componentConstructor&&o(f,h.nodeName):m||f._componentConstructor===h.nodeName)){_=l,g[u]=void 0,u===S-1&&S--,u===T&&T++;break}_=e(_,p,r,i),c=y[w],_&&_!==t&&_!==c&&(null==c?t.appendChild(_):_===c.nextSibling?a(c):t.insertBefore(_,c))}if(v)for(var w in b)void 0!==b[w]&&d(b[w],!1);for(;T<=S;)void 0!==(_=g[S--])&&d(_,!1)}(c,T,r,i,O||null!=v.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||u(e,r,n[r],n[r]=void 0,F);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||u(e,r,n[r],n[r]=t[r],F)}(c,n.attributes,v),F=p,c}(e,t,n,r,l);return i&&p.parentNode!==i&&i.appendChild(p),--$||(O=!1,l||c()),p}function d(e,t){var n=e._component;n?g(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||a(e),_(e))}function _(e){for(e=e.lastChild;e;){var t=e.previousSibling;d(e,!0),e=t}}function f(e,t,n){var r,i=E[e.name];if(e.prototype&&e.prototype.render?(r=new e(t,n),b.call(r,t,n)):((r=new b(t,n)).constructor=e,r.render=h),i)for(var o=i.length;o--;)if(i[o].constructor===e){r.__b=i[o].__b,i.splice(o,1);break}return r}function h(e,t,n){return this.constructor(e,n)}function m(e,t,n,i,o){e.__x||(e.__x=!0,(e.__r=t.ref)&&delete t.ref,(e.__k=t.key)&&delete t.key,!e.base||o?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,i),i&&i!==e.context&&(e.__c||(e.__c=e.context),e.context=i),e.__p||(e.__p=e.props),e.props=t,e.__x=!1,0!==n&&(1!==n&&!1===v.syncComponentUpdates&&e.base?r(e):y(e,1,o)),e.__r&&e.__r(e))}function y(e,t,r,i){if(!e.__x){var o,a,u,l=e.props,_=e.state,h=e.context,b=e.__p||l,T=e.__s||_,N=e.__c||h,S=e.base,C=e.__b,w=S||C,F=e._component,O=!1;if(S&&(e.props=b,e.state=T,e.context=N,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(l,_,h)?O=!0:e.componentWillUpdate&&e.componentWillUpdate(l,_,h),e.props=l,e.state=_,e.context=h),e.__p=e.__s=e.__c=e.__b=null,e.__d=!1,!O){o=e.render(l,_,h),e.getChildContext&&(h=n(n({},h),e.getChildContext()));var E,I,U=o&&o.nodeName;if("function"==typeof U){var A=s(o);(a=F)&&a.constructor===U&&A.key==a.__k?m(a,A,1,h,!1):(E=a,e._component=a=f(U,A,h),a.__b=a.__b||C,a.__u=e,m(a,A,0,h,!1),y(a,1,r,!0)),I=a.base}else u=w,(E=F)&&(u=e._component=null),(w||1===t)&&(u&&(u._component=null),I=p(u,o,h,r||!S,w&&w.parentNode,!0));if(w&&I!==w&&a!==F){var k=w.parentNode;k&&I!==k&&(k.replaceChild(I,w),E||(w._component=null,d(w,!1)))}if(E&&g(E),e.base=I,I&&!i){for(var P=e,D=e;D=D.__u;)(P=D).base=I;I._component=P,I._componentConstructor=P.constructor}}if(!S||r?R.unshift(e):O||(e.componentDidUpdate&&e.componentDidUpdate(b,T,N),v.afterUpdate&&v.afterUpdate(e)),null!=e.__h)for(;e.__h.length;)e.__h.pop().call(e);$||i||c()}}function g(e){v.beforeUnmount&&v.beforeUnmount(e);var t=e.base;e.__x=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?g(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.__b=t,a(t),function(e){var t=e.constructor.name;(E[t]||(E[t]=[])).push(e)}(e),_(t)),e.__r&&e.__r(null)}function b(e,t){this.__d=!0,this.context=t,this.props=e,this.state=this.state||{}}var v={},T=[],N=[],S="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,C=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,w=[],R=[],$=0,F=!1,O=!1,E={};n(b.prototype,{setState:function(e,t){var i=this.state;this.__s||(this.__s=n({},i)),n(i,"function"==typeof e?e(i,this.props):e),t&&(this.__h=this.__h||[]).push(t),r(this)},forceUpdate:function(e){e&&(this.__h=this.__h||[]).push(e),y(this,2)},render:function(){}});var I={h:t,createElement:t,cloneElement:function(e,r){return t(e.nodeName,n(n({},e.attributes),r),arguments.length>2?[].slice.call(arguments,2):e.children)},Component:b,render:function(e,t,n){return p(n,e,{},!1,t,!1)},rerender:i,options:v};_$preact_80.exports=I}(),_$preact_80=_$preact_80.exports;var _$isDOMElement_265={};(function(e){_$isDOMElement_265=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.isDOMElement","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isDOMElement"},'),t&&"object"==typeof t&&t.nodeType===Node.ELEMENT_NODE}}).call(this,"/packages/@uppy/utils/lib/isDOMElement.js");var _$findDOMElement_250={};(function(e){_$findDOMElement_250=function(t,n){return void 0===n&&(n=document),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.findDOMElement","fileName":"'+e+'","paramsNumber":2},'),"string"==typeof t?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.findDOMElement"},'),n.querySelector(t)):_$isDOMElement_265(t)?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.findDOMElement"},'),t):void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.findDOMElement"},')}}).call(this,"/node_modules/@uppy/utils/lib/findDOMElement.js");var _$Plugin_132={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}_$Plugin_132=function(){function n(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Plugin"}},'),this.uppy=t,this.opts=n||{},this.update=this.update.bind(this),this.mount=this.mount.bind(this),this.install=this.install.bind(this),this.uninstall=this.uninstall.bind(this),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var r=n.prototype;return r.getPluginState=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"getPluginState","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Plugin"}},');var t=this.uppy.getState().plugins;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"getPluginState"},'),t[this.id]||{}},r.setPluginState=function(n){var r;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"setPluginState","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Plugin"}},');var i=this.uppy.getState().plugins;this.uppy.setState({plugins:t({},i,(r={},r[this.id]=t({},i[this.id],{},n),r))}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"setPluginState"},')},r.setOptions=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"setOptions","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Plugin"}},'),this.opts=t({},this.opts,{},n),this.setPluginState(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"setOptions"},')},r.update=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"update","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Plugin"}},'),void 0!==this.el?(this._updateUI&&this._updateUI(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"update"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"update"},')},r.afterUpdate=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"afterUpdate","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Plugin"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"afterUpdate"},')},r.onMount=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"onMount","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Plugin"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"onMount"},')},r.mount=function(t,r){var i=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"mount","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Plugin"}},');var o,s=r.id,a=_$findDOMElement_250(t);if(a)return this.isTargetDOMEl=!0,this.rerender=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),i.uppy.getPlugin(i.id)?(i.el=_$preact_80.render(i.render(t),a,i.el),i.afterUpdate(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')},this._updateUI=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"debounce","fileName":"'+e+'","paramsNumber":1},');var n=null,r=null;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"debounce"},'),function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},');for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=o,n||(n=Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),n=null,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),t.apply(void 0,r)})),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),n}}(this.rerender),this.uppy.log("Installing "+s+" to a DOM element '"+t+"'"),this.opts.replaceTargetContent&&(a.innerHTML=""),this.el=_$preact_80.render(this.render(this.uppy.getState()),a),this.onMount(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"mount"},'),this.el;if("object"==typeof t&&t instanceof n)o=t;else if("function"==typeof t){var u=t;this.uppy.iteratePlugins(function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),t instanceof u)return o=t,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},'),!1;_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')})}if(o)return this.uppy.log("Installing "+s+" to "+o.id),this.parent=o,this.el=o.addTarget(r),this.onMount(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"mount"},'),this.el;this.uppy.log("Not installing "+s);var l="Invalid target option given to "+s+".";throw l+="function"==typeof t?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"mount"},'),new Error(l)},r.render=function(t){throw _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"render","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Plugin"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"render"},'),new Error("Extend the render method to add your plugin to a DOM element")},r.addTarget=function(t){throw _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"addTarget","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Plugin"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"addTarget"},'),new Error("Extend the addTarget method to add your plugin to another plugin's target")},r.unmount=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"unmount","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Plugin"}},'),this.isTargetDOMEl&&this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"unmount"},')},r.install=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"install","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Plugin"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"install"},')},r.uninstall=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"uninstall","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Plugin"}},'),this.unmount(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"uninstall"},')},n}()}).call(this,"/packages/@uppy/core/lib/Plugin.js");var _$package_137={version:"1.10.5"},_$lib_133={};function ___extends_133(){return(___extends_133=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(r,e)})(e)}function _construct(e,t,n){return(_construct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var justErrorsLogger=_$loggers_134.justErrorsLogger,debugLogger=_$loggers_134.debugLogger,RestrictionError=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).isRestriction=!0,t}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(_wrapNativeSuper(Error)),Uppy=function(){function e(e){var t=this;this.defaultLocale={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize2:"%{backwardsCompat} %{size}",exceedsSize:"This file exceeds maximum allowed size of",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noNewAlreadyUploading:"Cannot add new files: already uploading",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},selectAllFilesFromFolderNamed:"Select all files from folder %{name}",unselectAllFilesFromFolderNamed:"Unselect all files from folder %{name}",selectFileNamed:"Select file %{name}",unselectFileNamed:"Unselect file %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",emptyFolderAdded:"No files were added from empty folder",folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};var n={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,debug:!1,restrictions:{maxFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null},meta:{},onBeforeFileAdded:function(e,t){return e},onBeforeUpload:function(e){return e},store:_$lib_219(),logger:justErrorsLogger};if(this.opts=___extends_133({},n,{},e,{restrictions:___extends_133({},n.restrictions,{},e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=debugLogger),this.log("Using Core v"+this.constructor.VERSION),this.opts.restrictions.allowedFileTypes&&null!==this.opts.restrictions.allowedFileTypes&&!Array.isArray(this.opts.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");this.i18nInit(),this.plugins={},this.getState=this.getState.bind(this),this.getPlugin=this.getPlugin.bind(this),this.setFileMeta=this.setFileMeta.bind(this),this.setFileState=this.setFileState.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.hideInfo=this.hideInfo.bind(this),this.addFile=this.addFile.bind(this),this.removeFile=this.removeFile.bind(this),this.pauseResume=this.pauseResume.bind(this),this._calculateProgress=_$lodashThrottle_72(this._calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.updateOnlineStatus=this.updateOnlineStatus.bind(this),this.resetProgress=this.resetProgress.bind(this),this.pauseAll=this.pauseAll.bind(this),this.resumeAll=this.resumeAll.bind(this),this.retryAll=this.retryAll.bind(this),this.cancelAll=this.cancelAll.bind(this),this.retryUpload=this.retryUpload.bind(this),this.upload=this.upload.bind(this),this.emitter=_$namespaceEmitter_76(),this.on=this.on.bind(this),this.off=this.off.bind(this),this.once=this.emitter.once.bind(this.emitter),this.emit=this.emitter.emit.bind(this.emitter),this.preProcessors=[],this.uploaders=[],this.postProcessors=[],this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:_$supportsUploadProgress_135(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:___extends_133({},this.opts.meta),info:{isHidden:!0,type:"info",message:""}}),this._storeUnsubscribe=this.store.subscribe(function(e,n,r){t.emit("state-update",e,n,r),t.updateAll(n)}),this.opts.debug&&"undefined"!=typeof window&&(window[this.opts.id]=this),this._addListeners()}var t,n,r=e.prototype;return r.on=function(e,t){return this.emitter.on(e,t),this},r.off=function(e,t){return this.emitter.off(e,t),this},r.updateAll=function(e){this.iteratePlugins(function(t){t.update(e)})},r.setState=function(e){this.store.setState(e)},r.getState=function(){return this.store.getState()},r.setFileState=function(e,t){var n;if(!this.getState().files[e])throw new Error("Can\u2019t set state for "+e+" (the file could have been removed)");this.setState({files:___extends_133({},this.getState().files,(n={},n[e]=___extends_133({},this.getState().files[e],t),n))})},r.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.opts.locale]),this.locale=this.translator.locale,this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator)},r.setOptions=function(e){this.opts=___extends_133({},this.opts,{},e,{restrictions:___extends_133({},this.opts.restrictions,{},e&&e.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(function(e){e.setOptions()}),this.setState()},r.resetProgress=function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t=___extends_133({},this.getState().files),n={};Object.keys(t).forEach(function(r){var i=___extends_133({},t[r]);i.progress=___extends_133({},i.progress,e),n[r]=i}),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")},r.addPreProcessor=function(e){this.preProcessors.push(e)},r.removePreProcessor=function(e){var t=this.preProcessors.indexOf(e);-1!==t&&this.preProcessors.splice(t,1)},r.addPostProcessor=function(e){this.postProcessors.push(e)},r.removePostProcessor=function(e){var t=this.postProcessors.indexOf(e);-1!==t&&this.postProcessors.splice(t,1)},r.addUploader=function(e){this.uploaders.push(e)},r.removeUploader=function(e){var t=this.uploaders.indexOf(e);-1!==t&&this.uploaders.splice(t,1)},r.setMeta=function(e){var t=___extends_133({},this.getState().meta,e),n=___extends_133({},this.getState().files);Object.keys(n).forEach(function(t){n[t]=___extends_133({},n[t],{meta:___extends_133({},n[t].meta,e)})}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})},r.setFileMeta=function(e,t){var n=___extends_133({},this.getState().files);if(n[e]){var r=___extends_133({},n[e].meta,t);n[e]=___extends_133({},n[e],{meta:r}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that has been removed: ",e)},r.getFile=function(e){return this.getState().files[e]},r.getFiles=function(){var e=this.getState().files;return Object.keys(e).map(function(t){return e[t]})},r._checkMinNumberOfFiles=function(e){var t=this.opts.restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new RestrictionError(""+this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))},r._checkRestrictions=function(e,t){var n=this.opts.restrictions,r=n.maxFileSize,i=n.maxNumberOfFiles,o=n.allowedFileTypes;if(i&&Object.keys(e).length+1>i)throw new RestrictionError(""+this.i18n("youCanOnlyUploadX",{smart_count:i}));if(o&&!o.some(function(e){return e.indexOf("/")>-1?!!t.type&&_$mimeMatch_75(t.type.replace(/;.*?$/,""),e):"."===e[0]&&t.extension.toLowerCase()===e.substr(1).toLowerCase()})){var s=o.join(", ");throw new RestrictionError(this.i18n("youCanOnlyUploadFileTypes",{types:s}))}if(r&&null!=t.data.size&&t.data.size>r)throw new RestrictionError(this.i18n("exceedsSize2",{backwardsCompat:this.i18n("exceedsSize"),size:_$prettierBytes_136(r)}))},r._showOrLogErrorAndThrow=function(e,t){var n=void 0===t?{}:t,r=n.showInformer,i=void 0===r||r,o=n.file,s=void 0===o?null:o,a=n.throwErr,u=void 0===a||a,l="object"==typeof e?e.message:e,c="object"==typeof e&&e.details?e.details:"",p=l;if(c&&(p+=" "+c),e.isRestriction?(this.log(p),this.emit("restriction-failed",s,e)):this.log(p,"error"),i&&this.info({message:l,details:c},"error",5e3),u)throw"object"==typeof e?e:new Error(e)},r._assertNewUploadAllowed=function(e){!1===this.getState().allowNewUpload&&this._showOrLogErrorAndThrow(new RestrictionError(this.i18n("noNewAlreadyUploading")),{file:e})},r._checkAndCreateFileStateObject=function(e,t){var n=_$getFileType_259(t);t.type=n;var r,i=this.opts.onBeforeFileAdded(t,e);!1===i&&this._showOrLogErrorAndThrow(new RestrictionError("Cannot add the file because onBeforeFileAdded returned false."),{showInformer:!1,file:t}),"object"==typeof i&&i&&(t=i),r=t.name?t.name:"image"===n.split("/")[0]?n.split("/")[0]+"."+n.split("/")[1]:"noname";var o=_$getFileNameAndExtension_258(r).extension,s=t.isRemote||!1,a=_$generateFileID_251(t);e[a]&&this._showOrLogErrorAndThrow(new RestrictionError(this.i18n("noDuplicates",{fileName:r})),{file:t});var u=t.meta||{};u.name=r,u.type=n;var l=isFinite(t.data.size)?t.data.size:null,c={source:t.source||"",id:a,name:r,extension:o||"",meta:___extends_133({},this.getState().meta,{},u),type:n,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isRemote:s,remote:t.remote||"",preview:t.preview};try{this._checkRestrictions(e,c)}catch(err){this._showOrLogErrorAndThrow(err,{file:c})}return c},r._startIfAutoProceed=function(){var e=this;this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(function(){e.scheduledAutoProceed=null,e.upload().catch(function(t){t.isRestriction||e.log(t.stack||t.message||t)})},4))},r.addFile=function(e){var t;this._assertNewUploadAllowed(e);var n=this.getState().files,r=this._checkAndCreateFileStateObject(n,e);return this.setState({files:___extends_133({},n,(t={},t[r.id]=r,t))}),this.emit("file-added",r),this.log("Added file: "+r.name+", "+r.id+", mime type: "+r.type),this._startIfAutoProceed(),r.id},r.addFiles=function(e){var t=this;this._assertNewUploadAllowed();for(var n=___extends_133({},this.getState().files),r=[],i=[],o=0;o<e.length;o++)try{var s=this._checkAndCreateFileStateObject(n,e[o]);r.push(s),n[s.id]=s}catch(u){u.isRestriction||i.push(u)}if(this.setState({files:n}),r.forEach(function(e){t.emit("file-added",e)}),r.length>5?this.log("Added batch of "+r.length+" files"):Object.keys(r).forEach(function(e){t.log("Added file: "+r[e].name+"\n id: "+r[e].id+"\n type: "+r[e].type)}),r.length>0&&this._startIfAutoProceed(),i.length>0){var a="Multiple errors occurred while adding files:\n";i.forEach(function(e){a+="\n * "+e.message}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:i.length}),details:a},"error",5e3);var u=new Error(a);throw u.errors=i,u}},r.removeFiles=function(e){var t=this,n=this.getState(),r=n.files,i=n.currentUploads,o=___extends_133({},r),s=___extends_133({},i),a=Object.create(null);function u(e){return void 0===a[e]}e.forEach(function(e){r[e]&&(a[e]=r[e],delete o[e])});var l=[];Object.keys(s).forEach(function(e){var t=i[e].fileIDs.filter(u);0!==t.length?s[e]=___extends_133({},i[e],{fileIDs:t}):l.push(e)}),l.forEach(function(e){delete s[e]});var c={currentUploads:s,files:o};0===Object.keys(o).length&&(c.allowNewUpload=!0,c.error=null),this.setState(c),this._calculateTotalProgress();var p=Object.keys(a);p.forEach(function(e){t.emit("file-removed",a[e])}),p.length>5?this.log("Removed "+p.length+" files"):this.log("Removed files: "+p.join(", "))},r.removeFile=function(e){this.removeFiles([e])},r.pauseResume=function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!this.getFile(e).isPaused;return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}},r.pauseAll=function(){var e=___extends_133({},this.getState().files);Object.keys(e).filter(function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted}).forEach(function(t){var n=___extends_133({},e[t],{isPaused:!0});e[t]=n}),this.setState({files:e}),this.emit("pause-all")},r.resumeAll=function(){var e=___extends_133({},this.getState().files);Object.keys(e).filter(function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted}).forEach(function(t){var n=___extends_133({},e[t],{isPaused:!1,error:null});e[t]=n}),this.setState({files:e}),this.emit("resume-all")},r.retryAll=function(){var e=___extends_133({},this.getState().files),t=Object.keys(e).filter(function(t){return e[t].error});t.forEach(function(t){var n=___extends_133({},e[t],{isPaused:!1,error:null});e[t]=n}),this.setState({files:e,error:null}),this.emit("retry-all",t);var n=this._createUpload(t,{forceAllowNewUpload:!0});return this._runUpload(n)},r.cancelAll=function(){this.emit("cancel-all");var e=this.getState().files,t=Object.keys(e);t.length&&this.removeFiles(t),this.setState({totalProgress:0,error:null})},r.retryUpload=function(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);var t=this._createUpload([e],{forceAllowNewUpload:!0});return this._runUpload(t)},r.reset=function(){this.cancelAll()},r._calculateProgress=function(e,t){if(this.getFile(e.id)){var n=isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:___extends_133({},this.getFile(e.id).progress,{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:n?Math.round(t.bytesUploaded/t.bytesTotal*100):0})}),this._calculateTotalProgress()}else this.log("Not setting progress for a file that has been removed: "+e.id)},r._calculateTotalProgress=function(){var e=this.getFiles().filter(function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess});if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter(function(e){return null!=e.progress.bytesTotal}),n=e.filter(function(e){return null==e.progress.bytesTotal});if(0!==t.length){var r=t.reduce(function(e,t){return e+t.progress.bytesTotal},0),i=r/t.length;r+=i*n.length;var o=0;t.forEach(function(e){o+=e.progress.bytesUploaded}),n.forEach(function(e){o+=i*(e.progress.percentage||0)/100});var s=0===r?0:Math.round(o/r*100);s>100&&(s=100),this.setState({totalProgress:s}),this.emit("progress",s)}else{var a=100*e.length,u=n.reduce(function(e,t){return e+t.progress.percentage},0),l=Math.round(u/a*100);this.setState({totalProgress:l})}},r._addListeners=function(){var e=this;this.on("error",function(t){var n="Unknown error";t.message&&(n=t.message),t.details&&(n+=" "+t.details),e.setState({error:n})}),this.on("upload-error",function(t,n,r){var i="Unknown error";if(n.message&&(i=n.message),n.details&&(i+=" "+n.details),e.setFileState(t.id,{error:i,response:r}),e.setState({error:n.message}),"object"==typeof n&&n.message){var o=new Error(n.message);o.details=n.message,n.details&&(o.details+=" "+n.details),o.message=e.i18n("failedToUpload",{file:t.name}),e._showOrLogErrorAndThrow(o,{throwErr:!1})}else e._showOrLogErrorAndThrow(n,{throwErr:!1})}),this.on("upload",function(){e.setState({error:null})}),this.on("upload-started",function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:t.size}}):e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("upload-progress",this._calculateProgress),this.on("upload-success",function(t,n){if(e.getFile(t.id)){var r=e.getFile(t.id).progress;e.setFileState(t.id,{progress:___extends_133({},r,{uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),e._calculateTotalProgress()}else e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("preprocess-progress",function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:___extends_133({},e.getFile(t.id).progress,{preprocess:n})}):e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("preprocess-complete",function(t){if(e.getFile(t.id)){var n=___extends_133({},e.getState().files);n[t.id]=___extends_133({},n[t.id],{progress:___extends_133({},n[t.id].progress)}),delete n[t.id].progress.preprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("postprocess-progress",function(t,n){e.getFile(t.id)?e.setFileState(t.id,{progress:___extends_133({},e.getState().files[t.id].progress,{postprocess:n})}):e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("postprocess-complete",function(t){if(e.getFile(t.id)){var n=___extends_133({},e.getState().files);n[t.id]=___extends_133({},n[t.id],{progress:___extends_133({},n[t.id].progress)}),delete n[t.id].progress.postprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: "+t.id)}),this.on("restored",function(){e._calculateTotalProgress()}),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener("online",function(){return e.updateOnlineStatus()}),window.addEventListener("offline",function(){return e.updateOnlineStatus()}),setTimeout(function(){return e.updateOnlineStatus()},3e3))},r.updateOnlineStatus=function(){void 0===window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)},r.getID=function(){return this.opts.id},r.use=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a plugin class, but got "+(null===e?"null":typeof e)+". Please verify that the plugin was imported and spelled correctly.");var n=new e(this,t),r=n.id;if(this.plugins[n.type]=this.plugins[n.type]||[],!r)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");var i=this.getPlugin(r);if(i){var o="Already found a plugin named '"+i.id+"'. Tried to use: '"+r+"'.\nUppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id.";throw new Error(o)}return e.VERSION&&this.log("Using "+r+" v"+e.VERSION),this.plugins[n.type].push(n),n.install(),this},r.getPlugin=function(e){var t=null;return this.iteratePlugins(function(n){if(n.id===e)return t=n,!1}),t},r.iteratePlugins=function(e){var t=this;Object.keys(this.plugins).forEach(function(n){t.plugins[n].forEach(e)})},r.removePlugin=function(e){this.log("Removing plugin "+e.id),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var t=this.plugins[e.type].slice(),n=t.indexOf(e);-1!==n&&(t.splice(n,1),this.plugins[e.type]=t);var r=this.getState();delete r.plugins[e.id],this.setState(r)},r.close=function(){var e=this;this.log("Closing Uppy instance "+this.opts.id+": removing all files and uninstalling plugins"),this.reset(),this._storeUnsubscribe(),this.iteratePlugins(function(t){e.removePlugin(t)})},r.info=function(e,t,n){void 0===t&&(t="info"),void 0===n&&(n=3e3);var r="object"==typeof e;this.setState({info:{isHidden:!1,type:t,message:r?e.message:e,details:r?e.details:null}}),this.emit("info-visible"),clearTimeout(this.infoTimeoutID),this.infoTimeoutID=0!==n?setTimeout(this.hideInfo,n):void 0},r.hideInfo=function(){var e=___extends_133({},this.getState().info,{isHidden:!0});this.setState({info:e}),this.emit("info-hidden")},r.log=function(e,t){var n=this.opts.logger;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}},r.run=function(){return this.log("Calling run() is no longer necessary.","warning"),this},r.restore=function(e){return this.log('Core: attempting to restore upload "'+e+'"'),this.getState().currentUploads[e]?this._runUpload(e):(this._removeUpload(e),Promise.reject(new Error("Nonexistent upload")))},r._createUpload=function(e,t){var n;void 0===t&&(t={});var r=t.forceAllowNewUpload,i=void 0!==r&&r,o=this.getState(),s=o.allowNewUpload,a=o.currentUploads;if(!s&&!i)throw new Error("Cannot create a new upload: already uploading.");var u=_$cuid_40();return this.emit("upload",{id:u,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploads,currentUploads:___extends_133({},a,(n={},n[u]={fileIDs:e,step:0,result:{}},n))}),u},r._getUpload=function(e){return this.getState().currentUploads[e]},r.addResultData=function(e,t){var n;if(this._getUpload(e)){var r=this.getState().currentUploads,i=___extends_133({},r[e],{result:___extends_133({},r[e].result,t)});this.setState({currentUploads:___extends_133({},r,(n={},n[e]=i,n))})}else this.log("Not setting result for an upload that has been removed: "+e)},r._removeUpload=function(e){var t=___extends_133({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})},r._runUpload=function(e){var t=this,n=this.getState().currentUploads[e].step,r=[].concat(this.preProcessors,this.uploaders,this.postProcessors),i=Promise.resolve();return r.forEach(function(r,o){o<n||(i=i.then(function(){var n,i=t.getState().currentUploads,s=i[e];if(s){var a=___extends_133({},s,{step:o});return t.setState({currentUploads:___extends_133({},i,(n={},n[e]=a,n))}),r(a.fileIDs,e)}}).then(function(e){return null}))}),i.catch(function(n){t.emit("error",n,e),t._removeUpload(e)}),i.then(function(){var n=t.getState().currentUploads[e];if(n){var r=n.fileIDs.map(function(e){return t.getFile(e)}),i=r.filter(function(e){return!e.error}),o=r.filter(function(e){return e.error});t.addResultData(e,{successful:i,failed:o,uploadID:e})}}).then(function(){var n=t.getState().currentUploads;if(n[e]){var r=n[e].result;return t.emit("complete",r),t._removeUpload(e),r}}).then(function(n){return null==n&&t.log("Not setting result for an upload that has been removed: "+e),n})},r.upload=function(){var e=this;this.plugins.uploader||this.log("No uploader type plugins are used","warning");var t=this.getState().files,n=this.opts.onBeforeUpload(t);return!1===n?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&"object"==typeof n&&(t=n,this.setState({files:t})),Promise.resolve().then(function(){return e._checkMinNumberOfFiles(t)}).catch(function(t){e._showOrLogErrorAndThrow(t)}).then(function(){var n=e.getState().currentUploads,r=Object.keys(n).reduce(function(e,t){return e.concat(n[t].fileIDs)},[]),i=[];Object.keys(t).forEach(function(t){var n=e.getFile(t);n.progress.uploadStarted||-1!==r.indexOf(t)||i.push(n.id)});var o=e._createUpload(i);return e._runUpload(o)}).catch(function(t){e._showOrLogErrorAndThrow(t,{showInformer:!1})}))},t=e,(n=[{key:"state",get:function(){return this.getState()}}])&&_defineProperties(t.prototype,n),e}();Uppy.VERSION=_$package_137.version,_$lib_133=function(e){return new Uppy(e)},_$lib_133.Uppy=Uppy,_$lib_133.Plugin=_$Plugin_132,_$lib_133.debugLogger=debugLogger;var _$AuthError_125={};(function(e){function t(e){var r="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,i)}function i(){return function(e,t,r){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o}).apply(null,arguments)}(e,arguments,(t=this,(Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)).constructor);var t}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(t){var n,r;function i(){var n;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"AuthError","superClass":"Error"}},'),(n=t.call(this,"Authorization required")||this).name="AuthError",n.isAuthError=!0,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},'),n}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(t(Error));_$AuthError_125=r}).call(this,"/packages/@uppy/companion-client/lib/AuthError.js");var _$NetworkError_242={};(function(e){function t(e){var r="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,i)}function i(){return function(e,t,r){return(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return r&&n(o,r.prototype),o}).apply(null,arguments)}(e,arguments,(t=this,(Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(t)).constructor);var t}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,e)})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=function(t){var n,r;function i(n,r){var i;return void 0===r&&(r=null),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"NetworkError","superClass":"Error"}},'),(i=t.call(this,"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.\n\nSource error: ["+n+"]")||this).isNetworkError=!0,i.request=r,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},'),i}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(t(Error));_$NetworkError_242=r}).call(this,"/node_modules/@uppy/utils/lib/NetworkError.js");var _$package_131={version:"1.4.5"},_class,_temp;function ___extends_127(){return(___extends_127=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___defineProperties_127(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _$RequestClient_127=(_temp=_class=function(){function e(e,t){this.uppy=e,this.opts=t,this.onReceiveResponse=this.onReceiveResponse.bind(this),this.allowedHeaders=["accept","content-type","uppy-auth-token"],this.preflightDone=!1}var t,n,r=e.prototype;return r.headers=function(){var e=this.opts.companionHeaders||this.opts.serverHeaders||{};return Promise.resolve(___extends_127({},this.defaultHeaders,{},e))},r._getPostResponseFunc=function(e){var t=this;return function(n){return e?n:t.onReceiveResponse(n)}},r.onReceiveResponse=function(e){var t,n=this.uppy.getState().companion||{},r=this.opts.companionUrl,i=e.headers;return i.has("i-am")&&i.get("i-am")!==n[r]&&this.uppy.setState({companion:___extends_127({},n,(t={},t[r]=i.get("i-am"),t))}),e},r._getUrl=function(e){return/^(https?:|)\/\//.test(e)?e:this.hostname+"/"+e},r._json=function(e){if(401===e.status)throw new _$AuthError_125;if(e.status<200||e.status>300){var t="Failed request with status: "+e.status+". "+e.statusText;return e.json().then(function(e){throw t=e.message?t+" message: "+e.message:t,t=e.requestId?t+" request-Id: "+e.requestId:t,new Error(t)}).catch(function(){throw new Error(t)})}return e.json()},r.preflight=function(e){var t=this;return new Promise(function(n,r){if(t.preflightDone)return n(t.allowedHeaders.slice());fetch(t._getUrl(e),{method:"OPTIONS"}).then(function(e){e.headers.has("access-control-allow-headers")&&(t.allowedHeaders=e.headers.get("access-control-allow-headers").split(",").map(function(e){return e.trim().toLowerCase()})),t.preflightDone=!0,n(t.allowedHeaders.slice())}).catch(function(e){t.uppy.log("[CompanionClient] unable to make preflight request "+e,"warning"),t.preflightDone=!0,n(t.allowedHeaders.slice())})})},r.preflightAndHeaders=function(e){var t=this;return Promise.all([this.preflight(e),this.headers()]).then(function(e){var n=e[0],r=e[1];return Object.keys(r).forEach(function(e){-1===n.indexOf(e.toLowerCase())&&(t.uppy.log("[CompanionClient] excluding unallowed header "+e),delete r[e])}),r})},r.get=function(e,t){var n=this;return new Promise(function(r,i){n.preflightAndHeaders(e).then(function(o){fetch(n._getUrl(e),{method:"get",headers:o,credentials:"same-origin"}).catch(function(e){throw"AbortError"===e.name?e:new _$NetworkError_242(e)}).then(n._getPostResponseFunc(t)).then(function(e){return n._json(e).then(r)}).catch(function(t){t=t.isAuthError?t:new Error("Could not get "+n._getUrl(e)+". "+t),i(t)})}).catch(i)})},r.post=function(e,t,n){var r=this;return new Promise(function(i,o){r.preflightAndHeaders(e).then(function(s){fetch(r._getUrl(e),{method:"post",headers:s,credentials:"same-origin",body:JSON.stringify(t)}).catch(function(e){throw"AbortError"===e.name?e:new _$NetworkError_242(e)}).then(r._getPostResponseFunc(n)).then(function(e){return r._json(e).then(i)}).catch(function(t){t=t.isAuthError?t:new Error("Could not post "+r._getUrl(e)+". "+t),o(t)})}).catch(o)})},r.delete=function(e,t,n){var r=this;return new Promise(function(i,o){r.preflightAndHeaders(e).then(function(s){fetch(r.hostname+"/"+e,{method:"delete",headers:s,credentials:"same-origin",body:t?JSON.stringify(t):null}).catch(function(e){throw"AbortError"===e.name?e:new _$NetworkError_242(e)}).then(r._getPostResponseFunc(n)).then(function(e){return r._json(e).then(i)}).catch(function(t){t=t.isAuthError?t:new Error("Could not delete "+r._getUrl(e)+". "+t),o(t)})}).catch(o)})},t=e,(n=[{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}},{key:"defaultHeaders",get:function(){return{Accept:"application/json","Content-Type":"application/json","Uppy-Versions":"@uppy/companion-client="+e.VERSION}}}])&&___defineProperties_127(t.prototype,n),e}(),_class.VERSION=_$package_131.version,_temp),_$tokenStorage_130={};(function(e){_$tokenStorage_130.setItem=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":2},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),new Promise(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),localStorage.setItem(t,n),r(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')})},_$tokenStorage_130.getItem=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),Promise.resolve(localStorage.getItem(t))},_$tokenStorage_130.removeItem=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},'),new Promise(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),localStorage.removeItem(t),n(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')})}}).call(this,"/packages/@uppy/companion-client/lib/tokenStorage.js");var _$Provider_126={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_getName","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_getName"},'),t.split("-").map(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),t.charAt(0).toUpperCase()+t.slice(1)}).join(" ")};_$Provider_126=function(r){var i,o;function s(t,i){var o;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),(o=r.call(this,t,i)||this).provider=i.provider,o.id=o.provider,o.authProvider=i.authProvider||o.provider,o.name=o.opts.name||n(o.id),o.pluginId=o.opts.pluginId,o.tokenKey="companion-"+o.pluginId+"-auth-token",_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},'),o}o=r,(i=s).prototype=Object.create(o.prototype),i.prototype.constructor=i,i.__proto__=o;var a=s.prototype;return a.headers=function(){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"headers","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"headers"},'),new Promise(function(i,o){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":2},'),r.prototype.headers.call(n).then(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),n.getAuthToken().then(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),i(t({},r,{"uppy-auth-token":n})),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')}).catch(o),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')})},a.onReceiveResponse=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"onReceiveResponse","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),t=r.prototype.onReceiveResponse.call(this,t);var n=this.uppy.getPlugin(this.pluginId),i=n.getPluginState().authenticated?401!==t.status:t.status<400;return n.setPluginState({authenticated:i}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"onReceiveResponse"},'),t},a.setAuthToken=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"setAuthToken","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"setAuthToken"},'),this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,t)},a.getAuthToken=function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"getAuthToken","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"getAuthToken"},'),this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)},a.authUrl=function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"authUrl","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"authUrl"},'),this.hostname+"/"+this.id+"/connect"},a.fileUrl=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"fileUrl","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"fileUrl"},'),this.hostname+"/"+this.id+"/get/"+t},a.list=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"list","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"list"},'),this.get(this.id+"/list/"+(t||""))},a.logout=function(){var t=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"logout","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"logout"},'),new Promise(function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":2},'),t.get(t.id+"/logout").then(function(i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),t.uppy.getPlugin(t.pluginId).storage.removeItem(t.tokenKey).then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},'),n(i)}).catch(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},')}).catch(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},')})},s.initPlugin=function(n,r,i){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"initPlugin","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"Provider","superClass":"RequestClient"}},'),n.type="acquirer",n.files=[],i&&(n.opts=t({},i,r)),r.serverUrl||r.serverPattern)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"initPlugin"},'),new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(r.companionAllowedHosts){var o=r.companionAllowedHosts;if(!("string"==typeof o||Array.isArray(o)||o instanceof RegExp))throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"initPlugin"},'),new TypeError(n.id+': the option "companionAllowedHosts" must be one of string, Array, RegExp');n.opts.companionAllowedHosts=o}else/^(?!https?:\/\/).*$/i.test(r.companionUrl)?n.opts.companionAllowedHosts="https://"+r.companionUrl.replace(/^\/\//,""):n.opts.companionAllowedHosts=r.companionUrl;n.storage=n.opts.storage||_$tokenStorage_130,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"initPlugin"},')},s}(_$RequestClient_127)}).call(this,"/packages/@uppy/companion-client/lib/Provider.js");var _$Socket_128={};(function(e){_$Socket_128=function(){function t(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"UppySocket"}},'),this.opts=t,this._queued=[],this.isOpen=!1,this.emitter=_$namespaceEmitter_76(),this._handleMessage=this._handleMessage.bind(this),this.close=this.close.bind(this),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.once=this.once.bind(this),this.send=this.send.bind(this),t&&!1===t.autoOpen||this.open(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var n=t.prototype;return n.open=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"open","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"UppySocket"}},'),this.socket=new WebSocket(this.opts.target),this.socket.onopen=function(n){for(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),t.isOpen=!0;t._queued.length>0&&t.isOpen;){var r=t._queued[0];t.send(r.action,r.payload),t._queued=t._queued.slice(1)}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')},this.socket.onclose=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),t.isOpen=!1,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')},this.socket.onmessage=this._handleMessage,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"open"},')},n.close=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"close","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"UppySocket"}},'),this.socket&&this.socket.close(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"close"},')},n.send=function(t,n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"send","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"UppySocket"}},'),!this.isOpen)return this._queued.push({action:t,payload:n}),void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"send"},');this.socket.send(JSON.stringify({action:t,payload:n})),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"send"},')},n.on=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"on","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"UppySocket"}},'),this.emitter.on(t,n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"on"},')},n.emit=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"emit","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"UppySocket"}},'),this.emitter.emit(t,n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emit"},')},n.once=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"once","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"UppySocket"}},'),this.emitter.once(t,n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"once"},')},n._handleMessage=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_handleMessage","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"UppySocket"}},');try{var n=JSON.parse(t.data);this.emit(n.action,n.payload)}catch(err){console.log(err)}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_handleMessage"},')},t}()}).call(this,"/packages/@uppy/companion-client/lib/Socket.js");var _$lib_129={RequestClient:_$RequestClient_127,Provider:_$Provider_126,Socket:_$Socket_128},h=_$preact_80.h,AuthView=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=h("span",{class:"uppy-Provider-authTitleName"},this.props.pluginName,h("br",null));return h("div",{class:"uppy-Provider-auth"},h("div",{class:"uppy-Provider-authIcon"},this.props.pluginIcon()),h("div",{class:"uppy-Provider-authTitle"},this.props.i18nArray("authenticateWithTitle",{pluginName:e})),h("button",{type:"button",class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onclick:this.props.handleAuth,"data-uppy-super-focusable":!0},this.props.i18nArray("authenticateWith",{pluginName:this.props.pluginName})))},r}(_$preact_80.Component),_$AuthView_191=AuthView,_$classnames_36={exports:{}};!function(){"use strict";var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)n.push(i);else if(Array.isArray(i)&&i.length){var s=t.apply(null,i);s&&n.push(s)}else if("object"===o)for(var a in i)e.call(i,a)&&i[a]&&n.push(a)}}return n.join(" ")}_$classnames_36.exports?(t.default=t,_$classnames_36.exports=t):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return t}):window.classNames=t}(),_$classnames_36=_$classnames_36.exports;var __h_192=_$preact_80.h,Breadcrumb=function(e){return __h_192("span",null,__h_192("button",{type:"button",class:"uppy-u-reset",onclick:e.getFolder},e.title),e.isLast?"":" / ")},_$Breadcrumbs_192=function(e){return __h_192("div",{class:"uppy-Provider-breadcrumbs"},__h_192("div",{class:"uppy-Provider-breadcrumbsIcon"},e.breadcrumbsIcon),e.directories.map(function(t,n){return __h_192(Breadcrumb,{key:t.id,getFolder:function(){return e.getFolder(t.id)},title:0===n?e.title:t.title,isLast:n+1===e.directories.length})}))},__h_194=_$preact_80.h,Component=_$preact_80.Component,_$Filter_194=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).preventEnterPress=n.preventEnterPress.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.preventEnterPress=function(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault())},i.render=function(){var e=this;return __h_194("div",{class:"uppy-ProviderBrowser-search"},__h_194("input",{class:"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:this.props.i18n("filter"),"aria-label":this.props.i18n("filter"),onkeyup:this.preventEnterPress,onkeydown:this.preventEnterPress,onkeypress:this.preventEnterPress,oninput:function(t){return e.props.filterQuery(t)},value:this.props.filterInput}),__h_194("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon uppy-ProviderBrowser-searchIcon",width:"12",height:"12",viewBox:"0 0 12 12"},__h_194("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),this.props.filterInput&&__h_194("button",{class:"uppy-u-reset uppy-ProviderBrowser-searchClose",type:"button","aria-label":this.props.i18n("resetFilter"),title:this.props.i18n("resetFilter"),onclick:this.props.filterQuery},__h_194("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",viewBox:"0 0 19 19"},__h_194("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))},r}(Component),__h_197=_$preact_80.h;function FileIcon(){return __h_197("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:11,height:14.5,viewBox:"0 0 44 58"},__h_197("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function FolderIcon(){return __h_197("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",style:{width:16,marginRight:3},viewBox:"0 0 276.157 276.157"},__h_197("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function VideoIcon(){return __h_197("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 58 58"},__h_197("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),__h_197("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}var _$ItemIcon_197=function(e){if(null!==e.itemIconString)switch(e.itemIconString){case"file":return __h_197(FileIcon,null);case"folder":return __h_197(FolderIcon,null);case"video":return __h_197(VideoIcon,null);default:return __h_197("img",{src:e.itemIconString})}},__h_196=_$preact_80.h,_$GridLi_196=function(e){return __h_196("li",{class:e.className},__h_196("div",{"aria-hidden":!0,class:"uppy-ProviderBrowserItem-fakeCheckbox "+(e.isChecked?"uppy-ProviderBrowserItem-fakeCheckbox--is-checked":"")}),__h_196("button",{type:"button",class:"uppy-u-reset uppy-ProviderBrowserItem-inner",onclick:e.toggleCheckbox,role:"option","aria-label":e.isChecked?e.i18n("unselectFileNamed",{name:e.title}):e.i18n("selectFileNamed",{name:e.title}),"aria-selected":e.isChecked,"aria-disabled":e.isDisabled,"data-uppy-super-focusable":!0},e.itemIconEl,e.showTitles&&e.title))},__h_198=_$preact_80.h,getAriaLabelOfCheckbox=function(e){return"folder"===e.type?e.isChecked?e.i18n("unselectAllFilesFromFolderNamed",{name:e.title}):e.i18n("selectAllFilesFromFolderNamed",{name:e.title}):e.isChecked?e.i18n("unselectFileNamed",{name:e.title}):e.i18n("selectFileNamed",{name:e.title})},_$ListLi_198=function(e){return __h_198("li",{class:e.className},__h_198("button",{type:"button",class:"uppy-u-reset uppy-ProviderBrowserItem-fakeCheckbox "+(e.isChecked?"uppy-ProviderBrowserItem-fakeCheckbox--is-checked":""),onClick:e.toggleCheckbox,id:e.id,role:"option","aria-label":getAriaLabelOfCheckbox(e),"aria-selected":e.isChecked,"aria-disabled":e.isDisabled,"data-uppy-super-focusable":!0}),"file"===e.type?__h_198("label",{for:e.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},e.itemIconEl,e.showTitles&&e.title):__h_198("button",{type:"button",class:"uppy-u-reset uppy-ProviderBrowserItem-inner",onclick:e.handleFolderClick,"aria-label":e.i18n("openFolderNamed",{name:e.title})},e.itemIconEl,e.showTitles&&e.title))};function ___extends_199(){return(___extends_199=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_199=_$preact_80.h,_$Item_199=function(e){var t=e.getItemIcon(),n=_$classnames_36("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--selected":e.isChecked},{"uppy-ProviderBrowserItem--noPreview":"video"===t}),r=__h_199(_$ItemIcon_197,{itemIconString:t});switch(e.viewType){case"grid":return __h_199(_$GridLi_196,___extends_199({},e,{className:n,itemIconEl:r}));case"list":return __h_199(_$ListLi_198,___extends_199({},e,{className:n,itemIconEl:r}));default:throw new Error("There is no such type "+e.viewType)}};function ___extends_200(){return(___extends_200=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_200=_$preact_80.h,getSharedProps=function(e,t){return{id:e.id,title:e.name,getItemIcon:function(){return e.icon},isChecked:t.isChecked(e),toggleCheckbox:function(n){return t.toggleCheckbox(n,e)},columns:t.columns,showTitles:t.showTitles,viewType:t.viewType,i18n:t.i18n}},_$ItemList_200=function(e){return e.folders.length||e.files.length?__h_200("div",{class:"uppy-ProviderBrowser-body"},__h_200("ul",{class:"uppy-ProviderBrowser-list",onscroll:e.handleScroll,role:"listbox",tabindex:"-1"},e.folders.map(function(t){return _$Item_199(___extends_200({},getSharedProps(t,e),{type:"folder",isDisabled:!!e.isChecked(t)&&e.isChecked(t).loading,handleFolderClick:function(){return e.handleFolderClick(t)}}))}),e.files.map(function(t){return _$Item_199(___extends_200({},getSharedProps(t,e),{type:"file",isDisabled:!1}))}))):__h_200("div",{class:"uppy-Provider-empty"},e.i18n("noFilesFound"))},__h_195=_$preact_80.h,_$FooterActions_195=function(e){return __h_195("div",{class:"uppy-ProviderBrowser-footer"},__h_195("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onclick:e.done},e.i18n("selectX",{smart_count:e.selected})),__h_195("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onclick:e.cancel},e.i18n("cancel")))};function ___extends_193(){return(___extends_193=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_193=_$preact_80.h,_$Browser_193=function(e){var t=e.folders,n=e.files;""!==e.filterInput&&(t=e.filterItems(e.folders),n=e.filterItems(e.files));var r=e.currentSelection.length;return __h_193("div",{class:_$classnames_36("uppy-ProviderBrowser","uppy-ProviderBrowser-viewType--"+e.viewType)},__h_193("div",{class:"uppy-ProviderBrowser-header"},__h_193("div",{class:_$classnames_36("uppy-ProviderBrowser-headerBar",!e.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},e.showBreadcrumbs&&_$Breadcrumbs_192({getFolder:e.getFolder,directories:e.directories,breadcrumbsIcon:e.pluginIcon&&e.pluginIcon(),title:e.title}),__h_193("span",{class:"uppy-ProviderBrowser-user"},e.username),__h_193("button",{type:"button",onclick:e.logout,class:"uppy-u-reset uppy-ProviderBrowser-userLogout"},e.i18n("logOut")))),e.showFilter&&__h_193(_$Filter_194,e),__h_193(_$ItemList_200,{columns:[{name:"Name",key:"title"}],folders:t,files:n,activeRow:e.isActiveRow,sortByTitle:e.sortByTitle,sortByDate:e.sortByDate,isChecked:e.isChecked,handleFolderClick:e.getNextFolder,toggleCheckbox:e.toggleCheckbox,handleScroll:e.handleScroll,title:e.title,showTitles:e.showTitles,i18n:e.i18n,viewType:e.viewType}),r>0&&__h_193(_$FooterActions_195,___extends_193({selected:r},e)))},__h_201=_$preact_80.h,_$Loader_201=function(e){return __h_201("div",{class:"uppy-Provider-loading"},__h_201("span",null,e.i18n("loading")))},_$isPreviewSupported_269={};(function(e){_$isPreviewSupported_269=function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.isPreviewSupported","fileName":"'+e+'","paramsNumber":1},'),!t)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isPreviewSupported"},'),!1;var n=t.split("/")[1];return/^(jpe?g|gif|png|svg|svg\+xml|bmp|webp)$/.test(n)?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isPreviewSupported"},'),!0):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isPreviewSupported"},'),!1)}}).call(this,"/node_modules/@uppy/utils/lib/isPreviewSupported.js");var _$package_203={version:"1.6.6"},___class_202,___temp_202;function ___extends_202(){return(___extends_202=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_202=_$preact_80.h,__Component_202=_$preact_80.Component,CloseWrapper=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentWillUnmount=function(){this.props.onUnmount()},i.render=function(){return this.props.children[0]},r}(__Component_202),_$lib_202=(___temp_202=___class_202=function(){function e(e,t){this.plugin=e,this.provider=t.provider,this.opts=___extends_202({},{viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0},{},t),this.addFile=this.addFile.bind(this),this.filterItems=this.filterItems.bind(this),this.filterQuery=this.filterQuery.bind(this),this.toggleSearch=this.toggleSearch.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.preFirstRender=this.preFirstRender.bind(this),this.handleAuth=this.handleAuth.bind(this),this.sortByTitle=this.sortByTitle.bind(this),this.sortByDate=this.sortByDate.bind(this),this.isActiveRow=this.isActiveRow.bind(this),this.isChecked=this.isChecked.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.handleError=this.handleError.bind(this),this.handleScroll=this.handleScroll.bind(this),this.listAllFiles=this.listAllFiles.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelPicking=this.cancelPicking.bind(this),this.clearSelection=this.clearSelection.bind(this),this.render=this.render.bind(this),this.clearSelection()}var t=e.prototype;return t.tearDown=function(){},t._updateFilesAndFolders=function(e,t,n){this.nextPagePath=e.nextPagePath,e.items.forEach(function(e){e.isFolder?n.push(e):t.push(e)}),this.plugin.setPluginState({folders:n,files:t})},t.preFirstRender=function(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()},t.getFolder=function(e,t){var n=this;return this._loaderWrapper(this.provider.list(e),function(r){var i,o=n.plugin.getPluginState(),s=function(t,n){for(var r=0;r<t.length;r++)if(i=t[r],e===i.id)return r;var i;return-1}(o.directories);i=-1!==s?o.directories.slice(0,s+1):o.directories.concat([{id:e,title:t}]),n.username=n.username?n.username:r.username,n._updateFilesAndFolders(r,[],[]),n.plugin.setPluginState({directories:i})},this.handleError)},t.getNextFolder=function(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0},t.addFile=function(e){var t={id:this.providerFileToId(e),source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,body:{fileId:e.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:""+this.provider.fileUrl(e.requestPath),body:{fileId:e.id},providerOptions:this.provider.opts}},n=_$getFileType_259(t);n&&_$isPreviewSupported_269(n)&&(t.preview=e.thumbnail),this.plugin.uppy.log("Adding remote file");try{this.plugin.uppy.addFile(t)}catch(err){err.isRestriction||this.plugin.uppy.log(err)}},t.removeFile=function(e){var t=this.plugin.getPluginState().currentSelection;this.plugin.setPluginState({currentSelection:t.filter(function(t){return t.id!==e})})},t.logout=function(){var e=this;this.provider.logout().then(function(t){if(t.ok){if(!t.revoked){var n=e.plugin.uppy.i18n("companionUnauthorizeHint",{provider:e.plugin.title,url:t.manual_revoke_url});e.plugin.uppy.info(n,"info",7e3)}e.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[]})}}).catch(this.handleError)},t.filterQuery=function(e){var t=this.plugin.getPluginState();this.plugin.setPluginState(___extends_202({},t,{filterInput:e?e.target.value:""}))},t.toggleSearch=function(e){var t=this.plugin.getPluginState();this.plugin.setPluginState({isSearchVisible:!t.isSearchVisible,filterInput:""})},t.filterItems=function(e){var t=this.plugin.getPluginState();return t.filterInput&&""!==t.filterInput?e.filter(function(e){return-1!==e.name.toLowerCase().indexOf(t.filterInput.toLowerCase())}):e},t.sortByTitle=function(){var e=___extends_202({},this.plugin.getPluginState()),t=e.files,n=e.folders,r=e.sorting,i=t.sort(function(e,t){return"titleDescending"===r?t.name.localeCompare(e.name):e.name.localeCompare(t.name)}),o=n.sort(function(e,t){return"titleDescending"===r?t.name.localeCompare(e.name):e.name.localeCompare(t.name)});this.plugin.setPluginState(___extends_202({},e,{files:i,folders:o,sorting:"titleDescending"===r?"titleAscending":"titleDescending"}))},t.sortByDate=function(){var e=___extends_202({},this.plugin.getPluginState()),t=e.files,n=e.folders,r=e.sorting,i=t.sort(function(e,t){var n=new Date(e.modifiedDate),i=new Date(t.modifiedDate);return"dateDescending"===r?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0}),o=n.sort(function(e,t){var n=new Date(e.modifiedDate),i=new Date(t.modifiedDate);return"dateDescending"===r?n>i?-1:n<i?1:0:n>i?1:n<i?-1:0});this.plugin.setPluginState(___extends_202({},e,{files:i,folders:o,sorting:"dateDescending"===r?"dateAscending":"dateDescending"}))},t.sortBySize=function(){var e=___extends_202({},this.plugin.getPluginState()),t=e.files,n=e.sorting;if(t.length&&this.plugin.getItemData(t[0]).size){var r=t.sort(function(e,t){var r=e.size,i=t.size;return"sizeDescending"===n?r>i?-1:r<i?1:0:r>i?1:r<i?-1:0});this.plugin.setPluginState(___extends_202({},e,{files:r,sorting:"sizeDescending"===n?"sizeAscending":"sizeDescending"}))}},t.isActiveRow=function(e){return this.plugin.getPluginState().activeRow===this.plugin.getItemId(e)},t.isChecked=function(e){return this.plugin.getPluginState().currentSelection.some(function(t){return t.id===e.id})},t.addFolder=function(e){var t=this,n=this.providerFileToId(e),r=this.plugin.getPluginState(),i=r.selectedFolders||{};if(!(n in i&&i[n].loading))return i[n]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:i}),this.listAllFiles(e.requestPath).then(function(o){o.forEach(function(e){t.addFile(e)});var s,a=o.map(t.providerFileToId);(r=t.plugin.getPluginState()).selectedFolders[n]={loading:!1,files:a},t.plugin.setPluginState({selectedFolders:i}),s=o.length?t.plugin.uppy.i18n("folderAdded",{smart_count:o.length,folder:e.name}):t.plugin.uppy.i18n("emptyFolderAdded"),t.plugin.uppy.info(s)}).catch(function(e){delete(r=t.plugin.getPluginState()).selectedFolders[n],t.plugin.setPluginState({selectedFolders:r.selectedFolders}),t.handleError(e)})},t.toggleCheckbox=function(e,t){e.stopPropagation(),e.preventDefault(),e.currentTarget.focus();var n=this.plugin.getPluginState(),r=n.folders,i=n.files,o=this.filterItems(r.concat(i));if(this.lastCheckbox&&e.shiftKey){var s,a=o.indexOf(this.lastCheckbox),u=o.indexOf(t);return s=a<u?o.slice(a,u+1):o.slice(u,a+1),void this.plugin.setPluginState({currentSelection:s})}this.lastCheckbox=t;var l=this.plugin.getPluginState().currentSelection;this.isChecked(t)?this.plugin.setPluginState({currentSelection:l.filter(function(e){return e.id!==t.id})}):this.plugin.setPluginState({currentSelection:l.concat([t])})},t.providerFileToId=function(e){return _$generateFileID_251({data:e,name:e.name||e.id,type:e.mimeType})},t.handleAuth=function(){var t=this,n=btoa(JSON.stringify({origin:"origin"in location?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")})),r=encodeURIComponent("@uppy/provider-views="+e.VERSION),i=this.provider.authUrl()+"?state="+n+"&uppyVersions="+r,o=window.open(i,"_blank");window.addEventListener("message",function e(n){if(t._isOriginAllowed(n.origin,t.plugin.opts.companionAllowedHosts)&&n.source===o){var r="string"==typeof n.data?JSON.parse(n.data):n.data;r.token?(o.close(),window.removeEventListener("message",e),t.provider.setAuthToken(r.token),t.preFirstRender()):t.plugin.uppy.log("did not receive token from auth window")}else t.plugin.uppy.log("rejecting event from "+n.origin+" vs allowed pattern "+t.plugin.opts.companionAllowedHosts)})},t._isOriginAllowed=function(e,t){var n=function(e){return"string"==typeof e?new RegExp("^"+e+"$"):e instanceof RegExp?e:void 0};return(Array.isArray(t)?t.map(n):[n(t)]).filter(function(e){return null!=e}).some(function(t){return t.test(e)||t.test(e+"/")})},t.handleError=function(e){var t=this.plugin.uppy;if(t.log(e.toString()),!e.isAuthError){var n=t.i18n("companionError");t.info({message:n,details:e.toString()},"error",5e3)}},t.handleScroll=function(e){var t=this,n=e.target.scrollHeight-(e.target.scrollTop+e.target.offsetHeight),r=this.nextPagePath||null;n<50&&r&&!this._isHandlingScroll&&(this.provider.list(r).then(function(e){var n=t.plugin.getPluginState(),r=n.files,i=n.folders;t._updateFilesAndFolders(e,r,i)}).catch(this.handleError).then(function(){t._isHandlingScroll=!1}),this._isHandlingScroll=!0)},t.listAllFiles=function(e,t){var n=this;return void 0===t&&(t=null),t=t||[],new Promise(function(r,i){n.provider.list(e).then(function(e){e.items.forEach(function(e){e.isFolder||t.push(e)});var o=e.nextPagePath||null;return o?n.listAllFiles(o,t).then(function(e){return r(e)}).catch(function(e){return i(e)}):r(t)}).catch(function(e){return i(e)})})},t.donePicking=function(){var e=this,t=this.plugin.getPluginState().currentSelection.map(function(t){return t.isFolder?e.addFolder(t):e.addFile(t)});this._loaderWrapper(Promise.all(t),function(){e.clearSelection()},function(){})},t.cancelPicking=function(){this.clearSelection();var e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()},t.clearSelection=function(){this.plugin.setPluginState({currentSelection:[]})},t._loaderWrapper=function(e,t,n){var r=this;e.then(function(e){r.plugin.setPluginState({loading:!1}),t(e)}).catch(function(e){r.plugin.setPluginState({loading:!1}),n(e)}),this.plugin.setPluginState({loading:!0})},t.render=function(e,t){void 0===t&&(t={});var n=this.plugin.getPluginState(),r=n.authenticated;if(n.didFirstRender||this.preFirstRender(),this.plugin.getPluginState().loading)return __h_202(CloseWrapper,{onUnmount:this.clearSelection},__h_202(_$Loader_201,{i18n:this.plugin.uppy.i18n}));if(!r)return __h_202(CloseWrapper,{onUnmount:this.clearSelection},__h_202(_$AuthView_191,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,i18nArray:this.plugin.uppy.i18nArray}));var i=___extends_202({},this.opts,{},t),o=___extends_202({},this.plugin.getPluginState(),{username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this.filterItems,filterQuery:this.filterQuery,toggleSearch:this.toggleSearch,sortByTitle:this.sortByTitle,sortByDate:this.sortByDate,logout:this.logout,isActiveRow:this.isActiveRow,isChecked:this.isChecked,toggleCheckbox:this.toggleCheckbox,handleScroll:this.handleScroll,listAllFiles:this.listAllFiles,done:this.donePicking,cancel:this.cancelPicking,title:this.plugin.title,viewType:i.viewType,showTitles:i.showTitles,showFilter:i.showFilter,showBreadcrumbs:i.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n});return __h_202(CloseWrapper,{onUnmount:this.clearSelection},__h_202(_$Browser_193,o))},e}(),___class_202.VERSION=_$package_203.version,___temp_202),_$package_222={version:"1.2.1"},_$lib_221={};function ___extends_221(){return(___extends_221=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var STATE_UPDATE="uppy/STATE_UPDATE",defaultSelector=function(e){return function(t){return t.uppy[e]}},ReduxStore=function(){function e(e){this._store=e.store,this._id=e.id||_$cuid_40(),this._selector=e.selector||defaultSelector(this._id),this.setState({})}var t=e.prototype;return t.setState=function(e){this._store.dispatch({type:STATE_UPDATE,id:this._id,payload:e})},t.getState=function(){return this._selector(this._store.getState())},t.subscribe=function(e){var t=this,n=this.getState();return this._store.subscribe(function(){var r=t.getState();if(n!==r){var i=function(e,t){var n=Object.keys(t),r={};return n.forEach(function(n){e[n]!==t[n]&&(r[n]=t[n])}),r}(n,r);e(n,r,i),n=r}})},e}();ReduxStore.VERSION=_$package_222.version,_$lib_221=function(e){return new ReduxStore(e)},_$lib_221.STATE_UPDATE=STATE_UPDATE,_$lib_221.reducer=function(e,t){if(void 0===e&&(e={}),t.type===STATE_UPDATE){var n,r=___extends_221({},e[t.id],t.payload);return ___extends_221({},e,((n={})[t.id]=r,n))}return e},_$lib_221.middleware=function(){return function(){return function(e){return function(t){e(t)}}}};var _$isShallowEqual_69=function(e,t){if(e===t)return!0;for(var n in e)if(!(n in t))return!1;for(var n in t)if(e[n]!==t[n])return!1;return!0},__h_153=_$preact_80.h,_$icons_153={defaultPickerIcon:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},__h_153("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))},iconRetry:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon retry",width:"28",height:"31",viewBox:"0 0 16 19"},__h_153("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),__h_153("path",{d:"M7.9 3H10v2H7.9z"}),__h_153("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),__h_153("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))},iconMyDevice:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_153("g",{fill:"none","fill-rule":"evenodd"},__h_153("rect",{width:"32",height:"32",rx:"16",fill:"#2275D7"}),__h_153("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"})))},iconImage:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},__h_153("g",{fill:"#686DE0","fill-rule":"evenodd"},__h_153("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z","fill-rule":"nonzero"}),__h_153("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z","fill-rule":"nonzero"}),__h_153("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))},iconAudio:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"25",height:"25",viewBox:"0 0 25 25"},__h_153("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF","fill-rule":"nonzero"}))},iconVideo:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"25",height:"25",viewBox:"0 0 25 25"},__h_153("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67","fill-rule":"nonzero"}))},iconPDF:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"25",height:"25",viewBox:"0 0 25 25"},__h_153("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A","fill-rule":"nonzero"}))},iconArchive:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},__h_153("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469","fill-rule":"nonzero"}))},iconFile:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"25",height:"25",viewBox:"0 0 25 25"},__h_153("g",{fill:"#A7AFB7","fill-rule":"nonzero"},__h_153("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),__h_153("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))},iconText:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"25",height:"25",viewBox:"0 0 25 25"},__h_153("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69","fill-rule":"nonzero"}))},iconCopyLink:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"14",height:"14",viewBox:"0 0 14 12"},__h_153("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"}))},iconPencil:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"14",height:"14",viewBox:"0 0 14 14"},__h_153("g",{"fill-rule":"evenodd"},__h_153("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z","fill-rule":"nonzero"}),__h_153("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),__h_153("path",{"fill-rule":"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))},iconCross:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"18",height:"18",viewBox:"0 0 18 18"},__h_153("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),__h_153("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"}))},iconPlus:function(){return __h_153("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"15",height:"15",viewBox:"0 0 15 15"},__h_153("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"}))}},_$getFileTypeIcon_158={};(function(e){var t=_$icons_153.iconFile,n=_$icons_153.iconText,r=_$icons_153.iconImage,i=_$icons_153.iconAudio,o=_$icons_153.iconVideo,s=_$icons_153.iconPDF,a=_$icons_153.iconArchive;_$getFileTypeIcon_158=function(u){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getIconByMime","fileName":"'+e+'","paramsNumber":1},');var l={color:"#838999",icon:t()};if(!u)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),l;var c=u.split("/")[0],p=u.split("/")[1];return"text"===c?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),{color:"#5a5e69",icon:n()}):"image"===c?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),{color:"#686de0",icon:r()}):"audio"===c?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),{color:"#068dbb",icon:i()}):"video"===c?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),{color:"#19af67",icon:o()}):"application"===c&&"pdf"===p?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),{color:"#e25149",icon:s()}):"application"===c&&-1!==["zip","x-7z-compressed","x-rar-compressed","x-gtar","x-apple-diskimage","x-diskcopy"].indexOf(p)?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),{color:"#00C469",icon:a()}):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getIconByMime"},'),l)}}).call(this,"/packages/@uppy/dashboard/lib/utils/getFileTypeIcon.js");var __h_149=_$preact_80.h,_$FilePreview_149=function(e){var t=e.file;if(t.preview)return __h_149("img",{class:"uppy-DashboardItem-previewImg",alt:t.name,src:t.preview});var n=_$getFileTypeIcon_158(t.type),r=n.color,i=n.icon;return __h_149("div",{class:"uppy-DashboardItem-previewIconWrap"},__h_149("span",{class:"uppy-DashboardItem-previewIcon",style:{color:r}},i),__h_149("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-DashboardItem-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},__h_149("rect",{fill:"#FFF",width:"58",height:"76",rx:"3","fill-rule":"evenodd"})))},__h_144=_$preact_80.h,_$FilePreviewAndLink_144=function(e){return __h_144("div",{class:"uppy-DashboardItem-previewInnerWrap",style:{backgroundColor:_$getFileTypeIcon_158(e.file.type).color}},e.showLinkToFileUploadResult&&e.file.uploadURL&&__h_144("a",{class:"uppy-DashboardItem-previewLink",href:e.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.file.meta.name}),__h_144(_$FilePreview_149,{file:e.file}))},__h_145=_$preact_80.h,circleLength=2*Math.PI*15,_$PauseResumeCancelIcon_145=function(e){return __h_145("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",class:"UppyIcon UppyIcon-progressCircle"},__h_145("g",{class:"progress-group"},__h_145("circle",{class:"bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),__h_145("circle",{class:"progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)","stroke-width":"2",fill:"none","stroke-dasharray":circleLength,"stroke-dashoffset":circleLength-circleLength/100*e.progress})),!e.hidePauseResumeCancelButtons&&__h_145("g",null,__h_145("polygon",{class:"play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}),__h_145("g",{class:"pause",transform:"translate(14.5, 13)"},__h_145("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),__h_145("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})),__h_145("polygon",{class:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})),__h_145("polygon",{class:"check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))},__h_146=_$preact_80.h,iconRetry=_$icons_153.iconRetry;function progressIndicatorTitle(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}var _$FileProgress_146=function(e){return e.hideRetryButton&&e.error||e.isUploaded&&e.showRemoveButtonAfterComplete?__h_146("div",{class:"uppy-DashboardItem-progress"}):e.isUploaded||e.hidePauseResumeCancelButtons&&!e.error?__h_146("div",{class:"uppy-DashboardItem-progress"},__h_146("div",{class:"uppy-DashboardItem-progressIndicator"},__h_146(_$PauseResumeCancelIcon_145,{progress:e.file.progress.percentage,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons}))):__h_146("div",{class:"uppy-DashboardItem-progress"},__h_146("button",{class:"uppy-u-reset uppy-DashboardItem-progressIndicator",type:"button","aria-label":progressIndicatorTitle(e),title:progressIndicatorTitle(e),onclick:function(){return function(e){e.isUploaded||(!e.error||e.hideRetryButton?e.hidePauseResumeCancelButtons||(e.resumableUploads?e.pauseUpload(e.file.id):e.individualCancellation&&e.cancelUpload(e.file.id)):e.retryUpload(e.file.id))}(e)}},e.error?e.hideRetryButton?null:iconRetry():__h_146(_$PauseResumeCancelIcon_145,{progress:e.file.progress.percentage,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons})))},_$prettierBytes_162=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i},_$truncateString_161={};(function(e){_$truncateString_161=function(t,n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.truncateString","fileName":"'+e+'","paramsNumber":2},'),t.length<=n)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.truncateString"},'),t;if(n<="...".length)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.truncateString"},'),t.substr(0,n);var r=n-"...".length,i=Math.ceil(r/2),o=Math.floor(r/2);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.truncateString"},'),t.substr(0,i)+"..."+t.substr(t.length-o)}}).call(this,"/packages/@uppy/dashboard/lib/utils/truncateString.js");var __h_143=_$preact_80.h,renderFileSource=function(e){return e.file.source&&e.file.source!==e.id&&__h_143("div",{class:"uppy-DashboardItem-sourceIcon"},e.acquirers.map(function(t){if(t.id===e.file.source)return function(e,t){return __h_143("span",{title:t.i18n("fileSource",{name:e.name})},e.icon())}(t,e)}))},ErrorButton=function(e){var t=e.file,n=e.onClick;return t.error?__h_143("span",{class:"uppy-DashboardItem-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip",onclick:n},"?"):null},_$FileInfo_143=function(e){return __h_143("div",{class:"uppy-DashboardItem-fileInfo","data-uppy-file-source":e.file.source},function(e){var t;return t=e.containerWidth<=352?35:e.containerWidth<=576?60:30,__h_143("div",{class:"uppy-DashboardItem-name",title:e.file.meta.name},_$truncateString_161(e.file.meta.name,t))}(e),__h_143("div",{class:"uppy-DashboardItem-status"},function(e){return e.file.data.size&&__h_143("div",{class:"uppy-DashboardItem-statusSize"},_$prettierBytes_162(e.file.data.size))}(e),renderFileSource(e),__h_143(ErrorButton,{file:e.file,onClick:function(){alert(e.file.error)}})))},_$copyToClipboard_155={};(function(e){_$copyToClipboard_155=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.copyToClipboard","fileName":"'+e+'","paramsNumber":2},'),n=n||"Copy the URL below",_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.copyToClipboard"},'),new Promise(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},');var i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=t,document.body.appendChild(i),i.select();var o=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"magicCopyFailed","fileName":"'+e+'","paramsNumber":0},'),document.body.removeChild(i),window.prompt(n,t),r(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"magicCopyFailed"},')};try{return document.execCommand("copy")?(document.body.removeChild(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),r()):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),o())}catch(err){return document.body.removeChild(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),o()}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')})}}).call(this,"/packages/@uppy/dashboard/lib/utils/copyToClipboard.js");var __h_142=_$preact_80.h,iconPencil=_$icons_153.iconPencil,iconCross=_$icons_153.iconCross,iconCopyLink=_$icons_153.iconCopyLink;function EditButton(e){var t=e.file,n=e.uploadInProgressOrComplete,r=e.metaFields,i=e.i18n,o=e.onClick;return!n&&r&&r.length>0?__h_142("button",{class:"uppy-u-reset uppy-DashboardItem-action uppy-DashboardItem-action--edit",type:"button","aria-label":i("editFile")+" "+t.meta.name,title:i("editFile"),onclick:function(){return o()}},iconPencil()):null}function RemoveButton(e){var t=e.i18n,n=e.onClick;return __h_142("button",{class:"uppy-u-reset uppy-DashboardItem-action uppy-DashboardItem-action--remove",type:"button","aria-label":t("removeFile"),title:t("removeFile"),onclick:function(){return n()}},iconCross())}var copyLinkToClipboard=function(e,t){_$copyToClipboard_155(t.file.uploadURL,t.i18n("copyLinkToClipboardFallback")).then(function(){t.log("Link copied to clipboard."),t.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(function(){return e.target.focus({preventScroll:!0})})};function CopyLinkButton(e){return __h_142("button",{class:"uppy-u-reset uppy-DashboardItem-action uppy-DashboardItem-action--copyLink",type:"button","aria-label":e.i18n("copyLink"),title:e.i18n("copyLink"),onclick:function(t){return copyLinkToClipboard(t,e)}},iconCopyLink())}var _$Buttons_142=function(e){var t=e.file,n=e.uploadInProgressOrComplete,r=e.metaFields,i=e.showLinkToFileUploadResult,o=e.showRemoveButton,s=e.i18n,a=e.removeFile,u=e.toggleFileCard,l=e.log,c=e.info;return __h_142("div",{className:"uppy-DashboardItem-actionWrapper"},__h_142(EditButton,{i18n:s,file:t,uploadInProgressOrComplete:n,metaFields:r,onClick:function(){return u(t.id)}}),i&&t.uploadURL?__h_142(CopyLinkButton,{file:t,i18n:s,info:c,log:l}):null,o?__h_142(RemoveButton,{i18n:s,info:e.info,log:e.log,onClick:function(){return a(t.id)}}):null)},__h_147=_$preact_80.h,__Component_147=_$preact_80.Component,_$FileItem_147=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.shouldComponentUpdate=function(e){return!_$isShallowEqual_69(this.props,e)},i.componentDidMount=function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)},i.componentWillUnmount=function(){var e=this.props.file;e.preview||this.props.handleCancelThumbnail(e)},i.render=function(){var e=this.props.file,t=e.progress.preprocess||e.progress.postprocess,n=e.progress.uploadComplete&&!t&&!e.error,r=e.progress.uploadStarted||t,i=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.isPaused||!1,s=e.error||!1,a=this.props.individualCancellation?!n:!i&&!n;n&&this.props.showRemoveButtonAfterComplete&&(a=!0);var u=_$classnames_36({"uppy-u-reset":!0,"uppy-DashboardItem":!0,"is-inprogress":i,"is-processing":t,"is-complete":n,"is-paused":o,"is-error":!!s,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation});return __h_147("div",{class:u,id:"uppy_"+e.id,role:this.props.role},__h_147("div",{class:"uppy-DashboardItem-preview"},__h_147(_$FilePreviewAndLink_144,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult}),__h_147(_$FileProgress_146,{file:e,error:s,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hidePauseResumeCancelButtons:this.props.hidePauseResumeCancelButtons,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,pauseUpload:this.props.pauseUpload,cancelUpload:this.props.cancelUpload,retryUpload:this.props.retryUpload,i18n:this.props.i18n})),__h_147("div",{class:"uppy-DashboardItem-fileInfoAndButtons"},__h_147(_$FileInfo_143,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n}),__h_147(_$Buttons_142,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:a,uploadInProgressOrComplete:r,removeFile:this.props.removeFile,toggleFileCard:this.props.toggleFileCard,i18n:this.props.i18n,log:this.props.log,info:this.props.info})))},r}(__Component_147);function ___extends_152(){return(___extends_152=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_152=_$preact_80.h,__Component_152=_$preact_80.Component,STYLE_INNER={position:"relative",width:"100%",minHeight:"100%"},STYLE_CONTENT={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},VirtualList=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleResize=function(){n.resize()},n.handleScroll=function(){n.setState({offset:n.base.scrollTop}),n.props.sync&&n.forceUpdate()},n.focusElement=null,n.state={offset:0,height:0},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.resize=function(){this.state.height!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})},i.componentWillUpdate=function(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)},i.componentDidUpdate=function(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()},i.componentDidMount=function(){this.resize(),window.addEventListener("resize",this.handleResize)},i.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},i.render=function(e){var t=e.data,n=e.rowHeight,r=e.renderRow,i=e.overscanCount,o=void 0===i?10:i,s=(e.sync,function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["data","rowHeight","renderRow","overscanCount","sync"])),a=this.state,u=a.offset,l=a.height,c=Math.floor(u/n),p=Math.floor(l/n);o&&(c=Math.max(0,c-c%o),p+=o);var d=c+p+4,_=t.slice(c,d),f=___extends_152({},STYLE_INNER,{height:t.length*n}),h=___extends_152({},STYLE_CONTENT,{top:c*n});return __h_152("div",___extends_152({onScroll:this.handleScroll},s),__h_152("div",{role:"presentation",style:f},__h_152("div",{role:"presentation",style:h},_.map(r))))},r}(__Component_152),_$VirtualList_152=VirtualList;function ___extends_148(){return(___extends_148=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_148=_$preact_80.h,_$FileList_148=function(e){var t,n,r,i,o=0===e.totalFileCount,s=_$classnames_36("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":o}),a=1===e.itemsPerRow?71:200,u={id:e.id,error:e.error,i18n:e.i18n,log:e.log,info:e.info,acquirers:e.acquirers,resumableUploads:e.resumableUploads,individualCancellation:e.individualCancellation,hideRetryButton:e.hideRetryButton,hidePauseResumeCancelButtons:e.hidePauseResumeCancelButtons,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,isWide:e.isWide,metaFields:e.metaFields,retryUpload:e.retryUpload,pauseUpload:e.pauseUpload,cancelUpload:e.cancelUpload,toggleFileCard:e.toggleFileCard,removeFile:e.removeFile,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail},l=(t=Object.keys(e.files),n=e.itemsPerRow,r=[],i=[],t.forEach(function(e,t){i.length<n?i.push(e):(r.push(i),i=[e])}),i.length&&r.push(i),r);return __h_148(_$VirtualList_152,{class:s,role:"list",data:l,renderRow:function(t){return __h_148("div",{role:"presentation",key:t[0]},t.map(function(t){return __h_148(_$FileItem_147,___extends_148({key:t},u,{role:"listitem",file:e.files[t]}))}))},rowHeight:a})},iconMyDevice=_$icons_153.iconMyDevice,__h_138=_$preact_80.h,AddFiles=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).triggerFileInputClick=function(){t.fileInput.click()},t.onFileInputChange=function(e){t.props.handleInputChange(e),e.target.value=null},t.renderCloudIcon=function(){return __h_138("svg",{class:"uppy-Dashboard-dropFilesIcon","aria-hidden":"true",width:"64",height:"45",viewBox:"0 0 64 45",xmlns:"http://www.w3.org/2000/svg"},__h_138("path",{d:"M38 44.932V31h8L33 15 20 31h8v13.932H13.538C6.075 44.932 0 38.774 0 31.202c0-6.1 4.06-11.512 9.873-13.162l.005-.017c.345-5.8 5.248-10.534 10.922-10.534.502 0 1.164.017 1.868.16C25.9 2.85 31.225 0 36.923 0c9.5 0 17.23 7.838 17.23 17.473l-.011.565.012.002C60.039 19.685 64 24.975 64 31.203c0 7.57-6.075 13.729-13.538 13.729H38z",fill:"#E2E2E2","fill-rule":"nonzero"}))},t.renderHiddenFileInput=function(){return __h_138("input",{class:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabindex:-1,type:"file",name:"files[]",multiple:1!==t.props.maxNumberOfFiles,onchange:t.onFileInputChange,accept:t.props.allowedFileTypes,ref:function(e){t.fileInput=e}})},t.renderMyDeviceAcquirer=function(){return __h_138("div",{class:"uppy-DashboardTab",role:"presentation"},__h_138("button",{type:"button",class:"uppy-DashboardTab-btn",role:"tab",tabindex:0,"data-uppy-super-focusable":!0,onclick:t.triggerFileInputClick},iconMyDevice(),__h_138("div",{class:"uppy-DashboardTab-name"},t.props.i18n("myDevice"))))},t.renderDropPasteBrowseTagline=function(){var e=t.props.acquirers.length,n=__h_138("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-browse",onclick:t.triggerFileInputClick,"data-uppy-super-focusable":0===e},t.props.i18n("browse"));return __h_138("div",{class:"uppy-Dashboard-AddFiles-title"},e>0?t.props.i18nArray("dropPasteImport",{browse:n}):t.props.i18nArray("dropPaste",{browse:n}))},t.renderAcquirer=function(e){return __h_138("div",{class:"uppy-DashboardTab",role:"presentation"},__h_138("button",{type:"button",class:"uppy-DashboardTab-btn",role:"tab",tabindex:0,"aria-controls":"uppy-DashboardContent-panel--"+e.id,"aria-selected":t.props.activePickerPanel.id===e.id,"data-uppy-super-focusable":!0,onclick:function(){return t.props.showPanel(e.id)}},e.icon(),__h_138("div",{class:"uppy-DashboardTab-name"},e.name)))},t.renderAcquirers=function(e){var n=[].concat(e),r=n.splice(e.length-2,e.length);return __h_138("div",{class:"uppy-Dashboard-AddFiles-list",role:"tablist"},t.renderMyDeviceAcquirer(),n.map(function(e){return t.renderAcquirer(e)}),__h_138("span",{role:"presentation",style:"white-space: nowrap;"},r.map(function(e){return t.renderAcquirer(e)})))},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.renderPoweredByUppy=function(){var e=__h_138("span",null,__h_138("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},__h_138("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z","fill-rule":"evenodd"})),__h_138("span",{class:"uppy-Dashboard-poweredByUppy"},"Uppy")),t=this.props.i18nArray("poweredBy2",{backwardsCompat:this.props.i18n("poweredBy"),uppy:e});return __h_138("a",{tabindex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",class:"uppy-Dashboard-poweredBy"},t)},i.render=function(){return __h_138("div",{class:"uppy-Dashboard-AddFiles"},this.renderHiddenFileInput(),this.renderDropPasteBrowseTagline(),this.props.acquirers.length>0&&this.renderAcquirers(this.props.acquirers),__h_138("div",{class:"uppy-Dashboard-AddFiles-info"},this.props.note&&__h_138("div",{class:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))},r}(_$preact_80.Component),_$AddFiles_138=AddFiles,__h_139=_$preact_80.h,_$AddFilesPanel_139=function(e){return __h_139("div",{class:"uppy-Dashboard-AddFilesPanel","data-uppy-panelType":"AddFiles","aria-hidden":e.showAddFilesPanel},__h_139("div",{class:"uppy-DashboardContent-bar"},__h_139("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("addingMoreFiles")),__h_139("button",{class:"uppy-DashboardContent-back",type:"button",onclick:function(t){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),__h_139(_$AddFiles_138,e))},_$ignoreEvent_159={};(function(e){_$ignoreEvent_159=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"ignoreEvent","fileName":"'+e+'","paramsNumber":1},');var n=t.target.tagName;if("INPUT"===n||"TEXTAREA"===n)return t.stopPropagation(),void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"ignoreEvent"},');t.preventDefault(),t.stopPropagation(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"ignoreEvent","paramsNumber":1},')}}).call(this,"/packages/@uppy/dashboard/lib/utils/ignoreEvent.js");var __h_150=_$preact_80.h,_$PickerPanelContent_150=function(e){return __h_150("div",{class:"uppy-DashboardContent-panel",role:"tabpanel","data-uppy-panelType":"PickerPanel",id:"uppy-DashboardContent-panel--"+e.activePickerPanel.id,onDragOver:_$ignoreEvent_159,onDragLeave:_$ignoreEvent_159,onDrop:_$ignoreEvent_159,onPaste:_$ignoreEvent_159},__h_150("div",{class:"uppy-DashboardContent-bar"},__h_150("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("importFrom",{name:e.activePickerPanel.name})),__h_150("button",{class:"uppy-DashboardContent-back",type:"button",onclick:e.hideAllPanels},e.i18n("done"))),__h_150("div",{class:"uppy-DashboardContent-panelBody"},e.getPlugin(e.activePickerPanel.id).render(e.state)))},__h_151=_$preact_80.h,iconPlus=_$icons_153.iconPlus,uploadStates={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function UploadStatus(e){switch(function(e,t,n,r){if(void 0===r&&(r={}),e)return uploadStates.STATE_ERROR;if(t)return uploadStates.STATE_COMPLETE;if(n)return uploadStates.STATE_PAUSED;for(var i=uploadStates.STATE_WAITING,o=Object.keys(r),s=0;s<o.length;s++){var a=r[o[s]].progress;if(a.uploadStarted&&!a.uploadComplete)return uploadStates.STATE_UPLOADING;a.preprocess&&i!==uploadStates.STATE_UPLOADING&&(i=uploadStates.STATE_PREPROCESSING),a.postprocess&&i!==uploadStates.STATE_UPLOADING&&i!==uploadStates.STATE_PREPROCESSING&&(i=uploadStates.STATE_POSTPROCESSING)}return i}(e.isAllErrored,e.isAllComplete,e.isAllPaused,e.files)){case"uploading":return e.i18n("uploadingXFiles",{smart_count:e.inProgressNotPausedFiles.length});case"preprocessing":case"postprocessing":return e.i18n("processingXFiles",{smart_count:e.processingFiles.length});case"paused":return e.i18n("uploadPaused");case"waiting":return e.i18n("xFilesSelected",{smart_count:e.newFiles.length});case"complete":return e.i18n("uploadComplete")}}var _$PickerPanelTopBar_151=function(e){var t=e.allowNewUpload;return t&&e.maxNumberOfFiles&&(t=e.totalFileCount<e.maxNumberOfFiles),__h_151("div",{class:"uppy-DashboardContent-bar"},e.isAllComplete||e.hideCancelButton?__h_151("div",null):__h_151("button",{class:"uppy-DashboardContent-back",type:"button",onclick:e.cancelAll},e.i18n("cancel")),__h_151("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},__h_151(UploadStatus,e)),t?__h_151("button",{class:"uppy-DashboardContent-addMore",type:"button","aria-label":e.i18n("addMoreFiles"),title:e.i18n("addMoreFiles"),onclick:function(){return e.toggleAddFilesPanel(!0)}},iconPlus(),__h_151("span",{class:"uppy-DashboardContent-addMoreCaption"},e.i18n("addMore"))):__h_151("div",null))};function ___extends_141(){return(___extends_141=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_141=_$preact_80.h,__Component_141=_$preact_80.Component,FileCard=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).saveOnEnter=function(e){if(13===e.keyCode){e.stopPropagation(),e.preventDefault();var t=n.props.files[n.props.fileCardFor];n.props.saveFileCard(n.state.formState,t.id)}},n.updateMeta=function(e,t){var r;n.setState({formState:___extends_141({},n.state.formState,(r={},r[t]=e,r))})},n.handleSave=function(){var e=n.props.fileCardFor;n.props.saveFileCard(n.state.formState,e)},n.handleCancel=function(){n.props.toggleFileCard()},n.renderMetaFields=function(){var e=n.props.metaFields||[],t={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(function(e){var r="uppy-Dashboard-FileCard-input-"+e.id;return __h_141("fieldset",{key:e.id,class:"uppy-Dashboard-FileCard-fieldset"},__h_141("label",{class:"uppy-Dashboard-FileCard-label",for:r},e.name),void 0!==e.render?e.render({value:n.state.formState[e.id],onChange:function(t){return n.updateMeta(t,e.id)},fieldCSSClasses:t},__h_141):__h_141("input",{class:t.text,id:r,type:e.type||"text",value:n.state.formState[e.id],placeholder:e.placeholder,onkeyup:n.saveOnEnter,onkeydown:n.saveOnEnter,onkeypress:n.saveOnEnter,oninput:function(t){return n.updateMeta(t.target.value,e.id)},"data-uppy-super-focusable":!0}))})};var r=n.props.files[n.props.fileCardFor],i=n.props.metaFields||[],o={};return i.forEach(function(e){o[e.id]=r.meta[e.id]||""}),n.state={formState:o},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props.files[this.props.fileCardFor];return __h_141("div",{class:"uppy-Dashboard-FileCard","data-uppy-panelType":"FileCard",onDragOver:_$ignoreEvent_159,onDragLeave:_$ignoreEvent_159,onDrop:_$ignoreEvent_159,onPaste:_$ignoreEvent_159},__h_141("div",{class:"uppy-DashboardContent-bar"},__h_141("div",{class:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:__h_141("span",{class:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),__h_141("button",{class:"uppy-DashboardContent-back",type:"button",title:this.props.i18n("finishEditingFile"),onclick:this.handleSave},this.props.i18n("done"))),__h_141("div",{class:"uppy-Dashboard-FileCard-inner"},__h_141("div",{class:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:_$getFileTypeIcon_158(e.type).color}},__h_141(_$FilePreview_149,{file:e})),__h_141("div",{class:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),__h_141("div",{class:"uppy-Dashboard-FileCard-actions"},__h_141("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"button",onclick:this.handleSave},this.props.i18n("saveChanges")),__h_141("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onclick:this.handleCancel},this.props.i18n("cancel")))))},r}(__Component_141),_$FileCard_141=FileCard,_$isDragDropSupported_266={};(function(e){_$isDragDropSupported_266=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.isDragDropSupported","fileName":"'+e+'","paramsNumber":0},');var t=document.createElement("div");return"draggable"in t&&"ondragstart"in t&&"ondrop"in t&&"FormData"in window&&"FileReader"in window?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isDragDropSupported"},'),!0):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isDragDropSupported"},'),!1)}}).call(this,"/node_modules/@uppy/utils/lib/isDragDropSupported.js");var _$preactCssTransitionGroup_79={exports:{}},__global_79,__factory_79;function ___extends_140(){return(___extends_140=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}__global_79=this,__factory_79=function(e){"use strict";function t(e){return e.attributes&&e.attributes.key}function n(e){return e.base}function r(e){return e&&e.filter(function(e){return null!==e})}function i(e,t){for(var n=e.length;n--;)if(t(e[n]))return!0;return!1}function o(e,n){return i(e,function(e){return t(e)===n})}function s(e,n){return o(e,t(n))}function a(e,n,r){return i(e,function(e){return t(e)===n&&e.props[r]})}function u(e,n,r){return a(e,t(n),r)}var l=" ",c=/[\n\t\r]+/g,p=function(e){return(l+e+l).replace(c,l)};function d(e,t){var n;e.classList?(n=e.classList).add.apply(n,t.split(" ")):e.className+=" "+t}function _(e,t){if(t=t.trim(),e.classList){var n;(n=e.classList).remove.apply(n,t.split(" "))}else{var r=e.className.trim(),i=p(r);for(t=l+t+l;i.indexOf(t)>=0;)i=i.replace(t,l);e.className=i.trim()}}var f={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},h=[];"undefined"!=typeof window&&function(){var e=document.createElement("div").style;for(var t in"AnimationEvent"in window||delete f.animationend.animation,"TransitionEvent"in window||delete f.transitionend.transition,f){var n=f[t];for(var r in n)if(r in e){h.push(n[r]);break}}}();var m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},b=function(e){function t(){var r,i;m(this,t);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=i=g(this,e.call.apply(e,[this].concat(s))),i.flushClassNameQueue=function(){n(i)&&d(n(i),i.classNameQueue.join(" ")),i.classNameQueue.length=0,i.timeout=null},g(i,r)}return y(t,e),t.prototype.transition=function(e,t,r){var i=this,o=n(this),s=this.props.name[e]||this.props.name+"-"+e,a=this.props.name[e+"Active"]||s+"-active",u=null;this.endListener&&this.endListener(),this.endListener=function(e){e&&e.target!==o||(clearTimeout(u),_(o,s),_(o,a),function(e,t){h.length&&h.forEach(function(n){e.removeEventListener(n,t,!1)})}(o,i.endListener),i.endListener=null,t&&t())},r?(u=setTimeout(this.endListener,r),this.transitionTimeouts.push(u)):function(e,t){if(!h.length)return window.setTimeout(t,0);h.forEach(function(n){e.addEventListener(n,t,!1)})}(o,this.endListener),d(o,s),this.queueClass(a)},t.prototype.queueClass=function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,17))},t.prototype.stop=function(){this.timeout&&(clearTimeout(this.timeout),this.classNameQueue.length=0,this.timeout=null),this.endListener&&this.endListener()},t.prototype.componentWillMount=function(){this.classNameQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)})},t.prototype.componentWillEnter=function(e){this.props.enter?this.transition("enter",e,this.props.enterTimeout):e()},t.prototype.componentWillLeave=function(e){this.props.leave?this.transition("leave",e,this.props.leaveTimeout):e()},t.prototype.render=function(){return(e=this.props.children)&&e[0];var e},t}(e.Component),v=function(n){function i(r){m(this,i);var o=g(this,n.call(this));return o.renderChild=function(n){var r=o.props,i=r.transitionName,s=r.transitionEnter,a=r.transitionLeave,u=r.transitionEnterTimeout,l=r.transitionLeaveTimeout,c=t(n);return e.h(b,{key:c,ref:function(e){(o.refs[c]=e)||(n=null)},name:i,enter:s,leave:a,enterTimeout:u,leaveTimeout:l},n)},o.refs={},o.state={children:(r.children||[]).slice()},o}return y(i,n),i.prototype.shouldComponentUpdate=function(e,t){return t.children!==this.state.children},i.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},i.prototype.componentWillReceiveProps=function(n){var i,a,l,c,p=this,d=n.children,_=n.exclusive,f=n.showProp,h=r(d||[]).slice(),m=r(_?this.props.children:this.state.children),y=(i=h,a=[],l={},c=[],m.forEach(function(e){var n=t(e);o(i,n)?c.length&&(l[n]=c,c=[]):c.push(e)}),i.forEach(function(e){var n=t(e);l.hasOwnProperty(n)&&(a=a.concat(l[n])),a.push(e)}),a.concat(c));f&&(y=y.map(function(t){var n;return!t.props[f]&&u(m,t,f)&&(t=e.cloneElement(t,((n={})[f]=!0,n))),t})),_&&y.forEach(function(e){return p.stop(t(e))}),this.setState({children:y}),this.forceUpdate(),h.forEach(function(e){var t=e.key,n=m&&s(m,e);if(f){if(n){var r=u(m,e,f),i=e.props[f];r||!i||p.currentlyTransitioningKeys[t]||p.keysToEnter.push(t)}}else n||p.currentlyTransitioningKeys[t]||p.keysToEnter.push(t)}),m.forEach(function(e){var t=e.key,n=h&&s(h,e);if(f){if(n){var r=u(h,e,f),i=e.props[f];r||!i||p.currentlyTransitioningKeys[t]||p.keysToLeave.push(t)}}else n||p.currentlyTransitioningKeys[t]||p.keysToLeave.push(t)})},i.prototype.performEnter=function(e){var t=this;this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n.componentWillEnter?n.componentWillEnter(function(){return t._handleDoneEntering(e)}):this._handleDoneEntering(e)},i.prototype._handleDoneEntering=function(e){delete this.currentlyTransitioningKeys[e];var t=r(this.props.children),n=this.props.showProp;!t||!n&&!o(t,e)||n&&!a(t,e,n)?this.performLeave(e):this.setState({children:t})},i.prototype.stop=function(e){delete this.currentlyTransitioningKeys[e];var t=this.refs[e];t&&t.stop()},i.prototype.performLeave=function(e){var t=this;this.currentlyTransitioningKeys[e]=!0;var n=this.refs[e];n&&n.componentWillLeave?n.componentWillLeave(function(){return t._handleDoneLeaving(e)}):this._handleDoneLeaving(e)},i.prototype._handleDoneLeaving=function(e){delete this.currentlyTransitioningKeys[e];var t=this.props.showProp,n=r(this.props.children);t&&n&&a(n,e,t)?this.performEnter(e):!t&&n&&o(n,e)?this.performEnter(e):this.setState({children:n})},i.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter,n=this.keysToLeave;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t)}),this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t)})},i.prototype.render=function(t,n){var i=t.component,o=(t.transitionName,t.transitionEnter,t.transitionLeave,t.transitionEnterTimeout,t.transitionLeaveTimeout,t.children,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["component","transitionName","transitionEnter","transitionLeave","transitionEnterTimeout","transitionLeaveTimeout","children"])),s=n.children;return e.h(i,o,r(s).map(this.renderChild))},i}(e.Component);return v.defaultProps={component:"span",transitionEnter:!0,transitionLeave:!0},v},"object"==typeof _$preactCssTransitionGroup_79.exports?_$preactCssTransitionGroup_79.exports=__factory_79(_$preact_80):"function"==typeof define&&define.amd?define(["preact"],__factory_79):__global_79.PreactCSSTransitionGroup=__factory_79(__global_79.preact),_$preactCssTransitionGroup_79=_$preactCssTransitionGroup_79.exports;var __h_140=_$preact_80.h;function TransitionWrapper(e){return __h_140(_$preactCssTransitionGroup_79,{transitionName:"uppy-transition-slideDownUp",transitionEnterTimeout:250,transitionLeaveTimeout:250},e.children)}var _$Dashboard_140=function(e){var t=0===e.totalFileCount,n=e.containerWidth>576,r=_$classnames_36({"uppy-Root":e.isTargetDOMEl,"uppy-Dashboard":!0,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>576,"uppy-size--lg":e.containerWidth>700,"uppy-size--xl":e.containerWidth>900,"uppy-size--height-md":e.containerHeight>400,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible}),i=1;e.containerWidth>900?i=5:e.containerWidth>700?i=4:e.containerWidth>576&&(i=3);var o=e.showSelectedFiles&&!t;return __h_140("div",{class:r,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":_$isDragDropSupported_266(),"aria-hidden":e.inline?"false":e.isHidden,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onpaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},__h_140("div",{class:"uppy-Dashboard-overlay",tabindex:-1,onclick:e.handleClickOutside}),__h_140("div",{class:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:__h_140("button",{class:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onclick:e.closeModal},__h_140("span",{"aria-hidden":"true"},"\xd7")),__h_140("div",{class:"uppy-Dashboard-innerWrap"},__h_140("div",{class:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),o&&__h_140(_$PickerPanelTopBar_151,e),o?__h_140(_$FileList_148,___extends_140({},e,{itemsPerRow:i})):__h_140(_$AddFiles_138,___extends_140({},e,{isSizeMD:n})),__h_140(TransitionWrapper,null,e.showAddFilesPanel?__h_140(_$AddFilesPanel_139,___extends_140({key:"AddFilesPanel"},e,{isSizeMD:n})):null),__h_140(TransitionWrapper,null,e.fileCardFor?__h_140(_$FileCard_141,___extends_140({key:"FileCard"},e)):null),__h_140(TransitionWrapper,null,e.activePickerPanel?__h_140(_$PickerPanelContent_150,___extends_140({key:"PickerPanelContent"},e)):null),__h_140("div",{class:"uppy-Dashboard-progressindicators"},e.progressindicators.map(function(t){return e.getPlugin(t.id).render(e.state)})))))},_$StatusBarStates_215={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},_$prettierBytes_217=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i},_$secondsToTime_272={};(function(e){_$secondsToTime_272=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.secondsToTime","fileName":"'+e+'","paramsNumber":1},');var n=Math.floor(t/3600)%24,r=Math.floor(t/60)%60,i=Math.floor(t%60);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.secondsToTime"},'),{hours:n,minutes:r,seconds:i}}}).call(this,"/packages/@uppy/utils/lib/secondsToTime.js");var _$prettyETA_271={};function ___extends_214(){return(___extends_214=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}(function(e){_$prettyETA_271=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.prettyETA","fileName":"'+e+'","paramsNumber":1},');var n=_$secondsToTime_272(t),r=n.hours?n.hours+"h ":"",i=n.hours?("0"+n.minutes).substr(-2):n.minutes,o=i?i+"m":"",s=i?("0"+n.seconds).substr(-2):n.seconds,a=n.hours?"":i?" "+s+"s":s+"s";return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.prettyETA"},'),""+r+o+a}}).call(this,"/node_modules/@uppy/utils/lib/prettyETA.js");var __h_214=_$preact_80.h,_$StatusBar_214=function(e){var t,n,r=e=e||{},i=r.newFiles,o=r.allowNewUpload,s=r.isUploadInProgress,a=r.isAllPaused,u=r.resumableUploads,l=r.error,c=r.hideUploadButton,p=r.hidePauseResumeButton,d=r.hideCancelButton,_=r.hideRetryButton,f=e.uploadState,h=e.totalProgress;if(f===_$StatusBarStates_215.STATE_PREPROCESSING||f===_$StatusBarStates_215.STATE_POSTPROCESSING){var m=function(e){var t=[];Object.keys(e).forEach(function(n){var r=e[n].progress;r.preprocess&&t.push(r.preprocess),r.postprocess&&t.push(r.postprocess)});var n=t[0];return{mode:n.mode,message:n.message,value:t.filter(function(e){return"determinate"===e.mode}).reduce(function(e,t,n,r){return e+t.value/r.length},0)}}(e.files);"determinate"===(t=m.mode)&&(h=100*m.value),n=ProgressBarProcessing(m)}else f===_$StatusBarStates_215.STATE_COMPLETE?n=ProgressBarComplete(e):f===_$StatusBarStates_215.STATE_UPLOADING?(e.supportsUploadProgress||(t="indeterminate",h=null),n=ProgressBarUploading(e)):f===_$StatusBarStates_215.STATE_ERROR&&(h=void 0,n=ProgressBarError(e));var y="number"==typeof h?h:100,g=f===_$StatusBarStates_215.STATE_WAITING&&e.hideUploadButton||f===_$StatusBarStates_215.STATE_WAITING&&!e.newFiles>0||f===_$StatusBarStates_215.STATE_COMPLETE&&e.hideAfterFinish,b=!l&&i&&!s&&!a&&o&&!c,v=!d&&f!==_$StatusBarStates_215.STATE_WAITING&&f!==_$StatusBarStates_215.STATE_COMPLETE,T=u&&!p&&f===_$StatusBarStates_215.STATE_UPLOADING,N=l&&!_,S="uppy-StatusBar-progress\n                           "+(t?"is-"+t:""),C=_$classnames_36({"uppy-Root":e.isTargetDOMEl},"uppy-StatusBar","is-"+f);return __h_214("div",{class:C,"aria-hidden":g},__h_214("div",{class:S,style:{width:y+"%"},role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":h}),n,__h_214("div",{class:"uppy-StatusBar-actions"},b?__h_214(UploadBtn,___extends_214({},e,{uploadState:f})):null,N?__h_214(RetryBtn,e):null,T?__h_214(PauseResumeButton,e):null,v?__h_214(CancelBtn,e):null))},UploadBtn=function(e){var t=_$classnames_36("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":e.uploadState===_$StatusBarStates_215.STATE_WAITING});return __h_214("button",{type:"button",class:t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onclick:e.startUpload,"data-uppy-super-focusable":!0},e.newFiles&&e.isUploadStarted?e.i18n("uploadXNewFiles",{smart_count:e.newFiles}):e.i18n("uploadXFiles",{smart_count:e.newFiles}))},RetryBtn=function(e){return __h_214("button",{type:"button",class:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e.i18n("retryUpload"),onclick:e.retryAll,"data-uppy-super-focusable":!0},__h_214("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"8",height:"10",viewBox:"0 0 8 10"},__h_214("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e.i18n("retry"))},CancelBtn=function(e){return __h_214("button",{type:"button",class:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e.i18n("cancel"),"aria-label":e.i18n("cancel"),onclick:e.cancelAll,"data-uppy-super-focusable":!0},__h_214("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"16",height:"16",viewBox:"0 0 16 16"},__h_214("g",{fill:"none","fill-rule":"evenodd"},__h_214("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),__h_214("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))},PauseResumeButton=function(e){var t=e.isAllPaused,n=(0,e.i18n)(t?"resume":"pause");return __h_214("button",{title:n,"aria-label":n,class:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onclick:function(){return function(e){if(!e.isAllComplete)return e.resumableUploads?e.isAllPaused?e.resumeAll():e.pauseAll():e.cancelAll()}(e)},"data-uppy-super-focusable":!0},__h_214("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"16",height:"16",viewBox:"0 0 16 16"},__h_214("g",{fill:"none","fill-rule":"evenodd"},__h_214("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),__h_214("path",t?{fill:"#FFF",d:"M6 4.25L11.5 8 6 11.75z"}:{d:"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z",fill:"#FFF"}))))},LoadingSpinner=function(){return __h_214("svg",{class:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},__h_214("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0","fill-rule":"evenodd"}))},ProgressBarProcessing=function(e){var t=Math.round(100*e.value);return __h_214("div",{class:"uppy-StatusBar-content"},__h_214(LoadingSpinner,null),"determinate"===e.mode?t+"% \xb7 ":"",e.message)},UnknownProgressDetails=function(e){return __h_214("div",{class:"uppy-StatusBar-statusSecondary"},e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads}))},UploadNewlyAddedFiles=function(e){var t=_$classnames_36("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return __h_214("div",{class:"uppy-StatusBar-statusSecondary"},__h_214("div",{class:"uppy-StatusBar-statusSecondaryHint"},e.i18n("xMoreFilesAdded",{smart_count:e.newFiles})),__h_214("button",{type:"button",class:t,"aria-label":e.i18n("uploadXFiles",{smart_count:e.newFiles}),onclick:e.startUpload},e.i18n("upload")))},ThrottledProgressDetails=_$lodashThrottle_72(function(e){var t=e.numUploads>1;return __h_214("div",{class:"uppy-StatusBar-statusSecondary"},t&&e.i18n("filesUploadedOfTotal",{complete:e.complete,smart_count:e.numUploads}),__h_214("span",{class:"uppy-StatusBar-additionalInfo"},t&&" \xb7 ",e.i18n("dataUploadedOfTotal",{complete:_$prettierBytes_217(e.totalUploadedSize),total:_$prettierBytes_217(e.totalSize)})," \xb7 ",e.i18n("xTimeLeft",{time:_$prettyETA_271(e.totalETA)})))},500,{leading:!0,trailing:!0}),ProgressBarUploading=function(e){if(!e.isUploadStarted||e.isAllComplete)return null;var t=e.isAllPaused?e.i18n("paused"):e.i18n("uploading"),n=e.newFiles&&e.isUploadStarted;return __h_214("div",{class:"uppy-StatusBar-content","aria-label":t,title:t},e.isAllPaused?null:__h_214(LoadingSpinner,null),__h_214("div",{class:"uppy-StatusBar-status"},__h_214("div",{class:"uppy-StatusBar-statusPrimary"},e.supportsUploadProgress?t+": "+e.totalProgress+"%":t),e.isAllPaused||n||!e.showProgressDetails?null:e.supportsUploadProgress?__h_214(ThrottledProgressDetails,e):__h_214(UnknownProgressDetails,e),n?__h_214(UploadNewlyAddedFiles,e):null))},ProgressBarComplete=function(e){e.totalProgress;var t=e.i18n;return __h_214("div",{class:"uppy-StatusBar-content",role:"status",title:t("complete")},__h_214("div",{class:"uppy-StatusBar-status"},__h_214("div",{class:"uppy-StatusBar-statusPrimary"},__h_214("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-StatusBar-statusIndicator UppyIcon",width:"15",height:"11",viewBox:"0 0 15 11"},__h_214("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))},ProgressBarError=function(e){var t=e.error,n=(e.retryAll,e.hideRetryButton,e.i18n);return __h_214("div",{class:"uppy-StatusBar-content",role:"alert",title:n("uploadFailed")},__h_214("div",{class:"uppy-StatusBar-status"},__h_214("div",{class:"uppy-StatusBar-statusPrimary"},__h_214("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-StatusBar-statusIndicator UppyIcon",width:"11",height:"11",viewBox:"0 0 11 11"},__h_214("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),n("uploadFailed"))),__h_214("span",{class:"uppy-StatusBar-details","aria-label":t,"data-microtip-position":"top-right","data-microtip-size":"medium",role:"tooltip",onclick:function(){var e=n("uploadFailed")+" \n\n "+t;alert(e)}},"?"))},_$getSpeed_262={};(function(e){_$getSpeed_262=function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getSpeed","fileName":"'+e+'","paramsNumber":1},'),!t.bytesUploaded)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getSpeed"},'),0;var n=new Date-t.uploadStarted,r=t.bytesUploaded/(n/1e3);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getSpeed"},'),r}}).call(this,"/node_modules/@uppy/utils/lib/getSpeed.js");var _$getBytesRemaining_252={};(function(e){_$getBytesRemaining_252=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getBytesRemaining","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getBytesRemaining"},'),t.bytesTotal-t.bytesUploaded}}).call(this,"/node_modules/@uppy/utils/lib/getBytesRemaining.js");var _$package_218={version:"1.6.6"},___class_216,___temp_216;function ___extends_216(){return(___extends_216=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_216=_$lib_133.Plugin,_$lib_216=(___temp_216=___class_216=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).startUpload=function(){return r.uppy.upload().catch(function(){})},r.id=r.opts.id||"StatusBar",r.title="StatusBar",r.type="progressindicator",r.defaultLocale={strings:{uploading:"Uploading",upload:"Upload",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"}}},r.opts=___extends_216({},{target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0},{},n),r.i18nInit(),r.render=r.render.bind(_assertThisInitialized(r)),r.install=r.install.bind(_assertThisInitialized(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},i.getTotalSpeed=function(e){var t=0;return e.forEach(function(e){t+=_$getSpeed_262(e.progress)}),t},i.getTotalETA=function(e){var t=this.getTotalSpeed(e);if(0===t)return 0;var n=e.reduce(function(e,t){return e+_$getBytesRemaining_252(t.progress)},0);return Math.round(n/t*10)/10},i.getUploadingState=function(e,t,n){if(e)return _$StatusBarStates_215.STATE_ERROR;if(t)return _$StatusBarStates_215.STATE_COMPLETE;for(var r=_$StatusBarStates_215.STATE_WAITING,i=Object.keys(n),o=0;o<i.length;o++){var s=n[i[o]].progress;if(s.uploadStarted&&!s.uploadComplete)return _$StatusBarStates_215.STATE_UPLOADING;s.preprocess&&r!==_$StatusBarStates_215.STATE_UPLOADING&&(r=_$StatusBarStates_215.STATE_PREPROCESSING),s.postprocess&&r!==_$StatusBarStates_215.STATE_UPLOADING&&r!==_$StatusBarStates_215.STATE_PREPROCESSING&&(r=_$StatusBarStates_215.STATE_POSTPROCESSING)}return r},i.render=function(e){var t=e.capabilities,n=e.files,r=e.allowNewUpload,i=e.totalProgress,o=e.error,s=Object.keys(n).map(function(e){return n[e]}),a=s.filter(function(e){return!e.progress.uploadStarted&&!e.progress.preprocess&&!e.progress.postprocess}),u=s.filter(function(e){return e.progress.uploadStarted}).filter(function(e){return e.isPaused}),l=s.filter(function(e){return e.progress.uploadComplete}),c=s.filter(function(e){return e.error}),p=s.filter(function(e){return!e.progress.uploadComplete&&e.progress.uploadStarted}),d=p.filter(function(e){return!e.isPaused}),_=s.filter(function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess}),f=s.filter(function(e){return e.progress.preprocess||e.progress.postprocess}),h=this.getTotalETA(d),m=0,y=0;_.forEach(function(e){m+=e.progress.bytesTotal||0,y+=e.progress.bytesUploaded||0});var g=_.length>0,b=100===i&&l.length===Object.keys(n).length&&0===f.length,v=o&&c.length===s.length,T=0!==p.length&&u.length===p.length,N=p.length>0,S=t.resumableUploads||!1,C=!1!==t.uploadProgress;return _$StatusBar_214({error:o,uploadState:this.getUploadingState(v,b,e.files||{}),allowNewUpload:r,totalProgress:i,totalSize:m,totalUploadedSize:y,isAllComplete:b,isAllPaused:T,isAllErrored:v,isUploadStarted:g,isUploadInProgress:N,complete:l.length,newFiles:a.length,numUploads:_.length,totalETA:h,files:n,i18n:this.i18n,pauseAll:this.uppy.pauseAll,resumeAll:this.uppy.resumeAll,retryAll:this.uppy.retryAll,cancelAll:this.uppy.cancelAll,startUpload:this.startUpload,resumableUploads:S,supportsUploadProgress:C,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})},i.install=function(){var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.unmount()},r}(__Plugin_216),___class_216.VERSION=_$package_218.version,___temp_216),_$package_184={version:"1.5.6"},___class_183,___temp_183;function ___extends_183(){return(___extends_183=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __Plugin_183=_$lib_133.Plugin,__h_183=_$preact_80.h,_$lib_183=(___temp_183=___class_183=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).render=function(e){var t=e.info,n=t.isHidden,i=t.message,o=t.details;return __h_183("div",{class:"uppy uppy-Informer","aria-hidden":n},__h_183("p",{role:"alert"},i," ",o&&__h_183("span",{"aria-label":o,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onclick:function(){alert(i+" \n\n "+o)},onMouseOver:function(){clearTimeout(r.uppy.infoTimeoutID)},onMouseLeave:function(){r.uppy.infoTimeoutID=setTimeout(r.uppy.hideInfo,2e3)}},"?")))},r.type="progressindicator",r.id=r.opts.id||"Informer",r.title="Informer",r.opts=___extends_183({},{},n),r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.install=function(){var e=this.opts.target;e&&this.mount(e,this)},r}(__Plugin_183),___class_183.VERSION=_$package_184.version,___temp_183),_$dataURItoBlob_247={};(function(e){_$dataURItoBlob_247=function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.dataURItoBlob","fileName":"'+e+'","paramsNumber":3},');var i=t.split(",")[1],o=n.mimeType||t.split(",")[0].split(":")[1].split(";")[0];null==o&&(o="plain/text");for(var s,a=atob(i),u=[],l=0;l<a.length;l++)u.push(a.charCodeAt(l));try{s=new Uint8Array(u)}catch(err){return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.dataURItoBlob"},'),null}return r?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.dataURItoBlob"},'),new File([s],n.name||"",{type:o})):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.dataURItoBlob"},'),new Blob([s],{type:o}))}}).call(this,"/node_modules/@uppy/utils/lib/dataURItoBlob.js");var _$isObjectURL_268={};(function(e){_$isObjectURL_268=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.isObjectURL","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.isObjectURL"},'),0===t.indexOf("blob:")}}).call(this,"/node_modules/@uppy/utils/lib/isObjectURL.js");for(var _$mathLog2_73=Math.log2||function(e){return Math.log(e)*Math.LOG2E},_$base64Js_32={toByteArray:function(e){var t,n,r=getLens(e),i=r[0],o=r[1],s=new Arr(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),a=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=revLookup[e.charCodeAt(n)]<<18|revLookup[e.charCodeAt(n+1)]<<12|revLookup[e.charCodeAt(n+2)]<<6|revLookup[e.charCodeAt(n+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===o&&(t=revLookup[e.charCodeAt(n)]<<2|revLookup[e.charCodeAt(n+1)]>>4,s[a++]=255&t),1===o&&(t=revLookup[e.charCodeAt(n)]<<10|revLookup[e.charCodeAt(n+1)]<<4|revLookup[e.charCodeAt(n+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(encodeChunk(e,o,o+16383>s?s:o+16383));return 1===r?(t=e[n-1],i.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),i.join("")}},lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function encodeChunk(e,t,n){for(var r,i,o=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(lookup[(i=r)>>18&63]+lookup[i>>12&63]+lookup[i>>6&63]+lookup[63&i]);return o.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var _$ieee754_67={read:function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,c=-7,p=n?i-1:0,d=n?-1:1,_=e[t+p];for(p+=d,o=_&(1<<-c)-1,_>>=-c,c+=a;c>0;o=256*o+e[t+p],p+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+e[t+p],p+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(_?-1:1);s+=Math.pow(2,r),o-=l}return(_?-1:1)*s*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,p=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,_=r?0:o-1,f=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+p>=1?d/u:d*Math.pow(2,1-p))*u>=2&&(s++,u/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(t*u-1)*Math.pow(2,i),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,i),s=0));i>=8;e[n+_]=255&a,_+=f,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;e[n+_]=255&s,_+=f,s/=256,l-=8);e[n+_-f]|=128*h}},_$miniLegacyUmd_224={exports:{}};(function(e,t,n){var r,i;r=this,i=function(r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});var n=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(t).forEach(function(r){-1===n.indexOf(r)&&e[r]!==t[r]&&(e[r]=t[r])}),t&&c(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n){return(p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return p(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_(e):t}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var m=Object.values||function(e){var t=[];for(var n in e)t.push(e[n]);return t},y=Object.entries||function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t},g=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach(function(t){for(var n in t)e[n]=t[n]}),e},b=Object.fromEntries||function(e){var t={};return v(e).forEach(function(e){var n=e[0],r=e[1];t[n]=r}),t},v=Array.from||function(e){if(e instanceof R){var t=[];return e.forEach(function(e,n){return t.push([n,e])}),t}return Array.prototype.slice.call(e)};function T(e){return-1!==this.indexOf(e)}Array.prototype.includes||(Array.prototype.includes=T),String.prototype.includes||(String.prototype.includes=T),String.prototype.startsWith||(String.prototype.startsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.substring(t,t+e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this.substring(t-e.length,t)===e});var N="undefined"!=typeof self?self:t,S=N.fetch||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){var i=new XMLHttpRequest;if(i.open("get",e,!0),i.responseType="arraybuffer",i.onerror=r,t.headers)for(var o in t.headers)i.setRequestHeader(o,t.headers[o]);i.onload=function(){n({ok:i.status>=200&&i.status<300,status:i.status,arrayBuffer:function(){return Promise.resolve(i.response)}})},i.send(null)})},C=function(e){var t=[];if(Object.defineProperties(t,{size:{get:function(){return this.length}},has:{value:function(e){return-1!==this.indexOf(e)}},add:{value:function(e){this.has(e)||this.push(e)}},delete:{value:function(e){if(this.has(e)){var t=this.indexOf(e);this.splice(t,1)}}}}),Array.isArray(e))for(var n=0;n<e.length;n++)t.add(e[n]);return t},w=function(e){return new R(e)},R=void 0!==N.Map&&void 0!==N.Map.prototype.keys?N.Map:function(){function e(t){if(i(this,e),this.clear(),t)for(var n=0;n<t.length;n++)this.set(t[n][0],t[n][1])}return s(e,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"get",value:function(e){return this._map["map_"+e]}},{key:"set",value:function(e,t){return this._map["map_"+e]=t,this._keys.indexOf(e)<0&&this._keys.push(e),this}},{key:"has",value:function(e){return this._keys.indexOf(e)>=0}},{key:"delete",value:function(e){var t=this._keys.indexOf(e);return!(t<0||(delete this._map["map_"+e],this._keys.splice(t,1),0))}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var e=this;return this._keys.map(function(t){return e.get(t)})}},{key:"entries",value:function(){var e=this;return this._keys.map(function(t){return[t,e.get(t)]})}},{key:"forEach",value:function(e,t){for(var n=0;n<this._keys.length;n++)e.call(t,this._map["map_"+this._keys[n]],this._keys[n],this)}},{key:"size",get:function(){return this._keys.length}}]),e}(),$="undefined"!=typeof self?self:t,F="undefined"!=typeof navigator,O=F&&"undefined"==typeof HTMLImageElement,E=!(void 0===t||void 0===e||!e.versions||!e.versions.node),I=$.Buffer,U=$.BigInt,A=!!I,k=function(e){return void 0!==e};function P(e){return void 0===e||(e instanceof R?0===e.size:0===m(e).filter(k).length)}function D(e){var t=new Error(e);return delete t.stack,t}function x(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var B="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0,M=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(i(this,e),"boolean"==typeof o&&(this.le=o),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===r&&(r=t.byteLength-n);var s=new DataView(t,n,r);this._swapDataView(s)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof e){if(void 0===r&&(r=t.byteLength-n),(n+=t.byteOffset)+r>t.byteOffset+t.byteLength)throw D("Creating view outside of available memory in ArrayBuffer");var a=new DataView(t.buffer,n,r);this._swapDataView(a)}else{if("number"!=typeof t)throw D("Invalid input argument for BufferView: "+t);var u=new DataView(new ArrayBuffer(t));this._swapDataView(u)}}return s(e,null,[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),s(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),!(t instanceof Uint8Array))throw D("BufferView.set(): Invalid data argument.");return this.toUint8().set(t,n),new r(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength;return function(e){return B?B.decode(e):A?n.from(e).toString("utf8"):decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}(this.getUint8Array(e,t))}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],r=0;r<t&&e+r<this.byteLength;r+=2)n.push(this.getUint16(e+r));return n.map(function(e){return String.fromCharCode(e)}).join("")}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}},{key:"getInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}},{key:"getUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}},{key:"getUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}},{key:"getFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getFloat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getDouble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getUint64",value:function(e){var t=this.getUint32(e),n=this.getUint32(e+4);if(t<1048575)return t<<32|n;if(void 0!==typeof U)return console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),U(t)<<U(32)|U(n);throw D("Trying to read 64b value but JS can only handle 53b numbers.")}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}]),e}();function L(e,t){throw D("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var j=function(e){function t(e){var n;return i(this,t),(n=f(this,l(t).call(this))).kind=e,n}return u(t,d(R)),s(t,[{key:"get",value:function(e,n){return this.has(e)||L(this.kind,e),n&&(e in n||function(e,t){throw D("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),n[e].enabled||L(this.kind,e)),h(l(t.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return v(this.keys())}}]),t}(),z=new j("file parser"),K=new j("segment parser"),q=new j("file reader");function H(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function V(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var W=H(function(e){return new Promise(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result||new ArrayBuffer)},r.onerror=n,r.readAsArrayBuffer(e)})}),X=H(function(e){return S(e).then(function(e){return e.arrayBuffer()})}),G=H(function(e,t){return V(t(e),function(e){return new M(e)})}),Y=H(function(e,t,n){var r=new(q.get(n))(e,t);return V(r.read(),function(){return r})}),J=H(function(e,t,n,r){if(q.has(n))return Y(e,t,n);if(r)return G(e,r);throw D("Parser ".concat(n," is not loaded"))});function Q(e,t){if((n=e).startsWith("data:")||n.length>1e4)return Y(e,t,"base64");if(F)return J(e,t,"url",X);if(E)return Y(e,t,"fs");throw D("Invalid input argument");var n}var Z=function(e){function t(){return i(this,t),f(this,l(t).apply(this,arguments))}return u(t,d(R)),s(t,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=v(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=v(this.values())),this.allValues}}]),t}();function ee(e,t,n){var r=new Z,i=n;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=v(i));for(var o=0;o<i.length;o++){var s=i[o],a=s[0],u=s[1];r.set(a,u)}if(Array.isArray(t)){var l=t;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=v(l));for(var c=0;c<l.length;c++){var p=l[c];e.set(p,r)}}else e.set(t,r);return r}function te(e,t,n){var r,i=e.get(t),o=n;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=v(o));for(var s=0;s<o.length;s++)r=o[s],i.set(r[0],r[1])}var ne=w(),re=w(),ie=w(),oe=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],se=["jfif","xmp","icc","iptc"],ae=["tiff"].concat(se),ue=["ifd0","ifd1","exif","gps","interop"],le=[].concat(ae,ue),ce=["makerNote","userComment"],pe=["translateKeys","translateValues","reviveValues","multiSegment"],de=[].concat(pe,["sanitize","mergeOutput"]),_e=function(){function e(){i(this,e)}return s(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),fe=function(e){function t(e,n,r,o){var s;if(i(this,t),a(_(s=f(this,l(t).call(this))),"enabled",!1),a(_(s),"skip",C()),a(_(s),"pick",C()),a(_(s),"deps",C()),a(_(s),"translateKeys",!1),a(_(s),"translateValues",!1),a(_(s),"reviveValues",!1),s.key=e,s.enabled=n,s.parse=s.enabled,s.applyInheritables(o),s.canBeFiltered=ue.includes(e),s.canBeFiltered&&(s.dict=ne.get(e)),void 0!==r)if(Array.isArray(r))s.parse=s.enabled=!0,s.canBeFiltered&&r.length>0&&s.translateTagSet(r,s.pick);else if("object"==typeof r){if(s.enabled=!0,s.parse=!1!==r.parse,s.canBeFiltered){var u=r.pick,c=r.skip;u&&u.length>0&&s.translateTagSet(u,s.pick),c&&c.length>0&&s.translateTagSet(c,s.skip)}s.applyInheritables(r)}else{if(!0!==r&&!1!==r)throw D("Invalid options argument: ".concat(r));s.parse=s.enabled=r}return s}return u(t,_e),s(t,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}}]),s(t,[{key:"applyInheritables",value:function(e){var t,n,r=pe;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=v(r));for(var i=0;i<r.length;i++)void 0!==(n=e[t=r[i]])&&(this[t]=n)}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,r,i=this.dict,o=i.tagKeys,s=i.tagValues,a=e;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=v(a));for(var u=0;u<a.length;u++)"string"==typeof(n=a[u])?(-1===(r=s.indexOf(n))&&(r=o.indexOf(Number(n))),-1!==r&&t.add(Number(o[r]))):t.add(n)}else{var l=e;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=v(l));for(var c=0;c<l.length;c++){var p=l[c];t.add(p)}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ve(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ve(this.pick,this.deps)}}]),t}(),he={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},me=w(),ye=function(e){function t(e){var n;if(i(this,t),n=f(this,l(t).call(this)),!0===e)n.setupFromTrue();else if(void 0===e)n.setupFromUndefined();else if(Array.isArray(e))n.setupFromArray(e);else{if("object"!=typeof e)throw D("Invalid options argument ".concat(e));n.setupFromObject(e)}return void 0===n.firstChunkSize&&(n.firstChunkSize=F?n.firstChunkSizeBrowser:n.firstChunkSizeNode),n.mergeOutput&&(n.ifd1.enabled=!1),n.filterNestedSegmentTags(),n.traverseTiffDependencyTree(),n.checkLoadedPlugins(),n}return u(t,_e),s(t,null,[{key:"useCached",value:function(e){var t=me.get(e);return void 0!==t?t:(t=new this(e),me.set(e,t),t)}}]),s(t,[{key:"setupFromUndefined",value:function(){var e,t=oe;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=v(t));for(var n=0;n<t.length;n++)this[e=t[n]]=he[e];var r=de;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=v(r));for(var i=0;i<r.length;i++)this[e=r[i]]=he[e];var o=ce;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=v(o));for(var s=0;s<o.length;s++)this[e=o[s]]=he[e];var a=le;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=v(a));for(var u=0;u<a.length;u++)this[e=a[u]]=new fe(e,he[e],void 0,this)}},{key:"setupFromTrue",value:function(){var e,t=oe;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=v(t));for(var n=0;n<t.length;n++)this[e=t[n]]=he[e];var r=de;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=v(r));for(var i=0;i<r.length;i++)this[e=r[i]]=he[e];var o=ce;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=v(o));for(var s=0;s<o.length;s++)this[e=o[s]]=!0;var a=le;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=v(a));for(var u=0;u<a.length;u++)this[e=a[u]]=new fe(e,!0,void 0,this)}},{key:"setupFromArray",value:function(e){var t,n=oe;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++)this[t=n[r]]=he[t];var i=de;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=v(i));for(var o=0;o<i.length;o++)this[t=i[o]]=he[t];var s=ce;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=v(s));for(var a=0;a<s.length;a++)this[t=s[a]]=he[t];var u=le;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=v(u));for(var l=0;l<u.length;l++)this[t=u[l]]=new fe(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,ue)}},{key:"setupFromObject",value:function(e){var t;ue.ifd0=ue.ifd0||ue.image,ue.ifd1=ue.ifd1||ue.thumbnail,g(this,e);var n=oe;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++)this[t=n[r]]=be(e[t],he[t]);var i=de;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=v(i));for(var o=0;o<i.length;o++)this[t=i[o]]=be(e[t],he[t]);var s=ce;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=v(s));for(var a=0;a<s.length;a++)this[t=s[a]]=be(e[t],he[t]);var u=ae;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=v(u));for(var l=0;l<u.length;l++)this[t=u[l]]=new fe(t,he[t],e[t],this);var c=ue;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=v(c));for(var p=0;p<c.length;p++)this[t=c[p]]=new fe(t,he[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ue,le),!0===e.tiff?this.batchEnableWithBool(ue,!0):!1===e.tiff?this.batchEnableWithUserValue(ue,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ue):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ue)}},{key:"batchEnableWithBool",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++)this[n[r]].enabled=t}},{key:"batchEnableWithUserValue",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++){var i=n[r],o=t[i];this[i].enabled=!1!==o&&void 0!==o}}},{key:"setupGlobalFilters",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){var i=r;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=v(i));for(var o=0;o<i.length;o++)this[i[o]].enabled=!1;var s=ge(e,n);Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=v(s));for(var a=0;a<s.length;a++){var u=s[a],l=u[0],c=u[1];ve(this[l].pick,c),this[l].enabled=!0}}else if(t&&t.length){var p=ge(t,n);Array.isArray(p)||("function"==typeof p.entries&&(p=p.entries()),p=v(p));for(var d=0;d<p.length;d++){var _=p[d],f=_[0],h=_[1];ve(this[f].skip,h)}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,r=this.iptc,i=this.icc;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,r=this.gps;this.interop.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),r.needed&&t.deps.add(34853),this.tiff.enabled=ue.some(function(t){return!0===e[t].enabled})||this.makerNote||this.userComment;var i=ue;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=v(i));for(var o=0;o<i.length;o++)this[i[o]].finalizeFilters()}},{key:"checkLoadedPlugins",value:function(){var e=ae;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=v(e));for(var t=0;t<e.length;t++){var n=e[t];this[n].enabled&&!K.has(n)&&L("segment parser",n)}}},{key:"onlyTiff",get:function(){var e=this;return!se.map(function(t){return e[t].enabled}).some(function(e){return!0===e})&&this.tiff.enabled}}]),t}();function ge(e,t){var n,r,i,o=[],s=t;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=v(s));for(var a=0;a<s.length;a++){r=s[a],n=[];var u=ne.get(r);Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=v(u));for(var l=0;l<u.length;l++)i=u[l],(e.includes(i[0])||e.includes(i[1]))&&n.push(i[0]);n.length&&o.push([r,n])}return o}function be(e,t){return void 0!==e?e:void 0!==t?t:void 0}function ve(e,t){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++){var i=n[r];e.add(i)}}a(ye,"default",he);var Te={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Ne=g({},Te,{firstChunkSize:4e4,gps:[1,2,3,4]}),Se=g({},Te,{firstChunkSize:4e4,ifd0:[274]}),Ce=g({},Te,{tiff:!1,ifd1:!0,mergeOutput:!1});function we(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Re(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function $e(){}var Fe=function(){function e(t){i(this,e),a(this,"parsers",{}),this.options=ye.useCached(t)}return s(e,[{key:"setup",value:function(){if(!this.fileParser){var e,t=this.file.getUint16(0);if(18761===t||19789===t)this.file.isTiff=!0,e=z.get("tiff");else if(65496===t)this.file.isJpeg=!0,e=z.get("jpeg");else{if(!function(e){if(0!==e.getUint16(0))return!1;var t=e.getUint16(2);if(t>50)return!1;for(var n=16,r=[];n<t;)r.push(e.getString(n,4)),n+=4;return r.includes("heic")}(this.file))throw D("Unknown file format");this.file.isHeic=!0,e=z.get("heic")}this.fileParser=new e(this.options,this.file,this.parsers)}}},{key:"read",value:function(e){try{var t=this;return we(function(e,t){if("string"==typeof e)return Q(e,t);if(F&&!O&&e instanceof HTMLImageElement)return Q(e.src,t);if(e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView)return new M(e);if(F&&e instanceof Blob)return J(e,t,"blob",W);throw D("Invalid input argument")}(e,t.options),function(e){t.file=e})}catch(e){return Promise.reject(e)}}},{key:"parse",value:function(){try{var e=this;return e.setup(),we(e.fileParser.parse(),function(){var t,n={},r=[],i=m(e.parsers).map((t=function(t){var i;return Re(function(){return e.options.silentErrors?(o=function(){t.errors.length&&r.push.apply(r,t.errors)},(n=function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return we(t.parse(),function(e){i=e})},function(e){r.push(e)}))&&n.then?n.then(o):o()):we(t.parse(),function(e){i=e});var n,o},function(){t.assignToOutput(n,i)})},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(e){return Promise.reject(e)}}));return we(Promise.all(i),function(){var t;return e.options.silentErrors&&r.length>0&&(n.errors=r),n=P(t=n)?void 0:t,e.file.close&&e.file.close(),n})})}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;e.setup();var t,n=K.get("tiff",e.options);return Re(function(){if(!e.file.isTiff)return function(e){var t=e();if(t&&t.then)return t.then($e)}(function(){if(e.file.isJpeg)return we(e.fileParser.getOrFindSegment("tiff"),function(e){t=e})});t={start:0,type:"tiff"}},function(){if(void 0!==t)return we(e.fileParser.ensureSegmentChunk(t),function(t){return we((e.parsers.tiff=new n(t,e.options,e.file)).extractThumbnail(),function(t){return e.file.close&&e.file.close(),t})})})}catch(e){return Promise.reject(e)}}}]),e}();function Oe(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ee(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var Ie=function(e){return Oe(Ue(e),function(e){return g({canvas:r.rotateCanvas,css:r.rotateCss},xe[e])})},Ue=Ee(function(e){var t=new Fe(Se);return Oe(t.read(e),function(){return Oe(t.parse(),function(e){if(e&&e.ifd0)return e.ifd0[274]})})}),Ae=Ee(function(e){var t=new Fe(Ne);return Oe(t.read(e),function(){return Oe(t.parse(),function(e){if(e&&e.gps){var t=e.gps;return{latitude:t.latitude,longitude:t.longitude}}})})}),ke=Ee(function(e){return Oe(this.thumbnail(e),function(e){if(void 0!==e){var t=new Blob([e]);return URL.createObjectURL(t)}})}),Pe=Ee(function(e){var t=new Fe(Ce);return Oe(t.read(e),function(){return Oe(t.extractThumbnail(),function(e){return e&&A?I.from(e):e})})}),De=Ee(function(e,t){var n=new Fe(t);return Oe(n.read(e),function(){return n.parse()})}),xe={1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}};if(r.rotateCanvas=!0,r.rotateCss=!0,"object"==typeof navigator){var Be=navigator.userAgent;if(Be.includes("iPad")||Be.includes("iPhone")){var Me=Be.match(/OS (\d+)_(\d+)/),Le=(Me[0],Me[1]),je=Me[2],ze=Number(Le)+.1*Number(je);r.rotateCanvas=ze<13.4,r.rotateCss=!1}}var Ke=Object.freeze({__proto__:null,rotation:Ie,orientation:Ue,gps:Ae,thumbnailUrl:ke,thumbnail:Pe,parse:De,rotations:xe,get rotateCanvas(){return r.rotateCanvas},get rotateCss(){return r.rotateCss},Exifr:Fe,fileParsers:z,segmentParsers:K,fileReaders:q,tagKeys:ne,tagValues:re,tagRevivers:ie,createDictionary:ee,extendDictionary:te,fetchUrlAsArrayBuffer:X,readBlobAsArrayBuffer:W,chunkedProps:oe,otherSegments:se,segments:ae,tiffBlocks:ue,segmentsAndBlocks:le,tiffExtractables:ce,inheritables:pe,allFormatters:de,Options:ye,disableAllOptions:Te,gpsOnlyOptions:Ne,orientationOnlyOptions:Se,thumbnailOnlyOptions:Ce});function qe(){}var He=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return a(_(n=f(this,(e=l(t)).call.apply(e,[this].concat(o)))),"ranges",new Ve),0!==n.byteLength&&n.ranges.add(0,n.byteLength),n}return u(t,M),s(t,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var r=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(r)}else{var i=e+t;if(i>this.byteLength){var o=this._extend(i).dataView;this._swapDataView(o)}}}},{key:"_extend",value:function(e){var t;t=A?I.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n=n||this._lengthToEnd(e),r&&this._tryExtend(e,n),this.ranges.add(e,n),h(l(t.prototype),"subarray",this).call(this,e,n)}},{key:"set",value:function(e,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(n,e.byteLength,e);var r=h(l(t.prototype),"set",this).call(this,e,n);return this.ranges.add(n,r.byteLength),r}},{key:"ensureChunk",value:function(e,t){try{if(!this.chunked)return;if(this.ranges.available(e,t))return;return function(e,t){return e&&e.then?e.then(qe):Promise.resolve()}(this.readChunk(e,t))}catch(e){return Promise.reject(e)}}},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),t}(),Ve=function(){function e(){i(this,e),a(this,"list",[])}return s(e,[{key:"add",value:function(e,t){var n=e+t,r=this.list.filter(function(t){return We(e,t.offset,n)||We(e,t.end,n)});if(r.length>0){e=Math.min.apply(Math,[e].concat(r.map(function(e){return e.offset}))),t=(n=Math.max.apply(Math,[n].concat(r.map(function(e){return e.end}))))-e;var i=r.shift();i.offset=e,i.length=t,i.end=n,this.list=this.list.filter(function(e){return!r.includes(e)})}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some(function(t){return t.offset<=e&&n<=t.end})}},{key:"length",get:function(){return this.list.length}}]),e}();function We(e,t,n){return e<=t&&t<=n}function Xe(){}function Ge(e,t){if(!t)return e&&e.then?e.then(Xe):Promise.resolve()}function Ye(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Je=function(e){function t(){return i(this,t),f(this,l(t).apply(this,arguments))}return u(t,e),s(t,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,Ye(W(e.input),function(t){e._swapArrayBuffer(t)})}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,h(l(t.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(e,t){try{var n=this,r=t?e+t:void 0,i=n.input.slice(e,r);return Ye(W(i),function(t){return n.set(t,e,!0)})}catch(e){return Promise.reject(e)}}}]),t}(function(e){function t(e,n){var r;return i(this,t),a(_(r=f(this,l(t).call(this,0))),"chunksRead",0),r.input=e,r.options=n,r}return u(t,He),s(t,[{key:"readWhole",value:function(){try{return this.chunked=!1,Ge(this.readChunk(this.nextChunkOffset))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){try{return this.chunked=!0,Ge(this.readChunk(0,this.options.firstChunkSize))}catch(e){return Promise.reject(e)}}},{key:"readNextChunk",value:function(e){try{if(void 0===e&&(e=this.nextChunkOffset),this.fullyRead)return this.chunksRead++,!1;var t=this.options.chunkSize;return n=this.readChunk(e,t),r=function(e){return!!e&&e.byteLength===t},n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n}catch(e){return Promise.reject(e)}var n,r}},{key:"readChunk",value:function(e,t){try{if(this.chunksRead++,0===(t=this.safeWrapAddress(e,t)))return;return this._readChunk(e,t)}catch(e){return Promise.reject(e)}}},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}}]),t}());q.set("blob",Je);var Qe=function(){function e(t,n,r){var o,s=this;i(this,e),a(this,"ensureSegmentChunk",(o=function(e){var t,n,r,i=e.start,o=e.size||65536;return t=function(){if(s.file.chunked)return function(){if(!s.file.available(i,o))return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return n=function(t){e.chunk=t},(t=s.file.readChunk(i,o))&&t.then||(t=Promise.resolve(t)),n?t.then(n):t;var t,n},function(t){throw D("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))});e.chunk=s.file.subarray(i,o)}();if(s.file.byteLength>i+o)e.chunk=s.file.subarray(i,o);else{if(void 0!==e.size)throw D("Segment unreachable: "+JSON.stringify(e));e.chunk=s.file.subarray(i)}},n=function(t){return e.chunk},(r=t())&&r.then?r.then(n):n()},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(o.apply(this,e))}catch(e){return Promise.reject(e)}})),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=r}return s(e,[{key:"createParser",value:function(e,t){var n=new(K.get(e))(t,this.options,this.file);return this.parsers[e]=n}}]),e}(),Ze=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;i(this,e),a(this,"errors",[]),a(this,"raw",w()),a(this,"handleError",function(e){if(!n.options.silentErrors)throw e;n.errors.push(e.message)}),this.chunk=this.normalizeInput(t),this.file=o,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return s(e,[{key:"normalizeInput",value:function(e){return e instanceof M?e:new M(e)}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,i=t+r,o=n-r;return{offset:t,length:n,headerLength:r,start:i,size:o,end:i+o}}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new ye(a({},this.type,t))).parse()}}]),s(e,[{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"translateBlock",value:function(e,t){var n=ie.get(t),r=re.get(t),i=ne.get(t),o=this.options[t],s=o.reviveValues&&!!n,a=o.translateValues&&!!r,u=o.translateKeys&&!!i,l={},c=e;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=v(c));for(var p=0;p<c.length;p++){var d=c[p],_=d[0],f=d[1];s&&n.has(_)?f=n.get(_)(f):a&&r.has(_)&&(f=this.translateValue(f,r.get(_))),u&&i.has(_)&&(_=i.get(_)||_),l[_]=f}return l}},{key:"translateValue",value:function(e,t){return t[e]||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return g(e,n);e[t]?g(e[t],n):e[t]=n}},{key:"output",get:function(){return this.translated?this.translated:this.raw?b(this.raw):void 0}}]),e}();function et(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function tt(){}function nt(e,t){if(!t)return e&&e.then?e.then(tt):Promise.resolve()}function rt(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function it(e,t,n){if(!e.s){if(n instanceof ot){if(!n.s)return void(n.o=it.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(it.bind(null,e,t),it.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}a(Ze,"headerLength",4),a(Ze,"type",void 0),a(Ze,"multiSegment",!1),a(Ze,"canHandle",function(){return!1});var ot=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var o=1&i?t:n;if(o){try{it(r,1,o(this.v))}catch(e){it(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?it(r,1,t?t(i):i):n?it(r,1,n(i)):it(r,2,i)}catch(e){it(r,2,e)}},r},e}();function st(e){return e instanceof ot&&1&e.s}function at(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function ut(e){return e>=224&&e<=239}function lt(e,t){var n=K;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++){var i=n[r],o=i[0];if(i[1].canHandle(e,t))return o}}var ct=function(e){function t(){var e,n;i(this,t);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return a(_(n=f(this,(e=l(t)).call.apply(e,[this].concat(o)))),"appSegments",[]),a(_(n),"jpegSegments",[]),a(_(n),"unknownSegments",[]),n}return u(t,Qe),s(t,[{key:"parse",value:function(){try{var e=this;return et(e.findAppSegments(),function(){return et(e.readSegments(),function(){e.mergeMultiSegments(),e.createParsers()})})}catch(e){return Promise.reject(e)}}},{key:"readSegments",value:function(){try{var e=this.appSegments.map(this.ensureSegmentChunk);return nt(Promise.all(e))}catch(e){return Promise.reject(e)}}},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=C(K.keyList())):(e=void 0===e?K.keyList().filter(function(e){return t.options[e].enabled}):e.filter(function(e){return t.options[e].enabled&&K.has(e)}),this.findAll=!1,this.remaining=C(e),this.wanted=C(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;try{var n=this;n.setupSegmentFinderArgs(t);var r=n.file,i=n.findAll,o=n.wanted,s=n.remaining;return rt(function(){if(!i&&n.file.chunked)return i=v(o).some(function(e){var t=K.get(e),r=n.options[e];return t.multiSegment&&r.multiSegment}),function(e){var t=function(){if(i)return nt(n.file.readWhole())}();if(t&&t.then)return t.then(tt)}()},function(){var t=!1;if(e=n._findAppSegments(e,r.byteLength,i,o,s),!n.options.onlyTiff)return function(){if(r.chunked){var i=!1;return function(e,t,n){for(var r;;){var i=e();if(st(i)&&(i=i.v),!i)return o;if(i.then){r=0;break}var o=n();if(o&&o.then){if(!st(o)){r=1;break}o=o.s}if(t){var s=t();if(s&&s.then&&!st(s)){r=2;break}}}var a=new ot,u=it.bind(null,a,2);return(0===r?i.then(c):1===r?o.then(l):s.then(p)).then(void 0,u),a;function l(r){o=r;do{if(t&&(s=t())&&s.then&&!st(s))return void s.then(p).then(void 0,u);if(!(i=e())||st(i)&&!i.v)return void it(a,1,o);if(i.then)return void i.then(c).then(void 0,u);st(o=n())&&(o=o.v)}while(!o||!o.then);o.then(l).then(void 0,u)}function c(e){e?(o=n())&&o.then?o.then(l).then(void 0,u):l(o):it(a,1,o)}function p(){(i=e())?i.then?i.then(c).then(void 0,u):c(i):it(a,1,o)}}(function(){return!t&&s.size>0&&!i&&(!!r.canReadNextChunk||!!n.unfinishedMultiSegment)},void 0,function(){var o=r.nextChunkOffset,s=n.appSegments.some(function(e){return!n.file.available(e.offset||e.start,e.length||e.size)});return rt(function(){return et(e>o&&!s?r.readNextChunk(e):r.readNextChunk(o),function(e){i=!e})},function(){void 0===(e=n._findAppSegments(e,r.byteLength))&&(t=!0)})})}}()})}catch(e){return Promise.reject(e)}}},{key:"_findAppSegments",value:function(e,t){for(var n,r,i,o,s,a,u=this.file,l=this.findAll,c=this.wanted,p=this.remaining,d=this.options;e<t;e++)if(255===u.getUint8(e))if(ut(n=u.getUint8(e+1))){if(r=u.getUint16(e+2),(i=lt(u,e))&&c.has(i)&&(s=(o=K.get(i)).findPosition(u,e),a=d[i],s.type=i,this.appSegments.push(s),!l&&(o.multiSegment&&a.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||p.delete(i)):p.delete(i),0===p.size)))break;d.recordUnknownSegments&&((s=Ze.findPosition(u,e)).marker=n,this.unknownSegments.push(s)),e+=r+1}else if(at(n)){if(r=u.getUint16(e+2),218===n&&!1!==d.stopAfterSos)return;d.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:n}),e+=r+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some(function(e){return e.multiSegment})){var t=function(e,t){for(var n,r,i,o=w(),s=0;s<e.length;s++)r=(n=e[s]).type,o.has(r)?i=o.get(r):o.set(r,i=[]),i.push(n);return v(o)}(this.appSegments);this.mergedAppSegments=t.map(function(t){var n=t[0],r=t[1],i=K.get(n,e.options);return i.handleMultiSegments?{type:n,chunk:i.handleMultiSegments(r)}:r[0]})}}},{key:"createParsers",value:function(){try{var e=this.mergedAppSegments||this.appSegments;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=v(e));for(var t=0;t<e.length;t++){var n=e[t],r=n.type,i=n.chunk;if(this.options[r].enabled){var o=this.parsers[r];if(o&&o.append);else if(!o){var s=new(K.get(r,this.options))(i,this.options,this.file);this.parsers[r]=s}}}return et()}catch(e){return Promise.reject(e)}}},{key:"getSegment",value:function(e){return this.appSegments.find(function(t){return t.type===e})}},{key:"getOrFindSegment",value:function(e){try{var t=this,n=t.getSegment(e);return rt(function(){if(void 0===n)return et(t.findAppSegments(0,[e]),function(){n=t.getSegment(e)})},function(){return n})}catch(e){return Promise.reject(e)}}}]),t}();function pt(){}function dt(e,t){if(!t)return e&&e.then?e.then(pt):Promise.resolve()}function _t(e,t){var n=e();return n&&n.then?n.then(t):t(n)}z.set("jpeg",ct);var ft=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],ht=function(e){function t(){return i(this,t),f(this,l(t).apply(this,arguments))}return u(t,e),s(t,[{key:"parse",value:function(){try{var e=this;return e.parseHeader(),_t(function(){if(e.options.ifd0.enabled)return dt(e.parseIfd0Block())},function(){return _t(function(){if(e.options.exif.enabled)return dt(e.saveParseBlock("parseExifBlock"))},function(){return _t(function(){if(e.options.gps.enabled)return dt(e.saveParseBlock("parseGpsBlock"))},function(){return _t(function(){if(e.options.interop.enabled)return dt(e.saveParseBlock("parseInteropBlock"))},function(){return _t(function(){if(e.options.ifd1.enabled)return dt(e.saveParseBlock("parseThumbnailBlock"))},function(){return e.createOutput()})})})})})}catch(e){return Promise.reject(e)}}},{key:"saveParseBlock",value:function(e){try{var t=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return(n=t[e]())&&n.then||(n=Promise.resolve(n)),n;var n},function(e){t.handleError(e)})}catch(e){return Promise.reject(e)}}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}},{key:"parseBlock",value:function(e,t){var n=w();return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){try{var e=this;if(e.ifd0)return;if(e.findIfd0Offset(),e.ifd0Offset<8)throw D("Invalid EXIF data: IFD0 offset should be less than 8");if(!e.file.chunked&&e.ifd0Offset>e.file.byteLength)throw D("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(e.ifd0Offset,", file.byteLength: ").concat(e.file.byteLength));return _t(function(){if(e.file.isTiff)return dt(e.file.ensureChunk(e.ifd0Offset,x(e.options)))},function(){var t=e.parseBlock(e.ifd0Offset,"ifd0");if(0!==t.size)return e.exifOffset=t.get(34665),e.interopOffset=t.get(40965),e.gpsOffset=t.get(34853),e.xmp=t.get(700),e.iptc=t.get(33723),e.icc=t.get(34675),e.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t})}catch(e){return Promise.reject(e)}}},{key:"ensureBlockChunk",value:function(e,t){try{var n=this;return _t(function(){if(n.file.isTiff)return dt(n.file.ensureChunk(e,t))},function(){e>n.chunk.byteLength&&(n.chunk=M.from(n.file,n.le))})}catch(e){return Promise.reject(e)}}},{key:"parseExifBlock",value:function(){try{var e=this;if(e.exif)return;return _t(function(){if(!e.ifd0)return dt(e.parseIfd0Block())},function(){if(void 0!==e.exifOffset)return _t(function(){if(e.file.isTiff)return dt(e.file.ensureChunk(e.exifOffset,x(e.options)))},function(){var t=e.parseBlock(e.exifOffset,"exif");return e.interopOffset||(e.interopOffset=t.get(40965)),e.makerNote=t.get(37500),e.userComment=t.get(37510),e.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),e.unpack(t,41728),e.unpack(t,41729),t})})}catch(e){return Promise.reject(e)}}},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){try{var e=this;if(e.gps)return;return _t(function(){if(!e.ifd0)return dt(e.parseIfd0Block())},function(){if(void 0!==e.gpsOffset){var t=e.parseBlock(e.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",mt.apply(void 0,t.get(2).concat([t.get(1)]))),t.set("longitude",mt.apply(void 0,t.get(4).concat([t.get(3)])))),t}})}catch(e){return Promise.reject(e)}}},{key:"parseInteropBlock",value:function(){try{var e=this;if(e.interop)return;return _t(function(){if(!e.ifd0)return dt(e.parseIfd0Block())},function(){return _t(function(){if(void 0===e.interopOffset&&!e.exif)return dt(e.parseExifBlock())},function(){if(void 0!==e.interopOffset)return e.parseBlock(e.interopOffset,"interop")})})}catch(e){return Promise.reject(e)}}},{key:"parseThumbnailBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=this;if(t.ifd1||t.ifd1Parsed)return;if(t.options.mergeOutput&&!e)return;return t.findIfd1Offset(),t.ifd1Offset>0&&(t.parseBlock(t.ifd1Offset,"ifd1"),t.ifd1Parsed=!0),t.ifd1}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;return e.headerParsed||e.parseHeader(),_t(function(){if(!e.ifd1Parsed)return dt(e.parseThumbnailBlock(!0))},function(){if(void 0!==e.ifd1){var t=e.ifd1.get(513),n=e.ifd1.get(514);return e.chunk.getUint8Array(t,n)}})}catch(e){return Promise.reject(e)}}},{key:"createOutput",value:function(){var e,t,n,r={},i=ue;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=v(i));for(var o=0;o<i.length;o++)if(!P(e=this[t=i[o]]))if(n=this.canTranslate?this.translateBlock(e,t):b(e),this.options.mergeOutput){if("ifd1"===t)continue;g(r,n)}else r[t]=n;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)g(e,t);else{var n=y(t);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=v(n));for(var r=0;r<n.length;r++){var i=n[r],o=i[0],s=i[1];this.assignObjectToOutput(e,o,s)}}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),t}(function(e){function t(){return i(this,t),f(this,l(t).apply(this,arguments))}return u(t,Ze),s(t,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();if(18761===e)this.le=!0;else{if(19789!==e)throw D("Invalid EXIF data: expected byte order marker (0x4949 or 0x4D4D).");this.le=!1}if(this.chunk.le=this.le,42!==this.chunk.getUint16(2))throw D("Invalid EXIF data: expected 0x002A.");this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w(),r=this.options[t],i=r.pick,o=r.skip,s=(i=C(i)).size>0,a=0===o.size,u=this.chunk.getUint16(e);e+=2;for(var l=0;l<u;l++){var c=this.chunk.getUint16(e);if(s){if(i.has(c)&&(n.set(c,this.parseTag(e,c,t)),i.delete(c),0===i.size))break}else!a&&o.has(c)||n.set(c,this.parseTag(e,c,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var r,i=this.chunk.getUint16(e+2),o=this.chunk.getUint32(e+4),s=ft[i];if(s*o<=4?e+=8:e=this.chunk.getUint32(e+8),i<1||i>13)throw D("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(i,", offset ").concat(e));if(e>this.chunk.byteLength)throw D("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(i,", offset ").concat(e," is outside of chunk size ").concat(this.chunk.byteLength));if(1===i)return this.chunk.getUint8Array(e,o);if(2===i)return""===(r=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(r=this.chunk.getString(e,o)).trim())?void 0:r;if(7===i)return this.chunk.getUint8Array(e,o);if(1===o)return this.parseTagValue(i,e);for(var a=new(function(e){switch(i){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}())(o),u=s,l=0;l<o;l++)a[l]=this.parseTagValue(i,e),e+=u;return a}},{key:"parseTagValue",value:function(e,t){switch(e){case 1:return this.chunk.getUint8(t);case 3:return this.chunk.getUint16(t);case 4:return this.chunk.getUint32(t);case 5:return this.chunk.getUint32(t)/this.chunk.getUint32(t+4);case 6:return this.chunk.getInt8(t);case 8:return this.chunk.getInt16(t);case 9:return this.chunk.getInt32(t);case 10:return this.chunk.getInt32(t)/this.chunk.getInt32(t+4);case 11:return this.chunk.getFloat(t);case 12:return this.chunk.getDouble(t);case 13:return this.chunk.getUint32(t);default:throw D("Invalid tiff type ".concat(e))}}}]),t}());function mt(e,t,n,r){var i=e+t/60+n/3600;return"S"!==r&&"W"!==r||(i*=-1),i}a(ht,"type","tiff"),a(ht,"headerLength",10),K.set("tiff",ht),r.Exifr=Fe,r.Options=ye,r.allFormatters=de,r.chunkedProps=oe,r.createDictionary=ee,r.default=Ke,r.disableAllOptions=Te,r.extendDictionary=te,r.fetchUrlAsArrayBuffer=X,r.fileParsers=z,r.fileReaders=q,r.gps=Ae,r.gpsOnlyOptions=Ne,r.inheritables=pe,r.orientation=Ue,r.orientationOnlyOptions=Se,r.otherSegments=se,r.parse=De,r.readBlobAsArrayBuffer=W,r.rotation=Ie,r.rotations=xe,r.segmentParsers=K,r.segments=ae,r.segmentsAndBlocks=le,r.tagKeys=ne,r.tagRevivers=ie,r.tagValues=re,r.thumbnail=Pe,r.thumbnailOnlyOptions=Ce,r.thumbnailUrl=ke,r.tiffBlocks=ue,r.tiffExtractables=ce,Object.defineProperty(r,"__esModule",{value:!0})},"object"==typeof _$miniLegacyUmd_224.exports?i(_$miniLegacyUmd_224.exports):"function"==typeof define&&define.amd?define("exifr",["exports"],i):i((r=r||self).exifr={})}).call(this,_$browser_81,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_$buffer_35({}).Buffer),_$miniLegacyUmd_224=_$miniLegacyUmd_224.exports;var _$package_225={version:"1.6.0"},___class_223,___temp_223;function ___extends_223(){return(___extends_223=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __Plugin_223=_$lib_133.Plugin,_$lib_223=(___temp_223=___class_223=function(e){var t,n;function r(t,n){var r;if((r=e.call(this,t,n)||this).onFileAdded=function(e){e.preview||!_$isPreviewSupported_269(e.type)||e.isRemote||r.addToQueue(e.id)},r.onCancelRequest=function(e){var t=r.queue.indexOf(e.id);-1!==t&&r.queue.splice(t,1)},r.onFileRemoved=function(e){var t=r.queue.indexOf(e.id);-1!==t&&r.queue.splice(t,1),e.preview&&_$isObjectURL_268(e.preview)&&URL.revokeObjectURL(e.preview)},r.onRestored=function(){var e=r.uppy.getState().files;Object.keys(e).forEach(function(e){var t=r.uppy.getFile(e);t.isRestored&&(t.preview&&!_$isObjectURL_268(t.preview)||r.addToQueue(t.id))})},r.waitUntilAllProcessed=function(e){e.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:r.i18n("generatingThumbnails")})});var t=function(){e.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",t)})};return new Promise(function(e,n){r.queueProcessing?r.uppy.once("thumbnail:all-generated",function(){t(),e()}):(t(),e())})},r.type="modifier",r.id=r.opts.id||"ThumbnailGenerator",r.title="Thumbnail Generator",r.queue=[],r.queueProcessing=!1,r.defaultThumbnailDimension=200,r.defaultLocale={strings:{generatingThumbnails:"Generating thumbnails..."}},r.opts=___extends_223({},{thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1},{},n),r.opts.lazy&&r.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.");return r.i18nInit(),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},i.createThumbnail=function(e,t,n){var r=this,i=URL.createObjectURL(e.data),o=new Promise(function(e,t){var n=new Image;n.src=i,n.addEventListener("load",function(){URL.revokeObjectURL(i),e(n)}),n.addEventListener("error",function(e){URL.revokeObjectURL(i),t(e.error||new Error("Could not create thumbnail"))})}),s=_$miniLegacyUmd_224.rotation(e.data).catch(function(e){return 1});return Promise.all([o,s]).then(function(e){var i=e[0],o=e[1],s=r.getProportionalDimensions(i,t,n,o.deg),a=r.rotateImage(i,o),u=r.resizeImage(a,s.width,s.height);return r.canvasToBlob(u,"image/jpeg",80)}).then(function(e){return URL.createObjectURL(e)})},i.getProportionalDimensions=function(e,t,n,r){var i=e.width/e.height;return 90!==r&&270!==r||(i=e.height/e.width),null!=t?{width:t,height:Math.round(t/i)}:null!=n?{width:Math.round(n*i),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/i)}},i.protect=function(e){var t=e.width/e.height,n=Math.floor(Math.sqrt(5e6*t)),r=Math.floor(5e6/Math.sqrt(5e6*t));if(n>4096&&(n=4096,r=Math.round(n/t)),r>4096&&(r=4096,n=Math.round(t*r)),e.width>n){var i=document.createElement("canvas");i.width=n,i.height=r,i.getContext("2d").drawImage(e,0,0,n,r),e=i}return e},i.resizeImage=function(e,t,n){e=this.protect(e);var r=Math.ceil(_$mathLog2_73(e.width/t));r<1&&(r=1);for(var i=t*Math.pow(2,r-1),o=n*Math.pow(2,r-1);r--;){var s=document.createElement("canvas");s.width=i,s.height=o,s.getContext("2d").drawImage(e,0,0,i,o),e=s,i=Math.round(i/2),o=Math.round(o/2)}return e},i.rotateImage=function(e,t){var n=e.width,r=e.height;90!==t.deg&&270!==t.deg||(n=e.height,r=e.width);var i=document.createElement("canvas");i.width=n,i.height=r;var o=i.getContext("2d");return o.translate(n/2,r/2),t.canvas&&(o.rotate(t.rad),o.scale(t.scaleX,t.scaleY)),o.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),i},i.canvasToBlob=function(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(err){if(18===err.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(function(r){e.toBlob(r,t,n)}).then(function(e){if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e}):Promise.resolve().then(function(){return _$dataURItoBlob_247(e.toDataURL(t,n),{})}).then(function(e){if(null===e)throw new Error("could not extract blob, probably an old browser");return e})},i.setPreviewURL=function(e,t){this.uppy.setFileState(e,{preview:t})},i.addToQueue=function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()},i.processQueue=function(){var e=this;if(this.queueProcessing=!0,this.queue.length>0){var t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch(function(e){}).then(function(){return e.processQueue()}):void this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error")}this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated")},i.requestThumbnail=function(e){var t=this;return _$isPreviewSupported_269(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(function(n){t.setPreviewURL(e.id,n),t.uppy.log("[ThumbnailGenerator] Generated thumbnail for "+e.id),t.uppy.emit("thumbnail:generated",t.uppy.getFile(e.id),n)}).catch(function(n){t.uppy.log("[ThumbnailGenerator] Failed thumbnail for "+e.id+":","warning"),t.uppy.log(n,"warning"),t.uppy.emit("thumbnail:error",t.uppy.getFile(e.id),n)}):Promise.resolve()},i.install=function(){this.uppy.on("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)},i.uninstall=function(){this.uppy.off("file-removed",this.onFileRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)},r}(__Plugin_223),___class_223.VERSION=_$package_225.version,___temp_223),_$findAllDOMElements_249={};(function(e){_$findAllDOMElements_249=function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.findAllDOMElements","fileName":"'+e+'","paramsNumber":1},'),"string"==typeof t){var n=[].slice.call(document.querySelectorAll(t));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.findAllDOMElements"},'),n.length>0?n:null}if("object"==typeof t&&_$isDOMElement_265(t))return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.findAllDOMElements"},'),[t];_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.findAllDOMElements"},')}}).call(this,"/node_modules/@uppy/utils/lib/findAllDOMElements.js");var _$toArray_274={};(function(e){_$toArray_274=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.toArray","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.toArray"},'),Array.prototype.slice.call(t||[],0)}}).call(this,"/node_modules/@uppy/utils/lib/toArray.js");var _$getRelativePath_256={};(function(e){_$getRelativePath_256=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getRelativePath","fileName":"'+e+'","paramsNumber":1},'),t.fullPath&&t.fullPath!=="/"+t.name?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getRelativePath"},'),t.fullPath):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getRelativePath"},'),null)}}).call(this,"/packages/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/getRelativePath.js");var _$getFilesAndDirectoriesFromDirectory_255={};(function(e){_$getFilesAndDirectoriesFromDirectory_255=function t(n,r,i,o){var s=o.onSuccess;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getFilesAndDirectoriesFromDirectory","fileName":"'+e+'","paramsNumber":4},'),n.readEntries(function(o){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},');var a=[].concat(r,o);o.length?setTimeout(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),t(n,a,i,{onSuccess:s}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')},0):s(a),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')},function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),i(t),s(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFilesAndDirectoriesFromDirectory"},')}}).call(this,"/packages/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/getFilesAndDirectoriesFromDirectory.js");var _$webkitGetAsEntryApi_257={};(function(e){_$webkitGetAsEntryApi_257=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.webkitGetAsEntryApi","fileName":"'+e+'","paramsNumber":2},');var r=[],i=[];return _$toArray_274(t.items).forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":1},');var o=t.webkitGetAsEntry();o&&i.push(function t(i){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"createPromiseToAddFileOrParseDirectory","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"createPromiseToAddFileOrParseDirectory"},'),new Promise(function(o){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),i.isFile)i.file(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),t.relativePath=_$getRelativePath_256(i),r.push(t),o(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')},function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),n(t),o(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')});else if(i.isDirectory){var s=i.createReader();_$getFilesAndDirectoriesFromDirectory_255(s,[],n,{onSuccess:function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},');var r=n.map(function(n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),t(n)});Promise.all(r).then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},'),o()}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')}})}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},')})}(o)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.webkitGetAsEntryApi"},'),Promise.all(i).then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},'),r})}}).call(this,"/packages/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/index.js");var _$fallbackApi_254={};(function(e){_$fallbackApi_254=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.fallbackApi","fileName":"'+e+'","paramsNumber":1},');var n=_$toArray_274(t.files);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.fallbackApi"},'),Promise.resolve(n)}}).call(this,"/packages/@uppy/utils/lib/getDroppedFiles/utils/fallbackApi.js");var _$getDroppedFiles_253={};(function(e){_$getDroppedFiles_253=function(t,n){var r=(void 0===n?{}:n).logDropError,i=void 0===r?function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}:r;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getDroppedFiles","fileName":"'+e+'","paramsNumber":2},'),t.items&&t.items[0]&&"webkitGetAsEntry"in t.items[0]?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getDroppedFiles"},'),_$webkitGetAsEntryApi_257(t,i)):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getDroppedFiles"},'),_$fallbackApi_254(t))}}).call(this,"/node_modules/@uppy/utils/lib/getDroppedFiles/index.js");var _$getActiveOverlayEl_157={};(function(e){_$getActiveOverlayEl_157=function(t,n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getActiveOverlayEl","fileName":"'+e+'","paramsNumber":2},'),n){var r=t.querySelector('[data-uppy-paneltype="'+n+'"]');if(r)return r}return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getActiveOverlayEl"},'),t}}).call(this,"/packages/@uppy/dashboard/lib/utils/getActiveOverlayEl.js");var _$FOCUSABLE_ELEMENTS_241=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'],_$trapFocus_160={};(function(e){function t(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"focusOnFirstNode","fileName":"'+e+'","paramsNumber":2},');var r=n[0];r&&(r.focus(),t.preventDefault()),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"focusOnFirstNode","paramsNumber":2},')}function n(n,r,i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"trapFocus","fileName":"'+e+'","paramsNumber":3},');var o=_$getActiveOverlayEl_157(i,r),s=_$toArray_274(o.querySelectorAll(_$FOCUSABLE_ELEMENTS_241)),a=s.indexOf(document.activeElement);!function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"isFocusInOverlay","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"isFocusInOverlay"},'),t.contains(document.activeElement)}(o)?t(n,s):n.shiftKey&&0===a?function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"focusOnLastNode","fileName":"'+e+'","paramsNumber":2},');var r=n[n.length-1];r&&(r.focus(),t.preventDefault()),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"focusOnLastNode","paramsNumber":2},')}(n,s):n.shiftKey||a!==s.length-1||t(n,s),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"trapFocus","paramsNumber":3},')}_$trapFocus_160={forModal:function(t,r,i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":3},'),n(t,r,i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')},forInline:function(t,r,i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":3},'),null===r||n(t,r,i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')}}}).call(this,"/packages/@uppy/dashboard/lib/utils/trapFocus.js");var _$ResizeObserver_85={exports:{}};(function(e){!function(e,t){"object"==typeof _$ResizeObserver_85.exports?_$ResizeObserver_85.exports=t():"function"==typeof define&&define.amd?define(t):e.ResizeObserver=t()}(this,function(){"use strict";var t=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,r=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},o=2,s=20,a=["top","right","bottom","left","width","height","size","weight"],u="undefined"!=typeof MutationObserver,l=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,s=0;function a(){n&&(n=!1,e()),r&&l()}function u(){i(a)}function l(){var e=Date.now();if(n){if(e-s<o)return;r=!0}else n=!0,r=!1,setTimeout(u,t);s=e}return l}(this.refresh.bind(this),s)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),c=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},p=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},d=y(0,0,0,0);function _(e){return parseFloat(e)||0}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+_(e["border-"+n+"-width"])},0)}var h="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof p(e).SVGGraphicsElement}:function(e){return e instanceof p(e).SVGElement&&"function"==typeof e.getBBox};function m(e){return n?h(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=p(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=_(o)}return t}(r),o=i.left+i.right,s=i.top+i.bottom,a=_(r.width),u=_(r.height);if("border-box"===r.boxSizing&&(Math.round(a+o)!==t&&(a-=f(r,"left","right")+o),Math.round(u+s)!==n&&(u-=f(r,"top","bottom")+s)),!function(e){return e===p(e).document.documentElement}(e)){var l=Math.round(a+o)-t,c=Math.round(u+s)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(c)&&(u-=c)}return y(i.left,i.top,a,u)}(e):d}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,i,o,s,a,u,l=(r=(n=t).x,i=n.y,o=n.width,s=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),c(u,{x:r,y:i,width:o,height:s,top:i,right:r+o,bottom:s+i,left:r}),u);c(this,{target:e,contentRect:l})},v=function(){function e(e,n,r){if(this.activeObservations_=[],this.observations_=new t,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new b(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),T="undefined"!=typeof WeakMap?new WeakMap:new t,N=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=l.getInstance(),r=new v(t,n,this);T.set(this,r)};return["observe","unobserve","disconnect"].forEach(function(e){N.prototype[e]=function(){var t;return(t=T.get(this))[e].apply(t,arguments)}}),void 0!==r.ResizeObserver?r.ResizeObserver:N})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$ResizeObserver_85=_$ResizeObserver_85.exports;var _$lodashDebounce_71={};(function(e){var t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,u="object"==typeof e&&e&&e.Object===Object&&e,l="object"==typeof self&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),p=Object.prototype.toString,d=Math.max,_=Math.min,f=function(){return c.Date.now()};function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&p.call(e)==n}(e))return t;if(h(e)){var u="function"==typeof e.valueOf?e.valueOf():e;e=h(u)?u+"":u}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var l=o.test(e);return l||s.test(e)?a(e.slice(2),l?2:8):i.test(e)?t:+e}_$lodashDebounce_71=function(e,t,n){var r,i,o,s,a,u,l=0,c=!1,p=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=r,o=i;return r=i=void 0,l=t,s=e.apply(o,n)}function b(e){var n=e-u;return void 0===u||n>=t||n<0||p&&e-l>=o}function v(){var e=f();if(b(e))return T(e);a=setTimeout(v,function(e){var n=t-(e-u);return p?_(n,o-(e-l)):n}(e))}function T(e){return a=void 0,y&&r?g(e):(r=i=void 0,s)}function N(){var e=f(),n=b(e);if(r=arguments,i=this,u=e,n){if(void 0===a)return function(e){return l=e,a=setTimeout(v,t),c?g(e):s}(u);if(p)return a=setTimeout(v,t),g(u)}return void 0===a&&(a=setTimeout(v,t)),s}return t=m(t)||0,h(n)&&(c=!!n.leading,o=(p="maxWait"in n)?d(m(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),N.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=u=i=a=void 0},N.flush=function(){return void 0===a?s:T(f())},N}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$createSuperFocus_156={};function areInputsEqual(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(function(e){_$createSuperFocus_156=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.createSuperFocus","fileName":"'+e+'","paramsNumber":0},');var t=!1;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.createSuperFocus"},'),_$lodashDebounce_71(function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"superFocus","fileName":"'+e+'","paramsNumber":2},');var i=_$getActiveOverlayEl_157(n,r),o=i.contains(document.activeElement);if(o&&t)_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"superFocus"},');else{var s=i.querySelector("[data-uppy-super-focusable]");if(!o||s){if(s)s.focus({preventScroll:!0}),t=!0;else{var a=i.querySelector(_$FOCUSABLE_ELEMENTS_241);a&&a.focus({preventScroll:!0}),t=!1}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"superFocus"},')}else _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"superFocus"},')}},260)}}).call(this,"/packages/@uppy/dashboard/lib/utils/createSuperFocus.js");var _$memoizeOneCjs_74=function(e,t){var n;void 0===t&&(t=areInputsEqual);var r,i=[],o=!1;return function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return o&&n===this&&t(s,i)?r:(r=e.apply(this,s),o=!0,n=this,i=s,r)}},_$package_163={version:"1.9.0"},___class_154,___temp_154;function ___extends_154(){return(___extends_154=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_154(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_154=_$lib_133.Plugin,ResizeObserver=_$ResizeObserver_85.default||_$ResizeObserver_85,defaultPickerIcon=_$icons_153.defaultPickerIcon,memoize=_$memoizeOneCjs_74.default||_$memoizeOneCjs_74,TAB_KEY=9,ESC_KEY=27;function createPromise(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}var _$lib_154=(___temp_154=___class_154=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).setOptions=function(t){e.prototype.setOptions.call(___assertThisInitialized_154(r),t),r.i18nInit()},r.i18nInit=function(){r.translator=new _$Translator_245([r.defaultLocale,r.uppy.locale,r.opts.locale]),r.i18n=r.translator.translate.bind(r.translator),r.i18nArray=r.translator.translateArray.bind(r.translator),r.setPluginState()},r.removeTarget=function(e){var t=r.getPluginState().targets.filter(function(t){return t.id!==e.id});r.setPluginState({targets:t})},r.addTarget=function(e){var t=e.id||e.constructor.name,n=e.title||t,i=e.type;if("acquirer"===i||"progressindicator"===i||"presenter"===i){var o={id:t,name:n,type:i},s=r.getPluginState().targets.slice();return s.push(o),r.setPluginState({targets:s}),r.el}r.uppy.log("Dashboard: Modal can only be used by plugins of types: acquirer, progressindicator, presenter","error")},r.hideAllPanels=function(){var e={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null},t=r.getPluginState();t.activePickerPanel===e.activePickerPanel&&t.showAddFilesPanel===e.showAddFilesPanel&&t.activeOverlayType===e.activeOverlayType||r.setPluginState(e)},r.showPanel=function(e){var t=r.getPluginState().targets.filter(function(t){return"acquirer"===t.type&&t.id===e})[0];r.setPluginState({activePickerPanel:t,activeOverlayType:"PickerPanel"})},r.openModal=function(){var e=createPromise(),t=e.promise,n=e.resolve;return r.savedScrollPosition=window.pageYOffset,r.savedActiveElement=document.activeElement,r.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),r.opts.animateOpenClose&&r.getPluginState().isClosing?r.el.addEventListener("animationend",function e(){r.setPluginState({isHidden:!1}),r.el.removeEventListener("animationend",e,!1),n()},!1):(r.setPluginState({isHidden:!1}),n()),r.opts.browserBackButtonClose&&r.updateBrowserHistory(),document.addEventListener("keydown",r.handleKeyDownInModal),r.uppy.emit("dashboard:modal-open"),t},r.closeModal=function(e){void 0===e&&(e={});var t=e.manualClose,n=void 0===t||t,i=r.getPluginState(),o=i.isHidden,s=i.isClosing;if(!o&&!s){var a=createPromise(),u=a.promise,l=a.resolve;return r.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),r.opts.animateOpenClose?(r.setPluginState({isClosing:!0}),r.el.addEventListener("animationend",function e(){r.setPluginState({isHidden:!0,isClosing:!1}),r.superFocus.cancel(),r.savedActiveElement.focus(),r.el.removeEventListener("animationend",e,!1),l()},!1)):(r.setPluginState({isHidden:!0}),r.superFocus.cancel(),r.savedActiveElement.focus(),l()),document.removeEventListener("keydown",r.handleKeyDownInModal),n&&r.opts.browserBackButtonClose&&history.state&&history.state[r.modalName]&&history.go(-1),r.uppy.emit("dashboard:modal-closed"),u}},r.isModalOpen=function(){return!r.getPluginState().isHidden||!1},r.requestCloseModal=function(){return r.opts.onRequestCloseModal?r.opts.onRequestCloseModal():r.closeModal()},r.setDarkModeCapability=function(e){var t=r.uppy.getState().capabilities;r.uppy.setState({capabilities:___extends_154({},t,{darkMode:e})})},r.handleSystemDarkModeChange=function(e){var t=e.matches;r.uppy.log("[Dashboard] Dark mode is "+(t?"on":"off")),r.setDarkModeCapability(t)},r.toggleFileCard=function(e){e?r.uppy.emit("dashboard:file-edit-start"):r.uppy.emit("dashboard:file-edit-complete"),r.setPluginState({fileCardFor:e||null,activeOverlayType:e?"FileCard":null})},r.toggleAddFilesPanel=function(e){r.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})},r.addFiles=function(e){var t=e.map(function(e){return{source:r.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}});try{r.uppy.addFiles(t)}catch(err){r.uppy.log(err)}},r.startListeningToResize=function(){r.resizeObserver=new ResizeObserver(function(e,t){var n=e[0].contentRect,i=n.width,o=n.height;r.uppy.log("[Dashboard] resized: "+i+" / "+o,"debug"),r.setPluginState({containerWidth:i,containerHeight:o,areInsidesReadyToBeVisible:!0})}),r.resizeObserver.observe(r.el.querySelector(".uppy-Dashboard-inner")),r.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(function(){var e=r.getPluginState(),t=!r.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(r.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),r.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},r.stopListeningToResize=function(){r.resizeObserver.disconnect(),clearTimeout(r.makeDashboardInsidesVisibleAnywayTimeout)},r.recordIfFocusedOnUppyRecently=function(e){r.el.contains(e.target)?r.ifFocusedOnUppyRecently=!0:(r.ifFocusedOnUppyRecently=!1,r.superFocus.cancel())},r.updateBrowserHistory=function(){var e;history.state&&history.state[r.modalName]||history.pushState(___extends_154({},history.state,((e={})[r.modalName]=!0,e)),""),window.addEventListener("popstate",r.handlePopState,!1)},r.handlePopState=function(e){!r.isModalOpen()||e.state&&e.state[r.modalName]||r.closeModal({manualClose:!1}),!r.isModalOpen()&&e.state&&e.state[r.modalName]&&history.go(-1)},r.handleKeyDownInModal=function(e){e.keyCode===ESC_KEY&&r.requestCloseModal(e),e.keyCode===TAB_KEY&&_$trapFocus_160.forModal(e,r.getPluginState().activeOverlayType,r.el)},r.handleClickOutside=function(){r.opts.closeModalOnClickOutside&&r.requestCloseModal()},r.handlePaste=function(e){r.uppy.iteratePlugins(function(t){"acquirer"===t.type&&t.handleRootPaste&&t.handleRootPaste(e)});var t=_$toArray_274(e.clipboardData.files);r.addFiles(t)},r.handleInputChange=function(e){e.preventDefault();var t=_$toArray_274(e.target.files);r.addFiles(t)},r.handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",clearTimeout(r.removeDragOverClassTimeout),r.setPluginState({isDraggingOver:!0})},r.handleDragLeave=function(e){e.preventDefault(),e.stopPropagation(),clearTimeout(r.removeDragOverClassTimeout),r.removeDragOverClassTimeout=setTimeout(function(){r.setPluginState({isDraggingOver:!1})},50)},r.handleDrop=function(e,t){e.preventDefault(),e.stopPropagation(),clearTimeout(r.removeDragOverClassTimeout),r.setPluginState({isDraggingOver:!1}),r.uppy.iteratePlugins(function(t){"acquirer"===t.type&&t.handleRootDrop&&t.handleRootDrop(e)});var n=!1;_$getDroppedFiles_253(e.dataTransfer,{logDropError:function(e){r.uppy.log(e,"error"),n||(r.uppy.info(e.message,"error"),n=!0)}}).then(function(e){e.length>0&&(r.uppy.log("[Dashboard] Files were dropped"),r.addFiles(e))})},r.handleRequestThumbnail=function(e){r.opts.waitForThumbnailsBeforeUpload||r.uppy.emit("thumbnail:request",e)},r.handleCancelThumbnail=function(e){r.opts.waitForThumbnailsBeforeUpload||r.uppy.emit("thumbnail:cancel",e)},r.handleKeyDownInInline=function(e){e.keyCode===TAB_KEY&&_$trapFocus_160.forInline(e,r.getPluginState().activeOverlayType,r.el)},r.handlePasteOnBody=function(e){r.el.contains(document.activeElement)&&r.handlePaste(e)},r.handleComplete=function(e){var t=e.failed;e.uploadID,r.opts.closeAfterFinish&&0===t.length&&r.requestCloseModal()},r.initEvents=function(){if(r.opts.trigger&&!r.opts.inline){var e=_$findAllDOMElements_249(r.opts.trigger);e?e.forEach(function(e){return e.addEventListener("click",r.openModal)}):r.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}r.startListeningToResize(),document.addEventListener("paste",r.handlePasteOnBody),r.uppy.on("plugin-remove",r.removeTarget),r.uppy.on("file-added",r.hideAllPanels),r.uppy.on("dashboard:modal-closed",r.hideAllPanels),r.uppy.on("complete",r.handleComplete),document.addEventListener("focus",r.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",r.recordIfFocusedOnUppyRecently,!0),r.opts.inline&&r.el.addEventListener("keydown",r.handleKeyDownInInline)},r.removeEvents=function(){var e=_$findAllDOMElements_249(r.opts.trigger);!r.opts.inline&&e&&e.forEach(function(e){return e.removeEventListener("click",r.openModal)}),r.stopListeningToResize(),document.removeEventListener("paste",r.handlePasteOnBody),window.removeEventListener("popstate",r.handlePopState,!1),r.uppy.off("plugin-remove",r.removeTarget),r.uppy.off("file-added",r.hideAllPanels),r.uppy.off("dashboard:modal-closed",r.hideAllPanels),r.uppy.off("complete",r.handleComplete),document.removeEventListener("focus",r.recordIfFocusedOnUppyRecently),document.removeEventListener("click",r.recordIfFocusedOnUppyRecently),r.opts.inline&&r.el.removeEventListener("keydown",r.handleKeyDownInInline)},r.superFocusOnEachUpdate=function(){var e=r.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,n=r.uppy.getState().info.isHidden,i=!r.opts.inline;n&&(i||e||t&&r.ifFocusedOnUppyRecently)?r.superFocus(r.el,r.getPluginState().activeOverlayType):r.superFocus.cancel()},r.afterUpdate=function(){r.superFocusOnEachUpdate()},r.cancelUpload=function(e){r.uppy.removeFile(e)},r.saveFileCard=function(e,t){r.uppy.setFileMeta(t,e),r.toggleFileCard()},r._attachRenderFunctionToTarget=function(e){var t=r.uppy.getPlugin(e.id);return ___extends_154({},e,{icon:t.icon||r.opts.defaultPickerIcon,render:t.render})},r._isTargetSupported=function(e){var t=r.uppy.getPlugin(e.id);return"function"!=typeof t.isSupported||t.isSupported()},r._getAcquirers=memoize(function(e){return e.filter(function(e){return"acquirer"===e.type&&r._isTargetSupported(e)}).map(r._attachRenderFunctionToTarget)}),r._getProgressIndicators=memoize(function(e){return e.filter(function(e){return"progressindicator"===e.type}).map(r._attachRenderFunctionToTarget)}),r.render=function(e){var t,n=r.getPluginState(),i=e.files,o=e.capabilities,s=e.allowNewUpload,a=Object.keys(i).filter(function(e){return!i[e].progress.uploadStarted}),u=Object.keys(i).filter(function(e){return i[e].progress.uploadStarted}),l=Object.keys(i).filter(function(e){return i[e].isPaused}),c=Object.keys(i).filter(function(e){return i[e].progress.uploadComplete}),p=Object.keys(i).filter(function(e){return i[e].error}),d=Object.keys(i).filter(function(e){return!i[e].progress.uploadComplete&&i[e].progress.uploadStarted}),_=d.filter(function(e){return!i[e].isPaused}),f=Object.keys(i).filter(function(e){return i[e].progress.preprocess||i[e].progress.postprocess}),h=u.length>0,m=100===e.totalProgress&&c.length===Object.keys(i).length&&0===f.length,y=h&&p.length===u.length,g=0!==d.length&&l.length===d.length,b=r._getAcquirers(n.targets),v=r._getProgressIndicators(n.targets);return t="auto"===r.opts.theme?o.darkMode?"dark":"light":r.opts.theme,_$Dashboard_140({state:e,isHidden:n.isHidden,files:i,newFiles:a,uploadStartedFiles:u,completeFiles:c,erroredFiles:p,inProgressFiles:d,inProgressNotPausedFiles:_,processingFiles:f,isUploadStarted:h,isAllComplete:m,isAllErrored:y,isAllPaused:g,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:s,acquirers:b,theme:t,activePickerPanel:n.activePickerPanel,animateOpenClose:r.opts.animateOpenClose,isClosing:n.isClosing,getPlugin:r.uppy.getPlugin,progressindicators:v,autoProceed:r.uppy.opts.autoProceed,id:r.id,closeModal:r.requestCloseModal,handleClickOutside:r.handleClickOutside,handleInputChange:r.handleInputChange,handlePaste:r.handlePaste,inline:r.opts.inline,showPanel:r.showPanel,hideAllPanels:r.hideAllPanels,log:r.uppy.log,i18n:r.i18n,i18nArray:r.i18nArray,removeFile:r.uppy.removeFile,info:r.uppy.info,note:r.opts.note,metaFields:n.metaFields,resumableUploads:o.resumableUploads||!1,individualCancellation:o.individualCancellation,isMobileDevice:o.isMobileDevice,pauseUpload:r.uppy.pauseResume,retryUpload:r.uppy.retryUpload,cancelUpload:r.cancelUpload,cancelAll:r.uppy.cancelAll,fileCardFor:n.fileCardFor,toggleFileCard:r.toggleFileCard,toggleAddFilesPanel:r.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:r.saveFileCard,width:r.opts.width,height:r.opts.height,showLinkToFileUploadResult:r.opts.showLinkToFileUploadResult,proudlyDisplayPoweredByUppy:r.opts.proudlyDisplayPoweredByUppy,hideCancelButton:r.opts.hideCancelButton,hideRetryButton:r.opts.hideRetryButton,hidePauseResumeCancelButtons:r.opts.hidePauseResumeCancelButton,showRemoveButtonAfterComplete:r.opts.showRemoveButtonAfterComplete,containerWidth:n.containerWidth,containerHeight:n.containerHeight,areInsidesReadyToBeVisible:n.areInsidesReadyToBeVisible,isTargetDOMEl:r.isTargetDOMEl,parentElement:r.el,allowedFileTypes:r.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:r.uppy.opts.restrictions.maxNumberOfFiles,showSelectedFiles:r.opts.showSelectedFiles,handleRequestThumbnail:r.handleRequestThumbnail,handleCancelThumbnail:r.handleCancelThumbnail,isDraggingOver:n.isDraggingOver,handleDragOver:r.handleDragOver,handleDragLeave:r.handleDragLeave,handleDrop:r.handleDrop})},r.discoverProviderPlugins=function(){r.uppy.iteratePlugins(function(e){e&&!e.target&&e.opts&&e.opts.target===r.constructor&&r.addTarget(e)})},r.install=function(){r.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,metaFields:r.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});var e=r.opts,t=e.inline,n=e.closeAfterFinish;if(t&&n)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");r.uppy.opts.allowMultipleUploads&&n&&r.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploads` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var i=r.opts.target;i&&r.mount(i,___assertThisInitialized_154(r)),(r.opts.plugins||[]).forEach(function(e){var t=r.uppy.getPlugin(e);t&&t.mount(___assertThisInitialized_154(r),t)}),r.opts.disableStatusBar||r.uppy.use(_$lib_216,{id:r.id+":StatusBar",target:___assertThisInitialized_154(r),hideUploadButton:r.opts.hideUploadButton,hideRetryButton:r.opts.hideRetryButton,hidePauseResumeButton:r.opts.hidePauseResumeButton,hideCancelButton:r.opts.hideCancelButton,showProgressDetails:r.opts.showProgressDetails,hideAfterFinish:r.opts.hideProgressAfterFinish,locale:r.opts.locale}),r.opts.disableInformer||r.uppy.use(_$lib_183,{id:r.id+":Informer",target:___assertThisInitialized_154(r)}),r.opts.disableThumbnailGenerator||r.uppy.use(_$lib_223,{id:r.id+":ThumbnailGenerator",thumbnailWidth:r.opts.thumbnailWidth,waitForThumbnailsBeforeUpload:r.opts.waitForThumbnailsBeforeUpload,lazy:!r.opts.waitForThumbnailsBeforeUpload}),r.darkModeMediaQuery="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;var o=!!r.darkModeMediaQuery&&r.darkModeMediaQuery.matches;r.uppy.log("[Dashboard] Dark mode is "+(o?"on":"off")),r.setDarkModeCapability(o),"auto"===r.opts.theme&&r.darkModeMediaQuery.addListener(r.handleSystemDarkModeChange),r.discoverProviderPlugins(),r.initEvents()},r.uninstall=function(){if(!r.opts.disableInformer){var e=r.uppy.getPlugin(r.id+":Informer");e&&r.uppy.removePlugin(e)}if(!r.opts.disableStatusBar){var t=r.uppy.getPlugin(r.id+":StatusBar");t&&r.uppy.removePlugin(t)}if(!r.opts.disableThumbnailGenerator){var n=r.uppy.getPlugin(r.id+":ThumbnailGenerator");n&&r.uppy.removePlugin(n)}(r.opts.plugins||[]).forEach(function(e){var t=r.uppy.getPlugin(e);t&&t.unmount()}),"auto"===r.opts.theme&&r.darkModeMediaQuery.removeListener(r.handleSystemDarkModeChange),r.unmount(),r.removeEvents()},r.id=r.opts.id||"Dashboard",r.title="Dashboard",r.type="orchestrator",r.modalName="uppy-Dashboard-"+_$cuid_40(),r.defaultLocale={strings:{closeModal:"Close Modal",importFrom:"Import from %{name}",addingMoreFiles:"Adding more files",addMoreFiles:"Add more files",dashboardWindowTitle:"File Uploader Window (Press escape to close)",dashboardTitle:"File Uploader",copyLinkToClipboardSuccess:"Link copied to clipboard",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",fileSource:"File source: %{name}",done:"Done",back:"Back",addMore:"Add more",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",cancel:"Cancel",myDevice:"My Device",dropPaste:"Drop files here, paste or %{browse}",dropPasteImport:"Drop files here, paste, %{browse} or\xa0import\xa0from:",dropHint:"Drop your files here",browse:"browse",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy2:"%{backwardsCompat} %{uppy}",poweredBy:"Powered by"}};var i={target:"body",metaFields:[],trigger:"#uppy-select-files",inline:!1,width:750,height:550,thumbnailWidth:280,waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:defaultPickerIcon,showLinkToFileUploadResult:!0,showProgressDetails:!1,hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeCancelButtons:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return r.closeModal()},showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light"};return r.opts=___extends_154({},i,{},n),r.i18nInit(),r.superFocus=_$createSuperFocus_156(),r.ifFocusedOnUppyRecently=!1,r.makeDashboardInsidesVisibleAnywayTimeout=null,r.removeDragOverClassTimeout=null,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r}(__Plugin_154),___class_154.VERSION=_$package_163.version,___temp_154),_$package_165={version:"1.4.13"},___class_164,___temp_164;function ___extends_164(){return(___extends_164=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_164(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_164=_$lib_133.Plugin,__h_164=_$preact_80.h,_$lib_164=(___temp_164=___class_164=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).type="acquirer",r.id=r.opts.id||"DragDrop",r.title="Drag & Drop",r.defaultLocale={strings:{dropHereOr:"Drop files here or %{browse}",browse:"browse"}},r.opts=___extends_164({},{target:null,inputName:"files[]",width:"100%",height:"100%",note:null},{},n),r.isDragDropSupported=_$isDragDropSupported_266(),r.removeDragOverClassTimeout=null,r.i18nInit(),r.onInputChange=r.onInputChange.bind(___assertThisInitialized_164(r)),r.handleDragOver=r.handleDragOver.bind(___assertThisInitialized_164(r)),r.handleDragLeave=r.handleDragLeave.bind(___assertThisInitialized_164(r)),r.handleDrop=r.handleDrop.bind(___assertThisInitialized_164(r)),r.addFiles=r.addFiles.bind(___assertThisInitialized_164(r)),r.render=r.render.bind(___assertThisInitialized_164(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},i.addFiles=function(e){var t=this,n=e.map(function(e){return{source:t.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}});try{this.uppy.addFiles(n)}catch(err){this.uppy.log(err)}},i.onInputChange=function(e){this.uppy.log("[DragDrop] Files selected through input");var t=_$toArray_274(e.target.files);this.addFiles(t),e.target.value=null},i.handleDrop=function(e,t){var n=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.log("[DragDrop] Files were dropped"),_$getDroppedFiles_253(e.dataTransfer,{logDropError:function(e){n.uppy.log(e,"error")}}).then(function(e){return n.addFiles(e)})},i.handleDragOver=function(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0})},i.handleDragLeave=function(e){var t=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(function(){t.setPluginState({isDraggingOver:!1})},50)},i.renderHiddenFileInput=function(){var e=this,t=this.uppy.opts.restrictions;return __h_164("input",{id:this.uppy.id+"-"+this.id,class:"uppy-DragDrop-input",type:"file",tabindex:-1,focusable:"false",ref:function(t){e.fileInputRef=t},name:this.opts.inputName,multiple:1!==t.maxNumberOfFiles,accept:t.allowedFileTypes,onchange:this.onInputChange})},i.renderArrowSvg=function(){return __h_164("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},__h_164("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0","fill-rule":"evenodd"}))},i.renderLabel=function(){return __h_164("label",{class:"uppy-DragDrop-label",for:this.uppy.id+"-"+this.id},this.i18nArray("dropHereOr",{browse:__h_164("span",{class:"uppy-DragDrop-browse"},this.i18n("browse"))}))},i.renderNote=function(){return __h_164("span",{class:"uppy-DragDrop-note"},this.opts.note)},i.render=function(e){var t=this,n="\n      uppy-Root\n      uppy-u-reset\n      uppy-DragDrop-container\n      "+(this.isDragDropSupported?"uppy-DragDrop--is-dragdrop-supported":"")+"\n      "+(this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":"")+"\n    ",r={width:this.opts.width,height:this.opts.height};return __h_164("button",{type:"button",class:n,style:r,onClick:function(){return t.fileInputRef.click()},onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),__h_164("div",{class:"uppy-DragDrop-inner"},this.renderArrowSvg(),this.renderLabel(),this.renderNote()))},i.install=function(){this.setPluginState({isDraggingOver:!1});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.unmount()},r}(__Plugin_164),___class_164.VERSION=_$package_165.version,___temp_164),_$package_171={version:"1.4.12"},___class_170,___temp_170;function ___extends_170(){return(___extends_170=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_170(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_170=_$lib_133.Plugin,__h_170=_$preact_80.h,_$lib_170=(___temp_170=___class_170=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"FileInput",r.title="File Input",r.type="acquirer",r.defaultLocale={strings:{chooseFiles:"Choose files"}},r.opts=___extends_170({},{target:null,pretty:!0,inputName:"files[]"},{},n),r.i18nInit(),r.render=r.render.bind(___assertThisInitialized_170(r)),r.handleInputChange=r.handleInputChange.bind(___assertThisInitialized_170(r)),r.handleClick=r.handleClick.bind(___assertThisInitialized_170(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},i.addFiles=function(e){var t=this,n=e.map(function(e){return{source:t.id,name:e.name,type:e.type,data:e}});try{this.uppy.addFiles(n)}catch(err){this.uppy.log(err)}},i.handleInputChange=function(e){this.uppy.log("[FileInput] Something selected through input...");var t=_$toArray_274(e.target.files);this.addFiles(t),e.target.value=null},i.handleClick=function(e){this.input.click()},i.render=function(e){var t=this,n=this.uppy.opts.restrictions,r=n.allowedFileTypes?n.allowedFileTypes.join(","):null;return __h_170("div",{class:"uppy-Root uppy-FileInput-container"},__h_170("input",{class:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onchange:this.handleInputChange,multiple:1!==n.maxNumberOfFiles,accept:r,ref:function(e){t.input=e}}),this.opts.pretty&&__h_170("button",{class:"uppy-FileInput-btn",type:"button",onclick:this.handleClick},this.i18n("chooseFiles")))},i.install=function(){var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.unmount()},r}(__Plugin_170),___class_170.VERSION=_$package_171.version,___temp_170),_$package_190={version:"1.3.14"},___class_189,___temp_189;function ___extends_189(){return(___extends_189=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __Plugin_189=_$lib_133.Plugin,__h_189=_$preact_80.h,_$lib_189=(___temp_189=___class_189=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"ProgressBar",r.title="Progress Bar",r.type="progressindicator",r.opts=___extends_189({},{target:"body",replaceTargetContent:!1,fixed:!1,hideAfterFinish:!0},n),r.render=r.render.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.render=function(e){var t=e.totalProgress||0,n=(0===t||100===t)&&this.opts.hideAfterFinish;return __h_189("div",{class:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},__h_189("div",{class:"uppy-ProgressBar-inner",style:{width:t+"%"}}),__h_189("div",{class:"uppy-ProgressBar-percentage"},t))},i.install=function(){var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.unmount()},r}(__Plugin_189),___class_189.VERSION=_$package_190.version,___temp_189),_$package_167={version:"1.4.6"},___class_166,___temp_166;function ___assertThisInitialized_166(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_166=_$lib_133.Plugin,__Provider_166=_$lib_129.Provider,__h_166=_$preact_80.h,_$lib_166=(___temp_166=___class_166=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"Dropbox",__Provider_166.initPlugin(___assertThisInitialized_166(r),n),r.title=r.opts.title||"Dropbox",r.icon=function(){return __h_166("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_166("g",{fill:"none","fill-rule":"evenodd"},__h_166("rect",{fill:"#0D2481",width:"32",height:"32",rx:"16"}),__h_166("path",{d:"M11 8l5 3.185-5 3.186-5-3.186L11 8zm10 0l5 3.185-5 3.186-5-3.186L21 8zM6 17.556l5-3.185 5 3.185-5 3.186-5-3.186zm15-3.185l5 3.185-5 3.186-5-3.186 5-3.185zm-10 7.432l5-3.185 5 3.185-5 3.186-5-3.186z",fill:"#FFF","fill-rule":"nonzero"})))},r.provider=new __Provider_166(t,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders||r.opts.serverHeaders,provider:"dropbox",pluginId:r.id}),r.onFirstRender=r.onFirstRender.bind(___assertThisInitialized_166(r)),r.render=r.render.bind(___assertThisInitialized_166(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.install=function(){this.view=new _$lib_202(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.view.tearDown(),this.unmount()},i.onFirstRender=function(){return this.view.getFolder()},i.render=function(e){return this.view.render(e)},r}(__Plugin_166),___class_166.VERSION=_$package_167.version,___temp_166),_$DriveProviderViews_180={};(function(e){_$DriveProviderViews_180=function(t){var n,r;function i(){return t.apply(this,arguments)||this}return r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i.prototype.toggleCheckbox=function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"toggleCheckbox","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"DriveProviderViews","superClass":"ProviderViews"}},'),n.stopPropagation(),n.preventDefault(),r.custom.isTeamDrive||r.custom.isSharedDrive||t.prototype.toggleCheckbox.call(this,n,r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"toggleCheckbox"},')},i}(_$lib_202)}).call(this,"/packages/@uppy/google-drive/lib/DriveProviderViews.js");var _$package_182={version:"1.5.6"},___class_181,___temp_181;function ___assertThisInitialized_181(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_181=_$lib_133.Plugin,__Provider_181=_$lib_129.Provider,__h_181=_$preact_80.h,_$lib_181=(___temp_181=___class_181=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"GoogleDrive",r.title=r.opts.title||"Google Drive",__Provider_181.initPlugin(___assertThisInitialized_181(r),n),r.title=r.opts.title||"Google Drive",r.icon=function(){return __h_181("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_181("g",{fill:"none","fill-rule":"evenodd"},__h_181("rect",{fill:"#4285F4",width:"32",height:"32",rx:"16"}),__h_181("path",{d:"M10.324 23.3l3-5.1H25l-3 5.1H10.324zM13 18.2l-3 5.1-3-5.1 5.839-9.924 2.999 5.1L13 18.2zm11.838-.276h-6L13 8h6l5.84 9.924h-.002z",fill:"#FFF"})))},r.provider=new __Provider_181(t,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders||r.opts.serverHeaders,provider:"drive",authProvider:"google",pluginId:r.id}),r.onFirstRender=r.onFirstRender.bind(___assertThisInitialized_181(r)),r.render=r.render.bind(___assertThisInitialized_181(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.install=function(){this.view=new _$DriveProviderViews_180(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1,hasTeamDrives:!1,teamDrives:[],teamDriveId:""});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.view.tearDown(),this.unmount()},i.onFirstRender=function(){return this.view.getFolder("root","/")},i.render=function(e){return this.view.render(e)},r}(__Plugin_181),___class_181.VERSION=_$package_182.version,___temp_181),_$package_186={version:"1.4.6"},___class_185,___temp_185;function ___assertThisInitialized_185(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_185=_$lib_133.Plugin,__Provider_185=_$lib_129.Provider,__h_185=_$preact_80.h,_$lib_185=(___temp_185=___class_185=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"Instagram",__Provider_185.initPlugin(___assertThisInitialized_185(r),n),r.title=r.opts.title||"Instagram",r.icon=function(){return __h_185("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_185("g",{fill:"none","fill-rule":"evenodd"},__h_185("rect",{fill:"#E1306C",width:"32",height:"32",rx:"16"}),__h_185("path",{d:"M16 8.622c2.403 0 2.688.009 3.637.052.877.04 1.354.187 1.67.31.392.144.745.374 1.036.673.299.29.529.644.673 1.035.123.317.27.794.31 1.671.043.95.052 1.234.052 3.637s-.009 2.688-.052 3.637c-.04.877-.187 1.354-.31 1.671a2.98 2.98 0 0 1-1.708 1.708c-.317.123-.794.27-1.671.31-.95.043-1.234.053-3.637.053s-2.688-.01-3.637-.053c-.877-.04-1.354-.187-1.671-.31a2.788 2.788 0 0 1-1.035-.673 2.788 2.788 0 0 1-.673-1.035c-.123-.317-.27-.794-.31-1.671-.043-.949-.052-1.234-.052-3.637s.009-2.688.052-3.637c.04-.877.187-1.354.31-1.67.144-.392.374-.745.673-1.036.29-.299.644-.529 1.035-.673.317-.123.794-.27 1.671-.31.95-.043 1.234-.052 3.637-.052zM16 7c-2.444 0-2.75.01-3.71.054-.959.044-1.613.196-2.185.419-.6.225-1.145.58-1.594 1.038-.458.45-.813.993-1.039 1.594-.222.572-.374 1.226-.418 2.184C7.01 13.25 7 13.556 7 16s.01 2.75.054 3.71c.044.959.196 1.613.419 2.185.226.6.58 1.145 1.038 1.594.45.458.993.813 1.594 1.038.572.223 1.227.375 2.184.419.96.044 1.267.054 3.711.054s2.75-.01 3.71-.054c.959-.044 1.613-.196 2.185-.419a4.602 4.602 0 0 0 2.632-2.632c.223-.572.375-1.226.419-2.184.044-.96.054-1.267.054-3.711s-.01-2.75-.054-3.71c-.044-.959-.196-1.613-.419-2.185A4.412 4.412 0 0 0 23.49 8.51a4.412 4.412 0 0 0-1.594-1.039c-.572-.222-1.226-.374-2.184-.418C18.75 7.01 18.444 7 16 7zm0 4.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9zm0 7.421a2.921 2.921 0 1 1 0-5.842 2.921 2.921 0 0 1 0 5.842zm4.875-6.671a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25z",fill:"#FFF"})))},r.provider=new __Provider_185(t,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders||r.opts.serverHeaders,provider:"instagram",authProvider:"instagram",pluginId:r.id}),r.onFirstRender=r.onFirstRender.bind(___assertThisInitialized_185(r)),r.render=r.render.bind(___assertThisInitialized_185(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.install=function(){this.view=new _$lib_202(this,{provider:this.provider,viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.view.tearDown(),this.unmount()},i.onFirstRender=function(){this.view.getFolder("recent")},i.render=function(e){return this.view.render(e)},r}(__Plugin_185),___class_185.VERSION=_$package_186.version,___temp_185),_$package_188={version:"1.1.6"},___class_187,___temp_187;function ___assertThisInitialized_187(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_187=_$lib_133.Plugin,__Provider_187=_$lib_129.Provider,__h_187=_$preact_80.h,_$lib_187=(___temp_187=___class_187=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"OneDrive",__Provider_187.initPlugin(___assertThisInitialized_187(r),n),r.title=r.opts.title||"OneDrive",r.icon=function(){return __h_187("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_187("g",{fill:"none","fill-rule":"evenodd"},__h_187("rect",{width:"32",height:"32",rx:"16",fill:"#0262C0"}),__h_187("g",{fill:"#FFF","fill-rule":"nonzero"},__h_187("path",{d:"M24.157 22s1.492-.205 1.79-1.655a2.624 2.624 0 0 0 .03-.878c-.22-1.64-1.988-2.01-1.988-2.01s.307-1.765-1.312-2.69c-1.62-.925-3.1 0-3.1 0S18.711 13 16.366 13c-3.016 0-3.519 3.448-3.519 3.448S10 16.618 10 19.14c0 2.523 2.597 2.86 2.597 2.86h11.56z"}),__h_187("path",{d:"M9.421 19.246c0-2.197 1.606-3.159 2.871-3.472.44-1.477 1.654-3.439 4.135-3.439H16.445c1.721 0 2.79.823 3.368 1.476a3.99 3.99 0 0 1 1.147-.171h.01l.03.002C21.017 13.5 20.691 10 16.757 10c-2.69 0-3.639 2.345-3.639 2.345s-1.95-1.482-3.955.567c-1.028 1.052-.79 2.669-.79 2.669S6 15.824 6 18.412C6 20.757 8.452 21 8.452 21h1.372a3.77 3.77 0 0 1-.403-1.754z"}))))},r.provider=new __Provider_187(t,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders||r.opts.serverHeaders,provider:"onedrive",pluginId:r.id}),r.onFirstRender=r.onFirstRender.bind(___assertThisInitialized_187(r)),r.render=r.render.bind(___assertThisInitialized_187(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.install=function(){this.view=new _$lib_202(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.view.tearDown(),this.unmount()},i.onFirstRender=function(){return this.view.getFolder()},i.render=function(e){return this.view.render(e)},r}(__Plugin_187),___class_187.VERSION=_$package_188.version,___temp_187),_$package_169={version:"1.1.6"},___class_168,___temp_168;function ___assertThisInitialized_168(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_168=_$lib_133.Plugin,__Provider_168=_$lib_129.Provider,__h_168=_$preact_80.h,_$lib_168=(___temp_168=___class_168=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).id=r.opts.id||"Facebook",__Provider_168.initPlugin(___assertThisInitialized_168(r),n),r.title=r.opts.title||"Facebook",r.icon=function(){return __h_168("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_168("g",{fill:"none","fill-rule":"evenodd"},__h_168("rect",{width:"32",height:"32",rx:"16",fill:"#3C5A99"}),__h_168("path",{d:"M17.842 26v-8.667h2.653l.398-3.377h-3.051v-2.157c0-.978.248-1.644 1.527-1.644H21V7.132A19.914 19.914 0 0 0 18.623 7c-2.352 0-3.963 1.574-3.963 4.465v2.49H12v3.378h2.66V26h3.182z",fill:"#FFF","fill-rule":"nonzero"})))},r.provider=new __Provider_168(t,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders||r.opts.serverHeaders,provider:"facebook",pluginId:r.id}),r.onFirstRender=r.onFirstRender.bind(___assertThisInitialized_168(r)),r.render=r.render.bind(___assertThisInitialized_168(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.install=function(){this.view=new _$lib_202(this,{provider:this.provider}),this.setPluginState({authenticated:!1,files:[],folders:[],directories:[],activeRow:-1,filterInput:"",isSearchVisible:!1});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.view.tearDown(),this.unmount()},i.onFirstRender=function(){return this.view.getFolder()},i.render=function(e){var t={};return this.getPluginState().files.length&&!this.getPluginState().folders.length&&(t.viewType="grid",t.showFilter=!1,t.showTitles=!1),this.view.render(e,t)},r}(__Plugin_168),___class_168.VERSION=_$package_169.version,___temp_168);function ___assertThisInitialized_236(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __h_236=_$preact_80.h,UrlUI=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleKeyPress=n.handleKeyPress.bind(___assertThisInitialized_236(n)),n.handleClick=n.handleClick.bind(___assertThisInitialized_236(n)),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.input.value=""},i.handleKeyPress=function(e){13===e.keyCode&&this.props.addFile(this.input.value)},i.handleClick=function(){this.props.addFile(this.input.value)},i.render=function(){var e=this;return __h_236("div",{class:"uppy-Url"},__h_236("input",{class:"uppy-u-reset uppy-c-textInput uppy-Url-input",type:"text","aria-label":this.props.i18n("enterUrlToImport"),placeholder:this.props.i18n("enterUrlToImport"),onkeyup:this.handleKeyPress,ref:function(t){e.input=t},"data-uppy-super-focusable":!0}),__h_236("button",{class:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"button",onclick:this.handleClick},this.props.i18n("import")))},r}(_$preact_80.Component),_$UrlUI_236=UrlUI,_$forEachDroppedOrPastedUrl_238={};(function(e){_$forEachDroppedOrPastedUrl_238=function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.forEachDroppedOrPastedUrl","fileName":"'+e+'","paramsNumber":3},');var i,o=_$toArray_274(t.items);switch(n){case"paste":if(o.some(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),"file"===t.kind}))return void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.forEachDroppedOrPastedUrl"},');i=o.filter(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),"string"===t.kind&&"text/plain"===t.type});break;case"drop":i=o.filter(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),"string"===t.kind&&"text/uri-list"===t.type});break;default:throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.forEachDroppedOrPastedUrl"},'),new Error("isDropOrPaste must be either 'drop' or 'paste', but it's "+n)}i.forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},'),t.getAsString(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},'),r(t)}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.forEachDroppedOrPastedUrl"},')}}).call(this,"/packages/@uppy/url/lib/utils/forEachDroppedOrPastedUrl.js");var _$package_239={version:"1.5.6"},___class_237,___temp_237;function ___extends_237(){return(___extends_237=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_237(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_237=_$lib_133.Plugin,__h_237=_$preact_80.h,__RequestClient_237=_$lib_129.RequestClient;function UrlIcon(){return __h_237("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_237("g",{fill:"none","fill-rule":"evenodd"},__h_237("rect",{fill:"#FF753E",width:"32",height:"32",rx:"16"}),__h_237("path",{d:"M22.788 15.389l-2.199 2.19a3.184 3.184 0 0 1-.513.437c-.806.584-1.686.876-2.638.876a4.378 4.378 0 0 1-3.519-1.752c-.22-.292-.146-.802.147-1.021.293-.22.806-.146 1.026.146.953 1.313 2.785 1.532 4.105.583a.571.571 0 0 0 .293-.292l2.199-2.189c1.1-1.167 1.1-2.992-.073-4.086a2.976 2.976 0 0 0-4.105 0l-1.246 1.24a.71.71 0 0 1-1.026 0 .703.703 0 0 1 0-1.022l1.246-1.24a4.305 4.305 0 0 1 6.083 0c1.833 1.605 1.906 4.451.22 6.13zm-7.183 5.035l-1.246 1.24a2.976 2.976 0 0 1-4.105 0c-1.172-1.094-1.172-2.991-.073-4.086l2.2-2.19.292-.291c.66-.438 1.393-.657 2.2-.584.805.146 1.465.51 1.905 1.168.22.292.733.365 1.026.146.293-.22.367-.73.147-1.022-.733-.949-1.76-1.532-2.859-1.678-1.1-.22-2.272.073-3.225.802l-.44.438-2.199 2.19c-1.686 1.75-1.612 4.524.074 6.202.88.803 1.979 1.241 3.078 1.241 1.1 0 2.199-.438 3.079-1.24l1.246-1.241a.703.703 0 0 0 0-1.022c-.294-.292-.807-.365-1.1-.073z",fill:"#FFF","fill-rule":"nonzero"})))}var _$lib_237=(___temp_237=___class_237=function(e){var t,n;function r(t,n){var r;if((r=e.call(this,t,n)||this).id=r.opts.id||"Url",r.title=r.opts.title||"Link",r.type="acquirer",r.icon=function(){return __h_237(UrlIcon,null)},r.defaultLocale={strings:{import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it\u2019s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}},r.opts=___extends_237({},{},{},n),r.i18nInit(),r.hostname=r.opts.companionUrl,!r.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return r.getMeta=r.getMeta.bind(___assertThisInitialized_237(r)),r.addFile=r.addFile.bind(___assertThisInitialized_237(r)),r.handleRootDrop=r.handleRootDrop.bind(___assertThisInitialized_237(r)),r.handleRootPaste=r.handleRootPaste.bind(___assertThisInitialized_237(r)),r.client=new __RequestClient_237(t,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders||r.opts.serverHeaders}),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},i.getFileNameFromUrl=function(e){return e.substring(e.lastIndexOf("/")+1)},i.checkIfCorrectURL=function(e){if(!e)return!1;var t=e.match(/^([a-z0-9]+):\/\//)[1];return"http"===t||"https"===t},i.addProtocolToURL=function(e){return/^[a-z0-9]+:\/\//.test(e)?e:"http://"+e},i.getMeta=function(e){var t=this;return this.client.post("url/meta",{url:e}).then(function(e){if(e.error)throw t.uppy.log("[URL] Error:"),t.uppy.log(e.error),new Error("Failed to fetch the file");return e})},i.addFile=function(e){var t=this;return e=this.addProtocolToURL(e),this.checkIfCorrectURL(e)?this.getMeta(e).then(function(n){return{source:t.id,name:t.getFileNameFromUrl(e),type:n.type,data:{size:n.size},isRemote:!0,body:{url:e},remote:{companionUrl:t.opts.companionUrl,url:t.hostname+"/url/get",body:{fileId:e,url:e},providerOptions:t.client.opts}}}).then(function(e){t.uppy.log("[Url] Adding remote file");try{t.uppy.addFile(e)}catch(err){err.isRestriction||t.uppy.log(err)}}).catch(function(e){t.uppy.log(e),t.uppy.info({message:t.i18n("failedToFetch"),details:e},"error",4e3)}):(this.uppy.log("[URL] Incorrect URL entered: "+e),void this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3))},i.handleRootDrop=function(e){var t=this;_$forEachDroppedOrPastedUrl_238(e.dataTransfer,"drop",function(e){t.uppy.log("[URL] Adding file from dropped url: "+e),t.addFile(e)})},i.handleRootPaste=function(e){var t=this;_$forEachDroppedOrPastedUrl_238(e.clipboardData,"paste",function(e){t.uppy.log("[URL] Adding file from pasted url: "+e),t.addFile(e)})},i.render=function(e){return __h_237(_$UrlUI_236,{i18n:this.i18n,addFile:this.addFile})},i.install=function(){var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.unmount()},r}(__Plugin_237),___class_237.VERSION=_$package_239.version,___temp_237),_$getFileTypeExtension_260={};(function(e){var t={"audio/mp3":"mp3","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};_$getFileTypeExtension_260=function(n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getFileTypeExtension","fileName":"'+e+'","paramsNumber":1},'),n=n.replace(/;.*$/,""),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFileTypeExtension"},'),t[n]||null}}).call(this,"/node_modules/@uppy/utils/lib/getFileTypeExtension.js");var _$canvasToBlob_246={};(function(e){_$canvasToBlob_246=function(t,n,r){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.canvasToBlob","fileName":"'+e+'","paramsNumber":3},'),t.toBlob?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.canvasToBlob"},'),new Promise(function(i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),t.toBlob(i,n,r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')})):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.canvasToBlob"},'),Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),_$dataURItoBlob_247(t.toDataURL(n,r),{})}))}}).call(this,"/node_modules/@uppy/utils/lib/canvasToBlob.js");var _$supportsMediaRecorder_283={};(function(e){_$supportsMediaRecorder_283=function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.supportsMediaRecorder","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.supportsMediaRecorder"},'),"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start}}).call(this,"/packages/@uppy/webcam/lib/supportsMediaRecorder.js");var __h_275=_$preact_80.h,_$CameraIcon_275=function(e){return __h_275("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},__h_275("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z","fill-rule":"evenodd"}))},__h_280=_$preact_80.h,_$SnapshotButton_280=function(e){var t=e.onSnapshot,n=e.i18n;return __h_280("button",{class:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:n("takePicture"),"aria-label":n("takePicture"),onclick:t,"data-uppy-super-focusable":!0},_$CameraIcon_275())},__h_278=_$preact_80.h,_$RecordButton_278=function(e){var t=e.recording,n=e.onStartRecording,r=e.onStopRecording,i=e.i18n;return t?__h_278("button",{class:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:i("stopRecording"),"aria-label":i("stopRecording"),onclick:r,"data-uppy-super-focusable":!0},__h_278("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},__h_278("rect",{x:"15",y:"15",width:"70",height:"70"}))):__h_278("button",{class:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video",type:"button",title:i("startRecording"),"aria-label":i("startRecording"),onclick:n,"data-uppy-super-focusable":!0},__h_278("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},__h_278("circle",{cx:"50",cy:"50",r:"40"})))},_$formatSeconds_281={};(function(e){_$formatSeconds_281=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.formatSeconds","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.formatSeconds"},'),Math.floor(t/60)+":"+String(t%60).padStart(2,0)}}).call(this,"/packages/@uppy/webcam/lib/formatSeconds.js");var __h_279=_$preact_80.h,_$RecordingLength_279=function(e){var t=e.recordingLengthSeconds,n=e.i18n,r=_$formatSeconds_281(t);return __h_279("div",{class:"uppy-Webcam-recordingLength","aria-label":n("recordingLength",{recording_length:r})},r)},__h_276=_$preact_80.h,__Component_276=_$preact_80.Component;function isModeAvailable(e,t){return-1!==e.indexOf(t)}var CameraScreen=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.props.onFocus()},i.componentWillUnmount=function(){this.props.onStop()},i.render=function(){var e=this.props.supportsRecording&&(isModeAvailable(this.props.modes,"video-only")||isModeAvailable(this.props.modes,"audio-only")||isModeAvailable(this.props.modes,"video-audio")),t=isModeAvailable(this.props.modes,"picture"),n=this.props.supportsRecording&&this.props.showRecordingLength;return __h_276("div",{class:"uppy uppy-Webcam-container"},__h_276("div",{class:"uppy-Webcam-videoContainer"},__h_276("video",{class:"uppy-Webcam-video  "+(this.props.mirror?"uppy-Webcam-video--mirrored":""),autoplay:!0,muted:!0,playsinline:!0,srcObject:this.props.src||""})),__h_276("div",{class:"uppy-Webcam-buttonContainer"},n?_$RecordingLength_279(this.props):null," ",t?_$SnapshotButton_280(this.props):null," ",e?_$RecordButton_278(this.props):null))},r}(__Component_276),_$CameraScreen_276=CameraScreen,__h_277=_$preact_80.h,_$PermissionsScreen_277=function(e){return __h_277("div",{class:"uppy-Webcam-permissons"},__h_277("div",{class:"uppy-Webcam-permissonsIcon"},e.icon()),__h_277("h1",{class:"uppy-Webcam-title"},e.hasCamera?e.i18n("allowAccessTitle"):e.i18n("noCameraTitle")),__h_277("p",null,e.hasCamera?e.i18n("allowAccessDescription"):e.i18n("noCameraDescription")))},_$package_284={version:"1.6.6"},___class_282,___temp_282;function ___extends_282(){return(___extends_282=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_282(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __h_282=_$preact_80.h,__Plugin_282=_$lib_133.Plugin;function toMimeType(e){return"."===e[0]?_$mimeTypes_270[e.slice(1)]:e}function isVideoMimeType(e){return/^video\/[^*]+$/.test(e)}function isImageMimeType(e){return/^image\/[^*]+$/.test(e)}var _$lib_282=(___temp_282=___class_282=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).mediaDevices=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)return navigator.mediaDevices;var e=navigator.mozGetUserMedia||navigator.webkitGetUserMedia;return e?{getUserMedia:function(t){return new Promise(function(n,r){e.call(navigator,t,n,r)})}}:null}(),r.supportsUserMedia=!!r.mediaDevices,r.protocol=location.protocol.match(/https/i)?"https":"http",r.id=r.opts.id||"Webcam",r.title=r.opts.title||"Camera",r.type="acquirer",r.icon=function(){return __h_282("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_282("g",{fill:"none","fill-rule":"evenodd"},__h_282("rect",{fill:"#03BFEF",width:"32",height:"32",rx:"16"}),__h_282("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF","fill-rule":"nonzero"})))},r.defaultLocale={strings:{smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site.",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}"}};var i={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,facingMode:"user",preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1};return r.opts=___extends_282({},i,{},n),r.i18nInit(),r.install=r.install.bind(___assertThisInitialized_282(r)),r.setPluginState=r.setPluginState.bind(___assertThisInitialized_282(r)),r.render=r.render.bind(___assertThisInitialized_282(r)),r._start=r._start.bind(___assertThisInitialized_282(r)),r._stop=r._stop.bind(___assertThisInitialized_282(r)),r._takeSnapshot=r._takeSnapshot.bind(___assertThisInitialized_282(r)),r._startRecording=r._startRecording.bind(___assertThisInitialized_282(r)),r._stopRecording=r._stopRecording.bind(___assertThisInitialized_282(r)),r._oneTwoThreeSmile=r._oneTwoThreeSmile.bind(___assertThisInitialized_282(r)),r._focus=r._focus.bind(___assertThisInitialized_282(r)),r.webcamActive=!1,r.opts.countdown&&(r.opts.onBeforeSnapshot=r._oneTwoThreeSmile),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},i.hasCameraCheck=function(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then(function(e){return e.some(function(e){return"videoinput"===e.kind})}):Promise.resolve(!1)},i.getConstraints=function(){return{audio:-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),video:!(-1===this.opts.modes.indexOf("video-audio")&&-1===this.opts.modes.indexOf("video-only")&&-1===this.opts.modes.indexOf("picture"))&&{facingMode:this.opts.facingMode}}},i._start=function(){var e=this;if(!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0;var t=this.getConstraints();this.hasCameraCheck().then(function(n){return e.setPluginState({hasCamera:n}),e.mediaDevices.getUserMedia(t).then(function(t){e.stream=t,e.setPluginState({cameraReady:!0})}).catch(function(t){e.setPluginState({cameraError:t})})})},i._getMediaRecorderOptions=function(){var e={};if(MediaRecorder.isTypeSupported){var t=this.uppy.opts.restrictions,n=[];this.opts.preferredVideoMimeType?n=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(n=t.allowedFileTypes.map(toMimeType).filter(isVideoMimeType));var r=n.filter(function(e){return MediaRecorder.isTypeSupported(e)&&_$getFileTypeExtension_260(e)});r.length>0&&(e.mimeType=r[0])}return e},i._startRecording=function(){var e=this;this.recorder=new MediaRecorder(this.stream,this._getMediaRecorderOptions()),this.recordingChunks=[];var t=!1;this.recorder.addEventListener("dataavailable",function(n){e.recordingChunks.push(n.data);var r=e.uppy.opts.restrictions;if(e.recordingChunks.length>1&&null!=r.maxFileSize&&!t){var i=e.recordingChunks.reduce(function(e,t){return e+t.size},0),o=(i-e.recordingChunks[0].size)/(e.recordingChunks.length-1)*3;i>Math.max(0,r.maxFileSize-o)&&(t=!0,e.uppy.info(e.i18n("recordingStoppedMaxSize"),"warning",4e3),e._stopRecording())}}),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval(function(){var t=e.getPluginState().recordingLengthSeconds;e.setPluginState({recordingLengthSeconds:t+1})},1e3)),this.setPluginState({isRecording:!0})},i._stopRecording=function(){var e=this;return new Promise(function(t,n){e.recorder.addEventListener("stop",function(){t()}),e.recorder.stop(),e.opts.showRecordingLength&&(clearInterval(e.recordingLengthTimer),e.setPluginState({recordingLengthSeconds:0}))}).then(function(){return e.setPluginState({isRecording:!1}),e.getVideo()}).then(function(t){try{e.uppy.addFile(t)}catch(err){err.isRestriction||e.uppy.log(err)}}).then(function(){e.recordingChunks=null,e.recorder=null},function(t){throw e.recordingChunks=null,e.recorder=null,t})},i._stop=function(){this.stream.getAudioTracks().forEach(function(e){e.stop()}),this.stream.getVideoTracks().forEach(function(e){e.stop()}),this.webcamActive=!1,this.stream=null},i._getVideoElement=function(){return this.el.querySelector(".uppy-Webcam-video")},i._oneTwoThreeSmile=function(){var e=this;return new Promise(function(t,n){var r=e.opts.countdown,i=setInterval(function(){if(!e.webcamActive)return clearInterval(i),e.captureInProgress=!1,n(new Error("Webcam is not active"));r>0?(e.uppy.info(r+"...","warning",800),r--):(clearInterval(i),e.uppy.info(e.i18n("smile"),"success",1500),setTimeout(function(){return t()},1500))},1e3)})},i._takeSnapshot=function(){var e=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(function(t){var n="object"==typeof t?t.message:t;return e.uppy.info(n,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: "+n))}).then(function(){return e._getImage()}).then(function(t){e.captureInProgress=!1;try{e.uppy.addFile(t)}catch(err){err.isRestriction||e.uppy.log(err)}},function(t){throw e.captureInProgress=!1,t}))},i._getImage=function(){var e=this,t=this._getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var n=t.videoWidth,r=t.videoHeight,i=document.createElement("canvas");i.width=n,i.height=r,i.getContext("2d").drawImage(t,0,0);var o=this.uppy.opts.restrictions,s=[];this.opts.preferredImageMimeType?s=[this.opts.preferredImageMimeType]:o.allowedFileTypes&&(s=o.allowedFileTypes.map(toMimeType).filter(isImageMimeType));var a=s[0]||"image/jpeg",u=_$getFileTypeExtension_260(a)||"jpg",l="cam-"+Date.now()+"."+u;return _$canvasToBlob_246(i,a).then(function(t){return{source:e.id,name:l,data:new Blob([t],{type:a}),type:a}})},i.getVideo=function(){var e=this.recordingChunks[0].type,t=_$getFileTypeExtension_260(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+e+'"'));var n="webcam-"+Date.now()+"."+t,r=new Blob(this.recordingChunks,{type:e}),i={source:this.id,name:n,data:new Blob([r],{type:e}),type:e};return Promise.resolve(i)},i._focus=function(){var e=this;this.opts.countdown&&setTimeout(function(){e.uppy.info(e.i18n("smile"),"success",1500)},1e3)},i.render=function(){this.webcamActive||this._start();var e=this.getPluginState();return e.cameraReady&&e.hasCamera?__h_282(_$CameraScreen_276,___extends_282({},e,{onSnapshot:this._takeSnapshot,onStartRecording:this._startRecording,onStopRecording:this._stopRecording,onFocus:this._focus,onStop:this._stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,supportsRecording:_$supportsMediaRecorder_283(),recording:e.isRecording,mirror:this.opts.mirror,src:this.stream})):__h_282(_$PermissionsScreen_277,{icon:_$CameraIcon_275,i18n:this.i18n,hasCamera:e.hasCamera})},i.install=function(){this.setPluginState({cameraReady:!1,recordingLengthSeconds:0});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.stream&&this._stop(),this.unmount()},r}(__Plugin_282),___class_282.VERSION=_$package_284.version,___temp_282),__h_208=_$preact_80.h,_$ScreenRecIcon_208=function(){return __h_208("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},__h_208("g",{fill:"none","fill-rule":"evenodd"},__h_208("rect",{fill:"#2C3E50",width:"32",height:"32",rx:"16"}),__h_208("path",{d:"M24.182 9H7.818C6.81 9 6 9.742 6 10.667v10c0 .916.81 1.666 1.818 1.666h4.546V24h7.272v-1.667h4.546c1 0 1.809-.75 1.809-1.666l.009-10C26 9.742 25.182 9 24.182 9zM24 21H8V11h16v10z",fill:"#FFF","fill-rule":"nonzero"}),__h_208("circle",{fill:"#FFF",cx:"16",cy:"16",r:"2"})))},__h_207=_$preact_80.h,_$RecordButton_207=function(e){var t=e.recording,n=e.onStartRecording,r=e.onStopRecording,i=e.i18n;return t?__h_207("button",{class:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video uppy-ScreenCapture-button--stop-rec",type:"button",title:i("stopRecording"),"aria-label":i("stopRecording"),onclick:r,"data-uppy-super-focusable":!0},__h_207("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},__h_207("rect",{x:"15",y:"15",width:"70",height:"70"}))):__h_207("button",{class:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video",type:"button",title:i("startCapturing"),"aria-label":i("stopCapturing"),onclick:n,"data-uppy-super-focusable":!0},__h_207("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"100",height:"100",viewBox:"0 0 100 100"},__h_207("circle",{cx:"50",cy:"50",r:"40"})))},__h_211=_$preact_80.h,_$SubmitButton_211=function(e){var t=e.recording,n=e.recordedVideo,r=e.onSubmit,i=e.i18n;return n&&!t?__h_211("button",{class:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onclick:r,"data-uppy-super-focusable":!0},__h_211("svg",{"aria-hidden":"true",focusable:"false",class:"UppyIcon",width:"48",height:"48",viewBox:"0 0 48 48"},__h_211("path",{d:"M0 0h48v48h-48z",fill:"none"}),__h_211("path",{d:"M38.71 20.07c-1.36-6.88-7.43-12.07-14.71-12.07-5.78 0-10.79 3.28-13.3 8.07-6.01.65-10.7 5.74-10.7 11.93 0 6.63 5.37 12 12 12h26c5.52 0 10-4.48 10-10 0-5.28-4.11-9.56-9.29-9.93zm-10.71 5.93v8h-8v-8h-6l10-10 10 10h-6z"}))):null};function ___extends_209(){return(___extends_209=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_209=_$preact_80.h,Stopwatch=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).state={elapsedTime:0},n.wrapperStyle={width:"100%",height:"100%",display:"flex"},n.overlayStyle={position:"absolute",width:"100%",height:"100%",background:"black",opacity:.7},n.infoContainerStyle={marginLeft:"auto",marginRight:"auto",marginTop:"auto",marginBottom:"auto",zIndex:1,color:"white"},n.infotextStyle={marginLeft:"auto",marginRight:"auto",marginBottom:"1rem",fontSize:"1.5rem"},n.timeStyle={display:"block",fontWeight:"bold",marginLeft:"auto",marginRight:"auto",fontSize:"3rem",fontFamily:"Courier New"},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.startTimer=function(){this.timerTick(),this.timerRunning=!0},i.resetTimer=function(){clearTimeout(this.timer),this.setState({elapsedTime:0}),this.timerRunning=!1},i.timerTick=function(){var e=this;this.timer=setTimeout(function(){e.setState({elapsedTime:e.state.elapsedTime+1}),e.timerTick()},1e3)},i.fmtMSS=function(e){return(e-(e%=60))/60+(e>9?":":":0")+e},i.render=function(){var e=___extends_209({},this.props),t=e.recording,n=e.i18n,r=this.fmtMSS(this.state.elapsedTime);return t&&!this.timerRunning&&this.startTimer(),!t&&this.timerRunning&&this.resetTimer(),t?__h_209("div",{style:this.wrapperStyle},__h_209("div",{style:this.overlayStyle}),__h_209("div",{style:this.infoContainerStyle},__h_209("div",{style:this.infotextStyle},n("recording")),__h_209("div",{style:this.timeStyle},r))):null},r}(_$preact_80.Component),_$Stopwatch_209=Stopwatch,__h_210=_$preact_80.h,_$StreamStatus_210=function(e){var t=e.streamActive,n=e.i18n;return t?__h_210("div",{title:n("streamActive"),"aria-label":n("streamActive"),class:"uppy-ScreenCapture-icon--stream uppy-ScreenCapture-icon--streamActive"},__h_210("svg",{"aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},__h_210("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),__h_210("path",{d:"M0 0h24v24H0z",fill:"none"}),__h_210("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))):__h_210("div",{title:n("streamPassive"),"aria-label":n("streamPassive"),class:"uppy-ScreenCapture-icon--stream"},__h_210("svg",{"aria-hidden":"true",focusable:"false",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},__h_210("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),__h_210("path",{d:"M0 0h24v24H0z",fill:"none"}),__h_210("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z"})))};function ___extends_206(){return(___extends_206=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __h_206=_$preact_80.h,__Component_206=_$preact_80.Component,RecorderScreen=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentWillUnmount=function(){this.props.onStop()},i.render=function(){var e=this,t=this.props,n=t.recording,r=t.stream,i=t.recordedVideo,o={playsinline:!0};return(n||!i&&!n)&&(o.muted=!0,o.autoplay=!0,o.srcObject=r),i&&!n&&(o.muted=!1,o.controls=!0,o.src=i,this.videoElement&&(this.videoElement.srcObject=void 0)),__h_206("div",{class:"uppy uppy-ScreenCapture-container"},__h_206("div",{class:"uppy-ScreenCapture-videoContainer"},__h_206(_$StreamStatus_210,this.props),__h_206("video",___extends_206({ref:function(t){return e.videoElement=t},class:"uppy-ScreenCapture-video"},o)),__h_206(_$Stopwatch_209,this.props)),__h_206("div",{class:"uppy-ScreenCapture-buttonContainer"},__h_206(_$RecordButton_207,this.props),__h_206(_$SubmitButton_211,this.props)))},r}(__Component_206),_$RecorderScreen_206=RecorderScreen,_$package_213={version:"1.0.2"},___class_212,___temp_212;function ___extends_212(){return(___extends_212=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_212(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __h_212=_$preact_80.h,__Plugin_212=_$lib_133.Plugin,_$lib_212=(___temp_212=___class_212=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).mediaDevices=navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia&&window&&window.MediaRecorder?navigator.mediaDevices:null,r.protocol=location.protocol.match(/https/i)?"https":"http",r.id=r.opts.id||"ScreenCapture",r.title=r.opts.title||"Screencast",r.type="acquirer",r.icon=_$ScreenRecIcon_208,r.defaultLocale={strings:{startCapturing:"Begin screen capturing",stopCapturing:"Stop screen capturing",submitRecordedFile:"Submit captured video",streamActive:"Stream active",streamPassive:"Stream passive",micDisabled:"Microphone access denied by user",recording:"Recording"}},r.opts=___extends_212({},{displayMediaConstraints:{video:{width:1280,height:720,frameRate:{ideal:3,max:5},cursor:"motion",displaySurface:"monitor"}},userMediaConstraints:{audio:!0},preferredVideoMimeType:"video/webm"},{},n),r.translator=new _$Translator_245([r.defaultLocale,r.uppy.locale,r.opts.locale]),r.i18n=r.translator.translate.bind(r.translator),r.i18nArray=r.translator.translateArray.bind(r.translator),r.install=r.install.bind(___assertThisInitialized_212(r)),r.setPluginState=r.setPluginState.bind(___assertThisInitialized_212(r)),r.render=r.render.bind(___assertThisInitialized_212(r)),r.start=r.start.bind(___assertThisInitialized_212(r)),r.stop=r.stop.bind(___assertThisInitialized_212(r)),r.startRecording=r.startRecording.bind(___assertThisInitialized_212(r)),r.stopRecording=r.stopRecording.bind(___assertThisInitialized_212(r)),r.submit=r.submit.bind(___assertThisInitialized_212(r)),r.streamInterrupted=r.streamInactivated.bind(___assertThisInitialized_212(r)),r.captureActive=!1,r.capturedMediaFile=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.install=function(){if(!this.mediaDevices)return this.uppy.log("Screen recorder access is not supported","error"),null;this.setPluginState({streamActive:!1,audioStreamActive:!1});var e=this.opts.target;e&&this.mount(e,this)},i.uninstall=function(){this.videoStream&&this.stop(),this.unmount()},i.start=function(){var e=this;if(!this.mediaDevices)return Promise.reject(new Error("Screen recorder access not supported"));this.captureActive=!0,this.selectAudioStreamSource(),this.selectVideoStreamSource().then(function(t){!1===t&&e.parent&&e.parent.hideAllPanels&&(e.parent.hideAllPanels(),e.captureActive=!1)})},i.selectVideoStreamSource=function(){var e=this;return this.videoStream?new Promise(function(t){return t(e.videoStream)}):this.mediaDevices.getDisplayMedia(this.opts.displayMediaConstraints).then(function(t){return e.videoStream=t,e.videoStream.addEventListener("inactive",function(t){e.streamInactivated()}),e.setPluginState({streamActive:!0}),t}).catch(function(t){return e.setPluginState({screenRecError:t}),e.userDenied=!0,setTimeout(function(){e.userDenied=!1},1e3),!1})},i.selectAudioStreamSource=function(){var e=this;return this.audioStream?new Promise(function(t){return t(e.audioStream)}):this.mediaDevices.getUserMedia(this.opts.userMediaConstraints).then(function(t){return e.audioStream=t,e.setPluginState({audioStreamActive:!0}),t}).catch(function(t){return"NotAllowedError"===t.name&&e.uppy.info(e.i18n("micDisabled"),"error",5e3),!1})},i.startRecording=function(){var e=this,t={};this.capturedMediaFile=null,this.recordingChunks=[];var n=this.opts.preferredVideoMimeType;this.selectVideoStreamSource().then(function(r){n&&MediaRecorder.isTypeSupported(n)&&_$getFileTypeExtension_260(n)&&(t.mimeType=n);var i=[r.getVideoTracks()[0]];e.audioStream&&i.push(e.audioStream.getAudioTracks()[0]),e.outputStream=new MediaStream(i),e.recorder=new MediaRecorder(e.outputStream,t),e.recorder.addEventListener("dataavailable",function(t){e.recordingChunks.push(t.data)}),e.recorder.start(),e.setPluginState({recording:!0})}).catch(function(t){e.uppy.log(t,"error")})},i.streamInactivated=function(){var e=___extends_212({},this.getPluginState()),t=e.recordedVideo,n=e.recording;t||n?n&&(this.uppy.log("Capture stream inactive \u2014 stop recording"),this.stopRecording()):this.parent&&this.parent.hideAllPanels&&this.parent.hideAllPanels(),this.videoStream=null,this.audioStream=null,this.setPluginState({streamActive:!1,audioStreamActive:!1})},i.stopRecording=function(){var e=this;return new Promise(function(t,n){e.recorder.addEventListener("stop",function(){t()}),e.recorder.stop()}).then(function(){return e.setPluginState({recording:!1}),e.getVideo()}).then(function(t){e.capturedMediaFile=t,e.setPluginState({recordedVideo:URL.createObjectURL(t.data)})}).then(function(){e.recordingChunks=null,e.recorder=null},function(t){throw e.recordingChunks=null,e.recorder=null,t})},i.submit=function(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(err){err.isRestriction||this.uppy.log(err,"error")}},i.stop=function(){this.videoStream&&(this.videoStream.getVideoTracks().forEach(function(e){e.stop()}),this.videoStream.getAudioTracks().forEach(function(e){e.stop()}),this.videoStream=null),this.audioStream&&(this.audioStream.getAudioTracks().forEach(function(e){e.stop()}),this.audioStream.getVideoTracks().forEach(function(e){e.stop()}),this.audioStream=null),this.outputStream&&(this.outputStream.getAudioTracks().forEach(function(e){e.stop()}),this.outputStream.getVideoTracks().forEach(function(e){e.stop()}),this.outputStream=null),this.setPluginState({recordedVideo:null}),this.captureActive=!1},i.getVideo=function(){var e=this.recordingChunks[0].type,t=_$getFileTypeExtension_260(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'+e+'"'));var n="screencap-"+Date.now()+"."+t,r=new Blob(this.recordingChunks,{type:e}),i={source:this.id,name:n,data:new Blob([r],{type:e}),type:e};return Promise.resolve(i)},i.render=function(e){var t=this.getPluginState();return t.streamActive||this.captureActive||this.userDenied||this.start(),__h_212(_$RecorderScreen_206,___extends_212({},t,{onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onStop:this.stop,onSubmit:this.submit,i18n:this.i18n,stream:this.videoStream}))},r}(__Plugin_212),___class_212.VERSION=_$package_213.version,___temp_212),_$requiresPort_84=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},_$querystringify_83={},undef,has=Object.prototype.hasOwnProperty;function decode(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}_$querystringify_83.stringify=function(e,t){t=t||"";var n,r,i=[];for(r in"string"!=typeof t&&(t="?"),e)if(has.call(e,r)){if((n=e[r])||null!==n&&n!==undef&&!isNaN(n)||(n=""),r=encodeURIComponent(r),n=encodeURIComponent(n),null===r||null===n)continue;i.push(r+"="+n)}return i.length?t+i.join("&"):""},_$querystringify_83.parse=function(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=decode(t[1]),o=decode(t[2]);null===i||null===o||i in r||(r[i]=o)}return r};var _$urlParse_115={};(function(e){"use strict";var t=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,n=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,r=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function i(e){return(e||"").toString().replace(r,"")}var o=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],s={hash:1,query:1};function a(n){var r,i=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(n=n||i);if("blob:"===n.protocol)o=new l(unescape(n.pathname),{});else if("string"===a)for(r in o=new l(n,{}),s)delete o[r];else if("object"===a){for(r in n)r in s||(o[r]=n[r]);void 0===o.slashes&&(o.slashes=t.test(n.href))}return o}function u(e){e=i(e);var t=n.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function l(e,t,n){if(e=i(e),!(this instanceof l))return new l(e,t,n);var r,s,c,p,d,_,f=o.slice(),h=typeof t,m=this,y=0;for("object"!==h&&"string"!==h&&(n=t,t=null),n&&"function"!=typeof n&&(n=_$querystringify_83.parse),t=a(t),r=!(s=u(e||"")).protocol&&!s.slashes,m.slashes=s.slashes||r&&t.slashes,m.protocol=s.protocol||t.protocol||"",e=s.rest,s.slashes||(f[3]=[/(.*)/,"pathname"]);y<f.length;y++)"function"!=typeof(p=f[y])?(c=p[0],_=p[1],c!=c?m[_]=e:"string"==typeof c?~(d=e.indexOf(c))&&("number"==typeof p[2]?(m[_]=e.slice(0,d),e=e.slice(d+p[2])):(m[_]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(m[_]=d[1],e=e.slice(0,d.index)),m[_]=m[_]||r&&p[3]&&t[_]||"",p[4]&&(m[_]=m[_].toLowerCase())):e=p(e);n&&(m.query=n(m.query)),r&&t.slashes&&"/"!==m.pathname.charAt(0)&&(""!==m.pathname||""!==t.pathname)&&(m.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(m.pathname,t.pathname)),_$requiresPort_84(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(p=m.auth.split(":"),m.username=p[0]||"",m.password=p[1]||""),m.origin=m.protocol&&m.host&&"file:"!==m.protocol?m.protocol+"//"+m.host:"null",m.href=m.toString()}l.prototype={set:function(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||_$querystringify_83.parse)(t)),r[e]=t;break;case"port":r[e]=t,_$requiresPort_84(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";r[e]=t.charAt(0)!==i?i+t:t}else r[e]=t;break;default:r[e]=t}for(var s=0;s<o.length;s++){var a=o[s];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(e){e&&"function"==typeof e||(e=_$querystringify_83.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(i+=n.hash),i}},l.extractProtocol=u,l.location=a,l.trimLeft=i,l.qs=_$querystringify_83,_$urlParse_115=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$RateLimitedQueue_244={};(function(e){_$RateLimitedQueue_244=function(){function t(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"RateLimitedQueue"}},'),this.limit="number"!=typeof t||0===t?1/0:t,this.activeRequests=0,this.queuedHandlers=[],_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var n=t.prototype;return n._call=function(t){var n=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_call","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"RateLimitedQueue"}},'),this.activeRequests+=1;var r,i=!1;try{r=t()}catch(err){throw this.activeRequests-=1,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_call"},'),err}return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_call"},'),{abort:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),i?_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'):(i=!0,n.activeRequests-=1,r(),n._queueNext(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'))},done:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),i?_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'):(i=!0,n.activeRequests-=1,n._queueNext(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'))}}},n._queueNext=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_queueNext","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"RateLimitedQueue"}},'),Promise.resolve().then(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":0},'),t._next(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_queueNext"},')},n._next=function(){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_next","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"RateLimitedQueue"}},'),this.activeRequests>=this.limit)_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_next"},');else if(0!==this.queuedHandlers.length){var t=this.queuedHandlers.shift(),n=this._call(t.fn);t.abort=n.abort,t.done=n.done,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_next"},')}else _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_next"},')},n._queue=function(t,n){var r=this;void 0===n&&(n={}),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_queue","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"RateLimitedQueue"}},');var i={fn:t,priority:n.priority||0,abort:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":0},'),r._dequeue(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')},done:function(){throw _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},'),new Error("Cannot mark a queued request as done: this indicates a bug")}},o=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"findIndex","fileName":"'+e+'","paramsNumber":2},');for(var r=0;r<t.length;r++)if(o=t[r],_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},'),i.priority>o.priority)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"findIndex"},'),r;var o;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"findIndex"},'),-1}(this.queuedHandlers);return-1===o?this.queuedHandlers.push(i):this.queuedHandlers.splice(o,0,i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_queue"},'),i},n._dequeue=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_dequeue","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"RateLimitedQueue"}},');var n=this.queuedHandlers.indexOf(t);-1!==n&&this.queuedHandlers.splice(n,1),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_dequeue"},')},n.run=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"run","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"RateLimitedQueue"}},'),this.activeRequests<this.limit?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"run"},'),this._call(t)):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"run"},'),this._queue(t,n))},n.wrapPromiseFunction=function(t,n){var r=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"wrapPromiseFunction","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"RateLimitedQueue"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"wrapPromiseFunction"},'),function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];var a;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey13","fileName":"'+e+'","paramsNumber":1},');var u=new Promise(function(i,s){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey11","fileName":"'+e+'","paramsNumber":2},'),a=r.run(function(){var n,r;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":0},');try{r=Promise.resolve(t.apply(void 0,o))}catch(err){r=Promise.reject(err)}return r.then(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":1},'),n?s(n):(a.done(),i(t)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},')},function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},'),n?s(n):(a.done(),s(t)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},'),function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"createCancelError","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"createCancelError"},'),n=new Error("Cancelled"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},')}},n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey11"},')});return u.abort=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey12","fileName":"'+e+'","paramsNumber":0},'),a.abort(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey12"},')},_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey13"},'),u}},t}()}).call(this,"/node_modules/@uppy/utils/lib/RateLimitedQueue.js");var _$settle_273={};(function(e){_$settle_273=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.settle","fileName":"'+e+'","paramsNumber":1},');var n=[],r=[];function i(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"resolved","fileName":"'+e+'","paramsNumber":1},'),n.push(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"resolved","paramsNumber":1},')}function o(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"rejected","fileName":"'+e+'","paramsNumber":1},'),r.push(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"rejected","paramsNumber":1},')}var s=Promise.all(t.map(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),t.then(i,o)}));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.settle"},'),s.then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),{successful:n,failed:r}})}}).call(this,"/node_modules/@uppy/utils/lib/settle.js");var __has_82=Object.prototype.hasOwnProperty,_$queryStringify_82=function e(t,n){var r=[];for(var i in t)if(__has_82.call(t,i)){var o,s=t[i],a=encodeURIComponent(i);o="object"==typeof s?e(s,n?n+"["+a+"]":a):(n?n+"["+a+"]":a)+"="+encodeURIComponent(s),r.push(o)}return r.join("&")},_$emitSocketProgress_248={};(function(e){_$emitSocketProgress_248=_$lodashThrottle_72(function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_emitSocketProgress","fileName":"'+e+'","paramsNumber":3},');var i=n.progress,o=n.bytesUploaded,s=n.bytesTotal;i&&(t.uppy.log("Upload progress: "+i),t.uppy.emit("upload-progress",r,{uploader:t,bytesUploaded:o,bytesTotal:s})),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_emitSocketProgress","paramsNumber":3},')},300,{leading:!0,trailing:!0})}).call(this,"/node_modules/@uppy/utils/lib/emitSocketProgress.js");var _$getSocketHost_261={};(function(e){_$getSocketHost_261=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getSocketHost","fileName":"'+e+'","paramsNumber":1},');var n=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(t)[1],r=/^http:\/\//i.test(t)?"ws":"wss";return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getSocketHost"},'),r+"://"+n}}).call(this,"/node_modules/@uppy/utils/lib/getSocketHost.js");var _$EventTracker_240={};(function(e){_$EventTracker_240=function(){function t(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"EventTracker"}},'),this._events=[],this._emitter=t,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var n=t.prototype;return n.on=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"on","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"EventTracker"}},'),this._events.push([t,n]),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"on"},'),this._emitter.on(t,n)},n.remove=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"remove","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"EventTracker"}},'),this._events.forEach(function(n){var r=n[0],i=n[1];_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),t._emitter.off(r,i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"remove"},')},t}()}).call(this,"/node_modules/@uppy/utils/lib/EventTracker.js");var _$ProgressTimeout_243={};(function(e){var t=function(){function t(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"ProgressTimeout"}},'),this._timeout=t,this._onTimedOut=n,this._isDone=!1,this._aliveTimer=null,this._onTimedOut=this._onTimedOut.bind(this),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var n=t.prototype;return n.progress=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"progress","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"ProgressTimeout"}},'),this._isDone?_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"progress"},'):(this._timeout>0&&(this._aliveTimer&&clearTimeout(this._aliveTimer),this._aliveTimer=setTimeout(this._onTimedOut,this._timeout)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"progress"},'))},n.done=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"done","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"ProgressTimeout"}},'),this._aliveTimer&&(clearTimeout(this._aliveTimer),this._aliveTimer=null),this._isDone=!0,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"done"},')},t}();_$ProgressTimeout_243=t}).call(this,"/node_modules/@uppy/utils/lib/ProgressTimeout.js");var _$isNetworkError_267={};(function(e){_$isNetworkError_267=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"isNetworkError","fileName":"'+e+'","paramsNumber":1},'),t?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"isNetworkError"},'),0!==t.readyState&&4!==t.readyState||0===t.status):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"isNetworkError"},'),!1)}}).call(this,"/node_modules/@uppy/utils/lib/isNetworkError.js");var _$MiniXHRUpload_122={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n=_$lib_129.Provider,r=_$lib_129.RequestClient,i=_$lib_129.Socket;function o(n,r){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"buildResponseError","fileName":"'+e+'","paramsNumber":2},'),r||(r=new Error("Upload error")),"string"==typeof r&&(r=new Error(r)),r instanceof Error||(r=t(new Error("Upload error"),{data:r})),_$isNetworkError_267(n)?(r=new _$NetworkError_242(r,n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"buildResponseError"},'),r):(r.request=n,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"buildResponseError"},'),r)}_$MiniXHRUpload_122=function(){function s(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},'),this.uppy=n,this.opts=t({validateStatus:function(t,n,r){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.opts.validateStatus","fileName":"'+e+'","paramsNumber":3},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.opts.validateStatus"},'),t>=200&&t<300}},r),this.requests=r.__queue,this.uploaderEvents=Object.create(null),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var a=s.prototype;return a._getOptions=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_getOptions","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"MiniXHRUpload"}},');var r=this.uppy.getState().xhrUpload,i=t({},this.opts,{},r||{},{},n.xhrUpload||{},{headers:{}});return t(i.headers,this.opts.headers),r&&t(i.headers,r.headers),n.xhrUpload&&t(i.headers,n.xhrUpload.headers),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_getOptions"},'),i},a.uploadFile=function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"uploadFile","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"MiniXHRUpload"}},');var i=this.uppy.getFile(t);if(i.error)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"uploadFile"},'),new Error(i.error);return i.isRemote?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"uploadFile"},'),this._uploadRemoteFile(i,n,r)):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"uploadFile"},'),this._uploadLocalFile(i,n,r))},a._addMetadata=function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_addMetadata","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"MiniXHRUpload"}},'),(Array.isArray(r.metaFields)?r.metaFields:Object.keys(n)).forEach(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),t.append(r,n[r]),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_addMetadata"},')},a._createFormDataUpload=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_createFormDataUpload","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},');var r=new FormData;this._addMetadata(r,t.meta,n);var i=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"setTypeInBlob","fileName":"'+e+'","paramsNumber":1},');var n=t.data.slice(0,t.data.size,t.meta.type);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"setTypeInBlob"},'),n}(t);return t.name?r.append(n.fieldName,i,t.meta.name):r.append(n.fieldName,i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_createFormDataUpload"},'),r},a._createBareUpload=function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_createBareUpload","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_createBareUpload"},'),t.data},a._onFileRemoved=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onFileRemoved","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},'),this.uploaderEvents[t].on("file-removed",function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),t===r.id&&n(r.id),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onFileRemoved"},')},a._onRetry=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onRetry","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},'),this.uploaderEvents[t].on("upload-retry",function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),t===r&&n(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onRetry"},')},a._onRetryAll=function(t,n){var r=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onRetryAll","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},'),this.uploaderEvents[t].on("retry-all",function(i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),r.uppy.getFile(t)?(n(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onRetryAll"},')},a._onCancelAll=function(t,n){var r=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onCancelAll","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MiniXHRUpload"}},'),this.uploaderEvents[t].on("cancel-all",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":0},'),r.uppy.getFile(t)?(n(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onCancelAll"},')},a._uploadLocalFile=function(t,n,r){var i=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_uploadLocalFile","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"MiniXHRUpload"}},');var s=this._getOptions(t);return this.uppy.log("uploading "+n+" of "+r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadLocalFile"},'),new Promise(function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey16","fileName":"'+e+'","paramsNumber":2},');var a=s.formData?i._createFormDataUpload(t,s):i._createBareUpload(t,s),u=new XMLHttpRequest;i.uploaderEvents[t.id]=new _$EventTracker_240(i.uppy);var l=new _$ProgressTimeout_243(s.timeout,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":0},'),u.abort(),p.done();var n=new Error(i.i18n("timedOut",{seconds:Math.ceil(s.timeout/1e3)}));i.uppy.emit("upload-error",t,n),r(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},')}),c=_$cuid_40();u.upload.addEventListener("loadstart",function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":1},'),i.uppy.log("[AwsS3/XHRUpload] "+c+" started"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},')}),u.upload.addEventListener("progress",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},'),i.uppy.log("[AwsS3/XHRUpload] "+c+" progress: "+n.loaded+" / "+n.total),l.progress(),n.lengthComputable&&i.uppy.emit("upload-progress",t,{uploader:i,bytesUploaded:n.loaded,bytesTotal:n.total}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},')}),u.addEventListener("load",function(a){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":1},'),i.uppy.log("[AwsS3/XHRUpload] "+c+" finished"),l.done(),p.done(),i.uploaderEvents[t.id]&&(i.uploaderEvents[t.id].remove(),i.uploaderEvents[t.id]=null),s.validateStatus(a.target.status,u.responseText,u)){var d=s.getResponseData(u.responseText,u),_=d[s.responseUrlFieldName],f={status:a.target.status,body:d,uploadURL:_};return i.uppy.emit("upload-success",t,f),_&&i.uppy.log("Download "+t.name+" from "+_),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},'),n(t)}var h=s.getResponseData(u.responseText,u),m=o(u,s.getResponseError(u.responseText,u)),y={status:a.target.status,body:h};return i.uppy.emit("upload-error",t,m,y),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},'),r(m)}),u.addEventListener("error",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":1},'),i.uppy.log("[AwsS3/XHRUpload] "+c+" errored"),l.done(),p.done(),i.uploaderEvents[t.id]&&(i.uploaderEvents[t.id].remove(),i.uploaderEvents[t.id]=null);var a=o(u,s.getResponseError(u.responseText,u));return i.uppy.emit("upload-error",t,a),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},'),r(a)}),u.open(s.method.toUpperCase(),s.endpoint,!0),u.withCredentials=s.withCredentials,""!==s.responseType&&(u.responseType=s.responseType),Object.keys(s.headers).forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey11","fileName":"'+e+'","paramsNumber":1},'),u.setRequestHeader(t,s.headers[t]),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey11"},')});var p=i.requests.run(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey13","fileName":"'+e+'","paramsNumber":0},'),u.send(a),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey13"},'),function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey12","fileName":"'+e+'","paramsNumber":0},'),l.done(),u.abort(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey12"},')}},{priority:1});i._onFileRemoved(t.id,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey14","fileName":"'+e+'","paramsNumber":0},'),p.abort(),r(new Error("File removed")),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey14"},')}),i._onCancelAll(t.id,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey15","fileName":"'+e+'","paramsNumber":0},'),p.abort(),r(new Error("Upload cancelled")),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey15"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey16"},')})},a._uploadRemoteFile=function(o,s,a){var u=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_uploadRemoteFile","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"MiniXHRUpload"}},');var l=this._getOptions(o);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadRemoteFile"},'),new Promise(function(s,a){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey29","fileName":"'+e+'","paramsNumber":2},');var c={};(Array.isArray(l.metaFields)?l.metaFields:Object.keys(o.meta)).forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey17","fileName":"'+e+'","paramsNumber":1},'),c[t]=o.meta[t],_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey17"},')}),new(o.remote.providerOptions.provider?n:r)(u.uppy,o.remote.providerOptions).post(o.remote.url,t({},o.remote.body,{endpoint:l.endpoint,size:o.data.size,fieldname:l.fieldName,metadata:c,httpMethod:l.method,useFormData:l.formData,headers:l.headers})).then(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey27","fileName":"'+e+'","paramsNumber":1},');var r=n.token,c=_$getSocketHost_261(o.remote.companionUrl),p=new i({target:c+"/api/"+r,autoOpen:!1});u.uploaderEvents[o.id]=new _$EventTracker_240(u.uppy),u._onFileRemoved(o.id,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey18","fileName":"'+e+'","paramsNumber":0},'),p.send("pause",{}),d.abort(),s("upload "+o.id+" was removed"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey18"},')}),u._onCancelAll(o.id,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey19","fileName":"'+e+'","paramsNumber":0},'),p.send("pause",{}),d.abort(),s("upload "+o.id+" was canceled"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey19"},')}),u._onRetry(o.id,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey20","fileName":"'+e+'","paramsNumber":0},'),p.send("pause",{}),p.send("resume",{}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey20"},')}),u._onRetryAll(o.id,function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey21","fileName":"'+e+'","paramsNumber":0},'),p.send("pause",{}),p.send("resume",{}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey21"},')}),p.on("progress",function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey22","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey22"},'),_$emitSocketProgress_248(u,t,o)}),p.on("success",function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey23","fileName":"'+e+'","paramsNumber":1},');var n=l.getResponseData(t.response.responseText,t.response),r=n[l.responseUrlFieldName],i={status:t.response.status,body:n,uploadURL:r};return u.uppy.emit("upload-success",o,i),d.done(),u.uploaderEvents[o.id]&&(u.uploaderEvents[o.id].remove(),u.uploaderEvents[o.id]=null),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey23"},'),s()}),p.on("error",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey24","fileName":"'+e+'","paramsNumber":1},');var r=n.response,i=r?l.getResponseError(r.responseText,r):t(new Error(n.error.message),{cause:n.error});u.uppy.emit("upload-error",o,i),d.done(),u.uploaderEvents[o.id]&&(u.uploaderEvents[o.id].remove(),u.uploaderEvents[o.id]=null),a(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey24"},')});var d=u.requests.run(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey26","fileName":"'+e+'","paramsNumber":0},'),p.open(),o.isPaused&&p.send("pause",{}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey26"},'),function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey25","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey25"},'),p.close()}});_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey27"},')}).catch(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey28","fileName":"'+e+'","paramsNumber":1},'),u.uppy.emit("upload-error",o,t),a(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey28"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey29"},')})},s}()}).call(this,"/packages/@uppy/aws-s3/lib/MiniXHRUpload.js");var _$package_124={version:"1.6.5"},___class_123,___temp_123;function ___assertThisInitialized_123(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ___extends_123(){return(___extends_123=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var URL_="function"==typeof URL?URL:_$urlParse_115,__Plugin_123=_$lib_133.Plugin,__RequestClient_123=_$lib_129.RequestClient;function isXml(e,t){var n=t.headers?t.headers["content-type"]:t.getResponseHeader("Content-Type");if(null===n)return!1;var r=n.replace(/;.*$/,"").toLowerCase();if("string"==typeof r){if("application/xml"===r||"text/xml"===r)return!0;if("text/html"===r&&/^<\?xml /.test(e))return!0}return!1}function getXmlValue(e,t){var n=e.indexOf("<"+t+">"),r=e.indexOf("</"+t+">",n);return-1!==n&&-1!==r?e.slice(n+t.length+2,r):""}function assertServerError(e){if(e&&e.error){var t=new Error(e.message);throw ___extends_123(t,e.error),t}return e}var warnedSuccessActionStatus=!1,_$lib_123=(___temp_123=___class_123=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).type="uploader",r.id=r.opts.id||"AwsS3",r.title="AWS S3";var i={timeout:3e4,limit:0,metaFields:[],getUploadParameters:r.getUploadParameters.bind(___assertThisInitialized_123(r))};return r.opts=___extends_123({},i,{},n),r.client=new __RequestClient_123(t,n),r.handleUpload=r.handleUpload.bind(___assertThisInitialized_123(r)),r.requests=new _$RateLimitedQueue_244(r.opts.limit),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getUploadParameters=function(e){if(!this.opts.companionUrl)throw new Error("Expected a `companionUrl` option containing a Companion address.");var t=e.meta.name,n=e.meta.type,r={};this.opts.metaFields.forEach(function(t){null!=e.meta[t]&&(r[t]=e.meta[t].toString())});var i=_$queryStringify_82({filename:t,type:n,metadata:r});return this.client.get("s3/params?"+i).then(assertServerError)},i.validateParameters=function(e,t){if("object"!=typeof t||!t||"string"!=typeof t.url||"object"!=typeof t.fields&&null!=t.fields||null!=t.method&&!/^(put|post)$/i.test(t.method)){var n=new TypeError("AwsS3: got incorrect result from 'getUploadParameters()' for file '"+e.name+"', expected an object '{ url, method, fields, headers }'.\nSee https://uppy.io/docs/aws-s3/#getUploadParameters-file for more on the expected format.");throw console.error(n),n}},i.handleUpload=function(e){var t=this,n=Object.create(null);function r(e){var t=e.id;_$hasProperty_264(n,t)&&n[t].abort()}this.uppy.on("file-removed",r),e.forEach(function(e){var n=t.uppy.getFile(e);t.uppy.emit("upload-started",n)});var i=this.requests.wrapPromiseFunction(function(e){return t.opts.getUploadParameters(e)}),o=e.length;return _$settle_273(e.map(function(e,r){return n[e]=i(t.uppy.getFile(e)),n[e].then(function(i){delete n[e];var s=t.uppy.getFile(e);t.validateParameters(s,i);var a=i.method,u=void 0===a?"post":a,l=i.url,c=i.fields,p=i.headers,d={method:u,formData:"post"===u.toLowerCase(),endpoint:l,metaFields:c?Object.keys(c):[]};return p&&(d.headers=p),t.uppy.setFileState(s.id,{meta:___extends_123({},s.meta,{},c),xhrUpload:d}),t._uploader.uploadFile(s.id,r,o)}).catch(function(r){delete n[e];var i=t.uppy.getFile(e);t.uppy.emit("upload-error",i,r)})})).then(function(e){return t.uppy.off("file-removed",r),e})},i.install=function(){var e=this.uppy;this.uppy.addUploader(this.handleUpload);var t={fieldName:"file",responseUrlFieldName:"location",timeout:this.opts.timeout,__queue:this.requests,responseType:"text",getResponseData:this.opts.getResponseData||function(t,n){var r,i;return isXml(t,n)?{location:(r=n.responseURL,i=getXmlValue(t,"Location"),r?new URL_(i,r).toString():new URL_(i).toString()),bucket:getXmlValue(t,"Bucket"),key:getXmlValue(t,"Key"),etag:getXmlValue(t,"ETag")}:"POST"===this.method.toUpperCase()?(warnedSuccessActionStatus||(e.log("[AwsS3] No response data found, make sure to set the success_action_status AWS SDK option to 201. See https://uppy.io/docs/aws-s3/#POST-Uploads","warning"),warnedSuccessActionStatus=!0),{location:null}):n.responseURL?{location:n.responseURL.replace(/\?.*$/,"")}:{location:null}},getResponseError:function(e,t){if(isXml(e,t)){var n=getXmlValue(e,"Message");return new Error(n)}}};this._uploader=new _$MiniXHRUpload_122(this.uppy,t),this._uploader.i18n=this.uppy.i18n},i.uninstall=function(){this.uppy.removePreProcessor(this.handleUpload)},r}(__Plugin_123),___class_123.VERSION=_$package_124.version,___temp_123),_$MultipartUploader_119={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n={limit:1,getChunkSize:function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"defaultOptions.getChunkSize","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"defaultOptions.getChunkSize"},'),Math.ceil(t.size/1e4)},onStart:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"defaultOptions.onStart","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"defaultOptions.onStart"},')},onProgress:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"defaultOptions.onProgress","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"defaultOptions.onProgress"},')},onPartComplete:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"defaultOptions.onPartComplete","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"defaultOptions.onPartComplete"},')},onSuccess:function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"defaultOptions.onSuccess","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"defaultOptions.onSuccess"},')},onError:function(t){throw _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"defaultOptions.onError","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"defaultOptions.onError"},'),t}};function r(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"remove","fileName":"'+e+'","paramsNumber":2},');var r=t.indexOf(n);-1!==r&&t.splice(r,1),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"remove","paramsNumber":2},')}var i=function(){function i(r,i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MultipartUploader"}},'),this.options=t({},n,{},i),this.options.getChunkSize||(this.options.getChunkSize=n.getChunkSize),this.file=r,this.key=this.options.key||null,this.uploadId=this.options.uploadId||null,this.parts=this.options.parts||[],this.createdPromise=Promise.reject(),this.isPaused=!1,this.chunks=null,this.chunkState=null,this.uploading=[],this._initChunks(),this.createdPromise.catch(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var o=i.prototype;return o._initChunks=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_initChunks","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},');for(var t=[],n=this.options.getChunkSize(this.file),r=Math.max(5242880,Math.ceil(this.file.size/1e4)),i=Math.max(n,r),o=0;o<this.file.size;o+=i){var s=Math.min(this.file.size,o+i);t.push(this.file.slice(o,s))}this.chunks=t,this.chunkState=t.map(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),{uploaded:0,busy:!1,done:!1}}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_initChunks"},')},o._createUpload=function(){var t=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_createUpload","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),this.createdPromise=Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),t.options.createMultipartUpload()}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_createUpload"},'),this.createdPromise.then(function(n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),"object"!=typeof n||!n||"string"!=typeof n.uploadId||"string"!=typeof n.key)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},'),new TypeError("AwsS3/Multipart: Got incorrect result from `createMultipartUpload()`, expected an object `{ uploadId, key }`.");t.key=n.key,t.uploadId=n.uploadId,t.options.onStart(n),t._uploadParts(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')}).catch(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},'),t._onError(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')})},o._resumeUpload=function(){var t=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_resumeUpload","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_resumeUpload"},'),Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},'),t.options.listParts({uploadId:t.uploadId,key:t.key})}).then(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":1},'),n.forEach(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},');var r=n.PartNumber-1;t.chunkState[r]={uploaded:n.Size,etag:n.ETag,done:!0},t.parts.some(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},'),t.PartNumber===n.PartNumber})||t.parts.push({PartNumber:n.PartNumber,ETag:n.ETag}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},')}),t._uploadParts(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},')}).catch(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":1},'),t._onError(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},')})},o._uploadParts=function(){var t=this;if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_uploadParts","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),this.isPaused)_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadParts"},');else{var n=this.options.limit-this.uploading.length;if(0!==n){if(this.chunkState.every(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey11","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey11"},'),t.done}))return this._completeUpload(),void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadParts"},');for(var r=[],i=0;i<this.chunkState.length;i++){var o=this.chunkState[i];if(!o.done&&!o.busy&&(r.push(i),r.length>=n))break}r.forEach(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey12","fileName":"'+e+'","paramsNumber":1},'),t._uploadPart(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey12"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadParts"},')}else _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadParts"},')}},o._uploadPart=function(t){var n=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_uploadPart","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"MultipartUploader"}},');var r=this.chunks[t];return this.chunkState[t].busy=!0,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadPart"},'),Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey13","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey13"},'),n.options.prepareUploadPart({key:n.key,uploadId:n.uploadId,body:r,number:t+1})}).then(function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey14","fileName":"'+e+'","paramsNumber":1},'),"object"!=typeof t||!t||"string"!=typeof t.url)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey14"},'),new TypeError("AwsS3/Multipart: Got incorrect result from `prepareUploadPart()`, expected an object `{ url }`.");return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey14"},'),t}).then(function(r){var i=r.url,o=r.headers;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey15","fileName":"'+e+'","paramsNumber":1},'),n._uploadPartBytes(t,i,o),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey15"},')},function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey16","fileName":"'+e+'","paramsNumber":1},'),n._onError(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey16"},')})},o._onPartProgress=function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onPartProgress","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"MultipartUploader"}},'),this.chunkState[t].uploaded=n;var i=this.chunkState.reduce(function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey17","fileName":"'+e+'","paramsNumber":2},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey17"},'),t+n.uploaded},0);this.options.onProgress(i,this.file.size),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onPartProgress"},')},o._onPartComplete=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onPartComplete","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"MultipartUploader"}},'),this.chunkState[t].etag=n,this.chunkState[t].done=!0;var r={PartNumber:t+1,ETag:n};this.parts.push(r),this.options.onPartComplete(r),this._uploadParts(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onPartComplete"},')},o._uploadPartBytes=function(t,n,i){var o=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_uploadPartBytes","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"MultipartUploader"}},');var s=this.chunks[t],a=new XMLHttpRequest;a.open("PUT",n,!0),i&&Object.keys(i).map(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey18","fileName":"'+e+'","paramsNumber":1},'),a.setRequestHeader(t,i[t]),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey18"},')}),a.responseType="text",this.uploading.push(a),a.upload.addEventListener("progress",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey19","fileName":"'+e+'","paramsNumber":1},'),n.lengthComputable?(o._onPartProgress(t,n.loaded,n.total),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey19"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey19"},')}),a.addEventListener("abort",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey20","fileName":"'+e+'","paramsNumber":1},'),r(o.uploading,n.target),o.chunkState[t].busy=!1,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey20"},')}),a.addEventListener("load",function(n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey21","fileName":"'+e+'","paramsNumber":1},'),r(o.uploading,n.target),o.chunkState[t].busy=!1,n.target.status<200||n.target.status>=300)return o._onError(new Error("Non 2xx")),void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey21"},');o._onPartProgress(t,s.size,s.size);var i=n.target.getResponseHeader("ETag");if(null===i)return o._onError(new Error("AwsS3/Multipart: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. Seee https://uppy.io/docs/aws-s3-multipart#S3-Bucket-Configuration for instructions.")),void _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey21"},');o._onPartComplete(t,i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey21"},')}),a.addEventListener("error",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey22","fileName":"'+e+'","paramsNumber":1},'),r(o.uploading,n.target),o.chunkState[t].busy=!1;var i=new Error("Unknown error");i.source=n.target,o._onError(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey22"},')}),a.send(s),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_uploadPartBytes"},')},o._completeUpload=function(){var t=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_completeUpload","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),this.parts.sort(function(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey23","fileName":"'+e+'","paramsNumber":2},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey23"},'),t.PartNumber-n.PartNumber}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_completeUpload"},'),Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey24","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey24"},'),t.options.completeMultipartUpload({key:t.key,uploadId:t.uploadId,parts:t.parts})}).then(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey25","fileName":"'+e+'","paramsNumber":1},'),t.options.onSuccess(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey25"},')},function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey26","fileName":"'+e+'","paramsNumber":1},'),t._onError(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey26"},')})},o._abortUpload=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_abortUpload","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),this.uploading.slice().forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey27","fileName":"'+e+'","paramsNumber":1},'),t.abort(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey27"},')}),this.createdPromise.then(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey28","fileName":"'+e+'","paramsNumber":0},'),t.options.abortMultipartUpload({key:t.key,uploadId:t.uploadId}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey28"},')},function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey29","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey29"},')}),this.uploading=[],_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_abortUpload"},')},o._onError=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onError","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"MultipartUploader"}},'),this.options.onError(t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onError"},')},o.start=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"start","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),this.isPaused=!1,this.uploadId?this._resumeUpload():this._createUpload(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"start"},')},o.pause=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"pause","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MultipartUploader"}},'),this.uploading.slice().forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey30","fileName":"'+e+'","paramsNumber":1},'),t.abort(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey30"},')}),this.isPaused=!0,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"pause"},')},o.abort=function(t){if(void 0===t&&(t={}),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"abort","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"MultipartUploader"}},'),!t.really)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"abort"},'),this.pause();this._abortUpload(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"abort"},')},i}();_$MultipartUploader_119=i}).call(this,"/packages/@uppy/aws-s3-multipart/lib/MultipartUploader.js");var _$package_121={version:"1.7.0"},___class_120,___temp_120;function ___assertThisInitialized_120(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ___extends_120(){return(___extends_120=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __Plugin_120=_$lib_133.Plugin,__Socket_120=_$lib_129.Socket,__Provider_120=_$lib_129.Provider,__RequestClient_120=_$lib_129.RequestClient;function __assertServerError_120(e){if(e&&e.error){var t=new Error(e.message);throw ___extends_120(t,e.error),t}return e}var _$lib_120=(___temp_120=___class_120=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).type="uploader",r.id=r.opts.id||"AwsS3Multipart",r.title="AWS S3 Multipart",r.client=new __RequestClient_120(t,n);var i={timeout:3e4,limit:0,createMultipartUpload:r.createMultipartUpload.bind(___assertThisInitialized_120(r)),listParts:r.listParts.bind(___assertThisInitialized_120(r)),prepareUploadPart:r.prepareUploadPart.bind(___assertThisInitialized_120(r)),abortMultipartUpload:r.abortMultipartUpload.bind(___assertThisInitialized_120(r)),completeMultipartUpload:r.completeMultipartUpload.bind(___assertThisInitialized_120(r))};return r.opts=___extends_120({},i,{},n),r.upload=r.upload.bind(___assertThisInitialized_120(r)),r.requests=new _$RateLimitedQueue_244(r.opts.limit),r.uploaders=Object.create(null),r.uploaderEvents=Object.create(null),r.uploaderSockets=Object.create(null),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.resetUploaderReferences=function(e,t){void 0===t&&(t={}),this.uploaders[e]&&(this.uploaders[e].abort({really:t.abort||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},i.assertHost=function(){if(!this.opts.companionUrl)throw new Error("Expected a `companionUrl` option containing a Companion address.")},i.createMultipartUpload=function(e){this.assertHost();var t={};return Object.keys(e.meta).map(function(n){null!=e.meta[n]&&(t[n]=e.meta[n].toString())}),this.client.post("s3/multipart",{filename:e.name,type:e.type,metadata:t}).then(__assertServerError_120)},i.listParts=function(e,t){var n=t.key,r=t.uploadId;this.assertHost();var i=encodeURIComponent(n);return this.client.get("s3/multipart/"+r+"?key="+i).then(__assertServerError_120)},i.prepareUploadPart=function(e,t){var n=t.key,r=t.uploadId,i=t.number;this.assertHost();var o=encodeURIComponent(n);return this.client.get("s3/multipart/"+r+"/"+i+"?key="+o).then(__assertServerError_120)},i.completeMultipartUpload=function(e,t){var n=t.key,r=t.uploadId,i=t.parts;this.assertHost();var o=encodeURIComponent(n),s=encodeURIComponent(r);return this.client.post("s3/multipart/"+s+"/complete?key="+o,{parts:i}).then(__assertServerError_120)},i.abortMultipartUpload=function(e,t){var n=t.key,r=t.uploadId;this.assertHost();var i=encodeURIComponent(n),o=encodeURIComponent(r);return this.client.delete("s3/multipart/"+o+"?key="+i).then(__assertServerError_120)},i.uploadFile=function(e){var t=this;return new Promise(function(n,r){var i=new _$MultipartUploader_119(e.data,___extends_120({createMultipartUpload:t.opts.createMultipartUpload.bind(t,e),listParts:t.opts.listParts.bind(t,e),prepareUploadPart:t.opts.prepareUploadPart.bind(t,e),completeMultipartUpload:t.opts.completeMultipartUpload.bind(t,e),abortMultipartUpload:t.opts.abortMultipartUpload.bind(t,e),getChunkSize:t.opts.getChunkSize?t.opts.getChunkSize.bind(t):null,onStart:function(n){var r=t.uppy.getFile(e.id);t.uppy.setFileState(e.id,{s3Multipart:___extends_120({},r.s3Multipart,{key:n.key,uploadId:n.uploadId,parts:[]})})},onProgress:function(n,r){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n,bytesTotal:r})},onError:function(n){t.uppy.log(n),t.uppy.emit("upload-error",e,n),o.done(),t.resetUploaderReferences(e.id),r(n)},onSuccess:function(r){var s={uploadURL:r.location};o.done(),t.resetUploaderReferences(e.id),t.uppy.emit("upload-success",e,s),r.location&&t.uppy.log("Download "+i.file.name+" from "+r.location),n(i)},onPartComplete:function(n){var r=t.uppy.getFile(e.id);r&&(t.uppy.setFileState(e.id,{s3Multipart:___extends_120({},r.s3Multipart,{parts:[].concat(r.s3Multipart.parts,[n])})}),t.uppy.emit("s3-multipart:part-uploaded",r,n))},limit:t.opts.limit||5},e.s3Multipart));t.uploaders[e.id]=i,t.uploaderEvents[e.id]=new _$EventTracker_240(t.uppy);var o=t.requests.run(function(){return e.isPaused||i.start(),function(){}});t.onFileRemove(e.id,function(r){o.abort(),t.resetUploaderReferences(e.id,{abort:!0}),n("upload "+r.id+" was removed")}),t.onCancelAll(e.id,function(){o.abort(),t.resetUploaderReferences(e.id,{abort:!0}),n("upload "+e.id+" was canceled")}),t.onFilePause(e.id,function(e){e?(o.abort(),i.pause()):(o.abort(),o=t.requests.run(function(){return i.start(),function(){}}))}),t.onPauseAll(e.id,function(){o.abort(),i.pause()}),t.onResumeAll(e.id,function(){o.abort(),e.error&&i.abort(),o=t.requests.run(function(){return i.start(),function(){}})}),e.isRestored||t.uppy.emit("upload-started",e,i)})},i.uploadRemote=function(e){var t=this;return this.resetUploaderReferences(e.id),this.uppy.emit("upload-started",e),e.serverToken?this.connectToServerSocket(e):new Promise(function(n,r){new(e.remote.providerOptions.provider?__Provider_120:__RequestClient_120)(t.uppy,e.remote.providerOptions).post(e.remote.url,___extends_120({},e.remote.body,{protocol:"s3-multipart",size:e.data.size,metadata:e.meta})).then(function(n){return t.uppy.setFileState(e.id,{serverToken:n.token}),e=t.uppy.getFile(e.id)}).then(function(e){return t.connectToServerSocket(e)}).then(function(){n()}).catch(function(n){t.uppy.emit("upload-error",e,n),r(n)})})},i.connectToServerSocket=function(e){var t=this;return new Promise(function(n,r){var i=e.serverToken,o=_$getSocketHost_261(e.remote.companionUrl),s=new __Socket_120({target:o+"/api/"+i,autoOpen:!1});t.uploaderSockets[e.id]=s,t.uploaderEvents[e.id]=new _$EventTracker_240(t.uppy),t.onFileRemove(e.id,function(r){a.abort(),s.send("pause",{}),t.resetUploaderReferences(e.id,{abort:!0}),n("upload "+e.id+" was removed")}),t.onFilePause(e.id,function(e){e?(a.abort(),s.send("pause",{})):(a.abort(),a=t.requests.run(function(){return s.send("resume",{}),function(){}}))}),t.onPauseAll(e.id,function(){a.abort(),s.send("pause",{})}),t.onCancelAll(e.id,function(){a.abort(),s.send("pause",{}),t.resetUploaderReferences(e.id),n("upload "+e.id+" was canceled")}),t.onResumeAll(e.id,function(){a.abort(),e.error&&s.send("pause",{}),a=t.requests.run(function(){s.send("resume",{})})}),t.onRetry(e.id,function(){s.isOpen&&(s.send("pause",{}),s.send("resume",{}))}),t.onRetryAll(e.id,function(){s.isOpen&&(s.send("pause",{}),s.send("resume",{}))}),s.on("progress",function(n){return _$emitSocketProgress_248(t,n,e)}),s.on("error",function(n){t.uppy.emit("upload-error",e,new Error(n.error)),t.resetUploaderReferences(e.id),a.done(),r(new Error(n.error))}),s.on("success",function(r){var i={uploadURL:r.url};t.uppy.emit("upload-success",e,i),t.resetUploaderReferences(e.id),a.done(),n()});var a=t.requests.run(function(){return s.open(),e.isPaused&&s.send("pause",{}),function(){}})})},i.upload=function(e){var t=this;if(0===e.length)return Promise.resolve();var n=e.map(function(e){var n=t.uppy.getFile(e);return n.isRemote?t.uploadRemote(n):t.uploadFile(n)});return Promise.all(n)},i.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(n){e===n.id&&t(n.id)})},i.onFilePause=function(e,t){this.uploaderEvents[e].on("upload-pause",function(n,r){e===n&&t(r)})},i.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(n){e===n&&t()})},i.onRetryAll=function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",function(r){n.uppy.getFile(e)&&t()})},i.onPauseAll=function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",function(){n.uppy.getFile(e)&&t()})},i.onCancelAll=function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",function(){n.uppy.getFile(e)&&t()})},i.onResumeAll=function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",function(){n.uppy.getFile(e)&&t()})},i.install=function(){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_120({},e,{resumableUploads:!0})}),this.uppy.addUploader(this.upload)},i.uninstall=function(){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_120({},e,{resumableUploads:!1})}),this.uppy.removeUploader(this.upload)},r}(__Plugin_120),___class_120.VERSION=_$package_121.version,___temp_120),_$error_112={};Object.defineProperty(_$error_112,"__esModule",{value:!0});var DetailedError=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.message));i.originalRequest=r,i.causingError=n;var o=e.message;return null!=n&&(o+=", caused by "+n.toString()),null!=r&&(o+=", originated from request (response code: "+r.status+", response text: "+r.responseText+")"),i.message=o,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Error),t}();_$error_112.default=DetailedError;var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,__isArray_62=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===toStr.call(e)},isPlainObject=function(e){if(!e||"[object Object]"!==toStr.call(e))return!1;var t,n=hasOwn.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&hasOwn.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;for(t in e);return void 0===t||hasOwn.call(e,t)},setProperty=function(e,t){defineProperty&&"__proto__"===t.name?defineProperty(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},getProperty=function(e,t){if("__proto__"===t){if(!hasOwn.call(e,t))return;if(gOPD)return gOPD(e,t).value}return e[t]},_$extend_62=function e(){var t,n,r,i,o,s,a=arguments[0],u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[1]||{},u=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});u<l;++u)if(null!=(t=arguments[u]))for(n in t)r=getProperty(a,n),a!==(i=getProperty(t,n))&&(c&&i&&(isPlainObject(i)||(o=__isArray_62(i)))?(o?(o=!1,s=r&&__isArray_62(r)?r:[]):s=r&&isPlainObject(r)?r:{},setProperty(a,{name:n,newValue:e(c,s,i)})):void 0!==i&&setProperty(a,{name:n,newValue:i}));return a},_$base64_70={exports:{}};(function(global){!function(e,t){"object"==typeof _$base64_70.exports?_$base64_70.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.2",buffer;if(_$base64_70.exports)try{buffer=eval("require('buffer').Buffer")}catch(err){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)?e.toString("base64"):btoa(utob(String(e)))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(e)},encodeURI=function(e){return encode(e,!0)},re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return fromCharCode(55296+(t>>>10))+fromCharCode(56320+(1023&t));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,r=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),i=[fromCharCode(r>>>16),fromCharCode(r>>>8&255),fromCharCode(255&r)];return i.length-=[0,0,2,1][n],i.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),_$base64_70.exports?_$base64_70.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),_$base64_70=_$base64_70.exports;var _$request_108={};Object.defineProperty(_$request_108,"__esModule",{value:!0}),_$request_108.newRequest=function(){return new window.XMLHttpRequest},_$request_108.resolveUrl=function(e,t){return new _urlParse2.default(t,e).toString()};var obj,_urlParse2=(obj=_$urlParse_115)&&obj.__esModule?obj:{default:obj},_$isReactNative_106={};Object.defineProperty(_$isReactNative_106,"__esModule",{value:!0}),_$isReactNative_106.default=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};var _$uriToBlob_111={};Object.defineProperty(_$uriToBlob_111,"__esModule",{value:!0}),_$uriToBlob_111.default=function(e,t){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var e=n.response;t(null,e)},n.onerror=function(e){t(e)},n.open("GET",e),n.send()};var _$isCordova_105={};Object.defineProperty(_$isCordova_105,"__esModule",{value:!0}),_$isCordova_105.default=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};var _$readAsByteArray_107={};Object.defineProperty(_$readAsByteArray_107,"__esModule",{value:!0}),_$readAsByteArray_107.default=function(e,t){var n=new FileReader;n.onload=function(){t(null,new Uint8Array(n.result))},n.onerror=function(e){t(e)},n.readAsArrayBuffer(e)};var _$source_109={};Object.defineProperty(_$source_109,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();_$source_109.getSource=function(e,t,n){if((0,_isReactNative2.default)()&&e&&void 0!==e.uri)(0,_uriToBlob2.default)(e.uri,function(e,t){if(e)return n(new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+e));n(null,new FileSource(t))});else{if("function"!=typeof e.slice||void 0===e.size)return"function"==typeof e.read?(t=+t,isFinite(t)?void n(null,new StreamSource(e,t)):void n(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):void n(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));n(null,new FileSource(e))}};var _isReactNative2=_interopRequireDefault(_$isReactNative_106),_uriToBlob2=_interopRequireDefault(_$uriToBlob_111),_isCordova2=_interopRequireDefault(_$isCordova_105),_readAsByteArray2=_interopRequireDefault(_$readAsByteArray_107);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var FileSource=function(){function e(t){_classCallCheck(this,e),this._file=t,this.size=t.size}return _createClass(e,[{key:"slice",value:function(e,t,n){(0,_isCordova2.default)()?(0,_readAsByteArray2.default)(this._file.slice(e,t),function(e,t){if(e)return n(e);n(null,t)}):n(null,this._file.slice(e,t))}},{key:"close",value:function(){}}]),e}(),StreamSource=function(){function e(t,n){_classCallCheck(this,e),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return _createClass(e,[{key:"slice",value:function(e,t,n){if(!(e<this._bufferOffset))return this._readUntilEnoughDataOrDone(e,t,n);n(new Error("Requested data is before the reader's current offset"))}},{key:"_readUntilEnoughDataOrDone",value:function(e,t,n){var r=this,i=t<=this._bufferOffset+__len_109(this._buffer);if(this._done||i){var o=this._getDataFromBuffer(e,t);n(null,o,null==o&&this._done)}else this._reader.read().then(function(i){var o=i.value;i.done?r._done=!0:void 0===r._buffer?r._buffer=o:r._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(r._buffer,o),r._readUntilEnoughDataOrDone(e,t,n)}).catch(function(e){n(new Error("Error during read: "+e))})}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===__len_109(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),e}();function __len_109(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var _$storage_110={};Object.defineProperty(_$storage_110,"__esModule",{value:!0});var ___createClass_110=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();_$storage_110.getStorage=function(){return hasStorage?new LocalStorage:null};var hasStorage=!1;try{hasStorage="localStorage"in window;var key="tusSupport";localStorage.setItem(key,localStorage.getItem(key))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;hasStorage=!1}_$storage_110.canStoreURLs=hasStorage;var LocalStorage=function(){function e(){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this)}return ___createClass_110(e,[{key:"setItem",value:function(e,t,n){n(null,localStorage.setItem(e,t))}},{key:"getItem",value:function(e,t){t(null,localStorage.getItem(e))}},{key:"removeItem",value:function(e,t){t(null,localStorage.removeItem(e))}}]),e}(),_$fingerprint_104={};Object.defineProperty(_$fingerprint_104,"__esModule",{value:!0}),_$fingerprint_104.default=function(e,t,n){return(0,___isReactNative2_104.default)()?n(null,function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):n(null,["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))};var __obj_104,___isReactNative2_104=(__obj_104=_$isReactNative_106)&&__obj_104.__esModule?__obj_104:{default:__obj_104},_$upload_114={};Object.defineProperty(_$upload_114,"__esModule",{value:!0});var ___createClass_114=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_error2=___interopRequireDefault_114(_$error_112),_extend2=___interopRequireDefault_114(_$extend_62);function ___interopRequireDefault_114(e){return e&&e.__esModule?e:{default:e}}var defaultOptions={endpoint:null,fingerprint:___interopRequireDefault_114(_$fingerprint_104).default,resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,urlStorage:null,fileReader:null,uploadDataDuringCreation:!1},Upload=function(){function e(t,n){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.options=(0,_extend2.default)(!0,{},defaultOptions,n),this._storage=this.options.urlStorage,this.file=t,this.url=null,this._xhr=null,this._fingerprint=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0}return ___createClass_114(e,[{key:"start",value:function(){var e=this,t=this.file;t?this.options.endpoint||this.options.uploadUrl?(this.options.resume&&null==this._storage&&(this._storage=(0,_$storage_110.getStorage)()),this._source?this._start(this._source):(this.options.fileReader||_$source_109.getSource)(t,this.options.chunkSize,function(t,n){t?e._emitError(t):(e._source=n,e._start(n))})):this._emitError(new Error("tus: neither an endpoint or an upload URL is provided")):this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_start",value:function(e){var t=this,n=this.file;if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=e.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));var r=this.options.retryDelays;if(null!=r){if("[object Array]"!==Object.prototype.toString.call(r))return void this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));var i=this.options.onError;this.options.onError=function(e){t.options.onError=i,null!=t._offset&&t._offset>t._offsetBeforeRetry&&(t._retryAttempt=0);var n=!0;"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1);var o=e.originalRequest?e.originalRequest.status:0,s=!inStatusCategory(o,400)||409===o||423===o;if(t._retryAttempt<r.length&&null!=e.originalRequest&&s&&n){var a=r[t._retryAttempt++];t._offsetBeforeRetry=t._offset,t.options.uploadUrl=t.url,t._retryTimeout=setTimeout(function(){t.start()},a)}else t._emitError(e)}}if(this._aborted=!1,null==this.url)return null!=this.options.uploadUrl?(this.url=this.options.uploadUrl,void this._resumeUpload()):void(this._hasStorage()?this.options.fingerprint(n,this.options,function(e,n){e?t._emitError(e):(t._fingerprint=n,t._storage.getItem(t._fingerprint,function(e,n){e?t._emitError(e):null!=n?(t.url=n,t._resumeUpload()):t._createUpload()}))}):this._createUpload());this._resumeUpload()}},{key:"abort",value:function(t,n){var r=this;null!==this._xhr&&(this._xhr.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),n=n||function(){},t?e.terminate(this.url,this.options,function(e,t){if(e)return n(e,t);r._hasStorage()?r._storage.removeItem(r._fingerprint,n):n()}):n()}},{key:"_hasStorage",value:function(){return this.options.resume&&this._storage}},{key:"_emitXhrError",value:function(e,t,n){this._emitError(new _error2.default(t,n,e))}},{key:"_emitError",value:function(e){if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}},{key:"_emitSuccess",value:function(){"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_setupXHR",value:function(e){this._xhr=e,setupXHR(e,this.options)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=(0,_$request_108.newRequest)();t.open("POST",this.options.endpoint,!0),t.onload=function(){if(inStatusCategory(t.status,200)){var n=t.getResponseHeader("Location");if(null!=n){if(e.url=(0,_$request_108.resolveUrl)(e.options.endpoint,n),0===e._size)return e._emitSuccess(),void e._source.close();e._hasStorage()&&e._storage.setItem(e._fingerprint,e.url,function(t){t&&e._emitError(t)}),e.options.uploadDataDuringCreation?e._handleUploadResponse(t):(e._offset=0,e._startUpload())}else e._emitXhrError(t,new Error("tus: invalid or missing Location header"))}else e._emitXhrError(t,new Error("tus: unexpected response while creating upload"))},t.onerror=function(n){e._emitXhrError(t,new Error("tus: failed to create upload"),n)},this._setupXHR(t),this.options.uploadLengthDeferred?t.setRequestHeader("Upload-Defer-Length",1):t.setRequestHeader("Upload-Length",this._size);var n=function(e){var t=[];for(var n in e)t.push(n+" "+_$base64_70.Base64.encode(e[n]));return t.join(",")}(this.options.metadata);""!==n&&t.setRequestHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,this._addChunkToRequest(t)):t.send(null)}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=(0,_$request_108.newRequest)();t.open("HEAD",this.url,!0),t.onload=function(){if(!inStatusCategory(t.status,200))return e._hasStorage()&&inStatusCategory(t.status,400)&&e._storage.removeItem(e._fingerprint,function(t){t&&e._emitError(t)}),423===t.status?void e._emitXhrError(t,new Error("tus: upload is currently locked; retry later")):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitXhrError(t,new Error("tus: unable to resume upload (new upload cannot be created without an endpoint)"));var n=parseInt(t.getResponseHeader("Upload-Offset"),10);if(isNaN(n))e._emitXhrError(t,new Error("tus: invalid or missing offset value"));else{var r=parseInt(t.getResponseHeader("Upload-Length"),10);if(!isNaN(r)||e.options.uploadLengthDeferred){if(n===r)return e._emitProgress(r,r),void e._emitSuccess();e._offset=n,e._startUpload()}else e._emitXhrError(t,new Error("tus: invalid or missing length value"))}},t.onerror=function(n){e._emitXhrError(t,new Error("tus: failed to resume upload"),n)},this._setupXHR(t),t.send(null)}},{key:"_startUpload",value:function(){var e=this;if(!this._aborted){var t=(0,_$request_108.newRequest)();this.options.overridePatchMethod?(t.open("POST",this.url,!0),t.setRequestHeader("X-HTTP-Method-Override","PATCH")):t.open("PATCH",this.url,!0),t.onload=function(){inStatusCategory(t.status,200)?e._handleUploadResponse(t):e._emitXhrError(t,new Error("tus: unexpected response while uploading chunk"))},t.onerror=function(n){e._aborted||e._emitXhrError(t,new Error("tus: failed to upload chunk at offset "+e._offset),n)},this._setupXHR(t),t.setRequestHeader("Upload-Offset",this._offset),this._addChunkToRequest(t)}}},{key:"_addChunkToRequest",value:function(e){var t=this;"upload"in e&&(e.upload.onprogress=function(e){e.lengthComputable&&t._emitProgress(n+e.loaded,t._size)}),e.setRequestHeader("Content-Type","application/offset+octet-stream");var n=this._offset,r=this._offset+this.options.chunkSize;(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r,function(n,r,i){n?t._emitError(n):(t.options.uploadLengthDeferred&&i&&(t._size=t._offset+(r&&r.size?r.size:0),e.setRequestHeader("Upload-Length",t._size)),null===r?e.send():(e.send(r),t._emitProgress(t._offset,t._size)))})}},{key:"_handleUploadResponse",value:function(e){var t=this,n=parseInt(e.getResponseHeader("Upload-Offset"),10);if(isNaN(n))this._emitXhrError(e,new Error("tus: invalid or missing offset value"));else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n==this._size)return this.options.removeFingerprintOnSuccess&&this.options.resume&&this._storage.removeItem(this._fingerprint,function(e){e&&t._emitError(e)}),this._emitSuccess(),void this._source.close();this._startUpload()}}}],[{key:"terminate",value:function(e,t,n){if("function"!=typeof t&&"function"!=typeof n)throw new Error("tus: a callback function must be specified");"function"==typeof t&&(n=t,t={});var r=(0,_$request_108.newRequest)();r.open("DELETE",e,!0),r.onload=function(){204===r.status?n():n(new _error2.default(new Error("tus: unexpected response while terminating upload"),null,r))},r.onerror=function(e){n(new _error2.default(e,new Error("tus: failed to terminate upload"),r))},setupXHR(r,t),r.send(null)}}]),e}();function inStatusCategory(e,t){return e>=t&&e<t+100}function setupXHR(e,t){e.setRequestHeader("Tus-Resumable","1.0.0");var n=t.headers||{};for(var r in n)e.setRequestHeader(r,n[r]);e.withCredentials=t.withCredentials}Upload.defaultOptions=defaultOptions,_$upload_114.default=Upload;var __obj_113,_upload2=(__obj_113=_$upload_114)&&__obj_113.__esModule?__obj_113:{default:__obj_113},storage=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_$storage_110),__defaultOptions_113=_upload2.default.defaultOptions,moduleExport={Upload:_upload2.default,canStoreURLs:storage.canStoreURLs,defaultOptions:__defaultOptions_113};if("undefined"!=typeof window){var _window=window,__XMLHttpRequest_113=_window.XMLHttpRequest,__Blob_113=_window.Blob;moduleExport.isSupported=__XMLHttpRequest_113&&__Blob_113&&"function"==typeof __Blob_113.prototype.slice}else moduleExport.isSupported=!0,moduleExport.FileStorage=storage.FileStorage;var _$moduleExport_113=moduleExport,_$getFingerprint_233={};(function(e){_$getFingerprint_233=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getFingerprint","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFingerprint"},'),function(n,r,i){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.getFingerprint.ReturnStatement","fileName":"'+e+'","paramsNumber":3},'),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"isCordova","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"isCordova"},'),"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)||(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"isReactNative","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"isReactNative"},'),"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()))return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFingerprint.ReturnStatement"},'),_$moduleExport_113.Upload.defaultOptions.fingerprint(n,r,i);var o=["tus",t.id,r.endpoint].join("-");return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.getFingerprint.ReturnStatement"},'),i(null,o)}}}).call(this,"/packages/@uppy/tus/lib/getFingerprint.js");var _$package_235={version:"1.5.13"},___class_234,___temp_234;function ___extends_234(){return(___extends_234=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_234(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_234=_$lib_133.Plugin,__Provider_234=_$lib_129.Provider,__RequestClient_234=_$lib_129.RequestClient,__Socket_234=_$lib_129.Socket,tusDefaultOptions={endpoint:"",resume:!0,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,headers:{},chunkSize:1/0,withCredentials:!1,uploadUrl:null,uploadSize:null,overridePatchMethod:!1,retryDelays:null},_$lib_234=(___temp_234=___class_234=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).type="uploader",r.id=r.opts.id||"Tus",r.title="Tus",r.opts=___extends_234({},{resume:!0,autoRetry:!0,useFastRemoteRetry:!0,limit:0,retryDelays:[0,1e3,3e3,5e3]},n),r.requests=new _$RateLimitedQueue_244(r.opts.limit),r.uploaders=Object.create(null),r.uploaderEvents=Object.create(null),r.uploaderSockets=Object.create(null),r.handleResetProgress=r.handleResetProgress.bind(___assertThisInitialized_234(r)),r.handleUpload=r.handleUpload.bind(___assertThisInitialized_234(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.handleResetProgress=function(){var e=___extends_234({},this.uppy.getState().files);Object.keys(e).forEach(function(t){if(e[t].tus&&e[t].tus.uploadUrl){var n=___extends_234({},e[t].tus);delete n.uploadUrl,e[t]=___extends_234({},e[t],{tus:n})}}),this.uppy.setState({files:e})},i.resetUploaderReferences=function(e,t){if(void 0===t&&(t={}),this.uploaders[e]){var n=this.uploaders[e];n.abort(),t.abort&&setTimeout(function(){return n.abort(!0)},1e3),this.uploaders[e]=null}this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)},i.upload=function(e,t,n){var r=this;return this.resetUploaderReferences(e.id),new Promise(function(t,n){r.uppy.emit("upload-started",e);var i=___extends_234({},tusDefaultOptions,r.opts,e.tus||{});i.fingerprint=_$getFingerprint_233(e),i.onError=function(t){r.uppy.log(t),_$isNetworkError_267(t.originalRequest)&&(t=new _$NetworkError_242(t,t.originalRequest)),r.resetUploaderReferences(e.id),u.done(),r.uppy.emit("upload-error",e,t),n(t)},i.onProgress=function(t,n){r.onReceiveUploadUrl(e,a.url),r.uppy.emit("upload-progress",e,{uploader:r,bytesUploaded:t,bytesTotal:n})},i.onSuccess=function(){var n={uploadURL:a.url};r.resetUploaderReferences(e.id),u.done(),r.uppy.emit("upload-success",e,n),a.url&&r.uppy.log("Download "+a.file.name+" from "+a.url),t(a)};var o=function(e,t,n){_$hasProperty_264(e,t)&&!_$hasProperty_264(e,n)&&(e[n]=e[t])},s={};(Array.isArray(i.metaFields)?i.metaFields:Object.keys(e.meta)).forEach(function(t){s[t]=e.meta[t]}),o(s,"type","filetype"),o(s,"name","filename"),i.metadata=s;var a=new _$moduleExport_113.Upload(e.data,i);r.uploaders[e.id]=a,r.uploaderEvents[e.id]=new _$EventTracker_240(r.uppy);var u=r.requests.run(function(){return e.isPaused||a.start(),function(){}});r.onFileRemove(e.id,function(n){u.abort(),r.resetUploaderReferences(e.id,{abort:!!a.url}),t("upload "+n+" was removed")}),r.onPause(e.id,function(e){e?(u.abort(),a.abort()):(u.abort(),u=r.requests.run(function(){return a.start(),function(){}}))}),r.onPauseAll(e.id,function(){u.abort(),a.abort()}),r.onCancelAll(e.id,function(){u.abort(),r.resetUploaderReferences(e.id,{abort:!!a.url}),t("upload "+e.id+" was canceled")}),r.onResumeAll(e.id,function(){u.abort(),e.error&&a.abort(),u=r.requests.run(function(){return a.start(),function(){}})})}).catch(function(t){throw r.uppy.emit("upload-error",e,t),t})},i.uploadRemote=function(e,t,n){var r=this;this.resetUploaderReferences(e.id);var i=___extends_234({},this.opts);return e.tus&&___extends_234(i,e.tus),this.uppy.emit("upload-started",e),this.uppy.log(e.remote.url),e.serverToken?this.connectToServerSocket(e):new Promise(function(t,n){new(e.remote.providerOptions.provider?__Provider_234:__RequestClient_234)(r.uppy,e.remote.providerOptions).post(e.remote.url,___extends_234({},e.remote.body,{endpoint:i.endpoint,uploadUrl:i.uploadUrl,protocol:"tus",size:e.data.size,metadata:e.meta})).then(function(t){return r.uppy.setFileState(e.id,{serverToken:t.token}),e=r.uppy.getFile(e.id),r.connectToServerSocket(e)}).then(function(){t()}).catch(function(t){r.uppy.emit("upload-error",e,t),n(t)})})},i.connectToServerSocket=function(e){var t=this;return new Promise(function(n,r){var i=e.serverToken,o=_$getSocketHost_261(e.remote.companionUrl),s=new __Socket_234({target:o+"/api/"+i,autoOpen:!1});t.uploaderSockets[e.id]=s,t.uploaderEvents[e.id]=new _$EventTracker_240(t.uppy),t.onFileRemove(e.id,function(){a.abort(),s.send("pause",{}),s.send("cancel",{}),t.resetUploaderReferences(e.id),n("upload "+e.id+" was removed")}),t.onPause(e.id,function(e){e?(a.abort(),s.send("pause",{})):(a.abort(),a=t.requests.run(function(){return s.send("resume",{}),function(){}}))}),t.onPauseAll(e.id,function(){a.abort(),s.send("pause",{})}),t.onCancelAll(e.id,function(){a.abort(),s.send("pause",{}),s.send("cancel",{}),t.resetUploaderReferences(e.id),n("upload "+e.id+" was canceled")}),t.onResumeAll(e.id,function(){a.abort(),e.error&&s.send("pause",{}),a=t.requests.run(function(){return s.send("resume",{}),function(){}})}),t.onRetry(e.id,function(){s.isOpen&&(s.send("pause",{}),s.send("resume",{}))}),t.onRetryAll(e.id,function(){s.isOpen&&(s.send("pause",{}),s.send("resume",{}))}),s.on("progress",function(n){return _$emitSocketProgress_248(t,n,e)}),s.on("error",function(n){var i=n.error.message,o=___extends_234(new Error(i),{cause:n.error});t.opts.useFastRemoteRetry?s.close():(t.resetUploaderReferences(e.id),t.uppy.setFileState(e.id,{serverToken:null})),t.uppy.emit("upload-error",e,o),a.done(),r(o)}),s.on("success",function(r){var i={uploadURL:r.url};t.uppy.emit("upload-success",e,i),t.resetUploaderReferences(e.id),a.done(),n()});var a=t.requests.run(function(){return s.open(),e.isPaused&&s.send("pause",{}),function(){}})})},i.onReceiveUploadUrl=function(e,t){var n=this.uppy.getFile(e.id);n&&(n.tus&&n.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:___extends_234({},n.tus,{uploadUrl:t})})))},i.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(n){e===n.id&&t(n.id)})},i.onPause=function(e,t){this.uploaderEvents[e].on("upload-pause",function(n,r){e===n&&t(r)})},i.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(n){e===n&&t()})},i.onRetryAll=function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",function(r){n.uppy.getFile(e)&&t()})},i.onPauseAll=function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",function(){n.uppy.getFile(e)&&t()})},i.onCancelAll=function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",function(){n.uppy.getFile(e)&&t()})},i.onResumeAll=function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",function(){n.uppy.getFile(e)&&t()})},i.uploadFiles=function(e){var t=this,n=e.map(function(n,r){var i=r+1,o=e.length;return"error"in n&&n.error?Promise.reject(new Error(n.error)):n.isRemote?t.uploadRemote(n,i,o):t.upload(n,i,o)});return _$settle_273(n)},i.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[Tus] No files to upload"),Promise.resolve();0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");var n=e.map(function(e){return t.uppy.getFile(e)});return this.uploadFiles(n).then(function(){return null})},i.install=function(){this.uppy.setState({capabilities:___extends_234({},this.uppy.getState().capabilities,{resumableUploads:!0})}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress),this.opts.autoRetry&&this.uppy.on("back-online",this.uppy.retryAll)},i.uninstall=function(){this.uppy.setState({capabilities:___extends_234({},this.uppy.getState().capabilities,{resumableUploads:!1})}),this.uppy.removeUploader(this.handleUpload),this.opts.autoRetry&&this.uppy.off("back-online",this.uppy.retryAll)},r}(__Plugin_234),___class_234.VERSION=_$package_235.version,___temp_234),re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],_$parseuri_78=function(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=re.exec(e||""),o={},s=14;s--;)o[parts[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o},s=1e3,m=60*s,__h_94=60*m,d=24*__h_94,y=365.25*d;function plural(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var _$ms_94=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*__h_94;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t.long?plural(n=e,d,"day")||plural(n,__h_94,"hour")||plural(n,m,"minute")||plural(n,s,"second")||n+" ms":function(e){return e>=d?Math.round(e/d)+"d":e>=__h_94?Math.round(e/__h_94)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_$debug_93={};function createDebug(e){var t;function n(){if(n.enabled){var e=n,r=+new Date,i=r-(t||r);e.diff=i,e.prev=t,e.curr=r,t=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=_$debug_93.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var r=_$debug_93.formatters[n];if("function"==typeof r){var i=o[a];t=r.call(e,i),o.splice(a,1),a--}return t}),_$debug_93.formatArgs.call(e,o),(n.log||_$debug_93.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=_$debug_93.enabled(e),n.useColors=_$debug_93.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return _$debug_93.colors[Math.abs(n)%_$debug_93.colors.length]}(e),n.destroy=destroy,"function"==typeof _$debug_93.init&&_$debug_93.init(n),_$debug_93.instances.push(n),n}function destroy(){var e=_$debug_93.instances.indexOf(this);return-1!==e&&(_$debug_93.instances.splice(e,1),!0)}_$debug_93=_$debug_93=createDebug.debug=createDebug.default=createDebug,_$debug_93.coerce=function(e){return e instanceof Error?e.stack||e.message:e},_$debug_93.disable=function(){_$debug_93.enable("")},_$debug_93.enable=function(e){var t;_$debug_93.save(e),_$debug_93.names=[],_$debug_93.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?_$debug_93.skips.push(new RegExp("^"+e.substr(1)+"$")):_$debug_93.names.push(new RegExp("^"+e+"$")));for(t=0;t<_$debug_93.instances.length;t++){var i=_$debug_93.instances[t];i.enabled=_$debug_93.enabled(i.namespace)}},_$debug_93.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=_$debug_93.skips.length;t<n;t++)if(_$debug_93.skips[t].test(e))return!1;for(t=0,n=_$debug_93.names.length;t<n;t++)if(_$debug_93.names[t].test(e))return!0;return!1},_$debug_93.humanize=_$ms_94,_$debug_93.instances=[],_$debug_93.names=[],_$debug_93.skips=[],_$debug_93.formatters={};var _$browser_92={};(function(t){function n(){var n;try{n=_$browser_92.storage.debug}catch(e){}return!n&&void 0!==t&&"env"in t&&(n=t.env.DEBUG),n}(_$browser_92=_$browser_92=_$debug_93).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},_$browser_92.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_$browser_92.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)}},_$browser_92.save=function(t){try{null==t?_$browser_92.storage.removeItem("debug"):_$browser_92.storage.debug=t}catch(e){}},_$browser_92.load=n,_$browser_92.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_$browser_92.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),_$browser_92.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_$browser_92.formatters.j=function(e){try{return JSON.stringify(e)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},_$browser_92.enable(n())}).call(this,_$browser_81);var debug=_$browser_92("socket.io-client:url"),_$url_90=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(debug("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),debug("parse %s",e),n=_$parseuri_78(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var r=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port,n.href=n.protocol+"://"+r+(t&&t.port===n.port?"":":"+n.port),n},__s_102=1e3,__m_102=60*__s_102,__h_102=60*__m_102,__d_102=24*__h_102,__y_102=365.25*__d_102;function __plural_102(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var _$ms_102=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*__y_102;case"days":case"day":case"d":return n*__d_102;case"hours":case"hour":case"hrs":case"hr":case"h":return n*__h_102;case"minutes":case"minute":case"mins":case"min":case"m":return n*__m_102;case"seconds":case"second":case"secs":case"sec":case"s":return n*__s_102;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t.long?__plural_102(n=e,__d_102,"day")||__plural_102(n,__h_102,"hour")||__plural_102(n,__m_102,"minute")||__plural_102(n,__s_102,"second")||n+" ms":function(e){return e>=__d_102?Math.round(e/__d_102)+"d":e>=__h_102?Math.round(e/__h_102)+"h":e>=__m_102?Math.round(e/__m_102)+"m":e>=__s_102?Math.round(e/__s_102)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_$debug_100={};function __createDebug_100(e){var t;function n(){if(n.enabled){var e=n,r=+new Date,i=r-(t||r);e.diff=i,e.prev=t,e.curr=r,t=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=_$debug_100.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var r=_$debug_100.formatters[n];if("function"==typeof r){var i=o[a];t=r.call(e,i),o.splice(a,1),a--}return t}),_$debug_100.formatArgs.call(e,o),(n.log||_$debug_100.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=_$debug_100.enabled(e),n.useColors=_$debug_100.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return _$debug_100.colors[Math.abs(n)%_$debug_100.colors.length]}(e),n.destroy=__destroy_100,"function"==typeof _$debug_100.init&&_$debug_100.init(n),_$debug_100.instances.push(n),n}function __destroy_100(){var e=_$debug_100.instances.indexOf(this);return-1!==e&&(_$debug_100.instances.splice(e,1),!0)}_$debug_100=_$debug_100=__createDebug_100.debug=__createDebug_100.default=__createDebug_100,_$debug_100.coerce=function(e){return e instanceof Error?e.stack||e.message:e},_$debug_100.disable=function(){_$debug_100.enable("")},_$debug_100.enable=function(e){var t;_$debug_100.save(e),_$debug_100.names=[],_$debug_100.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?_$debug_100.skips.push(new RegExp("^"+e.substr(1)+"$")):_$debug_100.names.push(new RegExp("^"+e+"$")));for(t=0;t<_$debug_100.instances.length;t++){var i=_$debug_100.instances[t];i.enabled=_$debug_100.enabled(i.namespace)}},_$debug_100.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=_$debug_100.skips.length;t<n;t++)if(_$debug_100.skips[t].test(e))return!1;for(t=0,n=_$debug_100.names.length;t<n;t++)if(_$debug_100.names[t].test(e))return!0;return!1},_$debug_100.humanize=_$ms_102,_$debug_100.instances=[],_$debug_100.names=[],_$debug_100.skips=[],_$debug_100.formatters={};var _$browser_99={};(function(t){function n(){var n;try{n=_$browser_99.storage.debug}catch(e){}return!n&&void 0!==t&&"env"in t&&(n=t.env.DEBUG),n}(_$browser_99=_$browser_99=_$debug_100).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},_$browser_99.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_$browser_99.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)}},_$browser_99.save=function(t){try{null==t?_$browser_99.storage.removeItem("debug"):_$browser_99.storage.debug=t}catch(e){}},_$browser_99.load=n,_$browser_99.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_$browser_99.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),_$browser_99.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_$browser_99.formatters.j=function(e){try{return JSON.stringify(e)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},_$browser_99.enable(n())}).call(this,_$browser_81);var _$componentEmitter_98={exports:{}};function Emitter(e){if(e)return function(e){for(var t in Emitter.prototype)e[t]=Emitter.prototype[t];return e}(e)}_$componentEmitter_98.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Emitter.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},Emitter.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},Emitter.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Emitter.prototype.hasListeners=function(e){return!!this.listeners(e).length},_$componentEmitter_98=_$componentEmitter_98.exports;var __toString_101={}.toString,_$isarray_101=Array.isArray||function(e){return"[object Array]"==__toString_101.call(e)},_$isBuffer_97={};(function(e){_$isBuffer_97=function(i){return t&&e.isBuffer(i)||n&&(i instanceof ArrayBuffer||r(i))};var t="function"==typeof e&&"function"==typeof e.isBuffer,n="function"==typeof ArrayBuffer,r=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}}).call(this,_$buffer_35({}).Buffer);var _$binary_95={},__toString_95=Object.prototype.toString,withNativeBlob="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===__toString_95.call(Blob),withNativeFile="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===__toString_95.call(File);_$binary_95.deconstructPacket=function(e){var t=[],n=e.data,r=e;return r.data=function e(t,n){if(!t)return t;if(_$isBuffer_97(t)){var r={_placeholder:!0,num:n.length};return n.push(t),r}if(_$isarray_101(t)){for(var i=new Array(t.length),o=0;o<t.length;o++)i[o]=e(t[o],n);return i}if("object"==typeof t&&!(t instanceof Date)){i={};for(var s in t)i[s]=e(t[s],n);return i}return t}(n,t),r.attachments=t.length,{packet:r,buffers:t}},_$binary_95.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(_$isarray_101(t))for(var r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(var i in t)t[i]=e(t[i],n);return t}(e.data,t),e.attachments=void 0,e},_$binary_95.removeBlobs=function(e,t){var n=0,r=e;!function e(i,o,s){if(!i)return i;if(withNativeBlob&&i instanceof Blob||withNativeFile&&i instanceof File){n++;var a=new FileReader;a.onload=function(){s?s[o]=this.result:r=this.result,--n||t(r)},a.readAsArrayBuffer(i)}else if(_$isarray_101(i))for(var u=0;u<i.length;u++)e(i[u],u,i);else if("object"==typeof i&&!_$isBuffer_97(i))for(var l in i)e(i[l],l,i)}(r),n||t(r)};var _$socketIoParser_96={},__debug_96=_$browser_99("socket.io-parser");function Encoder(){}_$socketIoParser_96.protocol=4,_$socketIoParser_96.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],_$socketIoParser_96.CONNECT=0,_$socketIoParser_96.DISCONNECT=1,_$socketIoParser_96.EVENT=2,_$socketIoParser_96.ACK=3,_$socketIoParser_96.ERROR=4,_$socketIoParser_96.BINARY_EVENT=5,_$socketIoParser_96.BINARY_ACK=6,_$socketIoParser_96.Encoder=Encoder,_$socketIoParser_96.Decoder=Decoder;var ERROR_PACKET=_$socketIoParser_96.ERROR+'"encode error"';function encodeAsString(t){var n=""+t.type;if(_$socketIoParser_96.BINARY_EVENT!==t.type&&_$socketIoParser_96.BINARY_ACK!==t.type||(n+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(n+=t.nsp+","),null!=t.id&&(n+=t.id),null!=t.data){var r=function(t){try{return JSON.stringify(t)}catch(e){return!1}}(t.data);if(!1===r)return ERROR_PACKET;n+=r}return __debug_96("encoded %j as %s",t,n),n}function Decoder(){this.reconstructor=null}function BinaryReconstructor(e){this.reconPack=e,this.buffers=[]}function error(e){return{type:_$socketIoParser_96.ERROR,data:"parser error: "+e}}Encoder.prototype.encode=function(e,t){__debug_96("encoding packet %j",e),_$socketIoParser_96.BINARY_EVENT===e.type||_$socketIoParser_96.BINARY_ACK===e.type?function(e,t){_$binary_95.removeBlobs(e,function(e){var n=_$binary_95.deconstructPacket(e),r=encodeAsString(n.packet),i=n.buffers;i.unshift(r),t(i)})}(e,t):t([encodeAsString(e)])},_$componentEmitter_98(Decoder.prototype),Decoder.prototype.add=function(t){var n;if("string"==typeof t)n=function(t){var n=0,r={type:Number(t.charAt(0))};if(null==_$socketIoParser_96.types[r.type])return error("unknown packet type "+r.type);if(_$socketIoParser_96.BINARY_EVENT===r.type||_$socketIoParser_96.BINARY_ACK===r.type){for(var i="";"-"!==t.charAt(++n)&&(i+=t.charAt(n),n!=t.length););if(i!=Number(i)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(n+1))for(r.nsp="";++n;){if(","===(s=t.charAt(n)))break;if(r.nsp+=s,n===t.length)break}else r.nsp="/";var o=t.charAt(n+1);if(""!==o&&Number(o)==o){for(r.id="";++n;){var s;if(null==(s=t.charAt(n))||Number(s)!=s){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}if(t.charAt(++n)){var a=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(n));if(!(!1!==a&&(r.type===_$socketIoParser_96.ERROR||_$isarray_101(a))))return error("invalid payload");r.data=a}return __debug_96("decoded %s as %j",t,r),r}(t),_$socketIoParser_96.BINARY_EVENT===n.type||_$socketIoParser_96.BINARY_ACK===n.type?(this.reconstructor=new BinaryReconstructor(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!_$isBuffer_97(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",n))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=_$binary_95.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};var _$componentEmitter_53={exports:{}};function __Emitter_53(e){if(e)return function(e){for(var t in __Emitter_53.prototype)e[t]=__Emitter_53.prototype[t];return e}(e)}_$componentEmitter_53.exports=__Emitter_53,__Emitter_53.prototype.on=__Emitter_53.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},__Emitter_53.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},__Emitter_53.prototype.off=__Emitter_53.prototype.removeListener=__Emitter_53.prototype.removeAllListeners=__Emitter_53.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},__Emitter_53.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},__Emitter_53.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},__Emitter_53.prototype.hasListeners=function(e){return!!this.listeners(e).length},_$componentEmitter_53=_$componentEmitter_53.exports;var __s_56=1e3,__m_56=60*__s_56,__h_56=60*__m_56,__d_56=24*__h_56,__y_56=365.25*__d_56;function __plural_56(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var _$ms_56=function(e,t){t=t||{};var n,r=typeof e;if("string"===r&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*__y_56;case"days":case"day":case"d":return n*__d_56;case"hours":case"hour":case"hrs":case"hr":case"h":return n*__h_56;case"minutes":case"minute":case"mins":case"min":case"m":return n*__m_56;case"seconds":case"second":case"secs":case"sec":case"s":return n*__s_56;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===r&&!1===isNaN(e))return t.long?__plural_56(n=e,__d_56,"day")||__plural_56(n,__h_56,"hour")||__plural_56(n,__m_56,"minute")||__plural_56(n,__s_56,"second")||n+" ms":function(e){return e>=__d_56?Math.round(e/__d_56)+"d":e>=__h_56?Math.round(e/__h_56)+"h":e>=__m_56?Math.round(e/__m_56)+"m":e>=__s_56?Math.round(e/__s_56)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},_$debug_55={};function __createDebug_55(e){var t;function n(){if(n.enabled){var e=n,r=+new Date,i=r-(t||r);e.diff=i,e.prev=t,e.curr=r,t=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=_$debug_55.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;a++;var r=_$debug_55.formatters[n];if("function"==typeof r){var i=o[a];t=r.call(e,i),o.splice(a,1),a--}return t}),_$debug_55.formatArgs.call(e,o),(n.log||_$debug_55.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=_$debug_55.enabled(e),n.useColors=_$debug_55.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return _$debug_55.colors[Math.abs(n)%_$debug_55.colors.length]}(e),n.destroy=__destroy_55,"function"==typeof _$debug_55.init&&_$debug_55.init(n),_$debug_55.instances.push(n),n}function __destroy_55(){var e=_$debug_55.instances.indexOf(this);return-1!==e&&(_$debug_55.instances.splice(e,1),!0)}_$debug_55=_$debug_55=__createDebug_55.debug=__createDebug_55.default=__createDebug_55,_$debug_55.coerce=function(e){return e instanceof Error?e.stack||e.message:e},_$debug_55.disable=function(){_$debug_55.enable("")},_$debug_55.enable=function(e){var t;_$debug_55.save(e),_$debug_55.names=[],_$debug_55.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?_$debug_55.skips.push(new RegExp("^"+e.substr(1)+"$")):_$debug_55.names.push(new RegExp("^"+e+"$")));for(t=0;t<_$debug_55.instances.length;t++){var i=_$debug_55.instances[t];i.enabled=_$debug_55.enabled(i.namespace)}},_$debug_55.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=_$debug_55.skips.length;t<n;t++)if(_$debug_55.skips[t].test(e))return!1;for(t=0,n=_$debug_55.names.length;t<n;t++)if(_$debug_55.names[t].test(e))return!0;return!1},_$debug_55.humanize=_$ms_56,_$debug_55.instances=[],_$debug_55.names=[],_$debug_55.skips=[],_$debug_55.formatters={};var _$browser_54={};(function(t){function n(){var n;try{n=_$browser_54.storage.debug}catch(e){}return!n&&void 0!==t&&"env"in t&&(n=t.env.DEBUG),n}(_$browser_54=_$browser_54=_$debug_55).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},_$browser_54.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+_$browser_54.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)}},_$browser_54.save=function(t){try{null==t?_$browser_54.storage.removeItem("debug"):_$browser_54.storage.debug=t}catch(e){}},_$browser_54.load=n,_$browser_54.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_$browser_54.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),_$browser_54.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_$browser_54.formatters.j=function(e){try{return JSON.stringify(e)}catch(err){return"[UnexpectedJSONParseError]: "+err.message}},_$browser_54.enable(n())}).call(this,_$browser_81);var indexOf=[].indexOf,_$indexof_68=function(e,t){if(indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},_$parseqs_77={encode:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},decode:function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},_$keys_58=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},__toString_65={}.toString,_$isarray_65=Array.isArray||function(e){return"[object Array]"==__toString_65.call(e)},_$hasBinary_64={};(function(e){var t=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===t.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===t.call(File);_$hasBinary_64=function t(i){if(!i||"object"!=typeof i)return!1;if(_$isarray_65(i)){for(var o=0,s=i.length;o<s;o++)if(t(i[o]))return!0;return!1}if("function"==typeof e&&e.isBuffer&&e.isBuffer(i)||"function"==typeof ArrayBuffer&&i instanceof ArrayBuffer||n&&i instanceof Blob||r&&i instanceof File)return!0;if(i.toJSON&&"function"==typeof i.toJSON&&1===arguments.length)return t(i.toJSON(),!0);for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)&&t(i[a]))return!0;return!1}}).call(this,_$buffer_35({}).Buffer);var _$arraybufferSlice_3=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer};function __noop_2(){}var _$after_2=function(e,t,n){var r=!1;return n=n||__noop_2,i.count=e,0===e?t():i;function i(e,o){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(r=!0,t(e),t=n):0!==i.count||r||t(null,o)}},byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode;function ucs2decode(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function checkScalarValue(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(e,t){return stringFromCharCode(e>>t&63|128)}function encodeCodePoint(e,t){if(0==(4294967168&e))return stringFromCharCode(e);var n="";return 0==(4294965248&e)?n=stringFromCharCode(e>>6&31|192):0==(4294901760&e)?(checkScalarValue(e,t)||(e=65533),n=stringFromCharCode(e>>12&15|224),n+=createByte(e,6)):0==(4292870144&e)&&(n=stringFromCharCode(e>>18&7|240),n+=createByte(e,12),n+=createByte(e,6)),n+stringFromCharCode(63&e|128)}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var e=255&byteArray[byteIndex];if(byteIndex++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function decodeSymbol(e){var t,n;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(t=255&byteArray[byteIndex],byteIndex++,0==(128&t))return t;if(192==(224&t)){if((n=(31&t)<<6|readContinuationByte())>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if((n=(15&t)<<12|readContinuationByte()<<6|readContinuationByte())>=2048)return checkScalarValue(n,e)?n:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(n=(7&t)<<18|readContinuationByte()<<12|readContinuationByte()<<6|readContinuationByte())>=65536&&n<=1114111)return n;throw Error("Invalid UTF-8 detected")}var _$utf8_59={encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=ucs2decode(e),i=r.length,o=-1,s="";++o<i;)s+=encodeCodePoint(r[o],n);return s},decode:function(e,t){var n=!1!==(t=t||{}).strict;byteArray=ucs2decode(e),byteCount=byteArray.length,byteIndex=0;for(var r,i=[];!1!==(r=decodeSymbol(n));)i.push(r);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=stringFromCharCode((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=stringFromCharCode(t);return i}(i)}},_$base64Arraybuffer_31={};!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;_$base64Arraybuffer_31.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},_$base64Arraybuffer_31.decode=function(e){var n,r,i,o,s,a=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),p=new Uint8Array(c);for(n=0;n<u;n+=4)r=t[e.charCodeAt(n)],i=t[e.charCodeAt(n+1)],o=t[e.charCodeAt(n+2)],s=t[e.charCodeAt(n+3)],p[l++]=r<<2|i>>4,p[l++]=(15&i)<<4|o>>2,p[l++]=(3&o)<<6|63&s;return c}}();var _$blob_33={},BlobBuilder=void 0!==BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,blobSupported=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e})}function BlobBuilderConstructor(e,t){t=t||{};var n=new BlobBuilder;return mapArrayBufferViews(e).forEach(function(e){n.append(e)}),t.type?n.getBlob(t.type):n.getBlob()}function BlobConstructor(e,t){return new Blob(mapArrayBufferViews(e),t||{})}"undefined"!=typeof Blob&&(BlobBuilderConstructor.prototype=Blob.prototype,BlobConstructor.prototype=Blob.prototype),_$blob_33=blobSupported?blobSupportsArrayBufferView?Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0;var _$browser_57={},base64encoder;"undefined"!=typeof ArrayBuffer&&(base64encoder=_$base64Arraybuffer_31);var isAndroid="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),isPhantomJS="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;_$browser_57.protocol=3;var packets=_$browser_57.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=_$keys_58(packets),err={type:"error",data:"parser error"};function map(e,t,n){for(var r=new Array(e.length),i=_$after_2(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},s=0;s<e.length;s++)o(s,e[s],i)}_$browser_57.encodePacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=!1),"function"==typeof n&&(r=n,n=null);var i=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(e,t,n){if(!t)return _$browser_57.encodeBase64Packet(e,n);var r=e.data,i=new Uint8Array(r),o=new Uint8Array(1+r.byteLength);o[0]=packets[e.type];for(var s=0;s<i.length;s++)o[s+1]=i[s];return n(o.buffer)}(e,t,r);if(void 0!==_$blob_33&&i instanceof _$blob_33)return function(e,t,n){if(!t)return _$browser_57.encodeBase64Packet(e,n);if(dontSendBlobs)return function(e,t,n){if(!t)return _$browser_57.encodeBase64Packet(e,n);var r=new FileReader;return r.onload=function(){_$browser_57.encodePacket({type:e.type,data:r.result},t,!0,n)},r.readAsArrayBuffer(e.data)}(e,t,n);var r=new Uint8Array(1);return r[0]=packets[e.type],n(new _$blob_33([r.buffer,e.data]))}(e,t,r);if(i&&i.base64)return function(e,t){return t("b"+_$browser_57.packets[e.type]+e.data.data)}(e,r);var o=packets[e.type];return void 0!==e.data&&(o+=n?_$utf8_59.encode(String(e.data),{strict:!1}):String(e.data)),r(""+o)},_$browser_57.encodeBase64Packet=function(t,n){var r,i="b"+_$browser_57.packets[t.type];if(void 0!==_$blob_33&&t.data instanceof _$blob_33){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(t.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(var s=new Uint8Array(t.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];r=String.fromCharCode.apply(null,a)}return i+=btoa(r),n(i)},_$browser_57.decodePacket=function(t,n,r){if(void 0===t)return err;if("string"==typeof t){if("b"===t.charAt(0))return _$browser_57.decodeBase64Packet(t.substr(1),n);if(r&&!1===(t=function(t){try{t=_$utf8_59.decode(t,{strict:!1})}catch(e){return!1}return t}(t)))return err;var i=t.charAt(0);return Number(i)==i&&packetslist[i]?t.length>1?{type:packetslist[i],data:t.substring(1)}:{type:packetslist[i]}:err}i=new Uint8Array(t)[0];var o=_$arraybufferSlice_3(t,1);return _$blob_33&&"blob"===n&&(o=new _$blob_33([o])),{type:packetslist[i],data:o}},_$browser_57.decodeBase64Packet=function(e,t){var n=packetslist[e.charAt(0)];if(!base64encoder)return{type:n,data:{base64:!0,data:e.substr(1)}};var r=base64encoder.decode(e.substr(1));return"blob"===t&&_$blob_33&&(r=new _$blob_33([r])),{type:n,data:r}},_$browser_57.encodePayload=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r=_$hasBinary_64(e);return t&&r?_$blob_33&&!dontSendBlobs?_$browser_57.encodePayloadAsBlob(e,n):_$browser_57.encodePayloadAsArrayBuffer(e,n):e.length?void map(e,function(e,n){_$browser_57.encodePacket(e,!!r&&t,!1,function(e){n(null,function(e){return e.length+":"+e}(e))})},function(e,t){return n(t.join(""))}):n("0:")},_$browser_57.decodePayload=function(e,t,n){if("string"!=typeof e)return _$browser_57.decodePayloadAsBinary(e,t,n);var r;if("function"==typeof t&&(n=t,t=null),""===e)return n(err,0,1);for(var i,o,s="",a=0,u=e.length;a<u;a++){var l=e.charAt(a);if(":"===l){if(""===s||s!=(i=Number(s)))return n(err,0,1);if(s!=(o=e.substr(a+1,i)).length)return n(err,0,1);if(o.length){if(r=_$browser_57.decodePacket(o,t,!1),err.type===r.type&&err.data===r.data)return n(err,0,1);if(!1===n(r,a+i,u))return}a+=i,s=""}else s+=l}return""!==s?n(err,0,1):void 0},_$browser_57.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));map(e,function(e,t){_$browser_57.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var r=n.reduce(function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}i[o++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)i[o++]=parseInt(a[s]);for(i[o++]=255,r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]}),t(i.buffer)})},_$browser_57.encodePayloadAsBlob=function(e,t){map(e,function(e,t){_$browser_57.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,_$blob_33){var a=new _$blob_33([n.buffer,s.buffer,e]);t(null,a)}})},function(e,n){return t(new _$blob_33(n))})},_$browser_57.decodePayloadAsBinary=function(t,n,r){"function"==typeof n&&(r=n,n=null);for(var i=t,o=[];i.byteLength>0;){for(var s=new Uint8Array(i),a=0===s[0],u="",l=1;255!==s[l];l++){if(u.length>310)return r(err,0,1);u+=s[l]}i=_$arraybufferSlice_3(i,2+u.length),u=parseInt(u);var c=_$arraybufferSlice_3(i,0,u);if(a)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(e){var p=new Uint8Array(c);for(c="",l=0;l<p.length;l++)c+=String.fromCharCode(p[l])}o.push(c),i=_$arraybufferSlice_3(i,u)}var d=o.length;o.forEach(function(e,t){r(_$browser_57.decodePacket(e,n,!0),t,d)})};var _$transport_46={};function Transport(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}_$transport_46=Transport,_$componentEmitter_53(Transport.prototype),Transport.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},Transport.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(e){var t=_$browser_57.decodePacket(e,this.socket.binaryType);this.onPacket(t)},Transport.prototype.onPacket=function(e){this.emit("packet",e)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};var _$hasCors_66={};try{_$hasCors_66="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(err){_$hasCors_66=!1}var _$xmlhttprequest_52=function(t){var n=t.xdomain,r=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!n||_$hasCors_66))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(e){}if(!n)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}},_$componentInherit_39=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},_$yeast_118={},prev,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length=64,__map_118={},seed=0,__i_118=0;function __encode_118(e){var t="";do{t=alphabet[e%length]+t,e=Math.floor(e/length)}while(e>0);return t}function yeast(){var e=__encode_118(+new Date);return e!==prev?(seed=0,prev=e):e+"."+__encode_118(seed++)}for(;__i_118<length;__i_118++)__map_118[alphabet[__i_118]]=__i_118;yeast.encode=__encode_118,yeast.decode=function(e){var t=0;for(__i_118=0;__i_118<e.length;__i_118++)t=t*length+__map_118[e.charAt(__i_118)];return t},_$yeast_118=yeast;var __debug_50=_$browser_54("engine.io-client:polling"),_$Polling_50=Polling,hasXHR2=null!=new _$xmlhttprequest_52({xdomain:!1}).responseType;function Polling(e){var t=e&&e.forceBase64;hasXHR2&&!t||(this.supportsBinary=!1),_$transport_46.call(this,e)}_$componentInherit_39(Polling,_$transport_46),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(e){var t=this;function n(){__debug_50("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(__debug_50("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){__debug_50("pre-pause polling complete"),--r||n()})),this.writable||(__debug_50("we are currently writing - waiting to pause"),r++,this.once("drain",function(){__debug_50("pre-pause writing complete"),--r||n()}))}else n()},Polling.prototype.poll=function(){__debug_50("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(e){var t=this;__debug_50("polling got data %s",e),_$browser_57.decodePayload(e,this.socket.binaryType,function(e,n,r){if("opening"===t.readyState&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():__debug_50('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var e=this;function t(){__debug_50("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(__debug_50("transport open - closing"),t()):(__debug_50("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};_$browser_57.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},Polling.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=_$yeast_118()),this.supportsBinary||e.sid||(e.b64=1),e=_$parseqs_77.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e};var _$pollingXhr_49={},__debug_49=_$browser_54("engine.io-client:polling-xhr");function empty(){}function XHR(e){if(_$Polling_50.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function Request(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(_$pollingXhr_49=XHR,_$pollingXhr_49.Request=Request,_$componentInherit_39(XHR,_$Polling_50),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new Request(e)},XHR.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},XHR.prototype.doPoll=function(){__debug_49("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},_$componentEmitter_53(Request.prototype),Request.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new _$xmlhttprequest_52(t),r=this;try{__debug_49("xhr open %s: %s",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?n.setRequestHeader("Content-type","application/octet-stream"):n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{n.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState)try{var t=n.getResponseHeader("Content-Type");r.supportsBinary&&"application/octet-stream"===t&&(n.responseType="arraybuffer")}catch(e){}4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},__debug_49("xhr data %s",this.data),n.send(this.data)}catch(e){return void setTimeout(function(){r.onError(e)},0)}"undefined"!=typeof document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},Request.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},Request.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,t)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var t;try{var n;try{n=this.xhr.getResponseHeader("Content-Type")}catch(e){}t="application/octet-stream"===n&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=t&&this.onData(t)},Request.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},Request.requestsCount=0,Request.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",unloadHandler);else if("function"==typeof addEventListener){var terminationEvent="onpagehide"in self?"pagehide":"unload";addEventListener(terminationEvent,unloadHandler,!1)}function unloadHandler(){for(var e in Request.requests)Request.requests.hasOwnProperty(e)&&Request.requests[e].abort()}var _$JSONPPolling_48={};(function(t){_$JSONPPolling_48=a;var n,r=/\n/g,i=/\\n/g;function o(){}function s(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function a(e){if(_$Polling_50.call(this,e),this.query=this.query||{},!n){var t=s();n=t.___eio=t.___eio||[]}this.index=n.length;var r=this;n.push(function(e){r.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){r.script&&(r.script.onerror=o)},!1)}_$componentInherit_39(a,_$Polling_50),a.prototype.supportsBinary=!1,a.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),_$Polling_50.prototype.doClose.call(this)},a.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},a.prototype.doWrite=function(t,n){var o=this;if(!this.form){var s,a=document.createElement("form"),u=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=l,a.method="POST",a.setAttribute("accept-charset","utf-8"),u.name="d",a.appendChild(u),document.body.appendChild(a),this.form=a,this.area=u}function c(){p(),n()}function p(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';s=document.createElement(t)}catch(e){(s=document.createElement("iframe")).name=o.iframeId,s.src="javascript:0"}s.id=o.iframeId,o.form.appendChild(s),o.iframe=s}this.form.action=this.uri(),p(),t=t.replace(i,"\\\n"),this.area.value=t.replace(r,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$websocket_51={};(function(t){var n,r,i=_$browser_54("engine.io-client:websocket");if("undefined"!=typeof WebSocket)n=WebSocket;else if("undefined"!=typeof self)n=self.WebSocket||self.MozWebSocket;else try{r=_$empty_34({})}catch(e){}var o=n||r;function s(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=n&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(o=r),_$transport_46.call(this,e)}_$websocket_51=s,_$componentInherit_39(s,_$transport_46),s.prototype.name="websocket",s.prototype.supportsBinary=!0,s.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new o(e,t):new o(e):new o(e,t,n)}catch(err){return this.emit("error",err)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},s.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},s.prototype.write=function(n){var r=this;this.writable=!1;for(var o=n.length,s=0,a=o;s<a;s++)!function(n){_$browser_57.encodePacket(n,r.supportsBinary,function(s){if(!r.usingBrowserWebSocket){var a={};n.options&&(a.compress=n.options.compress),r.perMessageDeflate&&("string"==typeof s?t.byteLength(s):s.length)<r.perMessageDeflate.threshold&&(a.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(s):r.ws.send(s,a)}catch(e){i("websocket closed before onclose event")}--o||(r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0))})}(n[s])},s.prototype.onClose=function(){_$transport_46.prototype.onClose.call(this)},s.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},s.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=_$yeast_118()),this.supportsBinary||(e.b64=1),(e=_$parseqs_77.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},s.prototype.check=function(){return!(!o||"__initialize"in o&&this.name===s.prototype.name)}}).call(this,_$buffer_35({}).Buffer);var _$transports_47={polling:function(e){var t=!1,n=!1,r=!1!==e.jsonp;if("undefined"!=typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?443:80),t=e.hostname!==location.hostname||o!==e.port,n=e.secure!==i}if(e.xdomain=t,e.xscheme=n,"open"in new _$xmlhttprequest_52(e)&&!e.forceJSONP)return new _$pollingXhr_49(e);if(!r)throw new Error("JSONP disabled");return new _$JSONPPolling_48(e)}};_$transports_47.websocket=_$websocket_51;var _$socket_45={},__debug_45=_$browser_54("engine.io-client:socket");function __Socket_45(e,t){if(!(this instanceof __Socket_45))return new __Socket_45(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=_$parseuri_78(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=_$parseuri_78(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=_$parseqs_77.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}_$socket_45=__Socket_45,__Socket_45.priorWebsocketSuccess=!1,_$componentEmitter_53(__Socket_45.prototype),__Socket_45.protocol=_$browser_57.protocol,__Socket_45.Socket=__Socket_45,__Socket_45.Transport=_$transport_46,__Socket_45.transports=_$transports_47,__Socket_45.parser=_$browser_57,__Socket_45.prototype.createTransport=function(e){__debug_45('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=_$browser_57.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new _$transports_47[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},__Socket_45.prototype.open=function(){var t;if(this.rememberUpgrade&&__Socket_45.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var n=this;return void setTimeout(function(){n.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(e){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},__Socket_45.prototype.setTransport=function(e){__debug_45("setting transport %s",e.name);var t=this;this.transport&&(__debug_45("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},__Socket_45.prototype.probe=function(e){__debug_45('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(__debug_45('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(__debug_45('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;__Socket_45.priorWebsocketSuccess="websocket"===t.name,__debug_45('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!==r.readyState&&(__debug_45("changing transport and sending upgrade packet"),c(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{__debug_45('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=t.name,r.emit("upgradeError",o)}}))}function o(){n||(n=!0,c(),t.close(),t=null)}function s(n){var i=new Error("probe error: "+n);i.transport=t.name,o(),__debug_45('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function a(){s("transport closed")}function u(){s("socket closed")}function l(e){t&&e.name!==t.name&&(__debug_45('"%s" works - aborting "%s"',e.name,t.name),o())}function c(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",a),r.removeListener("close",u),r.removeListener("upgrading",l)}__Socket_45.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",a),this.once("close",u),this.once("upgrading",l),t.open()},__Socket_45.prototype.onOpen=function(){if(__debug_45("socket open"),this.readyState="open",__Socket_45.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){__debug_45("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},__Socket_45.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(__debug_45('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else __debug_45('packet received with socket readyState "%s"',this.readyState)},__Socket_45.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},__Socket_45.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},__Socket_45.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){__debug_45("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},__Socket_45.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},__Socket_45.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},__Socket_45.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(__debug_45("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},__Socket_45.prototype.write=__Socket_45.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},__Socket_45.prototype.sendPacket=function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},__Socket_45.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}function t(){e.onClose("forced close"),__debug_45("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},__Socket_45.prototype.onError=function(e){__debug_45("socket error %j",e),__Socket_45.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},__Socket_45.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(__debug_45('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},__Socket_45.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~_$indexof_68(this.transports,e[n])&&t.push(e[n]);return t};var _$lib_44={};_$lib_44=_$socket_45,_$lib_44.parser=_$browser_57;var _$componentEmitter_91={exports:{}};function __Emitter_91(e){if(e)return function(e){for(var t in __Emitter_91.prototype)e[t]=__Emitter_91.prototype[t];return e}(e)}_$componentEmitter_91.exports=__Emitter_91,__Emitter_91.prototype.on=__Emitter_91.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},__Emitter_91.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},__Emitter_91.prototype.off=__Emitter_91.prototype.removeListener=__Emitter_91.prototype.removeAllListeners=__Emitter_91.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},__Emitter_91.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},__Emitter_91.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},__Emitter_91.prototype.hasListeners=function(e){return!!this.listeners(e).length},_$componentEmitter_91=_$componentEmitter_91.exports;var _$toArray_103=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n},_$on_88=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}},slice=[].slice,_$componentBind_37=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=slice.call(arguments,2);return function(){return t.apply(e,n.concat(slice.call(arguments)))}},_$socket_89={},__debug_89=_$browser_92("socket.io-client:socket");_$socket_89=_$socket_89=__Socket_89;var events={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},emit=_$componentEmitter_91.prototype.emit;function __Socket_89(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}_$componentEmitter_91(__Socket_89.prototype),__Socket_89.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[_$on_88(e,"open",_$componentBind_37(this,"onopen")),_$on_88(e,"packet",_$componentBind_37(this,"onpacket")),_$on_88(e,"close",_$componentBind_37(this,"onclose"))]}},__Socket_89.prototype.open=__Socket_89.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},__Socket_89.prototype.send=function(){var e=_$toArray_103(arguments);return e.unshift("message"),this.emit.apply(this,e),this},__Socket_89.prototype.emit=function(e){if(events.hasOwnProperty(e))return emit.apply(this,arguments),this;var t=_$toArray_103(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:_$hasBinary_64(t))?_$socketIoParser_96.BINARY_EVENT:_$socketIoParser_96.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(__debug_89("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},__Socket_89.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},__Socket_89.prototype.onopen=function(){if(__debug_89("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?_$parseqs_77.encode(this.query):this.query;__debug_89("sending connect packet with query %s",e),this.packet({type:_$socketIoParser_96.CONNECT,query:e})}else this.packet({type:_$socketIoParser_96.CONNECT})},__Socket_89.prototype.onclose=function(e){__debug_89("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},__Socket_89.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===_$socketIoParser_96.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case _$socketIoParser_96.CONNECT:this.onconnect();break;case _$socketIoParser_96.EVENT:case _$socketIoParser_96.BINARY_EVENT:this.onevent(e);break;case _$socketIoParser_96.ACK:case _$socketIoParser_96.BINARY_ACK:this.onack(e);break;case _$socketIoParser_96.DISCONNECT:this.ondisconnect();break;case _$socketIoParser_96.ERROR:this.emit("error",e.data)}},__Socket_89.prototype.onevent=function(e){var t=e.data||[];__debug_89("emitting event %j",t),null!=e.id&&(__debug_89("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?emit.apply(this,t):this.receiveBuffer.push(t)},__Socket_89.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var r=_$toArray_103(arguments);__debug_89("sending ack %j",r),t.packet({type:_$hasBinary_64(r)?_$socketIoParser_96.BINARY_ACK:_$socketIoParser_96.ACK,id:e,data:r})}}},__Socket_89.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(__debug_89("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):__debug_89("bad ack %s",e.id)},__Socket_89.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},__Socket_89.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)emit.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},__Socket_89.prototype.ondisconnect=function(){__debug_89("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},__Socket_89.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},__Socket_89.prototype.close=__Socket_89.prototype.disconnect=function(){return this.connected&&(__debug_89("performing disconnect (%s)",this.nsp),this.packet({type:_$socketIoParser_96.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},__Socket_89.prototype.compress=function(e){return this.flags.compress=e,this},__Socket_89.prototype.binary=function(e){return this.flags.binary=e,this};var _$backo2_30={};function Backoff(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}_$backo2_30=Backoff,Backoff.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(e){this.ms=e},Backoff.prototype.setMax=function(e){this.max=e},Backoff.prototype.setJitter=function(e){this.jitter=e};var _$manager_87={},__debug_87=_$browser_92("socket.io-client:manager"),__has_87=Object.prototype.hasOwnProperty;function Manager(e,t){if(!(this instanceof Manager))return new Manager(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new _$backo2_30({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||_$socketIoParser_96;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}_$manager_87=Manager,Manager.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)__has_87.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)__has_87.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},Manager.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},_$componentEmitter_91(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e,t){if(__debug_87("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;__debug_87("opening %s",this.uri),this.engine=_$lib_44(this.uri,this.opts);var n=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var i=_$on_88(n,"open",function(){r.onopen(),e&&e()}),o=_$on_88(n,"error",function(t){if(__debug_87("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;__debug_87("connect attempt will timeout after %d",s);var a=setTimeout(function(){__debug_87("connect attempt timed out after %d",s),i.destroy(),n.close(),n.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(a)}})}return this.subs.push(i),this.subs.push(o),this},Manager.prototype.onopen=function(){__debug_87("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(_$on_88(e,"data",_$componentBind_37(this,"ondata"))),this.subs.push(_$on_88(e,"ping",_$componentBind_37(this,"onping"))),this.subs.push(_$on_88(e,"pong",_$componentBind_37(this,"onpong"))),this.subs.push(_$on_88(e,"error",_$componentBind_37(this,"onerror"))),this.subs.push(_$on_88(e,"close",_$componentBind_37(this,"onclose"))),this.subs.push(_$on_88(this.decoder,"decoded",_$componentBind_37(this,"ondecoded")))},Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){__debug_87("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new _$socket_89(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",i),n.on("connect",function(){n.id=r.generateId(e)}),this.autoConnect&&i()}function i(){~_$indexof_68(r.connecting,n)||r.connecting.push(n)}return n},Manager.prototype.destroy=function(e){var t=_$indexof_68(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},Manager.prototype.packet=function(e){__debug_87("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){__debug_87("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){__debug_87("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){__debug_87("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)__debug_87("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();__debug_87("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(__debug_87("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(__debug_87("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(__debug_87("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};var _$componentEmitter_38={exports:{}};function __Emitter_38(e){if(e)return function(e){for(var t in __Emitter_38.prototype)e[t]=__Emitter_38.prototype[t];return e}(e)}_$componentEmitter_38.exports=__Emitter_38,__Emitter_38.prototype.on=__Emitter_38.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},__Emitter_38.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},__Emitter_38.prototype.off=__Emitter_38.prototype.removeListener=__Emitter_38.prototype.removeAllListeners=__Emitter_38.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},__Emitter_38.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},__Emitter_38.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},__Emitter_38.prototype.hasListeners=function(e){return!!this.listeners(e).length},_$componentEmitter_38=_$componentEmitter_38.exports;var _$parseUrl_231={};(function(e){_$parseUrl_231=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"module.exports.parseUrl","fileName":"'+e+'","paramsNumber":1},');var n=/^\w+:\/\//.exec(t),r=0;n&&(r=n[0].length+1);var i=t.indexOf("/",r);return-1===i?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.parseUrl"},'),{origin:t,pathname:"/"}):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"module.exports.parseUrl"},'),{origin:t.slice(0,i),pathname:t.slice(i)})}}).call(this,"/packages/@uppy/transloadit/lib/parseUrl.js");var _$TransloaditAssembly_226={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n,r=["ASSEMBLY_UPLOADING","ASSEMBLY_EXECUTING","ASSEMBLY_COMPLETED"];function i(t,n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"isStatus","fileName":"'+e+'","paramsNumber":2},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"isStatus"},'),r.indexOf(t)>=r.indexOf(n)}var o=function(r){var o,s;function a(t){var n;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),(n=r.call(this)||this).status=t,n.socket=null,n.pollInterval=null,n.closed=!1,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},'),n}s=r,(o=a).prototype=Object.create(s.prototype),o.prototype.constructor=o,o.__proto__=s;var u=a.prototype;return u.connect=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"connect","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),this._connectSocket(),this._beginPolling(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"connect"},')},u._onFinished=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onFinished","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),this.emit("finished"),this.close(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onFinished"},')},u._connectSocket=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_connectSocket","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},');var r=_$parseUrl_231(this.status.websocket_url),i=(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"requireSocketIo","fileName":"'+e+'","paramsNumber":0},'),n||(n=_$lib_86({})),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"requireSocketIo"},'),n).connect(r.origin,{transports:["websocket"],path:r.pathname});i.on("connect",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),i.emit("assembly_connect",{id:t.status.assembly_id}),t.emit("connect"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),i.on("error",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),i.disconnect(),t.socket=null,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')}),i.on("assembly_finished",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":0},'),t._onFinished(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')}),i.on("assembly_upload_finished",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),t.emit("upload",n),t.status.uploads.push(n),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')}),i.on("assembly_uploading_finished",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":0},'),t.emit("executing"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')}),i.on("assembly_upload_meta_data_extracted",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":0},'),t.emit("metadata"),t._fetchStatus({diff:!1}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},')}),i.on("assembly_result_finished",function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":2},'),t.emit("result",n,r),t.status.results[n]||(t.status.results[n]=[]),t.status.results[n].push(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},')}),i.on("assembly_error",function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},'),t._onError(n),t._fetchStatus({diff:!1}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},')}),this.socket=i,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_connectSocket"},')},u._onError=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onError","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),this.emit("error",t(new Error(n.message),n)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onError"},')},u._beginPolling=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_beginPolling","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),this.pollInterval=setInterval(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":0},'),t.socket&&t.socket.connected||t._fetchStatus(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},')},2e3),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_beginPolling"},')},u._fetchStatus=function(t){var n=this,r=(void 0===t?{}:t).diff,i=void 0===r||r;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_fetchStatus","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_fetchStatus"},'),fetch(this.status.assembly_ssl_url).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},'),t.json()}).then(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey11","fileName":"'+e+'","paramsNumber":1},'),n.closed||(n.emit("status",t),i?n.updateStatus(t):n.status=t,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey11"},'))})},u.update=function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"update","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"update"},'),this._fetchStatus({diff:!0})},u.updateStatus=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"updateStatus","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),this._diffStatus(this.status,t),this.status=t,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"updateStatus"},')},u._diffStatus=function(t,n){var r=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_diffStatus","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},');var o=t.ok,s=n.ok;if(n.error&&!t.error)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_diffStatus"},'),this._onError(n);var a=i(s,"ASSEMBLY_EXECUTING")&&!i(o,"ASSEMBLY_EXECUTING");a&&this.emit("executing"),Object.keys(n.uploads).filter(function(n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey12","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey12"},'),!_$hasProperty_264(t.uploads,n)}).map(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey13","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey13"},'),n.uploads[t]}).forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey14","fileName":"'+e+'","paramsNumber":1},'),r.emit("upload",t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey14"},')}),a&&this.emit("metadata"),Object.keys(n.results).forEach(function(i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey18","fileName":"'+e+'","paramsNumber":1},');var o=n.results[i],s=t.results[i];o.filter(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey16","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey16"},'),!s||!s.some(function(n){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey15","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey15"},'),n.id===t.id})}).forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey17","fileName":"'+e+'","paramsNumber":1},'),r.emit("result",i,t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey17"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey18"},')}),i(s,"ASSEMBLY_COMPLETED")&&!i(o,"ASSEMBLY_COMPLETED")&&this.emit("finished"),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_diffStatus"},')},u.close=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"close","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssembly","superClass":"Emitter"}},'),this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"close"},')},a}(_$componentEmitter_38);_$TransloaditAssembly_226=o}).call(this,"/packages/@uppy/transloadit/lib/Assembly.js");var _$Client_229={};(function(e){_$Client_229=function(){function t(t){void 0===t&&(t={}),_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Client"}},'),this.opts=t,this._reportError=this._reportError.bind(this),this._headers={"Transloadit-Client":this.opts.client},_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var n=t.prototype;return n.createAssembly=function(t){var n=this,r=(t.templateId,t.params),i=t.fields,o=t.signature,s=t.expectedFiles;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"createAssembly","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Client"}},');var a=new FormData;a.append("params","string"==typeof r?r:JSON.stringify(r)),o&&a.append("signature",o),Object.keys(i).forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),a.append(t,i[t]),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),a.append("num_expected_upload_files",s);var u=this.opts.service+"/assemblies";return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"createAssembly"},'),fetch(u,{method:"post",headers:this._headers,body:a}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),t.json()}).then(function(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),t.error){var n=new Error(t.error);throw n.details=t.message,n.assembly=t,t.assembly_id&&(n.details+=" Assembly ID: "+t.assembly_id),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),n}return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),t}).catch(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},'),n._reportError(t,{url:u,type:"API_ERROR"})})},n.reserveFile=function(t,n){var r=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"reserveFile","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Client"}},');var i=encodeURIComponent(n.size),o=t.assembly_ssl_url+"/reserve_file?size="+i;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"reserveFile"},'),fetch(o,{method:"post",headers:this._headers}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},'),t.json()}).catch(function(i){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},'),r._reportError(i,{assembly:t,file:n,url:o,type:"API_ERROR"})})},n.addFile=function(t,n){var r=this;if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"addFile","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Client"}},'),!n.uploadURL)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"addFile"},'),Promise.reject(new Error("File does not have an `uploadURL`."));var i=encodeURIComponent(n.size),o=encodeURIComponent(n.uploadURL),s="size="+i+"&filename="+encodeURIComponent(n.name)+"&fieldname=file&s3Url="+o,a=t.assembly_ssl_url+"/add_file?"+s;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"addFile"},'),fetch(a,{method:"post",headers:this._headers}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},'),t.json()}).catch(function(i){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},'),r._reportError(i,{assembly:t,file:n,url:a,type:"API_ERROR"})})},n.cancelAssembly=function(t){var n=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"cancelAssembly","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Client"}},');var r=t.assembly_ssl_url;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"cancelAssembly"},'),fetch(r,{method:"delete",headers:this._headers}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},'),t.json()}).catch(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},'),n._reportError(t,{url:r,type:"API_ERROR"})})},n.getAssemblyStatus=function(t){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"getAssemblyStatus","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"Client"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"getAssemblyStatus"},'),fetch(t,{headers:this._headers}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey11","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey11"},'),t.json()}).catch(function(r){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey12","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey12"},'),n._reportError(r,{url:t,type:"STATUS_ERROR"})})},n.submitError=function(t,n){var r=n.endpoint,i=n.instance,o=n.assembly;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"submitError","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Client"}},');var s=t.details?t.message+" ("+t.details+")":t.message;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"submitError"},'),fetch("https://status.transloadit.com/client_error",{method:"post",body:JSON.stringify({endpoint:r,instance:i,assembly_id:o,agent:"undefined"!=typeof navigator?navigator.userAgent:"",client:this.opts.client,error:s})}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey13","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey13"},'),t.json()})},n._reportError=function(t,n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_reportError","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"Client"}},'),!1===this.opts.errorReporting)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_reportError"},'),t;var r={type:n.type};throw n.assembly&&(r.assembly=n.assembly.assembly_id,r.instance=n.assembly.instance),n.url&&(r.endpoint=n.url),this.submitError(t,r).catch(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey14","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey14"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_reportError"},'),t},t}()}).call(this,"/packages/@uppy/transloadit/lib/Client.js");var _$AssemblyOptions_227={};(function(e){function t(t){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"validateParams","fileName":"'+e+'","paramsNumber":1},'),!t)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"validateParams"},'),new Error("Transloadit: The `params` option is required.");if("string"==typeof t)try{t=JSON.parse(t)}catch(err){throw err.message="Transloadit: The `params` option is a malformed JSON string: "+err.message,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"validateParams"},'),err}if(!t.auth||!t.auth.key)throw _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"validateParams"},'),new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/account/api-settings.");_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"validateParams","paramsNumber":1},')}var n=function(){function n(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"AssemblyOptions"}},'),this.files=t,this.opts=n,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var r=n.prototype;return r._normalizeAssemblyOptions=function(t,n){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_normalizeAssemblyOptions","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"AssemblyOptions"}},'),Array.isArray(n.fields)){var r=n.fields;n.fields={},r.forEach(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},'),n.fields[r]=t.meta[r],_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')})}return n.fields||(n.fields={}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_normalizeAssemblyOptions"},'),n},r._getAssemblyOptions=function(n){var r=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_getAssemblyOptions","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"AssemblyOptions"}},');var i=this.opts;return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_getAssemblyOptions"},'),Promise.resolve().then(function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},'),i.getAssemblyOptions(n,i)}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},'),r._normalizeAssemblyOptions(n,t)}).then(function(r){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),t(r.params),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},'),{fileIDs:[n.id],options:r}})},r._dedupe=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_dedupe","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"AssemblyOptions"}},');var n=Object.create(null);return t.forEach(function(t){var r=t.fileIDs,i=t.options;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":1},');var o,s=JSON.stringify(i);n[s]?(o=n[s].fileIDs).push.apply(o,r):n[s]={options:i,fileIDs:[].concat(r)},_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_dedupe"},'),Object.keys(n).map(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},'),n[t]})},r.build=function(){var n=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"build","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"AssemblyOptions"}},');var r=this.opts;return this.files.length>0?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"build"},'),Promise.all(this.files.map(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},'),n._getAssemblyOptions(t)})).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},'),n._dedupe(t)})):r.alwaysRunAssembly?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"build"},'),Promise.resolve(r.getAssemblyOptions(null,r)).then(function(r){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":1},'),t(r.params),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},'),[{fileIDs:n.files.map(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},'),t.id}),options:r}]})):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"build"},'),Promise.resolve([]))},n}();(_$AssemblyOptions_227=n).validateParams=t}).call(this,"/packages/@uppy/transloadit/lib/AssemblyOptions.js");var _$TransloaditAssemblyWatcher_228={};(function(e){function t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var n=function(n){var r,i;function o(r,i){var o;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),(o=n.call(this)||this)._uppy=r,o._assemblyIDs=i,o._remaining=i.length,o.promise=new Promise(function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":2},'),o._resolve=t,o._reject=n,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),o._onAssemblyComplete=o._onAssemblyComplete.bind(t(o)),o._onAssemblyCancel=o._onAssemblyCancel.bind(t(o)),o._onAssemblyError=o._onAssemblyError.bind(t(o)),o._onImportError=o._onImportError.bind(t(o)),o._addListeners(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},'),o}i=n,(r=o).prototype=Object.create(i.prototype),r.prototype.constructor=r,r.__proto__=i;var s=o.prototype;return s._watching=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_watching","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_watching"},'),-1!==this._assemblyIDs.indexOf(t)},s._onAssemblyComplete=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onAssemblyComplete","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._watching(t.assembly_id)?(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly finish "+t.assembly_id),this.emit("assembly-complete",t.assembly_id),this._checkAllComplete(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onAssemblyComplete"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onAssemblyComplete"},')},s._onAssemblyCancel=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onAssemblyCancel","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._watching(t.assembly_id)?(this._checkAllComplete(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onAssemblyCancel"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onAssemblyCancel"},')},s._onAssemblyError=function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onAssemblyError","fileName":"'+e+'","paramsNumber":2,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._watching(t.assembly_id)?(this._uppy.log("[Transloadit] AssemblyWatcher: Got Assembly error "+t.assembly_id),this._uppy.log(n),this.emit("assembly-error",t.assembly_id,n),this._checkAllComplete(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onAssemblyError"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onAssemblyError"},')},s._onImportError=function(t,n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_onImportError","fileName":"'+e+'","paramsNumber":3,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._watching(t.assembly_id)?(this._onAssemblyError(t,r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onImportError"},')):_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_onImportError"},')},s._checkAllComplete=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_checkAllComplete","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._remaining-=1,0===this._remaining&&(this._removeListeners(),this._resolve()),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_checkAllComplete"},')},s._removeListeners=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_removeListeners","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._uppy.off("transloadit:complete",this._onAssemblyComplete),this._uppy.off("transloadit:assembly-cancel",this._onAssemblyCancel),this._uppy.off("transloadit:assembly-error",this._onAssemblyError),this._uppy.off("transloadit:import-error",this._onImportError),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_removeListeners"},')},s._addListeners=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"_addListeners","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"TransloaditAssemblyWatcher","superClass":"Emitter"}},'),this._uppy.on("transloadit:complete",this._onAssemblyComplete),this._uppy.on("transloadit:assembly-cancel",this._onAssemblyCancel),this._uppy.on("transloadit:assembly-error",this._onAssemblyError),this._uppy.on("transloadit:import-error",this._onImportError),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"_addListeners"},')},o}(_$componentEmitter_38);_$TransloaditAssemblyWatcher_228=n}).call(this,"/packages/@uppy/transloadit/lib/AssemblyWatcher.js");var _$package_232={version:"1.5.11"},_$lib_230={},___class_230,___temp_230;function ___extends_230(){return(___extends_230=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_230(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_230=_$lib_133.Plugin;function defaultGetAssemblyOptions(e,t){return{params:t.params,signature:t.signature,fields:t.fields}}var COMPANION="https://api2.transloadit.com/companion",TL_COMPANION=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/,TL_UPPY_SERVER=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/uppy-server/;___temp_230=___class_230=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).type="uploader",r.id=r.opts.id||"Transloadit",r.title="Transloadit",r.defaultLocale={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}};var i={service:"https://api2.transloadit.com",errorReporting:!0,waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:defaultGetAssemblyOptions,limit:0};r.opts=___extends_230({},i,{},n),r.i18nInit(),r._prepareUpload=r._prepareUpload.bind(___assertThisInitialized_230(r)),r._afterUpload=r._afterUpload.bind(___assertThisInitialized_230(r)),r._onError=r._onError.bind(___assertThisInitialized_230(r)),r._onTusError=r._onTusError.bind(___assertThisInitialized_230(r)),r._onCancelAll=r._onCancelAll.bind(___assertThisInitialized_230(r)),r._onFileUploadURLAvailable=r._onFileUploadURLAvailable.bind(___assertThisInitialized_230(r)),r._onRestored=r._onRestored.bind(___assertThisInitialized_230(r)),r._getPersistentData=r._getPersistentData.bind(___assertThisInitialized_230(r));var o=r.opts.getAssemblyOptions!==i.getAssemblyOptions;return r.opts.params?_$AssemblyOptions_227.validateParams(r.opts.params):o||_$AssemblyOptions_227.validateParams(null),r.client=new _$Client_229({service:r.opts.service,client:r._getClientVersion(),errorReporting:r.opts.errorReporting}),r.activeAssemblies={},r.assemblyWatchers={},r.completedFiles=Object.create(null),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.i18nArray=this.translator.translateArray.bind(this.translator),this.setPluginState()},i._getClientVersion=function(){var e=this,t=["uppy-core:"+this.uppy.constructor.VERSION,"uppy-transloadit:"+this.constructor.VERSION,"uppy-tus:"+_$lib_234.VERSION],n=function(n,r){var i=e.uppy.getPlugin(n);i&&t.push(r+":"+i.constructor.VERSION)};return this.opts.importFromUploadURLs&&(n("XHRUpload","uppy-xhr-upload"),n("AwsS3","uppy-aws-s3"),n("AwsS3Multipart","uppy-aws-s3-multipart")),n("Dropbox","uppy-dropbox"),n("Facebook","uppy-facebook"),n("GoogleDrive","uppy-google-drive"),n("Instagram","uppy-instagram"),n("OneDrive","uppy-onedrive"),n("Url","uppy-url"),t.join(",")},i._attachAssemblyMetadata=function(e,t){var n=___extends_230({},e.meta,{assembly_url:t.assembly_url,filename:e.name,fieldname:"file"}),r=___extends_230({},e.tus,{endpoint:t.tus_url}),i=e.remote;if(e.remote&&TL_UPPY_SERVER.test(e.remote.companionUrl)){var o=new Error("The https://api2.transloadit.com/uppy-server endpoint was renamed to https://api2.transloadit.com/companion, please update your `companionUrl` options accordingly.");throw this.uppy.log(o),o}if(e.remote&&TL_COMPANION.test(e.remote.companionUrl)){var s=t.companion_url.replace(/\/$/,""),a=e.remote.url.replace(e.remote.companionUrl,"").replace(/^\//,"");i=___extends_230({},e.remote,{companionUrl:s,url:s+"/"+a})}var u=___extends_230({},e,{transloadit:{assembly:t.assembly_id}});return this.opts.importFromUploadURLs||___extends_230(u,{meta:n,tus:r,remote:i}),u},i._createAssembly=function(e,t,n){var r=this;return this.uppy.log("[Transloadit] Create Assembly"),this.client.createAssembly({params:n.params,fields:n.fields,expectedFiles:e.length,signature:n.signature}).then(function(n){var i,o,s=new _$TransloaditAssembly_226(n),a=s.status,u=a.assembly_id,l=r.getPluginState(),c=l.assemblies,p=l.uploadsAssemblies;r.setPluginState({assemblies:___extends_230({},c,(i={},i[u]=a,i)),uploadsAssemblies:___extends_230({},p,(o={},o[t]=[].concat(p[t],[u]),o))});var d=r.uppy.getState().files,_={};return e.forEach(function(e){_[e]=r._attachAssemblyMetadata(r.uppy.getFile(e),a)}),r.uppy.setState({files:___extends_230({},d,{},_)}),r.uppy.emit("transloadit:assembly-created",a,e),r.uppy.log("[Transloadit] Created Assembly "+u),s}).catch(function(e){throw e.message=r.i18n("creatingAssemblyFailed")+": "+e.message,e})},i._createAssemblyWatcher=function(e,t,n){var r=this,i=new _$TransloaditAssemblyWatcher_228(this.uppy,e);i.on("assembly-complete",function(e){r.getAssemblyFiles(e).forEach(function(e){r.completedFiles[e.id]=!0,r.uppy.emit("postprocess-complete",e)})}),i.on("assembly-error",function(e,t){r.getAssemblyFiles(e).forEach(function(e){r.uppy.emit("upload-error",e,t),r.uppy.emit("postprocess-complete",e)})}),this.assemblyWatchers[n]=i},i._shouldWaitAfterUpload=function(){return this.opts.waitForEncoding||this.opts.waitForMetadata},i._reserveFiles=function(e,t){var n=this;return Promise.all(t.map(function(t){var r=n.uppy.getFile(t);return n.client.reserveFile(e,r)}))},i._onFileUploadURLAvailable=function(e){var t=this;if(e&&e.transloadit&&e.transloadit.assembly){var n=this.getPluginState().assemblies[e.transloadit.assembly];this.client.addFile(n,e).catch(function(r){t.uppy.log(r),t.uppy.emit("transloadit:import-error",n,e.id,r)})}},i._findFile=function(e){for(var t=this.uppy.getFiles(),n=0;n<t.length;n++){var r=t[n];if(r.uploadURL===e.tus_upload_url)return r;if(r.tus&&r.tus.uploadUrl===e.tus_upload_url)return r;if(!e.is_tus_file&&r.name===e.name&&r.size===e.size)return r}},i._onFileUploadComplete=function(e,t){var n,r=this.getPluginState(),i=this._findFile(t);i?(this.setPluginState({files:___extends_230({},r.files,(n={},n[t.id]={assembly:e,id:i.id,uploadedFile:t},n))}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn\u2019t file the file, it was likely removed in the process")},i._onResult=function(e,t,n){var r=this.getPluginState(),i=r.files[n.original_id];n.localId=i?i.id:null;var o={result:n,stepName:t,id:n.id,assembly:e};this.setPluginState({results:[].concat(r.results,[o])}),this.uppy.emit("transloadit:result",t,n,this.getAssembly(e))},i._onAssemblyFinished=function(e){var t=this,n=e.assembly_ssl_url;this.client.getAssemblyStatus(n).then(function(e){var n,r=e.assembly_id,i=t.getPluginState();t.setPluginState({assemblies:___extends_230({},i.assemblies,(n={},n[r]=e,n))}),t.uppy.emit("transloadit:complete",e)})},i._cancelAssembly=function(e){var t=this;return this.client.cancelAssembly(e).then(function(){t.uppy.emit("transloadit:assembly-cancelled",e)})},i._onCancelAll=function(){var e=this,t=this.getPluginState().uploadsAssemblies,n=Object.keys(t).reduce(function(e,n){return e.push.apply(e,t[n]),e},[]).map(function(t){var n=e.getAssembly(t);return e._cancelAssembly(n)});Promise.all(n).catch(function(t){e.uppy.log(t)})},i._getPersistentData=function(e){var t,n=this.getPluginState(),r=n.assemblies,i=n.uploadsAssemblies;e(((t={})[this.id]={assemblies:r,uploadsAssemblies:i},t))},i._onRestored=function(e){var t=this,n=e&&e[this.id]?e[this.id]:{},r=n.assemblies||{},i=n.uploadsAssemblies||{};0!==Object.keys(i).length&&(this.restored=Promise.resolve().then(function(){var e,n,o;return e=r,n={},o=[],Object.keys(e).forEach(function(r){var i=e[r];i.uploads.forEach(function(e){var i=t._findFile(e);n[e.id]={id:i.id,assembly:r,uploadedFile:e}});var s=t.getPluginState();Object.keys(i.results).forEach(function(e){i.results[e].forEach(function(t){var n=s.files[t.original_id];t.localId=n?n.id:null,o.push({id:t.id,result:t,stepName:e,assembly:r})})})}),t.setPluginState({assemblies:e,files:n,results:o,uploadsAssemblies:i}),function(){var e=t.getPluginState(),n=e.assemblies,r=e.uploadsAssemblies;Object.keys(r).forEach(function(e){var n=r[e],i=n.reduce(function(e,n){var r=t.getAssemblyFiles(n).map(function(e){return e.id});return e.push.apply(e,r),e},[]);t._createAssemblyWatcher(n,i,e)}),Object.keys(n).forEach(function(e){var r=new _$TransloaditAssembly_226(n[e]);t._connectAssembly(r)})}(),function(){var e=t.getPluginState().assemblies;return Promise.all(Object.keys(e).map(function(e){return t.activeAssemblies[e].update()}))}()}),this.restored.then(function(){t.restored=null}))},i._connectAssembly=function(e){var t=this,n=e.status.assembly_id;return this.activeAssemblies[n]=e,e.on("status",function(e){var r,i=t.getPluginState().assemblies;t.setPluginState({assemblies:___extends_230({},i,(r={},r[n]=e,r))})}),e.on("upload",function(e){t._onFileUploadComplete(n,e)}),e.on("error",function(n){n.assembly=e.status,t.uppy.emit("transloadit:assembly-error",e.status,n)}),e.on("executing",function(){t.uppy.emit("transloadit:assembly-executing",e.status)}),this.opts.waitForEncoding&&e.on("result",function(e,r){t._onResult(n,e,r)}),this.opts.waitForEncoding?e.on("finished",function(){t._onAssemblyFinished(e.status)}):this.opts.waitForMetadata&&e.on("metadata",function(){t._onAssemblyFinished(e.status)}),"ASSEMBLY_COMPLETE"===e.ok?e:(new Promise(function(t,n){e.once("connect",t),e.once("status",t),e.once("error",n)}).then(function(){t.uppy.log("[Transloadit] Socket is ready")}),e.connect(),e)},i._prepareUpload=function(e,t){var n,r=this;(e=e.filter(function(e){return!e.error})).forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:r.i18n("creatingAssembly")})});var i=function(e){var n,i=e.fileIDs,o=e.options;return r._createAssembly(i,t,o).then(function(e){if(n=e,r.opts.importFromUploadURLs)return r._reserveFiles(e,i)}).then(function(){return i.forEach(function(e){var t=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",t)}),n}).catch(function(e){throw i.forEach(function(t){var n=r.uppy.getFile(t);r.uppy.emit("preprocess-complete",n),r.uppy.emit("upload-error",n,e)}),e})},o=this.getPluginState().uploadsAssemblies;this.setPluginState({uploadsAssemblies:___extends_230({},o,(n={},n[t]=[],n))});var s=e.map(function(e){return r.uppy.getFile(e)});return new _$AssemblyOptions_227(s,this.opts).build().then(function(n){return Promise.all(n.map(i)).then(function(n){var i=n.map(function(e){return e.status.assembly_id});r._createAssemblyWatcher(i,e,t),n.map(function(e){return r._connectAssembly(e)})})},function(t){throw e.forEach(function(e){var n=r.uppy.getFile(e);r.uppy.emit("preprocess-complete",n),r.uppy.emit("upload-error",n,t)}),t})},i._afterUpload=function(e,t){var n=this,r=e.map(function(e){return n.uppy.getFile(e)});e=r.filter(function(e){return!e.error}).map(function(e){return e.id});var i=this.getPluginState();if(this.restored)return this.restored.then(function(){return n._afterUpload(e,t)});var o=i.uploadsAssemblies[t];if(!this._shouldWaitAfterUpload()){o.forEach(function(e){n.activeAssemblies[e].close(),delete n.activeAssemblies[e]});var s=o.map(function(e){return n.getAssembly(e)});return this.uppy.addResultData(t,{transloadit:s}),Promise.resolve()}return 0===o.length?(this.uppy.addResultData(t,{transloadit:[]}),Promise.resolve()):(r.filter(function(e){return!_$hasProperty_264(n.completedFiles,e.id)}).forEach(function(e){n.uppy.emit("postprocess-progress",e,{mode:"indeterminate",message:n.i18n("encoding")})}),this.assemblyWatchers[t].promise.then(function(){var e=o.map(function(e){return n.getAssembly(e)}),r=___extends_230({},n.getPluginState().uploadsAssemblies);delete r[t],n.setPluginState({uploadsAssemblies:r}),n.uppy.addResultData(t,{transloadit:e})}))},i._onError=function(e,t){var n=this;void 0===e&&(e=null),this.getPluginState().uploadsAssemblies[t].forEach(function(e){n.activeAssemblies[e]&&n.activeAssemblies[e].close()})},i._onTusError=function(e){if(e&&/^tus: /.test(e.message)){var t=e.originalRequest&&e.originalRequest.responseURL?e.originalRequest.responseURL:null;this.client.submitError(e,{url:t,type:"TUS_ERROR"}).then(function(e){})}},i.install=function(){this.uppy.addPreProcessor(this._prepareUpload),this.uppy.addPostProcessor(this._afterUpload),this.uppy.on("error",this._onError),this.uppy.on("cancel-all",this._onCancelAll),this.uppy.on("upload-error",this._onTusError),this.opts.importFromUploadURLs?this.uppy.on("upload-success",this._onFileUploadURLAvailable):this.uppy.use(_$lib_234,{resume:!1,useFastRemoteRetry:!1,metaFields:["assembly_url","filename","fieldname"],limit:this.opts.limit}),this.uppy.on("restore:get-data",this._getPersistentData),this.uppy.on("restored",this._onRestored),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]});var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_230({},e,{individualCancellation:!1})})},i.uninstall=function(){this.uppy.removePreProcessor(this._prepareUpload),this.uppy.removePostProcessor(this._afterUpload),this.uppy.off("error",this._onError),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",this._onFileUploadURLAvailable);var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_230({},e,{individualCancellation:!0})})},i.getAssembly=function(e){return this.getPluginState().assemblies[e]},i.getAssemblyFiles=function(e){return this.uppy.getFiles().filter(function(t){return t&&t.transloadit&&t.transloadit.assembly===e})},r}(__Plugin_230),___class_230.VERSION=_$package_232.version,_$lib_230=___temp_230,_$lib_230.COMPANION=COMPANION,_$lib_230.UPPY_SERVER=COMPANION,_$lib_230.COMPANION_PATTERN=/\.transloadit\.com$/;var _$package_286={version:"1.5.11"},___class_285,___temp_285;function ___extends_285(){return(___extends_285=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var __Plugin_285=_$lib_133.Plugin,__Provider_285=_$lib_129.Provider,__RequestClient_285=_$lib_129.RequestClient,__Socket_285=_$lib_129.Socket;function buildResponseError(e,t){return t||(t=new Error("Upload error")),"string"==typeof t&&(t=new Error(t)),t instanceof Error||(t=___extends_285(new Error("Upload error"),{data:t})),_$isNetworkError_267(e)?t=new _$NetworkError_242(t,e):(t.request=e,t)}function setTypeInBlob(e){return e.data.slice(0,e.data.size,e.meta.type)}var _$lib_285=(___temp_285=___class_285=function(e){var t,n;function r(t,n){var r;(r=e.call(this,t,n)||this).type="uploader",r.id=r.opts.id||"XHRUpload",r.title="XHRUpload",r.defaultLocale={strings:{timedOut:"Upload stalled for %{seconds} seconds, aborting."}};var i={formData:!0,fieldName:"files[]",method:"post",metaFields:null,responseUrlFieldName:"url",bundle:!1,headers:{},timeout:3e4,limit:0,withCredentials:!1,responseType:"",getResponseData:function(e,t){var n={};try{n=JSON.parse(e)}catch(err){console.log(err)}return n},getResponseError:function(e,t){var n=new Error("Upload error");return _$isNetworkError_267(t)&&(n=new _$NetworkError_242(n,t)),n},validateStatus:function(e,t,n){return e>=200&&e<300}};if(r.opts=___extends_285({},i,{},n),r.i18nInit(),r.handleUpload=r.handleUpload.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r.opts.__queue instanceof _$RateLimitedQueue_244?r.requests=r.opts.__queue:r.requests=new _$RateLimitedQueue_244(r.opts.limit),r.opts.bundle&&!r.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");return r.uploaderEvents=Object.create(null),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.setOptions=function(t){e.prototype.setOptions.call(this,t),this.i18nInit()},i.i18nInit=function(){this.translator=new _$Translator_245([this.defaultLocale,this.uppy.locale,this.opts.locale]),this.i18n=this.translator.translate.bind(this.translator),this.setPluginState()},i.getOptions=function(e){var t=this.uppy.getState().xhrUpload,n=___extends_285({},this.opts,{},t||{},{},e.xhrUpload||{},{headers:{}});return ___extends_285(n.headers,this.opts.headers),t&&___extends_285(n.headers,t.headers),e.xhrUpload&&___extends_285(n.headers,e.xhrUpload.headers),n},i.addMetadata=function(e,t,n){(Array.isArray(n.metaFields)?n.metaFields:Object.keys(t)).forEach(function(n){e.append(n,t[n])})},i.createFormDataUpload=function(e,t){var n=new FormData;this.addMetadata(n,e.meta,t);var r=setTypeInBlob(e);return e.name?n.append(t.fieldName,r,e.meta.name):n.append(t.fieldName,r),n},i.createBundledUpload=function(e,t){var n=this,r=new FormData,i=this.uppy.getState().meta;return this.addMetadata(r,i,t),e.forEach(function(e){var t=n.getOptions(e),i=setTypeInBlob(e);e.name?r.append(t.fieldName,i,e.name):r.append(t.fieldName,i)}),r},i.createBareUpload=function(e,t){return e.data},i.upload=function(e,t,n){var r=this,i=this.getOptions(e);return this.uppy.log("uploading "+t+" of "+n),new Promise(function(t,n){r.uppy.emit("upload-started",e);var o=i.formData?r.createFormDataUpload(e,i):r.createBareUpload(e,i),s=new XMLHttpRequest;r.uploaderEvents[e.id]=new _$EventTracker_240(r.uppy);var a=new _$ProgressTimeout_243(i.timeout,function(){s.abort(),l.done();var t=new Error(r.i18n("timedOut",{seconds:Math.ceil(i.timeout/1e3)}));r.uppy.emit("upload-error",e,t),n(t)}),u=_$cuid_40();s.upload.addEventListener("loadstart",function(e){r.uppy.log("[XHRUpload] "+u+" started")}),s.upload.addEventListener("progress",function(t){r.uppy.log("[XHRUpload] "+u+" progress: "+t.loaded+" / "+t.total),a.progress(),t.lengthComputable&&r.uppy.emit("upload-progress",e,{uploader:r,bytesUploaded:t.loaded,bytesTotal:t.total})}),s.addEventListener("load",function(o){if(r.uppy.log("[XHRUpload] "+u+" finished"),a.done(),l.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null),i.validateStatus(o.target.status,s.responseText,s)){var c=i.getResponseData(s.responseText,s),p=c[i.responseUrlFieldName],d={status:o.target.status,body:c,uploadURL:p};return r.uppy.emit("upload-success",e,d),p&&r.uppy.log("Download "+e.name+" from "+p),t(e)}var _=i.getResponseData(s.responseText,s),f=buildResponseError(s,i.getResponseError(s.responseText,s)),h={status:o.target.status,body:_};return r.uppy.emit("upload-error",e,f,h),n(f)}),s.addEventListener("error",function(t){r.uppy.log("[XHRUpload] "+u+" errored"),a.done(),l.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null);var o=buildResponseError(s,i.getResponseError(s.responseText,s));return r.uppy.emit("upload-error",e,o),n(o)}),s.open(i.method.toUpperCase(),i.endpoint,!0),s.withCredentials=i.withCredentials,""!==i.responseType&&(s.responseType=i.responseType),Object.keys(i.headers).forEach(function(e){s.setRequestHeader(e,i.headers[e])});var l=r.requests.run(function(){return s.send(o),function(){a.done(),s.abort()}});r.onFileRemove(e.id,function(){l.abort(),n(new Error("File removed"))}),r.onCancelAll(e.id,function(){l.abort(),n(new Error("Upload cancelled"))})})},i.uploadRemote=function(e,t,n){var r=this,i=this.getOptions(e);return new Promise(function(t,n){r.uppy.emit("upload-started",e);var o={};(Array.isArray(i.metaFields)?i.metaFields:Object.keys(e.meta)).forEach(function(t){o[t]=e.meta[t]}),new(e.remote.providerOptions.provider?__Provider_285:__RequestClient_285)(r.uppy,e.remote.providerOptions).post(e.remote.url,___extends_285({},e.remote.body,{endpoint:i.endpoint,size:e.data.size,fieldname:i.fieldName,metadata:o,httpMethod:i.method,useFormData:i.formData,headers:i.headers})).then(function(o){var s=o.token,a=_$getSocketHost_261(e.remote.companionUrl),u=new __Socket_285({target:a+"/api/"+s,autoOpen:!1});r.uploaderEvents[e.id]=new _$EventTracker_240(r.uppy),r.onFileRemove(e.id,function(){u.send("pause",{}),l.abort(),t("upload "+e.id+" was removed")}),r.onCancelAll(e.id,function(){u.send("pause",{}),l.abort(),t("upload "+e.id+" was canceled")}),r.onRetry(e.id,function(){u.send("pause",{}),u.send("resume",{})}),r.onRetryAll(e.id,function(){u.send("pause",{}),u.send("resume",{})}),u.on("progress",function(t){return _$emitSocketProgress_248(r,t,e)}),u.on("success",function(n){var o=i.getResponseData(n.response.responseText,n.response),s=o[i.responseUrlFieldName],a={status:n.response.status,body:o,uploadURL:s};return r.uppy.emit("upload-success",e,a),l.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null),t()}),u.on("error",function(t){var o=t.response,s=o?i.getResponseError(o.responseText,o):___extends_285(new Error(t.error.message),{cause:t.error});r.uppy.emit("upload-error",e,s),l.done(),r.uploaderEvents[e.id]&&(r.uploaderEvents[e.id].remove(),r.uploaderEvents[e.id]=null),n(s)});var l=r.requests.run(function(){return u.open(),e.isPaused&&u.send("pause",{}),function(){return u.close()}})}).catch(function(t){r.uppy.emit("upload-error",e,t),n(t)})})},i.uploadBundle=function(e){var t=this;return new Promise(function(n,r){var i=t.opts.endpoint,o=t.opts.method,s=t.uppy.getState().xhrUpload,a=t.createBundledUpload(e,___extends_285({},t.opts,{},s||{})),u=new XMLHttpRequest,l=new _$ProgressTimeout_243(t.opts.timeout,function(){u.abort();var e=new Error(t.i18n("timedOut",{seconds:Math.ceil(t.opts.timeout/1e3)}));c(e),r(e)}),c=function(n){e.forEach(function(e){t.uppy.emit("upload-error",e,n)})};u.upload.addEventListener("loadstart",function(e){t.uppy.log("[XHRUpload] started uploading bundle"),l.progress()}),u.upload.addEventListener("progress",function(n){l.progress(),n.lengthComputable&&e.forEach(function(e){t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n.loaded/n.total*e.size,bytesTotal:e.size})})}),u.addEventListener("load",function(i){if(l.done(),t.opts.validateStatus(i.target.status,u.responseText,u)){var o=t.opts.getResponseData(u.responseText,u),s={status:i.target.status,body:o};return e.forEach(function(e){t.uppy.emit("upload-success",e,s)}),n()}var a=t.opts.getResponseError(u.responseText,u)||new Error("Upload error");return a.request=u,c(a),r(a)}),u.addEventListener("error",function(e){l.done();var n=t.opts.getResponseError(u.responseText,u)||new Error("Upload error");return c(n),r(n)}),t.uppy.on("cancel-all",function(){l.done(),u.abort()}),u.open(o.toUpperCase(),i,!0),u.withCredentials=t.opts.withCredentials,""!==t.opts.responseType&&(u.responseType=t.opts.responseType),Object.keys(t.opts.headers).forEach(function(e){u.setRequestHeader(e,t.opts.headers[e])}),u.send(a),e.forEach(function(e){t.uppy.emit("upload-started",e)})})},i.uploadFiles=function(e){var t=this,n=e.map(function(n,r){var i=parseInt(r,10)+1,o=e.length;return n.error?Promise.reject(new Error(n.error)):n.isRemote?t.uploadRemote(n,i,o):t.upload(n,i,o)});return _$settle_273(n)},i.onFileRemove=function(e,t){this.uploaderEvents[e].on("file-removed",function(n){e===n.id&&t(n.id)})},i.onRetry=function(e,t){this.uploaderEvents[e].on("upload-retry",function(n){e===n&&t()})},i.onRetryAll=function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",function(r){n.uppy.getFile(e)&&t()})},i.onCancelAll=function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",function(){n.uppy.getFile(e)&&t()})},i.handleUpload=function(e){var t=this;if(0===e.length)return this.uppy.log("[XHRUpload] No files to upload!"),Promise.resolve();0!==this.opts.limit||this.opts.__queue||this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");var n=e.map(function(e){return t.uppy.getFile(e)});if(this.opts.bundle){if(n.some(function(e){return e.isRemote}))throw new Error("Can\u2019t upload remote files when bundle: true option is set");return this.uploadBundle(n)}return this.uploadFiles(n).then(function(){return null})},i.install=function(){if(this.opts.bundle){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_285({},e,{individualCancellation:!1})})}this.uppy.addUploader(this.handleUpload)},i.uninstall=function(){if(this.opts.bundle){var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:___extends_285({},e,{individualCancellation:!0})})}this.uppy.removeUploader(this.handleUpload)},r}(__Plugin_285),___class_285.VERSION=_$package_286.version,___temp_285),_$lib_63={__esModule:!0};_$lib_63.default=getFormData,_$lib_63.getFieldData=getFieldData;var NODE_LIST_CLASSES={"[object HTMLCollection]":!0,"[object NodeList]":!0,"[object RadioNodeList]":!0},IGNORED_ELEMENT_TYPES={button:!0,fieldset:!0,reset:!0,submit:!0},CHECKED_INPUT_TYPES={checkbox:!0,radio:!0},TRIM_RE=/^\s+|\s+$/g,__slice_63=Array.prototype.slice,__toString_63=Object.prototype.toString;function getFormData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{trim:!1};if(!e)throw new Error("A form is required by getFormData, was given form="+e);for(var n={},r=void 0,i=[],o={},s=0,a=e.elements.length;s<a;s++){var u=e.elements[s];IGNORED_ELEMENT_TYPES[u.type]||u.disabled||(r=u.name||u.id)&&!o[r]&&(i.push(r),o[r]=!0)}for(var l=0,c=i.length;l<c;l++){var p=getFieldData(e,r=i[l],t);null!=p&&(n[r]=p)}return n}function getFieldData(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{trim:!1};if(!e)throw new Error("A form is required by getFieldData, was given form="+e);if(!t&&"[object String]"!==__toString_63.call(t))throw new Error("A field name is required by getFieldData, was given fieldName="+t);var r=e.elements[t];if(!r||r.disabled)return null;if(!NODE_LIST_CLASSES[__toString_63.call(r)])return getFormElementValue(r,n.trim);for(var i=[],o=!0,s=0,a=r.length;s<a;s++)if(!r[s].disabled){o&&"radio"!==r[s].type&&(o=!1);var u=getFormElementValue(r[s],n.trim);null!=u&&(i=i.concat(u))}return o&&1===i.length?i[0]:i.length>0?i:null}function getFormElementValue(e,t){var n=null,r=e.type;if("select-one"===r)return e.options.length&&(n=e.options[e.selectedIndex].value),n;if("select-multiple"===r){n=[];for(var i=0,o=e.options.length;i<o;i++)e.options[i].selected&&n.push(e.options[i].value);return 0===n.length&&(n=null),n}return"file"===r&&"files"in e?(e.multiple?0===(n=__slice_63.call(e.files)).length&&(n=null):n=e.files[0],n):(CHECKED_INPUT_TYPES[r]?e.checked&&(n=e.value):n=t?e.value.replace(TRIM_RE,""):e.value,n)}getFormData.getFieldData=getFieldData;var _$package_173={version:"1.3.15"},___class_172,___temp_172;function ___extends_172(){return(___extends_172=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_172(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_172=_$lib_133.Plugin,__getFormData_172=_$lib_63.default||_$lib_63,_$lib_172=(___temp_172=___class_172=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).type="acquirer",r.id=r.opts.id||"Form",r.title="Form",r.opts=___extends_172({},{target:null,resultName:"uppyResult",getMetaFromForm:!0,addResultToForm:!0,multipleResults:!1,submitOnSuccess:!1,triggerUploadOnSubmit:!1},{},n),r.handleFormSubmit=r.handleFormSubmit.bind(___assertThisInitialized_172(r)),r.handleUploadStart=r.handleUploadStart.bind(___assertThisInitialized_172(r)),r.handleSuccess=r.handleSuccess.bind(___assertThisInitialized_172(r)),r.addResultToForm=r.addResultToForm.bind(___assertThisInitialized_172(r)),r.getMetaFromForm=r.getMetaFromForm.bind(___assertThisInitialized_172(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.handleUploadStart=function(){this.opts.getMetaFromForm&&this.getMetaFromForm()},i.handleSuccess=function(e){this.opts.addResultToForm&&this.addResultToForm(e),this.opts.submitOnSuccess&&this.form.submit()},i.handleFormSubmit=function(e){var t=this;if(this.opts.triggerUploadOnSubmit){e.preventDefault();var n=_$toArray_274(e.target.elements),r=[];n.forEach(function(e){("BUTTON"===e.tagName||"INPUT"===e.tagName&&"submit"===e.type)&&!e.disabled&&(e.disabled=!0,r.push(e))}),this.uppy.upload().then(function(){r.forEach(function(e){e.disabled=!1})},function(e){return r.forEach(function(e){e.disabled=!1}),Promise.reject(e)}).catch(function(e){t.uppy.log(e.stack||e.message||e)})}},i.addResultToForm=function(e){this.uppy.log("[Form] Adding result to the original form:"),this.uppy.log(e);var t=this.form.querySelector('[name="'+this.opts.resultName+'"]');if(t)if(this.opts.multipleResults){var n;try{n=JSON.parse(t.value)}catch(err){}Array.isArray(n)||(n=[]),n.push(e),t.value=JSON.stringify(n)}else t.value=JSON.stringify(e);else(t=document.createElement("input")).name=this.opts.resultName,t.type="hidden",this.opts.multipleResults?t.value=JSON.stringify([e]):t.value=JSON.stringify(e),this.form.appendChild(t)},i.getMetaFromForm=function(){var e=__getFormData_172(this.form);delete e[this.opts.resultName],this.uppy.setMeta(e)},i.install=function(){this.form=_$findDOMElement_250(this.opts.target),this.form&&"FORM"===this.form.nodeName?(this.form.addEventListener("submit",this.handleFormSubmit),this.uppy.on("upload",this.handleUploadStart),this.uppy.on("complete",this.handleSuccess)):this.uppy.log("Form plugin requires a <form> target element passed in options to operate, none was found","error")},i.uninstall=function(){this.form.removeEventListener("submit",this.handleFormSubmit),this.uppy.off("upload",this.handleUploadStart),this.uppy.off("complete",this.handleSuccess)},r}(__Plugin_172),___class_172.VERSION=_$package_173.version,___temp_172),_$ServiceWorkerStore_176={};(function(e){var t="undefined"!=typeof navigator&&"serviceWorker"in navigator,n=function(){function n(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"ServiceWorkerStore"}},'),this.ready=(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"waitForServiceWorker","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"waitForServiceWorker"},'),new Promise(function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":2},'),t?navigator.serviceWorker.controller?n():navigator.serviceWorker.addEventListener("controllerchange",function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":0},'),n(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}):r(new Error("Unsupported")),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')})),this.name=n.storeName,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var r=n.prototype;return r.list=function(){var t=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"list","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"ServiceWorkerStore"}},');var n={},r=new Promise(function(t,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":2},'),n.resolve=t,n.reject=r,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')});console.log("Loading stored blobs from Service Worker");var i=function r(i){if(_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"onMessage","fileName":"'+e+'","paramsNumber":1},'),i.data.store===t.name){switch(i.data.type){case"uppy/ALL_FILES":n.resolve(i.data.files),navigator.serviceWorker.removeEventListener("message",r)}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"onMessage"},')}else _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"onMessage"},')};return this.ready.then(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":0},'),navigator.serviceWorker.addEventListener("message",i),navigator.serviceWorker.controller.postMessage({type:"uppy/GET_FILES",store:t.name}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"list"},'),r},r.put=function(t){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"put","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"ServiceWorkerStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"put"},'),this.ready.then(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":0},'),navigator.serviceWorker.controller.postMessage({type:"uppy/ADD_FILE",store:n.name,file:t}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')})},r.delete=function(t){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"delete","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"ServiceWorkerStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"delete"},'),this.ready.then(function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":0},'),navigator.serviceWorker.controller.postMessage({type:"uppy/REMOVE_FILE",store:n.name,fileID:t}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},')})},n}();n.isSupported=t,_$ServiceWorkerStore_176=n}).call(this,"/packages/@uppy/golden-retriever/lib/ServiceWorkerStore.js");var _$prettierBytes_178=function(e){if("number"!=typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1==0?(t?"-":"")+e.toFixed(0)+" "+i:(t?"-":"")+e.toFixed(1)+" "+i},_$IndexedDBStore_174={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var n="undefined"!=typeof window&&(window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB),r=!!n,i="uppy-blobs",o="files",s=864e5,a=3;function u(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"connect","fileName":"'+e+'","paramsNumber":1},');var r=n.open(t,a);return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"connect"},'),new Promise(function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey5","fileName":"'+e+'","paramsNumber":2},'),r.onupgradeneeded=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey3","fileName":"'+e+'","paramsNumber":1},');var r,i=n.target.result,a=n.currentTarget.transaction;if(n.oldVersion<2&&i.createObjectStore(o,{keyPath:"id"}).createIndex("store","store",{unique:!1}),n.oldVersion<3){var u=a.objectStore(o);u.createIndex("expires","expires",{unique:!1}),r=u,_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"migrateExpiration","fileName":"'+e+'","paramsNumber":1},'),r.openCursor().onsuccess=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},');var n=t.target.result;if(n){var r=n.value;r.expires=Date.now()+s,n.update(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}else _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')},_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"migrateExpiration","paramsNumber":1},')}a.oncomplete=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey2","fileName":"'+e+'","paramsNumber":0},'),t(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey2"},')},_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey3"},')},r.onsuccess=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey4","fileName":"'+e+'","paramsNumber":1},'),t(n.target.result),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey4"},')},r.onerror=n,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey5"},')})}function l(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"waitForRequest","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"waitForRequest"},'),new Promise(function(n,r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey7","fileName":"'+e+'","paramsNumber":2},'),t.onsuccess=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey6","fileName":"'+e+'","paramsNumber":1},'),n(t.target.result),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey6"},')},t.onerror=r,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey7"},')})}var c=!1,p=function(){function n(r){var o=this;_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"IndexedDBStore"}},'),this.opts=t({dbName:i,storeName:"default",expires:s,maxFileSize:10485760,maxTotalSize:314572800},r),this.name=this.opts.storeName;var a=function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"createConnection","fileName":"'+e+'","paramsNumber":0},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"createConnection"},'),u(o.opts.dbName)};c?this.ready=a():(c=!0,this.ready=n.cleanup().then(a,a)),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var r=n.prototype;return r.key=function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"key","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"IndexedDBStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"key"},'),this.name+"!"+t},r.list=function(){var t=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"list","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"IndexedDBStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"list"},'),this.ready.then(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey8","fileName":"'+e+'","paramsNumber":1},');var r=n.transaction([o],"readonly").objectStore(o).index("store").getAll(IDBKeyRange.only(t.name));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey8"},'),l(r)}).then(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey10","fileName":"'+e+'","paramsNumber":1},');var n={};return t.forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey9","fileName":"'+e+'","paramsNumber":1},'),n[t.fileID]=t.data,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey9"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey10"},'),n})},r.get=function(t){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"get","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"IndexedDBStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"get"},'),this.ready.then(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey11","fileName":"'+e+'","paramsNumber":1},');var i=r.transaction([o],"readonly").objectStore(o).get(n.key(t));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey11"},'),l(i)}).then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey12","fileName":"'+e+'","paramsNumber":1},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey12"},'),{id:t.data.fileID,data:t.data.data}})},r.getSize=function(){var t=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"getSize","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"IndexedDBStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"getSize"},'),this.ready.then(function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey16","fileName":"'+e+'","paramsNumber":1},');var r=n.transaction([o],"readonly").objectStore(o).index("store").openCursor(IDBKeyRange.only(t.name));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey16"},'),new Promise(function(t,n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey15","fileName":"'+e+'","paramsNumber":2},');var i=0;r.onsuccess=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey13","fileName":"'+e+'","paramsNumber":1},');var r=n.target.result;r?(i+=r.value.data.size,r.continue()):t(i),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey13"},')},r.onerror=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey14","fileName":"'+e+'","paramsNumber":0},'),n(new Error("Could not retrieve stored blobs size")),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey14"},')},_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey15"},')})})},r.put=function(t){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"put","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"IndexedDBStore"}},'),t.data.size>this.opts.maxFileSize?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"put"},'),Promise.reject(new Error("File is too big to store."))):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"put"},'),this.getSize().then(function(t){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey17","fileName":"'+e+'","paramsNumber":1},'),t>n.opts.maxTotalSize?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey17"},'),Promise.reject(new Error("No space left"))):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey17"},'),n.ready)}).then(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey18","fileName":"'+e+'","paramsNumber":1},');var i=r.transaction([o],"readwrite").objectStore(o).add({id:n.key(t.id),fileID:t.id,store:n.name,expires:Date.now()+n.opts.expires,data:t.data});return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey18"},'),l(i)}))},r.delete=function(t){var n=this;return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"delete","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"IndexedDBStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"delete"},'),this.ready.then(function(r){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey19","fileName":"'+e+'","paramsNumber":1},');var i=r.transaction([o],"readwrite").objectStore(o).delete(n.key(t));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey19"},'),l(i)})},n.cleanup=function(){return _$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"cleanup","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"IndexedDBStore"}},'),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"cleanup"},'),u(i).then(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey22","fileName":"'+e+'","paramsNumber":1},');var n=t.transaction([o],"readwrite").objectStore(o).index("expires").openCursor(IDBKeyRange.upperBound(Date.now()));return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey22"},'),new Promise(function(r,i){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey21","fileName":"'+e+'","paramsNumber":2},'),n.onsuccess=function(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey20","fileName":"'+e+'","paramsNumber":1},');var i=n.target.result;if(i){var o=i.value;console.log("[IndexedDBStore] Deleting record",o.fileID,"of size",_$prettierBytes_178(o.data.size),"- expired on",new Date(o.expires)),i.delete(),i.continue()}else r(t);_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey20"},')},n.onerror=i,_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey21"},')})}).then(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey23","fileName":"'+e+'","paramsNumber":1},'),t.close(),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey23"},')})},n}();p.isSupported=r,_$IndexedDBStore_174=p}).call(this,"/packages/@uppy/golden-retriever/lib/IndexedDBStore.js");var _$MetaDataStore_175={};(function(e){function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function n(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"maybeParse","fileName":"'+e+'","paramsNumber":1},');try{return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"maybeParse"},'),JSON.parse(t)}catch(err){return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"maybeParse"},'),null}_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"maybeParse","paramsNumber":1},')}var r=!1;_$MetaDataStore_175=function(){function i(n){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"constructor","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"MetaDataStore"}},'),this.opts=t({expires:864e5},n),this.name="uppyState:"+n.storeName,r||(r=!0,i.cleanup()),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"constructor"},')}var o=i.prototype;return o.load=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"load","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MetaDataStore"}},');var t=localStorage.getItem(this.name);if(!t)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"load"},'),null;var r=n(t);return r?r.metadata?(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"load"},'),r.metadata):(this.save(r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"load"},'),r):(_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"load"},'),null)},o.save=function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"save","fileName":"'+e+'","paramsNumber":1,"classInfo":{"className":"MetaDataStore"}},');var n=Date.now()+this.opts.expires,r=JSON.stringify({metadata:t,expires:n});localStorage.setItem(this.name,r),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"save"},')},i.cleanup=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"cleanup","fileName":"'+e+'","paramsNumber":0,"classInfo":{"className":"MetaDataStore"}},');var t=function(){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":false,"function":"findUppyInstances","fileName":"'+e+'","paramsNumber":0},');for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);/^uppyState:/.test(r)&&t.push(r.slice("uppyState:".length))}return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"findUppyInstances"},'),t}(),r=Date.now();t.forEach(function(t){_$SRTlib_1.send('{"type":"FUNCTIONSTART","anonymous":true,"function":"emptyKey","fileName":"'+e+'","paramsNumber":1},');var i=localStorage.getItem("uppyState:"+t);if(!i)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),null;var o=n(i);if(!o)return _$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},'),null;o.expires&&o.expires<r&&localStorage.removeItem("uppyState:"+t),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"emptyKey"},')}),_$SRTlib_1.send('{"type":"FUNCTIONEND","function":"cleanup"},')},i}()}).call(this,"/packages/@uppy/golden-retriever/lib/MetaDataStore.js");var _$package_179={version:"1.3.14"},___class_177,___temp_177;function ___extends_177(){return(___extends_177=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_177(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_177=_$lib_133.Plugin,_$lib_177=(___temp_177=___class_177=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).type="debugger",r.id=r.opts.id||"GoldenRetriever",r.title="Golden Retriever",r.opts=___extends_177({},{expires:864e5,serviceWorker:!1},n),r.MetaDataStore=new _$MetaDataStore_175({expires:r.opts.expires,storeName:t.getID()}),r.ServiceWorkerStore=null,r.opts.serviceWorker&&(r.ServiceWorkerStore=new _$ServiceWorkerStore_176({storeName:t.getID()})),r.IndexedDBStore=new _$IndexedDBStore_174(___extends_177({expires:r.opts.expires},r.opts.indexedDB||{},{storeName:t.getID()})),r.saveFilesStateToLocalStorage=r.saveFilesStateToLocalStorage.bind(___assertThisInitialized_177(r)),r.loadFilesStateFromLocalStorage=r.loadFilesStateFromLocalStorage.bind(___assertThisInitialized_177(r)),r.loadFileBlobsFromServiceWorker=r.loadFileBlobsFromServiceWorker.bind(___assertThisInitialized_177(r)),r.loadFileBlobsFromIndexedDB=r.loadFileBlobsFromIndexedDB.bind(___assertThisInitialized_177(r)),r.onBlobsLoaded=r.onBlobsLoaded.bind(___assertThisInitialized_177(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.loadFilesStateFromLocalStorage=function(){var e=this.MetaDataStore.load();e&&(this.uppy.log("[GoldenRetriever] Recovered some state from Local Storage"),this.uppy.setState({currentUploads:e.currentUploads||{},files:e.files||{}}),this.savedPluginData=e.pluginData)},i.getWaitingFiles=function(){var e={};return this.uppy.getFiles().forEach(function(t){t.progress&&t.progress.uploadStarted||(e[t.id]=t)}),e},i.getUploadingFiles=function(){var e=this,t={},n=this.uppy.getState().currentUploads;return n&&Object.keys(n).forEach(function(r){n[r].fileIDs.forEach(function(n){t[n]=e.uppy.getFile(n)})}),t},i.saveFilesStateToLocalStorage=function(){var e=___extends_177(this.getWaitingFiles(),this.getUploadingFiles()),t={};this.uppy.emit("restore:get-data",function(e){___extends_177(t,e)});var n=this.uppy.getState().currentUploads;this.MetaDataStore.save({currentUploads:n,files:e,pluginData:t})},i.loadFileBlobsFromServiceWorker=function(){var e=this;this.ServiceWorkerStore.list().then(function(t){var n=Object.keys(t).length;return n===e.uppy.getFiles().length?(e.uppy.log("[GoldenRetriever] Successfully recovered "+n+" blobs from Service Worker!"),e.uppy.info("Successfully recovered "+n+" files","success",3e3),e.onBlobsLoaded(t)):(e.uppy.log("[GoldenRetriever] No blobs found in Service Worker, trying IndexedDB now..."),e.loadFileBlobsFromIndexedDB())}).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to recover blobs from Service Worker","warning"),e.uppy.log(t)})},i.loadFileBlobsFromIndexedDB=function(){var e=this;this.IndexedDBStore.list().then(function(t){var n=Object.keys(t).length;if(n>0)return e.uppy.log("[GoldenRetriever] Successfully recovered "+n+" blobs from IndexedDB!"),e.uppy.info("Successfully recovered "+n+" files","success",3e3),e.onBlobsLoaded(t);e.uppy.log("[GoldenRetriever] No blobs found in IndexedDB")}).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to recover blobs from IndexedDB","warning"),e.uppy.log(t)})},i.onBlobsLoaded=function(e){var t=this,n=[],r=___extends_177({},this.uppy.getState().files);Object.keys(e).forEach(function(i){var o=t.uppy.getFile(i);if(o){var s=___extends_177({},o,{data:e[i],isRestored:!0});r[i]=s}else n.push(i)}),this.uppy.setState({files:r}),this.uppy.emit("restored",this.savedPluginData),n.length&&this.deleteBlobs(n).then(function(){t.uppy.log("[GoldenRetriever] Cleaned up "+n.length+" old files")}).catch(function(e){t.uppy.log("[GoldenRetriever] Could not clean up "+n.length+" old files","warning"),t.uppy.log(e)})},i.deleteBlobs=function(e){var t=this,n=[];return e.forEach(function(e){t.ServiceWorkerStore&&n.push(t.ServiceWorkerStore.delete(e)),t.IndexedDBStore&&n.push(t.IndexedDBStore.delete(e))}),Promise.all(n)},i.install=function(){var e=this;this.loadFilesStateFromLocalStorage(),this.uppy.getFiles().length>0?this.ServiceWorkerStore?(this.uppy.log("[GoldenRetriever] Attempting to load files from Service Worker..."),this.loadFileBlobsFromServiceWorker()):(this.uppy.log("[GoldenRetriever] Attempting to load files from Indexed DB..."),this.loadFileBlobsFromIndexedDB()):(this.uppy.log("[GoldenRetriever] No files need to be loaded, only restoring processing state..."),this.onBlobsLoaded([])),this.uppy.on("file-added",function(t){t.isRemote||(e.ServiceWorkerStore&&e.ServiceWorkerStore.put(t).catch(function(t){e.uppy.log("[GoldenRetriever] Could not store file","warning"),e.uppy.log(t)}),e.IndexedDBStore.put(t).catch(function(t){e.uppy.log("[GoldenRetriever] Could not store file","warning"),e.uppy.log(t)}))}),this.uppy.on("file-removed",function(t){e.ServiceWorkerStore&&e.ServiceWorkerStore.delete(t.id).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to remove file","warning"),e.uppy.log(t)}),e.IndexedDBStore.delete(t.id).catch(function(t){e.uppy.log("[GoldenRetriever] Failed to remove file","warning"),e.uppy.log(t)})}),this.uppy.on("complete",function(t){var n=t.successful,r=n.map(function(e){return e.id});e.deleteBlobs(r).then(function(){e.uppy.log("[GoldenRetriever] Removed "+n.length+" files that finished uploading")}).catch(function(t){e.uppy.log("[GoldenRetriever] Could not remove "+n.length+" files that finished uploading","warning"),e.uppy.log(t)})}),this.uppy.on("state-update",this.saveFilesStateToLocalStorage),this.uppy.on("restored",function(){var t=e.uppy.getState().currentUploads;t&&Object.keys(t).forEach(function(n){e.uppy.restore(n,t[n])})})},r}(__Plugin_177),___class_177.VERSION=_$package_179.version,___temp_177),_$package_205={version:"1.3.2"},___class_204,___temp_204;function ___extends_204(){return(___extends_204=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ___assertThisInitialized_204(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var __Plugin_204=_$lib_133.Plugin,_$lib_204=(___temp_204=___class_204=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,t,n)||this).type="debugger",r.id=r.opts.id||"ReduxDevTools",r.title="Redux DevTools",r.opts=___extends_204({},{},n),r.handleStateChange=r.handleStateChange.bind(___assertThisInitialized_204(r)),r.initDevTools=r.initDevTools.bind(___assertThisInitialized_204(r)),r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.handleStateChange=function(e,t,n){this.devTools.send("UPPY_STATE_UPDATE",t)},i.initDevTools=function(){var e=this;this.devTools=window.devToolsExtension.connect(),this.devToolsUnsubscribe=this.devTools.subscribe(function(t){if("DISPATCH"===t.type)switch(console.log(t.payload.type),t.payload.type){case"RESET":return void e.uppy.reset();case"IMPORT_STATE":var n=t.payload.nextLiftedState.computedStates;return e.uppy.store.state=___extends_204({},e.uppy.getState(),n[n.length-1].state),void e.uppy.updateAll(e.uppy.getState());case"JUMP_TO_STATE":case"JUMP_TO_ACTION":e.uppy.store.state=___extends_204({},e.uppy.getState(),JSON.parse(t.state)),e.uppy.updateAll(e.uppy.getState())}})},i.install=function(){this.withDevTools="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__,this.withDevTools&&(this.initDevTools(),this.uppy.on("state-update",this.handleStateChange))},i.uninstall=function(){this.withDevTools&&(this.devToolsUnsubscribe(),this.uppy.off("state-update",this.handleStateUpdate))},r}(__Plugin_204),___class_204.VERSION=_$package_205.version,___temp_204),_$uppy_288={};_$uppy_288.Core=_$lib_133,_$uppy_288.debugLogger=_$uppy_288.Core.debugLogger,_$uppy_288.server=_$lib_129,_$uppy_288.views={ProviderView:_$lib_202},_$uppy_288.DefaultStore=_$lib_219,_$uppy_288.ReduxStore=_$lib_221,_$uppy_288.Dashboard=_$lib_154,_$uppy_288.DragDrop=_$lib_164,_$uppy_288.FileInput=_$lib_170,_$uppy_288.Informer=_$lib_183,_$uppy_288.ProgressBar=_$lib_189,_$uppy_288.StatusBar=_$lib_216,_$uppy_288.Dropbox=_$lib_166,_$uppy_288.GoogleDrive=_$lib_181,_$uppy_288.Instagram=_$lib_185,_$uppy_288.OneDrive=_$lib_187,_$uppy_288.Facebook=_$lib_168,_$uppy_288.Url=_$lib_237,_$uppy_288.Webcam=_$lib_282,_$uppy_288.ScreenCapture=_$lib_212,_$uppy_288.AwsS3=_$lib_123,_$uppy_288.AwsS3Multipart=_$lib_120,_$uppy_288.Transloadit=_$lib_230,_$uppy_288.Tus=_$lib_234,_$uppy_288.XHRUpload=_$lib_285,_$uppy_288.Form=_$lib_172,_$uppy_288.GoldenRetriever=_$lib_177,_$uppy_288.ReduxDevTools=_$lib_204,_$uppy_288.ThumbnailGenerator=_$lib_223,_$uppy_288.locales={};var _$bundle_287={};return _$bundle_287=_$uppy_288,_$bundle_287});
//# sourceMappingURL=uppy.min.js.map