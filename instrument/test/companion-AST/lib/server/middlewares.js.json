{"type":"Program","start":0,"end":1693,"loc":{"start":{"line":1,"column":0},"end":{"line":46,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":46,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":46}},"declarations":[{"type":"VariableDeclarator","start":6,"end":45,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":45}},"id":{"type":"Identifier","start":6,"end":18,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":18}},"name":"tokenService"},"init":{"type":"CallExpression","start":21,"end":45,"loc":{"start":{"line":1,"column":21},"end":{"line":1,"column":45}},"callee":{"type":"Identifier","start":21,"end":28,"loc":{"start":{"line":1,"column":21},"end":{"line":1,"column":28}},"name":"require"},"arguments":[{"type":"Literal","start":29,"end":44,"loc":{"start":{"line":1,"column":29},"end":{"line":1,"column":44}},"value":"./helpers/jwt","raw":"'./helpers/jwt'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":47,"end":82,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":35}},"declarations":[{"type":"VariableDeclarator","start":53,"end":81,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":34}},"id":{"type":"Identifier","start":53,"end":59,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":12}},"name":"logger"},"init":{"type":"CallExpression","start":62,"end":81,"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":34}},"callee":{"type":"Identifier","start":62,"end":69,"loc":{"start":{"line":2,"column":15},"end":{"line":2,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":70,"end":80,"loc":{"start":{"line":2,"column":23},"end":{"line":2,"column":33}},"value":"./logger","raw":"'./logger'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":83,"end":508,"loc":{"start":{"line":3,"column":0},"end":{"line":13,"column":2}},"expression":{"type":"AssignmentExpression","start":83,"end":507,"loc":{"start":{"line":3,"column":0},"end":{"line":13,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":83,"end":112,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"object":{"type":"Identifier","start":83,"end":90,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":91,"end":112,"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":29}},"name":"hasSessionAndProvider"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":115,"end":507,"loc":{"start":{"line":3,"column":32},"end":{"line":13,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":116,"end":119,"loc":{"start":{"line":3,"column":33},"end":{"line":3,"column":36}},"name":"req"},{"type":"Identifier","start":121,"end":124,"loc":{"start":{"line":3,"column":38},"end":{"line":3,"column":41}},"name":"res"},{"type":"Identifier","start":126,"end":130,"loc":{"start":{"line":3,"column":43},"end":{"line":3,"column":47}},"name":"next"}],"body":{"type":"BlockStatement","start":135,"end":507,"loc":{"start":{"line":3,"column":52},"end":{"line":13,"column":1}},"body":[{"type":"IfStatement","start":141,"end":314,"loc":{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},"test":{"type":"LogicalExpression","start":145,"end":170,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":33}},"left":{"type":"UnaryExpression","start":145,"end":157,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":20}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":146,"end":157,"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":20}},"object":{"type":"Identifier","start":146,"end":149,"loc":{"start":{"line":4,"column":9},"end":{"line":4,"column":12}},"name":"req"},"property":{"type":"Identifier","start":150,"end":157,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":20}},"name":"session"},"computed":false}},"operator":"||","right":{"type":"UnaryExpression","start":161,"end":170,"loc":{"start":{"line":4,"column":24},"end":{"line":4,"column":33}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":162,"end":170,"loc":{"start":{"line":4,"column":25},"end":{"line":4,"column":33}},"object":{"type":"Identifier","start":162,"end":165,"loc":{"start":{"line":4,"column":25},"end":{"line":4,"column":28}},"name":"req"},"property":{"type":"Identifier","start":166,"end":170,"loc":{"start":{"line":4,"column":29},"end":{"line":4,"column":33}},"name":"body"},"computed":false}}},"consequent":{"type":"BlockStatement","start":172,"end":314,"loc":{"start":{"line":4,"column":35},"end":{"line":7,"column":5}},"body":[{"type":"ExpressionStatement","start":182,"end":272,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":98}},"expression":{"type":"CallExpression","start":182,"end":271,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":97}},"callee":{"type":"MemberExpression","start":182,"end":194,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":20}},"object":{"type":"Identifier","start":182,"end":188,"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":189,"end":194,"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":20}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":195,"end":256,"loc":{"start":{"line":5,"column":21},"end":{"line":5,"column":82}},"value":"No session/body attached to req object. Exiting dispatcher.","raw":"'No session/body attached to req object. Exiting dispatcher.'"},{"type":"Literal","start":258,"end":262,"loc":{"start":{"line":5,"column":84},"end":{"line":5,"column":88}},"value":null,"raw":"null"},{"type":"MemberExpression","start":264,"end":270,"loc":{"start":{"line":5,"column":90},"end":{"line":5,"column":96}},"object":{"type":"Identifier","start":264,"end":267,"loc":{"start":{"line":5,"column":90},"end":{"line":5,"column":93}},"name":"req"},"property":{"type":"Identifier","start":268,"end":270,"loc":{"start":{"line":5,"column":94},"end":{"line":5,"column":96}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":281,"end":308,"loc":{"start":{"line":6,"column":8},"end":{"line":6,"column":35}},"argument":{"type":"CallExpression","start":288,"end":307,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":34}},"callee":{"type":"MemberExpression","start":288,"end":302,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":29}},"object":{"type":"Identifier","start":288,"end":291,"loc":{"start":{"line":6,"column":15},"end":{"line":6,"column":18}},"name":"res"},"property":{"type":"Identifier","start":292,"end":302,"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":29}},"name":"sendStatus"},"computed":false},"arguments":[{"type":"Literal","start":303,"end":306,"loc":{"start":{"line":6,"column":30},"end":{"line":6,"column":33}},"value":400,"raw":"400"}]}}]},"alternate":null},{"type":"IfStatement","start":319,"end":486,"loc":{"start":{"line":8,"column":4},"end":{"line":11,"column":5}},"test":{"type":"UnaryExpression","start":323,"end":346,"loc":{"start":{"line":8,"column":8},"end":{"line":8,"column":31}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":324,"end":346,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":31}},"object":{"type":"MemberExpression","start":324,"end":337,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":22}},"object":{"type":"Identifier","start":324,"end":327,"loc":{"start":{"line":8,"column":9},"end":{"line":8,"column":12}},"name":"req"},"property":{"type":"Identifier","start":328,"end":337,"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":22}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":338,"end":346,"loc":{"start":{"line":8,"column":23},"end":{"line":8,"column":31}},"name":"provider"},"computed":false}},"consequent":{"type":"BlockStatement","start":348,"end":486,"loc":{"start":{"line":8,"column":33},"end":{"line":11,"column":5}},"body":[{"type":"ExpressionStatement","start":358,"end":444,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":94}},"expression":{"type":"CallExpression","start":358,"end":443,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":93}},"callee":{"type":"MemberExpression","start":358,"end":370,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":20}},"object":{"type":"Identifier","start":358,"end":364,"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":365,"end":370,"loc":{"start":{"line":9,"column":15},"end":{"line":9,"column":20}},"name":"debug"},"computed":false},"arguments":[{"type":"Literal","start":371,"end":428,"loc":{"start":{"line":9,"column":21},"end":{"line":9,"column":78}},"value":"No provider/provider-handler found. Exiting dispatcher.","raw":"'No provider/provider-handler found. Exiting dispatcher.'"},{"type":"Literal","start":430,"end":434,"loc":{"start":{"line":9,"column":80},"end":{"line":9,"column":84}},"value":null,"raw":"null"},{"type":"MemberExpression","start":436,"end":442,"loc":{"start":{"line":9,"column":86},"end":{"line":9,"column":92}},"object":{"type":"Identifier","start":436,"end":439,"loc":{"start":{"line":9,"column":86},"end":{"line":9,"column":89}},"name":"req"},"property":{"type":"Identifier","start":440,"end":442,"loc":{"start":{"line":9,"column":90},"end":{"line":9,"column":92}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":453,"end":480,"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":35}},"argument":{"type":"CallExpression","start":460,"end":479,"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":34}},"callee":{"type":"MemberExpression","start":460,"end":474,"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":29}},"object":{"type":"Identifier","start":460,"end":463,"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":18}},"name":"res"},"property":{"type":"Identifier","start":464,"end":474,"loc":{"start":{"line":10,"column":19},"end":{"line":10,"column":29}},"name":"sendStatus"},"computed":false},"arguments":[{"type":"Literal","start":475,"end":478,"loc":{"start":{"line":10,"column":30},"end":{"line":10,"column":33}},"value":400,"raw":"400"}]}}]},"alternate":null},{"type":"ReturnStatement","start":491,"end":505,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":18}},"argument":{"type":"CallExpression","start":498,"end":504,"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":17}},"callee":{"type":"Identifier","start":498,"end":502,"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":15}},"name":"next"},"arguments":[]}}]}}}},{"type":"ExpressionStatement","start":509,"end":1108,"loc":{"start":{"line":14,"column":0},"end":{"line":30,"column":2}},"expression":{"type":"AssignmentExpression","start":509,"end":1107,"loc":{"start":{"line":14,"column":0},"end":{"line":30,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":509,"end":528,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":19}},"object":{"type":"Identifier","start":509,"end":516,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":517,"end":528,"loc":{"start":{"line":14,"column":8},"end":{"line":14,"column":19}},"name":"verifyToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":531,"end":1107,"loc":{"start":{"line":14,"column":22},"end":{"line":30,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":532,"end":535,"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":26}},"name":"req"},{"type":"Identifier","start":537,"end":540,"loc":{"start":{"line":14,"column":28},"end":{"line":14,"column":31}},"name":"res"},{"type":"Identifier","start":542,"end":546,"loc":{"start":{"line":14,"column":33},"end":{"line":14,"column":37}},"name":"next"}],"body":{"type":"BlockStatement","start":551,"end":1107,"loc":{"start":{"line":14,"column":42},"end":{"line":30,"column":1}},"body":[{"type":"VariableDeclaration","start":557,"end":595,"loc":{"start":{"line":15,"column":4},"end":{"line":15,"column":42}},"declarations":[{"type":"VariableDeclarator","start":563,"end":594,"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":41}},"id":{"type":"Identifier","start":563,"end":568,"loc":{"start":{"line":15,"column":10},"end":{"line":15,"column":15}},"name":"token"},"init":{"type":"MemberExpression","start":571,"end":594,"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":41}},"object":{"type":"MemberExpression","start":571,"end":584,"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":31}},"object":{"type":"Identifier","start":571,"end":574,"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":21}},"name":"req"},"property":{"type":"Identifier","start":575,"end":584,"loc":{"start":{"line":15,"column":22},"end":{"line":15,"column":31}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":585,"end":594,"loc":{"start":{"line":15,"column":32},"end":{"line":15,"column":41}},"name":"authToken"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":600,"end":734,"loc":{"start":{"line":16,"column":4},"end":{"line":19,"column":5}},"test":{"type":"BinaryExpression","start":604,"end":617,"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":21}},"left":{"type":"Identifier","start":604,"end":609,"loc":{"start":{"line":16,"column":8},"end":{"line":16,"column":13}},"name":"token"},"operator":"==","right":{"type":"Literal","start":613,"end":617,"loc":{"start":{"line":16,"column":17},"end":{"line":16,"column":21}},"value":null,"raw":"null"}},"consequent":{"type":"BlockStatement","start":619,"end":734,"loc":{"start":{"line":16,"column":23},"end":{"line":19,"column":5}},"body":[{"type":"ExpressionStatement","start":629,"end":692,"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":71}},"expression":{"type":"CallExpression","start":629,"end":691,"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":70}},"callee":{"type":"MemberExpression","start":629,"end":640,"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":19}},"object":{"type":"Identifier","start":629,"end":635,"loc":{"start":{"line":17,"column":8},"end":{"line":17,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":636,"end":640,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":19}},"name":"info"},"computed":false},"arguments":[{"type":"Literal","start":641,"end":660,"loc":{"start":{"line":17,"column":20},"end":{"line":17,"column":39}},"value":"cannot auth token","raw":"'cannot auth token'"},{"type":"Literal","start":662,"end":682,"loc":{"start":{"line":17,"column":41},"end":{"line":17,"column":61}},"value":"token.verify.unset","raw":"'token.verify.unset'"},{"type":"MemberExpression","start":684,"end":690,"loc":{"start":{"line":17,"column":63},"end":{"line":17,"column":69}},"object":{"type":"Identifier","start":684,"end":687,"loc":{"start":{"line":17,"column":63},"end":{"line":17,"column":66}},"name":"req"},"property":{"type":"Identifier","start":688,"end":690,"loc":{"start":{"line":17,"column":67},"end":{"line":17,"column":69}},"name":"id"},"computed":false}]}},{"type":"ReturnStatement","start":701,"end":728,"loc":{"start":{"line":18,"column":8},"end":{"line":18,"column":35}},"argument":{"type":"CallExpression","start":708,"end":727,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":34}},"callee":{"type":"MemberExpression","start":708,"end":722,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":29}},"object":{"type":"Identifier","start":708,"end":711,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":18}},"name":"res"},"property":{"type":"Identifier","start":712,"end":722,"loc":{"start":{"line":18,"column":19},"end":{"line":18,"column":29}},"name":"sendStatus"},"computed":false},"arguments":[{"type":"Literal","start":723,"end":726,"loc":{"start":{"line":18,"column":30},"end":{"line":18,"column":33}},"value":401,"raw":"401"}]}}]},"alternate":null},{"type":"VariableDeclaration","start":739,"end":784,"loc":{"start":{"line":20,"column":4},"end":{"line":20,"column":49}},"declarations":[{"type":"VariableDeclarator","start":745,"end":783,"loc":{"start":{"line":20,"column":10},"end":{"line":20,"column":48}},"id":{"type":"Identifier","start":745,"end":757,"loc":{"start":{"line":20,"column":10},"end":{"line":20,"column":22}},"name":"providerName"},"init":{"type":"MemberExpression","start":760,"end":783,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":48}},"object":{"type":"MemberExpression","start":760,"end":770,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":35}},"object":{"type":"Identifier","start":760,"end":763,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":28}},"name":"req"},"property":{"type":"Identifier","start":764,"end":770,"loc":{"start":{"line":20,"column":29},"end":{"line":20,"column":35}},"name":"params"},"computed":false},"property":{"type":"Identifier","start":771,"end":783,"loc":{"start":{"line":20,"column":36},"end":{"line":20,"column":48}},"name":"providerName"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":789,"end":876,"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":91}},"declarations":[{"type":"VariableDeclarator","start":795,"end":875,"loc":{"start":{"line":21,"column":10},"end":{"line":21,"column":90}},"id":{"type":"ObjectPattern","start":795,"end":811,"loc":{"start":{"line":21,"column":10},"end":{"line":21,"column":26}},"properties":[{"type":"Property","start":797,"end":800,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":15}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":797,"end":800,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":15}},"name":"err"},"kind":"init","value":{"type":"Identifier","start":797,"end":800,"loc":{"start":{"line":21,"column":12},"end":{"line":21,"column":15}},"name":"err"}},{"type":"Property","start":802,"end":809,"loc":{"start":{"line":21,"column":17},"end":{"line":21,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":802,"end":809,"loc":{"start":{"line":21,"column":17},"end":{"line":21,"column":24}},"name":"payload"},"kind":"init","value":{"type":"Identifier","start":802,"end":809,"loc":{"start":{"line":21,"column":17},"end":{"line":21,"column":24}},"name":"payload"}}]},"init":{"type":"CallExpression","start":814,"end":875,"loc":{"start":{"line":21,"column":29},"end":{"line":21,"column":90}},"callee":{"type":"MemberExpression","start":814,"end":838,"loc":{"start":{"line":21,"column":29},"end":{"line":21,"column":53}},"object":{"type":"Identifier","start":814,"end":826,"loc":{"start":{"line":21,"column":29},"end":{"line":21,"column":41}},"name":"tokenService"},"property":{"type":"Identifier","start":827,"end":838,"loc":{"start":{"line":21,"column":42},"end":{"line":21,"column":53}},"name":"verifyToken"},"computed":false},"arguments":[{"type":"Identifier","start":839,"end":844,"loc":{"start":{"line":21,"column":54},"end":{"line":21,"column":59}},"name":"token"},{"type":"MemberExpression","start":846,"end":874,"loc":{"start":{"line":21,"column":61},"end":{"line":21,"column":89}},"object":{"type":"MemberExpression","start":846,"end":867,"loc":{"start":{"line":21,"column":61},"end":{"line":21,"column":82}},"object":{"type":"MemberExpression","start":846,"end":859,"loc":{"start":{"line":21,"column":61},"end":{"line":21,"column":74}},"object":{"type":"Identifier","start":846,"end":849,"loc":{"start":{"line":21,"column":61},"end":{"line":21,"column":64}},"name":"req"},"property":{"type":"Identifier","start":850,"end":859,"loc":{"start":{"line":21,"column":65},"end":{"line":21,"column":74}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":860,"end":867,"loc":{"start":{"line":21,"column":75},"end":{"line":21,"column":82}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":868,"end":874,"loc":{"start":{"line":21,"column":83},"end":{"line":21,"column":89}},"name":"secret"},"computed":false}]}}],"kind":"const"},{"type":"IfStatement","start":881,"end":1049,"loc":{"start":{"line":22,"column":4},"end":{"line":27,"column":5}},"test":{"type":"LogicalExpression","start":885,"end":914,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":37}},"left":{"type":"Identifier","start":885,"end":888,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":11}},"name":"err"},"operator":"||","right":{"type":"UnaryExpression","start":892,"end":914,"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":37}},"operator":"!","prefix":true,"argument":{"type":"MemberExpression","start":893,"end":914,"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":37}},"object":{"type":"Identifier","start":893,"end":900,"loc":{"start":{"line":22,"column":16},"end":{"line":22,"column":23}},"name":"payload"},"property":{"type":"Identifier","start":901,"end":913,"loc":{"start":{"line":22,"column":24},"end":{"line":22,"column":36}},"name":"providerName"},"computed":true}}},"consequent":{"type":"BlockStatement","start":916,"end":1049,"loc":{"start":{"line":22,"column":39},"end":{"line":27,"column":5}},"body":[{"type":"IfStatement","start":926,"end":1007,"loc":{"start":{"line":23,"column":8},"end":{"line":25,"column":9}},"test":{"type":"Identifier","start":930,"end":933,"loc":{"start":{"line":23,"column":12},"end":{"line":23,"column":15}},"name":"err"},"consequent":{"type":"BlockStatement","start":935,"end":1007,"loc":{"start":{"line":23,"column":17},"end":{"line":25,"column":9}},"body":[{"type":"ExpressionStatement","start":949,"end":997,"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":60}},"expression":{"type":"CallExpression","start":949,"end":996,"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":59}},"callee":{"type":"MemberExpression","start":949,"end":961,"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":24}},"object":{"type":"Identifier","start":949,"end":955,"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":18}},"name":"logger"},"property":{"type":"Identifier","start":956,"end":961,"loc":{"start":{"line":24,"column":19},"end":{"line":24,"column":24}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":962,"end":965,"loc":{"start":{"line":24,"column":25},"end":{"line":24,"column":28}},"name":"err"},{"type":"Literal","start":967,"end":987,"loc":{"start":{"line":24,"column":30},"end":{"line":24,"column":50}},"value":"token.verify.error","raw":"'token.verify.error'"},{"type":"MemberExpression","start":989,"end":995,"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":58}},"object":{"type":"Identifier","start":989,"end":992,"loc":{"start":{"line":24,"column":52},"end":{"line":24,"column":55}},"name":"req"},"property":{"type":"Identifier","start":993,"end":995,"loc":{"start":{"line":24,"column":56},"end":{"line":24,"column":58}},"name":"id"},"computed":false}]}}]},"alternate":null},{"type":"ReturnStatement","start":1016,"end":1043,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":35}},"argument":{"type":"CallExpression","start":1023,"end":1042,"loc":{"start":{"line":26,"column":15},"end":{"line":26,"column":34}},"callee":{"type":"MemberExpression","start":1023,"end":1037,"loc":{"start":{"line":26,"column":15},"end":{"line":26,"column":29}},"object":{"type":"Identifier","start":1023,"end":1026,"loc":{"start":{"line":26,"column":15},"end":{"line":26,"column":18}},"name":"res"},"property":{"type":"Identifier","start":1027,"end":1037,"loc":{"start":{"line":26,"column":19},"end":{"line":26,"column":29}},"name":"sendStatus"},"computed":false},"arguments":[{"type":"Literal","start":1038,"end":1041,"loc":{"start":{"line":26,"column":30},"end":{"line":26,"column":33}},"value":401,"raw":"401"}]}}]},"alternate":null},{"type":"ExpressionStatement","start":1054,"end":1093,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":43}},"expression":{"type":"AssignmentExpression","start":1054,"end":1092,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":42}},"operator":"=","left":{"type":"MemberExpression","start":1054,"end":1082,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":32}},"object":{"type":"MemberExpression","start":1054,"end":1067,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":17}},"object":{"type":"Identifier","start":1054,"end":1057,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":7}},"name":"req"},"property":{"type":"Identifier","start":1058,"end":1067,"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":17}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1068,"end":1082,"loc":{"start":{"line":28,"column":18},"end":{"line":28,"column":32}},"name":"providerTokens"},"computed":false},"right":{"type":"Identifier","start":1085,"end":1092,"loc":{"start":{"line":28,"column":35},"end":{"line":28,"column":42}},"name":"payload"}}},{"type":"ExpressionStatement","start":1098,"end":1105,"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":11}},"expression":{"type":"CallExpression","start":1098,"end":1104,"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":10}},"callee":{"type":"Identifier","start":1098,"end":1102,"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":8}},"name":"next"},"arguments":[]}}]}}}},{"type":"ExpressionStatement","start":1146,"end":1522,"loc":{"start":{"line":32,"column":0},"end":{"line":41,"column":2}},"expression":{"type":"AssignmentExpression","start":1146,"end":1521,"loc":{"start":{"line":32,"column":0},"end":{"line":41,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":1146,"end":1171,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":25}},"object":{"type":"Identifier","start":1146,"end":1153,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":1154,"end":1171,"loc":{"start":{"line":32,"column":8},"end":{"line":32,"column":25}},"name":"gentleVerifyToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1174,"end":1521,"loc":{"start":{"line":32,"column":28},"end":{"line":41,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1175,"end":1178,"loc":{"start":{"line":32,"column":29},"end":{"line":32,"column":32}},"name":"req"},{"type":"Identifier","start":1180,"end":1183,"loc":{"start":{"line":32,"column":34},"end":{"line":32,"column":37}},"name":"res"},{"type":"Identifier","start":1185,"end":1189,"loc":{"start":{"line":32,"column":39},"end":{"line":32,"column":43}},"name":"next"}],"body":{"type":"BlockStatement","start":1194,"end":1521,"loc":{"start":{"line":32,"column":48},"end":{"line":41,"column":1}},"body":[{"type":"VariableDeclaration","start":1200,"end":1245,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":49}},"declarations":[{"type":"VariableDeclarator","start":1206,"end":1244,"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":48}},"id":{"type":"Identifier","start":1206,"end":1218,"loc":{"start":{"line":33,"column":10},"end":{"line":33,"column":22}},"name":"providerName"},"init":{"type":"MemberExpression","start":1221,"end":1244,"loc":{"start":{"line":33,"column":25},"end":{"line":33,"column":48}},"object":{"type":"MemberExpression","start":1221,"end":1231,"loc":{"start":{"line":33,"column":25},"end":{"line":33,"column":35}},"object":{"type":"Identifier","start":1221,"end":1224,"loc":{"start":{"line":33,"column":25},"end":{"line":33,"column":28}},"name":"req"},"property":{"type":"Identifier","start":1225,"end":1231,"loc":{"start":{"line":33,"column":29},"end":{"line":33,"column":35}},"name":"params"},"computed":false},"property":{"type":"Identifier","start":1232,"end":1244,"loc":{"start":{"line":33,"column":36},"end":{"line":33,"column":48}},"name":"providerName"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":1250,"end":1507,"loc":{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},"test":{"type":"MemberExpression","start":1254,"end":1277,"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":31}},"object":{"type":"MemberExpression","start":1254,"end":1267,"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":21}},"object":{"type":"Identifier","start":1254,"end":1257,"loc":{"start":{"line":34,"column":8},"end":{"line":34,"column":11}},"name":"req"},"property":{"type":"Identifier","start":1258,"end":1267,"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":21}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1268,"end":1277,"loc":{"start":{"line":34,"column":22},"end":{"line":34,"column":31}},"name":"authToken"},"computed":false},"consequent":{"type":"BlockStatement","start":1279,"end":1507,"loc":{"start":{"line":34,"column":33},"end":{"line":39,"column":5}},"body":[{"type":"VariableDeclaration","start":1289,"end":1394,"loc":{"start":{"line":35,"column":8},"end":{"line":35,"column":113}},"declarations":[{"type":"VariableDeclarator","start":1295,"end":1393,"loc":{"start":{"line":35,"column":14},"end":{"line":35,"column":112}},"id":{"type":"ObjectPattern","start":1295,"end":1311,"loc":{"start":{"line":35,"column":14},"end":{"line":35,"column":30}},"properties":[{"type":"Property","start":1297,"end":1300,"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":19}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1297,"end":1300,"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":19}},"name":"err"},"kind":"init","value":{"type":"Identifier","start":1297,"end":1300,"loc":{"start":{"line":35,"column":16},"end":{"line":35,"column":19}},"name":"err"}},{"type":"Property","start":1302,"end":1309,"loc":{"start":{"line":35,"column":21},"end":{"line":35,"column":28}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1302,"end":1309,"loc":{"start":{"line":35,"column":21},"end":{"line":35,"column":28}},"name":"payload"},"kind":"init","value":{"type":"Identifier","start":1302,"end":1309,"loc":{"start":{"line":35,"column":21},"end":{"line":35,"column":28}},"name":"payload"}}]},"init":{"type":"CallExpression","start":1314,"end":1393,"loc":{"start":{"line":35,"column":33},"end":{"line":35,"column":112}},"callee":{"type":"MemberExpression","start":1314,"end":1338,"loc":{"start":{"line":35,"column":33},"end":{"line":35,"column":57}},"object":{"type":"Identifier","start":1314,"end":1326,"loc":{"start":{"line":35,"column":33},"end":{"line":35,"column":45}},"name":"tokenService"},"property":{"type":"Identifier","start":1327,"end":1338,"loc":{"start":{"line":35,"column":46},"end":{"line":35,"column":57}},"name":"verifyToken"},"computed":false},"arguments":[{"type":"MemberExpression","start":1339,"end":1362,"loc":{"start":{"line":35,"column":58},"end":{"line":35,"column":81}},"object":{"type":"MemberExpression","start":1339,"end":1352,"loc":{"start":{"line":35,"column":58},"end":{"line":35,"column":71}},"object":{"type":"Identifier","start":1339,"end":1342,"loc":{"start":{"line":35,"column":58},"end":{"line":35,"column":61}},"name":"req"},"property":{"type":"Identifier","start":1343,"end":1352,"loc":{"start":{"line":35,"column":62},"end":{"line":35,"column":71}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1353,"end":1362,"loc":{"start":{"line":35,"column":72},"end":{"line":35,"column":81}},"name":"authToken"},"computed":false},{"type":"MemberExpression","start":1364,"end":1392,"loc":{"start":{"line":35,"column":83},"end":{"line":35,"column":111}},"object":{"type":"MemberExpression","start":1364,"end":1385,"loc":{"start":{"line":35,"column":83},"end":{"line":35,"column":104}},"object":{"type":"MemberExpression","start":1364,"end":1377,"loc":{"start":{"line":35,"column":83},"end":{"line":35,"column":96}},"object":{"type":"Identifier","start":1364,"end":1367,"loc":{"start":{"line":35,"column":83},"end":{"line":35,"column":86}},"name":"req"},"property":{"type":"Identifier","start":1368,"end":1377,"loc":{"start":{"line":35,"column":87},"end":{"line":35,"column":96}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1378,"end":1385,"loc":{"start":{"line":35,"column":97},"end":{"line":35,"column":104}},"name":"options"},"computed":false},"property":{"type":"Identifier","start":1386,"end":1392,"loc":{"start":{"line":35,"column":105},"end":{"line":35,"column":111}},"name":"secret"},"computed":false}]}}],"kind":"const"},{"type":"IfStatement","start":1403,"end":1501,"loc":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"test":{"type":"LogicalExpression","start":1407,"end":1436,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":41}},"left":{"type":"UnaryExpression","start":1407,"end":1411,"loc":{"start":{"line":36,"column":12},"end":{"line":36,"column":16}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":1408,"end":1411,"loc":{"start":{"line":36,"column":13},"end":{"line":36,"column":16}},"name":"err"}},"operator":"&&","right":{"type":"MemberExpression","start":1415,"end":1436,"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":41}},"object":{"type":"Identifier","start":1415,"end":1422,"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":27}},"name":"payload"},"property":{"type":"Identifier","start":1423,"end":1435,"loc":{"start":{"line":36,"column":28},"end":{"line":36,"column":40}},"name":"providerName"},"computed":true}},"consequent":{"type":"BlockStatement","start":1438,"end":1501,"loc":{"start":{"line":36,"column":43},"end":{"line":38,"column":9}},"body":[{"type":"ExpressionStatement","start":1452,"end":1491,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":51}},"expression":{"type":"AssignmentExpression","start":1452,"end":1490,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":50}},"operator":"=","left":{"type":"MemberExpression","start":1452,"end":1480,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":40}},"object":{"type":"MemberExpression","start":1452,"end":1465,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":25}},"object":{"type":"Identifier","start":1452,"end":1455,"loc":{"start":{"line":37,"column":12},"end":{"line":37,"column":15}},"name":"req"},"property":{"type":"Identifier","start":1456,"end":1465,"loc":{"start":{"line":37,"column":16},"end":{"line":37,"column":25}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1466,"end":1480,"loc":{"start":{"line":37,"column":26},"end":{"line":37,"column":40}},"name":"providerTokens"},"computed":false},"right":{"type":"Identifier","start":1483,"end":1490,"loc":{"start":{"line":37,"column":43},"end":{"line":37,"column":50}},"name":"payload"}}}]},"alternate":null}]},"alternate":null},{"type":"ExpressionStatement","start":1512,"end":1519,"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":11}},"expression":{"type":"CallExpression","start":1512,"end":1518,"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":10}},"callee":{"type":"Identifier","start":1512,"end":1516,"loc":{"start":{"line":40,"column":4},"end":{"line":40,"column":8}},"name":"next"},"arguments":[]}}]}}},"comments":[{"type":"Line","value":" does not fail if token is invalid","start":1109,"end":1145,"loc":{"start":{"line":31,"column":0},"end":{"line":31,"column":36}}}]},{"type":"ExpressionStatement","start":1523,"end":1692,"loc":{"start":{"line":42,"column":0},"end":{"line":45,"column":2}},"expression":{"type":"AssignmentExpression","start":1523,"end":1691,"loc":{"start":{"line":42,"column":0},"end":{"line":45,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":1523,"end":1546,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":23}},"object":{"type":"Identifier","start":1523,"end":1530,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":1531,"end":1546,"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":23}},"name":"cookieAuthToken"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1549,"end":1691,"loc":{"start":{"line":42,"column":26},"end":{"line":45,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1550,"end":1553,"loc":{"start":{"line":42,"column":27},"end":{"line":42,"column":30}},"name":"req"},{"type":"Identifier","start":1555,"end":1558,"loc":{"start":{"line":42,"column":32},"end":{"line":42,"column":35}},"name":"res"},{"type":"Identifier","start":1560,"end":1564,"loc":{"start":{"line":42,"column":37},"end":{"line":42,"column":41}},"name":"next"}],"body":{"type":"BlockStatement","start":1569,"end":1691,"loc":{"start":{"line":42,"column":46},"end":{"line":45,"column":1}},"body":[{"type":"ExpressionStatement","start":1575,"end":1670,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":99}},"expression":{"type":"AssignmentExpression","start":1575,"end":1669,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":98}},"operator":"=","left":{"type":"MemberExpression","start":1575,"end":1598,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":27}},"object":{"type":"MemberExpression","start":1575,"end":1588,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":17}},"object":{"type":"Identifier","start":1575,"end":1578,"loc":{"start":{"line":43,"column":4},"end":{"line":43,"column":7}},"name":"req"},"property":{"type":"Identifier","start":1579,"end":1588,"loc":{"start":{"line":43,"column":8},"end":{"line":43,"column":17}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1589,"end":1598,"loc":{"start":{"line":43,"column":18},"end":{"line":43,"column":27}},"name":"authToken"},"computed":false},"right":{"type":"MemberExpression","start":1601,"end":1669,"loc":{"start":{"line":43,"column":30},"end":{"line":43,"column":98}},"object":{"type":"MemberExpression","start":1601,"end":1612,"loc":{"start":{"line":43,"column":30},"end":{"line":43,"column":41}},"object":{"type":"Identifier","start":1601,"end":1604,"loc":{"start":{"line":43,"column":30},"end":{"line":43,"column":33}},"name":"req"},"property":{"type":"Identifier","start":1605,"end":1612,"loc":{"start":{"line":43,"column":34},"end":{"line":43,"column":41}},"name":"cookies"},"computed":false},"property":{"type":"TemplateLiteral","start":1613,"end":1668,"loc":{"start":{"line":43,"column":42},"end":{"line":43,"column":97}},"expressions":[{"type":"MemberExpression","start":1631,"end":1666,"loc":{"start":{"line":43,"column":60},"end":{"line":43,"column":95}},"object":{"type":"MemberExpression","start":1631,"end":1653,"loc":{"start":{"line":43,"column":60},"end":{"line":43,"column":82}},"object":{"type":"MemberExpression","start":1631,"end":1644,"loc":{"start":{"line":43,"column":60},"end":{"line":43,"column":73}},"object":{"type":"Identifier","start":1631,"end":1634,"loc":{"start":{"line":43,"column":60},"end":{"line":43,"column":63}},"name":"req"},"property":{"type":"Identifier","start":1635,"end":1644,"loc":{"start":{"line":43,"column":64},"end":{"line":43,"column":73}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1645,"end":1653,"loc":{"start":{"line":43,"column":74},"end":{"line":43,"column":82}},"name":"provider"},"computed":false},"property":{"type":"Identifier","start":1654,"end":1666,"loc":{"start":{"line":43,"column":83},"end":{"line":43,"column":95}},"name":"authProvider"},"computed":false}],"quasis":[{"type":"TemplateElement","start":1614,"end":1629,"loc":{"start":{"line":43,"column":43},"end":{"line":43,"column":58}},"value":{"raw":"uppyAuthToken--","cooked":"uppyAuthToken--"},"tail":false},{"type":"TemplateElement","start":1667,"end":1667,"loc":{"start":{"line":43,"column":96},"end":{"line":43,"column":96}},"value":{"raw":"","cooked":""},"tail":true}]},"computed":true}}},{"type":"ReturnStatement","start":1675,"end":1689,"loc":{"start":{"line":44,"column":4},"end":{"line":44,"column":18}},"argument":{"type":"CallExpression","start":1682,"end":1688,"loc":{"start":{"line":44,"column":11},"end":{"line":44,"column":17}},"callee":{"type":"Identifier","start":1682,"end":1686,"loc":{"start":{"line":44,"column":11},"end":{"line":44,"column":15}},"name":"next"},"arguments":[]}}]}}}}],"sourceType":"script"}