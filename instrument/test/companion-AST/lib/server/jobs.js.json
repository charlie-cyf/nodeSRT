{"type":"Program","start":0,"end":2283,"loc":{"start":{"line":1,"column":0},"end":{"line":53,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":42,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":42}},"declarations":[{"type":"VariableDeclarator","start":6,"end":41,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":41}},"id":{"type":"Identifier","start":6,"end":14,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":14}},"name":"schedule"},"init":{"type":"CallExpression","start":17,"end":41,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":41}},"callee":{"type":"Identifier","start":17,"end":24,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":24}},"name":"require"},"arguments":[{"type":"Literal","start":25,"end":40,"loc":{"start":{"line":1,"column":25},"end":{"line":1,"column":40}},"value":"node-schedule","raw":"'node-schedule'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":43,"end":94,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":51}},"declarations":[{"type":"VariableDeclarator","start":49,"end":93,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":50}},"id":{"type":"ObjectPattern","start":49,"end":69,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":26}},"properties":[{"type":"Property","start":51,"end":67,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":51,"end":67,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":24}},"name":"FILE_NAME_PREFIX"},"kind":"init","value":{"type":"Identifier","start":51,"end":67,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":24}},"name":"FILE_NAME_PREFIX"}}]},"init":{"type":"CallExpression","start":72,"end":93,"loc":{"start":{"line":2,"column":29},"end":{"line":2,"column":50}},"callee":{"type":"Identifier","start":72,"end":79,"loc":{"start":{"line":2,"column":29},"end":{"line":2,"column":36}},"name":"require"},"arguments":[{"type":"Literal","start":80,"end":92,"loc":{"start":{"line":2,"column":37},"end":{"line":2,"column":49}},"value":"./Uploader","raw":"'./Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":95,"end":120,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}},"declarations":[{"type":"VariableDeclarator","start":101,"end":119,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":24}},"id":{"type":"Identifier","start":101,"end":103,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":8}},"name":"fs"},"init":{"type":"CallExpression","start":106,"end":119,"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":24}},"callee":{"type":"Identifier","start":106,"end":113,"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":18}},"name":"require"},"arguments":[{"type":"Literal","start":114,"end":118,"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":23}},"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":121,"end":150,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"declarations":[{"type":"VariableDeclarator","start":127,"end":149,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":28}},"id":{"type":"Identifier","start":127,"end":131,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":10}},"name":"path"},"init":{"type":"CallExpression","start":134,"end":149,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":28}},"callee":{"type":"Identifier","start":134,"end":141,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":142,"end":148,"loc":{"start":{"line":4,"column":21},"end":{"line":4,"column":27}},"value":"path","raw":"'path'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":151,"end":186,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":35}},"declarations":[{"type":"VariableDeclarator","start":157,"end":185,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":34}},"id":{"type":"Identifier","start":157,"end":163,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":12}},"name":"logger"},"init":{"type":"CallExpression","start":166,"end":185,"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":34}},"callee":{"type":"Identifier","start":166,"end":173,"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":174,"end":184,"loc":{"start":{"line":5,"column":23},"end":{"line":5,"column":33}},"value":"./logger","raw":"'./logger'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":344,"end":552,"loc":{"start":{"line":10,"column":0},"end":{"line":14,"column":2}},"expression":{"type":"AssignmentExpression","start":344,"end":551,"loc":{"start":{"line":10,"column":0},"end":{"line":14,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":344,"end":367,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":23}},"object":{"type":"Identifier","start":344,"end":351,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":352,"end":367,"loc":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"name":"startCleanUpJob"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":370,"end":551,"loc":{"start":{"line":10,"column":26},"end":{"line":14,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":371,"end":378,"loc":{"start":{"line":10,"column":27},"end":{"line":10,"column":34}},"name":"dirPath"}],"body":{"type":"BlockStatement","start":383,"end":551,"loc":{"start":{"line":10,"column":39},"end":{"line":14,"column":1}},"body":[{"type":"ExpressionStatement","start":389,"end":448,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":63}},"expression":{"type":"CallExpression","start":389,"end":447,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":62}},"callee":{"type":"MemberExpression","start":389,"end":400,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":15}},"object":{"type":"Identifier","start":389,"end":395,"loc":{"start":{"line":11,"column":4},"end":{"line":11,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":396,"end":400,"loc":{"start":{"line":11,"column":11},"end":{"line":11,"column":15}},"name":"info"},"computed":false},"arguments":[{"type":"Literal","start":401,"end":424,"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":39}},"value":"starting clean up job","raw":"'starting clean up job'"},{"type":"Literal","start":426,"end":446,"loc":{"start":{"line":11,"column":41},"end":{"line":11,"column":61}},"value":"jobs.cleanup.start","raw":"'jobs.cleanup.start'"}]}},{"type":"ExpressionStatement","start":475,"end":549,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":78}},"expression":{"type":"CallExpression","start":475,"end":548,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":77}},"callee":{"type":"MemberExpression","start":475,"end":495,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":24}},"object":{"type":"Identifier","start":475,"end":483,"loc":{"start":{"line":13,"column":4},"end":{"line":13,"column":12}},"name":"schedule"},"property":{"type":"Identifier","start":484,"end":495,"loc":{"start":{"line":13,"column":13},"end":{"line":13,"column":24}},"name":"scheduleJob"},"computed":false},"arguments":[{"type":"Literal","start":496,"end":508,"loc":{"start":{"line":13,"column":25},"end":{"line":13,"column":37}},"value":"0 23 * * *","raw":"'0 23 * * *'"},{"type":"ArrowFunctionExpression","start":510,"end":547,"loc":{"start":{"line":13,"column":39},"end":{"line":13,"column":76}},"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":516,"end":547,"loc":{"start":{"line":13,"column":45},"end":{"line":13,"column":76}},"callee":{"type":"Identifier","start":516,"end":538,"loc":{"start":{"line":13,"column":45},"end":{"line":13,"column":67}},"name":"cleanUpFinishedUploads"},"arguments":[{"type":"Identifier","start":539,"end":546,"loc":{"start":{"line":13,"column":68},"end":{"line":13,"column":75}},"name":"dirPath"}]}}]},"comments":[{"type":"Line","value":" run once a day","start":453,"end":470,"loc":{"start":{"line":12,"column":4},"end":{"line":12,"column":21}}}]}]}}},"comments":[{"type":"Block","value":"*\n * Runs a function every 24 hours, to clean up stale, upload related files.\n * @param {string} dirPath path to the directory which you want to clean\n ","start":187,"end":343,"loc":{"start":{"line":6,"column":0},"end":{"line":9,"column":3}}}]},{"type":"VariableDeclaration","start":553,"end":2282,"loc":{"start":{"line":15,"column":0},"end":{"line":52,"column":2}},"declarations":[{"type":"VariableDeclarator","start":559,"end":2281,"loc":{"start":{"line":15,"column":6},"end":{"line":52,"column":1}},"id":{"type":"Identifier","start":559,"end":581,"loc":{"start":{"line":15,"column":6},"end":{"line":15,"column":28}},"name":"cleanUpFinishedUploads"},"init":{"type":"ArrowFunctionExpression","start":584,"end":2281,"loc":{"start":{"line":15,"column":31},"end":{"line":52,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":585,"end":592,"loc":{"start":{"line":15,"column":32},"end":{"line":15,"column":39}},"name":"dirPath"}],"body":{"type":"BlockStatement","start":597,"end":2281,"loc":{"start":{"line":15,"column":44},"end":{"line":52,"column":1}},"body":[{"type":"ExpressionStatement","start":603,"end":690,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":91}},"expression":{"type":"CallExpression","start":603,"end":689,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":90}},"callee":{"type":"MemberExpression","start":603,"end":614,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":15}},"object":{"type":"Identifier","start":603,"end":609,"loc":{"start":{"line":16,"column":4},"end":{"line":16,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":610,"end":614,"loc":{"start":{"line":16,"column":11},"end":{"line":16,"column":15}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":615,"end":658,"loc":{"start":{"line":16,"column":16},"end":{"line":16,"column":59}},"expressions":[{"type":"Identifier","start":649,"end":656,"loc":{"start":{"line":16,"column":50},"end":{"line":16,"column":57}},"name":"dirPath"}],"quasis":[{"type":"TemplateElement","start":616,"end":647,"loc":{"start":{"line":16,"column":17},"end":{"line":16,"column":48}},"value":{"raw":"running clean up job for path: ","cooked":"running clean up job for path: "},"tail":false},{"type":"TemplateElement","start":657,"end":657,"loc":{"start":{"line":16,"column":58},"end":{"line":16,"column":58}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":660,"end":688,"loc":{"start":{"line":16,"column":61},"end":{"line":16,"column":89}},"value":"jobs.cleanup.progress.read","raw":"'jobs.cleanup.progress.read'"}]}},{"type":"ExpressionStatement","start":695,"end":2279,"loc":{"start":{"line":17,"column":4},"end":{"line":51,"column":7}},"expression":{"type":"CallExpression","start":695,"end":2278,"loc":{"start":{"line":17,"column":4},"end":{"line":51,"column":6}},"callee":{"type":"MemberExpression","start":695,"end":705,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":14}},"object":{"type":"Identifier","start":695,"end":697,"loc":{"start":{"line":17,"column":4},"end":{"line":17,"column":6}},"name":"fs"},"property":{"type":"Identifier","start":698,"end":705,"loc":{"start":{"line":17,"column":7},"end":{"line":17,"column":14}},"name":"readdir"},"computed":false},"arguments":[{"type":"Identifier","start":706,"end":713,"loc":{"start":{"line":17,"column":15},"end":{"line":17,"column":22}},"name":"dirPath"},{"type":"ArrowFunctionExpression","start":715,"end":2277,"loc":{"start":{"line":17,"column":24},"end":{"line":51,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":716,"end":719,"loc":{"start":{"line":17,"column":25},"end":{"line":17,"column":28}},"name":"err"},{"type":"Identifier","start":721,"end":726,"loc":{"start":{"line":17,"column":30},"end":{"line":17,"column":35}},"name":"files"}],"body":{"type":"BlockStatement","start":731,"end":2277,"loc":{"start":{"line":17,"column":40},"end":{"line":51,"column":5}},"body":[{"type":"IfStatement","start":741,"end":839,"loc":{"start":{"line":18,"column":8},"end":{"line":21,"column":9}},"test":{"type":"Identifier","start":745,"end":748,"loc":{"start":{"line":18,"column":12},"end":{"line":18,"column":15}},"name":"err"},"consequent":{"type":"BlockStatement","start":750,"end":839,"loc":{"start":{"line":18,"column":17},"end":{"line":21,"column":9}},"body":[{"type":"ExpressionStatement","start":764,"end":809,"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":57}},"expression":{"type":"CallExpression","start":764,"end":808,"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":56}},"callee":{"type":"MemberExpression","start":764,"end":776,"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":24}},"object":{"type":"Identifier","start":764,"end":770,"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":18}},"name":"logger"},"property":{"type":"Identifier","start":771,"end":776,"loc":{"start":{"line":19,"column":19},"end":{"line":19,"column":24}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":777,"end":780,"loc":{"start":{"line":19,"column":25},"end":{"line":19,"column":28}},"name":"err"},{"type":"Literal","start":782,"end":807,"loc":{"start":{"line":19,"column":30},"end":{"line":19,"column":55}},"value":"jobs.cleanup.read.error","raw":"'jobs.cleanup.read.error'"}]}},{"type":"ReturnStatement","start":822,"end":829,"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":19}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":848,"end":913,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":73}},"expression":{"type":"CallExpression","start":848,"end":912,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":72}},"callee":{"type":"MemberExpression","start":848,"end":859,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":19}},"object":{"type":"Identifier","start":848,"end":854,"loc":{"start":{"line":22,"column":8},"end":{"line":22,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":855,"end":859,"loc":{"start":{"line":22,"column":15},"end":{"line":22,"column":19}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":860,"end":889,"loc":{"start":{"line":22,"column":20},"end":{"line":22,"column":49}},"expressions":[{"type":"MemberExpression","start":869,"end":881,"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":41}},"object":{"type":"Identifier","start":869,"end":874,"loc":{"start":{"line":22,"column":29},"end":{"line":22,"column":34}},"name":"files"},"property":{"type":"Identifier","start":875,"end":881,"loc":{"start":{"line":22,"column":35},"end":{"line":22,"column":41}},"name":"length"},"computed":false}],"quasis":[{"type":"TemplateElement","start":861,"end":867,"loc":{"start":{"line":22,"column":21},"end":{"line":22,"column":27}},"value":{"raw":"found ","cooked":"found "},"tail":false},{"type":"TemplateElement","start":882,"end":888,"loc":{"start":{"line":22,"column":42},"end":{"line":22,"column":48}},"value":{"raw":" files","cooked":" files"},"tail":true}]},{"type":"Literal","start":891,"end":911,"loc":{"start":{"line":22,"column":51},"end":{"line":22,"column":71}},"value":"jobs.cleanup.files","raw":"'jobs.cleanup.files'"}]}},{"type":"ExpressionStatement","start":922,"end":2271,"loc":{"start":{"line":23,"column":8},"end":{"line":50,"column":11}},"expression":{"type":"CallExpression","start":922,"end":2270,"loc":{"start":{"line":23,"column":8},"end":{"line":50,"column":10}},"callee":{"type":"MemberExpression","start":922,"end":935,"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":21}},"object":{"type":"Identifier","start":922,"end":927,"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":13}},"name":"files"},"property":{"type":"Identifier","start":928,"end":935,"loc":{"start":{"line":23,"column":14},"end":{"line":23,"column":21}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":936,"end":2269,"loc":{"start":{"line":23,"column":22},"end":{"line":50,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":937,"end":941,"loc":{"start":{"line":23,"column":23},"end":{"line":23,"column":27}},"name":"file"},{"type":"Identifier","start":943,"end":952,"loc":{"start":{"line":23,"column":29},"end":{"line":23,"column":38}},"name":"fileIndex"}],"body":{"type":"BlockStatement","start":957,"end":2269,"loc":{"start":{"line":23,"column":43},"end":{"line":50,"column":9}},"body":[{"type":"IfStatement","start":1205,"end":1359,"loc":{"start":{"line":27,"column":12},"end":{"line":30,"column":13}},"test":{"type":"UnaryExpression","start":1209,"end":1243,"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":50}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1210,"end":1243,"loc":{"start":{"line":27,"column":17},"end":{"line":27,"column":50}},"callee":{"type":"MemberExpression","start":1210,"end":1225,"loc":{"start":{"line":27,"column":17},"end":{"line":27,"column":32}},"object":{"type":"Identifier","start":1210,"end":1214,"loc":{"start":{"line":27,"column":17},"end":{"line":27,"column":21}},"name":"file"},"property":{"type":"Identifier","start":1215,"end":1225,"loc":{"start":{"line":27,"column":22},"end":{"line":27,"column":32}},"name":"startsWith"},"computed":false},"arguments":[{"type":"Identifier","start":1226,"end":1242,"loc":{"start":{"line":27,"column":33},"end":{"line":27,"column":49}},"name":"FILE_NAME_PREFIX"}]}},"consequent":{"type":"BlockStatement","start":1245,"end":1359,"loc":{"start":{"line":27,"column":52},"end":{"line":30,"column":13}},"body":[{"type":"ExpressionStatement","start":1263,"end":1321,"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":74}},"expression":{"type":"CallExpression","start":1263,"end":1320,"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":73}},"callee":{"type":"MemberExpression","start":1263,"end":1274,"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":27}},"object":{"type":"Identifier","start":1263,"end":1269,"loc":{"start":{"line":28,"column":16},"end":{"line":28,"column":22}},"name":"logger"},"property":{"type":"Identifier","start":1270,"end":1274,"loc":{"start":{"line":28,"column":23},"end":{"line":28,"column":27}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1275,"end":1298,"loc":{"start":{"line":28,"column":28},"end":{"line":28,"column":51}},"expressions":[{"type":"Identifier","start":1292,"end":1296,"loc":{"start":{"line":28,"column":45},"end":{"line":28,"column":49}},"name":"file"}],"quasis":[{"type":"TemplateElement","start":1276,"end":1290,"loc":{"start":{"line":28,"column":29},"end":{"line":28,"column":43}},"value":{"raw":"skipping file ","cooked":"skipping file "},"tail":false},{"type":"TemplateElement","start":1297,"end":1297,"loc":{"start":{"line":28,"column":50},"end":{"line":28,"column":50}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":1300,"end":1319,"loc":{"start":{"line":28,"column":53},"end":{"line":28,"column":72}},"value":"jobs.cleanup.skip","raw":"'jobs.cleanup.skip'"}]}},{"type":"ReturnStatement","start":1338,"end":1345,"loc":{"start":{"line":29,"column":16},"end":{"line":29,"column":23}},"argument":null}]},"alternate":null,"comments":[{"type":"Line","value":" if it does not contain FILE_NAME_PREFIX then it probably wasn't created by companion.","start":971,"end":1059,"loc":{"start":{"line":24,"column":12},"end":{"line":24,"column":100}}},{"type":"Line","value":" this is to avoid deleting unintended files, e.g if a wrong path was accidentally given","start":1072,"end":1161,"loc":{"start":{"line":25,"column":12},"end":{"line":25,"column":101}}},{"type":"Line","value":" by a developer.","start":1174,"end":1192,"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":30}}}]},{"type":"VariableDeclaration","start":1372,"end":1414,"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":54}},"declarations":[{"type":"VariableDeclarator","start":1378,"end":1413,"loc":{"start":{"line":31,"column":18},"end":{"line":31,"column":53}},"id":{"type":"Identifier","start":1378,"end":1386,"loc":{"start":{"line":31,"column":18},"end":{"line":31,"column":26}},"name":"fullPath"},"init":{"type":"CallExpression","start":1389,"end":1413,"loc":{"start":{"line":31,"column":29},"end":{"line":31,"column":53}},"callee":{"type":"MemberExpression","start":1389,"end":1398,"loc":{"start":{"line":31,"column":29},"end":{"line":31,"column":38}},"object":{"type":"Identifier","start":1389,"end":1393,"loc":{"start":{"line":31,"column":29},"end":{"line":31,"column":33}},"name":"path"},"property":{"type":"Identifier","start":1394,"end":1398,"loc":{"start":{"line":31,"column":34},"end":{"line":31,"column":38}},"name":"join"},"computed":false},"arguments":[{"type":"Identifier","start":1399,"end":1406,"loc":{"start":{"line":31,"column":39},"end":{"line":31,"column":46}},"name":"dirPath"},{"type":"Identifier","start":1408,"end":1412,"loc":{"start":{"line":31,"column":48},"end":{"line":31,"column":52}},"name":"file"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1427,"end":2259,"loc":{"start":{"line":32,"column":12},"end":{"line":49,"column":15}},"expression":{"type":"CallExpression","start":1427,"end":2258,"loc":{"start":{"line":32,"column":12},"end":{"line":49,"column":14}},"callee":{"type":"MemberExpression","start":1427,"end":1434,"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":19}},"object":{"type":"Identifier","start":1427,"end":1429,"loc":{"start":{"line":32,"column":12},"end":{"line":32,"column":14}},"name":"fs"},"property":{"type":"Identifier","start":1430,"end":1434,"loc":{"start":{"line":32,"column":15},"end":{"line":32,"column":19}},"name":"stat"},"computed":false},"arguments":[{"type":"Identifier","start":1435,"end":1443,"loc":{"start":{"line":32,"column":20},"end":{"line":32,"column":28}},"name":"fullPath"},{"type":"ArrowFunctionExpression","start":1445,"end":2257,"loc":{"start":{"line":32,"column":30},"end":{"line":49,"column":13}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1446,"end":1449,"loc":{"start":{"line":32,"column":31},"end":{"line":32,"column":34}},"name":"err"},{"type":"Identifier","start":1451,"end":1456,"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":41}},"name":"stats"}],"body":{"type":"BlockStatement","start":1461,"end":2257,"loc":{"start":{"line":32,"column":46},"end":{"line":49,"column":13}},"body":[{"type":"VariableDeclaration","start":1479,"end":1522,"loc":{"start":{"line":33,"column":16},"end":{"line":33,"column":59}},"declarations":[{"type":"VariableDeclarator","start":1485,"end":1521,"loc":{"start":{"line":33,"column":22},"end":{"line":33,"column":58}},"id":{"type":"Identifier","start":1485,"end":1499,"loc":{"start":{"line":33,"column":22},"end":{"line":33,"column":36}},"name":"twelveHoursAgo"},"init":{"type":"BinaryExpression","start":1502,"end":1521,"loc":{"start":{"line":33,"column":39},"end":{"line":33,"column":58}},"left":{"type":"BinaryExpression","start":1502,"end":1514,"loc":{"start":{"line":33,"column":39},"end":{"line":33,"column":51}},"left":{"type":"BinaryExpression","start":1502,"end":1509,"loc":{"start":{"line":33,"column":39},"end":{"line":33,"column":46}},"left":{"type":"Literal","start":1502,"end":1504,"loc":{"start":{"line":33,"column":39},"end":{"line":33,"column":41}},"value":12,"raw":"12"},"operator":"*","right":{"type":"Literal","start":1507,"end":1509,"loc":{"start":{"line":33,"column":44},"end":{"line":33,"column":46}},"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1512,"end":1514,"loc":{"start":{"line":33,"column":49},"end":{"line":33,"column":51}},"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1517,"end":1521,"loc":{"start":{"line":33,"column":54},"end":{"line":33,"column":58}},"value":1000,"raw":"1000"}}}],"kind":"const"},{"type":"IfStatement","start":1539,"end":1989,"loc":{"start":{"line":34,"column":16},"end":{"line":43,"column":17}},"test":{"type":"Identifier","start":1543,"end":1546,"loc":{"start":{"line":34,"column":20},"end":{"line":34,"column":23}},"name":"err"},"consequent":{"type":"BlockStatement","start":1548,"end":1790,"loc":{"start":{"line":34,"column":25},"end":{"line":39,"column":17}},"body":[{"type":"ExpressionStatement","start":1693,"end":1738,"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":65}},"expression":{"type":"CallExpression","start":1693,"end":1737,"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":64}},"callee":{"type":"MemberExpression","start":1693,"end":1705,"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":32}},"object":{"type":"Identifier","start":1693,"end":1699,"loc":{"start":{"line":37,"column":20},"end":{"line":37,"column":26}},"name":"logger"},"property":{"type":"Identifier","start":1700,"end":1705,"loc":{"start":{"line":37,"column":27},"end":{"line":37,"column":32}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":1706,"end":1709,"loc":{"start":{"line":37,"column":33},"end":{"line":37,"column":36}},"name":"err"},{"type":"Literal","start":1711,"end":1736,"loc":{"start":{"line":37,"column":38},"end":{"line":37,"column":63}},"value":"jobs.cleanup.stat.error","raw":"'jobs.cleanup.stat.error'"}]},"comments":[{"type":"Line","value":" we still delete the file if we can't get the stats","start":1570,"end":1623,"loc":{"start":{"line":35,"column":20},"end":{"line":35,"column":73}}},{"type":"Line","value":" but we also log the error","start":1644,"end":1672,"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":48}}}]}],"trailingComments":[{"type":"Line","value":" @ts-ignore","start":1759,"end":1772,"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":33}}}]},"alternate":{"type":"IfStatement","start":1812,"end":1989,"loc":{"start":{"line":40,"column":21},"end":{"line":43,"column":17}},"test":{"type":"BinaryExpression","start":1816,"end":1861,"loc":{"start":{"line":40,"column":25},"end":{"line":40,"column":70}},"left":{"type":"BinaryExpression","start":1817,"end":1843,"loc":{"start":{"line":40,"column":26},"end":{"line":40,"column":52}},"left":{"type":"NewExpression","start":1818,"end":1828,"loc":{"start":{"line":40,"column":27},"end":{"line":40,"column":37}},"callee":{"type":"Identifier","start":1822,"end":1826,"loc":{"start":{"line":40,"column":31},"end":{"line":40,"column":35}},"name":"Date"},"arguments":[]},"operator":"-","right":{"type":"MemberExpression","start":1832,"end":1843,"loc":{"start":{"line":40,"column":41},"end":{"line":40,"column":52}},"object":{"type":"Identifier","start":1832,"end":1837,"loc":{"start":{"line":40,"column":41},"end":{"line":40,"column":46}},"name":"stats"},"property":{"type":"Identifier","start":1838,"end":1843,"loc":{"start":{"line":40,"column":47},"end":{"line":40,"column":52}},"name":"mtime"},"computed":false}},"operator":"<","right":{"type":"Identifier","start":1847,"end":1861,"loc":{"start":{"line":40,"column":56},"end":{"line":40,"column":70}},"name":"twelveHoursAgo"}},"consequent":{"type":"BlockStatement","start":1863,"end":1989,"loc":{"start":{"line":40,"column":72},"end":{"line":43,"column":17}},"body":[{"type":"ExpressionStatement","start":1885,"end":1943,"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":78}},"expression":{"type":"CallExpression","start":1885,"end":1942,"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":77}},"callee":{"type":"MemberExpression","start":1885,"end":1896,"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":31}},"object":{"type":"Identifier","start":1885,"end":1891,"loc":{"start":{"line":41,"column":20},"end":{"line":41,"column":26}},"name":"logger"},"property":{"type":"Identifier","start":1892,"end":1896,"loc":{"start":{"line":41,"column":27},"end":{"line":41,"column":31}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1897,"end":1920,"loc":{"start":{"line":41,"column":32},"end":{"line":41,"column":55}},"expressions":[{"type":"Identifier","start":1914,"end":1918,"loc":{"start":{"line":41,"column":49},"end":{"line":41,"column":53}},"name":"file"}],"quasis":[{"type":"TemplateElement","start":1898,"end":1912,"loc":{"start":{"line":41,"column":33},"end":{"line":41,"column":47}},"value":{"raw":"skipping file ","cooked":"skipping file "},"tail":false},{"type":"TemplateElement","start":1919,"end":1919,"loc":{"start":{"line":41,"column":54},"end":{"line":41,"column":54}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":1922,"end":1941,"loc":{"start":{"line":41,"column":57},"end":{"line":41,"column":76}},"value":"jobs.cleanup.skip","raw":"'jobs.cleanup.skip'"}]}},{"type":"ReturnStatement","start":1964,"end":1971,"loc":{"start":{"line":42,"column":20},"end":{"line":42,"column":27}},"argument":null}]},"alternate":null}},{"type":"ExpressionStatement","start":2006,"end":2075,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":85}},"expression":{"type":"CallExpression","start":2006,"end":2074,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":84}},"callee":{"type":"MemberExpression","start":2006,"end":2017,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":27}},"object":{"type":"Identifier","start":2006,"end":2012,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":22}},"name":"logger"},"property":{"type":"Identifier","start":2013,"end":2017,"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":27}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":2018,"end":2041,"loc":{"start":{"line":44,"column":28},"end":{"line":44,"column":51}},"expressions":[{"type":"Identifier","start":2035,"end":2039,"loc":{"start":{"line":44,"column":45},"end":{"line":44,"column":49}},"name":"file"}],"quasis":[{"type":"TemplateElement","start":2019,"end":2033,"loc":{"start":{"line":44,"column":29},"end":{"line":44,"column":43}},"value":{"raw":"deleting file ","cooked":"deleting file "},"tail":false},{"type":"TemplateElement","start":2040,"end":2040,"loc":{"start":{"line":44,"column":50},"end":{"line":44,"column":50}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":2043,"end":2073,"loc":{"start":{"line":44,"column":53},"end":{"line":44,"column":83}},"value":"jobs.cleanup.progress.delete","raw":"'jobs.cleanup.progress.delete'"}]}},{"type":"ExpressionStatement","start":2092,"end":2243,"loc":{"start":{"line":45,"column":16},"end":{"line":48,"column":19}},"expression":{"type":"CallExpression","start":2092,"end":2242,"loc":{"start":{"line":45,"column":16},"end":{"line":48,"column":18}},"callee":{"type":"MemberExpression","start":2092,"end":2101,"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":25}},"object":{"type":"Identifier","start":2092,"end":2094,"loc":{"start":{"line":45,"column":16},"end":{"line":45,"column":18}},"name":"fs"},"property":{"type":"Identifier","start":2095,"end":2101,"loc":{"start":{"line":45,"column":19},"end":{"line":45,"column":25}},"name":"unlink"},"computed":false},"arguments":[{"type":"Identifier","start":2102,"end":2110,"loc":{"start":{"line":45,"column":26},"end":{"line":45,"column":34}},"name":"fullPath"},{"type":"ArrowFunctionExpression","start":2112,"end":2241,"loc":{"start":{"line":45,"column":36},"end":{"line":48,"column":17}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2113,"end":2116,"loc":{"start":{"line":45,"column":37},"end":{"line":45,"column":40}},"name":"err"}],"body":{"type":"BlockStatement","start":2121,"end":2241,"loc":{"start":{"line":45,"column":45},"end":{"line":48,"column":17}},"body":[{"type":"IfStatement","start":2143,"end":2223,"loc":{"start":{"line":46,"column":20},"end":{"line":47,"column":71}},"test":{"type":"Identifier","start":2147,"end":2150,"loc":{"start":{"line":46,"column":24},"end":{"line":46,"column":27}},"name":"err"},"consequent":{"type":"ExpressionStatement","start":2176,"end":2223,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":71}},"expression":{"type":"CallExpression","start":2176,"end":2222,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":70}},"callee":{"type":"MemberExpression","start":2176,"end":2188,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":36}},"object":{"type":"Identifier","start":2176,"end":2182,"loc":{"start":{"line":47,"column":24},"end":{"line":47,"column":30}},"name":"logger"},"property":{"type":"Identifier","start":2183,"end":2188,"loc":{"start":{"line":47,"column":31},"end":{"line":47,"column":36}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":2189,"end":2192,"loc":{"start":{"line":47,"column":37},"end":{"line":47,"column":40}},"name":"err"},{"type":"Literal","start":2194,"end":2221,"loc":{"start":{"line":47,"column":42},"end":{"line":47,"column":69}},"value":"jobs.cleanup.delete.error","raw":"'jobs.cleanup.delete.error'"}]}},"alternate":null}]}}]}}]}}]}}]}}]}}]}}]}}]}}}],"kind":"const"}],"sourceType":"script"}