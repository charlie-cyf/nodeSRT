{"type":"Program","start":0,"end":9047,"loc":{"start":{"line":1,"column":0},"end":{"line":292,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":40,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":40}},"declarations":[{"type":"VariableDeclarator","start":6,"end":40,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":40}},"id":{"type":"Identifier","start":6,"end":12,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":12}},"name":"router"},"init":{"type":"MemberExpression","start":15,"end":40,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":40}},"object":{"type":"CallExpression","start":15,"end":33,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":33}},"callee":{"type":"Identifier","start":15,"end":22,"loc":{"start":{"line":1,"column":15},"end":{"line":1,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":23,"end":32,"loc":{"start":{"line":1,"column":23},"end":{"line":1,"column":32}},"value":"express","raw":"'express'"}]},"property":{"type":"Identifier","start":34,"end":40,"loc":{"start":{"line":1,"column":34},"end":{"line":1,"column":40}},"name":"Router"},"computed":false}}],"kind":"const"},{"type":"ExpressionStatement","start":42,"end":8899,"loc":{"start":{"line":3,"column":0},"end":{"line":287,"column":1}},"expression":{"type":"AssignmentExpression","start":42,"end":8899,"loc":{"start":{"line":3,"column":0},"end":{"line":287,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":42,"end":56,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":14}},"object":{"type":"Identifier","start":42,"end":48,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":6}},"name":"module"},"property":{"type":"Identifier","start":49,"end":56,"loc":{"start":{"line":3,"column":7},"end":{"line":3,"column":14}},"name":"exports"},"computed":false},"right":{"type":"FunctionExpression","start":59,"end":8899,"loc":{"start":{"line":3,"column":17},"end":{"line":287,"column":1}},"id":{"type":"Identifier","start":68,"end":70,"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":28}},"name":"s3"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":72,"end":78,"loc":{"start":{"line":3,"column":30},"end":{"line":3,"column":36}},"name":"config"}],"body":{"type":"BlockStatement","start":80,"end":8899,"loc":{"start":{"line":3,"column":38},"end":{"line":287,"column":1}},"body":[{"type":"IfStatement","start":84,"end":190,"loc":{"start":{"line":4,"column":2},"end":{"line":6,"column":3}},"test":{"type":"BinaryExpression","start":88,"end":118,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":36}},"left":{"type":"UnaryExpression","start":88,"end":105,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":23}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":95,"end":105,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":23}},"object":{"type":"Identifier","start":95,"end":101,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":19}},"name":"config"},"property":{"type":"Identifier","start":102,"end":105,"loc":{"start":{"line":4,"column":20},"end":{"line":4,"column":23}},"name":"acl"},"computed":false}},"operator":"!==","right":{"type":"Literal","start":110,"end":118,"loc":{"start":{"line":4,"column":28},"end":{"line":4,"column":36}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":120,"end":190,"loc":{"start":{"line":4,"column":38},"end":{"line":6,"column":3}},"body":[{"type":"ThrowStatement","start":126,"end":186,"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":64}},"argument":{"type":"NewExpression","start":132,"end":186,"loc":{"start":{"line":5,"column":10},"end":{"line":5,"column":64}},"callee":{"type":"Identifier","start":136,"end":145,"loc":{"start":{"line":5,"column":14},"end":{"line":5,"column":23}},"name":"TypeError"},"arguments":[{"type":"Literal","start":146,"end":185,"loc":{"start":{"line":5,"column":24},"end":{"line":5,"column":63}},"value":"s3: The `acl` option must be a string","raw":"'s3: The `acl` option must be a string'"}]}}]},"alternate":null},{"type":"IfStatement","start":193,"end":309,"loc":{"start":{"line":7,"column":2},"end":{"line":9,"column":3}},"test":{"type":"BinaryExpression","start":197,"end":232,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":41}},"left":{"type":"UnaryExpression","start":197,"end":217,"loc":{"start":{"line":7,"column":6},"end":{"line":7,"column":26}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":204,"end":217,"loc":{"start":{"line":7,"column":13},"end":{"line":7,"column":26}},"object":{"type":"Identifier","start":204,"end":210,"loc":{"start":{"line":7,"column":13},"end":{"line":7,"column":19}},"name":"config"},"property":{"type":"Identifier","start":211,"end":217,"loc":{"start":{"line":7,"column":20},"end":{"line":7,"column":26}},"name":"getKey"},"computed":false}},"operator":"!==","right":{"type":"Literal","start":222,"end":232,"loc":{"start":{"line":7,"column":31},"end":{"line":7,"column":41}},"value":"function","raw":"'function'"}},"consequent":{"type":"BlockStatement","start":234,"end":309,"loc":{"start":{"line":7,"column":43},"end":{"line":9,"column":3}},"body":[{"type":"ThrowStatement","start":240,"end":305,"loc":{"start":{"line":8,"column":4},"end":{"line":8,"column":69}},"argument":{"type":"NewExpression","start":246,"end":305,"loc":{"start":{"line":8,"column":10},"end":{"line":8,"column":69}},"callee":{"type":"Identifier","start":250,"end":259,"loc":{"start":{"line":8,"column":14},"end":{"line":8,"column":23}},"name":"TypeError"},"arguments":[{"type":"Literal","start":260,"end":304,"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":68}},"value":"s3: The `getKey` option must be a function","raw":"'s3: The `getKey` option must be a function'"}]}}]},"alternate":null},{"type":"FunctionDeclaration","start":904,"end":1923,"loc":{"start":{"line":26,"column":2},"end":{"line":62,"column":3}},"id":{"type":"Identifier","start":913,"end":932,"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":30}},"name":"getUploadParameters"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":934,"end":937,"loc":{"start":{"line":26,"column":32},"end":{"line":26,"column":35}},"name":"req"},{"type":"Identifier","start":939,"end":942,"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":40}},"name":"res"},{"type":"Identifier","start":944,"end":948,"loc":{"start":{"line":26,"column":42},"end":{"line":26,"column":46}},"name":"next"}],"body":{"type":"BlockStatement","start":950,"end":1923,"loc":{"start":{"line":26,"column":48},"end":{"line":62,"column":3}},"body":[{"type":"VariableDeclaration","start":1044,"end":1081,"loc":{"start":{"line":28,"column":4},"end":{"line":28,"column":41}},"declarations":[{"type":"VariableDeclarator","start":1050,"end":1081,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":41}},"id":{"type":"Identifier","start":1050,"end":1056,"loc":{"start":{"line":28,"column":10},"end":{"line":28,"column":16}},"name":"client"},"init":{"type":"MemberExpression","start":1059,"end":1081,"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":41}},"object":{"type":"MemberExpression","start":1059,"end":1072,"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":32}},"object":{"type":"Identifier","start":1059,"end":1062,"loc":{"start":{"line":28,"column":19},"end":{"line":28,"column":22}},"name":"req"},"property":{"type":"Identifier","start":1063,"end":1072,"loc":{"start":{"line":28,"column":23},"end":{"line":28,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":1073,"end":1081,"loc":{"start":{"line":28,"column":33},"end":{"line":28,"column":41}},"name":"s3Client"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore The `companion` property is added by middleware before reaching here.","start":956,"end":1039,"loc":{"start":{"line":27,"column":4},"end":{"line":27,"column":87}}}]},{"type":"VariableDeclaration","start":1086,"end":1127,"loc":{"start":{"line":29,"column":4},"end":{"line":29,"column":45}},"declarations":[{"type":"VariableDeclarator","start":1092,"end":1127,"loc":{"start":{"line":29,"column":10},"end":{"line":29,"column":45}},"id":{"type":"Identifier","start":1092,"end":1100,"loc":{"start":{"line":29,"column":10},"end":{"line":29,"column":18}},"name":"metadata"},"init":{"type":"LogicalExpression","start":1103,"end":1127,"loc":{"start":{"line":29,"column":21},"end":{"line":29,"column":45}},"left":{"type":"MemberExpression","start":1103,"end":1121,"loc":{"start":{"line":29,"column":21},"end":{"line":29,"column":39}},"object":{"type":"MemberExpression","start":1103,"end":1112,"loc":{"start":{"line":29,"column":21},"end":{"line":29,"column":30}},"object":{"type":"Identifier","start":1103,"end":1106,"loc":{"start":{"line":29,"column":21},"end":{"line":29,"column":24}},"name":"req"},"property":{"type":"Identifier","start":1107,"end":1112,"loc":{"start":{"line":29,"column":25},"end":{"line":29,"column":30}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":1113,"end":1121,"loc":{"start":{"line":29,"column":31},"end":{"line":29,"column":39}},"name":"metadata"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":1125,"end":1127,"loc":{"start":{"line":29,"column":43},"end":{"line":29,"column":45}},"properties":[]}}}],"kind":"const"},{"type":"VariableDeclaration","start":1132,"end":1192,"loc":{"start":{"line":30,"column":4},"end":{"line":30,"column":64}},"declarations":[{"type":"VariableDeclarator","start":1138,"end":1192,"loc":{"start":{"line":30,"column":10},"end":{"line":30,"column":64}},"id":{"type":"Identifier","start":1138,"end":1141,"loc":{"start":{"line":30,"column":10},"end":{"line":30,"column":13}},"name":"key"},"init":{"type":"CallExpression","start":1144,"end":1192,"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":64}},"callee":{"type":"MemberExpression","start":1144,"end":1157,"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":29}},"object":{"type":"Identifier","start":1144,"end":1150,"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":22}},"name":"config"},"property":{"type":"Identifier","start":1151,"end":1157,"loc":{"start":{"line":30,"column":23},"end":{"line":30,"column":29}},"name":"getKey"},"computed":false},"arguments":[{"type":"Identifier","start":1158,"end":1161,"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":33}},"name":"req"},{"type":"MemberExpression","start":1163,"end":1181,"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":53}},"object":{"type":"MemberExpression","start":1163,"end":1172,"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":44}},"object":{"type":"Identifier","start":1163,"end":1166,"loc":{"start":{"line":30,"column":35},"end":{"line":30,"column":38}},"name":"req"},"property":{"type":"Identifier","start":1167,"end":1172,"loc":{"start":{"line":30,"column":39},"end":{"line":30,"column":44}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":1173,"end":1181,"loc":{"start":{"line":30,"column":45},"end":{"line":30,"column":53}},"name":"filename"},"computed":false},{"type":"Identifier","start":1183,"end":1191,"loc":{"start":{"line":30,"column":55},"end":{"line":30,"column":63}},"name":"metadata"}]}}],"kind":"const"},{"type":"IfStatement","start":1197,"end":1334,"loc":{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},"test":{"type":"BinaryExpression","start":1201,"end":1224,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":31}},"left":{"type":"UnaryExpression","start":1201,"end":1211,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":18}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":1208,"end":1211,"loc":{"start":{"line":31,"column":15},"end":{"line":31,"column":18}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":1216,"end":1224,"loc":{"start":{"line":31,"column":23},"end":{"line":31,"column":31}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":1226,"end":1334,"loc":{"start":{"line":31,"column":33},"end":{"line":33,"column":5}},"body":[{"type":"ReturnStatement","start":1234,"end":1328,"loc":{"start":{"line":32,"column":6},"end":{"line":32,"column":100}},"argument":{"type":"CallExpression","start":1241,"end":1328,"loc":{"start":{"line":32,"column":13},"end":{"line":32,"column":100}},"callee":{"type":"MemberExpression","start":1241,"end":1261,"loc":{"start":{"line":32,"column":13},"end":{"line":32,"column":33}},"object":{"type":"CallExpression","start":1241,"end":1256,"loc":{"start":{"line":32,"column":13},"end":{"line":32,"column":28}},"callee":{"type":"MemberExpression","start":1241,"end":1251,"loc":{"start":{"line":32,"column":13},"end":{"line":32,"column":23}},"object":{"type":"Identifier","start":1241,"end":1244,"loc":{"start":{"line":32,"column":13},"end":{"line":32,"column":16}},"name":"res"},"property":{"type":"Identifier","start":1245,"end":1251,"loc":{"start":{"line":32,"column":17},"end":{"line":32,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":1252,"end":1255,"loc":{"start":{"line":32,"column":24},"end":{"line":32,"column":27}},"value":500,"raw":"500"}]},"property":{"type":"Identifier","start":1257,"end":1261,"loc":{"start":{"line":32,"column":29},"end":{"line":32,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1262,"end":1327,"loc":{"start":{"line":32,"column":34},"end":{"line":32,"column":99}},"properties":[{"type":"Property","start":1264,"end":1325,"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":97}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1264,"end":1269,"loc":{"start":{"line":32,"column":36},"end":{"line":32,"column":41}},"name":"error"},"value":{"type":"Literal","start":1271,"end":1325,"loc":{"start":{"line":32,"column":43},"end":{"line":32,"column":97}},"value":"s3: filename returned from `getKey` must be a string","raw":"'s3: filename returned from `getKey` must be a string'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"VariableDeclaration","start":1340,"end":1474,"loc":{"start":{"line":35,"column":4},"end":{"line":40,"column":5}},"declarations":[{"type":"VariableDeclarator","start":1346,"end":1474,"loc":{"start":{"line":35,"column":10},"end":{"line":40,"column":5}},"id":{"type":"Identifier","start":1346,"end":1352,"loc":{"start":{"line":35,"column":10},"end":{"line":35,"column":16}},"name":"fields"},"init":{"type":"ObjectExpression","start":1355,"end":1474,"loc":{"start":{"line":35,"column":19},"end":{"line":40,"column":5}},"properties":[{"type":"Property","start":1363,"end":1378,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":21}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1363,"end":1366,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":9}},"name":"acl"},"value":{"type":"MemberExpression","start":1368,"end":1378,"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":21}},"object":{"type":"Identifier","start":1368,"end":1374,"loc":{"start":{"line":36,"column":11},"end":{"line":36,"column":17}},"name":"config"},"property":{"type":"Identifier","start":1375,"end":1378,"loc":{"start":{"line":36,"column":18},"end":{"line":36,"column":21}},"name":"acl"},"computed":false},"kind":"init"},{"type":"Property","start":1386,"end":1394,"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1386,"end":1389,"loc":{"start":{"line":37,"column":6},"end":{"line":37,"column":9}},"name":"key"},"value":{"type":"Identifier","start":1391,"end":1394,"loc":{"start":{"line":37,"column":11},"end":{"line":37,"column":14}},"name":"key"},"kind":"init"},{"type":"Property","start":1402,"end":1430,"loc":{"start":{"line":38,"column":6},"end":{"line":38,"column":34}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1402,"end":1423,"loc":{"start":{"line":38,"column":6},"end":{"line":38,"column":27}},"name":"success_action_status"},"value":{"type":"Literal","start":1425,"end":1430,"loc":{"start":{"line":38,"column":29},"end":{"line":38,"column":34}},"value":"201","raw":"'201'"},"kind":"init"},{"type":"Property","start":1438,"end":1468,"loc":{"start":{"line":39,"column":6},"end":{"line":39,"column":36}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Literal","start":1438,"end":1452,"loc":{"start":{"line":39,"column":6},"end":{"line":39,"column":20}},"value":"content-type","raw":"'content-type'"},"value":{"type":"MemberExpression","start":1454,"end":1468,"loc":{"start":{"line":39,"column":22},"end":{"line":39,"column":36}},"object":{"type":"MemberExpression","start":1454,"end":1463,"loc":{"start":{"line":39,"column":22},"end":{"line":39,"column":31}},"object":{"type":"Identifier","start":1454,"end":1457,"loc":{"start":{"line":39,"column":22},"end":{"line":39,"column":25}},"name":"req"},"property":{"type":"Identifier","start":1458,"end":1463,"loc":{"start":{"line":39,"column":26},"end":{"line":39,"column":31}},"name":"query"},"computed":false},"property":{"type":"Identifier","start":1464,"end":1468,"loc":{"start":{"line":39,"column":32},"end":{"line":39,"column":36}},"name":"type"},"computed":false},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1480,"end":1577,"loc":{"start":{"line":42,"column":4},"end":{"line":44,"column":6}},"expression":{"type":"CallExpression","start":1480,"end":1577,"loc":{"start":{"line":42,"column":4},"end":{"line":44,"column":6}},"callee":{"type":"MemberExpression","start":1480,"end":1509,"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":33}},"object":{"type":"CallExpression","start":1480,"end":1501,"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":25}},"callee":{"type":"MemberExpression","start":1480,"end":1491,"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":15}},"object":{"type":"Identifier","start":1480,"end":1486,"loc":{"start":{"line":42,"column":4},"end":{"line":42,"column":10}},"name":"Object"},"property":{"type":"Identifier","start":1487,"end":1491,"loc":{"start":{"line":42,"column":11},"end":{"line":42,"column":15}},"name":"keys"},"computed":false},"arguments":[{"type":"Identifier","start":1492,"end":1500,"loc":{"start":{"line":42,"column":16},"end":{"line":42,"column":24}},"name":"metadata"}]},"property":{"type":"Identifier","start":1502,"end":1509,"loc":{"start":{"line":42,"column":26},"end":{"line":42,"column":33}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":1510,"end":1576,"loc":{"start":{"line":42,"column":34},"end":{"line":44,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1511,"end":1514,"loc":{"start":{"line":42,"column":35},"end":{"line":42,"column":38}},"name":"key"}],"body":{"type":"BlockStatement","start":1519,"end":1576,"loc":{"start":{"line":42,"column":43},"end":{"line":44,"column":5}},"body":[{"type":"ExpressionStatement","start":1527,"end":1570,"loc":{"start":{"line":43,"column":6},"end":{"line":43,"column":49}},"expression":{"type":"AssignmentExpression","start":1527,"end":1570,"loc":{"start":{"line":43,"column":6},"end":{"line":43,"column":49}},"operator":"=","left":{"type":"MemberExpression","start":1527,"end":1554,"loc":{"start":{"line":43,"column":6},"end":{"line":43,"column":33}},"object":{"type":"Identifier","start":1527,"end":1533,"loc":{"start":{"line":43,"column":6},"end":{"line":43,"column":12}},"name":"fields"},"property":{"type":"TemplateLiteral","start":1534,"end":1553,"loc":{"start":{"line":43,"column":13},"end":{"line":43,"column":32}},"expressions":[{"type":"Identifier","start":1548,"end":1551,"loc":{"start":{"line":43,"column":27},"end":{"line":43,"column":30}},"name":"key"}],"quasis":[{"type":"TemplateElement","start":1535,"end":1546,"loc":{"start":{"line":43,"column":14},"end":{"line":43,"column":25}},"value":{"raw":"x-amz-meta-","cooked":"x-amz-meta-"},"tail":false},{"type":"TemplateElement","start":1552,"end":1552,"loc":{"start":{"line":43,"column":31},"end":{"line":43,"column":31}},"value":{"raw":"","cooked":""},"tail":true}]},"computed":true},"right":{"type":"MemberExpression","start":1557,"end":1570,"loc":{"start":{"line":43,"column":36},"end":{"line":43,"column":49}},"object":{"type":"Identifier","start":1557,"end":1565,"loc":{"start":{"line":43,"column":36},"end":{"line":43,"column":44}},"name":"metadata"},"property":{"type":"Identifier","start":1566,"end":1569,"loc":{"start":{"line":43,"column":45},"end":{"line":43,"column":48}},"name":"key"},"computed":true}}}]}}]}},{"type":"ExpressionStatement","start":1583,"end":1919,"loc":{"start":{"line":46,"column":4},"end":{"line":61,"column":6}},"expression":{"type":"CallExpression","start":1583,"end":1919,"loc":{"start":{"line":46,"column":4},"end":{"line":61,"column":6}},"callee":{"type":"MemberExpression","start":1583,"end":1609,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":30}},"object":{"type":"Identifier","start":1583,"end":1589,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":10}},"name":"client"},"property":{"type":"Identifier","start":1590,"end":1609,"loc":{"start":{"line":46,"column":11},"end":{"line":46,"column":30}},"name":"createPresignedPost"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1610,"end":1735,"loc":{"start":{"line":46,"column":31},"end":{"line":51,"column":5}},"properties":[{"type":"Property","start":1618,"end":1639,"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1618,"end":1624,"loc":{"start":{"line":47,"column":6},"end":{"line":47,"column":12}},"name":"Bucket"},"value":{"type":"MemberExpression","start":1626,"end":1639,"loc":{"start":{"line":47,"column":14},"end":{"line":47,"column":27}},"object":{"type":"Identifier","start":1626,"end":1632,"loc":{"start":{"line":47,"column":14},"end":{"line":47,"column":20}},"name":"config"},"property":{"type":"Identifier","start":1633,"end":1639,"loc":{"start":{"line":47,"column":21},"end":{"line":47,"column":27}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":1647,"end":1670,"loc":{"start":{"line":48,"column":6},"end":{"line":48,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1647,"end":1654,"loc":{"start":{"line":48,"column":6},"end":{"line":48,"column":13}},"name":"Expires"},"value":{"type":"MemberExpression","start":1656,"end":1670,"loc":{"start":{"line":48,"column":15},"end":{"line":48,"column":29}},"object":{"type":"Identifier","start":1656,"end":1662,"loc":{"start":{"line":48,"column":15},"end":{"line":48,"column":21}},"name":"config"},"property":{"type":"Identifier","start":1663,"end":1670,"loc":{"start":{"line":48,"column":22},"end":{"line":48,"column":29}},"name":"expires"},"computed":false},"kind":"init"},{"type":"Property","start":1678,"end":1692,"loc":{"start":{"line":49,"column":6},"end":{"line":49,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1678,"end":1684,"loc":{"start":{"line":49,"column":6},"end":{"line":49,"column":12}},"name":"Fields"},"value":{"type":"Identifier","start":1686,"end":1692,"loc":{"start":{"line":49,"column":14},"end":{"line":49,"column":20}},"name":"fields"},"kind":"init"},{"type":"Property","start":1700,"end":1729,"loc":{"start":{"line":50,"column":6},"end":{"line":50,"column":35}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1700,"end":1710,"loc":{"start":{"line":50,"column":6},"end":{"line":50,"column":16}},"name":"Conditions"},"value":{"type":"MemberExpression","start":1712,"end":1729,"loc":{"start":{"line":50,"column":18},"end":{"line":50,"column":35}},"object":{"type":"Identifier","start":1712,"end":1718,"loc":{"start":{"line":50,"column":18},"end":{"line":50,"column":24}},"name":"config"},"property":{"type":"Identifier","start":1719,"end":1729,"loc":{"start":{"line":50,"column":25},"end":{"line":50,"column":35}},"name":"conditions"},"computed":false},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":1737,"end":1918,"loc":{"start":{"line":51,"column":7},"end":{"line":61,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1738,"end":1741,"loc":{"start":{"line":51,"column":8},"end":{"line":51,"column":11}},"name":"err"},{"type":"Identifier","start":1743,"end":1747,"loc":{"start":{"line":51,"column":13},"end":{"line":51,"column":17}},"name":"data"}],"body":{"type":"BlockStatement","start":1752,"end":1918,"loc":{"start":{"line":51,"column":22},"end":{"line":61,"column":5}},"body":[{"type":"IfStatement","start":1760,"end":1811,"loc":{"start":{"line":52,"column":6},"end":{"line":55,"column":7}},"test":{"type":"Identifier","start":1764,"end":1767,"loc":{"start":{"line":52,"column":10},"end":{"line":52,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":1769,"end":1811,"loc":{"start":{"line":52,"column":15},"end":{"line":55,"column":7}},"body":[{"type":"ExpressionStatement","start":1779,"end":1788,"loc":{"start":{"line":53,"column":8},"end":{"line":53,"column":17}},"expression":{"type":"CallExpression","start":1779,"end":1788,"loc":{"start":{"line":53,"column":8},"end":{"line":53,"column":17}},"callee":{"type":"Identifier","start":1779,"end":1783,"loc":{"start":{"line":53,"column":8},"end":{"line":53,"column":12}},"name":"next"},"arguments":[{"type":"Identifier","start":1784,"end":1787,"loc":{"start":{"line":53,"column":13},"end":{"line":53,"column":16}},"name":"err"}]}},{"type":"ReturnStatement","start":1797,"end":1803,"loc":{"start":{"line":54,"column":8},"end":{"line":54,"column":14}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":1818,"end":1912,"loc":{"start":{"line":56,"column":6},"end":{"line":60,"column":8}},"expression":{"type":"CallExpression","start":1818,"end":1912,"loc":{"start":{"line":56,"column":6},"end":{"line":60,"column":8}},"callee":{"type":"MemberExpression","start":1818,"end":1826,"loc":{"start":{"line":56,"column":6},"end":{"line":56,"column":14}},"object":{"type":"Identifier","start":1818,"end":1821,"loc":{"start":{"line":56,"column":6},"end":{"line":56,"column":9}},"name":"res"},"property":{"type":"Identifier","start":1822,"end":1826,"loc":{"start":{"line":56,"column":10},"end":{"line":56,"column":14}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":1827,"end":1911,"loc":{"start":{"line":56,"column":15},"end":{"line":60,"column":7}},"properties":[{"type":"Property","start":1837,"end":1851,"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":22}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1837,"end":1843,"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":14}},"name":"method"},"value":{"type":"Literal","start":1845,"end":1851,"loc":{"start":{"line":57,"column":16},"end":{"line":57,"column":22}},"value":"post","raw":"'post'"},"kind":"init"},{"type":"Property","start":1861,"end":1874,"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":21}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1861,"end":1864,"loc":{"start":{"line":58,"column":8},"end":{"line":58,"column":11}},"name":"url"},"value":{"type":"MemberExpression","start":1866,"end":1874,"loc":{"start":{"line":58,"column":13},"end":{"line":58,"column":21}},"object":{"type":"Identifier","start":1866,"end":1870,"loc":{"start":{"line":58,"column":13},"end":{"line":58,"column":17}},"name":"data"},"property":{"type":"Identifier","start":1871,"end":1874,"loc":{"start":{"line":58,"column":18},"end":{"line":58,"column":21}},"name":"url"},"computed":false},"kind":"init"},{"type":"Property","start":1884,"end":1903,"loc":{"start":{"line":59,"column":8},"end":{"line":59,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1884,"end":1890,"loc":{"start":{"line":59,"column":8},"end":{"line":59,"column":14}},"name":"fields"},"value":{"type":"MemberExpression","start":1892,"end":1903,"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":27}},"object":{"type":"Identifier","start":1892,"end":1896,"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":20}},"name":"data"},"property":{"type":"Identifier","start":1897,"end":1903,"loc":{"start":{"line":59,"column":21},"end":{"line":59,"column":27}},"name":"fields"},"computed":false},"kind":"init"}]}]}}]}}]}}]},"comments":[{"type":"Block","value":"*\n   * Get upload paramaters for a simple direct upload.\n   *\n   * Expected query parameters:\n   *  - filename - The name of the file, given to the `config.getKey`\n   *    option to determine the object key name in the S3 bucket.\n   *  - type - The MIME type of the file.\n   *  - metadata - Key/value pairs configuring S3 metadata. Both must be ASCII-safe.\n   *    Query parameters are formatted like `metadata[name]=value`.\n   *\n   * Response JSON:\n   *  - method - The HTTP method to use to upload.\n   *  - url - The URL to upload to.\n   *  - fields - Form fields to send along.\n   ","start":313,"end":901,"loc":{"start":{"line":11,"column":2},"end":{"line":25,"column":5}}}]},{"type":"FunctionDeclaration","start":2519,"end":3442,"loc":{"start":{"line":78,"column":2},"end":{"line":107,"column":3}},"id":{"type":"Identifier","start":2528,"end":2549,"loc":{"start":{"line":78,"column":11},"end":{"line":78,"column":32}},"name":"createMultipartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2551,"end":2554,"loc":{"start":{"line":78,"column":34},"end":{"line":78,"column":37}},"name":"req"},{"type":"Identifier","start":2556,"end":2559,"loc":{"start":{"line":78,"column":39},"end":{"line":78,"column":42}},"name":"res"},{"type":"Identifier","start":2561,"end":2565,"loc":{"start":{"line":78,"column":44},"end":{"line":78,"column":48}},"name":"next"}],"body":{"type":"BlockStatement","start":2567,"end":3442,"loc":{"start":{"line":78,"column":50},"end":{"line":107,"column":3}},"body":[{"type":"VariableDeclaration","start":2661,"end":2698,"loc":{"start":{"line":80,"column":4},"end":{"line":80,"column":41}},"declarations":[{"type":"VariableDeclarator","start":2667,"end":2698,"loc":{"start":{"line":80,"column":10},"end":{"line":80,"column":41}},"id":{"type":"Identifier","start":2667,"end":2673,"loc":{"start":{"line":80,"column":10},"end":{"line":80,"column":16}},"name":"client"},"init":{"type":"MemberExpression","start":2676,"end":2698,"loc":{"start":{"line":80,"column":19},"end":{"line":80,"column":41}},"object":{"type":"MemberExpression","start":2676,"end":2689,"loc":{"start":{"line":80,"column":19},"end":{"line":80,"column":32}},"object":{"type":"Identifier","start":2676,"end":2679,"loc":{"start":{"line":80,"column":19},"end":{"line":80,"column":22}},"name":"req"},"property":{"type":"Identifier","start":2680,"end":2689,"loc":{"start":{"line":80,"column":23},"end":{"line":80,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":2690,"end":2698,"loc":{"start":{"line":80,"column":33},"end":{"line":80,"column":41}},"name":"s3Client"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore The `companion` property is added by middleware before reaching here.","start":2573,"end":2656,"loc":{"start":{"line":79,"column":4},"end":{"line":79,"column":87}}}]},{"type":"VariableDeclaration","start":2703,"end":2777,"loc":{"start":{"line":81,"column":4},"end":{"line":81,"column":78}},"declarations":[{"type":"VariableDeclarator","start":2709,"end":2777,"loc":{"start":{"line":81,"column":10},"end":{"line":81,"column":78}},"id":{"type":"Identifier","start":2709,"end":2712,"loc":{"start":{"line":81,"column":10},"end":{"line":81,"column":13}},"name":"key"},"init":{"type":"CallExpression","start":2715,"end":2777,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":78}},"callee":{"type":"MemberExpression","start":2715,"end":2728,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":29}},"object":{"type":"Identifier","start":2715,"end":2721,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":22}},"name":"config"},"property":{"type":"Identifier","start":2722,"end":2728,"loc":{"start":{"line":81,"column":23},"end":{"line":81,"column":29}},"name":"getKey"},"computed":false},"arguments":[{"type":"Identifier","start":2729,"end":2732,"loc":{"start":{"line":81,"column":30},"end":{"line":81,"column":33}},"name":"req"},{"type":"MemberExpression","start":2734,"end":2751,"loc":{"start":{"line":81,"column":35},"end":{"line":81,"column":52}},"object":{"type":"MemberExpression","start":2734,"end":2742,"loc":{"start":{"line":81,"column":35},"end":{"line":81,"column":43}},"object":{"type":"Identifier","start":2734,"end":2737,"loc":{"start":{"line":81,"column":35},"end":{"line":81,"column":38}},"name":"req"},"property":{"type":"Identifier","start":2738,"end":2742,"loc":{"start":{"line":81,"column":39},"end":{"line":81,"column":43}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":2743,"end":2751,"loc":{"start":{"line":81,"column":44},"end":{"line":81,"column":52}},"name":"filename"},"computed":false},{"type":"LogicalExpression","start":2753,"end":2776,"loc":{"start":{"line":81,"column":54},"end":{"line":81,"column":77}},"left":{"type":"MemberExpression","start":2753,"end":2770,"loc":{"start":{"line":81,"column":54},"end":{"line":81,"column":71}},"object":{"type":"MemberExpression","start":2753,"end":2761,"loc":{"start":{"line":81,"column":54},"end":{"line":81,"column":62}},"object":{"type":"Identifier","start":2753,"end":2756,"loc":{"start":{"line":81,"column":54},"end":{"line":81,"column":57}},"name":"req"},"property":{"type":"Identifier","start":2757,"end":2761,"loc":{"start":{"line":81,"column":58},"end":{"line":81,"column":62}},"name":"body"},"computed":false},"property":{"type":"Identifier","start":2762,"end":2770,"loc":{"start":{"line":81,"column":63},"end":{"line":81,"column":71}},"name":"metadata"},"computed":false},"operator":"||","right":{"type":"ObjectExpression","start":2774,"end":2776,"loc":{"start":{"line":81,"column":75},"end":{"line":81,"column":77}},"properties":[]}}]}}],"kind":"const"},{"type":"VariableDeclaration","start":2782,"end":2817,"loc":{"start":{"line":82,"column":4},"end":{"line":82,"column":39}},"declarations":[{"type":"VariableDeclarator","start":2788,"end":2817,"loc":{"start":{"line":82,"column":10},"end":{"line":82,"column":39}},"id":{"type":"ObjectPattern","start":2788,"end":2806,"loc":{"start":{"line":82,"column":10},"end":{"line":82,"column":28}},"properties":[{"type":"Property","start":2790,"end":2794,"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":16}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2790,"end":2794,"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":16}},"name":"type"},"kind":"init","value":{"type":"Identifier","start":2790,"end":2794,"loc":{"start":{"line":82,"column":12},"end":{"line":82,"column":16}},"name":"type"}},{"type":"Property","start":2796,"end":2804,"loc":{"start":{"line":82,"column":18},"end":{"line":82,"column":26}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":2796,"end":2804,"loc":{"start":{"line":82,"column":18},"end":{"line":82,"column":26}},"name":"metadata"},"kind":"init","value":{"type":"Identifier","start":2796,"end":2804,"loc":{"start":{"line":82,"column":18},"end":{"line":82,"column":26}},"name":"metadata"}}]},"init":{"type":"MemberExpression","start":2809,"end":2817,"loc":{"start":{"line":82,"column":31},"end":{"line":82,"column":39}},"object":{"type":"Identifier","start":2809,"end":2812,"loc":{"start":{"line":82,"column":31},"end":{"line":82,"column":34}},"name":"req"},"property":{"type":"Identifier","start":2813,"end":2817,"loc":{"start":{"line":82,"column":35},"end":{"line":82,"column":39}},"name":"body"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":2822,"end":2959,"loc":{"start":{"line":83,"column":4},"end":{"line":85,"column":5}},"test":{"type":"BinaryExpression","start":2826,"end":2849,"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":31}},"left":{"type":"UnaryExpression","start":2826,"end":2836,"loc":{"start":{"line":83,"column":8},"end":{"line":83,"column":18}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":2833,"end":2836,"loc":{"start":{"line":83,"column":15},"end":{"line":83,"column":18}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":2841,"end":2849,"loc":{"start":{"line":83,"column":23},"end":{"line":83,"column":31}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":2851,"end":2959,"loc":{"start":{"line":83,"column":33},"end":{"line":85,"column":5}},"body":[{"type":"ReturnStatement","start":2859,"end":2953,"loc":{"start":{"line":84,"column":6},"end":{"line":84,"column":100}},"argument":{"type":"CallExpression","start":2866,"end":2953,"loc":{"start":{"line":84,"column":13},"end":{"line":84,"column":100}},"callee":{"type":"MemberExpression","start":2866,"end":2886,"loc":{"start":{"line":84,"column":13},"end":{"line":84,"column":33}},"object":{"type":"CallExpression","start":2866,"end":2881,"loc":{"start":{"line":84,"column":13},"end":{"line":84,"column":28}},"callee":{"type":"MemberExpression","start":2866,"end":2876,"loc":{"start":{"line":84,"column":13},"end":{"line":84,"column":23}},"object":{"type":"Identifier","start":2866,"end":2869,"loc":{"start":{"line":84,"column":13},"end":{"line":84,"column":16}},"name":"res"},"property":{"type":"Identifier","start":2870,"end":2876,"loc":{"start":{"line":84,"column":17},"end":{"line":84,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":2877,"end":2880,"loc":{"start":{"line":84,"column":24},"end":{"line":84,"column":27}},"value":500,"raw":"500"}]},"property":{"type":"Identifier","start":2882,"end":2886,"loc":{"start":{"line":84,"column":29},"end":{"line":84,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":2887,"end":2952,"loc":{"start":{"line":84,"column":34},"end":{"line":84,"column":99}},"properties":[{"type":"Property","start":2889,"end":2950,"loc":{"start":{"line":84,"column":36},"end":{"line":84,"column":97}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":2889,"end":2894,"loc":{"start":{"line":84,"column":36},"end":{"line":84,"column":41}},"name":"error"},"value":{"type":"Literal","start":2896,"end":2950,"loc":{"start":{"line":84,"column":43},"end":{"line":84,"column":97}},"value":"s3: filename returned from `getKey` must be a string","raw":"'s3: filename returned from `getKey` must be a string'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":2964,"end":3083,"loc":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"test":{"type":"BinaryExpression","start":2968,"end":2992,"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":32}},"left":{"type":"UnaryExpression","start":2968,"end":2979,"loc":{"start":{"line":86,"column":8},"end":{"line":86,"column":19}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":2975,"end":2979,"loc":{"start":{"line":86,"column":15},"end":{"line":86,"column":19}},"name":"type"}},"operator":"!==","right":{"type":"Literal","start":2984,"end":2992,"loc":{"start":{"line":86,"column":24},"end":{"line":86,"column":32}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":2994,"end":3083,"loc":{"start":{"line":86,"column":34},"end":{"line":88,"column":5}},"body":[{"type":"ReturnStatement","start":3002,"end":3077,"loc":{"start":{"line":87,"column":6},"end":{"line":87,"column":81}},"argument":{"type":"CallExpression","start":3009,"end":3077,"loc":{"start":{"line":87,"column":13},"end":{"line":87,"column":81}},"callee":{"type":"MemberExpression","start":3009,"end":3029,"loc":{"start":{"line":87,"column":13},"end":{"line":87,"column":33}},"object":{"type":"CallExpression","start":3009,"end":3024,"loc":{"start":{"line":87,"column":13},"end":{"line":87,"column":28}},"callee":{"type":"MemberExpression","start":3009,"end":3019,"loc":{"start":{"line":87,"column":13},"end":{"line":87,"column":23}},"object":{"type":"Identifier","start":3009,"end":3012,"loc":{"start":{"line":87,"column":13},"end":{"line":87,"column":16}},"name":"res"},"property":{"type":"Identifier","start":3013,"end":3019,"loc":{"start":{"line":87,"column":17},"end":{"line":87,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":3020,"end":3023,"loc":{"start":{"line":87,"column":24},"end":{"line":87,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":3025,"end":3029,"loc":{"start":{"line":87,"column":29},"end":{"line":87,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3030,"end":3076,"loc":{"start":{"line":87,"column":34},"end":{"line":87,"column":80}},"properties":[{"type":"Property","start":3032,"end":3074,"loc":{"start":{"line":87,"column":36},"end":{"line":87,"column":78}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3032,"end":3037,"loc":{"start":{"line":87,"column":36},"end":{"line":87,"column":41}},"name":"error"},"value":{"type":"Literal","start":3039,"end":3074,"loc":{"start":{"line":87,"column":43},"end":{"line":87,"column":78}},"value":"s3: content type must be a string","raw":"'s3: content type must be a string'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":3089,"end":3438,"loc":{"start":{"line":90,"column":4},"end":{"line":106,"column":6}},"expression":{"type":"CallExpression","start":3089,"end":3438,"loc":{"start":{"line":90,"column":4},"end":{"line":106,"column":6}},"callee":{"type":"MemberExpression","start":3089,"end":3117,"loc":{"start":{"line":90,"column":4},"end":{"line":90,"column":32}},"object":{"type":"Identifier","start":3089,"end":3095,"loc":{"start":{"line":90,"column":4},"end":{"line":90,"column":10}},"name":"client"},"property":{"type":"Identifier","start":3096,"end":3117,"loc":{"start":{"line":90,"column":11},"end":{"line":90,"column":32}},"name":"createMultipartUpload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3118,"end":3274,"loc":{"start":{"line":90,"column":33},"end":{"line":97,"column":5}},"properties":[{"type":"Property","start":3126,"end":3147,"loc":{"start":{"line":91,"column":6},"end":{"line":91,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3126,"end":3132,"loc":{"start":{"line":91,"column":6},"end":{"line":91,"column":12}},"name":"Bucket"},"value":{"type":"MemberExpression","start":3134,"end":3147,"loc":{"start":{"line":91,"column":14},"end":{"line":91,"column":27}},"object":{"type":"Identifier","start":3134,"end":3140,"loc":{"start":{"line":91,"column":14},"end":{"line":91,"column":20}},"name":"config"},"property":{"type":"Identifier","start":3141,"end":3147,"loc":{"start":{"line":91,"column":21},"end":{"line":91,"column":27}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":3155,"end":3163,"loc":{"start":{"line":92,"column":6},"end":{"line":92,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3155,"end":3158,"loc":{"start":{"line":92,"column":6},"end":{"line":92,"column":9}},"name":"Key"},"value":{"type":"Identifier","start":3160,"end":3163,"loc":{"start":{"line":92,"column":11},"end":{"line":92,"column":14}},"name":"key"},"kind":"init"},{"type":"Property","start":3171,"end":3186,"loc":{"start":{"line":93,"column":6},"end":{"line":93,"column":21}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3171,"end":3174,"loc":{"start":{"line":93,"column":6},"end":{"line":93,"column":9}},"name":"ACL"},"value":{"type":"MemberExpression","start":3176,"end":3186,"loc":{"start":{"line":93,"column":11},"end":{"line":93,"column":21}},"object":{"type":"Identifier","start":3176,"end":3182,"loc":{"start":{"line":93,"column":11},"end":{"line":93,"column":17}},"name":"config"},"property":{"type":"Identifier","start":3183,"end":3186,"loc":{"start":{"line":93,"column":18},"end":{"line":93,"column":21}},"name":"acl"},"computed":false},"kind":"init"},{"type":"Property","start":3194,"end":3211,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":23}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3194,"end":3205,"loc":{"start":{"line":94,"column":6},"end":{"line":94,"column":17}},"name":"ContentType"},"value":{"type":"Identifier","start":3207,"end":3211,"loc":{"start":{"line":94,"column":19},"end":{"line":94,"column":23}},"name":"type"},"kind":"init"},{"type":"Property","start":3219,"end":3237,"loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3219,"end":3227,"loc":{"start":{"line":95,"column":6},"end":{"line":95,"column":14}},"name":"Metadata"},"value":{"type":"Identifier","start":3229,"end":3237,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":24}},"name":"metadata"},"kind":"init"},{"type":"Property","start":3245,"end":3268,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3245,"end":3252,"loc":{"start":{"line":96,"column":6},"end":{"line":96,"column":13}},"name":"Expires"},"value":{"type":"MemberExpression","start":3254,"end":3268,"loc":{"start":{"line":96,"column":15},"end":{"line":96,"column":29}},"object":{"type":"Identifier","start":3254,"end":3260,"loc":{"start":{"line":96,"column":15},"end":{"line":96,"column":21}},"name":"config"},"property":{"type":"Identifier","start":3261,"end":3268,"loc":{"start":{"line":96,"column":22},"end":{"line":96,"column":29}},"name":"expires"},"computed":false},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":3276,"end":3437,"loc":{"start":{"line":97,"column":7},"end":{"line":106,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3277,"end":3280,"loc":{"start":{"line":97,"column":8},"end":{"line":97,"column":11}},"name":"err"},{"type":"Identifier","start":3282,"end":3286,"loc":{"start":{"line":97,"column":13},"end":{"line":97,"column":17}},"name":"data"}],"body":{"type":"BlockStatement","start":3291,"end":3437,"loc":{"start":{"line":97,"column":22},"end":{"line":106,"column":5}},"body":[{"type":"IfStatement","start":3299,"end":3350,"loc":{"start":{"line":98,"column":6},"end":{"line":101,"column":7}},"test":{"type":"Identifier","start":3303,"end":3306,"loc":{"start":{"line":98,"column":10},"end":{"line":98,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":3308,"end":3350,"loc":{"start":{"line":98,"column":15},"end":{"line":101,"column":7}},"body":[{"type":"ExpressionStatement","start":3318,"end":3327,"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":17}},"expression":{"type":"CallExpression","start":3318,"end":3327,"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":17}},"callee":{"type":"Identifier","start":3318,"end":3322,"loc":{"start":{"line":99,"column":8},"end":{"line":99,"column":12}},"name":"next"},"arguments":[{"type":"Identifier","start":3323,"end":3326,"loc":{"start":{"line":99,"column":13},"end":{"line":99,"column":16}},"name":"err"}]}},{"type":"ReturnStatement","start":3336,"end":3342,"loc":{"start":{"line":100,"column":8},"end":{"line":100,"column":14}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":3357,"end":3431,"loc":{"start":{"line":102,"column":6},"end":{"line":105,"column":8}},"expression":{"type":"CallExpression","start":3357,"end":3431,"loc":{"start":{"line":102,"column":6},"end":{"line":105,"column":8}},"callee":{"type":"MemberExpression","start":3357,"end":3365,"loc":{"start":{"line":102,"column":6},"end":{"line":102,"column":14}},"object":{"type":"Identifier","start":3357,"end":3360,"loc":{"start":{"line":102,"column":6},"end":{"line":102,"column":9}},"name":"res"},"property":{"type":"Identifier","start":3361,"end":3365,"loc":{"start":{"line":102,"column":10},"end":{"line":102,"column":14}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":3366,"end":3430,"loc":{"start":{"line":102,"column":15},"end":{"line":105,"column":7}},"properties":[{"type":"Property","start":3376,"end":3389,"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":21}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3376,"end":3379,"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":11}},"name":"key"},"value":{"type":"MemberExpression","start":3381,"end":3389,"loc":{"start":{"line":103,"column":13},"end":{"line":103,"column":21}},"object":{"type":"Identifier","start":3381,"end":3385,"loc":{"start":{"line":103,"column":13},"end":{"line":103,"column":17}},"name":"data"},"property":{"type":"Identifier","start":3386,"end":3389,"loc":{"start":{"line":103,"column":18},"end":{"line":103,"column":21}},"name":"Key"},"computed":false},"kind":"init"},{"type":"Property","start":3399,"end":3422,"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":31}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":3399,"end":3407,"loc":{"start":{"line":104,"column":8},"end":{"line":104,"column":16}},"name":"uploadId"},"value":{"type":"MemberExpression","start":3409,"end":3422,"loc":{"start":{"line":104,"column":18},"end":{"line":104,"column":31}},"object":{"type":"Identifier","start":3409,"end":3413,"loc":{"start":{"line":104,"column":18},"end":{"line":104,"column":22}},"name":"data"},"property":{"type":"Identifier","start":3414,"end":3422,"loc":{"start":{"line":104,"column":23},"end":{"line":104,"column":31}},"name":"UploadId"},"computed":false},"kind":"init"}]}]}}]}}]}}]},"comments":[{"type":"Block","value":"*\n   * Create an S3 multipart upload. With this, files can be uploaded in chunks of 5MB+ each.\n   *\n   * Expected JSON body:\n   *  - filename - The name of the file, given to the `config.getKey`\n   *    option to determine the object key name in the S3 bucket.\n   *  - type - The MIME type of the file.\n   *  - metadata - An object with the key/value pairs to set as metadata.\n   *    Keys and values must be ASCII-safe for S3.\n   *\n   * Response JSON:\n   *  - key - The object key in the S3 bucket.\n   *  - uploadId - The ID of this multipart upload, to be used in later requests.\n   ","start":1927,"end":2516,"loc":{"start":{"line":64,"column":2},"end":{"line":77,"column":5}}}]},{"type":"FunctionDeclaration","start":3921,"end":4917,"loc":{"start":{"line":122,"column":2},"end":{"line":161,"column":3}},"id":{"type":"Identifier","start":3930,"end":3946,"loc":{"start":{"line":122,"column":11},"end":{"line":122,"column":27}},"name":"getUploadedParts"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3948,"end":3951,"loc":{"start":{"line":122,"column":29},"end":{"line":122,"column":32}},"name":"req"},{"type":"Identifier","start":3953,"end":3956,"loc":{"start":{"line":122,"column":34},"end":{"line":122,"column":37}},"name":"res"},{"type":"Identifier","start":3958,"end":3962,"loc":{"start":{"line":122,"column":39},"end":{"line":122,"column":43}},"name":"next"}],"body":{"type":"BlockStatement","start":3964,"end":4917,"loc":{"start":{"line":122,"column":45},"end":{"line":161,"column":3}},"body":[{"type":"VariableDeclaration","start":4058,"end":4095,"loc":{"start":{"line":124,"column":4},"end":{"line":124,"column":41}},"declarations":[{"type":"VariableDeclarator","start":4064,"end":4095,"loc":{"start":{"line":124,"column":10},"end":{"line":124,"column":41}},"id":{"type":"Identifier","start":4064,"end":4070,"loc":{"start":{"line":124,"column":10},"end":{"line":124,"column":16}},"name":"client"},"init":{"type":"MemberExpression","start":4073,"end":4095,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":41}},"object":{"type":"MemberExpression","start":4073,"end":4086,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":32}},"object":{"type":"Identifier","start":4073,"end":4076,"loc":{"start":{"line":124,"column":19},"end":{"line":124,"column":22}},"name":"req"},"property":{"type":"Identifier","start":4077,"end":4086,"loc":{"start":{"line":124,"column":23},"end":{"line":124,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":4087,"end":4095,"loc":{"start":{"line":124,"column":33},"end":{"line":124,"column":41}},"name":"s3Client"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore The `companion` property is added by middleware before reaching here.","start":3970,"end":4053,"loc":{"start":{"line":123,"column":4},"end":{"line":123,"column":87}}}]},{"type":"VariableDeclaration","start":4100,"end":4131,"loc":{"start":{"line":125,"column":4},"end":{"line":125,"column":35}},"declarations":[{"type":"VariableDeclarator","start":4106,"end":4131,"loc":{"start":{"line":125,"column":10},"end":{"line":125,"column":35}},"id":{"type":"ObjectPattern","start":4106,"end":4118,"loc":{"start":{"line":125,"column":10},"end":{"line":125,"column":22}},"properties":[{"type":"Property","start":4108,"end":4116,"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4108,"end":4116,"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":20}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":4108,"end":4116,"loc":{"start":{"line":125,"column":12},"end":{"line":125,"column":20}},"name":"uploadId"}}]},"init":{"type":"MemberExpression","start":4121,"end":4131,"loc":{"start":{"line":125,"column":25},"end":{"line":125,"column":35}},"object":{"type":"Identifier","start":4121,"end":4124,"loc":{"start":{"line":125,"column":25},"end":{"line":125,"column":28}},"name":"req"},"property":{"type":"Identifier","start":4125,"end":4131,"loc":{"start":{"line":125,"column":29},"end":{"line":125,"column":35}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":4136,"end":4161,"loc":{"start":{"line":126,"column":4},"end":{"line":126,"column":29}},"declarations":[{"type":"VariableDeclarator","start":4142,"end":4161,"loc":{"start":{"line":126,"column":10},"end":{"line":126,"column":29}},"id":{"type":"ObjectPattern","start":4142,"end":4149,"loc":{"start":{"line":126,"column":10},"end":{"line":126,"column":17}},"properties":[{"type":"Property","start":4144,"end":4147,"loc":{"start":{"line":126,"column":12},"end":{"line":126,"column":15}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":4144,"end":4147,"loc":{"start":{"line":126,"column":12},"end":{"line":126,"column":15}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":4144,"end":4147,"loc":{"start":{"line":126,"column":12},"end":{"line":126,"column":15}},"name":"key"}}]},"init":{"type":"MemberExpression","start":4152,"end":4161,"loc":{"start":{"line":126,"column":20},"end":{"line":126,"column":29}},"object":{"type":"Identifier","start":4152,"end":4155,"loc":{"start":{"line":126,"column":20},"end":{"line":126,"column":23}},"name":"req"},"property":{"type":"Identifier","start":4156,"end":4161,"loc":{"start":{"line":126,"column":24},"end":{"line":126,"column":29}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":4167,"end":4335,"loc":{"start":{"line":128,"column":4},"end":{"line":130,"column":5}},"test":{"type":"BinaryExpression","start":4171,"end":4194,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":31}},"left":{"type":"UnaryExpression","start":4171,"end":4181,"loc":{"start":{"line":128,"column":8},"end":{"line":128,"column":18}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":4178,"end":4181,"loc":{"start":{"line":128,"column":15},"end":{"line":128,"column":18}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":4186,"end":4194,"loc":{"start":{"line":128,"column":23},"end":{"line":128,"column":31}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":4196,"end":4335,"loc":{"start":{"line":128,"column":33},"end":{"line":130,"column":5}},"body":[{"type":"ReturnStatement","start":4204,"end":4329,"loc":{"start":{"line":129,"column":6},"end":{"line":129,"column":131}},"argument":{"type":"CallExpression","start":4211,"end":4329,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":131}},"callee":{"type":"MemberExpression","start":4211,"end":4231,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":33}},"object":{"type":"CallExpression","start":4211,"end":4226,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":28}},"callee":{"type":"MemberExpression","start":4211,"end":4221,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":23}},"object":{"type":"Identifier","start":4211,"end":4214,"loc":{"start":{"line":129,"column":13},"end":{"line":129,"column":16}},"name":"res"},"property":{"type":"Identifier","start":4215,"end":4221,"loc":{"start":{"line":129,"column":17},"end":{"line":129,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":4222,"end":4225,"loc":{"start":{"line":129,"column":24},"end":{"line":129,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":4227,"end":4231,"loc":{"start":{"line":129,"column":29},"end":{"line":129,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":4232,"end":4328,"loc":{"start":{"line":129,"column":34},"end":{"line":129,"column":130}},"properties":[{"type":"Property","start":4234,"end":4326,"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":128}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4234,"end":4239,"loc":{"start":{"line":129,"column":36},"end":{"line":129,"column":41}},"name":"error"},"value":{"type":"Literal","start":4241,"end":4326,"loc":{"start":{"line":129,"column":43},"end":{"line":129,"column":128}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"VariableDeclaration","start":4341,"end":4355,"loc":{"start":{"line":132,"column":4},"end":{"line":132,"column":18}},"declarations":[{"type":"VariableDeclarator","start":4345,"end":4355,"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":18}},"id":{"type":"Identifier","start":4345,"end":4350,"loc":{"start":{"line":132,"column":8},"end":{"line":132,"column":13}},"name":"parts"},"init":{"type":"ArrayExpression","start":4353,"end":4355,"loc":{"start":{"line":132,"column":16},"end":{"line":132,"column":18}},"elements":[]}}],"kind":"let"},{"type":"ExpressionStatement","start":4360,"end":4376,"loc":{"start":{"line":133,"column":4},"end":{"line":133,"column":20}},"expression":{"type":"CallExpression","start":4360,"end":4376,"loc":{"start":{"line":133,"column":4},"end":{"line":133,"column":20}},"callee":{"type":"Identifier","start":4360,"end":4373,"loc":{"start":{"line":133,"column":4},"end":{"line":133,"column":17}},"name":"listPartsPage"},"arguments":[{"type":"Literal","start":4374,"end":4375,"loc":{"start":{"line":133,"column":18},"end":{"line":133,"column":19}},"value":0,"raw":"0"}]}},{"type":"FunctionDeclaration","start":4382,"end":4861,"loc":{"start":{"line":135,"column":4},"end":{"line":156,"column":5}},"id":{"type":"Identifier","start":4391,"end":4404,"loc":{"start":{"line":135,"column":13},"end":{"line":135,"column":26}},"name":"listPartsPage"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4406,"end":4413,"loc":{"start":{"line":135,"column":28},"end":{"line":135,"column":35}},"name":"startAt"}],"body":{"type":"BlockStatement","start":4415,"end":4861,"loc":{"start":{"line":135,"column":37},"end":{"line":156,"column":5}},"body":[{"type":"ExpressionStatement","start":4423,"end":4855,"loc":{"start":{"line":136,"column":6},"end":{"line":155,"column":8}},"expression":{"type":"CallExpression","start":4423,"end":4855,"loc":{"start":{"line":136,"column":6},"end":{"line":155,"column":8}},"callee":{"type":"MemberExpression","start":4423,"end":4439,"loc":{"start":{"line":136,"column":6},"end":{"line":136,"column":22}},"object":{"type":"Identifier","start":4423,"end":4429,"loc":{"start":{"line":136,"column":6},"end":{"line":136,"column":12}},"name":"client"},"property":{"type":"Identifier","start":4430,"end":4439,"loc":{"start":{"line":136,"column":13},"end":{"line":136,"column":22}},"name":"listParts"},"computed":false},"arguments":[{"type":"ObjectExpression","start":4440,"end":4560,"loc":{"start":{"line":136,"column":23},"end":{"line":141,"column":7}},"properties":[{"type":"Property","start":4450,"end":4471,"loc":{"start":{"line":137,"column":8},"end":{"line":137,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4450,"end":4456,"loc":{"start":{"line":137,"column":8},"end":{"line":137,"column":14}},"name":"Bucket"},"value":{"type":"MemberExpression","start":4458,"end":4471,"loc":{"start":{"line":137,"column":16},"end":{"line":137,"column":29}},"object":{"type":"Identifier","start":4458,"end":4464,"loc":{"start":{"line":137,"column":16},"end":{"line":137,"column":22}},"name":"config"},"property":{"type":"Identifier","start":4465,"end":4471,"loc":{"start":{"line":137,"column":23},"end":{"line":137,"column":29}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":4481,"end":4489,"loc":{"start":{"line":138,"column":8},"end":{"line":138,"column":16}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4481,"end":4484,"loc":{"start":{"line":138,"column":8},"end":{"line":138,"column":11}},"name":"Key"},"value":{"type":"Identifier","start":4486,"end":4489,"loc":{"start":{"line":138,"column":13},"end":{"line":138,"column":16}},"name":"key"},"kind":"init"},{"type":"Property","start":4499,"end":4517,"loc":{"start":{"line":139,"column":8},"end":{"line":139,"column":26}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4499,"end":4507,"loc":{"start":{"line":139,"column":8},"end":{"line":139,"column":16}},"name":"UploadId"},"value":{"type":"Identifier","start":4509,"end":4517,"loc":{"start":{"line":139,"column":18},"end":{"line":139,"column":26}},"name":"uploadId"},"kind":"init"},{"type":"Property","start":4527,"end":4552,"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":33}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":4527,"end":4543,"loc":{"start":{"line":140,"column":8},"end":{"line":140,"column":24}},"name":"PartNumberMarker"},"value":{"type":"Identifier","start":4545,"end":4552,"loc":{"start":{"line":140,"column":26},"end":{"line":140,"column":33}},"name":"startAt"},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":4562,"end":4854,"loc":{"start":{"line":141,"column":9},"end":{"line":155,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4563,"end":4566,"loc":{"start":{"line":141,"column":10},"end":{"line":141,"column":13}},"name":"err"},{"type":"Identifier","start":4568,"end":4572,"loc":{"start":{"line":141,"column":15},"end":{"line":141,"column":19}},"name":"data"}],"body":{"type":"BlockStatement","start":4577,"end":4854,"loc":{"start":{"line":141,"column":24},"end":{"line":155,"column":7}},"body":[{"type":"IfStatement","start":4587,"end":4644,"loc":{"start":{"line":142,"column":8},"end":{"line":145,"column":9}},"test":{"type":"Identifier","start":4591,"end":4594,"loc":{"start":{"line":142,"column":12},"end":{"line":142,"column":15}},"name":"err"},"consequent":{"type":"BlockStatement","start":4596,"end":4644,"loc":{"start":{"line":142,"column":17},"end":{"line":145,"column":9}},"body":[{"type":"ExpressionStatement","start":4608,"end":4617,"loc":{"start":{"line":143,"column":10},"end":{"line":143,"column":19}},"expression":{"type":"CallExpression","start":4608,"end":4617,"loc":{"start":{"line":143,"column":10},"end":{"line":143,"column":19}},"callee":{"type":"Identifier","start":4608,"end":4612,"loc":{"start":{"line":143,"column":10},"end":{"line":143,"column":14}},"name":"next"},"arguments":[{"type":"Identifier","start":4613,"end":4616,"loc":{"start":{"line":143,"column":15},"end":{"line":143,"column":18}},"name":"err"}]}},{"type":"ReturnStatement","start":4628,"end":4634,"loc":{"start":{"line":144,"column":10},"end":{"line":144,"column":16}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":4654,"end":4686,"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":40}},"expression":{"type":"AssignmentExpression","start":4654,"end":4686,"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":40}},"operator":"=","left":{"type":"Identifier","start":4654,"end":4659,"loc":{"start":{"line":147,"column":8},"end":{"line":147,"column":13}},"name":"parts"},"right":{"type":"CallExpression","start":4662,"end":4686,"loc":{"start":{"line":147,"column":16},"end":{"line":147,"column":40}},"callee":{"type":"MemberExpression","start":4662,"end":4674,"loc":{"start":{"line":147,"column":16},"end":{"line":147,"column":28}},"object":{"type":"Identifier","start":4662,"end":4667,"loc":{"start":{"line":147,"column":16},"end":{"line":147,"column":21}},"name":"parts"},"property":{"type":"Identifier","start":4668,"end":4674,"loc":{"start":{"line":147,"column":22},"end":{"line":147,"column":28}},"name":"concat"},"computed":false},"arguments":[{"type":"MemberExpression","start":4675,"end":4685,"loc":{"start":{"line":147,"column":29},"end":{"line":147,"column":39}},"object":{"type":"Identifier","start":4675,"end":4679,"loc":{"start":{"line":147,"column":29},"end":{"line":147,"column":33}},"name":"data"},"property":{"type":"Identifier","start":4680,"end":4685,"loc":{"start":{"line":147,"column":34},"end":{"line":147,"column":39}},"name":"Parts"},"computed":false}]}}},{"type":"IfStatement","start":4696,"end":4846,"loc":{"start":{"line":149,"column":8},"end":{"line":154,"column":9}},"test":{"type":"MemberExpression","start":4700,"end":4716,"loc":{"start":{"line":149,"column":12},"end":{"line":149,"column":28}},"object":{"type":"Identifier","start":4700,"end":4704,"loc":{"start":{"line":149,"column":12},"end":{"line":149,"column":16}},"name":"data"},"property":{"type":"Identifier","start":4705,"end":4716,"loc":{"start":{"line":149,"column":17},"end":{"line":149,"column":28}},"name":"IsTruncated"},"computed":false},"consequent":{"type":"BlockStatement","start":4718,"end":4812,"loc":{"start":{"line":149,"column":30},"end":{"line":152,"column":9}},"body":[{"type":"ExpressionStatement","start":4762,"end":4802,"loc":{"start":{"line":151,"column":10},"end":{"line":151,"column":50}},"expression":{"type":"CallExpression","start":4762,"end":4802,"loc":{"start":{"line":151,"column":10},"end":{"line":151,"column":50}},"callee":{"type":"Identifier","start":4762,"end":4775,"loc":{"start":{"line":151,"column":10},"end":{"line":151,"column":23}},"name":"listPartsPage"},"arguments":[{"type":"MemberExpression","start":4776,"end":4801,"loc":{"start":{"line":151,"column":24},"end":{"line":151,"column":49}},"object":{"type":"Identifier","start":4776,"end":4780,"loc":{"start":{"line":151,"column":24},"end":{"line":151,"column":28}},"name":"data"},"property":{"type":"Identifier","start":4781,"end":4801,"loc":{"start":{"line":151,"column":29},"end":{"line":151,"column":49}},"name":"NextPartNumberMarker"},"computed":false}]},"comments":[{"type":"Line","value":" Get the next page.","start":4730,"end":4751,"loc":{"start":{"line":150,"column":10},"end":{"line":150,"column":31}}}]}]},"alternate":{"type":"BlockStatement","start":4818,"end":4846,"loc":{"start":{"line":152,"column":15},"end":{"line":154,"column":9}},"body":[{"type":"ExpressionStatement","start":4830,"end":4836,"loc":{"start":{"line":153,"column":10},"end":{"line":153,"column":16}},"expression":{"type":"CallExpression","start":4830,"end":4836,"loc":{"start":{"line":153,"column":10},"end":{"line":153,"column":16}},"callee":{"type":"Identifier","start":4830,"end":4834,"loc":{"start":{"line":153,"column":10},"end":{"line":153,"column":14}},"name":"done"},"arguments":[]}}]}}]}}]}}]}},{"type":"FunctionDeclaration","start":4867,"end":4913,"loc":{"start":{"line":158,"column":4},"end":{"line":160,"column":5}},"id":{"type":"Identifier","start":4876,"end":4880,"loc":{"start":{"line":158,"column":13},"end":{"line":158,"column":17}},"name":"done"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":4884,"end":4913,"loc":{"start":{"line":158,"column":21},"end":{"line":160,"column":5}},"body":[{"type":"ExpressionStatement","start":4892,"end":4907,"loc":{"start":{"line":159,"column":6},"end":{"line":159,"column":21}},"expression":{"type":"CallExpression","start":4892,"end":4907,"loc":{"start":{"line":159,"column":6},"end":{"line":159,"column":21}},"callee":{"type":"MemberExpression","start":4892,"end":4900,"loc":{"start":{"line":159,"column":6},"end":{"line":159,"column":14}},"object":{"type":"Identifier","start":4892,"end":4895,"loc":{"start":{"line":159,"column":6},"end":{"line":159,"column":9}},"name":"res"},"property":{"type":"Identifier","start":4896,"end":4900,"loc":{"start":{"line":159,"column":10},"end":{"line":159,"column":14}},"name":"json"},"computed":false},"arguments":[{"type":"Identifier","start":4901,"end":4906,"loc":{"start":{"line":159,"column":15},"end":{"line":159,"column":20}},"name":"parts"}]}}]}}]},"comments":[{"type":"Block","value":"*\n   * List parts that have been fully uploaded so far.\n   *\n   * Expected URL parameters:\n   *  - uploadId - The uploadId returned from `createMultipartUpload`.\n   * Expected query parameters:\n   *  - key - The object key in the S3 bucket.\n   * Response JSON:\n   *  - An array of objects representing parts:\n   *     - PartNumber - the index of this part.\n   *     - ETag - a hash of this part's contents, used to refer to it.\n   *     - Size - size of this part.\n   ","start":3446,"end":3918,"loc":{"start":{"line":109,"column":2},"end":{"line":121,"column":5}}}]},{"type":"FunctionDeclaration","start":5315,"end":6192,"loc":{"start":{"line":174,"column":2},"end":{"line":201,"column":3}},"id":{"type":"Identifier","start":5324,"end":5338,"loc":{"start":{"line":174,"column":11},"end":{"line":174,"column":25}},"name":"signPartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":5340,"end":5343,"loc":{"start":{"line":174,"column":27},"end":{"line":174,"column":30}},"name":"req"},{"type":"Identifier","start":5345,"end":5348,"loc":{"start":{"line":174,"column":32},"end":{"line":174,"column":35}},"name":"res"},{"type":"Identifier","start":5350,"end":5354,"loc":{"start":{"line":174,"column":37},"end":{"line":174,"column":41}},"name":"next"}],"body":{"type":"BlockStatement","start":5356,"end":6192,"loc":{"start":{"line":174,"column":43},"end":{"line":201,"column":3}},"body":[{"type":"VariableDeclaration","start":5450,"end":5487,"loc":{"start":{"line":176,"column":4},"end":{"line":176,"column":41}},"declarations":[{"type":"VariableDeclarator","start":5456,"end":5487,"loc":{"start":{"line":176,"column":10},"end":{"line":176,"column":41}},"id":{"type":"Identifier","start":5456,"end":5462,"loc":{"start":{"line":176,"column":10},"end":{"line":176,"column":16}},"name":"client"},"init":{"type":"MemberExpression","start":5465,"end":5487,"loc":{"start":{"line":176,"column":19},"end":{"line":176,"column":41}},"object":{"type":"MemberExpression","start":5465,"end":5478,"loc":{"start":{"line":176,"column":19},"end":{"line":176,"column":32}},"object":{"type":"Identifier","start":5465,"end":5468,"loc":{"start":{"line":176,"column":19},"end":{"line":176,"column":22}},"name":"req"},"property":{"type":"Identifier","start":5469,"end":5478,"loc":{"start":{"line":176,"column":23},"end":{"line":176,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":5479,"end":5487,"loc":{"start":{"line":176,"column":33},"end":{"line":176,"column":41}},"name":"s3Client"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore The `companion` property is added by middleware before reaching here.","start":5362,"end":5445,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":87}}}]},{"type":"VariableDeclaration","start":5492,"end":5535,"loc":{"start":{"line":177,"column":4},"end":{"line":177,"column":47}},"declarations":[{"type":"VariableDeclarator","start":5498,"end":5535,"loc":{"start":{"line":177,"column":10},"end":{"line":177,"column":47}},"id":{"type":"ObjectPattern","start":5498,"end":5522,"loc":{"start":{"line":177,"column":10},"end":{"line":177,"column":34}},"properties":[{"type":"Property","start":5500,"end":5508,"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5500,"end":5508,"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":20}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":5500,"end":5508,"loc":{"start":{"line":177,"column":12},"end":{"line":177,"column":20}},"name":"uploadId"}},{"type":"Property","start":5510,"end":5520,"loc":{"start":{"line":177,"column":22},"end":{"line":177,"column":32}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5510,"end":5520,"loc":{"start":{"line":177,"column":22},"end":{"line":177,"column":32}},"name":"partNumber"},"kind":"init","value":{"type":"Identifier","start":5510,"end":5520,"loc":{"start":{"line":177,"column":22},"end":{"line":177,"column":32}},"name":"partNumber"}}]},"init":{"type":"MemberExpression","start":5525,"end":5535,"loc":{"start":{"line":177,"column":37},"end":{"line":177,"column":47}},"object":{"type":"Identifier","start":5525,"end":5528,"loc":{"start":{"line":177,"column":37},"end":{"line":177,"column":40}},"name":"req"},"property":{"type":"Identifier","start":5529,"end":5535,"loc":{"start":{"line":177,"column":41},"end":{"line":177,"column":47}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":5540,"end":5565,"loc":{"start":{"line":178,"column":4},"end":{"line":178,"column":29}},"declarations":[{"type":"VariableDeclarator","start":5546,"end":5565,"loc":{"start":{"line":178,"column":10},"end":{"line":178,"column":29}},"id":{"type":"ObjectPattern","start":5546,"end":5553,"loc":{"start":{"line":178,"column":10},"end":{"line":178,"column":17}},"properties":[{"type":"Property","start":5548,"end":5551,"loc":{"start":{"line":178,"column":12},"end":{"line":178,"column":15}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":5548,"end":5551,"loc":{"start":{"line":178,"column":12},"end":{"line":178,"column":15}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":5548,"end":5551,"loc":{"start":{"line":178,"column":12},"end":{"line":178,"column":15}},"name":"key"}}]},"init":{"type":"MemberExpression","start":5556,"end":5565,"loc":{"start":{"line":178,"column":20},"end":{"line":178,"column":29}},"object":{"type":"Identifier","start":5556,"end":5559,"loc":{"start":{"line":178,"column":20},"end":{"line":178,"column":23}},"name":"req"},"property":{"type":"Identifier","start":5560,"end":5565,"loc":{"start":{"line":178,"column":24},"end":{"line":178,"column":29}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":5571,"end":5739,"loc":{"start":{"line":180,"column":4},"end":{"line":182,"column":5}},"test":{"type":"BinaryExpression","start":5575,"end":5598,"loc":{"start":{"line":180,"column":8},"end":{"line":180,"column":31}},"left":{"type":"UnaryExpression","start":5575,"end":5585,"loc":{"start":{"line":180,"column":8},"end":{"line":180,"column":18}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":5582,"end":5585,"loc":{"start":{"line":180,"column":15},"end":{"line":180,"column":18}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":5590,"end":5598,"loc":{"start":{"line":180,"column":23},"end":{"line":180,"column":31}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":5600,"end":5739,"loc":{"start":{"line":180,"column":33},"end":{"line":182,"column":5}},"body":[{"type":"ReturnStatement","start":5608,"end":5733,"loc":{"start":{"line":181,"column":6},"end":{"line":181,"column":131}},"argument":{"type":"CallExpression","start":5615,"end":5733,"loc":{"start":{"line":181,"column":13},"end":{"line":181,"column":131}},"callee":{"type":"MemberExpression","start":5615,"end":5635,"loc":{"start":{"line":181,"column":13},"end":{"line":181,"column":33}},"object":{"type":"CallExpression","start":5615,"end":5630,"loc":{"start":{"line":181,"column":13},"end":{"line":181,"column":28}},"callee":{"type":"MemberExpression","start":5615,"end":5625,"loc":{"start":{"line":181,"column":13},"end":{"line":181,"column":23}},"object":{"type":"Identifier","start":5615,"end":5618,"loc":{"start":{"line":181,"column":13},"end":{"line":181,"column":16}},"name":"res"},"property":{"type":"Identifier","start":5619,"end":5625,"loc":{"start":{"line":181,"column":17},"end":{"line":181,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":5626,"end":5629,"loc":{"start":{"line":181,"column":24},"end":{"line":181,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":5631,"end":5635,"loc":{"start":{"line":181,"column":29},"end":{"line":181,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":5636,"end":5732,"loc":{"start":{"line":181,"column":34},"end":{"line":181,"column":130}},"properties":[{"type":"Property","start":5638,"end":5730,"loc":{"start":{"line":181,"column":36},"end":{"line":181,"column":128}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5638,"end":5643,"loc":{"start":{"line":181,"column":36},"end":{"line":181,"column":41}},"name":"error"},"value":{"type":"Literal","start":5645,"end":5730,"loc":{"start":{"line":181,"column":43},"end":{"line":181,"column":128}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":5744,"end":5888,"loc":{"start":{"line":183,"column":4},"end":{"line":185,"column":5}},"test":{"type":"UnaryExpression","start":5748,"end":5773,"loc":{"start":{"line":183,"column":8},"end":{"line":183,"column":33}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":5749,"end":5773,"loc":{"start":{"line":183,"column":9},"end":{"line":183,"column":33}},"callee":{"type":"Identifier","start":5749,"end":5757,"loc":{"start":{"line":183,"column":9},"end":{"line":183,"column":17}},"name":"parseInt"},"arguments":[{"type":"Identifier","start":5758,"end":5768,"loc":{"start":{"line":183,"column":18},"end":{"line":183,"column":28}},"name":"partNumber"},{"type":"Literal","start":5770,"end":5772,"loc":{"start":{"line":183,"column":30},"end":{"line":183,"column":32}},"value":10,"raw":"10"}]}},"consequent":{"type":"BlockStatement","start":5775,"end":5888,"loc":{"start":{"line":183,"column":35},"end":{"line":185,"column":5}},"body":[{"type":"ReturnStatement","start":5783,"end":5882,"loc":{"start":{"line":184,"column":6},"end":{"line":184,"column":105}},"argument":{"type":"CallExpression","start":5790,"end":5882,"loc":{"start":{"line":184,"column":13},"end":{"line":184,"column":105}},"callee":{"type":"MemberExpression","start":5790,"end":5810,"loc":{"start":{"line":184,"column":13},"end":{"line":184,"column":33}},"object":{"type":"CallExpression","start":5790,"end":5805,"loc":{"start":{"line":184,"column":13},"end":{"line":184,"column":28}},"callee":{"type":"MemberExpression","start":5790,"end":5800,"loc":{"start":{"line":184,"column":13},"end":{"line":184,"column":23}},"object":{"type":"Identifier","start":5790,"end":5793,"loc":{"start":{"line":184,"column":13},"end":{"line":184,"column":16}},"name":"res"},"property":{"type":"Identifier","start":5794,"end":5800,"loc":{"start":{"line":184,"column":17},"end":{"line":184,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":5801,"end":5804,"loc":{"start":{"line":184,"column":24},"end":{"line":184,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":5806,"end":5810,"loc":{"start":{"line":184,"column":29},"end":{"line":184,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":5811,"end":5881,"loc":{"start":{"line":184,"column":34},"end":{"line":184,"column":104}},"properties":[{"type":"Property","start":5813,"end":5879,"loc":{"start":{"line":184,"column":36},"end":{"line":184,"column":102}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5813,"end":5818,"loc":{"start":{"line":184,"column":36},"end":{"line":184,"column":41}},"name":"error"},"value":{"type":"Literal","start":5820,"end":5879,"loc":{"start":{"line":184,"column":43},"end":{"line":184,"column":102}},"value":"s3: the part number must be a number between 1 and 10000.","raw":"'s3: the part number must be a number between 1 and 10000.'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":5894,"end":6188,"loc":{"start":{"line":187,"column":4},"end":{"line":200,"column":6}},"expression":{"type":"CallExpression","start":5894,"end":6188,"loc":{"start":{"line":187,"column":4},"end":{"line":200,"column":6}},"callee":{"type":"MemberExpression","start":5894,"end":5913,"loc":{"start":{"line":187,"column":4},"end":{"line":187,"column":23}},"object":{"type":"Identifier","start":5894,"end":5900,"loc":{"start":{"line":187,"column":4},"end":{"line":187,"column":10}},"name":"client"},"property":{"type":"Identifier","start":5901,"end":5913,"loc":{"start":{"line":187,"column":11},"end":{"line":187,"column":23}},"name":"getSignedUrl"},"computed":false},"arguments":[{"type":"Literal","start":5914,"end":5926,"loc":{"start":{"line":187,"column":24},"end":{"line":187,"column":36}},"value":"uploadPart","raw":"'uploadPart'"},{"type":"ObjectExpression","start":5928,"end":6082,"loc":{"start":{"line":187,"column":38},"end":{"line":194,"column":5}},"properties":[{"type":"Property","start":5936,"end":5957,"loc":{"start":{"line":188,"column":6},"end":{"line":188,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5936,"end":5942,"loc":{"start":{"line":188,"column":6},"end":{"line":188,"column":12}},"name":"Bucket"},"value":{"type":"MemberExpression","start":5944,"end":5957,"loc":{"start":{"line":188,"column":14},"end":{"line":188,"column":27}},"object":{"type":"Identifier","start":5944,"end":5950,"loc":{"start":{"line":188,"column":14},"end":{"line":188,"column":20}},"name":"config"},"property":{"type":"Identifier","start":5951,"end":5957,"loc":{"start":{"line":188,"column":21},"end":{"line":188,"column":27}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":5965,"end":5973,"loc":{"start":{"line":189,"column":6},"end":{"line":189,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5965,"end":5968,"loc":{"start":{"line":189,"column":6},"end":{"line":189,"column":9}},"name":"Key"},"value":{"type":"Identifier","start":5970,"end":5973,"loc":{"start":{"line":189,"column":11},"end":{"line":189,"column":14}},"name":"key"},"kind":"init"},{"type":"Property","start":5981,"end":5999,"loc":{"start":{"line":190,"column":6},"end":{"line":190,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":5981,"end":5989,"loc":{"start":{"line":190,"column":6},"end":{"line":190,"column":14}},"name":"UploadId"},"value":{"type":"Identifier","start":5991,"end":5999,"loc":{"start":{"line":190,"column":16},"end":{"line":190,"column":24}},"name":"uploadId"},"kind":"init"},{"type":"Property","start":6007,"end":6029,"loc":{"start":{"line":191,"column":6},"end":{"line":191,"column":28}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6007,"end":6017,"loc":{"start":{"line":191,"column":6},"end":{"line":191,"column":16}},"name":"PartNumber"},"value":{"type":"Identifier","start":6019,"end":6029,"loc":{"start":{"line":191,"column":18},"end":{"line":191,"column":28}},"name":"partNumber"},"kind":"init"},{"type":"Property","start":6037,"end":6045,"loc":{"start":{"line":192,"column":6},"end":{"line":192,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6037,"end":6041,"loc":{"start":{"line":192,"column":6},"end":{"line":192,"column":10}},"name":"Body"},"value":{"type":"Literal","start":6043,"end":6045,"loc":{"start":{"line":192,"column":12},"end":{"line":192,"column":14}},"value":"","raw":"''"},"kind":"init"},{"type":"Property","start":6053,"end":6076,"loc":{"start":{"line":193,"column":6},"end":{"line":193,"column":29}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6053,"end":6060,"loc":{"start":{"line":193,"column":6},"end":{"line":193,"column":13}},"name":"Expires"},"value":{"type":"MemberExpression","start":6062,"end":6076,"loc":{"start":{"line":193,"column":15},"end":{"line":193,"column":29}},"object":{"type":"Identifier","start":6062,"end":6068,"loc":{"start":{"line":193,"column":15},"end":{"line":193,"column":21}},"name":"config"},"property":{"type":"Identifier","start":6069,"end":6076,"loc":{"start":{"line":193,"column":22},"end":{"line":193,"column":29}},"name":"expires"},"computed":false},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":6084,"end":6187,"loc":{"start":{"line":194,"column":7},"end":{"line":200,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6085,"end":6088,"loc":{"start":{"line":194,"column":8},"end":{"line":194,"column":11}},"name":"err"},{"type":"Identifier","start":6090,"end":6093,"loc":{"start":{"line":194,"column":13},"end":{"line":194,"column":16}},"name":"url"}],"body":{"type":"BlockStatement","start":6098,"end":6187,"loc":{"start":{"line":194,"column":21},"end":{"line":200,"column":5}},"body":[{"type":"IfStatement","start":6106,"end":6157,"loc":{"start":{"line":195,"column":6},"end":{"line":198,"column":7}},"test":{"type":"Identifier","start":6110,"end":6113,"loc":{"start":{"line":195,"column":10},"end":{"line":195,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":6115,"end":6157,"loc":{"start":{"line":195,"column":15},"end":{"line":198,"column":7}},"body":[{"type":"ExpressionStatement","start":6125,"end":6134,"loc":{"start":{"line":196,"column":8},"end":{"line":196,"column":17}},"expression":{"type":"CallExpression","start":6125,"end":6134,"loc":{"start":{"line":196,"column":8},"end":{"line":196,"column":17}},"callee":{"type":"Identifier","start":6125,"end":6129,"loc":{"start":{"line":196,"column":8},"end":{"line":196,"column":12}},"name":"next"},"arguments":[{"type":"Identifier","start":6130,"end":6133,"loc":{"start":{"line":196,"column":13},"end":{"line":196,"column":16}},"name":"err"}]}},{"type":"ReturnStatement","start":6143,"end":6149,"loc":{"start":{"line":197,"column":8},"end":{"line":197,"column":14}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":6164,"end":6181,"loc":{"start":{"line":199,"column":6},"end":{"line":199,"column":23}},"expression":{"type":"CallExpression","start":6164,"end":6181,"loc":{"start":{"line":199,"column":6},"end":{"line":199,"column":23}},"callee":{"type":"MemberExpression","start":6164,"end":6172,"loc":{"start":{"line":199,"column":6},"end":{"line":199,"column":14}},"object":{"type":"Identifier","start":6164,"end":6167,"loc":{"start":{"line":199,"column":6},"end":{"line":199,"column":9}},"name":"res"},"property":{"type":"Identifier","start":6168,"end":6172,"loc":{"start":{"line":199,"column":10},"end":{"line":199,"column":14}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":6173,"end":6180,"loc":{"start":{"line":199,"column":15},"end":{"line":199,"column":22}},"properties":[{"type":"Property","start":6175,"end":6178,"loc":{"start":{"line":199,"column":17},"end":{"line":199,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":6175,"end":6178,"loc":{"start":{"line":199,"column":17},"end":{"line":199,"column":20}},"name":"url"},"kind":"init","value":{"type":"Identifier","start":6175,"end":6178,"loc":{"start":{"line":199,"column":17},"end":{"line":199,"column":20}},"name":"url"}}]}]}}]}}]}}]},"comments":[{"type":"Block","value":"*\n   * Get parameters for uploading one part.\n   *\n   * Expected URL parameters:\n   *  - uploadId - The uploadId returned from `createMultipartUpload`.\n   *  - partNumber - This part's index in the file (1-10000).\n   * Expected query parameters:\n   *  - key - The object key in the S3 bucket.\n   * Response JSON:\n   *  - url - The URL to upload to, including signed query parameters.\n   ","start":4921,"end":5312,"loc":{"start":{"line":163,"column":2},"end":{"line":173,"column":5}}}]},{"type":"FunctionDeclaration","start":6491,"end":7126,"loc":{"start":{"line":213,"column":2},"end":{"line":234,"column":3}},"id":{"type":"Identifier","start":6500,"end":6520,"loc":{"start":{"line":213,"column":11},"end":{"line":213,"column":31}},"name":"abortMultipartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":6522,"end":6525,"loc":{"start":{"line":213,"column":33},"end":{"line":213,"column":36}},"name":"req"},{"type":"Identifier","start":6527,"end":6530,"loc":{"start":{"line":213,"column":38},"end":{"line":213,"column":41}},"name":"res"},{"type":"Identifier","start":6532,"end":6536,"loc":{"start":{"line":213,"column":43},"end":{"line":213,"column":47}},"name":"next"}],"body":{"type":"BlockStatement","start":6538,"end":7126,"loc":{"start":{"line":213,"column":49},"end":{"line":234,"column":3}},"body":[{"type":"VariableDeclaration","start":6632,"end":6669,"loc":{"start":{"line":215,"column":4},"end":{"line":215,"column":41}},"declarations":[{"type":"VariableDeclarator","start":6638,"end":6669,"loc":{"start":{"line":215,"column":10},"end":{"line":215,"column":41}},"id":{"type":"Identifier","start":6638,"end":6644,"loc":{"start":{"line":215,"column":10},"end":{"line":215,"column":16}},"name":"client"},"init":{"type":"MemberExpression","start":6647,"end":6669,"loc":{"start":{"line":215,"column":19},"end":{"line":215,"column":41}},"object":{"type":"MemberExpression","start":6647,"end":6660,"loc":{"start":{"line":215,"column":19},"end":{"line":215,"column":32}},"object":{"type":"Identifier","start":6647,"end":6650,"loc":{"start":{"line":215,"column":19},"end":{"line":215,"column":22}},"name":"req"},"property":{"type":"Identifier","start":6651,"end":6660,"loc":{"start":{"line":215,"column":23},"end":{"line":215,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":6661,"end":6669,"loc":{"start":{"line":215,"column":33},"end":{"line":215,"column":41}},"name":"s3Client"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore The `companion` property is added by middleware before reaching here.","start":6544,"end":6627,"loc":{"start":{"line":214,"column":4},"end":{"line":214,"column":87}}}]},{"type":"VariableDeclaration","start":6674,"end":6705,"loc":{"start":{"line":216,"column":4},"end":{"line":216,"column":35}},"declarations":[{"type":"VariableDeclarator","start":6680,"end":6705,"loc":{"start":{"line":216,"column":10},"end":{"line":216,"column":35}},"id":{"type":"ObjectPattern","start":6680,"end":6692,"loc":{"start":{"line":216,"column":10},"end":{"line":216,"column":22}},"properties":[{"type":"Property","start":6682,"end":6690,"loc":{"start":{"line":216,"column":12},"end":{"line":216,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":6682,"end":6690,"loc":{"start":{"line":216,"column":12},"end":{"line":216,"column":20}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":6682,"end":6690,"loc":{"start":{"line":216,"column":12},"end":{"line":216,"column":20}},"name":"uploadId"}}]},"init":{"type":"MemberExpression","start":6695,"end":6705,"loc":{"start":{"line":216,"column":25},"end":{"line":216,"column":35}},"object":{"type":"Identifier","start":6695,"end":6698,"loc":{"start":{"line":216,"column":25},"end":{"line":216,"column":28}},"name":"req"},"property":{"type":"Identifier","start":6699,"end":6705,"loc":{"start":{"line":216,"column":29},"end":{"line":216,"column":35}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":6710,"end":6735,"loc":{"start":{"line":217,"column":4},"end":{"line":217,"column":29}},"declarations":[{"type":"VariableDeclarator","start":6716,"end":6735,"loc":{"start":{"line":217,"column":10},"end":{"line":217,"column":29}},"id":{"type":"ObjectPattern","start":6716,"end":6723,"loc":{"start":{"line":217,"column":10},"end":{"line":217,"column":17}},"properties":[{"type":"Property","start":6718,"end":6721,"loc":{"start":{"line":217,"column":12},"end":{"line":217,"column":15}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":6718,"end":6721,"loc":{"start":{"line":217,"column":12},"end":{"line":217,"column":15}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":6718,"end":6721,"loc":{"start":{"line":217,"column":12},"end":{"line":217,"column":15}},"name":"key"}}]},"init":{"type":"MemberExpression","start":6726,"end":6735,"loc":{"start":{"line":217,"column":20},"end":{"line":217,"column":29}},"object":{"type":"Identifier","start":6726,"end":6729,"loc":{"start":{"line":217,"column":20},"end":{"line":217,"column":23}},"name":"req"},"property":{"type":"Identifier","start":6730,"end":6735,"loc":{"start":{"line":217,"column":24},"end":{"line":217,"column":29}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":6741,"end":6909,"loc":{"start":{"line":219,"column":4},"end":{"line":221,"column":5}},"test":{"type":"BinaryExpression","start":6745,"end":6768,"loc":{"start":{"line":219,"column":8},"end":{"line":219,"column":31}},"left":{"type":"UnaryExpression","start":6745,"end":6755,"loc":{"start":{"line":219,"column":8},"end":{"line":219,"column":18}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":6752,"end":6755,"loc":{"start":{"line":219,"column":15},"end":{"line":219,"column":18}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":6760,"end":6768,"loc":{"start":{"line":219,"column":23},"end":{"line":219,"column":31}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":6770,"end":6909,"loc":{"start":{"line":219,"column":33},"end":{"line":221,"column":5}},"body":[{"type":"ReturnStatement","start":6778,"end":6903,"loc":{"start":{"line":220,"column":6},"end":{"line":220,"column":131}},"argument":{"type":"CallExpression","start":6785,"end":6903,"loc":{"start":{"line":220,"column":13},"end":{"line":220,"column":131}},"callee":{"type":"MemberExpression","start":6785,"end":6805,"loc":{"start":{"line":220,"column":13},"end":{"line":220,"column":33}},"object":{"type":"CallExpression","start":6785,"end":6800,"loc":{"start":{"line":220,"column":13},"end":{"line":220,"column":28}},"callee":{"type":"MemberExpression","start":6785,"end":6795,"loc":{"start":{"line":220,"column":13},"end":{"line":220,"column":23}},"object":{"type":"Identifier","start":6785,"end":6788,"loc":{"start":{"line":220,"column":13},"end":{"line":220,"column":16}},"name":"res"},"property":{"type":"Identifier","start":6789,"end":6795,"loc":{"start":{"line":220,"column":17},"end":{"line":220,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":6796,"end":6799,"loc":{"start":{"line":220,"column":24},"end":{"line":220,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":6801,"end":6805,"loc":{"start":{"line":220,"column":29},"end":{"line":220,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":6806,"end":6902,"loc":{"start":{"line":220,"column":34},"end":{"line":220,"column":130}},"properties":[{"type":"Property","start":6808,"end":6900,"loc":{"start":{"line":220,"column":36},"end":{"line":220,"column":128}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6808,"end":6813,"loc":{"start":{"line":220,"column":36},"end":{"line":220,"column":41}},"name":"error"},"value":{"type":"Literal","start":6815,"end":6900,"loc":{"start":{"line":220,"column":43},"end":{"line":220,"column":128}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":6915,"end":7122,"loc":{"start":{"line":223,"column":4},"end":{"line":233,"column":6}},"expression":{"type":"CallExpression","start":6915,"end":7122,"loc":{"start":{"line":223,"column":4},"end":{"line":233,"column":6}},"callee":{"type":"MemberExpression","start":6915,"end":6942,"loc":{"start":{"line":223,"column":4},"end":{"line":223,"column":31}},"object":{"type":"Identifier","start":6915,"end":6921,"loc":{"start":{"line":223,"column":4},"end":{"line":223,"column":10}},"name":"client"},"property":{"type":"Identifier","start":6922,"end":6942,"loc":{"start":{"line":223,"column":11},"end":{"line":223,"column":31}},"name":"abortMultipartUpload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":6943,"end":7020,"loc":{"start":{"line":223,"column":32},"end":{"line":227,"column":5}},"properties":[{"type":"Property","start":6951,"end":6972,"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6951,"end":6957,"loc":{"start":{"line":224,"column":6},"end":{"line":224,"column":12}},"name":"Bucket"},"value":{"type":"MemberExpression","start":6959,"end":6972,"loc":{"start":{"line":224,"column":14},"end":{"line":224,"column":27}},"object":{"type":"Identifier","start":6959,"end":6965,"loc":{"start":{"line":224,"column":14},"end":{"line":224,"column":20}},"name":"config"},"property":{"type":"Identifier","start":6966,"end":6972,"loc":{"start":{"line":224,"column":21},"end":{"line":224,"column":27}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":6980,"end":6988,"loc":{"start":{"line":225,"column":6},"end":{"line":225,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6980,"end":6983,"loc":{"start":{"line":225,"column":6},"end":{"line":225,"column":9}},"name":"Key"},"value":{"type":"Identifier","start":6985,"end":6988,"loc":{"start":{"line":225,"column":11},"end":{"line":225,"column":14}},"name":"key"},"kind":"init"},{"type":"Property","start":6996,"end":7014,"loc":{"start":{"line":226,"column":6},"end":{"line":226,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":6996,"end":7004,"loc":{"start":{"line":226,"column":6},"end":{"line":226,"column":14}},"name":"UploadId"},"value":{"type":"Identifier","start":7006,"end":7014,"loc":{"start":{"line":226,"column":16},"end":{"line":226,"column":24}},"name":"uploadId"},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":7022,"end":7121,"loc":{"start":{"line":227,"column":7},"end":{"line":233,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7023,"end":7026,"loc":{"start":{"line":227,"column":8},"end":{"line":227,"column":11}},"name":"err"},{"type":"Identifier","start":7028,"end":7032,"loc":{"start":{"line":227,"column":13},"end":{"line":227,"column":17}},"name":"data"}],"body":{"type":"BlockStatement","start":7037,"end":7121,"loc":{"start":{"line":227,"column":22},"end":{"line":233,"column":5}},"body":[{"type":"IfStatement","start":7045,"end":7096,"loc":{"start":{"line":228,"column":6},"end":{"line":231,"column":7}},"test":{"type":"Identifier","start":7049,"end":7052,"loc":{"start":{"line":228,"column":10},"end":{"line":228,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":7054,"end":7096,"loc":{"start":{"line":228,"column":15},"end":{"line":231,"column":7}},"body":[{"type":"ExpressionStatement","start":7064,"end":7073,"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":17}},"expression":{"type":"CallExpression","start":7064,"end":7073,"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":17}},"callee":{"type":"Identifier","start":7064,"end":7068,"loc":{"start":{"line":229,"column":8},"end":{"line":229,"column":12}},"name":"next"},"arguments":[{"type":"Identifier","start":7069,"end":7072,"loc":{"start":{"line":229,"column":13},"end":{"line":229,"column":16}},"name":"err"}]}},{"type":"ReturnStatement","start":7082,"end":7088,"loc":{"start":{"line":230,"column":8},"end":{"line":230,"column":14}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":7103,"end":7115,"loc":{"start":{"line":232,"column":6},"end":{"line":232,"column":18}},"expression":{"type":"CallExpression","start":7103,"end":7115,"loc":{"start":{"line":232,"column":6},"end":{"line":232,"column":18}},"callee":{"type":"MemberExpression","start":7103,"end":7111,"loc":{"start":{"line":232,"column":6},"end":{"line":232,"column":14}},"object":{"type":"Identifier","start":7103,"end":7106,"loc":{"start":{"line":232,"column":6},"end":{"line":232,"column":9}},"name":"res"},"property":{"type":"Identifier","start":7107,"end":7111,"loc":{"start":{"line":232,"column":10},"end":{"line":232,"column":14}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":7112,"end":7114,"loc":{"start":{"line":232,"column":15},"end":{"line":232,"column":17}},"properties":[]}]}}]}}]}}]},"comments":[{"type":"Block","value":"*\n   * Abort a multipart upload, deleting already uploaded parts.\n   *\n   * Expected URL parameters:\n   *  - uploadId - The uploadId returned from `createMultipartUpload`.\n   * Expected query parameters:\n   *  - key - The object key in the S3 bucket.\n   * Response JSON:\n   *   Empty.\n   ","start":6196,"end":6488,"loc":{"start":{"line":203,"column":2},"end":{"line":212,"column":5}}}]},{"type":"FunctionDeclaration","start":7610,"end":8552,"loc":{"start":{"line":248,"column":2},"end":{"line":278,"column":3}},"id":{"type":"Identifier","start":7619,"end":7642,"loc":{"start":{"line":248,"column":11},"end":{"line":248,"column":34}},"name":"completeMultipartUpload"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":7644,"end":7647,"loc":{"start":{"line":248,"column":36},"end":{"line":248,"column":39}},"name":"req"},{"type":"Identifier","start":7649,"end":7652,"loc":{"start":{"line":248,"column":41},"end":{"line":248,"column":44}},"name":"res"},{"type":"Identifier","start":7654,"end":7658,"loc":{"start":{"line":248,"column":46},"end":{"line":248,"column":50}},"name":"next"}],"body":{"type":"BlockStatement","start":7660,"end":8552,"loc":{"start":{"line":248,"column":52},"end":{"line":278,"column":3}},"body":[{"type":"VariableDeclaration","start":7754,"end":7791,"loc":{"start":{"line":250,"column":4},"end":{"line":250,"column":41}},"declarations":[{"type":"VariableDeclarator","start":7760,"end":7791,"loc":{"start":{"line":250,"column":10},"end":{"line":250,"column":41}},"id":{"type":"Identifier","start":7760,"end":7766,"loc":{"start":{"line":250,"column":10},"end":{"line":250,"column":16}},"name":"client"},"init":{"type":"MemberExpression","start":7769,"end":7791,"loc":{"start":{"line":250,"column":19},"end":{"line":250,"column":41}},"object":{"type":"MemberExpression","start":7769,"end":7782,"loc":{"start":{"line":250,"column":19},"end":{"line":250,"column":32}},"object":{"type":"Identifier","start":7769,"end":7772,"loc":{"start":{"line":250,"column":19},"end":{"line":250,"column":22}},"name":"req"},"property":{"type":"Identifier","start":7773,"end":7782,"loc":{"start":{"line":250,"column":23},"end":{"line":250,"column":32}},"name":"companion"},"computed":false},"property":{"type":"Identifier","start":7783,"end":7791,"loc":{"start":{"line":250,"column":33},"end":{"line":250,"column":41}},"name":"s3Client"},"computed":false}}],"kind":"const","comments":[{"type":"Line","value":" @ts-ignore The `companion` property is added by middleware before reaching here.","start":7666,"end":7749,"loc":{"start":{"line":249,"column":4},"end":{"line":249,"column":87}}}]},{"type":"VariableDeclaration","start":7796,"end":7827,"loc":{"start":{"line":251,"column":4},"end":{"line":251,"column":35}},"declarations":[{"type":"VariableDeclarator","start":7802,"end":7827,"loc":{"start":{"line":251,"column":10},"end":{"line":251,"column":35}},"id":{"type":"ObjectPattern","start":7802,"end":7814,"loc":{"start":{"line":251,"column":10},"end":{"line":251,"column":22}},"properties":[{"type":"Property","start":7804,"end":7812,"loc":{"start":{"line":251,"column":12},"end":{"line":251,"column":20}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":7804,"end":7812,"loc":{"start":{"line":251,"column":12},"end":{"line":251,"column":20}},"name":"uploadId"},"kind":"init","value":{"type":"Identifier","start":7804,"end":7812,"loc":{"start":{"line":251,"column":12},"end":{"line":251,"column":20}},"name":"uploadId"}}]},"init":{"type":"MemberExpression","start":7817,"end":7827,"loc":{"start":{"line":251,"column":25},"end":{"line":251,"column":35}},"object":{"type":"Identifier","start":7817,"end":7820,"loc":{"start":{"line":251,"column":25},"end":{"line":251,"column":28}},"name":"req"},"property":{"type":"Identifier","start":7821,"end":7827,"loc":{"start":{"line":251,"column":29},"end":{"line":251,"column":35}},"name":"params"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":7832,"end":7857,"loc":{"start":{"line":252,"column":4},"end":{"line":252,"column":29}},"declarations":[{"type":"VariableDeclarator","start":7838,"end":7857,"loc":{"start":{"line":252,"column":10},"end":{"line":252,"column":29}},"id":{"type":"ObjectPattern","start":7838,"end":7845,"loc":{"start":{"line":252,"column":10},"end":{"line":252,"column":17}},"properties":[{"type":"Property","start":7840,"end":7843,"loc":{"start":{"line":252,"column":12},"end":{"line":252,"column":15}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":7840,"end":7843,"loc":{"start":{"line":252,"column":12},"end":{"line":252,"column":15}},"name":"key"},"kind":"init","value":{"type":"Identifier","start":7840,"end":7843,"loc":{"start":{"line":252,"column":12},"end":{"line":252,"column":15}},"name":"key"}}]},"init":{"type":"MemberExpression","start":7848,"end":7857,"loc":{"start":{"line":252,"column":20},"end":{"line":252,"column":29}},"object":{"type":"Identifier","start":7848,"end":7851,"loc":{"start":{"line":252,"column":20},"end":{"line":252,"column":23}},"name":"req"},"property":{"type":"Identifier","start":7852,"end":7857,"loc":{"start":{"line":252,"column":24},"end":{"line":252,"column":29}},"name":"query"},"computed":false}}],"kind":"const"},{"type":"VariableDeclaration","start":7862,"end":7888,"loc":{"start":{"line":253,"column":4},"end":{"line":253,"column":30}},"declarations":[{"type":"VariableDeclarator","start":7868,"end":7888,"loc":{"start":{"line":253,"column":10},"end":{"line":253,"column":30}},"id":{"type":"ObjectPattern","start":7868,"end":7877,"loc":{"start":{"line":253,"column":10},"end":{"line":253,"column":19}},"properties":[{"type":"Property","start":7870,"end":7875,"loc":{"start":{"line":253,"column":12},"end":{"line":253,"column":17}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":7870,"end":7875,"loc":{"start":{"line":253,"column":12},"end":{"line":253,"column":17}},"name":"parts"},"kind":"init","value":{"type":"Identifier","start":7870,"end":7875,"loc":{"start":{"line":253,"column":12},"end":{"line":253,"column":17}},"name":"parts"}}]},"init":{"type":"MemberExpression","start":7880,"end":7888,"loc":{"start":{"line":253,"column":22},"end":{"line":253,"column":30}},"object":{"type":"Identifier","start":7880,"end":7883,"loc":{"start":{"line":253,"column":22},"end":{"line":253,"column":25}},"name":"req"},"property":{"type":"Identifier","start":7884,"end":7888,"loc":{"start":{"line":253,"column":26},"end":{"line":253,"column":30}},"name":"body"},"computed":false}}],"kind":"const"},{"type":"IfStatement","start":7894,"end":8062,"loc":{"start":{"line":255,"column":4},"end":{"line":257,"column":5}},"test":{"type":"BinaryExpression","start":7898,"end":7921,"loc":{"start":{"line":255,"column":8},"end":{"line":255,"column":31}},"left":{"type":"UnaryExpression","start":7898,"end":7908,"loc":{"start":{"line":255,"column":8},"end":{"line":255,"column":18}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":7905,"end":7908,"loc":{"start":{"line":255,"column":15},"end":{"line":255,"column":18}},"name":"key"}},"operator":"!==","right":{"type":"Literal","start":7913,"end":7921,"loc":{"start":{"line":255,"column":23},"end":{"line":255,"column":31}},"value":"string","raw":"'string'"}},"consequent":{"type":"BlockStatement","start":7923,"end":8062,"loc":{"start":{"line":255,"column":33},"end":{"line":257,"column":5}},"body":[{"type":"ReturnStatement","start":7931,"end":8056,"loc":{"start":{"line":256,"column":6},"end":{"line":256,"column":131}},"argument":{"type":"CallExpression","start":7938,"end":8056,"loc":{"start":{"line":256,"column":13},"end":{"line":256,"column":131}},"callee":{"type":"MemberExpression","start":7938,"end":7958,"loc":{"start":{"line":256,"column":13},"end":{"line":256,"column":33}},"object":{"type":"CallExpression","start":7938,"end":7953,"loc":{"start":{"line":256,"column":13},"end":{"line":256,"column":28}},"callee":{"type":"MemberExpression","start":7938,"end":7948,"loc":{"start":{"line":256,"column":13},"end":{"line":256,"column":23}},"object":{"type":"Identifier","start":7938,"end":7941,"loc":{"start":{"line":256,"column":13},"end":{"line":256,"column":16}},"name":"res"},"property":{"type":"Identifier","start":7942,"end":7948,"loc":{"start":{"line":256,"column":17},"end":{"line":256,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":7949,"end":7952,"loc":{"start":{"line":256,"column":24},"end":{"line":256,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":7954,"end":7958,"loc":{"start":{"line":256,"column":29},"end":{"line":256,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":7959,"end":8055,"loc":{"start":{"line":256,"column":34},"end":{"line":256,"column":130}},"properties":[{"type":"Property","start":7961,"end":8053,"loc":{"start":{"line":256,"column":36},"end":{"line":256,"column":128}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":7961,"end":7966,"loc":{"start":{"line":256,"column":36},"end":{"line":256,"column":41}},"name":"error"},"value":{"type":"Literal","start":7968,"end":8053,"loc":{"start":{"line":256,"column":43},"end":{"line":256,"column":128}},"value":"s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"","raw":"'s3: the object key must be passed as a query parameter. For example: \"?key=abc.jpg\"'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"IfStatement","start":8067,"end":8238,"loc":{"start":{"line":258,"column":4},"end":{"line":260,"column":5}},"test":{"type":"LogicalExpression","start":8071,"end":8121,"loc":{"start":{"line":258,"column":8},"end":{"line":258,"column":58}},"left":{"type":"UnaryExpression","start":8071,"end":8092,"loc":{"start":{"line":258,"column":8},"end":{"line":258,"column":29}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":8072,"end":8092,"loc":{"start":{"line":258,"column":9},"end":{"line":258,"column":29}},"callee":{"type":"MemberExpression","start":8072,"end":8085,"loc":{"start":{"line":258,"column":9},"end":{"line":258,"column":22}},"object":{"type":"Identifier","start":8072,"end":8077,"loc":{"start":{"line":258,"column":9},"end":{"line":258,"column":14}},"name":"Array"},"property":{"type":"Identifier","start":8078,"end":8085,"loc":{"start":{"line":258,"column":15},"end":{"line":258,"column":22}},"name":"isArray"},"computed":false},"arguments":[{"type":"Identifier","start":8086,"end":8091,"loc":{"start":{"line":258,"column":23},"end":{"line":258,"column":28}},"name":"parts"}]}},"operator":"||","right":{"type":"UnaryExpression","start":8096,"end":8121,"loc":{"start":{"line":258,"column":33},"end":{"line":258,"column":58}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":8097,"end":8121,"loc":{"start":{"line":258,"column":34},"end":{"line":258,"column":58}},"callee":{"type":"MemberExpression","start":8097,"end":8108,"loc":{"start":{"line":258,"column":34},"end":{"line":258,"column":45}},"object":{"type":"Identifier","start":8097,"end":8102,"loc":{"start":{"line":258,"column":34},"end":{"line":258,"column":39}},"name":"parts"},"property":{"type":"Identifier","start":8103,"end":8108,"loc":{"start":{"line":258,"column":40},"end":{"line":258,"column":45}},"name":"every"},"computed":false},"arguments":[{"type":"Identifier","start":8109,"end":8120,"loc":{"start":{"line":258,"column":46},"end":{"line":258,"column":57}},"name":"isValidPart"}]}}},"consequent":{"type":"BlockStatement","start":8123,"end":8238,"loc":{"start":{"line":258,"column":60},"end":{"line":260,"column":5}},"body":[{"type":"ReturnStatement","start":8131,"end":8232,"loc":{"start":{"line":259,"column":6},"end":{"line":259,"column":107}},"argument":{"type":"CallExpression","start":8138,"end":8232,"loc":{"start":{"line":259,"column":13},"end":{"line":259,"column":107}},"callee":{"type":"MemberExpression","start":8138,"end":8158,"loc":{"start":{"line":259,"column":13},"end":{"line":259,"column":33}},"object":{"type":"CallExpression","start":8138,"end":8153,"loc":{"start":{"line":259,"column":13},"end":{"line":259,"column":28}},"callee":{"type":"MemberExpression","start":8138,"end":8148,"loc":{"start":{"line":259,"column":13},"end":{"line":259,"column":23}},"object":{"type":"Identifier","start":8138,"end":8141,"loc":{"start":{"line":259,"column":13},"end":{"line":259,"column":16}},"name":"res"},"property":{"type":"Identifier","start":8142,"end":8148,"loc":{"start":{"line":259,"column":17},"end":{"line":259,"column":23}},"name":"status"},"computed":false},"arguments":[{"type":"Literal","start":8149,"end":8152,"loc":{"start":{"line":259,"column":24},"end":{"line":259,"column":27}},"value":400,"raw":"400"}]},"property":{"type":"Identifier","start":8154,"end":8158,"loc":{"start":{"line":259,"column":29},"end":{"line":259,"column":33}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":8159,"end":8231,"loc":{"start":{"line":259,"column":34},"end":{"line":259,"column":106}},"properties":[{"type":"Property","start":8161,"end":8229,"loc":{"start":{"line":259,"column":36},"end":{"line":259,"column":104}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8161,"end":8166,"loc":{"start":{"line":259,"column":36},"end":{"line":259,"column":41}},"name":"error"},"value":{"type":"Literal","start":8168,"end":8229,"loc":{"start":{"line":259,"column":43},"end":{"line":259,"column":104}},"value":"s3: `parts` must be an array of {ETag, PartNumber} objects.","raw":"'s3: `parts` must be an array of {ETag, PartNumber} objects.'"},"kind":"init"}]}]}}]},"alternate":null},{"type":"ExpressionStatement","start":8244,"end":8548,"loc":{"start":{"line":262,"column":4},"end":{"line":277,"column":6}},"expression":{"type":"CallExpression","start":8244,"end":8548,"loc":{"start":{"line":262,"column":4},"end":{"line":277,"column":6}},"callee":{"type":"MemberExpression","start":8244,"end":8274,"loc":{"start":{"line":262,"column":4},"end":{"line":262,"column":34}},"object":{"type":"Identifier","start":8244,"end":8250,"loc":{"start":{"line":262,"column":4},"end":{"line":262,"column":10}},"name":"client"},"property":{"type":"Identifier","start":8251,"end":8274,"loc":{"start":{"line":262,"column":11},"end":{"line":262,"column":34}},"name":"completeMultipartUpload"},"computed":false},"arguments":[{"type":"ObjectExpression","start":8275,"end":8407,"loc":{"start":{"line":262,"column":35},"end":{"line":269,"column":5}},"properties":[{"type":"Property","start":8283,"end":8304,"loc":{"start":{"line":263,"column":6},"end":{"line":263,"column":27}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8283,"end":8289,"loc":{"start":{"line":263,"column":6},"end":{"line":263,"column":12}},"name":"Bucket"},"value":{"type":"MemberExpression","start":8291,"end":8304,"loc":{"start":{"line":263,"column":14},"end":{"line":263,"column":27}},"object":{"type":"Identifier","start":8291,"end":8297,"loc":{"start":{"line":263,"column":14},"end":{"line":263,"column":20}},"name":"config"},"property":{"type":"Identifier","start":8298,"end":8304,"loc":{"start":{"line":263,"column":21},"end":{"line":263,"column":27}},"name":"bucket"},"computed":false},"kind":"init"},{"type":"Property","start":8312,"end":8320,"loc":{"start":{"line":264,"column":6},"end":{"line":264,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8312,"end":8315,"loc":{"start":{"line":264,"column":6},"end":{"line":264,"column":9}},"name":"Key"},"value":{"type":"Identifier","start":8317,"end":8320,"loc":{"start":{"line":264,"column":11},"end":{"line":264,"column":14}},"name":"key"},"kind":"init"},{"type":"Property","start":8328,"end":8346,"loc":{"start":{"line":265,"column":6},"end":{"line":265,"column":24}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8328,"end":8336,"loc":{"start":{"line":265,"column":6},"end":{"line":265,"column":14}},"name":"UploadId"},"value":{"type":"Identifier","start":8338,"end":8346,"loc":{"start":{"line":265,"column":16},"end":{"line":265,"column":24}},"name":"uploadId"},"kind":"init"},{"type":"Property","start":8354,"end":8401,"loc":{"start":{"line":266,"column":6},"end":{"line":268,"column":7}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8354,"end":8369,"loc":{"start":{"line":266,"column":6},"end":{"line":266,"column":21}},"name":"MultipartUpload"},"value":{"type":"ObjectExpression","start":8371,"end":8401,"loc":{"start":{"line":266,"column":23},"end":{"line":268,"column":7}},"properties":[{"type":"Property","start":8381,"end":8393,"loc":{"start":{"line":267,"column":8},"end":{"line":267,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8381,"end":8386,"loc":{"start":{"line":267,"column":8},"end":{"line":267,"column":13}},"name":"Parts"},"value":{"type":"Identifier","start":8388,"end":8393,"loc":{"start":{"line":267,"column":15},"end":{"line":267,"column":20}},"name":"parts"},"kind":"init"}]},"kind":"init"}]},{"type":"ArrowFunctionExpression","start":8409,"end":8547,"loc":{"start":{"line":269,"column":7},"end":{"line":277,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":8410,"end":8413,"loc":{"start":{"line":269,"column":8},"end":{"line":269,"column":11}},"name":"err"},{"type":"Identifier","start":8415,"end":8419,"loc":{"start":{"line":269,"column":13},"end":{"line":269,"column":17}},"name":"data"}],"body":{"type":"BlockStatement","start":8424,"end":8547,"loc":{"start":{"line":269,"column":22},"end":{"line":277,"column":5}},"body":[{"type":"IfStatement","start":8432,"end":8483,"loc":{"start":{"line":270,"column":6},"end":{"line":273,"column":7}},"test":{"type":"Identifier","start":8436,"end":8439,"loc":{"start":{"line":270,"column":10},"end":{"line":270,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":8441,"end":8483,"loc":{"start":{"line":270,"column":15},"end":{"line":273,"column":7}},"body":[{"type":"ExpressionStatement","start":8451,"end":8460,"loc":{"start":{"line":271,"column":8},"end":{"line":271,"column":17}},"expression":{"type":"CallExpression","start":8451,"end":8460,"loc":{"start":{"line":271,"column":8},"end":{"line":271,"column":17}},"callee":{"type":"Identifier","start":8451,"end":8455,"loc":{"start":{"line":271,"column":8},"end":{"line":271,"column":12}},"name":"next"},"arguments":[{"type":"Identifier","start":8456,"end":8459,"loc":{"start":{"line":271,"column":13},"end":{"line":271,"column":16}},"name":"err"}]}},{"type":"ReturnStatement","start":8469,"end":8475,"loc":{"start":{"line":272,"column":8},"end":{"line":272,"column":14}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":8490,"end":8541,"loc":{"start":{"line":274,"column":6},"end":{"line":276,"column":8}},"expression":{"type":"CallExpression","start":8490,"end":8541,"loc":{"start":{"line":274,"column":6},"end":{"line":276,"column":8}},"callee":{"type":"MemberExpression","start":8490,"end":8498,"loc":{"start":{"line":274,"column":6},"end":{"line":274,"column":14}},"object":{"type":"Identifier","start":8490,"end":8493,"loc":{"start":{"line":274,"column":6},"end":{"line":274,"column":9}},"name":"res"},"property":{"type":"Identifier","start":8494,"end":8498,"loc":{"start":{"line":274,"column":10},"end":{"line":274,"column":14}},"name":"json"},"computed":false},"arguments":[{"type":"ObjectExpression","start":8499,"end":8540,"loc":{"start":{"line":274,"column":15},"end":{"line":276,"column":7}},"properties":[{"type":"Property","start":8509,"end":8532,"loc":{"start":{"line":275,"column":8},"end":{"line":275,"column":31}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":8509,"end":8517,"loc":{"start":{"line":275,"column":8},"end":{"line":275,"column":16}},"name":"location"},"value":{"type":"MemberExpression","start":8519,"end":8532,"loc":{"start":{"line":275,"column":18},"end":{"line":275,"column":31}},"object":{"type":"Identifier","start":8519,"end":8523,"loc":{"start":{"line":275,"column":18},"end":{"line":275,"column":22}},"name":"data"},"property":{"type":"Identifier","start":8524,"end":8532,"loc":{"start":{"line":275,"column":23},"end":{"line":275,"column":31}},"name":"Location"},"computed":false},"kind":"init"}]}]}}]}}]}}]},"comments":[{"type":"Block","value":"*\n   * Complete a multipart upload, combining all the parts into a single object in the S3 bucket.\n   *\n   * Expected URL parameters:\n   *  - uploadId - The uploadId returned from `createMultipartUpload`.\n   * Expected query parameters:\n   *  - key - The object key in the S3 bucket.\n   * Expected JSON body:\n   *  - parts - An array of parts, see the `getUploadedParts` response JSON.\n   * Response JSON:\n   *  - location - The full URL to the object in the S3 bucket.\n   ","start":7130,"end":7607,"loc":{"start":{"line":236,"column":2},"end":{"line":247,"column":5}}}]},{"type":"ReturnStatement","start":8556,"end":8897,"loc":{"start":{"line":280,"column":2},"end":{"line":286,"column":57}},"argument":{"type":"CallExpression","start":8563,"end":8897,"loc":{"start":{"line":280,"column":9},"end":{"line":286,"column":57}},"callee":{"type":"MemberExpression","start":8563,"end":8851,"loc":{"start":{"line":280,"column":9},"end":{"line":286,"column":11}},"object":{"type":"CallExpression","start":8563,"end":8839,"loc":{"start":{"line":280,"column":9},"end":{"line":285,"column":67}},"callee":{"type":"MemberExpression","start":8563,"end":8781,"loc":{"start":{"line":280,"column":9},"end":{"line":285,"column":9}},"object":{"type":"CallExpression","start":8563,"end":8771,"loc":{"start":{"line":280,"column":9},"end":{"line":284,"column":60}},"callee":{"type":"MemberExpression","start":8563,"end":8719,"loc":{"start":{"line":280,"column":9},"end":{"line":284,"column":8}},"object":{"type":"CallExpression","start":8563,"end":8710,"loc":{"start":{"line":280,"column":9},"end":{"line":283,"column":50}},"callee":{"type":"MemberExpression","start":8563,"end":8668,"loc":{"start":{"line":280,"column":9},"end":{"line":283,"column":8}},"object":{"type":"CallExpression","start":8563,"end":8659,"loc":{"start":{"line":280,"column":9},"end":{"line":282,"column":46}},"callee":{"type":"MemberExpression","start":8563,"end":8622,"loc":{"start":{"line":280,"column":9},"end":{"line":282,"column":9}},"object":{"type":"CallExpression","start":8563,"end":8612,"loc":{"start":{"line":280,"column":9},"end":{"line":281,"column":40}},"callee":{"type":"MemberExpression","start":8563,"end":8580,"loc":{"start":{"line":280,"column":9},"end":{"line":281,"column":8}},"object":{"type":"CallExpression","start":8563,"end":8571,"loc":{"start":{"line":280,"column":9},"end":{"line":280,"column":17}},"callee":{"type":"Identifier","start":8563,"end":8569,"loc":{"start":{"line":280,"column":9},"end":{"line":280,"column":15}},"name":"router"},"arguments":[]},"property":{"type":"Identifier","start":8577,"end":8580,"loc":{"start":{"line":281,"column":5},"end":{"line":281,"column":8}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":8581,"end":8590,"loc":{"start":{"line":281,"column":9},"end":{"line":281,"column":18}},"value":"/params","raw":"'/params'"},{"type":"Identifier","start":8592,"end":8611,"loc":{"start":{"line":281,"column":20},"end":{"line":281,"column":39}},"name":"getUploadParameters"}]},"property":{"type":"Identifier","start":8618,"end":8622,"loc":{"start":{"line":282,"column":5},"end":{"line":282,"column":9}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":8623,"end":8635,"loc":{"start":{"line":282,"column":10},"end":{"line":282,"column":22}},"value":"/multipart","raw":"'/multipart'"},{"type":"Identifier","start":8637,"end":8658,"loc":{"start":{"line":282,"column":24},"end":{"line":282,"column":45}},"name":"createMultipartUpload"}]},"property":{"type":"Identifier","start":8665,"end":8668,"loc":{"start":{"line":283,"column":5},"end":{"line":283,"column":8}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":8669,"end":8691,"loc":{"start":{"line":283,"column":9},"end":{"line":283,"column":31}},"value":"/multipart/:uploadId","raw":"'/multipart/:uploadId'"},{"type":"Identifier","start":8693,"end":8709,"loc":{"start":{"line":283,"column":33},"end":{"line":283,"column":49}},"name":"getUploadedParts"}]},"property":{"type":"Identifier","start":8716,"end":8719,"loc":{"start":{"line":284,"column":5},"end":{"line":284,"column":8}},"name":"get"},"computed":false},"arguments":[{"type":"Literal","start":8720,"end":8754,"loc":{"start":{"line":284,"column":9},"end":{"line":284,"column":43}},"value":"/multipart/:uploadId/:partNumber","raw":"'/multipart/:uploadId/:partNumber'"},{"type":"Identifier","start":8756,"end":8770,"loc":{"start":{"line":284,"column":45},"end":{"line":284,"column":59}},"name":"signPartUpload"}]},"property":{"type":"Identifier","start":8777,"end":8781,"loc":{"start":{"line":285,"column":5},"end":{"line":285,"column":9}},"name":"post"},"computed":false},"arguments":[{"type":"Literal","start":8782,"end":8813,"loc":{"start":{"line":285,"column":10},"end":{"line":285,"column":41}},"value":"/multipart/:uploadId/complete","raw":"'/multipart/:uploadId/complete'"},{"type":"Identifier","start":8815,"end":8838,"loc":{"start":{"line":285,"column":43},"end":{"line":285,"column":66}},"name":"completeMultipartUpload"}]},"property":{"type":"Identifier","start":8845,"end":8851,"loc":{"start":{"line":286,"column":5},"end":{"line":286,"column":11}},"name":"delete"},"computed":false},"arguments":[{"type":"Literal","start":8852,"end":8874,"loc":{"start":{"line":286,"column":12},"end":{"line":286,"column":34}},"value":"/multipart/:uploadId","raw":"'/multipart/:uploadId'"},{"type":"Identifier","start":8876,"end":8896,"loc":{"start":{"line":286,"column":36},"end":{"line":286,"column":56}},"name":"abortMultipartUpload"}]}}]}}}},{"type":"FunctionDeclaration","start":8901,"end":9046,"loc":{"start":{"line":289,"column":0},"end":{"line":291,"column":1}},"id":{"type":"Identifier","start":8910,"end":8921,"loc":{"start":{"line":289,"column":9},"end":{"line":289,"column":20}},"name":"isValidPart"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":8923,"end":8927,"loc":{"start":{"line":289,"column":22},"end":{"line":289,"column":26}},"name":"part"}],"body":{"type":"BlockStatement","start":8929,"end":9046,"loc":{"start":{"line":289,"column":28},"end":{"line":291,"column":1}},"body":[{"type":"ReturnStatement","start":8933,"end":9044,"loc":{"start":{"line":290,"column":2},"end":{"line":290,"column":113}},"argument":{"type":"LogicalExpression","start":8940,"end":9044,"loc":{"start":{"line":290,"column":9},"end":{"line":290,"column":113}},"left":{"type":"LogicalExpression","start":8940,"end":9011,"loc":{"start":{"line":290,"column":9},"end":{"line":290,"column":80}},"left":{"type":"LogicalExpression","start":8940,"end":8972,"loc":{"start":{"line":290,"column":9},"end":{"line":290,"column":41}},"left":{"type":"Identifier","start":8940,"end":8944,"loc":{"start":{"line":290,"column":9},"end":{"line":290,"column":13}},"name":"part"},"operator":"&&","right":{"type":"BinaryExpression","start":8948,"end":8972,"loc":{"start":{"line":290,"column":17},"end":{"line":290,"column":41}},"left":{"type":"UnaryExpression","start":8948,"end":8959,"loc":{"start":{"line":290,"column":17},"end":{"line":290,"column":28}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":8955,"end":8959,"loc":{"start":{"line":290,"column":24},"end":{"line":290,"column":28}},"name":"part"}},"operator":"===","right":{"type":"Literal","start":8964,"end":8972,"loc":{"start":{"line":290,"column":33},"end":{"line":290,"column":41}},"value":"object","raw":"'object'"}}},"operator":"&&","right":{"type":"BinaryExpression","start":8976,"end":9011,"loc":{"start":{"line":290,"column":45},"end":{"line":290,"column":80}},"left":{"type":"UnaryExpression","start":8976,"end":8998,"loc":{"start":{"line":290,"column":45},"end":{"line":290,"column":67}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":8983,"end":8998,"loc":{"start":{"line":290,"column":52},"end":{"line":290,"column":67}},"object":{"type":"Identifier","start":8983,"end":8987,"loc":{"start":{"line":290,"column":52},"end":{"line":290,"column":56}},"name":"part"},"property":{"type":"Identifier","start":8988,"end":8998,"loc":{"start":{"line":290,"column":57},"end":{"line":290,"column":67}},"name":"PartNumber"},"computed":false}},"operator":"===","right":{"type":"Literal","start":9003,"end":9011,"loc":{"start":{"line":290,"column":72},"end":{"line":290,"column":80}},"value":"number","raw":"'number'"}}},"operator":"&&","right":{"type":"BinaryExpression","start":9015,"end":9044,"loc":{"start":{"line":290,"column":84},"end":{"line":290,"column":113}},"left":{"type":"UnaryExpression","start":9015,"end":9031,"loc":{"start":{"line":290,"column":84},"end":{"line":290,"column":100}},"operator":"typeof","prefix":true,"argument":{"type":"MemberExpression","start":9022,"end":9031,"loc":{"start":{"line":290,"column":91},"end":{"line":290,"column":100}},"object":{"type":"Identifier","start":9022,"end":9026,"loc":{"start":{"line":290,"column":91},"end":{"line":290,"column":95}},"name":"part"},"property":{"type":"Identifier","start":9027,"end":9031,"loc":{"start":{"line":290,"column":96},"end":{"line":290,"column":100}},"name":"ETag"},"computed":false}},"operator":"===","right":{"type":"Literal","start":9036,"end":9044,"loc":{"start":{"line":290,"column":105},"end":{"line":290,"column":113}},"value":"string","raw":"'string'"}}}}]}}],"sourceType":"script"}