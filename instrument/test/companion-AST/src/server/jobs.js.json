{"type":"Program","start":0,"end":1986,"loc":{"start":{"line":1,"column":0},"end":{"line":56,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":41,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":41}},"declarations":[{"type":"VariableDeclarator","start":6,"end":41,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":41}},"id":{"type":"Identifier","start":6,"end":14,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":14}},"name":"schedule"},"init":{"type":"CallExpression","start":17,"end":41,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":41}},"callee":{"type":"Identifier","start":17,"end":24,"loc":{"start":{"line":1,"column":17},"end":{"line":1,"column":24}},"name":"require"},"arguments":[{"type":"Literal","start":25,"end":40,"loc":{"start":{"line":1,"column":25},"end":{"line":1,"column":40}},"value":"node-schedule","raw":"'node-schedule'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":42,"end":92,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":50}},"declarations":[{"type":"VariableDeclarator","start":48,"end":92,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":50}},"id":{"type":"ObjectPattern","start":48,"end":68,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":26}},"properties":[{"type":"Property","start":50,"end":66,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":24}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":50,"end":66,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":24}},"name":"FILE_NAME_PREFIX"},"kind":"init","value":{"type":"Identifier","start":50,"end":66,"loc":{"start":{"line":2,"column":8},"end":{"line":2,"column":24}},"name":"FILE_NAME_PREFIX"}}]},"init":{"type":"CallExpression","start":71,"end":92,"loc":{"start":{"line":2,"column":29},"end":{"line":2,"column":50}},"callee":{"type":"Identifier","start":71,"end":78,"loc":{"start":{"line":2,"column":29},"end":{"line":2,"column":36}},"name":"require"},"arguments":[{"type":"Literal","start":79,"end":91,"loc":{"start":{"line":2,"column":37},"end":{"line":2,"column":49}},"value":"./Uploader","raw":"'./Uploader'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":93,"end":117,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":24}},"declarations":[{"type":"VariableDeclarator","start":99,"end":117,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":24}},"id":{"type":"Identifier","start":99,"end":101,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":8}},"name":"fs"},"init":{"type":"CallExpression","start":104,"end":117,"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":24}},"callee":{"type":"Identifier","start":104,"end":111,"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":18}},"name":"require"},"arguments":[{"type":"Literal","start":112,"end":116,"loc":{"start":{"line":3,"column":19},"end":{"line":3,"column":23}},"value":"fs","raw":"'fs'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":118,"end":146,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":28}},"declarations":[{"type":"VariableDeclarator","start":124,"end":146,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":28}},"id":{"type":"Identifier","start":124,"end":128,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":10}},"name":"path"},"init":{"type":"CallExpression","start":131,"end":146,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":28}},"callee":{"type":"Identifier","start":131,"end":138,"loc":{"start":{"line":4,"column":13},"end":{"line":4,"column":20}},"name":"require"},"arguments":[{"type":"Literal","start":139,"end":145,"loc":{"start":{"line":4,"column":21},"end":{"line":4,"column":27}},"value":"path","raw":"'path'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":147,"end":181,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":34}},"declarations":[{"type":"VariableDeclarator","start":153,"end":181,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":34}},"id":{"type":"Identifier","start":153,"end":159,"loc":{"start":{"line":5,"column":6},"end":{"line":5,"column":12}},"name":"logger"},"init":{"type":"CallExpression","start":162,"end":181,"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":34}},"callee":{"type":"Identifier","start":162,"end":169,"loc":{"start":{"line":5,"column":15},"end":{"line":5,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":170,"end":180,"loc":{"start":{"line":5,"column":23},"end":{"line":5,"column":33}},"value":"./logger","raw":"'./logger'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":340,"end":539,"loc":{"start":{"line":11,"column":0},"end":{"line":15,"column":1}},"expression":{"type":"AssignmentExpression","start":340,"end":539,"loc":{"start":{"line":11,"column":0},"end":{"line":15,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":340,"end":363,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":23}},"object":{"type":"Identifier","start":340,"end":347,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":348,"end":363,"loc":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"name":"startCleanUpJob"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":366,"end":539,"loc":{"start":{"line":11,"column":26},"end":{"line":15,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":367,"end":374,"loc":{"start":{"line":11,"column":27},"end":{"line":11,"column":34}},"name":"dirPath"}],"body":{"type":"BlockStatement","start":379,"end":539,"loc":{"start":{"line":11,"column":39},"end":{"line":15,"column":1}},"body":[{"type":"ExpressionStatement","start":383,"end":441,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":60}},"expression":{"type":"CallExpression","start":383,"end":441,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":60}},"callee":{"type":"MemberExpression","start":383,"end":394,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":13}},"object":{"type":"Identifier","start":383,"end":389,"loc":{"start":{"line":12,"column":2},"end":{"line":12,"column":8}},"name":"logger"},"property":{"type":"Identifier","start":390,"end":394,"loc":{"start":{"line":12,"column":9},"end":{"line":12,"column":13}},"name":"info"},"computed":false},"arguments":[{"type":"Literal","start":395,"end":418,"loc":{"start":{"line":12,"column":14},"end":{"line":12,"column":37}},"value":"starting clean up job","raw":"'starting clean up job'"},{"type":"Literal","start":420,"end":440,"loc":{"start":{"line":12,"column":39},"end":{"line":12,"column":59}},"value":"jobs.cleanup.start","raw":"'jobs.cleanup.start'"}]}},{"type":"ExpressionStatement","start":464,"end":537,"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":75}},"expression":{"type":"CallExpression","start":464,"end":537,"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":75}},"callee":{"type":"MemberExpression","start":464,"end":484,"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":22}},"object":{"type":"Identifier","start":464,"end":472,"loc":{"start":{"line":14,"column":2},"end":{"line":14,"column":10}},"name":"schedule"},"property":{"type":"Identifier","start":473,"end":484,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":22}},"name":"scheduleJob"},"computed":false},"arguments":[{"type":"Literal","start":485,"end":497,"loc":{"start":{"line":14,"column":23},"end":{"line":14,"column":35}},"value":"0 23 * * *","raw":"'0 23 * * *'"},{"type":"ArrowFunctionExpression","start":499,"end":536,"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":74}},"id":null,"expression":true,"generator":false,"async":false,"params":[],"body":{"type":"CallExpression","start":505,"end":536,"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":74}},"callee":{"type":"Identifier","start":505,"end":527,"loc":{"start":{"line":14,"column":43},"end":{"line":14,"column":65}},"name":"cleanUpFinishedUploads"},"arguments":[{"type":"Identifier","start":528,"end":535,"loc":{"start":{"line":14,"column":66},"end":{"line":14,"column":73}},"name":"dirPath"}]}}]},"comments":[{"type":"Line","value":" run once a day","start":444,"end":461,"loc":{"start":{"line":13,"column":2},"end":{"line":13,"column":19}}}]}]}}},"comments":[{"type":"Block","value":"*\n * Runs a function every 24 hours, to clean up stale, upload related files.\n * @param {string} dirPath path to the directory which you want to clean\n ","start":183,"end":339,"loc":{"start":{"line":7,"column":0},"end":{"line":10,"column":3}}}]},{"type":"VariableDeclaration","start":541,"end":1985,"loc":{"start":{"line":17,"column":0},"end":{"line":55,"column":1}},"declarations":[{"type":"VariableDeclarator","start":547,"end":1985,"loc":{"start":{"line":17,"column":6},"end":{"line":55,"column":1}},"id":{"type":"Identifier","start":547,"end":569,"loc":{"start":{"line":17,"column":6},"end":{"line":17,"column":28}},"name":"cleanUpFinishedUploads"},"init":{"type":"ArrowFunctionExpression","start":572,"end":1985,"loc":{"start":{"line":17,"column":31},"end":{"line":55,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":573,"end":580,"loc":{"start":{"line":17,"column":32},"end":{"line":17,"column":39}},"name":"dirPath"}],"body":{"type":"BlockStatement","start":585,"end":1985,"loc":{"start":{"line":17,"column":44},"end":{"line":55,"column":1}},"body":[{"type":"ExpressionStatement","start":589,"end":675,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":88}},"expression":{"type":"CallExpression","start":589,"end":675,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":88}},"callee":{"type":"MemberExpression","start":589,"end":600,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":13}},"object":{"type":"Identifier","start":589,"end":595,"loc":{"start":{"line":18,"column":2},"end":{"line":18,"column":8}},"name":"logger"},"property":{"type":"Identifier","start":596,"end":600,"loc":{"start":{"line":18,"column":9},"end":{"line":18,"column":13}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":601,"end":644,"loc":{"start":{"line":18,"column":14},"end":{"line":18,"column":57}},"expressions":[{"type":"Identifier","start":635,"end":642,"loc":{"start":{"line":18,"column":48},"end":{"line":18,"column":55}},"name":"dirPath"}],"quasis":[{"type":"TemplateElement","start":602,"end":633,"loc":{"start":{"line":18,"column":15},"end":{"line":18,"column":46}},"value":{"raw":"running clean up job for path: ","cooked":"running clean up job for path: "},"tail":false},{"type":"TemplateElement","start":643,"end":643,"loc":{"start":{"line":18,"column":56},"end":{"line":18,"column":56}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":646,"end":674,"loc":{"start":{"line":18,"column":59},"end":{"line":18,"column":87}},"value":"jobs.cleanup.progress.read","raw":"'jobs.cleanup.progress.read'"}]}},{"type":"ExpressionStatement","start":678,"end":1983,"loc":{"start":{"line":19,"column":2},"end":{"line":54,"column":4}},"expression":{"type":"CallExpression","start":678,"end":1983,"loc":{"start":{"line":19,"column":2},"end":{"line":54,"column":4}},"callee":{"type":"MemberExpression","start":678,"end":688,"loc":{"start":{"line":19,"column":2},"end":{"line":19,"column":12}},"object":{"type":"Identifier","start":678,"end":680,"loc":{"start":{"line":19,"column":2},"end":{"line":19,"column":4}},"name":"fs"},"property":{"type":"Identifier","start":681,"end":688,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":12}},"name":"readdir"},"computed":false},"arguments":[{"type":"Identifier","start":689,"end":696,"loc":{"start":{"line":19,"column":13},"end":{"line":19,"column":20}},"name":"dirPath"},{"type":"ArrowFunctionExpression","start":698,"end":1982,"loc":{"start":{"line":19,"column":22},"end":{"line":54,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":699,"end":702,"loc":{"start":{"line":19,"column":23},"end":{"line":19,"column":26}},"name":"err"},{"type":"Identifier","start":704,"end":709,"loc":{"start":{"line":19,"column":28},"end":{"line":19,"column":33}},"name":"files"}],"body":{"type":"BlockStatement","start":714,"end":1982,"loc":{"start":{"line":19,"column":38},"end":{"line":54,"column":3}},"body":[{"type":"IfStatement","start":720,"end":800,"loc":{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},"test":{"type":"Identifier","start":724,"end":727,"loc":{"start":{"line":20,"column":8},"end":{"line":20,"column":11}},"name":"err"},"consequent":{"type":"BlockStatement","start":729,"end":800,"loc":{"start":{"line":20,"column":13},"end":{"line":23,"column":5}},"body":[{"type":"ExpressionStatement","start":737,"end":781,"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":50}},"expression":{"type":"CallExpression","start":737,"end":781,"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":50}},"callee":{"type":"MemberExpression","start":737,"end":749,"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":18}},"object":{"type":"Identifier","start":737,"end":743,"loc":{"start":{"line":21,"column":6},"end":{"line":21,"column":12}},"name":"logger"},"property":{"type":"Identifier","start":744,"end":749,"loc":{"start":{"line":21,"column":13},"end":{"line":21,"column":18}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":750,"end":753,"loc":{"start":{"line":21,"column":19},"end":{"line":21,"column":22}},"name":"err"},{"type":"Literal","start":755,"end":780,"loc":{"start":{"line":21,"column":24},"end":{"line":21,"column":49}},"value":"jobs.cleanup.read.error","raw":"'jobs.cleanup.read.error'"}]}},{"type":"ReturnStatement","start":788,"end":794,"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":12}},"argument":null}]},"alternate":null},{"type":"ExpressionStatement","start":806,"end":870,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":68}},"expression":{"type":"CallExpression","start":806,"end":870,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":68}},"callee":{"type":"MemberExpression","start":806,"end":817,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":15}},"object":{"type":"Identifier","start":806,"end":812,"loc":{"start":{"line":25,"column":4},"end":{"line":25,"column":10}},"name":"logger"},"property":{"type":"Identifier","start":813,"end":817,"loc":{"start":{"line":25,"column":11},"end":{"line":25,"column":15}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":818,"end":847,"loc":{"start":{"line":25,"column":16},"end":{"line":25,"column":45}},"expressions":[{"type":"MemberExpression","start":827,"end":839,"loc":{"start":{"line":25,"column":25},"end":{"line":25,"column":37}},"object":{"type":"Identifier","start":827,"end":832,"loc":{"start":{"line":25,"column":25},"end":{"line":25,"column":30}},"name":"files"},"property":{"type":"Identifier","start":833,"end":839,"loc":{"start":{"line":25,"column":31},"end":{"line":25,"column":37}},"name":"length"},"computed":false}],"quasis":[{"type":"TemplateElement","start":819,"end":825,"loc":{"start":{"line":25,"column":17},"end":{"line":25,"column":23}},"value":{"raw":"found ","cooked":"found "},"tail":false},{"type":"TemplateElement","start":840,"end":846,"loc":{"start":{"line":25,"column":38},"end":{"line":25,"column":44}},"value":{"raw":" files","cooked":" files"},"tail":true}]},{"type":"Literal","start":849,"end":869,"loc":{"start":{"line":25,"column":47},"end":{"line":25,"column":67}},"value":"jobs.cleanup.files","raw":"'jobs.cleanup.files'"}]}},{"type":"ExpressionStatement","start":875,"end":1978,"loc":{"start":{"line":26,"column":4},"end":{"line":53,"column":6}},"expression":{"type":"CallExpression","start":875,"end":1978,"loc":{"start":{"line":26,"column":4},"end":{"line":53,"column":6}},"callee":{"type":"MemberExpression","start":875,"end":888,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":17}},"object":{"type":"Identifier","start":875,"end":880,"loc":{"start":{"line":26,"column":4},"end":{"line":26,"column":9}},"name":"files"},"property":{"type":"Identifier","start":881,"end":888,"loc":{"start":{"line":26,"column":10},"end":{"line":26,"column":17}},"name":"forEach"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":889,"end":1977,"loc":{"start":{"line":26,"column":18},"end":{"line":53,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":890,"end":894,"loc":{"start":{"line":26,"column":19},"end":{"line":26,"column":23}},"name":"file"},{"type":"Identifier","start":896,"end":905,"loc":{"start":{"line":26,"column":25},"end":{"line":26,"column":34}},"name":"fileIndex"}],"body":{"type":"BlockStatement","start":910,"end":1977,"loc":{"start":{"line":26,"column":39},"end":{"line":53,"column":5}},"body":[{"type":"IfStatement","start":1134,"end":1264,"loc":{"start":{"line":30,"column":6},"end":{"line":33,"column":7}},"test":{"type":"UnaryExpression","start":1138,"end":1172,"loc":{"start":{"line":30,"column":10},"end":{"line":30,"column":44}},"operator":"!","prefix":true,"argument":{"type":"CallExpression","start":1139,"end":1172,"loc":{"start":{"line":30,"column":11},"end":{"line":30,"column":44}},"callee":{"type":"MemberExpression","start":1139,"end":1154,"loc":{"start":{"line":30,"column":11},"end":{"line":30,"column":26}},"object":{"type":"Identifier","start":1139,"end":1143,"loc":{"start":{"line":30,"column":11},"end":{"line":30,"column":15}},"name":"file"},"property":{"type":"Identifier","start":1144,"end":1154,"loc":{"start":{"line":30,"column":16},"end":{"line":30,"column":26}},"name":"startsWith"},"computed":false},"arguments":[{"type":"Identifier","start":1155,"end":1171,"loc":{"start":{"line":30,"column":27},"end":{"line":30,"column":43}},"name":"FILE_NAME_PREFIX"}]}},"consequent":{"type":"BlockStatement","start":1174,"end":1264,"loc":{"start":{"line":30,"column":46},"end":{"line":33,"column":7}},"body":[{"type":"ExpressionStatement","start":1184,"end":1241,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":65}},"expression":{"type":"CallExpression","start":1184,"end":1241,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":65}},"callee":{"type":"MemberExpression","start":1184,"end":1195,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":19}},"object":{"type":"Identifier","start":1184,"end":1190,"loc":{"start":{"line":31,"column":8},"end":{"line":31,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":1191,"end":1195,"loc":{"start":{"line":31,"column":15},"end":{"line":31,"column":19}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1196,"end":1219,"loc":{"start":{"line":31,"column":20},"end":{"line":31,"column":43}},"expressions":[{"type":"Identifier","start":1213,"end":1217,"loc":{"start":{"line":31,"column":37},"end":{"line":31,"column":41}},"name":"file"}],"quasis":[{"type":"TemplateElement","start":1197,"end":1211,"loc":{"start":{"line":31,"column":21},"end":{"line":31,"column":35}},"value":{"raw":"skipping file ","cooked":"skipping file "},"tail":false},{"type":"TemplateElement","start":1218,"end":1218,"loc":{"start":{"line":31,"column":42},"end":{"line":31,"column":42}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":1221,"end":1240,"loc":{"start":{"line":31,"column":45},"end":{"line":31,"column":64}},"value":"jobs.cleanup.skip","raw":"'jobs.cleanup.skip'"}]}},{"type":"ReturnStatement","start":1250,"end":1256,"loc":{"start":{"line":32,"column":8},"end":{"line":32,"column":14}},"argument":null}]},"alternate":null,"comments":[{"type":"Line","value":" if it does not contain FILE_NAME_PREFIX then it probably wasn't created by companion.","start":918,"end":1006,"loc":{"start":{"line":27,"column":6},"end":{"line":27,"column":94}}},{"type":"Line","value":" this is to avoid deleting unintended files, e.g if a wrong path was accidentally given","start":1013,"end":1102,"loc":{"start":{"line":28,"column":6},"end":{"line":28,"column":95}}},{"type":"Line","value":" by a developer.","start":1109,"end":1127,"loc":{"start":{"line":29,"column":6},"end":{"line":29,"column":24}}}]},{"type":"VariableDeclaration","start":1271,"end":1312,"loc":{"start":{"line":34,"column":6},"end":{"line":34,"column":47}},"declarations":[{"type":"VariableDeclarator","start":1277,"end":1312,"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":47}},"id":{"type":"Identifier","start":1277,"end":1285,"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":20}},"name":"fullPath"},"init":{"type":"CallExpression","start":1288,"end":1312,"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":47}},"callee":{"type":"MemberExpression","start":1288,"end":1297,"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":32}},"object":{"type":"Identifier","start":1288,"end":1292,"loc":{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},"name":"path"},"property":{"type":"Identifier","start":1293,"end":1297,"loc":{"start":{"line":34,"column":28},"end":{"line":34,"column":32}},"name":"join"},"computed":false},"arguments":[{"type":"Identifier","start":1298,"end":1305,"loc":{"start":{"line":34,"column":33},"end":{"line":34,"column":40}},"name":"dirPath"},{"type":"Identifier","start":1307,"end":1311,"loc":{"start":{"line":34,"column":42},"end":{"line":34,"column":46}},"name":"file"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1320,"end":1971,"loc":{"start":{"line":36,"column":6},"end":{"line":52,"column":8}},"expression":{"type":"CallExpression","start":1320,"end":1971,"loc":{"start":{"line":36,"column":6},"end":{"line":52,"column":8}},"callee":{"type":"MemberExpression","start":1320,"end":1327,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":13}},"object":{"type":"Identifier","start":1320,"end":1322,"loc":{"start":{"line":36,"column":6},"end":{"line":36,"column":8}},"name":"fs"},"property":{"type":"Identifier","start":1323,"end":1327,"loc":{"start":{"line":36,"column":9},"end":{"line":36,"column":13}},"name":"stat"},"computed":false},"arguments":[{"type":"Identifier","start":1328,"end":1336,"loc":{"start":{"line":36,"column":14},"end":{"line":36,"column":22}},"name":"fullPath"},{"type":"ArrowFunctionExpression","start":1338,"end":1970,"loc":{"start":{"line":36,"column":24},"end":{"line":52,"column":7}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1339,"end":1342,"loc":{"start":{"line":36,"column":25},"end":{"line":36,"column":28}},"name":"err"},{"type":"Identifier","start":1344,"end":1349,"loc":{"start":{"line":36,"column":30},"end":{"line":36,"column":35}},"name":"stats"}],"body":{"type":"BlockStatement","start":1354,"end":1970,"loc":{"start":{"line":36,"column":40},"end":{"line":52,"column":7}},"body":[{"type":"VariableDeclaration","start":1364,"end":1406,"loc":{"start":{"line":37,"column":8},"end":{"line":37,"column":50}},"declarations":[{"type":"VariableDeclarator","start":1370,"end":1406,"loc":{"start":{"line":37,"column":14},"end":{"line":37,"column":50}},"id":{"type":"Identifier","start":1370,"end":1384,"loc":{"start":{"line":37,"column":14},"end":{"line":37,"column":28}},"name":"twelveHoursAgo"},"init":{"type":"BinaryExpression","start":1387,"end":1406,"loc":{"start":{"line":37,"column":31},"end":{"line":37,"column":50}},"left":{"type":"BinaryExpression","start":1387,"end":1399,"loc":{"start":{"line":37,"column":31},"end":{"line":37,"column":43}},"left":{"type":"BinaryExpression","start":1387,"end":1394,"loc":{"start":{"line":37,"column":31},"end":{"line":37,"column":38}},"left":{"type":"Literal","start":1387,"end":1389,"loc":{"start":{"line":37,"column":31},"end":{"line":37,"column":33}},"value":12,"raw":"12"},"operator":"*","right":{"type":"Literal","start":1392,"end":1394,"loc":{"start":{"line":37,"column":36},"end":{"line":37,"column":38}},"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1397,"end":1399,"loc":{"start":{"line":37,"column":41},"end":{"line":37,"column":43}},"value":60,"raw":"60"}},"operator":"*","right":{"type":"Literal","start":1402,"end":1406,"loc":{"start":{"line":37,"column":46},"end":{"line":37,"column":50}},"value":1000,"raw":"1000"}}}],"kind":"const"},{"type":"IfStatement","start":1415,"end":1768,"loc":{"start":{"line":38,"column":8},"end":{"line":46,"column":9}},"test":{"type":"Identifier","start":1419,"end":1422,"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":15}},"name":"err"},"consequent":{"type":"BlockStatement","start":1424,"end":1615,"loc":{"start":{"line":38,"column":17},"end":{"line":43,"column":9}},"body":[{"type":"ExpressionStatement","start":1539,"end":1583,"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":54}},"expression":{"type":"CallExpression","start":1539,"end":1583,"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":54}},"callee":{"type":"MemberExpression","start":1539,"end":1551,"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":22}},"object":{"type":"Identifier","start":1539,"end":1545,"loc":{"start":{"line":41,"column":10},"end":{"line":41,"column":16}},"name":"logger"},"property":{"type":"Identifier","start":1546,"end":1551,"loc":{"start":{"line":41,"column":17},"end":{"line":41,"column":22}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":1552,"end":1555,"loc":{"start":{"line":41,"column":23},"end":{"line":41,"column":26}},"name":"err"},{"type":"Literal","start":1557,"end":1582,"loc":{"start":{"line":41,"column":28},"end":{"line":41,"column":53}},"value":"jobs.cleanup.stat.error","raw":"'jobs.cleanup.stat.error'"}]},"comments":[{"type":"Line","value":" we still delete the file if we can't get the stats","start":1436,"end":1489,"loc":{"start":{"line":39,"column":10},"end":{"line":39,"column":63}}},{"type":"Line","value":" but we also log the error","start":1500,"end":1528,"loc":{"start":{"line":40,"column":10},"end":{"line":40,"column":38}}}]}],"trailingComments":[{"type":"Line","value":" @ts-ignore","start":1592,"end":1605,"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":21}}}]},"alternate":{"type":"IfStatement","start":1621,"end":1768,"loc":{"start":{"line":43,"column":15},"end":{"line":46,"column":9}},"test":{"type":"BinaryExpression","start":1625,"end":1670,"loc":{"start":{"line":43,"column":19},"end":{"line":43,"column":64}},"left":{"type":"BinaryExpression","start":1626,"end":1652,"loc":{"start":{"line":43,"column":20},"end":{"line":43,"column":46}},"left":{"type":"NewExpression","start":1627,"end":1637,"loc":{"start":{"line":43,"column":21},"end":{"line":43,"column":31}},"callee":{"type":"Identifier","start":1631,"end":1635,"loc":{"start":{"line":43,"column":25},"end":{"line":43,"column":29}},"name":"Date"},"arguments":[]},"operator":"-","right":{"type":"MemberExpression","start":1641,"end":1652,"loc":{"start":{"line":43,"column":35},"end":{"line":43,"column":46}},"object":{"type":"Identifier","start":1641,"end":1646,"loc":{"start":{"line":43,"column":35},"end":{"line":43,"column":40}},"name":"stats"},"property":{"type":"Identifier","start":1647,"end":1652,"loc":{"start":{"line":43,"column":41},"end":{"line":43,"column":46}},"name":"mtime"},"computed":false}},"operator":"<","right":{"type":"Identifier","start":1656,"end":1670,"loc":{"start":{"line":43,"column":50},"end":{"line":43,"column":64}},"name":"twelveHoursAgo"}},"consequent":{"type":"BlockStatement","start":1672,"end":1768,"loc":{"start":{"line":43,"column":66},"end":{"line":46,"column":9}},"body":[{"type":"ExpressionStatement","start":1684,"end":1741,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":67}},"expression":{"type":"CallExpression","start":1684,"end":1741,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":67}},"callee":{"type":"MemberExpression","start":1684,"end":1695,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":21}},"object":{"type":"Identifier","start":1684,"end":1690,"loc":{"start":{"line":44,"column":10},"end":{"line":44,"column":16}},"name":"logger"},"property":{"type":"Identifier","start":1691,"end":1695,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":21}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1696,"end":1719,"loc":{"start":{"line":44,"column":22},"end":{"line":44,"column":45}},"expressions":[{"type":"Identifier","start":1713,"end":1717,"loc":{"start":{"line":44,"column":39},"end":{"line":44,"column":43}},"name":"file"}],"quasis":[{"type":"TemplateElement","start":1697,"end":1711,"loc":{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},"value":{"raw":"skipping file ","cooked":"skipping file "},"tail":false},{"type":"TemplateElement","start":1718,"end":1718,"loc":{"start":{"line":44,"column":44},"end":{"line":44,"column":44}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":1721,"end":1740,"loc":{"start":{"line":44,"column":47},"end":{"line":44,"column":66}},"value":"jobs.cleanup.skip","raw":"'jobs.cleanup.skip'"}]}},{"type":"ReturnStatement","start":1752,"end":1758,"loc":{"start":{"line":45,"column":10},"end":{"line":45,"column":16}},"argument":null}]},"alternate":null}},{"type":"ExpressionStatement","start":1778,"end":1846,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":76}},"expression":{"type":"CallExpression","start":1778,"end":1846,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":76}},"callee":{"type":"MemberExpression","start":1778,"end":1789,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":19}},"object":{"type":"Identifier","start":1778,"end":1784,"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":14}},"name":"logger"},"property":{"type":"Identifier","start":1785,"end":1789,"loc":{"start":{"line":48,"column":15},"end":{"line":48,"column":19}},"name":"info"},"computed":false},"arguments":[{"type":"TemplateLiteral","start":1790,"end":1813,"loc":{"start":{"line":48,"column":20},"end":{"line":48,"column":43}},"expressions":[{"type":"Identifier","start":1807,"end":1811,"loc":{"start":{"line":48,"column":37},"end":{"line":48,"column":41}},"name":"file"}],"quasis":[{"type":"TemplateElement","start":1791,"end":1805,"loc":{"start":{"line":48,"column":21},"end":{"line":48,"column":35}},"value":{"raw":"deleting file ","cooked":"deleting file "},"tail":false},{"type":"TemplateElement","start":1812,"end":1812,"loc":{"start":{"line":48,"column":42},"end":{"line":48,"column":42}},"value":{"raw":"","cooked":""},"tail":true}]},{"type":"Literal","start":1815,"end":1845,"loc":{"start":{"line":48,"column":45},"end":{"line":48,"column":75}},"value":"jobs.cleanup.progress.delete","raw":"'jobs.cleanup.progress.delete'"}]}},{"type":"ExpressionStatement","start":1855,"end":1962,"loc":{"start":{"line":49,"column":8},"end":{"line":51,"column":10}},"expression":{"type":"CallExpression","start":1855,"end":1962,"loc":{"start":{"line":49,"column":8},"end":{"line":51,"column":10}},"callee":{"type":"MemberExpression","start":1855,"end":1864,"loc":{"start":{"line":49,"column":8},"end":{"line":49,"column":17}},"object":{"type":"Identifier","start":1855,"end":1857,"loc":{"start":{"line":49,"column":8},"end":{"line":49,"column":10}},"name":"fs"},"property":{"type":"Identifier","start":1858,"end":1864,"loc":{"start":{"line":49,"column":11},"end":{"line":49,"column":17}},"name":"unlink"},"computed":false},"arguments":[{"type":"Identifier","start":1865,"end":1873,"loc":{"start":{"line":49,"column":18},"end":{"line":49,"column":26}},"name":"fullPath"},{"type":"ArrowFunctionExpression","start":1875,"end":1961,"loc":{"start":{"line":49,"column":28},"end":{"line":51,"column":9}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1876,"end":1879,"loc":{"start":{"line":49,"column":29},"end":{"line":49,"column":32}},"name":"err"}],"body":{"type":"BlockStatement","start":1884,"end":1961,"loc":{"start":{"line":49,"column":37},"end":{"line":51,"column":9}},"body":[{"type":"IfStatement","start":1896,"end":1951,"loc":{"start":{"line":50,"column":10},"end":{"line":50,"column":65}},"test":{"type":"Identifier","start":1900,"end":1903,"loc":{"start":{"line":50,"column":14},"end":{"line":50,"column":17}},"name":"err"},"consequent":{"type":"ExpressionStatement","start":1905,"end":1951,"loc":{"start":{"line":50,"column":19},"end":{"line":50,"column":65}},"expression":{"type":"CallExpression","start":1905,"end":1951,"loc":{"start":{"line":50,"column":19},"end":{"line":50,"column":65}},"callee":{"type":"MemberExpression","start":1905,"end":1917,"loc":{"start":{"line":50,"column":19},"end":{"line":50,"column":31}},"object":{"type":"Identifier","start":1905,"end":1911,"loc":{"start":{"line":50,"column":19},"end":{"line":50,"column":25}},"name":"logger"},"property":{"type":"Identifier","start":1912,"end":1917,"loc":{"start":{"line":50,"column":26},"end":{"line":50,"column":31}},"name":"error"},"computed":false},"arguments":[{"type":"Identifier","start":1918,"end":1921,"loc":{"start":{"line":50,"column":32},"end":{"line":50,"column":35}},"name":"err"},{"type":"Literal","start":1923,"end":1950,"loc":{"start":{"line":50,"column":37},"end":{"line":50,"column":64}},"value":"jobs.cleanup.delete.error","raw":"'jobs.cleanup.delete.error'"}]}},"alternate":null}]}}]}}]}}]}}]}}]}}]}}]}}]}}}],"kind":"const"}],"sourceType":"script"}