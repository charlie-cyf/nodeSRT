{"type":"Program","start":0,"end":4773,"loc":{"start":{"line":1,"column":0},"end":{"line":185,"column":0}},"body":[{"type":"VariableDeclaration","start":0,"end":34,"loc":{"start":{"line":1,"column":0},"end":{"line":1,"column":34}},"declarations":[{"type":"VariableDeclarator","start":6,"end":34,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":34}},"id":{"type":"Identifier","start":6,"end":13,"loc":{"start":{"line":1,"column":6},"end":{"line":1,"column":13}},"name":"request"},"init":{"type":"CallExpression","start":16,"end":34,"loc":{"start":{"line":1,"column":16},"end":{"line":1,"column":34}},"callee":{"type":"Identifier","start":16,"end":23,"loc":{"start":{"line":1,"column":16},"end":{"line":1,"column":23}},"name":"require"},"arguments":[{"type":"Literal","start":24,"end":33,"loc":{"start":{"line":1,"column":24},"end":{"line":1,"column":33}},"value":"request","raw":"'request'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":35,"end":67,"loc":{"start":{"line":2,"column":0},"end":{"line":2,"column":32}},"declarations":[{"type":"VariableDeclarator","start":41,"end":67,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":32}},"id":{"type":"Identifier","start":41,"end":50,"loc":{"start":{"line":2,"column":6},"end":{"line":2,"column":15}},"name":"urlParser"},"init":{"type":"CallExpression","start":53,"end":67,"loc":{"start":{"line":2,"column":18},"end":{"line":2,"column":32}},"callee":{"type":"Identifier","start":53,"end":60,"loc":{"start":{"line":2,"column":18},"end":{"line":2,"column":25}},"name":"require"},"arguments":[{"type":"Literal","start":61,"end":66,"loc":{"start":{"line":2,"column":26},"end":{"line":2,"column":31}},"value":"url","raw":"'url'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":68,"end":100,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"declarations":[{"type":"VariableDeclarator","start":74,"end":100,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":32}},"id":{"type":"Identifier","start":74,"end":80,"loc":{"start":{"line":3,"column":6},"end":{"line":3,"column":12}},"name":"crypto"},"init":{"type":"CallExpression","start":83,"end":100,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":32}},"callee":{"type":"Identifier","start":83,"end":90,"loc":{"start":{"line":3,"column":15},"end":{"line":3,"column":22}},"name":"require"},"arguments":[{"type":"Literal","start":91,"end":99,"loc":{"start":{"line":3,"column":23},"end":{"line":3,"column":31}},"value":"crypto","raw":"'crypto'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":101,"end":155,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":54}},"declarations":[{"type":"VariableDeclarator","start":107,"end":155,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":54}},"id":{"type":"ObjectPattern","start":107,"end":132,"loc":{"start":{"line":4,"column":6},"end":{"line":4,"column":31}},"properties":[{"type":"Property","start":109,"end":130,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":29}},"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":109,"end":130,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":29}},"name":"getProtectedHttpAgent"},"kind":"init","value":{"type":"Identifier","start":109,"end":130,"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":29}},"name":"getProtectedHttpAgent"}}]},"init":{"type":"CallExpression","start":135,"end":155,"loc":{"start":{"line":4,"column":34},"end":{"line":4,"column":54}},"callee":{"type":"Identifier","start":135,"end":142,"loc":{"start":{"line":4,"column":34},"end":{"line":4,"column":41}},"name":"require"},"arguments":[{"type":"Literal","start":143,"end":154,"loc":{"start":{"line":4,"column":42},"end":{"line":4,"column":53}},"value":"./request","raw":"'./request'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":245,"end":379,"loc":{"start":{"line":12,"column":0},"end":{"line":16,"column":1}},"expression":{"type":"AssignmentExpression","start":245,"end":379,"loc":{"start":{"line":12,"column":0},"end":{"line":16,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":245,"end":261,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":16}},"object":{"type":"Identifier","start":245,"end":252,"loc":{"start":{"line":12,"column":0},"end":{"line":12,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":253,"end":261,"loc":{"start":{"line":12,"column":8},"end":{"line":12,"column":16}},"name":"hasMatch"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":264,"end":379,"loc":{"start":{"line":12,"column":19},"end":{"line":16,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":265,"end":270,"loc":{"start":{"line":12,"column":20},"end":{"line":12,"column":25}},"name":"value"},{"type":"Identifier","start":272,"end":280,"loc":{"start":{"line":12,"column":27},"end":{"line":12,"column":35}},"name":"criteria"}],"body":{"type":"BlockStatement","start":285,"end":379,"loc":{"start":{"line":12,"column":40},"end":{"line":16,"column":1}},"body":[{"type":"ReturnStatement","start":289,"end":377,"loc":{"start":{"line":13,"column":2},"end":{"line":15,"column":4}},"argument":{"type":"CallExpression","start":296,"end":377,"loc":{"start":{"line":13,"column":9},"end":{"line":15,"column":4}},"callee":{"type":"MemberExpression","start":296,"end":309,"loc":{"start":{"line":13,"column":9},"end":{"line":13,"column":22}},"object":{"type":"Identifier","start":296,"end":304,"loc":{"start":{"line":13,"column":9},"end":{"line":13,"column":17}},"name":"criteria"},"property":{"type":"Identifier","start":305,"end":309,"loc":{"start":{"line":13,"column":18},"end":{"line":13,"column":22}},"name":"some"},"computed":false},"arguments":[{"type":"ArrowFunctionExpression","start":310,"end":376,"loc":{"start":{"line":13,"column":23},"end":{"line":15,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":311,"end":312,"loc":{"start":{"line":13,"column":24},"end":{"line":13,"column":25}},"name":"i"}],"body":{"type":"BlockStatement","start":317,"end":376,"loc":{"start":{"line":13,"column":30},"end":{"line":15,"column":3}},"body":[{"type":"ReturnStatement","start":323,"end":372,"loc":{"start":{"line":14,"column":4},"end":{"line":14,"column":53}},"argument":{"type":"LogicalExpression","start":330,"end":372,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":53}},"left":{"type":"BinaryExpression","start":330,"end":341,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":22}},"left":{"type":"Identifier","start":330,"end":335,"loc":{"start":{"line":14,"column":11},"end":{"line":14,"column":16}},"name":"value"},"operator":"===","right":{"type":"Identifier","start":340,"end":341,"loc":{"start":{"line":14,"column":21},"end":{"line":14,"column":22}},"name":"i"}},"operator":"||","right":{"type":"CallExpression","start":345,"end":372,"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":53}},"callee":{"type":"MemberExpression","start":345,"end":365,"loc":{"start":{"line":14,"column":26},"end":{"line":14,"column":46}},"object":{"type":"NewExpression","start":346,"end":359,"loc":{"start":{"line":14,"column":27},"end":{"line":14,"column":40}},"callee":{"type":"Identifier","start":350,"end":356,"loc":{"start":{"line":14,"column":31},"end":{"line":14,"column":37}},"name":"RegExp"},"arguments":[{"type":"Identifier","start":357,"end":358,"loc":{"start":{"line":14,"column":38},"end":{"line":14,"column":39}},"name":"i"}]},"property":{"type":"Identifier","start":361,"end":365,"loc":{"start":{"line":14,"column":42},"end":{"line":14,"column":46}},"name":"test"},"computed":false},"arguments":[{"type":"Identifier","start":366,"end":371,"loc":{"start":{"line":14,"column":47},"end":{"line":14,"column":52}},"name":"value"}]}}}]}}]}}]}}},"comments":[{"type":"Block","value":"*\n *\n * @param {string} value\n * @param {string[]} criteria\n * @returns {boolean}\n ","start":157,"end":244,"loc":{"start":{"line":6,"column":0},"end":{"line":11,"column":3}}}]},{"type":"ExpressionStatement","start":437,"end":761,"loc":{"start":{"line":23,"column":0},"end":{"line":35,"column":1}},"expression":{"type":"AssignmentExpression","start":437,"end":761,"loc":{"start":{"line":23,"column":0},"end":{"line":35,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":437,"end":458,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":21}},"object":{"type":"Identifier","start":437,"end":444,"loc":{"start":{"line":23,"column":0},"end":{"line":23,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":445,"end":458,"loc":{"start":{"line":23,"column":8},"end":{"line":23,"column":21}},"name":"jsonStringify"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":461,"end":761,"loc":{"start":{"line":23,"column":24},"end":{"line":35,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":462,"end":466,"loc":{"start":{"line":23,"column":25},"end":{"line":23,"column":29}},"name":"data"}],"body":{"type":"BlockStatement","start":471,"end":761,"loc":{"start":{"line":23,"column":34},"end":{"line":35,"column":1}},"body":[{"type":"VariableDeclaration","start":475,"end":491,"loc":{"start":{"line":24,"column":2},"end":{"line":24,"column":18}},"declarations":[{"type":"VariableDeclarator","start":481,"end":491,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":18}},"id":{"type":"Identifier","start":481,"end":486,"loc":{"start":{"line":24,"column":8},"end":{"line":24,"column":13}},"name":"cache"},"init":{"type":"ArrayExpression","start":489,"end":491,"loc":{"start":{"line":24,"column":16},"end":{"line":24,"column":18}},"elements":[]}}],"kind":"const"},{"type":"ReturnStatement","start":494,"end":759,"loc":{"start":{"line":25,"column":2},"end":{"line":34,"column":4}},"argument":{"type":"CallExpression","start":501,"end":759,"loc":{"start":{"line":25,"column":9},"end":{"line":34,"column":4}},"callee":{"type":"MemberExpression","start":501,"end":515,"loc":{"start":{"line":25,"column":9},"end":{"line":25,"column":23}},"object":{"type":"Identifier","start":501,"end":505,"loc":{"start":{"line":25,"column":9},"end":{"line":25,"column":13}},"name":"JSON"},"property":{"type":"Identifier","start":506,"end":515,"loc":{"start":{"line":25,"column":14},"end":{"line":25,"column":23}},"name":"stringify"},"computed":false},"arguments":[{"type":"Identifier","start":516,"end":520,"loc":{"start":{"line":25,"column":24},"end":{"line":25,"column":28}},"name":"data"},{"type":"ArrowFunctionExpression","start":522,"end":758,"loc":{"start":{"line":25,"column":30},"end":{"line":34,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":523,"end":526,"loc":{"start":{"line":25,"column":31},"end":{"line":25,"column":34}},"name":"key"},{"type":"Identifier","start":528,"end":533,"loc":{"start":{"line":25,"column":36},"end":{"line":25,"column":41}},"name":"value"}],"body":{"type":"BlockStatement","start":538,"end":758,"loc":{"start":{"line":25,"column":46},"end":{"line":34,"column":3}},"body":[{"type":"IfStatement","start":544,"end":737,"loc":{"start":{"line":26,"column":4},"end":{"line":32,"column":5}},"test":{"type":"LogicalExpression","start":548,"end":591,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":51}},"left":{"type":"BinaryExpression","start":548,"end":573,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":33}},"left":{"type":"UnaryExpression","start":548,"end":560,"loc":{"start":{"line":26,"column":8},"end":{"line":26,"column":20}},"operator":"typeof","prefix":true,"argument":{"type":"Identifier","start":555,"end":560,"loc":{"start":{"line":26,"column":15},"end":{"line":26,"column":20}},"name":"value"}},"operator":"===","right":{"type":"Literal","start":565,"end":573,"loc":{"start":{"line":26,"column":25},"end":{"line":26,"column":33}},"value":"object","raw":"'object'"}},"operator":"&&","right":{"type":"BinaryExpression","start":577,"end":591,"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":51}},"left":{"type":"Identifier","start":577,"end":582,"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":42}},"name":"value"},"operator":"!==","right":{"type":"Literal","start":587,"end":591,"loc":{"start":{"line":26,"column":47},"end":{"line":26,"column":51}},"value":null,"raw":"null"}}},"consequent":{"type":"BlockStatement","start":593,"end":737,"loc":{"start":{"line":26,"column":53},"end":{"line":32,"column":5}},"body":[{"type":"IfStatement","start":601,"end":707,"loc":{"start":{"line":27,"column":6},"end":{"line":30,"column":7}},"test":{"type":"BinaryExpression","start":605,"end":632,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":37}},"left":{"type":"CallExpression","start":605,"end":625,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":30}},"callee":{"type":"MemberExpression","start":605,"end":618,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":23}},"object":{"type":"Identifier","start":605,"end":610,"loc":{"start":{"line":27,"column":10},"end":{"line":27,"column":15}},"name":"cache"},"property":{"type":"Identifier","start":611,"end":618,"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":23}},"name":"indexOf"},"computed":false},"arguments":[{"type":"Identifier","start":619,"end":624,"loc":{"start":{"line":27,"column":24},"end":{"line":27,"column":29}},"name":"value"}]},"operator":"!==","right":{"type":"UnaryExpression","start":630,"end":632,"loc":{"start":{"line":27,"column":35},"end":{"line":27,"column":37}},"operator":"-","prefix":true,"argument":{"type":"Literal","start":631,"end":632,"loc":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"value":1,"raw":"1"}}},"consequent":{"type":"BlockStatement","start":634,"end":707,"loc":{"start":{"line":27,"column":39},"end":{"line":30,"column":7}},"body":[{"type":"ReturnStatement","start":693,"end":699,"loc":{"start":{"line":29,"column":8},"end":{"line":29,"column":14}},"argument":null,"comments":[{"type":"Line","value":" Circular reference found, discard key","start":644,"end":684,"loc":{"start":{"line":28,"column":8},"end":{"line":28,"column":48}}}]}]},"alternate":null},{"type":"ExpressionStatement","start":714,"end":731,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":23}},"expression":{"type":"CallExpression","start":714,"end":731,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":23}},"callee":{"type":"MemberExpression","start":714,"end":724,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":16}},"object":{"type":"Identifier","start":714,"end":719,"loc":{"start":{"line":31,"column":6},"end":{"line":31,"column":11}},"name":"cache"},"property":{"type":"Identifier","start":720,"end":724,"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":16}},"name":"push"},"computed":false},"arguments":[{"type":"Identifier","start":725,"end":730,"loc":{"start":{"line":31,"column":17},"end":{"line":31,"column":22}},"name":"value"}]}}]},"alternate":null},{"type":"ReturnStatement","start":742,"end":754,"loc":{"start":{"line":33,"column":4},"end":{"line":33,"column":16}},"argument":{"type":"Identifier","start":749,"end":754,"loc":{"start":{"line":33,"column":11},"end":{"line":33,"column":16}},"name":"value"}}]}}]}}]}}},"comments":[{"type":"Block","value":"*\n *\n * @param {object} data\n * @returns {string}\n ","start":381,"end":436,"loc":{"start":{"line":18,"column":0},"end":{"line":22,"column":3}}}]},{"type":"ExpressionStatement","start":853,"end":948,"loc":{"start":{"line":42,"column":0},"end":{"line":44,"column":1}},"expression":{"type":"AssignmentExpression","start":853,"end":948,"loc":{"start":{"line":42,"column":0},"end":{"line":44,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":853,"end":873,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":20}},"object":{"type":"Identifier","start":853,"end":860,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":861,"end":873,"loc":{"start":{"line":42,"column":8},"end":{"line":42,"column":20}},"name":"sanitizeHtml"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":876,"end":948,"loc":{"start":{"line":42,"column":23},"end":{"line":44,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":877,"end":881,"loc":{"start":{"line":42,"column":24},"end":{"line":42,"column":28}},"name":"text"}],"body":{"type":"BlockStatement","start":886,"end":948,"loc":{"start":{"line":42,"column":33},"end":{"line":44,"column":1}},"body":[{"type":"ReturnStatement","start":890,"end":946,"loc":{"start":{"line":43,"column":2},"end":{"line":43,"column":58}},"argument":{"type":"ConditionalExpression","start":897,"end":946,"loc":{"start":{"line":43,"column":9},"end":{"line":43,"column":58}},"test":{"type":"Identifier","start":897,"end":901,"loc":{"start":{"line":43,"column":9},"end":{"line":43,"column":13}},"name":"text"},"consequent":{"type":"CallExpression","start":904,"end":939,"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":51}},"callee":{"type":"MemberExpression","start":904,"end":916,"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":28}},"object":{"type":"Identifier","start":904,"end":908,"loc":{"start":{"line":43,"column":16},"end":{"line":43,"column":20}},"name":"text"},"property":{"type":"Identifier","start":909,"end":916,"loc":{"start":{"line":43,"column":21},"end":{"line":43,"column":28}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":917,"end":934,"loc":{"start":{"line":43,"column":29},"end":{"line":43,"column":46}},"value":{},"raw":"/<\\/?[^>]+(>|$)/g","regex":{"pattern":"<\\/?[^>]+(>|$)","flags":"g"}},{"type":"Literal","start":936,"end":938,"loc":{"start":{"line":43,"column":48},"end":{"line":43,"column":50}},"value":"","raw":"''"}]},"alternate":{"type":"Identifier","start":942,"end":946,"loc":{"start":{"line":43,"column":54},"end":{"line":43,"column":58}},"name":"text"}}}]}}},"comments":[{"type":"Block","value":"*\n * Does a simple html sanitization on the passed value\n *\n * @param {string} text\n ","start":763,"end":852,"loc":{"start":{"line":37,"column":0},"end":{"line":41,"column":3}}}]},{"type":"ExpressionStatement","start":1115,"end":1247,"loc":{"start":{"line":52,"column":0},"end":{"line":55,"column":1}},"expression":{"type":"AssignmentExpression","start":1115,"end":1247,"loc":{"start":{"line":52,"column":0},"end":{"line":55,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":1115,"end":1131,"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":16}},"object":{"type":"Identifier","start":1115,"end":1122,"loc":{"start":{"line":52,"column":0},"end":{"line":52,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":1123,"end":1131,"loc":{"start":{"line":52,"column":8},"end":{"line":52,"column":16}},"name":"parseURL"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1134,"end":1247,"loc":{"start":{"line":52,"column":19},"end":{"line":55,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1135,"end":1138,"loc":{"start":{"line":52,"column":20},"end":{"line":52,"column":23}},"name":"url"}],"body":{"type":"BlockStatement","start":1143,"end":1247,"loc":{"start":{"line":52,"column":28},"end":{"line":55,"column":1}},"body":[{"type":"ReturnStatement","start":1177,"end":1245,"loc":{"start":{"line":54,"column":2},"end":{"line":54,"column":70}},"argument":{"type":"ConditionalExpression","start":1184,"end":1245,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":70}},"test":{"type":"MemberExpression","start":1184,"end":1197,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":22}},"object":{"type":"Identifier","start":1184,"end":1193,"loc":{"start":{"line":54,"column":9},"end":{"line":54,"column":18}},"name":"urlParser"},"property":{"type":"Identifier","start":1194,"end":1197,"loc":{"start":{"line":54,"column":19},"end":{"line":54,"column":22}},"name":"URL"},"computed":false},"consequent":{"type":"NewExpression","start":1200,"end":1222,"loc":{"start":{"line":54,"column":25},"end":{"line":54,"column":47}},"callee":{"type":"MemberExpression","start":1204,"end":1217,"loc":{"start":{"line":54,"column":29},"end":{"line":54,"column":42}},"object":{"type":"Identifier","start":1204,"end":1213,"loc":{"start":{"line":54,"column":29},"end":{"line":54,"column":38}},"name":"urlParser"},"property":{"type":"Identifier","start":1214,"end":1217,"loc":{"start":{"line":54,"column":39},"end":{"line":54,"column":42}},"name":"URL"},"computed":false},"arguments":[{"type":"Identifier","start":1218,"end":1221,"loc":{"start":{"line":54,"column":43},"end":{"line":54,"column":46}},"name":"url"}]},"alternate":{"type":"CallExpression","start":1225,"end":1245,"loc":{"start":{"line":54,"column":50},"end":{"line":54,"column":70}},"callee":{"type":"MemberExpression","start":1225,"end":1240,"loc":{"start":{"line":54,"column":50},"end":{"line":54,"column":65}},"object":{"type":"Identifier","start":1225,"end":1234,"loc":{"start":{"line":54,"column":50},"end":{"line":54,"column":59}},"name":"urlParser"},"property":{"type":"Identifier","start":1235,"end":1240,"loc":{"start":{"line":54,"column":60},"end":{"line":54,"column":65}},"name":"parse"},"computed":false},"arguments":[{"type":"Identifier","start":1241,"end":1244,"loc":{"start":{"line":54,"column":66},"end":{"line":54,"column":69}},"name":"url"}]}},"comments":[{"type":"Line","value":" eslint-disable-next-line","start":1147,"end":1174,"loc":{"start":{"line":53,"column":2},"end":{"line":53,"column":29}}}]}]}}},"comments":[{"type":"Block","value":"*\n * Node 6(and beyond) compatible url parser\n * @todo drop the use of url.parse when support for node 6 is dropped\n *\n * @param {string} url URL to be parsed\n ","start":950,"end":1114,"loc":{"start":{"line":46,"column":0},"end":{"line":51,"column":3}}}]},{"type":"ExpressionStatement","start":1392,"end":1932,"loc":{"start":{"line":64,"column":0},"end":{"line":84,"column":1}},"expression":{"type":"AssignmentExpression","start":1392,"end":1932,"loc":{"start":{"line":64,"column":0},"end":{"line":84,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":1392,"end":1410,"loc":{"start":{"line":64,"column":0},"end":{"line":64,"column":18}},"object":{"type":"Identifier","start":1392,"end":1399,"loc":{"start":{"line":64,"column":0},"end":{"line":64,"column":7}},"name":"exports"},"property":{"type":"Identifier","start":1400,"end":1410,"loc":{"start":{"line":64,"column":8},"end":{"line":64,"column":18}},"name":"getURLMeta"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":1413,"end":1932,"loc":{"start":{"line":64,"column":21},"end":{"line":84,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1414,"end":1417,"loc":{"start":{"line":64,"column":22},"end":{"line":64,"column":25}},"name":"url"},{"type":"AssignmentPattern","start":1419,"end":1440,"loc":{"start":{"line":64,"column":27},"end":{"line":64,"column":48}},"left":{"type":"Identifier","start":1419,"end":1432,"loc":{"start":{"line":64,"column":27},"end":{"line":64,"column":40}},"name":"blockLocalIPs"},"right":{"type":"Literal","start":1435,"end":1440,"loc":{"start":{"line":64,"column":43},"end":{"line":64,"column":48}},"value":false,"raw":"false"}}],"body":{"type":"BlockStatement","start":1445,"end":1932,"loc":{"start":{"line":64,"column":53},"end":{"line":84,"column":1}},"body":[{"type":"ReturnStatement","start":1449,"end":1930,"loc":{"start":{"line":65,"column":2},"end":{"line":83,"column":4}},"argument":{"type":"NewExpression","start":1456,"end":1930,"loc":{"start":{"line":65,"column":9},"end":{"line":83,"column":4}},"callee":{"type":"Identifier","start":1460,"end":1467,"loc":{"start":{"line":65,"column":13},"end":{"line":65,"column":20}},"name":"Promise"},"arguments":[{"type":"ArrowFunctionExpression","start":1468,"end":1929,"loc":{"start":{"line":65,"column":21},"end":{"line":83,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1469,"end":1476,"loc":{"start":{"line":65,"column":22},"end":{"line":65,"column":29}},"name":"resolve"},{"type":"Identifier","start":1478,"end":1484,"loc":{"start":{"line":65,"column":31},"end":{"line":65,"column":37}},"name":"reject"}],"body":{"type":"BlockStatement","start":1489,"end":1929,"loc":{"start":{"line":65,"column":42},"end":{"line":83,"column":3}},"body":[{"type":"VariableDeclaration","start":1495,"end":1672,"loc":{"start":{"line":66,"column":4},"end":{"line":71,"column":5}},"declarations":[{"type":"VariableDeclarator","start":1501,"end":1672,"loc":{"start":{"line":66,"column":10},"end":{"line":71,"column":5}},"id":{"type":"Identifier","start":1501,"end":1505,"loc":{"start":{"line":66,"column":10},"end":{"line":66,"column":14}},"name":"opts"},"init":{"type":"ObjectExpression","start":1508,"end":1672,"loc":{"start":{"line":66,"column":17},"end":{"line":71,"column":5}},"properties":[{"type":"Property","start":1516,"end":1524,"loc":{"start":{"line":67,"column":6},"end":{"line":67,"column":14}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1516,"end":1519,"loc":{"start":{"line":67,"column":6},"end":{"line":67,"column":9}},"name":"uri"},"value":{"type":"Identifier","start":1521,"end":1524,"loc":{"start":{"line":67,"column":11},"end":{"line":67,"column":14}},"name":"url"},"kind":"init"},{"type":"Property","start":1532,"end":1546,"loc":{"start":{"line":68,"column":6},"end":{"line":68,"column":20}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1532,"end":1538,"loc":{"start":{"line":68,"column":6},"end":{"line":68,"column":12}},"name":"method"},"value":{"type":"Literal","start":1540,"end":1546,"loc":{"start":{"line":68,"column":14},"end":{"line":68,"column":20}},"value":"HEAD","raw":"'HEAD'"},"kind":"init"},{"type":"Property","start":1554,"end":1578,"loc":{"start":{"line":69,"column":6},"end":{"line":69,"column":30}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1554,"end":1572,"loc":{"start":{"line":69,"column":6},"end":{"line":69,"column":24}},"name":"followAllRedirects"},"value":{"type":"Literal","start":1574,"end":1578,"loc":{"start":{"line":69,"column":26},"end":{"line":69,"column":30}},"value":true,"raw":"true"},"kind":"init"},{"type":"Property","start":1586,"end":1666,"loc":{"start":{"line":70,"column":6},"end":{"line":70,"column":86}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1586,"end":1596,"loc":{"start":{"line":70,"column":6},"end":{"line":70,"column":16}},"name":"agentClass"},"value":{"type":"CallExpression","start":1598,"end":1666,"loc":{"start":{"line":70,"column":18},"end":{"line":70,"column":86}},"callee":{"type":"Identifier","start":1598,"end":1619,"loc":{"start":{"line":70,"column":18},"end":{"line":70,"column":39}},"name":"getProtectedHttpAgent"},"arguments":[{"type":"MemberExpression","start":1620,"end":1650,"loc":{"start":{"line":70,"column":40},"end":{"line":70,"column":70}},"object":{"type":"CallExpression","start":1620,"end":1641,"loc":{"start":{"line":70,"column":40},"end":{"line":70,"column":61}},"callee":{"type":"MemberExpression","start":1620,"end":1636,"loc":{"start":{"line":70,"column":40},"end":{"line":70,"column":56}},"object":{"type":"Identifier","start":1620,"end":1627,"loc":{"start":{"line":70,"column":40},"end":{"line":70,"column":47}},"name":"exports"},"property":{"type":"Identifier","start":1628,"end":1636,"loc":{"start":{"line":70,"column":48},"end":{"line":70,"column":56}},"name":"parseURL"},"computed":false},"arguments":[{"type":"Identifier","start":1637,"end":1640,"loc":{"start":{"line":70,"column":57},"end":{"line":70,"column":60}},"name":"url"}]},"property":{"type":"Identifier","start":1642,"end":1650,"loc":{"start":{"line":70,"column":62},"end":{"line":70,"column":70}},"name":"protocol"},"computed":false},{"type":"Identifier","start":1652,"end":1665,"loc":{"start":{"line":70,"column":72},"end":{"line":70,"column":85}},"name":"blockLocalIPs"}]},"kind":"init"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":1678,"end":1925,"loc":{"start":{"line":73,"column":4},"end":{"line":82,"column":6}},"expression":{"type":"CallExpression","start":1678,"end":1925,"loc":{"start":{"line":73,"column":4},"end":{"line":82,"column":6}},"callee":{"type":"Identifier","start":1678,"end":1685,"loc":{"start":{"line":73,"column":4},"end":{"line":73,"column":11}},"name":"request"},"arguments":[{"type":"Identifier","start":1686,"end":1690,"loc":{"start":{"line":73,"column":12},"end":{"line":73,"column":16}},"name":"opts"},{"type":"ArrowFunctionExpression","start":1692,"end":1924,"loc":{"start":{"line":73,"column":18},"end":{"line":82,"column":5}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":1693,"end":1696,"loc":{"start":{"line":73,"column":19},"end":{"line":73,"column":22}},"name":"err"},{"type":"Identifier","start":1698,"end":1706,"loc":{"start":{"line":73,"column":24},"end":{"line":73,"column":32}},"name":"response"},{"type":"Identifier","start":1708,"end":1712,"loc":{"start":{"line":73,"column":34},"end":{"line":73,"column":38}},"name":"body"}],"body":{"type":"BlockStatement","start":1717,"end":1924,"loc":{"start":{"line":73,"column":43},"end":{"line":82,"column":5}},"body":[{"type":"IfStatement","start":1725,"end":1918,"loc":{"start":{"line":74,"column":6},"end":{"line":81,"column":7}},"test":{"type":"Identifier","start":1729,"end":1732,"loc":{"start":{"line":74,"column":10},"end":{"line":74,"column":13}},"name":"err"},"consequent":{"type":"BlockStatement","start":1734,"end":1763,"loc":{"start":{"line":74,"column":15},"end":{"line":76,"column":7}},"body":[{"type":"ExpressionStatement","start":1744,"end":1755,"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":19}},"expression":{"type":"CallExpression","start":1744,"end":1755,"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":19}},"callee":{"type":"Identifier","start":1744,"end":1750,"loc":{"start":{"line":75,"column":8},"end":{"line":75,"column":14}},"name":"reject"},"arguments":[{"type":"Identifier","start":1751,"end":1754,"loc":{"start":{"line":75,"column":15},"end":{"line":75,"column":18}},"name":"err"}]}}]},"alternate":{"type":"BlockStatement","start":1769,"end":1918,"loc":{"start":{"line":76,"column":13},"end":{"line":81,"column":7}},"body":[{"type":"ExpressionStatement","start":1779,"end":1910,"loc":{"start":{"line":77,"column":8},"end":{"line":80,"column":10}},"expression":{"type":"CallExpression","start":1779,"end":1910,"loc":{"start":{"line":77,"column":8},"end":{"line":80,"column":10}},"callee":{"type":"Identifier","start":1779,"end":1786,"loc":{"start":{"line":77,"column":8},"end":{"line":77,"column":15}},"name":"resolve"},"arguments":[{"type":"ObjectExpression","start":1787,"end":1909,"loc":{"start":{"line":77,"column":16},"end":{"line":80,"column":9}},"properties":[{"type":"Property","start":1799,"end":1837,"loc":{"start":{"line":78,"column":10},"end":{"line":78,"column":48}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1799,"end":1803,"loc":{"start":{"line":78,"column":10},"end":{"line":78,"column":14}},"name":"type"},"value":{"type":"MemberExpression","start":1805,"end":1837,"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":48}},"object":{"type":"MemberExpression","start":1805,"end":1821,"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":32}},"object":{"type":"Identifier","start":1805,"end":1813,"loc":{"start":{"line":78,"column":16},"end":{"line":78,"column":24}},"name":"response"},"property":{"type":"Identifier","start":1814,"end":1821,"loc":{"start":{"line":78,"column":25},"end":{"line":78,"column":32}},"name":"headers"},"computed":false},"property":{"type":"Literal","start":1822,"end":1836,"loc":{"start":{"line":78,"column":33},"end":{"line":78,"column":47}},"value":"content-type","raw":"'content-type'"},"computed":true},"kind":"init"},{"type":"Property","start":1849,"end":1899,"loc":{"start":{"line":79,"column":10},"end":{"line":79,"column":60}},"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":1849,"end":1853,"loc":{"start":{"line":79,"column":10},"end":{"line":79,"column":14}},"name":"size"},"value":{"type":"CallExpression","start":1855,"end":1899,"loc":{"start":{"line":79,"column":16},"end":{"line":79,"column":60}},"callee":{"type":"Identifier","start":1855,"end":1863,"loc":{"start":{"line":79,"column":16},"end":{"line":79,"column":24}},"name":"parseInt"},"arguments":[{"type":"MemberExpression","start":1864,"end":1898,"loc":{"start":{"line":79,"column":25},"end":{"line":79,"column":59}},"object":{"type":"MemberExpression","start":1864,"end":1880,"loc":{"start":{"line":79,"column":25},"end":{"line":79,"column":41}},"object":{"type":"Identifier","start":1864,"end":1872,"loc":{"start":{"line":79,"column":25},"end":{"line":79,"column":33}},"name":"response"},"property":{"type":"Identifier","start":1873,"end":1880,"loc":{"start":{"line":79,"column":34},"end":{"line":79,"column":41}},"name":"headers"},"computed":false},"property":{"type":"Literal","start":1881,"end":1897,"loc":{"start":{"line":79,"column":42},"end":{"line":79,"column":58}},"value":"content-length","raw":"'content-length'"},"computed":true}]},"kind":"init"}]}]}}]}}]}}]}}]}}]}}]}}},"comments":[{"type":"Block","value":"*\n * Gets the size and content type of a url's content\n *\n * @param {string} url\n * @param {boolean=} blockLocalIPs\n * @return {Promise}\n ","start":1249,"end":1391,"loc":{"start":{"line":57,"column":0},"end":{"line":63,"column":3}}}]},{"type":"ExpressionStatement","start":2060,"end":2760,"loc":{"start":{"line":92,"column":0},"end":{"line":117,"column":1}},"expression":{"type":"AssignmentExpression","start":2060,"end":2760,"loc":{"start":{"line":92,"column":0},"end":{"line":117,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":2060,"end":2088,"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":28}},"object":{"type":"MemberExpression","start":2060,"end":2074,"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":14}},"object":{"type":"Identifier","start":2060,"end":2066,"loc":{"start":{"line":92,"column":0},"end":{"line":92,"column":6}},"name":"module"},"property":{"type":"Identifier","start":2067,"end":2074,"loc":{"start":{"line":92,"column":7},"end":{"line":92,"column":14}},"name":"exports"},"computed":false},"property":{"type":"Identifier","start":2075,"end":2088,"loc":{"start":{"line":92,"column":15},"end":{"line":92,"column":28}},"name":"getURLBuilder"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":2091,"end":2760,"loc":{"start":{"line":92,"column":31},"end":{"line":117,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2092,"end":2099,"loc":{"start":{"line":92,"column":32},"end":{"line":92,"column":39}},"name":"options"}],"body":{"type":"BlockStatement","start":2104,"end":2760,"loc":{"start":{"line":92,"column":44},"end":{"line":117,"column":1}},"body":[{"type":"VariableDeclaration","start":2369,"end":2739,"loc":{"start":{"line":100,"column":2},"end":{"line":114,"column":3}},"declarations":[{"type":"VariableDeclarator","start":2375,"end":2739,"loc":{"start":{"line":100,"column":8},"end":{"line":114,"column":3}},"id":{"type":"Identifier","start":2375,"end":2383,"loc":{"start":{"line":100,"column":8},"end":{"line":100,"column":16}},"name":"buildURL"},"init":{"type":"ArrowFunctionExpression","start":2386,"end":2739,"loc":{"start":{"line":100,"column":19},"end":{"line":114,"column":3}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2387,"end":2391,"loc":{"start":{"line":100,"column":20},"end":{"line":100,"column":24}},"name":"path"},{"type":"Identifier","start":2393,"end":2403,"loc":{"start":{"line":100,"column":26},"end":{"line":100,"column":36}},"name":"isExternal"},{"type":"Identifier","start":2405,"end":2416,"loc":{"start":{"line":100,"column":38},"end":{"line":100,"column":49}},"name":"excludeHost"}],"body":{"type":"BlockStatement","start":2421,"end":2739,"loc":{"start":{"line":100,"column":54},"end":{"line":114,"column":3}},"body":[{"type":"VariableDeclaration","start":2427,"end":2441,"loc":{"start":{"line":101,"column":4},"end":{"line":101,"column":18}},"declarations":[{"type":"VariableDeclarator","start":2431,"end":2441,"loc":{"start":{"line":101,"column":8},"end":{"line":101,"column":18}},"id":{"type":"Identifier","start":2431,"end":2434,"loc":{"start":{"line":101,"column":8},"end":{"line":101,"column":11}},"name":"url"},"init":{"type":"Identifier","start":2437,"end":2441,"loc":{"start":{"line":101,"column":14},"end":{"line":101,"column":18}},"name":"path"}}],"kind":"let"},{"type":"IfStatement","start":2488,"end":2568,"loc":{"start":{"line":103,"column":4},"end":{"line":105,"column":5}},"test":{"type":"Identifier","start":2492,"end":2502,"loc":{"start":{"line":103,"column":8},"end":{"line":103,"column":18}},"name":"isExternal"},"consequent":{"type":"BlockStatement","start":2504,"end":2568,"loc":{"start":{"line":103,"column":20},"end":{"line":105,"column":5}},"body":[{"type":"ExpressionStatement","start":2512,"end":2562,"loc":{"start":{"line":104,"column":6},"end":{"line":104,"column":56}},"expression":{"type":"AssignmentExpression","start":2512,"end":2562,"loc":{"start":{"line":104,"column":6},"end":{"line":104,"column":56}},"operator":"=","left":{"type":"Identifier","start":2512,"end":2515,"loc":{"start":{"line":104,"column":6},"end":{"line":104,"column":9}},"name":"url"},"right":{"type":"TemplateLiteral","start":2518,"end":2562,"loc":{"start":{"line":104,"column":12},"end":{"line":104,"column":56}},"expressions":[{"type":"LogicalExpression","start":2521,"end":2554,"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":48}},"left":{"type":"MemberExpression","start":2521,"end":2548,"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":42}},"object":{"type":"MemberExpression","start":2521,"end":2535,"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":29}},"object":{"type":"Identifier","start":2521,"end":2528,"loc":{"start":{"line":104,"column":15},"end":{"line":104,"column":22}},"name":"options"},"property":{"type":"Identifier","start":2529,"end":2535,"loc":{"start":{"line":104,"column":23},"end":{"line":104,"column":29}},"name":"server"},"computed":false},"property":{"type":"Identifier","start":2536,"end":2548,"loc":{"start":{"line":104,"column":30},"end":{"line":104,"column":42}},"name":"implicitPath"},"computed":false},"operator":"||","right":{"type":"Literal","start":2552,"end":2554,"loc":{"start":{"line":104,"column":46},"end":{"line":104,"column":48}},"value":"","raw":"''"}},{"type":"Identifier","start":2557,"end":2560,"loc":{"start":{"line":104,"column":51},"end":{"line":104,"column":54}},"name":"url"}],"quasis":[{"type":"TemplateElement","start":2519,"end":2519,"loc":{"start":{"line":104,"column":13},"end":{"line":104,"column":13}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2555,"end":2555,"loc":{"start":{"line":104,"column":49},"end":{"line":104,"column":49}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2561,"end":2561,"loc":{"start":{"line":104,"column":55},"end":{"line":104,"column":55}},"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null,"comments":[{"type":"Line","value":" supports for no path specified too","start":2446,"end":2483,"loc":{"start":{"line":102,"column":4},"end":{"line":102,"column":41}}}]},{"type":"ExpressionStatement","start":2574,"end":2616,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":46}},"expression":{"type":"AssignmentExpression","start":2574,"end":2616,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":46}},"operator":"=","left":{"type":"Identifier","start":2574,"end":2577,"loc":{"start":{"line":107,"column":4},"end":{"line":107,"column":7}},"name":"url"},"right":{"type":"TemplateLiteral","start":2580,"end":2616,"loc":{"start":{"line":107,"column":10},"end":{"line":107,"column":46}},"expressions":[{"type":"LogicalExpression","start":2583,"end":2608,"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":38}},"left":{"type":"MemberExpression","start":2583,"end":2602,"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":32}},"object":{"type":"MemberExpression","start":2583,"end":2597,"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":27}},"object":{"type":"Identifier","start":2583,"end":2590,"loc":{"start":{"line":107,"column":13},"end":{"line":107,"column":20}},"name":"options"},"property":{"type":"Identifier","start":2591,"end":2597,"loc":{"start":{"line":107,"column":21},"end":{"line":107,"column":27}},"name":"server"},"computed":false},"property":{"type":"Identifier","start":2598,"end":2602,"loc":{"start":{"line":107,"column":28},"end":{"line":107,"column":32}},"name":"path"},"computed":false},"operator":"||","right":{"type":"Literal","start":2606,"end":2608,"loc":{"start":{"line":107,"column":36},"end":{"line":107,"column":38}},"value":"","raw":"''"}},{"type":"Identifier","start":2611,"end":2614,"loc":{"start":{"line":107,"column":41},"end":{"line":107,"column":44}},"name":"url"}],"quasis":[{"type":"TemplateElement","start":2581,"end":2581,"loc":{"start":{"line":107,"column":11},"end":{"line":107,"column":11}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2609,"end":2609,"loc":{"start":{"line":107,"column":39},"end":{"line":107,"column":39}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2615,"end":2615,"loc":{"start":{"line":107,"column":45},"end":{"line":107,"column":45}},"value":{"raw":"","cooked":""},"tail":true}]}}},{"type":"IfStatement","start":2622,"end":2719,"loc":{"start":{"line":109,"column":4},"end":{"line":111,"column":5}},"test":{"type":"UnaryExpression","start":2626,"end":2638,"loc":{"start":{"line":109,"column":8},"end":{"line":109,"column":20}},"operator":"!","prefix":true,"argument":{"type":"Identifier","start":2627,"end":2638,"loc":{"start":{"line":109,"column":9},"end":{"line":109,"column":20}},"name":"excludeHost"}},"consequent":{"type":"BlockStatement","start":2640,"end":2719,"loc":{"start":{"line":109,"column":22},"end":{"line":111,"column":5}},"body":[{"type":"ExpressionStatement","start":2648,"end":2713,"loc":{"start":{"line":110,"column":6},"end":{"line":110,"column":71}},"expression":{"type":"AssignmentExpression","start":2648,"end":2713,"loc":{"start":{"line":110,"column":6},"end":{"line":110,"column":71}},"operator":"=","left":{"type":"Identifier","start":2648,"end":2651,"loc":{"start":{"line":110,"column":6},"end":{"line":110,"column":9}},"name":"url"},"right":{"type":"TemplateLiteral","start":2654,"end":2713,"loc":{"start":{"line":110,"column":12},"end":{"line":110,"column":71}},"expressions":[{"type":"MemberExpression","start":2657,"end":2680,"loc":{"start":{"line":110,"column":15},"end":{"line":110,"column":38}},"object":{"type":"MemberExpression","start":2657,"end":2671,"loc":{"start":{"line":110,"column":15},"end":{"line":110,"column":29}},"object":{"type":"Identifier","start":2657,"end":2664,"loc":{"start":{"line":110,"column":15},"end":{"line":110,"column":22}},"name":"options"},"property":{"type":"Identifier","start":2665,"end":2671,"loc":{"start":{"line":110,"column":23},"end":{"line":110,"column":29}},"name":"server"},"computed":false},"property":{"type":"Identifier","start":2672,"end":2680,"loc":{"start":{"line":110,"column":30},"end":{"line":110,"column":38}},"name":"protocol"},"computed":false},{"type":"MemberExpression","start":2686,"end":2705,"loc":{"start":{"line":110,"column":44},"end":{"line":110,"column":63}},"object":{"type":"MemberExpression","start":2686,"end":2700,"loc":{"start":{"line":110,"column":44},"end":{"line":110,"column":58}},"object":{"type":"Identifier","start":2686,"end":2693,"loc":{"start":{"line":110,"column":44},"end":{"line":110,"column":51}},"name":"options"},"property":{"type":"Identifier","start":2694,"end":2700,"loc":{"start":{"line":110,"column":52},"end":{"line":110,"column":58}},"name":"server"},"computed":false},"property":{"type":"Identifier","start":2701,"end":2705,"loc":{"start":{"line":110,"column":59},"end":{"line":110,"column":63}},"name":"host"},"computed":false},{"type":"Identifier","start":2708,"end":2711,"loc":{"start":{"line":110,"column":66},"end":{"line":110,"column":69}},"name":"url"}],"quasis":[{"type":"TemplateElement","start":2655,"end":2655,"loc":{"start":{"line":110,"column":13},"end":{"line":110,"column":13}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2681,"end":2684,"loc":{"start":{"line":110,"column":39},"end":{"line":110,"column":42}},"value":{"raw":"://","cooked":"://"},"tail":false},{"type":"TemplateElement","start":2706,"end":2706,"loc":{"start":{"line":110,"column":64},"end":{"line":110,"column":64}},"value":{"raw":"","cooked":""},"tail":false},{"type":"TemplateElement","start":2712,"end":2712,"loc":{"start":{"line":110,"column":70},"end":{"line":110,"column":70}},"value":{"raw":"","cooked":""},"tail":true}]}}}]},"alternate":null},{"type":"ReturnStatement","start":2725,"end":2735,"loc":{"start":{"line":113,"column":4},"end":{"line":113,"column":14}},"argument":{"type":"Identifier","start":2732,"end":2735,"loc":{"start":{"line":113,"column":11},"end":{"line":113,"column":14}},"name":"url"}}]}}}],"kind":"const"},{"type":"ReturnStatement","start":2743,"end":2758,"loc":{"start":{"line":116,"column":2},"end":{"line":116,"column":17}},"argument":{"type":"Identifier","start":2750,"end":2758,"loc":{"start":{"line":116,"column":9},"end":{"line":116,"column":17}},"name":"buildURL"}}],"comments":[{"type":"Block","value":"*\n   * Builds companion targeted url\n   *\n   * @param {string} path the tail path of the url\n   * @param {boolean} isExternal if the url is for the external world\n   * @param {boolean=} excludeHost if the server domain and protocol should be included\n   ","start":2108,"end":2366,"loc":{"start":{"line":93,"column":2},"end":{"line":99,"column":5}}}]}}},"comments":[{"type":"Line","value":" all paths are assumed to be '/' prepended","start":1934,"end":1978,"loc":{"start":{"line":86,"column":0},"end":{"line":86,"column":44}}},{"type":"Block","value":"*\n * Returns a url builder\n *\n * @param {object} options companion options\n ","start":1979,"end":2059,"loc":{"start":{"line":87,"column":0},"end":{"line":91,"column":3}}}]},{"type":"FunctionDeclaration","start":2933,"end":3055,"loc":{"start":{"line":125,"column":0},"end":{"line":129,"column":1}},"id":{"type":"Identifier","start":2942,"end":2954,"loc":{"start":{"line":125,"column":9},"end":{"line":125,"column":21}},"name":"createSecret"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":2956,"end":2962,"loc":{"start":{"line":125,"column":23},"end":{"line":125,"column":29}},"name":"secret"}],"body":{"type":"BlockStatement","start":2964,"end":3055,"loc":{"start":{"line":125,"column":31},"end":{"line":129,"column":1}},"body":[{"type":"VariableDeclaration","start":2968,"end":3008,"loc":{"start":{"line":126,"column":2},"end":{"line":126,"column":42}},"declarations":[{"type":"VariableDeclarator","start":2974,"end":3008,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":42}},"id":{"type":"Identifier","start":2974,"end":2978,"loc":{"start":{"line":126,"column":8},"end":{"line":126,"column":12}},"name":"hash"},"init":{"type":"CallExpression","start":2981,"end":3008,"loc":{"start":{"line":126,"column":15},"end":{"line":126,"column":42}},"callee":{"type":"MemberExpression","start":2981,"end":2998,"loc":{"start":{"line":126,"column":15},"end":{"line":126,"column":32}},"object":{"type":"Identifier","start":2981,"end":2987,"loc":{"start":{"line":126,"column":15},"end":{"line":126,"column":21}},"name":"crypto"},"property":{"type":"Identifier","start":2988,"end":2998,"loc":{"start":{"line":126,"column":22},"end":{"line":126,"column":32}},"name":"createHash"},"computed":false},"arguments":[{"type":"Literal","start":2999,"end":3007,"loc":{"start":{"line":126,"column":33},"end":{"line":126,"column":41}},"value":"sha256","raw":"'sha256'"}]}}],"kind":"const"},{"type":"ExpressionStatement","start":3011,"end":3030,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":21}},"expression":{"type":"CallExpression","start":3011,"end":3030,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":21}},"callee":{"type":"MemberExpression","start":3011,"end":3022,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":13}},"object":{"type":"Identifier","start":3011,"end":3015,"loc":{"start":{"line":127,"column":2},"end":{"line":127,"column":6}},"name":"hash"},"property":{"type":"Identifier","start":3016,"end":3022,"loc":{"start":{"line":127,"column":7},"end":{"line":127,"column":13}},"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":3023,"end":3029,"loc":{"start":{"line":127,"column":14},"end":{"line":127,"column":20}},"name":"secret"}]}},{"type":"ReturnStatement","start":3033,"end":3053,"loc":{"start":{"line":128,"column":2},"end":{"line":128,"column":22}},"argument":{"type":"CallExpression","start":3040,"end":3053,"loc":{"start":{"line":128,"column":9},"end":{"line":128,"column":22}},"callee":{"type":"MemberExpression","start":3040,"end":3051,"loc":{"start":{"line":128,"column":9},"end":{"line":128,"column":20}},"object":{"type":"Identifier","start":3040,"end":3044,"loc":{"start":{"line":128,"column":9},"end":{"line":128,"column":13}},"name":"hash"},"property":{"type":"Identifier","start":3045,"end":3051,"loc":{"start":{"line":128,"column":14},"end":{"line":128,"column":20}},"name":"digest"},"computed":false},"arguments":[]}}]},"comments":[{"type":"Block","value":"*\n * Ensure that a user-provided `secret` is 32 bytes long (the length required\n * for an AES256 key) by hashing it with SHA256.\n *\n * @param {string|Buffer} secret\n ","start":2762,"end":2932,"loc":{"start":{"line":119,"column":0},"end":{"line":124,"column":3}}}]},{"type":"FunctionDeclaration","start":3135,"end":3191,"loc":{"start":{"line":136,"column":0},"end":{"line":138,"column":1}},"id":{"type":"Identifier","start":3144,"end":3152,"loc":{"start":{"line":136,"column":9},"end":{"line":136,"column":17}},"name":"createIv"},"expression":false,"generator":false,"async":false,"params":[],"body":{"type":"BlockStatement","start":3156,"end":3191,"loc":{"start":{"line":136,"column":21},"end":{"line":138,"column":1}},"body":[{"type":"ReturnStatement","start":3160,"end":3189,"loc":{"start":{"line":137,"column":2},"end":{"line":137,"column":31}},"argument":{"type":"CallExpression","start":3167,"end":3189,"loc":{"start":{"line":137,"column":9},"end":{"line":137,"column":31}},"callee":{"type":"MemberExpression","start":3167,"end":3185,"loc":{"start":{"line":137,"column":9},"end":{"line":137,"column":27}},"object":{"type":"Identifier","start":3167,"end":3173,"loc":{"start":{"line":137,"column":9},"end":{"line":137,"column":15}},"name":"crypto"},"property":{"type":"Identifier","start":3174,"end":3185,"loc":{"start":{"line":137,"column":16},"end":{"line":137,"column":27}},"name":"randomBytes"},"computed":false},"arguments":[{"type":"Literal","start":3186,"end":3188,"loc":{"start":{"line":137,"column":28},"end":{"line":137,"column":30}},"value":16,"raw":"16"}]}}]},"comments":[{"type":"Block","value":"*\n * Create an initialization vector for AES256.\n *\n * @return {Buffer}\n ","start":3057,"end":3134,"loc":{"start":{"line":131,"column":0},"end":{"line":135,"column":3}}}]},{"type":"FunctionDeclaration","start":3193,"end":3305,"loc":{"start":{"line":140,"column":0},"end":{"line":142,"column":1}},"id":{"type":"Identifier","start":3202,"end":3211,"loc":{"start":{"line":140,"column":9},"end":{"line":140,"column":18}},"name":"urlEncode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3213,"end":3222,"loc":{"start":{"line":140,"column":20},"end":{"line":140,"column":29}},"name":"unencoded"}],"body":{"type":"BlockStatement","start":3224,"end":3305,"loc":{"start":{"line":140,"column":31},"end":{"line":142,"column":1}},"body":[{"type":"ReturnStatement","start":3228,"end":3303,"loc":{"start":{"line":141,"column":2},"end":{"line":141,"column":77}},"argument":{"type":"CallExpression","start":3235,"end":3303,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":77}},"callee":{"type":"MemberExpression","start":3235,"end":3292,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":66}},"object":{"type":"CallExpression","start":3235,"end":3284,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":58}},"callee":{"type":"MemberExpression","start":3235,"end":3272,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":46}},"object":{"type":"CallExpression","start":3235,"end":3264,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":38}},"callee":{"type":"MemberExpression","start":3235,"end":3252,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":26}},"object":{"type":"Identifier","start":3235,"end":3244,"loc":{"start":{"line":141,"column":9},"end":{"line":141,"column":18}},"name":"unencoded"},"property":{"type":"Identifier","start":3245,"end":3252,"loc":{"start":{"line":141,"column":19},"end":{"line":141,"column":26}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3253,"end":3258,"loc":{"start":{"line":141,"column":27},"end":{"line":141,"column":32}},"value":{},"raw":"/\\+/g","regex":{"pattern":"\\+","flags":"g"}},{"type":"Literal","start":3260,"end":3263,"loc":{"start":{"line":141,"column":34},"end":{"line":141,"column":37}},"value":"-","raw":"'-'"}]},"property":{"type":"Identifier","start":3265,"end":3272,"loc":{"start":{"line":141,"column":39},"end":{"line":141,"column":46}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3273,"end":3278,"loc":{"start":{"line":141,"column":47},"end":{"line":141,"column":52}},"value":{},"raw":"/\\//g","regex":{"pattern":"\\/","flags":"g"}},{"type":"Literal","start":3280,"end":3283,"loc":{"start":{"line":141,"column":54},"end":{"line":141,"column":57}},"value":"_","raw":"'_'"}]},"property":{"type":"Identifier","start":3285,"end":3292,"loc":{"start":{"line":141,"column":59},"end":{"line":141,"column":66}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3293,"end":3297,"loc":{"start":{"line":141,"column":67},"end":{"line":141,"column":71}},"value":{},"raw":"/=/g","regex":{"pattern":"=","flags":"g"}},{"type":"Literal","start":3299,"end":3302,"loc":{"start":{"line":141,"column":73},"end":{"line":141,"column":76}},"value":"~","raw":"'~'"}]}}]}},{"type":"FunctionDeclaration","start":3307,"end":3433,"loc":{"start":{"line":144,"column":0},"end":{"line":147,"column":1}},"id":{"type":"Identifier","start":3316,"end":3325,"loc":{"start":{"line":144,"column":9},"end":{"line":144,"column":18}},"name":"urlDecode"},"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3327,"end":3334,"loc":{"start":{"line":144,"column":20},"end":{"line":144,"column":27}},"name":"encoded"}],"body":{"type":"BlockStatement","start":3336,"end":3433,"loc":{"start":{"line":144,"column":29},"end":{"line":147,"column":1}},"body":[{"type":"ExpressionStatement","start":3340,"end":3414,"loc":{"start":{"line":145,"column":2},"end":{"line":145,"column":76}},"expression":{"type":"AssignmentExpression","start":3340,"end":3414,"loc":{"start":{"line":145,"column":2},"end":{"line":145,"column":76}},"operator":"=","left":{"type":"Identifier","start":3340,"end":3347,"loc":{"start":{"line":145,"column":2},"end":{"line":145,"column":9}},"name":"encoded"},"right":{"type":"CallExpression","start":3350,"end":3414,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":76}},"callee":{"type":"MemberExpression","start":3350,"end":3403,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":65}},"object":{"type":"CallExpression","start":3350,"end":3395,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":57}},"callee":{"type":"MemberExpression","start":3350,"end":3384,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":46}},"object":{"type":"CallExpression","start":3350,"end":3376,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":38}},"callee":{"type":"MemberExpression","start":3350,"end":3365,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":27}},"object":{"type":"Identifier","start":3350,"end":3357,"loc":{"start":{"line":145,"column":12},"end":{"line":145,"column":19}},"name":"encoded"},"property":{"type":"Identifier","start":3358,"end":3365,"loc":{"start":{"line":145,"column":20},"end":{"line":145,"column":27}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3366,"end":3370,"loc":{"start":{"line":145,"column":28},"end":{"line":145,"column":32}},"value":{},"raw":"/-/g","regex":{"pattern":"-","flags":"g"}},{"type":"Literal","start":3372,"end":3375,"loc":{"start":{"line":145,"column":34},"end":{"line":145,"column":37}},"value":"+","raw":"'+'"}]},"property":{"type":"Identifier","start":3377,"end":3384,"loc":{"start":{"line":145,"column":39},"end":{"line":145,"column":46}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3385,"end":3389,"loc":{"start":{"line":145,"column":47},"end":{"line":145,"column":51}},"value":{},"raw":"/_/g","regex":{"pattern":"_","flags":"g"}},{"type":"Literal","start":3391,"end":3394,"loc":{"start":{"line":145,"column":53},"end":{"line":145,"column":56}},"value":"/","raw":"'/'"}]},"property":{"type":"Identifier","start":3396,"end":3403,"loc":{"start":{"line":145,"column":58},"end":{"line":145,"column":65}},"name":"replace"},"computed":false},"arguments":[{"type":"Literal","start":3404,"end":3408,"loc":{"start":{"line":145,"column":66},"end":{"line":145,"column":70}},"value":{},"raw":"/~/g","regex":{"pattern":"~","flags":"g"}},{"type":"Literal","start":3410,"end":3413,"loc":{"start":{"line":145,"column":72},"end":{"line":145,"column":75}},"value":"=","raw":"'='"}]}}},{"type":"ReturnStatement","start":3417,"end":3431,"loc":{"start":{"line":146,"column":2},"end":{"line":146,"column":16}},"argument":{"type":"Identifier","start":3424,"end":3431,"loc":{"start":{"line":146,"column":9},"end":{"line":146,"column":16}},"name":"encoded"}}]}},{"type":"ExpressionStatement","start":3662,"end":4008,"loc":{"start":{"line":156,"column":0},"end":{"line":163,"column":1}},"expression":{"type":"AssignmentExpression","start":3662,"end":4008,"loc":{"start":{"line":156,"column":0},"end":{"line":163,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":3662,"end":3684,"loc":{"start":{"line":156,"column":0},"end":{"line":156,"column":22}},"object":{"type":"MemberExpression","start":3662,"end":3676,"loc":{"start":{"line":156,"column":0},"end":{"line":156,"column":14}},"object":{"type":"Identifier","start":3662,"end":3668,"loc":{"start":{"line":156,"column":0},"end":{"line":156,"column":6}},"name":"module"},"property":{"type":"Identifier","start":3669,"end":3676,"loc":{"start":{"line":156,"column":7},"end":{"line":156,"column":14}},"name":"exports"},"computed":false},"property":{"type":"Identifier","start":3677,"end":3684,"loc":{"start":{"line":156,"column":15},"end":{"line":156,"column":22}},"name":"encrypt"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":3687,"end":4008,"loc":{"start":{"line":156,"column":25},"end":{"line":163,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":3688,"end":3693,"loc":{"start":{"line":156,"column":26},"end":{"line":156,"column":31}},"name":"input"},{"type":"Identifier","start":3695,"end":3701,"loc":{"start":{"line":156,"column":33},"end":{"line":156,"column":39}},"name":"secret"}],"body":{"type":"BlockStatement","start":3706,"end":4008,"loc":{"start":{"line":156,"column":44},"end":{"line":163,"column":1}},"body":[{"type":"VariableDeclaration","start":3710,"end":3731,"loc":{"start":{"line":157,"column":2},"end":{"line":157,"column":23}},"declarations":[{"type":"VariableDeclarator","start":3716,"end":3731,"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":23}},"id":{"type":"Identifier","start":3716,"end":3718,"loc":{"start":{"line":157,"column":8},"end":{"line":157,"column":10}},"name":"iv"},"init":{"type":"CallExpression","start":3721,"end":3731,"loc":{"start":{"line":157,"column":13},"end":{"line":157,"column":23}},"callee":{"type":"Identifier","start":3721,"end":3729,"loc":{"start":{"line":157,"column":13},"end":{"line":157,"column":21}},"name":"createIv"},"arguments":[]}}],"kind":"const"},{"type":"VariableDeclaration","start":3734,"end":3806,"loc":{"start":{"line":158,"column":2},"end":{"line":158,"column":74}},"declarations":[{"type":"VariableDeclarator","start":3740,"end":3806,"loc":{"start":{"line":158,"column":8},"end":{"line":158,"column":74}},"id":{"type":"Identifier","start":3740,"end":3746,"loc":{"start":{"line":158,"column":8},"end":{"line":158,"column":14}},"name":"cipher"},"init":{"type":"CallExpression","start":3749,"end":3806,"loc":{"start":{"line":158,"column":17},"end":{"line":158,"column":74}},"callee":{"type":"MemberExpression","start":3749,"end":3770,"loc":{"start":{"line":158,"column":17},"end":{"line":158,"column":38}},"object":{"type":"Identifier","start":3749,"end":3755,"loc":{"start":{"line":158,"column":17},"end":{"line":158,"column":23}},"name":"crypto"},"property":{"type":"Identifier","start":3756,"end":3770,"loc":{"start":{"line":158,"column":24},"end":{"line":158,"column":38}},"name":"createCipheriv"},"computed":false},"arguments":[{"type":"Literal","start":3771,"end":3779,"loc":{"start":{"line":158,"column":39},"end":{"line":158,"column":47}},"value":"aes256","raw":"'aes256'"},{"type":"CallExpression","start":3781,"end":3801,"loc":{"start":{"line":158,"column":49},"end":{"line":158,"column":69}},"callee":{"type":"Identifier","start":3781,"end":3793,"loc":{"start":{"line":158,"column":49},"end":{"line":158,"column":61}},"name":"createSecret"},"arguments":[{"type":"Identifier","start":3794,"end":3800,"loc":{"start":{"line":158,"column":62},"end":{"line":158,"column":68}},"name":"secret"}]},{"type":"Identifier","start":3803,"end":3805,"loc":{"start":{"line":158,"column":71},"end":{"line":158,"column":73}},"name":"iv"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":3809,"end":3863,"loc":{"start":{"line":159,"column":2},"end":{"line":159,"column":56}},"declarations":[{"type":"VariableDeclarator","start":3813,"end":3863,"loc":{"start":{"line":159,"column":6},"end":{"line":159,"column":56}},"id":{"type":"Identifier","start":3813,"end":3822,"loc":{"start":{"line":159,"column":6},"end":{"line":159,"column":15}},"name":"encrypted"},"init":{"type":"CallExpression","start":3825,"end":3863,"loc":{"start":{"line":159,"column":18},"end":{"line":159,"column":56}},"callee":{"type":"MemberExpression","start":3825,"end":3838,"loc":{"start":{"line":159,"column":18},"end":{"line":159,"column":31}},"object":{"type":"Identifier","start":3825,"end":3831,"loc":{"start":{"line":159,"column":18},"end":{"line":159,"column":24}},"name":"cipher"},"property":{"type":"Identifier","start":3832,"end":3838,"loc":{"start":{"line":159,"column":25},"end":{"line":159,"column":31}},"name":"update"},"computed":false},"arguments":[{"type":"Identifier","start":3839,"end":3844,"loc":{"start":{"line":159,"column":32},"end":{"line":159,"column":37}},"name":"input"},{"type":"Literal","start":3846,"end":3852,"loc":{"start":{"line":159,"column":39},"end":{"line":159,"column":45}},"value":"utf8","raw":"'utf8'"},{"type":"Literal","start":3854,"end":3862,"loc":{"start":{"line":159,"column":47},"end":{"line":159,"column":55}},"value":"base64","raw":"'base64'"}]}}],"kind":"let"},{"type":"ExpressionStatement","start":3866,"end":3901,"loc":{"start":{"line":160,"column":2},"end":{"line":160,"column":37}},"expression":{"type":"AssignmentExpression","start":3866,"end":3901,"loc":{"start":{"line":160,"column":2},"end":{"line":160,"column":37}},"operator":"+=","left":{"type":"Identifier","start":3866,"end":3875,"loc":{"start":{"line":160,"column":2},"end":{"line":160,"column":11}},"name":"encrypted"},"right":{"type":"CallExpression","start":3879,"end":3901,"loc":{"start":{"line":160,"column":15},"end":{"line":160,"column":37}},"callee":{"type":"MemberExpression","start":3879,"end":3891,"loc":{"start":{"line":160,"column":15},"end":{"line":160,"column":27}},"object":{"type":"Identifier","start":3879,"end":3885,"loc":{"start":{"line":160,"column":15},"end":{"line":160,"column":21}},"name":"cipher"},"property":{"type":"Identifier","start":3886,"end":3891,"loc":{"start":{"line":160,"column":22},"end":{"line":160,"column":27}},"name":"final"},"computed":false},"arguments":[{"type":"Literal","start":3892,"end":3900,"loc":{"start":{"line":160,"column":28},"end":{"line":160,"column":36}},"value":"base64","raw":"'base64'"}]}}},{"type":"ReturnStatement","start":3958,"end":4006,"loc":{"start":{"line":162,"column":2},"end":{"line":162,"column":50}},"argument":{"type":"BinaryExpression","start":3965,"end":4006,"loc":{"start":{"line":162,"column":9},"end":{"line":162,"column":50}},"left":{"type":"CallExpression","start":3965,"end":3983,"loc":{"start":{"line":162,"column":9},"end":{"line":162,"column":27}},"callee":{"type":"MemberExpression","start":3965,"end":3976,"loc":{"start":{"line":162,"column":9},"end":{"line":162,"column":20}},"object":{"type":"Identifier","start":3965,"end":3967,"loc":{"start":{"line":162,"column":9},"end":{"line":162,"column":11}},"name":"iv"},"property":{"type":"Identifier","start":3968,"end":3976,"loc":{"start":{"line":162,"column":12},"end":{"line":162,"column":20}},"name":"toString"},"computed":false},"arguments":[{"type":"Literal","start":3977,"end":3982,"loc":{"start":{"line":162,"column":21},"end":{"line":162,"column":26}},"value":"hex","raw":"'hex'"}]},"operator":"+","right":{"type":"CallExpression","start":3986,"end":4006,"loc":{"start":{"line":162,"column":30},"end":{"line":162,"column":50}},"callee":{"type":"Identifier","start":3986,"end":3995,"loc":{"start":{"line":162,"column":30},"end":{"line":162,"column":39}},"name":"urlEncode"},"arguments":[{"type":"Identifier","start":3996,"end":4005,"loc":{"start":{"line":162,"column":40},"end":{"line":162,"column":49}},"name":"encrypted"}]}},"comments":[{"type":"Line","value":" add iv to encrypted string to use for decryption","start":3904,"end":3955,"loc":{"start":{"line":161,"column":2},"end":{"line":161,"column":53}}}]}]}}},"comments":[{"type":"Block","value":"*\n * Encrypt a buffer or string with AES256 and a random iv.\n *\n * @param {string} input\n * @param {string|Buffer} secret\n * @return {string} Ciphertext as a hex string, prefixed with 32 hex characters containing the iv.\n ","start":3435,"end":3661,"loc":{"start":{"line":149,"column":0},"end":{"line":155,"column":3}}}]},{"type":"ExpressionStatement","start":4218,"end":4772,"loc":{"start":{"line":172,"column":0},"end":{"line":184,"column":1}},"expression":{"type":"AssignmentExpression","start":4218,"end":4772,"loc":{"start":{"line":172,"column":0},"end":{"line":184,"column":1}},"operator":"=","left":{"type":"MemberExpression","start":4218,"end":4240,"loc":{"start":{"line":172,"column":0},"end":{"line":172,"column":22}},"object":{"type":"MemberExpression","start":4218,"end":4232,"loc":{"start":{"line":172,"column":0},"end":{"line":172,"column":14}},"object":{"type":"Identifier","start":4218,"end":4224,"loc":{"start":{"line":172,"column":0},"end":{"line":172,"column":6}},"name":"module"},"property":{"type":"Identifier","start":4225,"end":4232,"loc":{"start":{"line":172,"column":7},"end":{"line":172,"column":14}},"name":"exports"},"computed":false},"property":{"type":"Identifier","start":4233,"end":4240,"loc":{"start":{"line":172,"column":15},"end":{"line":172,"column":22}},"name":"decrypt"},"computed":false},"right":{"type":"ArrowFunctionExpression","start":4243,"end":4772,"loc":{"start":{"line":172,"column":25},"end":{"line":184,"column":1}},"id":null,"expression":false,"generator":false,"async":false,"params":[{"type":"Identifier","start":4244,"end":4253,"loc":{"start":{"line":172,"column":26},"end":{"line":172,"column":35}},"name":"encrypted"},{"type":"Identifier","start":4255,"end":4261,"loc":{"start":{"line":172,"column":37},"end":{"line":172,"column":43}},"name":"secret"}],"body":{"type":"BlockStatement","start":4266,"end":4772,"loc":{"start":{"line":172,"column":48},"end":{"line":184,"column":1}},"body":[{"type":"IfStatement","start":4309,"end":4443,"loc":{"start":{"line":174,"column":2},"end":{"line":176,"column":3}},"test":{"type":"BinaryExpression","start":4313,"end":4334,"loc":{"start":{"line":174,"column":6},"end":{"line":174,"column":27}},"left":{"type":"MemberExpression","start":4313,"end":4329,"loc":{"start":{"line":174,"column":6},"end":{"line":174,"column":22}},"object":{"type":"Identifier","start":4313,"end":4322,"loc":{"start":{"line":174,"column":6},"end":{"line":174,"column":15}},"name":"encrypted"},"property":{"type":"Identifier","start":4323,"end":4329,"loc":{"start":{"line":174,"column":16},"end":{"line":174,"column":22}},"name":"length"},"computed":false},"operator":"<","right":{"type":"Literal","start":4332,"end":4334,"loc":{"start":{"line":174,"column":25},"end":{"line":174,"column":27}},"value":32,"raw":"32"}},"consequent":{"type":"BlockStatement","start":4336,"end":4443,"loc":{"start":{"line":174,"column":29},"end":{"line":176,"column":3}},"body":[{"type":"ThrowStatement","start":4342,"end":4439,"loc":{"start":{"line":175,"column":4},"end":{"line":175,"column":101}},"argument":{"type":"NewExpression","start":4348,"end":4439,"loc":{"start":{"line":175,"column":10},"end":{"line":175,"column":101}},"callee":{"type":"Identifier","start":4352,"end":4357,"loc":{"start":{"line":175,"column":14},"end":{"line":175,"column":19}},"name":"Error"},"arguments":[{"type":"Literal","start":4358,"end":4438,"loc":{"start":{"line":175,"column":20},"end":{"line":175,"column":100}},"value":"Invalid encrypted value. Maybe it was generated with an old Companion version?","raw":"'Invalid encrypted value. Maybe it was generated with an old Companion version?'"}]}}]},"alternate":null,"comments":[{"type":"Line","value":" Need at least 32 chars for the iv","start":4270,"end":4306,"loc":{"start":{"line":173,"column":2},"end":{"line":173,"column":38}}}]},{"type":"VariableDeclaration","start":4447,"end":4500,"loc":{"start":{"line":178,"column":2},"end":{"line":178,"column":55}},"declarations":[{"type":"VariableDeclarator","start":4453,"end":4500,"loc":{"start":{"line":178,"column":8},"end":{"line":178,"column":55}},"id":{"type":"Identifier","start":4453,"end":4455,"loc":{"start":{"line":178,"column":8},"end":{"line":178,"column":10}},"name":"iv"},"init":{"type":"CallExpression","start":4458,"end":4500,"loc":{"start":{"line":178,"column":13},"end":{"line":178,"column":55}},"callee":{"type":"MemberExpression","start":4458,"end":4469,"loc":{"start":{"line":178,"column":13},"end":{"line":178,"column":24}},"object":{"type":"Identifier","start":4458,"end":4464,"loc":{"start":{"line":178,"column":13},"end":{"line":178,"column":19}},"name":"Buffer"},"property":{"type":"Identifier","start":4465,"end":4469,"loc":{"start":{"line":178,"column":20},"end":{"line":178,"column":24}},"name":"from"},"computed":false},"arguments":[{"type":"CallExpression","start":4470,"end":4492,"loc":{"start":{"line":178,"column":25},"end":{"line":178,"column":47}},"callee":{"type":"MemberExpression","start":4470,"end":4485,"loc":{"start":{"line":178,"column":25},"end":{"line":178,"column":40}},"object":{"type":"Identifier","start":4470,"end":4479,"loc":{"start":{"line":178,"column":25},"end":{"line":178,"column":34}},"name":"encrypted"},"property":{"type":"Identifier","start":4480,"end":4485,"loc":{"start":{"line":178,"column":35},"end":{"line":178,"column":40}},"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":4486,"end":4487,"loc":{"start":{"line":178,"column":41},"end":{"line":178,"column":42}},"value":0,"raw":"0"},{"type":"Literal","start":4489,"end":4491,"loc":{"start":{"line":178,"column":44},"end":{"line":178,"column":46}},"value":32,"raw":"32"}]},{"type":"Literal","start":4494,"end":4499,"loc":{"start":{"line":178,"column":49},"end":{"line":178,"column":54}},"value":"hex","raw":"'hex'"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4503,"end":4550,"loc":{"start":{"line":179,"column":2},"end":{"line":179,"column":49}},"declarations":[{"type":"VariableDeclarator","start":4509,"end":4550,"loc":{"start":{"line":179,"column":8},"end":{"line":179,"column":49}},"id":{"type":"Identifier","start":4509,"end":4528,"loc":{"start":{"line":179,"column":8},"end":{"line":179,"column":27}},"name":"encryptionWithoutIv"},"init":{"type":"CallExpression","start":4531,"end":4550,"loc":{"start":{"line":179,"column":30},"end":{"line":179,"column":49}},"callee":{"type":"MemberExpression","start":4531,"end":4546,"loc":{"start":{"line":179,"column":30},"end":{"line":179,"column":45}},"object":{"type":"Identifier","start":4531,"end":4540,"loc":{"start":{"line":179,"column":30},"end":{"line":179,"column":39}},"name":"encrypted"},"property":{"type":"Identifier","start":4541,"end":4546,"loc":{"start":{"line":179,"column":40},"end":{"line":179,"column":45}},"name":"slice"},"computed":false},"arguments":[{"type":"Literal","start":4547,"end":4549,"loc":{"start":{"line":179,"column":46},"end":{"line":179,"column":48}},"value":32,"raw":"32"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4553,"end":4629,"loc":{"start":{"line":180,"column":2},"end":{"line":180,"column":78}},"declarations":[{"type":"VariableDeclarator","start":4559,"end":4629,"loc":{"start":{"line":180,"column":8},"end":{"line":180,"column":78}},"id":{"type":"Identifier","start":4559,"end":4567,"loc":{"start":{"line":180,"column":8},"end":{"line":180,"column":16}},"name":"decipher"},"init":{"type":"CallExpression","start":4570,"end":4629,"loc":{"start":{"line":180,"column":19},"end":{"line":180,"column":78}},"callee":{"type":"MemberExpression","start":4570,"end":4593,"loc":{"start":{"line":180,"column":19},"end":{"line":180,"column":42}},"object":{"type":"Identifier","start":4570,"end":4576,"loc":{"start":{"line":180,"column":19},"end":{"line":180,"column":25}},"name":"crypto"},"property":{"type":"Identifier","start":4577,"end":4593,"loc":{"start":{"line":180,"column":26},"end":{"line":180,"column":42}},"name":"createDecipheriv"},"computed":false},"arguments":[{"type":"Literal","start":4594,"end":4602,"loc":{"start":{"line":180,"column":43},"end":{"line":180,"column":51}},"value":"aes256","raw":"'aes256'"},{"type":"CallExpression","start":4604,"end":4624,"loc":{"start":{"line":180,"column":53},"end":{"line":180,"column":73}},"callee":{"type":"Identifier","start":4604,"end":4616,"loc":{"start":{"line":180,"column":53},"end":{"line":180,"column":65}},"name":"createSecret"},"arguments":[{"type":"Identifier","start":4617,"end":4623,"loc":{"start":{"line":180,"column":66},"end":{"line":180,"column":72}},"name":"secret"}]},{"type":"Identifier","start":4626,"end":4628,"loc":{"start":{"line":180,"column":75},"end":{"line":180,"column":77}},"name":"iv"}]}}],"kind":"const"},{"type":"VariableDeclaration","start":4632,"end":4713,"loc":{"start":{"line":181,"column":2},"end":{"line":181,"column":83}},"declarations":[{"type":"VariableDeclarator","start":4636,"end":4713,"loc":{"start":{"line":181,"column":6},"end":{"line":181,"column":83}},"id":{"type":"Identifier","start":4636,"end":4645,"loc":{"start":{"line":181,"column":6},"end":{"line":181,"column":15}},"name":"decrypted"},"init":{"type":"CallExpression","start":4648,"end":4713,"loc":{"start":{"line":181,"column":18},"end":{"line":181,"column":83}},"callee":{"type":"MemberExpression","start":4648,"end":4663,"loc":{"start":{"line":181,"column":18},"end":{"line":181,"column":33}},"object":{"type":"Identifier","start":4648,"end":4656,"loc":{"start":{"line":181,"column":18},"end":{"line":181,"column":26}},"name":"decipher"},"property":{"type":"Identifier","start":4657,"end":4663,"loc":{"start":{"line":181,"column":27},"end":{"line":181,"column":33}},"name":"update"},"computed":false},"arguments":[{"type":"CallExpression","start":4664,"end":4694,"loc":{"start":{"line":181,"column":34},"end":{"line":181,"column":64}},"callee":{"type":"Identifier","start":4664,"end":4673,"loc":{"start":{"line":181,"column":34},"end":{"line":181,"column":43}},"name":"urlDecode"},"arguments":[{"type":"Identifier","start":4674,"end":4693,"loc":{"start":{"line":181,"column":44},"end":{"line":181,"column":63}},"name":"encryptionWithoutIv"}]},{"type":"Literal","start":4696,"end":4704,"loc":{"start":{"line":181,"column":66},"end":{"line":181,"column":74}},"value":"base64","raw":"'base64'"},{"type":"Literal","start":4706,"end":4712,"loc":{"start":{"line":181,"column":76},"end":{"line":181,"column":82}},"value":"utf8","raw":"'utf8'"}]}}],"kind":"let"},{"type":"ExpressionStatement","start":4716,"end":4751,"loc":{"start":{"line":182,"column":2},"end":{"line":182,"column":37}},"expression":{"type":"AssignmentExpression","start":4716,"end":4751,"loc":{"start":{"line":182,"column":2},"end":{"line":182,"column":37}},"operator":"+=","left":{"type":"Identifier","start":4716,"end":4725,"loc":{"start":{"line":182,"column":2},"end":{"line":182,"column":11}},"name":"decrypted"},"right":{"type":"CallExpression","start":4729,"end":4751,"loc":{"start":{"line":182,"column":15},"end":{"line":182,"column":37}},"callee":{"type":"MemberExpression","start":4729,"end":4743,"loc":{"start":{"line":182,"column":15},"end":{"line":182,"column":29}},"object":{"type":"Identifier","start":4729,"end":4737,"loc":{"start":{"line":182,"column":15},"end":{"line":182,"column":23}},"name":"decipher"},"property":{"type":"Identifier","start":4738,"end":4743,"loc":{"start":{"line":182,"column":24},"end":{"line":182,"column":29}},"name":"final"},"computed":false},"arguments":[{"type":"Literal","start":4744,"end":4750,"loc":{"start":{"line":182,"column":30},"end":{"line":182,"column":36}},"value":"utf8","raw":"'utf8'"}]}}},{"type":"ReturnStatement","start":4754,"end":4770,"loc":{"start":{"line":183,"column":2},"end":{"line":183,"column":18}},"argument":{"type":"Identifier","start":4761,"end":4770,"loc":{"start":{"line":183,"column":9},"end":{"line":183,"column":18}},"name":"decrypted"}}]}}},"comments":[{"type":"Block","value":"*\n * Decrypt an iv-prefixed or string with AES256. The iv should be in the first 32 hex characters.\n *\n * @param {string} encrypted\n * @param {string|Buffer} secret\n * @return {string} Decrypted value.\n ","start":4010,"end":4217,"loc":{"start":{"line":165,"column":0},"end":{"line":171,"column":3}}}]}],"sourceType":"script"}